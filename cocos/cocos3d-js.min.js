"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="undefined"==typeof window?global:window,t=e.cc=e.cc||{};t.internal=t.internal||{},t._global=e,e.CC_BUILD=!0,e.CC_TEST=!1,e.CC_EDITOR=!1,e.CC_PREVIEW=!1,e.CC_DEV=!1,e.CC_DEBUG=!1,e.CC_JSB=!1,e.CC_WECHAT=!0,e.CC_ALIPAY=!1,e.CC_XIAOMI=!1,e.CC_BAIDU=!1,e.CC_COCOSPLAY=!1,e.CC_MINIGAME=!0,e.CC_RUNTIME_BASED=!1,e.CC_SUPPORT_JIT=!1,e.CC_PHYSICS_BUILTIN=!1,e.CC_PHYSICS_CANNON=!1,e.CC_PHYSICS_AMMO=!0;e.CocosEngine=t.ENGINE_VERSION="1.1.1",Object.defineProperty(e,"CC_PHYSICS_BUILT_IN",{get:function(){return console.warn("CC_PHYSICS_BUILT_IN is deprecated, please using CC_PHYSICS_BUILTIN instead."),e.CC_PHYSICS_BUILTIN}});var i="https://github.com/cocos-creator/engine/blob/3d/EngineErrorMap.md",n=null,r=console.log,o=console.log,a=console.log,s=function(e,t){if(!e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];console.log("ASSERT: "+l.apply(void 0,[t].concat(n)))}};function l(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return cc.js.formatStr.apply(null,[e].concat(i))}function c(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return r.apply(void 0,[e].concat(i))}function u(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return o.apply(void 0,[e].concat(i))}function h(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return a.apply(void 0,[e].concat(i))}function p(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return s.apply(void 0,[e,t].concat(n))}function f(e){if(r=o=a=s=function(){},e!==x.NONE){if(e>x.ERROR){var t=function(e){if(cc.game.canvas){if(!n){var t=document.createElement("Div");t.setAttribute("id","logInfoDiv"),t.setAttribute("width","200"),t.setAttribute("height",cc.game.canvas.height);var i=t.style;i.zIndex="99999",i.position="absolute",i.top=i.left="0",(n=document.createElement("textarea")).setAttribute("rows","20"),n.setAttribute("cols","30"),n.setAttribute("disabled","true");var r=n.style;r.backgroundColor="transparent",r.borderBottom="1px solid #cccccc",r.borderTopWidth=r.borderLeftWidth=r.borderRightWidth="0px",r.borderTopStyle=r.borderLeftStyle=r.borderRightStyle="none",r.padding="0px",r.margin="0px",t.appendChild(n),cc.game.canvas.parentNode.appendChild(t)}n.value=n.value+e+"\r\n",n.scrollTop=n.scrollHeight}};a=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t("ERROR :  "+l.apply(void 0,[e].concat(n)))},s=function(e,i){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t("ASSERT: "+l.apply(void 0,[i].concat(r)))}},e!==x.ERROR_FOR_WEB_PAGE&&(o=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t("WARN :  "+l.apply(void 0,[e].concat(n)))}),e===x.INFO_FOR_WEB_PAGE&&(r=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t(l.apply(void 0,[e].concat(n)))})}else console&&console.log.apply&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),a=console.error.bind?console.error.bind(console):function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return console.error.apply(console,[e].concat(i))},s=function(e,t){if(!e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var o=l.apply(void 0,[t].concat(n));throw new Error(o)}});e!==x.ERROR&&(o=console.warn.bind?console.warn.bind(console):function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return console.warn.apply(console,[e].concat(i))}),e===x.INFO&&(r=console.log.bind?console.log.bind(console):function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return console.log.apply(console,[e].concat(i))})}}function _(e){var t=e.stack;h(t||e)}function d(e){return function(t){for(var n="".concat(e," ").concat(t,", please go to ").concat(i,"#").concat(t," to see details."),r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return 0===o.length?n:n+" Arguments: "+o.join(", ")}}var m=d("Log");function v(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];c(m.apply(void 0,[e].concat(i)))}var y=d("Warning");function g(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];u(y.apply(void 0,[e].concat(i)))}var A=d("Error");function b(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];h(A.apply(void 0,[e].concat(i)))}var x,T=d("Assert");function S(e,t){if(!e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];p(!1,T.apply(void 0,[t].concat(n)))}}function E(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return A.apply(void 0,[e].concat(i))}function C(){return!!cc.profiler&&cc.profiler.isShowingStats()}function w(e){cc.profiler&&(e?cc.profiler.showStats():cc.profiler.hideStats(),cc.game.config.showFPS=!!e)}!function(e){e[e.NONE=0]="NONE",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.INFO_FOR_WEB_PAGE=4]="INFO_FOR_WEB_PAGE",e[e.WARN_FOR_WEB_PAGE=5]="WARN_FOR_WEB_PAGE",e[e.ERROR_FOR_WEB_PAGE=6]="ERROR_FOR_WEB_PAGE"}(x||(x={}));var k=Object.freeze({__proto__:null,log:c,warn:u,error:h,assert:p,_resetDebugSetting:f,_throw:_,logID:v,warnID:g,errorID:b,assertID:S,get DebugMode(){return x},getError:E,isDisplayStats:C,setDisplayStats:w}),O=/(\.[^\.\/\?\\]*)(\?.*)?$/,R=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,F=/[^\.\/]+\/\.\.\//;function I(){for(var e="",t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(var r=0,o=i;r<o.length;r++){var a=o[r];e=(e+(""===e?"":"/")+a).replace(/(\/|\\\\)$/,"")}return e}function M(e){var t=O.exec(e);return t?t[1]:""}function P(e){if(e){var t=e.lastIndexOf(".");if(-1!==t)return e.substring(0,t)}return e}function D(e,t){var i=e.indexOf("?");i>0&&(e=e.substring(0,i));var n=/(\/|\\)([^\/\\]+)$/g.exec(e.replace(/(\/|\\)$/,""));if(!n)return"";var r=n[2];return t&&e.substring(e.length-t.length).toLowerCase()===t.toLowerCase()?r.substring(0,r.length-t.length):r}function B(e){var t=R.exec(e);return t?t[2]:""}function N(e,t){t=t||"";var i=e.indexOf("?"),n="";return i>0&&(n=e.substring(i),e=e.substring(0,i)),(i=e.lastIndexOf("."))<0?e+t+n:e.substring(0,i)+t+n}function L(e,t,i){if(0===t.indexOf("."))return N(e,t);var n=e.indexOf("?"),r="",o=i?M(e):"";return n>0&&(r=e.substring(n),e=e.substring(0,n)),n=(n=e.lastIndexOf("/"))<=0?0:n+1,e.substring(0,n)+t+o+r}function z(e){var t=e=String(e);do{t=e,e=e.replace(F,"")}while(t.length!==e.length);return e}function G(e){return e.replace(/[\/\\]$/,"")}function U(){return cc.sys.os===cc.sys.OS_WINDOWS?"\\":"/"}var X=Object.freeze({__proto__:null,join:I,extname:M,mainFileName:P,basename:D,dirname:B,changeExtname:N,changeBasename:L,_normalize:z,stripSep:G,getSeperator:U});cc.log=c,cc.warn=u,cc.error=h,cc.assert=p,cc._throw=_,cc.logID=v,cc.warnID=g,cc.errorID=b,cc.assertID=S,cc.debug=k,cc.path={join:I,extname:M,mainFileName:P,basename:D,dirname:B,changeExtname:N,changeBasename:L,_normalize:z,stripSep:G,get sep(){return U()}};var V={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256,SHAPE_CAPSULE:512};function H(e){return(e>0)-(e<0)}function j(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}function W(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}var Y=new Array(256);!function(e){for(var t=0;t<256;++t){var i=t,n=t,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;e[t]=n<<r&255}}(Y);var q=Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:2147483647,INT_MIN:-1<<31,sign:H,abs:function(e){var t=e>>31;return(e^t)-t},min:function(e,t){return t^(e^t)&-(e<t)},max:function(e,t){return e^(e^t)&-(e<t)},isPow2:function(e){return!(e&e-1||!e)},log2:function(e){var t,i;return t=(e>65535)<<4,t|=i=((e>>>=t)>255)<<3,t|=i=((e>>>=i)>15)<<2,(t|=i=((e>>>=i)>3)<<1)|(e>>>=i)>>1},log10:function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},popCount:function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},countTrailingZeros:j,nextPow2:W,prevPow2:function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},parity:function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1},reverse:function(e){return Y[255&e]<<24|Y[e>>>8&255]<<16|Y[e>>>16&255]<<8|Y[e>>>24&255]},interleave2:function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},deinterleave2:function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},interleave3:function(e,t,i){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},deinterleave3:function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},nextCombination:function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>j(e)+1}});function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t,i){return t&&K(e.prototype,t),i&&K(e,i),e}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ne(e):t}function oe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}function ae(e,t,i){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=oe(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function se(e,t,i,n){return(se="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,i,n){var r,o=oe(e,t);if(o){if((r=Object.getOwnPropertyDescriptor(o,t)).set)return r.set.call(n,i),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(n,t)){if(!r.writable)return!1;r.value=i,Object.defineProperty(n,t,r)}else $(n,t,i);return!0})(e,t,i,n)}function le(e,t,i,n,r){if(!se(e,t,i,n||e)&&r)throw new Error("failed to set property");return i}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(e,t)||he(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||he(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){if(e){if("string"==typeof e)return pe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function fe(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=he(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function _e(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function de(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var me=function(){function e(t){Z(this,e),this.i=0,this.array=t}return J(e,[{key:"remove",value:function(e){var t=this.array.indexOf(e);t>=0&&this.removeAt(t)}},{key:"removeAt",value:function(e){this.array.splice(e,1),e<=this.i&&--this.i}},{key:"fastRemove",value:function(e){var t=this.array.indexOf(e);t>=0&&this.fastRemoveAt(t)}},{key:"fastRemoveAt",value:function(e){var t=this.array;t[e]=t[t.length-1],--t.length,e<=this.i&&--this.i}},{key:"push",value:function(e){this.array.push(e)}},{key:"length",get:function(){return this.array.length},set:function(e){this.array.length=e,this.i>=e&&(this.i=e-1)}}]),e}();function ve(e,t){e.splice(t,1)}function ye(e,t){var i=e.indexOf(t);return i>=0&&(ve(e,i),!0)}function ge(e,t){return e.indexOf(t)>=0}var Ae=Object.freeze({__proto__:null,removeAt:ve,fastRemoveAt:function(e,t){var i=e.length;t<0||t>=i||(e[t]=e[i-1],e.length=i-1)},remove:ye,fastRemove:function(e,t){var i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],--e.length)},removeIf:function(e,t){var i=e.findIndex(t);if(i>=0){var n=e[i];return ve(e,i),n}},verifyType:function(e,t){if(e&&e.length>0)for(var i,n=fe(e);!(i=n()).done;){if(!(i.value instanceof t))return cc.logID(1300),!1}return!0},removeArray:function(e,t){for(var i=0,n=t.length;i<n;i++)ye(e,t[i])},appendObjectsAt:function(e,t,i){return e.splice.apply(e,[i,0].concat(ue(t))),e},contains:ge,copy:function(e){for(var t=e.length,i=new Array(t),n=0;n<t;n+=1)i[n]=e[n];return i},MutableForwardIterator:me}),be=function(){function e(t){Z(this,e),this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=t?t+".":""}return J(e,[{key:"getNewId",value:function(){return this.prefix+ ++this.id}}]),e}();be.global=new be("global");var xe=new be("TmpCId.");function Te(e){return"number"==typeof e||e instanceof Number}function Se(e){return"string"==typeof e||e instanceof String}var Ee,Ce=(Ee={value:void 0,enumerable:!1,writable:!1,configurable:!0},function(e,t,i,n,r){Ee.value=i,Ee.writable=n,Ee.enumerable=r,Object.defineProperty(e,t,Ee),Ee.value=void 0}),we=function(){var e={get:void 0,set:void 0,enumerable:!1};return function(t,i,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"boolean"==typeof r&&(o=r,r=void 0),e.get=n,e.set=r,e.enumerable=o,e.configurable=a,Object.defineProperty(t,i,e),e.get=void 0,e.set=void 0}}(),ke=function(){var e={get:void 0,enumerable:!1,configurable:!1};return function(t,i,n,r,o){e.get=n,e.enumerable=r,e.configurable=o,Object.defineProperty(t,i,e),e.get=void 0}}(),Oe=function(){var e={set:void 0,enumerable:!1,configurable:!1};return function(t,i,n,r,o){e.set=n,e.enumerable=r,e.configurable=o,Object.defineProperty(t,i,e),e.set=void 0}}();function Re(e){var t=Object.create(null);if(e){t["."]=!0,t["/"]=!0,delete t["."],delete t["/"]}return t}function Fe(e){if("function"==typeof e){var t=e.prototype;if(t&&t.hasOwnProperty("__classname__")&&t.__classname__)return t.__classname__;var i="";if(e.name&&(i=e.name),e.toString){var n,r=e.toString();(n="["===r.charAt(0)?r.match(/\[\w+\s*(\w+)\]/):r.match(/function\s*(\w+)/))&&2===n.length&&(i=n[1])}return"Object"!==i?i:""}return e&&e.constructor?Fe(e.constructor):""}function Ie(e,t,i,n){var r=/([^.]+)$/,o=r.exec(t)[0],a=r.exec(i)[0];function s(){return this[a]}n?we(e,o,s,(function(e){this[a]=e})):ke(e,o,s)}function Me(e,t,i,n){for(var r in i){Ie(e,t+"."+r,i[r],n)}}var Pe=/(%d)|(%s)/,De=/%s/;function Be(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(0===arguments.length)return"";if(0===i.length)return""+e;var r="string"==typeof e&&Pe.test(e);if(r)for(var o,a=fe(i);!(o=a()).done;){var s=o.value,l="number"==typeof s?Pe:De;l.test(e)?e=e.replace(l,s):e+=" "+s}else for(var c,u=fe(i);!(c=u()).done;){var h=c.value;e+=" "+h}return e}function Ne(){for(var e=arguments.length-1,t=new Array(e),i=0;i<e;++i)t[i]=arguments[i+1];return t}function Le(e,t){for(;e;){var i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;e=Object.getPrototypeOf(e)}return null}function ze(e,t,i){var n=Le(t,e);n&&Object.defineProperty(i,e,n)}function Ge(e){e=e||{};for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,o=i;r<o.length;r++){var a=o[r];if(a){if("object"!==Q(a)){cc.errorID(5402,a);continue}for(var s in a)s in e||ze(s,a,e)}}return e}function Ue(e){e=e||{};for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,o=i;r<o.length;r++){var a=o[r];if(a){if("object"!==Q(a)){cc.errorID(5403,a);continue}for(var s in a)ze(s,a,e)}}return e}function Xe(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),e}function Ve(e){var t=e.prototype,i=t&&Object.getPrototypeOf(t);return i&&i.constructor}function He(e,t){if(e&&t){if("function"!=typeof e)return!1;if("function"!=typeof t)return!1;if(e===t)return!0;for(;;){if(!(e=Ve(e)))return!1;if(e===t)return!0}}return!1}function je(e){for(var t=0,i=Object.keys(e);t<i.length;t++){delete e[i[t]]}}var We={},Ye={};function qe(e,t){var i="__cid__",n=We;if(t.prototype.hasOwnProperty(i)&&delete n[t.prototype[i]],Ce(t.prototype,i,e),e){var r=n[e];if(r&&r!==t){var o="A Class already exists with the same "+i+' : "'+e+'".';cc.error(o)}else n[e]=t}}function Qe(e,t){if(function(e,t){var i="__classname__",n=Ye;if(t.prototype.hasOwnProperty(i)&&delete n[t.prototype[i]],Ce(t.prototype,i,e),e){var r=n[e];if(r&&r!==t){var o="A Class already exists with the same "+i+' : "'+e+'".';cc.error(o)}else n[e]=t}}(e,t),!t.prototype.hasOwnProperty("__cid__")){var i=e||xe.getNewId();i&&qe(i,t)}}function Ze(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n=0,r=t;n<r.length;n++){var o=r[n],a=o.prototype,s=a.__cid__;s&&delete We[s];var l=a.__classname__;l&&delete Ye[l]}}function Ke(e){return We[e]}function Je(e){return Ye[e]}function $e(e,t){if(t=void 0===t||t,"function"==typeof e&&e.prototype.hasOwnProperty("__cid__"))return e.prototype.__cid__;if(e&&e.constructor){var i=e.constructor.prototype;if(i&&i.hasOwnProperty("__cid__"))return e.__cid__}return""}var et=function(){function e(t,i){Z(this,e),this.count=void 0,this._pool=void 0,this._cleanup=void 0;var n=void 0===i?t:i,r=void 0===i?null:t;this.count=0,this._pool=new Array(n),this._cleanup=r}return J(e,[{key:"get",value:function(){return this._get()}}]),J(e,[{key:"_get",value:function(){if(this.count>0){--this.count;var e=this._pool[this.count];return this._pool[this.count]=null,e}return null}},{key:"put",value:function(e){var t=this._pool;if(this.count<t.length){if(this._cleanup&&!1===this._cleanup(e))return;t[this.count]=e,++this.count}}},{key:"resize",value:function(e){e>=0&&(this._pool.length=e,this.count>e&&(this.count=e))}}]),e}(),tt=Ae,it={IDGenerator:be,Pool:et,array:Ae,isNumber:Te,isString:Se,getPropertyDescriptor:Le,addon:Ge,mixin:Ue,extend:Xe,getSuper:Ve,isChildClassOf:He,clear:je,value:Ce,getset:we,get:ke,set:Oe,unregisterClass:Ze,getClassName:Fe,setClassName:Qe,getClassByName:Je,_getClassId:$e,_setClassId:qe,_getClassById:Ke,obsolete:Ie,obsoletes:Me,formatStr:Be,shiftArguments:Ne,createMap:Re};cc.js=it;for(var nt=Object.freeze({__proto__:null,array:tt,js:it,IDGenerator:be,Pool:et,isNumber:Te,isString:Se,value:Ce,getset:we,get:ke,set:Oe,createMap:Re,getClassName:Fe,obsolete:Ie,obsoletes:Me,formatStr:Be,shiftArguments:Ne,getPropertyDescriptor:Le,addon:Ge,mixin:Ue,extend:Xe,getSuper:Ve,isChildClassOf:He,clear:je,_idToClass:We,_nameToClass:Ye,_setClassId:qe,setClassName:Qe,unregisterClass:Ze,_getClassById:Ke,getClassByName:Je,_getClassId:$e}),rt=/^(?:cc|dragonBones|sp|ccsg)\..+/,ot=new Array(123),at=0;at<123;++at)ot[at]=64;for(var st=0;st<64;++st)ot["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(st)]=st;var lt=ot;function ct(e,t,i){function n(e,t,i,n){var r=Object.getOwnPropertyDescriptor(e,t);if(r)r.get&&(e[i]=r.get),r.set&&n&&(e[n]=r.set);else{var o=e[i];we(e,t,o,e[n])}}for(var r,o=e.prototype,a=0;a<t.length;a++){var s=(r=t[a])[0].toUpperCase()+r.slice(1);n(o,r,"get"+s,"set"+s)}for(r in i){var l=i[r];n(o,r,l[0],l[1])}}function ut(e){return e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}function ht(e,t,i,n){var r=e[t];r?Array.isArray(r)?n?(r.push(r[0]),r[0]=i):r.push(i):e[t]=n?[i,r]:[r,i]:e[t]=i}function pt(e,t){if("function"==typeof e.contains)return e.contains(t);if("function"==typeof e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));var i=t.parentNode;if(i)do{if(i===e)return!0;i=i.parentNode}while(null!==i);return!1}function ft(e){return"object"===("undefined"==typeof window?"undefined":Q(window))&&"function"==typeof Node?e instanceof Node:e&&"object"===Q(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function _t(e,t,i){e&&setTimeout((function(){e(t,i)}),0)}function dt(e){return Function("target","try {\n  target."+e+"();\n}\ncatch (e) {\n  cc._throw(e);\n}")}function mt(e){if(!e||e.constructor!==Object)return!1;for(var t in e)return!1;return!0}function vt(e){return e&&"function"==typeof e.clone&&(e.constructor&&e.constructor.prototype.hasOwnProperty("clone")||e.hasOwnProperty("clone"))}cc.misc={BUILTIN_CLASSID_RE:rt,BASE64_VALUES:lt,propertyDefine:ct,nextPOT:ut,pushToMap:ht,contains:pt,isDomNode:ft,callInNextTick:_t,tryCatchFunctor_EDITOR:dt,isPlainEmptyObj_DEV:mt,cloneable_DEV:vt};var yt=Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:rt,BASE64_VALUES:lt,propertyDefine:ct,nextPOT:ut,pushToMap:ht,contains:pt,isDomNode:ft,callInNextTick:_t,tryCatchFunctor_EDITOR:dt,isPlainEmptyObj_DEV:mt,cloneable_DEV:vt});function gt(e){if("__bitmask__"in e)return e;Ce(e,"__bitmask__",null,!0);for(var t=-1,i=Object.keys(e),n=0;n<i.length;n++){var r=i[n],o=e[r];if(-1===o)o=++t,e[r]=o;else if("number"==typeof o)t=o;else if("string"==typeof o&&Number.isInteger(parseFloat(r)))continue;var a=""+o;r!==a&&Ce(e,a,r)}return e}function At(e){if("__enums__"in e)return e;Ce(e,"__enums__",null,!0);for(var t=-1,i=Object.keys(e),n=0;n<i.length;n++){var r=i[n],o=e[r];if(-1===o)o=++t,e[r]=o;else if("number"==typeof o)t=o;else if("string"==typeof o&&Number.isInteger(parseFloat(r)))continue;var a=""+o;r!==a&&Ce(e,a,r)}return e}function bt(e){"__enums__"in e||Ce(e,"__enums__",null,!0)}gt.isBitMask=function(e){return e&&e.hasOwnProperty("__bitmask__")},gt.getList=function(e){if(e.__bitmask__)return e.__bitmask__;var t=e.__bitmask__=[];for(var i in e){var n=e[i];Number.isInteger(n)&&t.push({name:i,value:n})}return t.sort((function(e,t){return e.value-t.value})),t},cc.BitMask=gt,At.isEnum=function(e){return e&&e.hasOwnProperty("__enums__")},At.getList=function(e){if(e.__enums__)return e.__enums__;var t=e.__enums__=[];for(var i in e){var n=e[i];Number.isInteger(n)&&t.push({name:i,value:n})}return t.sort((function(e,t){return e.value-t.value})),t},cc.Enum=At;var xt=function(){function e(){Z(this,e)}return J(e,[{key:"clone",value:function(){return b(100,Fe(this)+".clone"),this}},{key:"equals",value:function(e){return!1}},{key:"set",value:function(e){b(100,Fe(this)+".set")}},{key:"toString",value:function(){return""+{}}}]),e}();Qe("cc.ValueType",xt),cc.ValueType=xt;function Tt(e,t,i){var n;n=function(){},i&&Xe(n,i.constructor);var r=new n;return Ce(e,"__attrs__",r),r}function St(e){for(var t,i=cc.Class.getInheritanceChain(e),n=i.length-1;n>=0;n--){var r=i[n];r.hasOwnProperty("__attrs__")&&r.__attrs__||Tt(r,0,(t=i[n+1])&&t.__attrs__)}return Tt(e,0,(t=i[0])&&t.__attrs__),e.__attrs__}function Et(e,t,i){var n,r;if("function"==typeof e)r=(n=Ct(e)).constructor.prototype;else{var o=e;if(!(n=o.__attrs__))n=Tt(o,0,Ct(e=o.constructor));r=n}if(void 0===i){var a=t+"$_$",s={};for(var l in n)l.startsWith(a)&&(s[l.slice(a.length)]=n[l]);return s}if("object"===Q(i))for(var c in i)95!==c.charCodeAt(0)&&(r[t+"$_$"+c]=i[c])}function Ct(e){return e.hasOwnProperty("__attrs__")&&e.__attrs__||St(e)}function wt(e){return Ct(e).constructor.prototype}function kt(e,t,i,n){wt(e)[t+"$_$"+i]=n}var Ot=function(){function e(t,i){Z(this,e),this.name=void 0,this.default=void 0,this.name=t,this.default=i}return J(e,[{key:"toString",value:function(){return this.name}}]),e}(),Rt=new Ot("Integer",0);cc.Integer=Rt,cc.CCInteger=Rt;var Ft=new Ot("Float",0);cc.Float=Ft,cc.CCFloat=Ft;var It=new Ot("Boolean",!1);cc.Boolean=It,cc.CCBoolean=It;var Mt=new Ot("String","");function Pt(e,t){return function(i,n){var r='"'+Fe(i)+"."+n+'"',o=Et(i,n);if(!o.saveUrlAsAsset){var a=o.type;if(a===Rt||a===Ft?a="Number":a!==Mt&&a!==It||(a=a.toString()),a!==e)return void g(3604,r)}if(o.hasOwnProperty("default")){var s=o.default;if(void 0!==s)if(!(Array.isArray(s)||mt(s))){var l=Q(s),c=e.toLowerCase();if(l===c){if(!o.saveUrlAsAsset)if("object"===c){if(!s||s instanceof o.ctor)return;g(3605,r,Fe(o.ctor))}else"Number"!==e&&g(3606,t,r,e)}else{if("function"===l)return;e===Mt.default&&null==s?He(o.ctor,cc.RawAsset)||g(3607,r):g(3611,t,r,l)}delete o.type}}}}cc.String=Mt,cc.CCString=Mt;var Dt=Object.freeze({__proto__:null,DELIMETER:"$_$",createAttrsSingle:Tt,createAttrs:St,attr:Et,getClassAttrs:Ct,getClassAttrsProto:wt,setClassAttr:kt,PrimitiveType:Ot,CCInteger:Rt,CCFloat:Ft,CCBoolean:It,CCString:Mt,getTypeChecker:Pt,getObjTypeChecker:function(e){return function(t,i){Pt("Object","type")(t,i);var n=Ct(t)[i+"$_$default"],r=cc.Class.getDefault(n);if(!Array.isArray(r)&&He(e,cc.ValueType)){var o=Fe(e),a=Be('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',Fe(t),i,o);n?c(a):g(3612,a,o,Fe(t),i,o)}}}}),Bt={url:{canUsedInGet:!0},default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function Nt(e,t,i,n){if(!e.get&&!e.set&&e.hasOwnProperty("default")){var r="_N$"+t;e.get=function(){return this[r]},e.set=function(e){var t=this[r];this[r]=e,i.call(this,t)};var o={};for(var a in n[r]=o,Bt){var s=Bt[a];e.hasOwnProperty(a)&&(o[a]=e[a],s.canUsedInGet||delete e[a])}}}function Lt(e,t,i,n){Array.isArray(n)&&n.length>0&&(n=n[0]),e.type=n}function zt(e,t,i,n){if(Array.isArray(t)){if(!(t.length>0))return b(5508,i,n);if(cc.RawAsset.isRawAssetType(t[0]))return e.url=t[0],void delete e.type;e.type=t=t[0]}}function Gt(e,t,i){if(!(e&&e.constructor===Object)){if(Array.isArray(e)&&e.length>0){e[0];return{default:[],type:e,_short:!0}}if("function"==typeof e){var n=e;return cc.RawAsset.isRawAssetType(n)?{default:"",url:n,_short:!0}:{default:He(n,cc.ValueType)?new n:null,type:n,_short:!0}}return e instanceof Ot?{default:e.default,_short:!0}:{default:e,_short:!0}}return null}function Ut(e,t,i,n,r){return"function"==typeof e||null===e}var Xt=[];function Vt(){return Xt[Xt.length-1]}cc._RF={push:function(e,t,i,n){void 0===i&&(i=t,t=""),Xt.push({uuid:t,script:i,module:e,exports:e.exports,beh:null,importMeta:n})},pop:function(){var e=Xt.pop(),t=e.module,i=t.exports;if(i===e.exports){for(var n in i)return;t.exports=i=e.cls}},peek:Vt};var Ht=["name","extends","mixins","ctor","__ctor__","properties","statics","editor","__ES6__"];function jt(e,t){e.indexOf(t)<0&&e.push(t)}var Wt={datas:null,push:function(e){if(this.datas)this.datas.push(e);else{this.datas=[e];var t=this;setTimeout((function(){t.init()}),0)}},init:function(){var e=this.datas;if(e){for(var t=0;t<e.length;++t){var i=e[t],n=i.cls,r=i.props;"function"==typeof r&&(r=r());var o=Fe(n);r?ii(n,o,r,n.$super,i.mixins):b(3633,o)}this.datas=null}}};var Yt=[];function qt(e,t,i,n,r){kt(e,i,"default",n.default),function(e,t){jt(e.__props__,t)}(e,i);var o=ai(e,n,t,i);if(o){for(var a=Yt,s=0;s<o.length;s++){var l=o[s];Et(e,i,l),!1===l.serializable&&jt(e.__values__,i),l._onAfterProp&&a.push(l._onAfterProp)}for(var c=0;c<a.length;c++)a[c](e,i);Yt.length=0,o.length=0}}function Qt(e,t,i,n,r){var o=n.get,a=n.set,s=e.prototype,l=!Object.getOwnPropertyDescriptor(s,i);if(o){for(var c=ai(e,n,t,i),u=0;u<c.length;u++)Et(e,i,c[u]);c.length=0,kt(e,i,"serializable",!1),r||ke(s,i,o,l,l)}a&&(r||Oe(s,i,a,l,l))}function Zt(e){return"function"==typeof e?e():e}function Kt(e,t,i){for(var n in t)e.hasOwnProperty(n)||i&&!i(n)||Object.defineProperty(e,n,Le(t,n))}function Jt(e,t,i,n){var r,o,a=n.__ctor__,s=n.ctor,l=n.__ES6__;l?(r=[s],o=s):(r=a?[a]:function(e,t,i){for(var n=[],r=[e].concat(t),o=0;o<r.length;o++){var a=r[o];if(a)for(var s=(c=a,ni._isCCClass(c)?c.__ctors__||[]:[c]),l=0;l<s.length;l++)jt(n,s[l])}var c;var u=i.ctor;u&&n.push(u);return n}(t,i,n),o=ei(r,t,e,n),Ce(o,"extend",(function(e){return e.extends=this,ni(e)}),!0)),Ce(o,"__ctors__",r.length>0?r:null,!0);var c=o.prototype;if(t&&(l||(Xe(o,t),c=o.prototype),o.$super=t),i){for(var u=function(e){var t=i[e];Kt(c,t.prototype),Kt(o,t,(function(e){return t.hasOwnProperty(e)&&!0})),ni._isCCClass(t)&&Kt(Ct(o).constructor.prototype,Ct(t).constructor.prototype)},h=i.length-1;h>=0;h--)u(h);c.constructor=o}return l||(c.__initProps__=$t),Qe(e,o),o}function $t(e){var t=Ct(e),i=e.__props__;null===i&&(Wt.init(),i=e.__props__);var n=function(e,t){for(var i=[],n=[],r=[],o=[],a=0;a<t.length;++a){var s=t[a],l=s+"$_$default";if(l in e){var c=e[l];"object"===Q(c)&&c||"function"==typeof c?(i.push(s),n.push(c)):(r.push(s),o.push(c))}}return function(){for(var e=0;e<r.length;++e)this[r[e]]=o[e];for(var t=0;t<i.length;t++){var a=i[t],s=void 0,l=n[t];s="object"===Q(l)?l instanceof cc.ValueType?l.clone():Array.isArray(l)?[]:{}:l(),this[a]=s}}}(t,i);e.prototype.__initProps__=n,n.call(this)}var ei=function(e,t,i,n){var r,o=t&&function(e,t,i){var n=!1;for(var r in t)if(!(Ht.indexOf(r)>=0)){var o=t[r];if("function"==typeof o){var a=Le(e.prototype,r);if(a){var s=a.value;if("function"==typeof s){ti.test(o)&&(n=!0,t[r]=function(e,t){return function(){var i=this._super;this._super=e;var n=t.apply(this,arguments);return this._super=i,n}}(s,o));continue}}}}return n}(t,n),a=e.length;return r=a>0?o?2===a?function(){this._super=null,this.__initProps__(r),e[0].apply(this,arguments),e[1].apply(this,arguments)}:function(){this._super=null,this.__initProps__(r);for(var t=0;t<e.length;++t)e[t].apply(this,arguments)}:3===a?function(){this.__initProps__(r),e[0].apply(this,arguments),e[1].apply(this,arguments),e[2].apply(this,arguments)}:function(){this.__initProps__(r);for(var e=r.__ctors__,t=0;t<e.length;++t)e[t].apply(this,arguments)}:function(){o&&(this._super=null),this.__initProps__(r)}};var ti=/xyz/.test(function(){}.toString())?/\b\._super\b/:/.*/;function ii(e,t,i,n,r,o){if(e.__props__=[],n&&n.__props__&&(e.__props__=n.__props__.slice()),r)for(var a=0;a<r.length;++a){var s=r[a];s.__props__&&(e.__props__=e.__props__.concat(s.__props__.filter((function(t){return e.__props__.indexOf(t)<0}))))}if(i)for(var l in function(e,t,i,n){for(var r in e){var o=e[r],a=Gt(o);if(a&&(o=e[r]=a),o){var s=o.notify;s&&Nt(o,r,s,e),"type"in o&&zt(o,o.type,t,r),"url"in o&&Lt(o,0,0,o.url),"type"in o&&o.type}}}(i,t),i){var c=i[l];"default"in c?qt(e,t,l,c):Qt(e,t,l,c,o)}var u=Ct(e);e.__values__=e.__props__.filter((function(e){return!1!==u[e+"$_$serializable"]}))}function ni(e){var t=(e=e||{}).name,i=e.extends,n=e.mixins,r=function(e,t,i,n){var r=cc.Component,o=Vt();if(o&&He(t,r)){if(He(o.cls,r))return b(3615),null;e=e||o.script}var a=Jt(e,t,i,n),s=He(t,cc.RenderPipeline),l=He(t,cc.RenderFlow),c=He(t,cc.RenderStage);if(s||l||c||!1){var u="";s?u="render_pipeline":l?u="render_flow":c&&(u="render_stage"),u&&qe(e,a)}if(o)if(He(t,r)){var h=o.uuid;h&&qe(h,a),o.cls=a}else He(o.cls,r)||(o.cls=a);return a}(t,i,n,e);t||(t=cc.js.getClassName(r)),r._sealed=!0,i&&(i._sealed=!1);var o=e.properties;"function"==typeof o||i&&null===i.__props__||n&&n.some((function(e){return null===e.__props__}))?(Wt.push({cls:r,props:o,mixins:n}),r.__props__=r.__values__=null):ii(r,t,o,i,e.mixins,e.__ES6__);var a,s=e.statics;if(s)for(a in s)r[a]=s[a];for(var l in e)if(!(Ht.indexOf(l)>=0)){var c=e[l];Ut(c)&&Ce(r.prototype,l,c,!0,!0)}var u=e.editor;return u&&He(i,cc.Component)&&cc.Component._registerEditorProps(r,u),r}ni._isCCClass=function(e){return e&&e.hasOwnProperty&&e.hasOwnProperty("__ctors__")},ni.fastDefine=function(e,t,i){Qe(e,t);for(var n=t.__props__=t.__values__=Object.keys(i),r=wt(t),o=0;o<n.length;o++){var a=n[o];r[a+"$_$visible"]=!1,r[a+"$_$default"]=i[a]}},ni.Attr=Dt,ni.attr=Et,ni.getInheritanceChain=function(e){for(var t=[];e=Ve(e);)e!==Object&&t.push(e);return t};var ri={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"},oi=[];function ai(e,t,i,n,r){var o=null,a="";function s(){return a=n+"$_$",o=wt(e)}oi.length=0;var l=oi;"type"in t&&void 0===t.type&&g(3660,n,i);var c=t.type;if(c)if(ri[c])l.push({type:c,_onAfterProp:void 0});else if("Object"===c);else if("object"===Q(c))At.isEnum(c)?l.push({type:"Enum",enumList:At.getList(c)}):gt.isBitMask(c)&&l.push({type:"BitMask",bitmaskList:gt.getList(c)});else if("function"==typeof c){l.push({type:"Object",ctor:c,_onAfterProp:void 0})}var u=function(e,i){if(e in t){var n=t[e];Q(n)===i&&((o||s())[a+e]=n)}};t.editorOnly&&((o||s())[a+"editorOnly"]=!0),t.url&&((o||s())[a+"saveUrlAsAsset"]=!0),!1===t.serializable&&((o||s())[a+"serializable"]=!1),u("formerlySerializedAs","string");var h=t.range;return h&&Array.isArray(h)&&h.length>=2&&((o||s())[a+"min"]=h[0],(o||s())[a+"max"]=h[1],h.length>2&&((o||s())[a+"step"]=h[2])),u("min","number"),u("max","number"),u("step","number"),l}ni.isArray=function(e){return e=Zt(e),Array.isArray(e)},ni.getDefault=Zt,ni.escapeForJS=function(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},ni.IDENTIFIER_RE=/^[A-Za-z_$][0-9A-Za-z_$]*$/,ni.getNewValueTypeCode=!1,cc.Class=ni;var si=Math.PI/180,li=180/Math.PI,ci=1e-6;function ui(e,t){return Math.abs(e-t)<=ci*Math.max(1,Math.abs(e),Math.abs(t))}function hi(e,t,i){return i=i||ci,Math.abs(e-t)<=i}function pi(e,t,i){if(t>i){var n=t;t=i,i=n}return e<t?t:e>i?i:e}function fi(e){return e<0?0:e>1?1:e}function _i(e,t,i){return e+(t-e)*i}function di(e){return e*si}function mi(e){return e*li}var vi=Math.random;function yi(e,t){return Math.random()*(t-e)+e}function gi(e,t){return Math.floor(yi(e,t))}function Ai(e){return(e=(9301*e+49297)%233280)/233280}function bi(e,t,i){return Ai(e)*(i-t)+t}function xi(e,t,i){return Math.floor(bi(e,t,i))}function Ti(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Si(e,t){return e-Math.floor(e/t)*t}function Ei(e,t){return e=Si(e,2*t),e=t-Math.abs(e-t)}function Ci(e,t,i){return(i-e)/(t-e)}function wi(e){return Math.abs(e.x)>Math.abs(e.y)?Math.abs(e.x)>Math.abs(e.z)?e.x:e.z:Math.abs(e.y)>Math.abs(e.z)?e.y:e.z}function ki(e,t){return Math.abs(e)>Math.abs(t)?e:t}var Oi=function(e){function t(e,i){var n;return Z(this,t),n=re(this,te(t).call(this)),e&&"object"===Q(e)?(n.x=e.x,n.y=e.y):(n.x=e||0,n.y=i||0),n}return ee(t,xt),J(t,null,[{key:"clone",value:function(e){return new t(e.x,e.y)}},{key:"copy",value:function(e,t){return e.x=t.x,e.y=t.y,e}},{key:"set",value:function(e,t,i){return e.x=t,e.y=i,e}},{key:"add",value:function(e,t,i){return e.x=t.x+i.x,e.y=t.y+i.y,e}},{key:"subtract",value:function(e,t,i){return e.x=t.x-i.x,e.y=t.y-i.y,e}},{key:"multiply",value:function(e,t,i){return e.x=t.x*i.x,e.y=t.y*i.y,e}},{key:"divide",value:function(e,t,i){return e.x=t.x/i.x,e.y=t.y/i.y,e}},{key:"ceil",value:function(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e}},{key:"floor",value:function(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e}},{key:"min",value:function(e,t,i){return e.x=Math.min(t.x,i.x),e.y=Math.min(t.y,i.y),e}},{key:"max",value:function(e,t,i){return e.x=Math.max(t.x,i.x),e.y=Math.max(t.y,i.y),e}},{key:"round",value:function(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e}},{key:"multiplyScalar",value:function(e,t,i){return e.x=t.x*i,e.y=t.y*i,e}},{key:"scaleAndAdd",value:function(e,t,i,n){return e.x=t.x+i.x*n,e.y=t.y+i.y*n,e}},{key:"distance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},{key:"squaredDistance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},{key:"len",value:function(e){var t=e.x,i=e.y;return Math.sqrt(t*t+i*i)}},{key:"lengthSqr",value:function(e){var t=e.x,i=e.y;return t*t+i*i}},{key:"negate",value:function(e,t){return e.x=-t.x,e.y=-t.y,e}},{key:"inverse",value:function(e,t){return e.x=1/t.x,e.y=1/t.y,e}},{key:"inverseSafe",value:function(e,t){var i=t.x,n=t.y;return Math.abs(i)<ci?e.x=0:e.x=1/i,Math.abs(n)<ci?e.y=0:e.y=1/n,e}},{key:"normalize",value:function(e,t){var i=t.x,n=t.y,r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),e.x=i*r,e.y=n*r),e}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"cross",value:function(e,t,i){return e.x=e.y=0,e.z=t.x*i.y-t.y*i.x,e}},{key:"lerp",value:function(e,t,i,n){var r=t.x,o=t.y;return e.x=r+n*(i.x-r),e.y=o+n*(i.y-o),e}},{key:"random",value:function(e,t){t=t||1;var i=2*vi()*Math.PI;return e.x=Math.cos(i)*t,e.y=Math.sin(i)*t,e}},{key:"transformMat3",value:function(e,t,i){var n=t.x,r=t.y;return e.x=i.m00*n+i.m03*r+i.m06,e.y=i.m01*n+i.m04*r+i.m07,e}},{key:"transformMat4",value:function(e,t,i){var n=t.x,r=t.y;return e.x=i.m00*n+i.m04*r+i.m12,e.y=i.m01*n+i.m05*r+i.m13,e}},{key:"str",value:function(e){return"Vec2(".concat(e.x,", ").concat(e.y,")")}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.x,e[i+1]=t.y,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.x=t[i+0],e.y=t[i+1],e}},{key:"strictEquals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.x-t.x)<=i*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=i*Math.max(1,Math.abs(e.y),Math.abs(t.y))}},{key:"angle",value:function(e,i){t.normalize(Ri,e),t.normalize(Fi,i);var n=t.dot(Ri,Fi);return n>1?0:n<-1?Math.PI:Math.acos(n)}}]),J(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"set",value:function(e,t){return e&&"object"===Q(e)?(this.x=e.x,this.y=e.y):(this.x=e||0,this.y=t||0),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))}},{key:"equals2f",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(this.x-e)<=i*Math.max(1,Math.abs(this.x),Math.abs(e))&&Math.abs(this.y-t)<=i*Math.max(1,Math.abs(this.y),Math.abs(t))}},{key:"strictEquals",value:function(e){return e&&this.x===e.x&&this.y===e.y}},{key:"strictEquals2f",value:function(e,t){return this.x===e&&this.y===t}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),")")}},{key:"lerp",value:function(e,t){var i=this.x,n=this.y;return this.x=i+t*(e.x-i),this.y=n+t*(e.y-n),this}},{key:"clampf",value:function(e,t){return this.x=pi(this.x,e.x,t.x),this.y=pi(this.y,e.y,t.y),this}},{key:"add",value:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this}},{key:"add2f",value:function(e,t){return this.x=this.x+e,this.y=this.y+t,this}},{key:"subtract",value:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this}},{key:"subtract2f",value:function(e,t){return this.x=this.x-e,this.y=this.y-t,this}},{key:"multiplyScalar",value:function(e){return"object"===Q(e)&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x=this.x*e,this.y=this.y*e,this}},{key:"multiply",value:function(e){return"object"!==Q(e)&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x=this.x*e.x,this.y=this.y*e.y,this}},{key:"multiply2f",value:function(e,t){return this.x=this.x*e,this.y=this.y*t,this}},{key:"divide",value:function(e){return this.x=this.x/e.x,this.y=this.y/e.y,this}},{key:"divide2f",value:function(e,t){return this.x=this.x/e,this.y=this.y/t,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){var e=this.x,t=this.y,i=e*e+t*t;return i>0&&(i=1/Math.sqrt(i),this.x=this.x*i,this.y=this.y*i),this}},{key:"angle",value:function(e){var t=this.lengthSqr(),i=e.lengthSqr();if(0===t||0===i)return console.warn("Can't get angle between zero vector"),0;var n=this.dot(e)/Math.sqrt(t*i);return n=pi(n,-1,1),Math.acos(n)}},{key:"signAngle",value:function(e){var t=this.angle(e);return this.cross(e)<0?-t:t}},{key:"rotate",value:function(e){var t=this.x,i=this.y,n=Math.sin(e),r=Math.cos(e);return this.x=r*t-n*i,this.y=n*t+r*i,this}},{key:"project",value:function(e){var t=this.dot(e)/e.dot(e);return this.x=e.x*t,this.y=e.y*t,this}},{key:"transformMat4",value:function(e){var t=this.x,i=this.y;return this.x=e.m00*t+e.m04*i+e.m12,this.y=e.m01*t+e.m05*i+e.m13,this}}]),t}();Oi.ZERO=Object.freeze(new Oi(0,0)),Oi.ONE=Object.freeze(new Oi(1,1)),Oi.NEG_ONE=Object.freeze(new Oi(-1,-1)),Oi.UNIT_X=Object.freeze(new Oi(1,0)),Oi.UNIT_Y=Object.freeze(new Oi(0,1));var Ri=new Oi,Fi=new Oi;function Ii(e,t){return new Oi(e,t)}ni.fastDefine("cc.Vec2",Oi,{x:0,y:0}),cc.Vec2=Oi,cc.v2=Ii;var Mi=function(e){function t(e,i,n){var r;return Z(this,t),r=re(this,te(t).call(this)),e&&"object"===Q(e)?(r.x=e.x,r.y=e.y,r.z=e.z):(r.x=e||0,r.y=i||0,r.z=n||0),r}return ee(t,xt),J(t,null,[{key:"zero",value:function(e){return e.x=0,e.y=0,e.z=0,e}},{key:"clone",value:function(e){return new t(e.x,e.y,e.z)}},{key:"copy",value:function(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e}},{key:"set",value:function(e,t,i,n){return e.x=t,e.y=i,e.z=n,e}},{key:"add",value:function(e,t,i){return e.x=t.x+i.x,e.y=t.y+i.y,e.z=t.z+i.z,e}},{key:"subtract",value:function(e,t,i){return e.x=t.x-i.x,e.y=t.y-i.y,e.z=t.z-i.z,e}},{key:"multiply",value:function(e,t,i){return e.x=t.x*i.x,e.y=t.y*i.y,e.z=t.z*i.z,e}},{key:"divide",value:function(e,t,i){return e.x=t.x/i.x,e.y=t.y/i.y,e.z=t.z/i.z,e}},{key:"ceil",value:function(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e.z=Math.ceil(t.z),e}},{key:"floor",value:function(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}},{key:"min",value:function(e,t,i){return e.x=Math.min(t.x,i.x),e.y=Math.min(t.y,i.y),e.z=Math.min(t.z,i.z),e}},{key:"max",value:function(e,t,i){return e.x=Math.max(t.x,i.x),e.y=Math.max(t.y,i.y),e.z=Math.max(t.z,i.z),e}},{key:"round",value:function(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e.z=Math.round(t.z),e}},{key:"multiplyScalar",value:function(e,t,i){return e.x=t.x*i,e.y=t.y*i,e.z=t.z*i,e}},{key:"scaleAndAdd",value:function(e,t,i,n){return e.x=t.x+i.x*n,e.y=t.y+i.y*n,e.z=t.z+i.z*n,e}},{key:"distance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z;return Math.sqrt(i*i+n*n+r*r)}},{key:"squaredDistance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z;return i*i+n*n+r*r}},{key:"len",value:function(e){var t=e.x,i=e.y,n=e.z;return Math.sqrt(t*t+i*i+n*n)}},{key:"lengthSqr",value:function(e){var t=e.x,i=e.y,n=e.z;return t*t+i*i+n*n}},{key:"negate",value:function(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e}},{key:"invert",value:function(e,t){return e.x=1/t.x,e.y=1/t.y,e.z=1/t.z,e}},{key:"invertSafe",value:function(e,t){var i=t.x,n=t.y,r=t.z;return Math.abs(i)<ci?e.x=0:e.x=1/i,Math.abs(n)<ci?e.y=0:e.y=1/n,Math.abs(r)<ci?e.z=0:e.z=1/r,e}},{key:"normalize",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e.x=i*o,e.y=n*o,e.z=r*o),e}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}},{key:"cross",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=i.x,s=i.y,l=i.z;return e.x=r*l-o*s,e.y=o*a-n*l,e.z=n*s-r*a,e}},{key:"lerp",value:function(e,t,i,n){return e.x=t.x+n*(i.x-t.x),e.y=t.y+n*(i.y-t.y),e.z=t.z+n*(i.z-t.z),e}},{key:"random",value:function(e,t){t=t||1;var i=2*vi()*Math.PI,n=2*vi()-1,r=Math.sqrt(1-n*n);return e.x=r*Math.cos(i)*t,e.y=r*Math.sin(i)*t,e.z=n*t,e}},{key:"transformMat4",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=i.m03*n+i.m07*r+i.m11*o+i.m15;return a=a?Math.abs(1/a):1,e.x=(i.m00*n+i.m04*r+i.m08*o+i.m12)*a,e.y=(i.m01*n+i.m05*r+i.m09*o+i.m13)*a,e.z=(i.m02*n+i.m06*r+i.m10*o+i.m14)*a,e}},{key:"transformMat4Normal",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=i.m03*n+i.m07*r+i.m11*o;return a=a?Math.abs(1/a):1,e.x=(i.m00*n+i.m04*r+i.m08*o)*a,e.y=(i.m01*n+i.m05*r+i.m09*o)*a,e.z=(i.m02*n+i.m06*r+i.m10*o)*a,e}},{key:"transformMat3",value:function(e,t,i){var n=t.x,r=t.y,o=t.z;return e.x=n*i.m00+r*i.m03+o*i.m06,e.y=n*i.m01+r*i.m04+o*i.m07,e.z=n*i.m02+r*i.m05+o*i.m08,e}},{key:"transformAffine",value:function(e,t,i){var n=t.x,r=t.y,o=t.z;return e.x=i.m00*n+i.m04*r+i.m08*o+i.m12,e.y=i.m01*n+i.m05*r+i.m09*o+i.m13,e.x=i.m02*n+i.m06*r+i.m10*o+i.m14,e}},{key:"transformQuat",value:function(e,t,i){var n=i.w*t.x+i.y*t.z-i.z*t.y,r=i.w*t.y+i.z*t.x-i.x*t.z,o=i.w*t.z+i.x*t.y-i.y*t.x,a=-i.x*t.x-i.y*t.y-i.z*t.z;return e.x=n*i.w+a*-i.x+r*-i.z-o*-i.y,e.y=r*i.w+a*-i.y+o*-i.x-n*-i.z,e.z=o*i.w+a*-i.z+n*-i.y-r*-i.x,e}},{key:"transformRTS",value:function(e,t,i,n,r){var o=t.x*r.x,a=t.y*r.y,s=t.z*r.z,l=i.w*o+i.y*s-i.z*a,c=i.w*a+i.z*o-i.x*s,u=i.w*s+i.x*a-i.y*o,h=-i.x*o-i.y*a-i.z*s;return e.x=l*i.w+h*-i.x+c*-i.z-u*-i.y+n.x,e.y=c*i.w+h*-i.y+u*-i.x-l*-i.z+n.y,e.z=u*i.w+h*-i.z+l*-i.y-c*-i.x+n.z,e}},{key:"transformInverseRTS",value:function(e,t,i,n,r){var o=t.x-n.x,a=t.y-n.y,s=t.z-n.z,l=i.w*o-i.y*s+i.z*a,c=i.w*a-i.z*o+i.x*s,u=i.w*s-i.x*a+i.y*o,h=i.x*o+i.y*a+i.z*s;return e.x=(l*i.w+h*i.x+c*i.z-u*i.y)/r.x,e.y=(c*i.w+h*i.y+u*i.x-l*i.z)/r.y,e.z=(u*i.w+h*i.z+l*i.y-c*i.x)/r.z,e}},{key:"rotateX",value:function(e,t,i,n){var r=t.x-i.x,o=t.y-i.y,a=t.z-i.z,s=Math.cos(n),l=Math.sin(n),c=r,u=o*s-a*l,h=o*l+a*s;return e.x=c+i.x,e.y=u+i.y,e.z=h+i.z,e}},{key:"rotateY",value:function(e,t,i,n){var r=t.x-i.x,o=t.y-i.y,a=t.z-i.z,s=Math.cos(n),l=Math.sin(n),c=a*l+r*s,u=o,h=a*s-r*l;return e.x=c+i.x,e.y=u+i.y,e.z=h+i.z,e}},{key:"rotateZ",value:function(e,t,i,n){var r=t.x-i.x,o=t.y-i.y,a=t.z-i.z,s=Math.cos(n),l=Math.sin(n),c=r*s-o*l,u=r*l+o*s,h=a;return e.x=c+i.x,e.y=u+i.y,e.z=h+i.z,e}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.x,e[i+1]=t.y,e[i+2]=t.z,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.x=t[i+0],e.y=t[i+1],e.z=t[i+2],e}},{key:"strictEquals",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci,n=e.x,r=e.y,o=e.z,a=t.x,s=t.y,l=t.z;return Math.abs(n-a)<=i*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=i*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=i*Math.max(1,Math.abs(o),Math.abs(l))}},{key:"angle",value:function(e,i){t.normalize(Pi,e),t.normalize(Di,i);var n=t.dot(Pi,Di);return n>1?0:n<-1?Math.PI:Math.acos(n)}},{key:"projectOnPlane",value:function(e,i,n){return t.subtract(e,i,t.project(e,i,n))}},{key:"project",value:function(e,i,n){var r=t.lengthSqr(n);return r<1e-6?t.set(e,0,0,0):t.multiplyScalar(e,n,t.dot(i,n)/r)}}]),J(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"set",value:function(e,t,i){return e&&"object"===Q(e)?(this.x=e.x,this.y=e.y,this.z=e.z):(this.x=e||0,this.y=t||0,this.z=i||0),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))&&Math.abs(this.z-e.z)<=t*Math.max(1,Math.abs(this.z),Math.abs(e.z))}},{key:"equals3f",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ci;return Math.abs(this.x-e)<=n*Math.max(1,Math.abs(this.x),Math.abs(e))&&Math.abs(this.y-t)<=n*Math.max(1,Math.abs(this.y),Math.abs(t))&&Math.abs(this.z-i)<=n*Math.max(1,Math.abs(this.z),Math.abs(i))}},{key:"strictEquals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"strictEquals3f",value:function(e,t,i){return this.x===e&&this.y===t&&this.z===i}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.z.toFixed(2),")")}},{key:"lerp",value:function(e,t){return this.x=this.x+t*(e.x-this.x),this.y=this.y+t*(e.y-this.y),this.z=this.z+t*(e.z-this.z),this}},{key:"add",value:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this.z=this.z+e.z,this}},{key:"add3f",value:function(e,t,i){return this.x=this.x+e,this.y=this.y+t,this.z=this.z+i,this}},{key:"subtract",value:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this.z=this.z-e.z,this}},{key:"subtract3f",value:function(e,t,i){return this.x=this.x-e,this.y=this.y-t,this.z=this.z-i,this}},{key:"multiplyScalar",value:function(e){return"object"===Q(e)&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this}},{key:"multiply",value:function(e){return"object"!==Q(e)&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x=this.x*e.x,this.y=this.y*e.y,this.z=this.z*e.z,this}},{key:"multiply3f",value:function(e,t,i){return this.x=this.x*e,this.y=this.y*t,this.z=this.z*i,this}},{key:"divide",value:function(e){return this.x=this.x/e.x,this.y=this.y/e.y,this.z=this.z/e.z,this}},{key:"divide3f",value:function(e,t,i){return this.x=this.x/e,this.y=this.y/t,this.z=this.z/i,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"clampf",value:function(e,t){return this.x=pi(this.x,e.x,t.x),this.y=pi(this.y,e.y,t.y),this.z=pi(this.z,e.z,t.z),this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"cross",value:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z;return this.x=i*a-n*o,this.y=n*r-t*a,this.z=t*o-i*r,this}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"normalize",value:function(){var e=this.x,t=this.y,i=this.z,n=e*e+t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=e*n,this.y=t*n,this.z=i*n),this}},{key:"transformMat4",value:function(e){var t=this.x,i=this.y,n=this.z,r=e.m03*t+e.m07*i+e.m11*n+e.m15;return r=r?1/r:1,this.x=(e.m00*t+e.m04*i+e.m08*n+e.m12)*r,this.y=(e.m01*t+e.m05*i+e.m09*n+e.m13)*r,this.z=(e.m02*t+e.m06*i+e.m10*n+e.m14)*r,this}}]),t}();Mi.UNIT_X=Object.freeze(new Mi(1,0,0)),Mi.UNIT_Y=Object.freeze(new Mi(0,1,0)),Mi.UNIT_Z=Object.freeze(new Mi(0,0,1)),Mi.RIGHT=Object.freeze(new Mi(1,0,0)),Mi.UP=Object.freeze(new Mi(0,1,0)),Mi.FORWARD=Object.freeze(new Mi(0,0,-1)),Mi.ZERO=Object.freeze(new Mi(0,0,0)),Mi.ONE=Object.freeze(new Mi(1,1,1)),Mi.NEG_ONE=Object.freeze(new Mi(-1,-1,-1));var Pi=new Mi,Di=new Mi;function Bi(e,t,i){return new Mi(e,t,i)}ni.fastDefine("cc.Vec3",Mi,{x:0,y:0,z:0}),cc.Vec3=Mi,cc.v3=Bi;var Ni=function(e){function t(e,i,n,r){var o;return Z(this,t),o=re(this,te(t).call(this)),e&&"object"===Q(e)?(o.x=e.x,o.y=e.y,o.z=e.z,o.w=e.w):(o.x=e||0,o.y=i||0,o.z=n||0,o.w=r||0),o}return ee(t,xt),J(t,null,[{key:"clone",value:function(e){return new t(e.x,e.y,e.z,e.w)}},{key:"copy",value:function(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}},{key:"set",value:function(e,t,i,n,r){return e.x=t,e.y=i,e.z=n,e.w=r,e}},{key:"add",value:function(e,t,i){return e.x=t.x+i.x,e.y=t.y+i.y,e.z=t.z+i.z,e.w=t.w+i.w,e}},{key:"subtract",value:function(e,t,i){return e.x=t.x-i.x,e.y=t.y-i.y,e.z=t.z-i.z,e.w=t.w-i.w,e}},{key:"multiply",value:function(e,t,i){return e.x=t.x*i.x,e.y=t.y*i.y,e.z=t.z*i.z,e.w=t.w*i.w,e}},{key:"divide",value:function(e,t,i){return e.x=t.x/i.x,e.y=t.y/i.y,e.z=t.z/i.z,e.w=t.w/i.w,e}},{key:"ceil",value:function(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e.z=Math.ceil(t.z),e.w=Math.ceil(t.w),e}},{key:"floor",value:function(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e.w=Math.floor(t.w),e}},{key:"min",value:function(e,t,i){return e.x=Math.min(t.x,i.x),e.y=Math.min(t.y,i.y),e.z=Math.min(t.z,i.z),e.w=Math.min(t.w,i.w),e}},{key:"max",value:function(e,t,i){return e.x=Math.max(t.x,i.x),e.y=Math.max(t.y,i.y),e.z=Math.max(t.z,i.z),e.w=Math.max(t.w,i.w),e}},{key:"round",value:function(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e.z=Math.round(t.z),e.w=Math.round(t.w),e}},{key:"multiplyScalar",value:function(e,t,i){return e.x=t.x*i,e.y=t.y*i,e.z=t.z*i,e.w=t.w*i,e}},{key:"scaleAndAdd",value:function(e,t,i,n){return e.x=t.x+i.x*n,e.y=t.y+i.y*n,e.z=t.z+i.z*n,e.w=t.w+i.w*n,e}},{key:"distance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z,o=t.w-e.w;return Math.sqrt(i*i+n*n+r*r+o*o)}},{key:"squaredDistance",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z,o=t.w-e.w;return i*i+n*n+r*r+o*o}},{key:"len",value:function(e){var t=e.x,i=e.y,n=e.z,r=e.w;return Math.sqrt(t*t+i*i+n*n+r*r)}},{key:"lengthSqr",value:function(e){var t=e.x,i=e.y,n=e.z,r=e.w;return t*t+i*i+n*n+r*r}},{key:"negate",value:function(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e}},{key:"inverse",value:function(e,t){return e.x=1/t.x,e.y=1/t.y,e.z=1/t.z,e.w=1/t.w,e}},{key:"inverseSafe",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=t.w;return Math.abs(i)<ci?e.x=0:e.x=1/i,Math.abs(n)<ci?e.y=0:e.y=1/n,Math.abs(r)<ci?e.z=0:e.z=1/r,Math.abs(o)<ci?e.w=0:e.w=1/o,e}},{key:"normalize",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i*i+n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e.x=i*a,e.y=n*a,e.z=r*a,e.w=o*a),e}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}},{key:"lerp",value:function(e,t,i,n){return e.x=t.x+n*(i.x-t.x),e.y=t.y+n*(i.y-t.y),e.z=t.z+n*(i.z-t.z),e.w=t.w+n*(i.w-t.w),e}},{key:"random",value:function(e,t){t=t||1;var i=2*vi()*Math.PI,n=2*vi()-1,r=Math.sqrt(1-n*n);return e.x=r*Math.cos(i)*t,e.y=r*Math.sin(i)*t,e.z=n*t,e.w=0,e}},{key:"transformMat4",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=t.w;return e.x=i.m00*n+i.m04*r+i.m08*o+i.m12*a,e.y=i.m01*n+i.m05*r+i.m09*o+i.m13*a,e.z=i.m02*n+i.m06*r+i.m10*o+i.m14*a,e.w=i.m03*n+i.m07*r+i.m11*o+i.m15*a,e}},{key:"transformAffine",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=t.w;return e.x=i.m00*n+i.m01*r+i.m02*o+i.m03*a,e.y=i.m04*n+i.m05*r+i.m06*o+i.m07*a,e.x=i.m08*n+i.m09*r+i.m10*o+i.m11*a,e.w=t.w,e}},{key:"transformQuat",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=i.x,s=i.y,l=i.z,c=i.w,u=c*n+s*o-l*r,h=c*r+l*n-a*o,p=c*o+a*r-s*n,f=-a*n-s*r-l*o;return e.x=u*c+f*-a+h*-l-p*-s,e.y=h*c+f*-s+p*-a-u*-l,e.z=p*c+f*-l+u*-s-h*-a,e.w=t.w,e}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.x,e[i+1]=t.y,e[i+2]=t.z,e[i+3]=t.w,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.x=t[i+0],e.y=t[i+1],e.z=t[i+2],e.w=t[i+3],e}},{key:"strictEquals",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.x-t.x)<=i*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=i*Math.max(1,Math.abs(e.y),Math.abs(t.y))&&Math.abs(e.z-t.z)<=i*Math.max(1,Math.abs(e.z),Math.abs(t.z))&&Math.abs(e.w-t.w)<=i*Math.max(1,Math.abs(e.w),Math.abs(t.w))}}]),J(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"set",value:function(e,t,i,n){return e&&"object"===Q(e)?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=n||0),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))&&Math.abs(this.z-e.z)<=t*Math.max(1,Math.abs(this.z),Math.abs(e.z))&&Math.abs(this.w-e.w)<=t*Math.max(1,Math.abs(this.w),Math.abs(e.w))}},{key:"equals4f",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ci;return Math.abs(this.x-e)<=r*Math.max(1,Math.abs(this.x),Math.abs(e))&&Math.abs(this.y-t)<=r*Math.max(1,Math.abs(this.y),Math.abs(t))&&Math.abs(this.z-i)<=r*Math.max(1,Math.abs(this.z),Math.abs(i))&&Math.abs(this.w-n)<=r*Math.max(1,Math.abs(this.w),Math.abs(n))}},{key:"strictEquals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}},{key:"strictEquals4f",value:function(e,t,i,n){return this.x===e&&this.y===t&&this.z===i&&this.w===n}},{key:"lerp",value:function(e,t){var i=this.x,n=this.y,r=this.z,o=this.w;return this.x=i+t*(e.x-i),this.y=n+t*(e.y-n),this.z=r+t*(e.z-r),this.w=o+t*(e.w-o),this}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.z.toFixed(2),", ").concat(this.w.toFixed(2),")")}},{key:"clampf",value:function(e,t){return this.x=pi(this.x,e.x,t.x),this.y=pi(this.y,e.y,t.y),this.z=pi(this.z,e.z,t.z),this.w=pi(this.w,e.w,t.w),this}},{key:"add",value:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this.z=this.z+e.z,this.w=this.w+e.w,this}},{key:"add4f",value:function(e,t,i,n){return this.x=this.x+e,this.y=this.y+t,this.z=this.z+i,this.w=this.w+n,this}},{key:"subtract",value:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this.z=this.z-e.z,this.w=this.w-e.w,this}},{key:"subtract4f",value:function(e,t,i,n){return this.x=this.x-e,this.y=this.y-t,this.z=this.z-i,this.w=this.w-n,this}},{key:"multiplyScalar",value:function(e){return"object"===Q(e)&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e,this}},{key:"multiply",value:function(e){return"object"!==Q(e)&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x=this.x*e.x,this.y=this.y*e.y,this.z=this.z*e.z,this.w=this.w*e.w,this}},{key:"multiply4f",value:function(e,t,i,n){return this.x=this.x*e,this.y=this.y*t,this.z=this.z*i,this.w=this.w*n,this}},{key:"divide",value:function(e){return this.x=this.x/e.x,this.y=this.y/e.y,this.z=this.z/e.z,this.w=this.w/e.w,this}},{key:"divide4f",value:function(e,t,i,n){return this.x=this.x/e,this.y=this.y/t,this.z=this.z/i,this.w=this.w/n,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"cross",value:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z;return this.x=i*a-n*o,this.y=n*r-t*a,this.z=t*o-i*r,this}},{key:"length",value:function(){var e=this.x,t=this.y,i=this.z,n=this.w;return Math.sqrt(e*e+t*t+i*i+n*n)}},{key:"lengthSqr",value:function(){var e=this.x,t=this.y,i=this.z,n=this.w;return e*e+t*t+i*i+n*n}},{key:"normalize",value:function(){var e=this.x,t=this.y,i=this.z,n=this.w,r=e*e+t*t+i*i+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=e*r,this.y=t*r,this.z=i*r,this.w=n*r),this}},{key:"transformMat4",value:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;return this.x=e.m00*t+e.m04*i+e.m08*n+e.m12*r,this.y=e.m01*t+e.m05*i+e.m09*n+e.m13*r,this.z=e.m02*t+e.m06*i+e.m10*n+e.m14*r,this.w=e.m03*t+e.m07*i+e.m11*n+e.m15*r,this}}]),t}();function Li(e,t,i,n){return new Ni(e,t,i,n)}Ni.ZERO=Object.freeze(new Ni(0,0,0,0)),Ni.ONE=Object.freeze(new Ni(1,1,1,1)),Ni.NEG_ONE=Object.freeze(new Ni(-1,-1,-1,-1)),ni.fastDefine("cc.Vec4",Ni,{x:0,y:0,z:0,w:0}),cc.Vec4=Ni,cc.v4=Li;var zi=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return Z(this,t),e=re(this,te(t).call(this)),"object"===Q(i)?(e.m00=i.m00,e.m01=i.m01,e.m02=i.m02,e.m03=i.m03,e.m04=i.m04,e.m05=i.m05,e.m06=i.m06,e.m07=i.m07,e.m08=i.m08):(e.m00=i,e.m01=n,e.m02=r,e.m03=o,e.m04=a,e.m05=s,e.m06=l,e.m07=c,e.m08=u),e}return ee(t,xt),J(t,null,[{key:"clone",value:function(e){return new t(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08)}},{key:"copy",value:function(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e}},{key:"set",value:function(e,t,i,n,r,o,a,s,l,c){return e.m00=t,e.m01=i,e.m02=n,e.m03=r,e.m04=o,e.m05=a,e.m06=s,e.m07=l,e.m08=c,e}},{key:"identity",value:function(e){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=1,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}},{key:"transpose",value:function(e,t){if(e===t){var i=t.m01,n=t.m02,r=t.m05;e.m01=t.m03,e.m02=t.m06,e.m03=i,e.m05=t.m07,e.m06=n,e.m07=r}else e.m00=t.m00,e.m01=t.m03,e.m02=t.m06,e.m03=t.m01,e.m04=t.m04,e.m05=t.m07,e.m06=t.m02,e.m07=t.m05,e.m08=t.m08;return e}},{key:"invert",value:function(e,t){var i=t.m00,n=t.m01,r=t.m02,o=t.m03,a=t.m04,s=t.m05,l=t.m06,c=t.m07,u=t.m08,h=u*a-s*c,p=-u*o+s*l,f=c*o-a*l,_=i*h+n*p+r*f;return 0===_?(e.m00=0,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=0,e.m06=0,e.m07=0,e.m08=0,e):(_=1/_,e.m00=h*_,e.m01=(-u*n+r*c)*_,e.m02=(s*n-r*a)*_,e.m03=p*_,e.m04=(u*i-r*l)*_,e.m05=(-s*i+r*o)*_,e.m06=f*_,e.m07=(-c*i+n*l)*_,e.m08=(a*i-n*o)*_,e)}},{key:"determinant",value:function(e){var t=e.m00,i=e.m01,n=e.m02,r=e.m03,o=e.m04,a=e.m05,s=e.m06,l=e.m07,c=e.m08;return t*(c*o-a*l)+i*(-c*r+a*s)+n*(l*r-o*s)}},{key:"multiply",value:function(e,t,i){var n=t.m00,r=t.m01,o=t.m02,a=t.m03,s=t.m04,l=t.m05,c=t.m06,u=t.m07,h=t.m08,p=i.m00,f=i.m01,_=i.m02,d=i.m03,m=i.m04,v=i.m05,y=i.m06,g=i.m07,A=i.m08;return e.m00=p*n+f*a+_*c,e.m01=p*r+f*s+_*u,e.m02=p*o+f*l+_*h,e.m03=d*n+m*a+v*c,e.m04=d*r+m*s+v*u,e.m05=d*o+m*l+v*h,e.m06=y*n+g*a+A*c,e.m07=y*r+g*s+A*u,e.m08=y*o+g*l+A*h,e}},{key:"multiplyMat4",value:function(e,t,i){var n=t.m00,r=t.m01,o=t.m02,a=t.m03,s=t.m04,l=t.m05,c=t.m06,u=t.m07,h=t.m08,p=i.m00,f=i.m01,_=i.m02,d=i.m04,m=i.m05,v=i.m06,y=i.m08,g=i.m09,A=i.m10;return e.m00=p*n+f*a+_*c,e.m01=p*r+f*s+_*u,e.m02=p*o+f*l+_*h,e.m03=d*n+m*a+v*c,e.m04=d*r+m*s+v*u,e.m05=d*o+m*l+v*h,e.m06=y*n+g*a+A*c,e.m07=y*r+g*s+A*u,e.m08=y*o+g*l+A*h,e}},{key:"transfrom",value:function(e,i,n){t.transform(e,i,n)}},{key:"transform",value:function(e,t,i){var n=t.m00,r=t.m01,o=t.m02,a=t.m03,s=t.m04,l=t.m05,c=t.m06,u=t.m07,h=t.m08,p=i.x,f=i.y;return e.m00=n,e.m01=r,e.m02=o,e.m03=a,e.m04=s,e.m05=l,e.m06=p*n+f*a+c,e.m07=p*r+f*s+u,e.m08=p*o+f*l+h,e}},{key:"scale",value:function(e,t,i){var n=i.x,r=i.y;return e.m00=n*t.m00,e.m01=n*t.m01,e.m02=n*t.m02,e.m03=r*t.m03,e.m04=r*t.m04,e.m05=r*t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e}},{key:"rotate",value:function(e,t,i){var n=t.m00,r=t.m01,o=t.m02,a=t.m03,s=t.m04,l=t.m05,c=t.m06,u=t.m07,h=t.m08,p=Math.sin(i),f=Math.cos(i);return e.m00=f*n+p*a,e.m01=f*r+p*s,e.m02=f*o+p*l,e.m03=f*a-p*n,e.m04=f*s-p*r,e.m05=f*l-p*o,e.m06=c,e.m07=u,e.m08=h,e}},{key:"fromMat4",value:function(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m04,e.m04=t.m05,e.m05=t.m06,e.m06=t.m08,e.m07=t.m09,e.m08=t.m10,e}},{key:"fromViewUp",value:function(e,i,n){return Mi.lengthSqr(i)<1e-12?(t.identity(e),e):(n=n||Mi.UNIT_Y,Mi.normalize(Gi,Mi.cross(Gi,n,i)),Mi.lengthSqr(Gi)<1e-12?(t.identity(e),e):(Mi.cross(Ui,i,Gi),t.set(e,Gi.x,Gi.y,Gi.z,Ui.x,Ui.y,Ui.z,i.x,i.y,i.z),e))}},{key:"fromTranslation",value:function(e,t){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=1,e.m05=0,e.m06=t.x,e.m07=t.y,e.m08=1,e}},{key:"fromScaling",value:function(e,t){return e.m00=t.x,e.m01=0,e.m02=0,e.m03=0,e.m04=t.y,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}},{key:"fromRotation",value:function(e,t){var i=Math.sin(t),n=Math.cos(t);return e.m00=n,e.m01=i,e.m02=0,e.m03=-i,e.m04=n,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}},{key:"fromQuat",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,s=n+n,l=r+r,c=i*a,u=n*a,h=n*s,p=r*a,f=r*s,_=r*l,d=o*a,m=o*s,v=o*l;return e.m00=1-h-_,e.m03=u-v,e.m06=p+m,e.m01=u+v,e.m04=1-c-_,e.m07=f-d,e.m02=p-m,e.m05=f+d,e.m08=1-c-h,e}},{key:"inverseTransposeMat4",value:function(e,t){var i=t.m00,n=t.m01,r=t.m02,o=t.m03,a=t.m04,s=t.m05,l=t.m06,c=t.m07,u=t.m08,h=t.m09,p=t.m10,f=t.m11,_=t.m12,d=t.m13,m=t.m14,v=t.m15,y=i*s-n*a,g=i*l-r*a,A=i*c-o*a,b=n*l-r*s,x=n*c-o*s,T=r*c-o*l,S=u*d-h*_,E=u*m-p*_,C=u*v-f*_,w=h*m-p*d,k=h*v-f*d,O=p*v-f*m,R=y*O-g*k+A*w+b*C-x*E+T*S;return R?(R=1/R,e.m00=(s*O-l*k+c*w)*R,e.m01=(l*C-a*O-c*E)*R,e.m02=(a*k-s*C+c*S)*R,e.m03=(r*k-n*O-o*w)*R,e.m04=(i*O-r*C+o*E)*R,e.m05=(n*C-i*k-o*S)*R,e.m06=(d*T-m*x+v*b)*R,e.m07=(m*A-_*T-v*g)*R,e.m08=(_*x-d*A+v*y)*R,e):null}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.m00,e[i+1]=t.m01,e[i+2]=t.m02,e[i+3]=t.m03,e[i+4]=t.m04,e[i+5]=t.m05,e[i+6]=t.m06,e[i+7]=t.m07,e[i+8]=t.m08,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.m00=t[i+0],e.m01=t[i+1],e.m02=t[i+2],e.m03=t[i+3],e.m04=t[i+4],e.m05=t[i+5],e.m06=t[i+6],e.m07=t[i+7],e.m08=t[i+8],e}},{key:"add",value:function(e,t,i){return e.m00=t.m00+i.m00,e.m01=t.m01+i.m01,e.m02=t.m02+i.m02,e.m03=t.m03+i.m03,e.m04=t.m04+i.m04,e.m05=t.m05+i.m05,e.m06=t.m06+i.m06,e.m07=t.m07+i.m07,e.m08=t.m08+i.m08,e}},{key:"subtract",value:function(e,t,i){return e.m00=t.m00-i.m00,e.m01=t.m01-i.m01,e.m02=t.m02-i.m02,e.m03=t.m03-i.m03,e.m04=t.m04-i.m04,e.m05=t.m05-i.m05,e.m06=t.m06-i.m06,e.m07=t.m07-i.m07,e.m08=t.m08-i.m08,e}},{key:"multiplyScalar",value:function(e,t,i){return e.m00=t.m00*i,e.m01=t.m01*i,e.m02=t.m02*i,e.m03=t.m03*i,e.m04=t.m04*i,e.m05=t.m05*i,e.m06=t.m06*i,e.m07=t.m07*i,e.m08=t.m08*i,e}},{key:"multiplyScalarAndAdd",value:function(e,t,i,n){return e.m00=i.m00*n+t.m00,e.m01=i.m01*n+t.m01,e.m02=i.m02*n+t.m02,e.m03=i.m03*n+t.m03,e.m04=i.m04*n+t.m04,e.m05=i.m05*n+t.m05,e.m06=i.m06*n+t.m06,e.m07=i.m07*n+t.m07,e.m08=i.m08*n+t.m08,e}},{key:"strictEquals",value:function(e,t){return e.m00===t.m00&&e.m01===t.m01&&e.m02===t.m02&&e.m03===t.m03&&e.m04===t.m04&&e.m05===t.m05&&e.m06===t.m06&&e.m07===t.m07&&e.m08===t.m08}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.m00-t.m00)<=i*Math.max(1,Math.abs(e.m00),Math.abs(t.m00))&&Math.abs(e.m01-t.m01)<=i*Math.max(1,Math.abs(e.m01),Math.abs(t.m01))&&Math.abs(e.m02-t.m02)<=i*Math.max(1,Math.abs(e.m02),Math.abs(t.m02))&&Math.abs(e.m03-t.m03)<=i*Math.max(1,Math.abs(e.m03),Math.abs(t.m03))&&Math.abs(e.m04-t.m04)<=i*Math.max(1,Math.abs(e.m04),Math.abs(t.m04))&&Math.abs(e.m05-t.m05)<=i*Math.max(1,Math.abs(e.m05),Math.abs(t.m05))&&Math.abs(e.m06-t.m06)<=i*Math.max(1,Math.abs(e.m06),Math.abs(t.m06))&&Math.abs(e.m07-t.m07)<=i*Math.max(1,Math.abs(e.m07),Math.abs(t.m07))&&Math.abs(e.m08-t.m08)<=i*Math.max(1,Math.abs(e.m08),Math.abs(t.m08))}}]),J(t,[{key:"clone",value:function(){var e=this;return new t(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return"object"===Q(e)?(this.m00=e.m00,this.m01=e.m01,this.m02=e.m02,this.m03=e.m03,this.m04=e.m04,this.m05=e.m05,this.m06=e.m06,this.m07=e.m07,this.m08=e.m08):(this.m00=e,this.m01=t,this.m02=i,this.m03=n,this.m04=r,this.m05=o,this.m06=a,this.m07=s,this.m08=l),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.m00-e.m00)<=t*Math.max(1,Math.abs(this.m00),Math.abs(e.m00))&&Math.abs(this.m01-e.m01)<=t*Math.max(1,Math.abs(this.m01),Math.abs(e.m01))&&Math.abs(this.m02-e.m02)<=t*Math.max(1,Math.abs(this.m02),Math.abs(e.m02))&&Math.abs(this.m03-e.m03)<=t*Math.max(1,Math.abs(this.m03),Math.abs(e.m03))&&Math.abs(this.m04-e.m04)<=t*Math.max(1,Math.abs(this.m04),Math.abs(e.m04))&&Math.abs(this.m05-e.m05)<=t*Math.max(1,Math.abs(this.m05),Math.abs(e.m05))&&Math.abs(this.m06-e.m06)<=t*Math.max(1,Math.abs(this.m06),Math.abs(e.m06))&&Math.abs(this.m07-e.m07)<=t*Math.max(1,Math.abs(this.m07),Math.abs(e.m07))&&Math.abs(this.m08-e.m08)<=t*Math.max(1,Math.abs(this.m08),Math.abs(e.m08))}},{key:"strictEquals",value:function(e){return this.m00===e.m00&&this.m01===e.m01&&this.m02===e.m02&&this.m03===e.m03&&this.m04===e.m04&&this.m05===e.m05&&this.m06===e.m06&&this.m07===e.m07&&this.m08===e.m08}},{key:"toString",value:function(){var e=this;return"[\n"+e.m00+", "+e.m01+", "+e.m02+",\n"+e.m03+",\n"+e.m04+", "+e.m05+",\n"+e.m06+", "+e.m07+",\n"+e.m08+"\n]"}},{key:"identity",value:function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this}},{key:"transpose",value:function(){var e=this.m01,t=this.m02,i=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=e,this.m05=this.m07,this.m06=t,this.m07=i,this}},{key:"invert",value:function(){var e=this.m00,t=this.m01,i=this.m02,n=this.m03,r=this.m04,o=this.m05,a=this.m06,s=this.m07,l=this.m08,c=l*r-o*s,u=-l*n+o*a,h=s*n-r*a,p=e*c+t*u+i*h;return 0===p?(this.set(0,0,0,0,0,0,0,0,0),this):(p=1/p,this.m00=c*p,this.m01=(-l*t+i*s)*p,this.m02=(o*t-i*r)*p,this.m03=u*p,this.m04=(l*e-i*a)*p,this.m05=(-o*e+i*n)*p,this.m06=h*p,this.m07=(-s*e+t*a)*p,this.m08=(r*e-t*n)*p,this)}},{key:"determinant",value:function(){var e=this.m00,t=this.m01,i=this.m02,n=this.m03,r=this.m04,o=this.m05,a=this.m06,s=this.m07,l=this.m08;return e*(l*r-o*s)+t*(-l*n+o*a)+i*(s*n-r*a)}},{key:"add",value:function(e){return this.m00=this.m00+e.m00,this.m01=this.m01+e.m01,this.m02=this.m02+e.m02,this.m03=this.m03+e.m03,this.m04=this.m04+e.m04,this.m05=this.m05+e.m05,this.m06=this.m06+e.m06,this.m07=this.m07+e.m07,this.m08=this.m08+e.m08,this}},{key:"subtract",value:function(e){return this.m00=this.m00-e.m00,this.m01=this.m01-e.m01,this.m02=this.m02-e.m02,this.m03=this.m03-e.m03,this.m04=this.m04-e.m04,this.m05=this.m05-e.m05,this.m06=this.m06-e.m06,this.m07=this.m07-e.m07,this.m08=this.m08-e.m08,this}},{key:"multiply",value:function(e){var t=this.m00,i=this.m01,n=this.m02,r=this.m03,o=this.m04,a=this.m05,s=this.m06,l=this.m07,c=this.m08,u=e.m00,h=e.m01,p=e.m02,f=e.m03,_=e.m04,d=e.m05,m=e.m06,v=e.m07,y=e.m08;return this.m00=u*t+h*r+p*s,this.m01=u*i+h*o+p*l,this.m02=u*n+h*a+p*c,this.m03=f*t+_*r+d*s,this.m04=f*i+_*o+d*l,this.m05=f*n+_*a+d*c,this.m06=m*t+v*r+y*s,this.m07=m*i+v*o+y*l,this.m08=m*n+v*a+y*c,this}},{key:"multiplyScalar",value:function(e){return this.m00=this.m00*e,this.m01=this.m01*e,this.m02=this.m02*e,this.m03=this.m03*e,this.m04=this.m04*e,this.m05=this.m05*e,this.m06=this.m06*e,this.m07=this.m07*e,this.m08=this.m08*e,this}},{key:"scale",value:function(e){var t=e.x,i=e.y;return this.m00=t*this.m00,this.m01=t*this.m01,this.m02=t*this.m02,this.m03=i*this.m03,this.m04=i*this.m04,this.m05=i*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this}},{key:"rotate",value:function(e){var t=this.m00,i=this.m01,n=this.m02,r=this.m03,o=this.m04,a=this.m05,s=this.m06,l=this.m07,c=this.m08,u=Math.sin(e),h=Math.cos(e);return this.m00=h*t+u*r,this.m01=h*i+u*o,this.m02=h*n+u*a,this.m03=h*r-u*t,this.m04=h*o-u*i,this.m05=h*a-u*n,this.m06=s,this.m07=l,this.m08=c,this}},{key:"fromQuat",value:function(e){var t=e.x,i=e.y,n=e.z,r=e.w,o=t+t,a=i+i,s=n+n,l=t*o,c=i*o,u=i*a,h=n*o,p=n*a,f=n*s,_=r*o,d=r*a,m=r*s;return this.m00=1-u-f,this.m03=c-m,this.m06=h+d,this.m01=c+m,this.m04=1-l-f,this.m07=p-_,this.m02=h-d,this.m05=p+_,this.m08=1-l-u,this}}]),t}();zi.IDENTITY=Object.freeze(new zi);var Gi=new Mi,Ui=new Mi;ni.fastDefine("cc.Mat3",zi,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),cc.Mat3=zi;var Xi=function(e){function t(e,i,n,r){var o;return Z(this,t),o=re(this,te(t).call(this)),e&&"object"===Q(e)?(o.x=e.x,o.y=e.y,o.z=e.z,o.w=e.w):(o.x=e||0,o.y=i||0,o.z=n||0,o.w=null!=r?r:1),o}return ee(t,xt),J(t,null,[{key:"clone",value:function(e){return new t(e.x,e.y,e.z,e.w)}},{key:"copy",value:function(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}},{key:"set",value:function(e,t,i,n,r){return e.x=t,e.y=i,e.z=n,e.w=r,e}},{key:"identity",value:function(e){return e.x=0,e.y=0,e.z=0,e.w=1,e}},{key:"rotationTo",value:function(e,i,n){var r=Mi.dot(i,n);return r<-.999999?(Mi.cross(ji,Mi.UNIT_X,i),ji.length()<1e-6&&Mi.cross(ji,Mi.UNIT_Y,i),Mi.normalize(ji,ji),t.fromAxisAngle(e,ji,Math.PI),e):r>.999999?(e.x=0,e.y=0,e.z=0,e.w=1,e):(Mi.cross(ji,i,n),e.x=ji.x,e.y=ji.y,e.z=ji.z,e.w=1+r,t.normalize(e,e))}},{key:"getAxisAngle",value:function(e,t){var i=2*Math.acos(t.w),n=Math.sin(i/2);return 0!==n?(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n):(e.x=1,e.y=0,e.z=0),i}},{key:"multiply",value:function(e,t,i){var n=t.x*i.w+t.w*i.x+t.y*i.z-t.z*i.y,r=t.y*i.w+t.w*i.y+t.z*i.x-t.x*i.z,o=t.z*i.w+t.w*i.z+t.x*i.y-t.y*i.x,a=t.w*i.w-t.x*i.x-t.y*i.y-t.z*i.z;return e.x=n,e.y=r,e.z=o,e.w=a,e}},{key:"multiplyScalar",value:function(e,t,i){return e.x=t.x*i,e.y=t.y*i,e.z=t.z*i,e.w=t.w*i,e}},{key:"scaleAndAdd",value:function(e,t,i,n){return e.x=t.x+i.x*n,e.y=t.y+i.y*n,e.z=t.z+i.z*n,e.w=t.w+i.w*n,e}},{key:"rotateX",value:function(e,t,i){i*=.5;var n=Math.sin(i),r=Math.cos(i),o=t.x,a=t.y,s=t.z,l=t.w;return e.x=o*r+l*n,e.y=a*r+s*n,e.z=s*r-a*n,e.w=l*r-o*n,e}},{key:"rotateY",value:function(e,t,i){i*=.5;var n=Math.sin(i),r=Math.cos(i),o=t.x,a=t.y,s=t.z,l=t.w;return e.x=o*r-s*n,e.y=a*r+l*n,e.z=s*r+o*n,e.w=l*r-a*n,e}},{key:"rotateZ",value:function(e,t,i){i*=.5;var n=Math.sin(i),r=Math.cos(i),o=t.x,a=t.y,s=t.z,l=t.w;return e.x=o*r+a*n,e.y=a*r-o*n,e.z=s*r+l*n,e.w=l*r-s*n,e}},{key:"rotateAround",value:function(e,i,n,r){return t.invert(Vi,i),Mi.transformQuat(ji,n,Vi),t.fromAxisAngle(Vi,ji,r),t.multiply(e,i,Vi),e}},{key:"rotateAroundLocal",value:function(e,i,n,r){return t.fromAxisAngle(Vi,n,r),t.multiply(e,i,Vi),e}},{key:"calculateW",value:function(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=Math.sqrt(Math.abs(1-t.x*t.x-t.y*t.y-t.z*t.z)),e}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}},{key:"lerp",value:function(e,t,i,n){return e.x=t.x+n*(i.x-t.x),e.y=t.y+n*(i.y-t.y),e.z=t.z+n*(i.z-t.z),e.w=t.w+n*(i.w-t.w),e}},{key:"slerp",value:function(e,t,i,n){var r=0,o=0,a=i.x,s=i.y,l=i.z,c=i.w,u=t.x*i.x+t.y*i.y+t.z*i.z+t.w*i.w;if(u<0&&(u=-u,a=-a,s=-s,l=-l,c=-c),1-u>1e-6){var h=Math.acos(u),p=Math.sin(h);r=Math.sin((1-n)*h)/p,o=Math.sin(n*h)/p}else r=1-n,o=n;return e.x=r*t.x+o*a,e.y=r*t.y+o*s,e.z=r*t.z+o*l,e.w=r*t.w+o*c,e}},{key:"sqlerp",value:function(e,i,n,r,o,a){return t.slerp(Vi,i,o,a),t.slerp(Hi,n,r,a),t.slerp(e,Vi,Hi,2*a*(1-a)),e}},{key:"invert",value:function(e,t){var i=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w,n=i?1/i:0;return e.x=-t.x*n,e.y=-t.y*n,e.z=-t.z*n,e.w=t.w*n,e}},{key:"conjugate",value:function(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=t.w,e}},{key:"len",value:function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)}},{key:"lengthSqr",value:function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w}},{key:"normalize",value:function(e,t){var i=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w;return i>0&&(i=1/Math.sqrt(i),e.x=t.x*i,e.y=t.y*i,e.z=t.z*i,e.w=t.w*i),e}},{key:"fromAxes",value:function(e,i,n,r){return zi.set(Wi,i.x,i.y,i.z,n.x,n.y,n.z,r.x,r.y,r.z),t.normalize(e,t.fromMat3(e,Wi))}},{key:"fromViewUp",value:function(e,i,n){return zi.fromViewUp(Wi,i,n),t.normalize(e,t.fromMat3(e,Wi))}},{key:"fromAxisAngle",value:function(e,t,i){i*=.5;var n=Math.sin(i);return e.x=n*t.x,e.y=n*t.y,e.z=n*t.z,e.w=Math.cos(i),e}},{key:"fromMat3",value:function(e,t){var i=t.m00,n=t.m03,r=t.m06,o=t.m01,a=t.m04,s=t.m07,l=t.m02,c=t.m05,u=t.m08,h=i+a+u;if(h>0){var p=.5/Math.sqrt(h+1);e.w=.25/p,e.x=(c-s)*p,e.y=(r-l)*p,e.z=(o-n)*p}else if(i>a&&i>u){var f=2*Math.sqrt(1+i-a-u);e.w=(c-s)/f,e.x=.25*f,e.y=(n+o)/f,e.z=(r+l)/f}else if(a>u){var _=2*Math.sqrt(1+a-i-u);e.w=(r-l)/_,e.x=(n+o)/_,e.y=.25*_,e.z=(s+c)/_}else{var d=2*Math.sqrt(1+u-i-a);e.w=(o-n)/d,e.x=(r+l)/d,e.y=(s+c)/d,e.z=.25*d}return e}},{key:"fromEuler",value:function(e,t,i,n){t*=Yi,i*=Yi,n*=Yi;var r=Math.sin(t),o=Math.cos(t),a=Math.sin(i),s=Math.cos(i),l=Math.sin(n),c=Math.cos(n);return e.x=r*s*c+o*a*l,e.y=o*a*c+r*s*l,e.z=o*s*l-r*a*c,e.w=o*s*c-r*a*l,e}},{key:"toAxisX",value:function(e,t){var i=2*t.y,n=2*t.z;return e.x=1-i*t.y-n*t.z,e.y=i*t.x+n*t.w,e.z=n*t.x+i*t.w,e}},{key:"toAxisY",value:function(e,t){var i=2*t.x,n=2*t.y,r=2*t.z;return e.x=n*t.x-r*t.w,e.y=1-i*t.x-r*t.z,e.z=r*t.y+i*t.w,e}},{key:"toAxisZ",value:function(e,t){var i=2*t.x,n=2*t.y,r=2*t.z;return e.x=r*t.x-n*t.w,e.y=r*t.y-i*t.w,e.z=1-i*t.x-n*t.y,e}},{key:"toEuler",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=t.w,s=0,l=0,c=0,u=n*r+o*a;if(u>.499999)s=0,l=mi(2*Math.atan2(n,a)),c=90;else if(u<-.499999)s=0,l=-mi(2*Math.atan2(n,a)),c=-90;else{var h=n*n,p=r*r,f=o*o;s=mi(Math.atan2(2*n*a-2*r*o,1-2*h-2*f)),l=mi(Math.atan2(2*r*a-2*n*o,1-2*p-2*f)),c=mi(Math.asin(2*u)),i&&(s=-180*Math.sign(s+1e-6)+s,l=-180*Math.sign(l+1e-6)+l,c=180*Math.sign(c+1e-6)-c)}return e.x=s,e.y=l,e.z=c,e}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.x,e[i+1]=t.y,e[i+2]=t.z,e[i+3]=t.w,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.x=t[i+0],e.y=t[i+1],e.z=t[i+2],e.w=t[i+3],e}},{key:"strictEquals",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.x-t.x)<=i*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=i*Math.max(1,Math.abs(e.y),Math.abs(t.y))&&Math.abs(e.z-t.z)<=i*Math.max(1,Math.abs(e.z),Math.abs(t.z))&&Math.abs(e.w-t.w)<=i*Math.max(1,Math.abs(e.w),Math.abs(t.w))}}]),J(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"set",value:function(e,t,i,n){return e&&"object"===Q(e)?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=n||1),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))&&Math.abs(this.z-e.z)<=t*Math.max(1,Math.abs(this.z),Math.abs(e.z))&&Math.abs(this.w-e.w)<=t*Math.max(1,Math.abs(this.w),Math.abs(e.w))}},{key:"strictEquals",value:function(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}},{key:"getEulerAngles",value:function(e){return t.toEuler(e,this)}},{key:"lerp",value:function(e,t){return this.x=this.x+t*(e.x-this.x),this.y=this.y+t*(e.y-this.y),this.z=this.z+t*(e.z-this.z),this.w=this.w+t*(e.w-this.w),this}},{key:"slerp",value:function(e,i){return t.slerp(this,this,e,i)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}}]),t}();Xi.IDENTITY=Object.freeze(new Xi);var Vi=new Xi,Hi=new Xi,ji=new Mi,Wi=new zi,Yi=.5*Math.PI/180;function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new Xi(e,t,i,n)}ni.fastDefine("cc.Quat",Xi,{x:0,y:0,z:0,w:1}),cc.Quat=Xi,cc.quat=qi;var Qi=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,_=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return Z(this,t),(e=re(this,te(t).call(this))).m00=void 0,e.m01=void 0,e.m02=void 0,e.m03=void 0,e.m04=void 0,e.m05=void 0,e.m06=void 0,e.m07=void 0,e.m08=void 0,e.m09=void 0,e.m10=void 0,e.m11=void 0,e.m12=void 0,e.m13=void 0,e.m14=void 0,e.m15=void 0,"object"===Q(i)?(e.m00=i.m00,e.m01=i.m01,e.m02=i.m02,e.m03=i.m03,e.m04=i.m04,e.m05=i.m05,e.m06=i.m06,e.m07=i.m07,e.m08=i.m08,e.m09=i.m09,e.m10=i.m10,e.m11=i.m11,e.m12=i.m12,e.m13=i.m13,e.m14=i.m14,e.m15=i.m15):(e.m00=i,e.m01=n,e.m02=r,e.m03=o,e.m04=a,e.m05=s,e.m06=l,e.m07=c,e.m08=u,e.m09=h,e.m10=p,e.m11=f,e.m12=_,e.m13=d,e.m14=m,e.m15=v),e}return ee(t,xt),J(t,null,[{key:"clone",value:function(e){return new t(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08,e.m09,e.m10,e.m11,e.m12,e.m13,e.m14,e.m15)}},{key:"copy",value:function(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15,e}},{key:"set",value:function(e,t,i,n,r,o,a,s,l,c,u,h,p,f,_,d,m){return e.m00=t,e.m01=i,e.m02=n,e.m03=r,e.m04=o,e.m05=a,e.m06=s,e.m07=l,e.m08=c,e.m09=u,e.m10=h,e.m11=p,e.m12=f,e.m13=_,e.m14=d,e.m15=m,e}},{key:"identity",value:function(e){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"transpose",value:function(e,t){if(e===t){var i=t.m01,n=t.m02,r=t.m03,o=t.m06,a=t.m07,s=t.m11;e.m01=t.m04,e.m02=t.m08,e.m03=t.m12,e.m04=i,e.m06=t.m09,e.m07=t.m13,e.m08=n,e.m09=o,e.m11=t.m14,e.m12=r,e.m13=a,e.m14=s}else e.m00=t.m00,e.m01=t.m04,e.m02=t.m08,e.m03=t.m12,e.m04=t.m01,e.m05=t.m05,e.m06=t.m09,e.m07=t.m13,e.m08=t.m02,e.m09=t.m06,e.m10=t.m10,e.m11=t.m14,e.m12=t.m03,e.m13=t.m07,e.m14=t.m11,e.m15=t.m15;return e}},{key:"invert",value:function(e,t){var i=t.m00,n=t.m01,r=t.m02,o=t.m03,a=t.m04,s=t.m05,l=t.m06,c=t.m07,u=t.m08,h=t.m09,p=t.m10,f=t.m11,_=t.m12,d=t.m13,m=t.m14,v=t.m15,y=i*s-n*a,g=i*l-r*a,A=i*c-o*a,b=n*l-r*s,x=n*c-o*s,T=r*c-o*l,S=u*d-h*_,E=u*m-p*_,C=u*v-f*_,w=h*m-p*d,k=h*v-f*d,O=p*v-f*m,R=y*O-g*k+A*w+b*C-x*E+T*S;return 0===R?(e.m00=0,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=0,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=0,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=0,e):(R=1/R,e.m00=(s*O-l*k+c*w)*R,e.m01=(r*k-n*O-o*w)*R,e.m02=(d*T-m*x+v*b)*R,e.m03=(p*x-h*T-f*b)*R,e.m04=(l*C-a*O-c*E)*R,e.m05=(i*O-r*C+o*E)*R,e.m06=(m*A-_*T-v*g)*R,e.m07=(u*T-p*A+f*g)*R,e.m08=(a*k-s*C+c*S)*R,e.m09=(n*C-i*k-o*S)*R,e.m10=(_*x-d*A+v*y)*R,e.m11=(h*A-u*x-f*y)*R,e.m12=(s*E-a*w-l*S)*R,e.m13=(i*w-n*E+r*S)*R,e.m14=(d*g-_*b-m*y)*R,e.m15=(u*b-h*g+p*y)*R,e)}},{key:"determinant",value:function(e){var t=e.m00,i=e.m01,n=e.m02,r=e.m03,o=e.m04,a=e.m05,s=e.m06,l=e.m07,c=e.m08,u=e.m09,h=e.m10,p=e.m11,f=e.m12,_=e.m13,d=e.m14,m=e.m15;return(t*a-i*o)*(h*m-p*d)-(t*s-n*o)*(u*m-p*_)+(t*l-r*o)*(u*d-h*_)+(i*s-n*a)*(c*m-p*f)-(i*l-r*a)*(c*d-h*f)+(n*l-r*s)*(c*_-u*f)}},{key:"multiply",value:function(e,t,i){var n=t.m00,r=t.m01,o=t.m02,a=t.m03,s=t.m04,l=t.m05,c=t.m06,u=t.m07,h=t.m08,p=t.m09,f=t.m10,_=t.m11,d=t.m12,m=t.m13,v=t.m14,y=t.m15,g=i.m00,A=i.m01,b=i.m02,x=i.m03;return e.m00=g*n+A*s+b*h+x*d,e.m01=g*r+A*l+b*p+x*m,e.m02=g*o+A*c+b*f+x*v,e.m03=g*a+A*u+b*_+x*y,g=i.m04,A=i.m05,b=i.m06,x=i.m07,e.m04=g*n+A*s+b*h+x*d,e.m05=g*r+A*l+b*p+x*m,e.m06=g*o+A*c+b*f+x*v,e.m07=g*a+A*u+b*_+x*y,g=i.m08,A=i.m09,b=i.m10,x=i.m11,e.m08=g*n+A*s+b*h+x*d,e.m09=g*r+A*l+b*p+x*m,e.m10=g*o+A*c+b*f+x*v,e.m11=g*a+A*u+b*_+x*y,g=i.m12,A=i.m13,b=i.m14,x=i.m15,e.m12=g*n+A*s+b*h+x*d,e.m13=g*r+A*l+b*p+x*m,e.m14=g*o+A*c+b*f+x*v,e.m15=g*a+A*u+b*_+x*y,e}},{key:"transform",value:function(e,t,i){var n=i.x,r=i.y,o=i.z;if(t===e)e.m12=t.m00*n+t.m04*r+t.m08*o+t.m12,e.m13=t.m01*n+t.m05*r+t.m09*o+t.m13,e.m14=t.m02*n+t.m06*r+t.m10*o+t.m14,e.m15=t.m03*n+t.m07*r+t.m11*o+t.m15;else{var a=t.m00,s=t.m01,l=t.m02,c=t.m03,u=t.m04,h=t.m05,p=t.m06,f=t.m07,_=t.m08,d=t.m09,m=t.m10,v=t.m11;t.m12,t.m13,t.m14,t.m15;e.m00=a,e.m01=s,e.m02=l,e.m03=c,e.m04=u,e.m05=h,e.m06=p,e.m07=f,e.m08=_,e.m09=d,e.m10=m,e.m11=v,e.m12=a*n+u*r+_*o+t.m12,e.m13=s*n+h*r+d*o+t.m13,e.m14=l*n+p*r+m*o+t.m14,e.m15=c*n+f*r+v*o+t.m15}return e}},{key:"translate",value:function(e,t,i){return console.warn("function changed"),t===e?(e.m12+=i.x,e.m13+=i.y,e.m14+=i.z):(e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12+=i.x,e.m13+=i.y,e.m14+=i.z,e.m15=t.m15),e}},{key:"scale",value:function(e,t,i){var n=i.x,r=i.y,o=i.z;return e.m00=t.m00*n,e.m01=t.m01*n,e.m02=t.m02*n,e.m03=t.m03*n,e.m04=t.m04*r,e.m05=t.m05*r,e.m06=t.m06*r,e.m07=t.m07*r,e.m08=t.m08*o,e.m09=t.m09*o,e.m10=t.m10*o,e.m11=t.m11*o,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15,e}},{key:"rotate",value:function(e,t,i,n){var r=n.x,o=n.y,a=n.z,s=Math.sqrt(r*r+o*o+a*a);if(Math.abs(s)<ci)return null;r*=s=1/s,o*=s,a*=s;var l=Math.sin(i),c=Math.cos(i),u=1-c,h=t.m00,p=t.m01,f=t.m02,_=t.m03,d=t.m04,m=t.m05,v=t.m06,y=t.m07,g=t.m08,A=t.m09,b=t.m10,x=t.m11,T=r*r*u+c,S=o*r*u+a*l,E=a*r*u-o*l,C=r*o*u-a*l,w=o*o*u+c,k=a*o*u+r*l,O=r*a*u+o*l,R=o*a*u-r*l,F=a*a*u+c;return e.m00=h*T+d*S+g*E,e.m01=p*T+m*S+A*E,e.m02=f*T+v*S+b*E,e.m03=_*T+y*S+x*E,e.m04=h*C+d*w+g*k,e.m05=p*C+m*w+A*k,e.m06=f*C+v*w+b*k,e.m07=_*C+y*w+x*k,e.m08=h*O+d*R+g*F,e.m09=p*O+m*R+A*F,e.m10=f*O+v*R+b*F,e.m11=_*O+y*R+x*F,t!==e&&(e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e}},{key:"rotateX",value:function(e,t,i){var n=Math.sin(i),r=Math.cos(i),o=t.m04,a=t.m05,s=t.m06,l=t.m07,c=t.m08,u=t.m09,h=t.m10,p=t.m11;return t!==e&&(e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m04=o*r+c*n,e.m05=a*r+u*n,e.m06=s*r+h*n,e.m07=l*r+p*n,e.m08=c*r-o*n,e.m09=u*r-a*n,e.m10=h*r-s*n,e.m11=p*r-l*n,e}},{key:"rotateY",value:function(e,t,i){var n=Math.sin(i),r=Math.cos(i),o=t.m00,a=t.m01,s=t.m02,l=t.m03,c=t.m08,u=t.m09,h=t.m10,p=t.m11;return t!==e&&(e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m00=o*r-c*n,e.m01=a*r-u*n,e.m02=s*r-h*n,e.m03=l*r-p*n,e.m08=o*n+c*r,e.m09=a*n+u*r,e.m10=s*n+h*r,e.m11=l*n+p*r,e}},{key:"rotateZ",value:function(e,t,i){var n=Math.sin(i),r=Math.cos(i),o=t.m00,a=t.m01,s=t.m02,l=t.m03,c=t.m04,u=t.m05,h=t.m06,p=t.m07;return t!==e&&(e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m00=o*r+c*n,e.m01=a*r+u*n,e.m02=s*r+h*n,e.m03=l*r+p*n,e.m04=c*r-o*n,e.m05=u*r-a*n,e.m06=h*r-s*n,e.m07=p*r-l*n,e}},{key:"fromTranslation",value:function(e,t){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=t.x,e.m13=t.y,e.m14=t.z,e.m15=1,e}},{key:"fromScaling",value:function(e,t){return e.m00=t.x,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=t.y,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=t.z,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"fromRotation",value:function(e,t,i){var n=i.x,r=i.y,o=i.z,a=Math.sqrt(n*n+r*r+o*o);if(Math.abs(a)<ci)return null;n*=a=1/a,r*=a,o*=a;var s=Math.sin(t),l=Math.cos(t),c=1-l;return e.m00=n*n*c+l,e.m01=r*n*c+o*s,e.m02=o*n*c-r*s,e.m03=0,e.m04=n*r*c-o*s,e.m05=r*r*c+l,e.m06=o*r*c+n*s,e.m07=0,e.m08=n*o*c+r*s,e.m09=r*o*c-n*s,e.m10=o*o*c+l,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"fromXRotation",value:function(e,t){var i=Math.sin(t),n=Math.cos(t);return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=n,e.m06=i,e.m07=0,e.m08=0,e.m09=-i,e.m10=n,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"fromYRotation",value:function(e,t){var i=Math.sin(t),n=Math.cos(t);return e.m00=n,e.m01=0,e.m02=-i,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=i,e.m09=0,e.m10=n,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"fromZRotation",value:function(e,t){var i=Math.sin(t),n=Math.cos(t);return e.m00=n,e.m01=i,e.m02=0,e.m03=0,e.m04=-i,e.m05=n,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"fromRT",value:function(e,t,i){var n=t.x,r=t.y,o=t.z,a=t.w,s=n+n,l=r+r,c=o+o,u=n*s,h=n*l,p=n*c,f=r*l,_=r*c,d=o*c,m=a*s,v=a*l,y=a*c;return e.m00=1-(f+d),e.m01=h+y,e.m02=p-v,e.m03=0,e.m04=h-y,e.m05=1-(u+d),e.m06=_+m,e.m07=0,e.m08=p+v,e.m09=_-m,e.m10=1-(u+f),e.m11=0,e.m12=i.x,e.m13=i.y,e.m14=i.z,e.m15=1,e}},{key:"getTranslation",value:function(e,t){return e.x=t.m12,e.y=t.m13,e.z=t.m14,e}},{key:"getScaling",value:function(e,t){var i=Ki.m00=t.m00,n=Ki.m01=t.m01,r=Ki.m02=t.m02,o=Ki.m03=t.m04,a=Ki.m04=t.m05,s=Ki.m05=t.m06,l=Ki.m06=t.m08,c=Ki.m07=t.m09,u=Ki.m08=t.m10;return e.x=Math.sqrt(i*i+n*n+r*r),e.y=Math.sqrt(o*o+a*a+s*s),e.z=Math.sqrt(l*l+c*c+u*u),zi.determinant(Ki)<0&&(e.x*=-1),e}},{key:"getRotation",value:function(e,t){var i=t.m00+t.m05+t.m10,n=0;return i>0?(n=2*Math.sqrt(i+1),e.w=.25*n,e.x=(t.m06-t.m09)/n,e.y=(t.m08-t.m02)/n,e.z=(t.m01-t.m04)/n):t.m00>t.m05&&t.m00>t.m10?(n=2*Math.sqrt(1+t.m00-t.m05-t.m10),e.w=(t.m06-t.m09)/n,e.x=.25*n,e.y=(t.m01+t.m04)/n,e.z=(t.m08+t.m02)/n):t.m05>t.m10?(n=2*Math.sqrt(1+t.m05-t.m00-t.m10),e.w=(t.m08-t.m02)/n,e.x=(t.m01+t.m04)/n,e.y=.25*n,e.z=(t.m06+t.m09)/n):(n=2*Math.sqrt(1+t.m10-t.m00-t.m05),e.w=(t.m01-t.m04)/n,e.x=(t.m08+t.m02)/n,e.y=(t.m06+t.m09)/n,e.z=.25*n),e}},{key:"toRTS",value:function(e,t,i,n){n.x=Mi.set(Zi,e.m00,e.m01,e.m02).length(),Ki.m00=e.m00/n.x,Ki.m01=e.m01/n.x,Ki.m02=e.m02/n.x,n.y=Mi.set(Zi,e.m04,e.m05,e.m06).length(),Ki.m03=e.m04/n.y,Ki.m04=e.m05/n.y,Ki.m05=e.m06/n.y,n.z=Mi.set(Zi,e.m08,e.m09,e.m10).length(),Ki.m06=e.m08/n.z,Ki.m07=e.m09/n.z,Ki.m08=e.m10/n.z,zi.determinant(Ki)<0&&(n.x*=-1,Ki.m00*=-1,Ki.m01*=-1,Ki.m02*=-1),Xi.fromMat3(t,Ki),Mi.set(i,e.m12,e.m13,e.m14)}},{key:"fromRTS",value:function(e,t,i,n){var r=t.x,o=t.y,a=t.z,s=t.w,l=r+r,c=o+o,u=a+a,h=r*l,p=r*c,f=r*u,_=o*c,d=o*u,m=a*u,v=s*l,y=s*c,g=s*u,A=n.x,b=n.y,x=n.z;return e.m00=(1-(_+m))*A,e.m01=(p+g)*A,e.m02=(f-y)*A,e.m03=0,e.m04=(p-g)*b,e.m05=(1-(h+m))*b,e.m06=(d+v)*b,e.m07=0,e.m08=(f+y)*x,e.m09=(d-v)*x,e.m10=(1-(h+_))*x,e.m11=0,e.m12=i.x,e.m13=i.y,e.m14=i.z,e.m15=1,e}},{key:"fromRTSOrigin",value:function(e,t,i,n,r){var o=t.x,a=t.y,s=t.z,l=t.w,c=o+o,u=a+a,h=s+s,p=o*c,f=o*u,_=o*h,d=a*u,m=a*h,v=s*h,y=l*c,g=l*u,A=l*h,b=n.x,x=n.y,T=n.z,S=r.x,E=r.y,C=r.z;return e.m00=(1-(d+v))*b,e.m01=(f+A)*b,e.m02=(_-g)*b,e.m03=0,e.m04=(f-A)*x,e.m05=(1-(p+v))*x,e.m06=(m+y)*x,e.m07=0,e.m08=(_+g)*T,e.m09=(m-y)*T,e.m10=(1-(p+d))*T,e.m11=0,e.m12=i.x+S-(e.m00*S+e.m04*E+e.m08*C),e.m13=i.y+E-(e.m01*S+e.m05*E+e.m09*C),e.m14=i.z+C-(e.m02*S+e.m06*E+e.m10*C),e.m15=1,e}},{key:"fromQuat",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,s=n+n,l=r+r,c=i*a,u=n*a,h=n*s,p=r*a,f=r*s,_=r*l,d=o*a,m=o*s,v=o*l;return e.m00=1-h-_,e.m01=u+v,e.m02=p-m,e.m03=0,e.m04=u-v,e.m05=1-c-_,e.m06=f+d,e.m07=0,e.m08=p+m,e.m09=f-d,e.m10=1-c-h,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}},{key:"frustum",value:function(e,t,i,n,r,o,a){var s=1/(i-t),l=1/(r-n),c=1/(o-a);return e.m00=2*o*s,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=2*o*l,e.m06=0,e.m07=0,e.m08=(i+t)*s,e.m09=(r+n)*l,e.m10=(a+o)*c,e.m11=-1,e.m12=0,e.m13=0,e.m14=a*o*2*c,e.m15=0,e}},{key:"perspective",value:function(e,t,i,n,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=1/Math.tan(t/2),s=1/(n-r);return e.m00=o?a/i:a,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=o?a:a*i,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=(r+n)*s,e.m11=-1,e.m12=0,e.m13=0,e.m14=2*r*n*s,e.m15=0,e}},{key:"ortho",value:function(e,t,i,n,r,o,a){var s=1/(t-i),l=1/(n-r),c=1/(o-a);return e.m00=-2*s,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=-2*l,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=2*c,e.m11=0,e.m12=(t+i)*s,e.m13=(r+n)*l,e.m14=(a+o)*c,e.m15=1,e}},{key:"lookAt",value:function(e,t,i,n){var r=t.x,o=t.y,a=t.z,s=n.x,l=n.y,c=n.z,u=r-i.x,h=o-i.y,p=a-i.z,f=1/Math.sqrt(u*u+h*h+p*p),_=l*(p*=f)-c*(h*=f),d=c*(u*=f)-s*p,m=s*h-l*u,v=h*(m*=f=1/Math.sqrt(_*_+d*d+m*m))-p*(d*=f),y=p*(_*=f)-u*m,g=u*d-h*_;return e.m00=_,e.m01=v,e.m02=u,e.m03=0,e.m04=d,e.m05=y,e.m06=h,e.m07=0,e.m08=m,e.m09=g,e.m10=p,e.m11=0,e.m12=-(_*r+d*o+m*a),e.m13=-(v*r+y*o+g*a),e.m14=-(u*r+h*o+p*a),e.m15=1,e}},{key:"inverseTranspose",value:function(e,t){var i=t.m00,n=t.m01,r=t.m02,o=t.m03,a=t.m04,s=t.m05,l=t.m06,c=t.m07,u=t.m08,h=t.m09,p=t.m10,f=t.m11,_=t.m12,d=t.m13,m=t.m14,v=t.m15,y=i*s-n*a,g=i*l-r*a,A=i*c-o*a,b=n*l-r*s,x=n*c-o*s,T=r*c-o*l,S=u*d-h*_,E=u*m-p*_,C=u*v-f*_,w=h*m-p*d,k=h*v-f*d,O=p*v-f*m,R=y*O-g*k+A*w+b*C-x*E+T*S;return R?(R=1/R,e.m00=(s*O-l*k+c*w)*R,e.m01=(l*C-a*O-c*E)*R,e.m02=(a*k-s*C+c*S)*R,e.m03=0,e.m04=(r*k-n*O-o*w)*R,e.m05=(i*O-r*C+o*E)*R,e.m06=(n*C-i*k-o*S)*R,e.m07=0,e.m08=(d*T-m*x+v*b)*R,e.m09=(m*A-_*T-v*g)*R,e.m10=(_*x-d*A+v*y)*R,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e):null}},{key:"toArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i+0]=t.m00,e[i+1]=t.m01,e[i+2]=t.m02,e[i+3]=t.m03,e[i+4]=t.m04,e[i+5]=t.m05,e[i+6]=t.m06,e[i+7]=t.m07,e[i+8]=t.m08,e[i+9]=t.m09,e[i+10]=t.m10,e[i+11]=t.m11,e[i+12]=t.m12,e[i+13]=t.m13,e[i+14]=t.m14,e[i+15]=t.m15,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.m00=t[i+0],e.m01=t[i+1],e.m02=t[i+2],e.m03=t[i+3],e.m04=t[i+4],e.m05=t[i+5],e.m06=t[i+6],e.m07=t[i+7],e.m08=t[i+8],e.m09=t[i+9],e.m10=t[i+10],e.m11=t[i+11],e.m12=t[i+12],e.m13=t[i+13],e.m14=t[i+14],e.m15=t[i+15],e}},{key:"add",value:function(e,t,i){return e.m00=t.m00+i.m00,e.m01=t.m01+i.m01,e.m02=t.m02+i.m02,e.m03=t.m03+i.m03,e.m04=t.m04+i.m04,e.m05=t.m05+i.m05,e.m06=t.m06+i.m06,e.m07=t.m07+i.m07,e.m08=t.m08+i.m08,e.m09=t.m09+i.m09,e.m10=t.m10+i.m10,e.m11=t.m11+i.m11,e.m12=t.m12+i.m12,e.m13=t.m13+i.m13,e.m14=t.m14+i.m14,e.m15=t.m15+i.m15,e}},{key:"subtract",value:function(e,t,i){return e.m00=t.m00-i.m00,e.m01=t.m01-i.m01,e.m02=t.m02-i.m02,e.m03=t.m03-i.m03,e.m04=t.m04-i.m04,e.m05=t.m05-i.m05,e.m06=t.m06-i.m06,e.m07=t.m07-i.m07,e.m08=t.m08-i.m08,e.m09=t.m09-i.m09,e.m10=t.m10-i.m10,e.m11=t.m11-i.m11,e.m12=t.m12-i.m12,e.m13=t.m13-i.m13,e.m14=t.m14-i.m14,e.m15=t.m15-i.m15,e}},{key:"multiplyScalar",value:function(e,t,i){return e.m00=t.m00*i,e.m01=t.m01*i,e.m02=t.m02*i,e.m03=t.m03*i,e.m04=t.m04*i,e.m05=t.m05*i,e.m06=t.m06*i,e.m07=t.m07*i,e.m08=t.m08*i,e.m09=t.m09*i,e.m10=t.m10*i,e.m11=t.m11*i,e.m12=t.m12*i,e.m13=t.m13*i,e.m14=t.m14*i,e.m15=t.m15*i,e}},{key:"multiplyScalarAndAdd",value:function(e,t,i,n){return e.m00=t.m00+i.m00*n,e.m01=t.m01+i.m01*n,e.m02=t.m02+i.m02*n,e.m03=t.m03+i.m03*n,e.m04=t.m04+i.m04*n,e.m05=t.m05+i.m05*n,e.m06=t.m06+i.m06*n,e.m07=t.m07+i.m07*n,e.m08=t.m08+i.m08*n,e.m09=t.m09+i.m09*n,e.m10=t.m10+i.m10*n,e.m11=t.m11+i.m11*n,e.m12=t.m12+i.m12*n,e.m13=t.m13+i.m13*n,e.m14=t.m14+i.m14*n,e.m15=t.m15+i.m15*n,e}},{key:"strictEquals",value:function(e,t){return e.m00===t.m00&&e.m01===t.m01&&e.m02===t.m02&&e.m03===t.m03&&e.m04===t.m04&&e.m05===t.m05&&e.m06===t.m06&&e.m07===t.m07&&e.m08===t.m08&&e.m09===t.m09&&e.m10===t.m10&&e.m11===t.m11&&e.m12===t.m12&&e.m13===t.m13&&e.m14===t.m14&&e.m15===t.m15}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.m00-t.m00)<=i*Math.max(1,Math.abs(e.m00),Math.abs(t.m00))&&Math.abs(e.m01-t.m01)<=i*Math.max(1,Math.abs(e.m01),Math.abs(t.m01))&&Math.abs(e.m02-t.m02)<=i*Math.max(1,Math.abs(e.m02),Math.abs(t.m02))&&Math.abs(e.m03-t.m03)<=i*Math.max(1,Math.abs(e.m03),Math.abs(t.m03))&&Math.abs(e.m04-t.m04)<=i*Math.max(1,Math.abs(e.m04),Math.abs(t.m04))&&Math.abs(e.m05-t.m05)<=i*Math.max(1,Math.abs(e.m05),Math.abs(t.m05))&&Math.abs(e.m06-t.m06)<=i*Math.max(1,Math.abs(e.m06),Math.abs(t.m06))&&Math.abs(e.m07-t.m07)<=i*Math.max(1,Math.abs(e.m07),Math.abs(t.m07))&&Math.abs(e.m08-t.m08)<=i*Math.max(1,Math.abs(e.m08),Math.abs(t.m08))&&Math.abs(e.m09-t.m09)<=i*Math.max(1,Math.abs(e.m09),Math.abs(t.m09))&&Math.abs(e.m10-t.m10)<=i*Math.max(1,Math.abs(e.m10),Math.abs(t.m10))&&Math.abs(e.m11-t.m11)<=i*Math.max(1,Math.abs(e.m11),Math.abs(t.m11))&&Math.abs(e.m12-t.m12)<=i*Math.max(1,Math.abs(e.m12),Math.abs(t.m12))&&Math.abs(e.m13-t.m13)<=i*Math.max(1,Math.abs(e.m13),Math.abs(t.m13))&&Math.abs(e.m14-t.m14)<=i*Math.max(1,Math.abs(e.m14),Math.abs(t.m14))&&Math.abs(e.m15-t.m15)<=i*Math.max(1,Math.abs(e.m15),Math.abs(t.m15))}}]),J(t,[{key:"clone",value:function(){var e=this;return new t(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08,e.m09,e.m10,e.m11,e.m12,e.m13,e.m14,e.m15)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,_=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,d=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return"object"===Q(e)?(this.m01=e.m01,this.m02=e.m02,this.m03=e.m03,this.m04=e.m04,this.m05=e.m05,this.m06=e.m06,this.m07=e.m07,this.m08=e.m08,this.m09=e.m09,this.m10=e.m10,this.m11=e.m11,this.m12=e.m12,this.m13=e.m13,this.m14=e.m14,this.m15=e.m15,this.m00=e.m00):(this.m01=t,this.m02=i,this.m03=n,this.m04=r,this.m05=o,this.m06=a,this.m07=s,this.m08=l,this.m09=c,this.m10=u,this.m11=h,this.m12=p,this.m13=f,this.m14=_,this.m15=d,this.m00=e),this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return Math.abs(this.m00-e.m00)<=t*Math.max(1,Math.abs(this.m00),Math.abs(e.m00))&&Math.abs(this.m01-e.m01)<=t*Math.max(1,Math.abs(this.m01),Math.abs(e.m01))&&Math.abs(this.m02-e.m02)<=t*Math.max(1,Math.abs(this.m02),Math.abs(e.m02))&&Math.abs(this.m03-e.m03)<=t*Math.max(1,Math.abs(this.m03),Math.abs(e.m03))&&Math.abs(this.m04-e.m04)<=t*Math.max(1,Math.abs(this.m04),Math.abs(e.m04))&&Math.abs(this.m05-e.m05)<=t*Math.max(1,Math.abs(this.m05),Math.abs(e.m05))&&Math.abs(this.m06-e.m06)<=t*Math.max(1,Math.abs(this.m06),Math.abs(e.m06))&&Math.abs(this.m07-e.m07)<=t*Math.max(1,Math.abs(this.m07),Math.abs(e.m07))&&Math.abs(this.m08-e.m08)<=t*Math.max(1,Math.abs(this.m08),Math.abs(e.m08))&&Math.abs(this.m09-e.m09)<=t*Math.max(1,Math.abs(this.m09),Math.abs(e.m09))&&Math.abs(this.m10-e.m10)<=t*Math.max(1,Math.abs(this.m10),Math.abs(e.m10))&&Math.abs(this.m11-e.m11)<=t*Math.max(1,Math.abs(this.m11),Math.abs(e.m11))&&Math.abs(this.m12-e.m12)<=t*Math.max(1,Math.abs(this.m12),Math.abs(e.m12))&&Math.abs(this.m13-e.m13)<=t*Math.max(1,Math.abs(this.m13),Math.abs(e.m13))&&Math.abs(this.m14-e.m14)<=t*Math.max(1,Math.abs(this.m14),Math.abs(e.m14))&&Math.abs(this.m15-e.m15)<=t*Math.max(1,Math.abs(this.m15),Math.abs(e.m15))}},{key:"strictEquals",value:function(e){return this.m00===e.m00&&this.m01===e.m01&&this.m02===e.m02&&this.m03===e.m03&&this.m04===e.m04&&this.m05===e.m05&&this.m06===e.m06&&this.m07===e.m07&&this.m08===e.m08&&this.m09===e.m09&&this.m10===e.m10&&this.m11===e.m11&&this.m12===e.m12&&this.m13===e.m13&&this.m14===e.m14&&this.m15===e.m15}},{key:"toString",value:function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"}},{key:"identity",value:function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this}},{key:"transpose",value:function(){var e=this.m01,t=this.m02,i=this.m03,n=this.m06,r=this.m07,o=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=e,this.m06=this.m09,this.m07=this.m13,this.m08=t,this.m09=n,this.m11=this.m14,this.m12=i,this.m13=r,this.m14=o,this}},{key:"invert",value:function(){var e=this.m00,t=this.m01,i=this.m02,n=this.m03,r=this.m04,o=this.m05,a=this.m06,s=this.m07,l=this.m08,c=this.m09,u=this.m10,h=this.m11,p=this.m12,f=this.m13,_=this.m14,d=this.m15,m=e*o-t*r,v=e*a-i*r,y=e*s-n*r,g=t*a-i*o,A=t*s-n*o,b=i*s-n*a,x=l*f-c*p,T=l*_-u*p,S=l*d-h*p,E=c*_-u*f,C=c*d-h*f,w=u*d-h*_,k=m*w-v*C+y*E+g*S-A*T+b*x;return 0===k?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(k=1/k,this.m00=(o*w-a*C+s*E)*k,this.m01=(i*C-t*w-n*E)*k,this.m02=(f*b-_*A+d*g)*k,this.m03=(u*A-c*b-h*g)*k,this.m04=(a*S-r*w-s*T)*k,this.m05=(e*w-i*S+n*T)*k,this.m06=(_*y-p*b-d*v)*k,this.m07=(l*b-u*y+h*v)*k,this.m08=(r*C-o*S+s*x)*k,this.m09=(t*S-e*C-n*x)*k,this.m10=(p*A-f*y+d*m)*k,this.m11=(c*y-l*A-h*m)*k,this.m12=(o*T-r*E-a*x)*k,this.m13=(e*E-t*T+i*x)*k,this.m14=(f*v-p*g-_*m)*k,this.m15=(l*g-c*v+u*m)*k,this)}},{key:"determinant",value:function(){var e=this.m00,t=this.m01,i=this.m02,n=this.m03,r=this.m04,o=this.m05,a=this.m06,s=this.m07,l=this.m08,c=this.m09,u=this.m10,h=this.m11,p=this.m12,f=this.m13,_=this.m14,d=this.m15;return(e*o-t*r)*(u*d-h*_)-(e*a-i*r)*(c*d-h*f)+(e*s-n*r)*(c*_-u*f)+(t*a-i*o)*(l*d-h*p)-(t*s-n*o)*(l*_-u*p)+(i*s-n*a)*(l*f-c*p)}},{key:"add",value:function(e){return this.m00=this.m00+e.m00,this.m01=this.m01+e.m01,this.m02=this.m02+e.m02,this.m03=this.m03+e.m03,this.m04=this.m04+e.m04,this.m05=this.m05+e.m05,this.m06=this.m06+e.m06,this.m07=this.m07+e.m07,this.m08=this.m08+e.m08,this.m09=this.m09+e.m09,this.m10=this.m10+e.m10,this.m11=this.m11+e.m11,this.m12=this.m12+e.m12,this.m13=this.m13+e.m13,this.m14=this.m14+e.m14,this.m15=this.m15+e.m15,this}},{key:"subtract",value:function(e){return this.m00=this.m00-e.m00,this.m01=this.m01-e.m01,this.m02=this.m02-e.m02,this.m03=this.m03-e.m03,this.m04=this.m04-e.m04,this.m05=this.m05-e.m05,this.m06=this.m06-e.m06,this.m07=this.m07-e.m07,this.m08=this.m08-e.m08,this.m09=this.m09-e.m09,this.m10=this.m10-e.m10,this.m11=this.m11-e.m11,this.m12=this.m12-e.m12,this.m13=this.m13-e.m13,this.m14=this.m14-e.m14,this.m15=this.m15-e.m15,this}},{key:"multiply",value:function(e){var t=this.m00,i=this.m01,n=this.m02,r=this.m03,o=this.m04,a=this.m05,s=this.m06,l=this.m07,c=this.m08,u=this.m09,h=this.m10,p=this.m11,f=this.m12,_=this.m13,d=this.m14,m=this.m15,v=e.m00,y=e.m01,g=e.m02,A=e.m03;return this.m00=v*t+y*o+g*c+A*f,this.m01=v*i+y*a+g*u+A*_,this.m02=v*n+y*s+g*h+A*d,this.m03=v*r+y*l+g*p+A*m,v=e.m04,y=e.m05,g=e.m06,A=e.m07,this.m04=v*t+y*o+g*c+A*f,this.m05=v*i+y*a+g*u+A*_,this.m06=v*n+y*s+g*h+A*d,this.m07=v*r+y*l+g*p+A*m,v=e.m08,y=e.m09,g=e.m10,A=e.m11,this.m08=v*t+y*o+g*c+A*f,this.m09=v*i+y*a+g*u+A*_,this.m10=v*n+y*s+g*h+A*d,this.m11=v*r+y*l+g*p+A*m,v=e.m12,y=e.m13,g=e.m14,A=e.m15,this.m12=v*t+y*o+g*c+A*f,this.m13=v*i+y*a+g*u+A*_,this.m14=v*n+y*s+g*h+A*d,this.m15=v*r+y*l+g*p+A*m,this}},{key:"multiplyScalar",value:function(e){return this.m00=this.m00*e,this.m01=this.m01*e,this.m02=this.m02*e,this.m03=this.m03*e,this.m04=this.m04*e,this.m05=this.m05*e,this.m06=this.m06*e,this.m07=this.m07*e,this.m08=this.m08*e,this.m09=this.m09*e,this.m10=this.m10*e,this.m11=this.m11*e,this.m12=this.m12*e,this.m13=this.m13*e,this.m14=this.m14*e,this.m15=this.m15*e,this}},{key:"translate",value:function(e){return console.warn("function changed"),this.m12+=e.x,this.m13+=e.y,this.m14+=e.z,this}},{key:"scale",value:function(e){var t=e.x,i=e.y,n=e.z;return this.m00=this.m00*t,this.m01=this.m01*t,this.m02=this.m02*t,this.m03=this.m03*t,this.m04=this.m04*i,this.m05=this.m05*i,this.m06=this.m06*i,this.m07=this.m07*i,this.m08=this.m08*n,this.m09=this.m09*n,this.m10=this.m10*n,this.m11=this.m11*n,this.m12=this.m12,this.m13=this.m13,this.m14=this.m14,this.m15=this.m15,this}},{key:"rotate",value:function(e,t){var i=t.x,n=t.y,r=t.z,o=Math.sqrt(i*i+n*n+r*r);if(Math.abs(o)<ci)return null;i*=o=1/o,n*=o,r*=o;var a=Math.sin(e),s=Math.cos(e),l=1-s,c=this.m00,u=this.m01,h=this.m02,p=this.m03,f=this.m04,_=this.m05,d=this.m06,m=this.m07,v=this.m08,y=this.m09,g=this.m10,A=this.m11,b=i*i*l+s,x=n*i*l+r*a,T=r*i*l-n*a,S=i*n*l-r*a,E=n*n*l+s,C=r*n*l+i*a,w=i*r*l+n*a,k=n*r*l-i*a,O=r*r*l+s;return this.m00=c*b+f*x+v*T,this.m01=u*b+_*x+y*T,this.m02=h*b+d*x+g*T,this.m03=p*b+m*x+A*T,this.m04=c*S+f*E+v*C,this.m05=u*S+_*E+y*C,this.m06=h*S+d*E+g*C,this.m07=p*S+m*E+A*C,this.m08=c*w+f*k+v*O,this.m09=u*w+_*k+y*O,this.m10=h*w+d*k+g*O,this.m11=p*w+m*k+A*O,this}},{key:"getTranslation",value:function(e){return e.x=this.m12,e.y=this.m13,e.z=this.m14,e}},{key:"getScale",value:function(e){var t=Ki.m00=this.m00,i=Ki.m01=this.m01,n=Ki.m02=this.m02,r=Ki.m03=this.m04,o=Ki.m04=this.m05,a=Ki.m05=this.m06,s=Ki.m06=this.m08,l=Ki.m07=this.m09,c=Ki.m08=this.m10;return e.x=Math.sqrt(t*t+i*i+n*n),e.y=Math.sqrt(r*r+o*o+a*a),e.z=Math.sqrt(s*s+l*l+c*c),zi.determinant(Ki)<0&&(e.x*=-1),e}},{key:"getRotation",value:function(e){var t=this.m00+this.m05+this.m10,i=0;return t>0?(i=2*Math.sqrt(t+1),e.w=.25*i,e.x=(this.m06-this.m09)/i,e.y=(this.m08-this.m02)/i,e.z=(this.m01-this.m04)/i):this.m00>this.m05&&this.m00>this.m10?(i=2*Math.sqrt(1+this.m00-this.m05-this.m10),e.w=(this.m06-this.m09)/i,e.x=.25*i,e.y=(this.m01+this.m04)/i,e.z=(this.m08+this.m02)/i):this.m05>this.m10?(i=2*Math.sqrt(1+this.m05-this.m00-this.m10),e.w=(this.m08-this.m02)/i,e.x=(this.m01+this.m04)/i,e.y=.25*i,e.z=(this.m06+this.m09)/i):(i=2*Math.sqrt(1+this.m10-this.m00-this.m05),e.w=(this.m01-this.m04)/i,e.x=(this.m08+this.m02)/i,e.y=(this.m06+this.m09)/i,e.z=.25*i),e}},{key:"fromRTS",value:function(e,t,i){var n=e.x,r=e.y,o=e.z,a=e.w,s=n+n,l=r+r,c=o+o,u=n*s,h=n*l,p=n*c,f=r*l,_=r*c,d=o*c,m=a*s,v=a*l,y=a*c,g=i.x,A=i.y,b=i.z;return this.m00=(1-(f+d))*g,this.m01=(h+y)*g,this.m02=(p-v)*g,this.m03=0,this.m04=(h-y)*A,this.m05=(1-(u+d))*A,this.m06=(_+m)*A,this.m07=0,this.m08=(p+v)*b,this.m09=(_-m)*b,this.m10=(1-(u+f))*b,this.m11=0,this.m12=t.x,this.m13=t.y,this.m14=t.z,this.m15=1,this}},{key:"fromQuat",value:function(e){var t=e.x,i=e.y,n=e.z,r=e.w,o=t+t,a=i+i,s=n+n,l=t*o,c=i*o,u=i*a,h=n*o,p=n*a,f=n*s,_=r*o,d=r*a,m=r*s;return this.m00=1-u-f,this.m01=c+m,this.m02=h-d,this.m03=0,this.m04=c-m,this.m05=1-l-f,this.m06=p+_,this.m07=0,this.m08=h+d,this.m09=p-_,this.m10=1-l-u,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this}}]),t}();Qi.IDENTITY=Object.freeze(new Qi);var Zi=new Mi,Ki=new zi;function Ji(e,t,i,n,r,o,a,s,l,c,u,h,p,f,_,d){return new Qi(e,t,i,n,r,o,a,s,l,c,u,h,p,f,_,d)}ni.fastDefine("cc.Mat4",Qi,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),cc.Mat4=Qi,cc.mat4=Ji;var $i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Z(this,e),this.a=t,this.b=i,this.c=n,this.d=r,this.tx=o,this.ty=a}return J(e,null,[{key:"identity",value:function(){return new e}},{key:"clone",value:function(t){return new e(t.a,t.b,t.c,t.d,t.tx,t.ty)}},{key:"concat",value:function(e,t,i){var n=t.a,r=t.b,o=t.c,a=t.d,s=t.tx,l=t.ty;e.a=n*i.a+r*i.c,e.b=n*i.b+r*i.d,e.c=o*i.a+a*i.c,e.d=o*i.b+a*i.d,e.tx=s*i.a+l*i.c+i.tx,e.ty=s*i.b+l*i.d+i.ty}},{key:"invert",value:function(e,t){var i=1/(t.a*t.d-t.b*t.c);e.a=i*t.d,e.b=-i*t.b,e.c=-i*t.c,e.d=i*t.a,e.tx=i*(t.c*t.ty-t.d*t.tx),e.ty=i*(t.b*t.tx-t.a*t.ty)}},{key:"fromMat4",value:function(e,t){e.a=t.m00,e.b=t.m01,e.c=t.m04,e.d=t.m05,e.tx=t.m12,e.ty=t.m13}},{key:"transformVec2",value:function(e,t,i,n){var r,o;void 0===n?(n=i,r=t.x,o=t.y):(r=t,o=i),e.x=n.a*r+n.c*o+n.tx,e.y=n.b*r+n.d*o+n.ty}},{key:"transformSize",value:function(e,t,i){e.width=i.a*t.width+i.c*t.height,e.height=i.b*t.width+i.d*t.height}},{key:"transformRect",value:function(e,t,i){var n=t.x+t.width,r=t.y+t.height,o=i.a*t.x+i.c*t.y+i.tx,a=i.b*t.x+i.d*t.y+i.ty,s=i.a*n+i.c*t.y+i.tx,l=i.b*n+i.d*t.y+i.ty,c=i.a*t.x+i.c*r+i.tx,u=i.b*t.x+i.d*r+i.ty,h=i.a*n+i.c*r+i.tx,p=i.b*n+i.d*r+i.ty,f=Math.min(o,s,c,h),_=Math.max(o,s,c,h),d=Math.min(a,l,u,p),m=Math.max(a,l,u,p);e.x=f,e.y=d,e.width=_-f,e.height=m-d}},{key:"transformObb",value:function(e,t,i,n,r,o){var a=o.a*r.x+o.c*r.y+o.tx,s=o.b*r.x+o.d*r.y+o.ty,l=o.a*r.width,c=o.b*r.width,u=o.c*r.height,h=o.d*r.height;t.x=a,t.y=s,i.x=l+a,i.y=c+s,e.x=u+a,e.y=h+s,n.x=l+u+a,n.y=c+h+s}}]),e}();cc.AffineTransform=$i;var en=function(e){function t(e,i){var n;return Z(this,t),n=re(this,te(t).call(this)),e&&"object"===Q(e)?(n.height=e.height,n.width=e.width):(n.width=e||0,n.height=i||0),n}return ee(t,xt),J(t,[{key:"x",set:function(e){this.width=e},get:function(){return this.width}},{key:"y",set:function(e){this.height=e},get:function(){return this.height}}],[{key:"lerp",value:function(e,t,i,n){return e.width=t.width+(i.width-t.width)*n,e.height=t.height+(i.height-t.height)*n,e}}]),J(t,[{key:"clone",value:function(){return new t(this.width,this.height)}},{key:"set",value:function(e,t){return e&&"object"===Q(e)?(this.height=e.height,this.width=e.width):(this.width=e||0,this.height=t||0),this}},{key:"equals",value:function(e){return this.width===e.width&&this.height===e.height}},{key:"lerp",value:function(e,t){return this.width=this.width+(e.width-this.width)*t,this.height=this.height+(e.height-this.height)*t,this}},{key:"toString",value:function(){return"(".concat(this.width.toFixed(2),", ").concat(this.height.toFixed(2),")")}}]),t}();function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new en(e,t)}en.ZERO=Object.freeze(new en(0,0)),en.ONE=Object.freeze(new en(1,1)),ni.fastDefine("cc.Size",en,{width:0,height:0}),cc.size=tn,cc.Size=en;var nn=function(e){function t(e,i,n,r){var o;return Z(this,t),o=re(this,te(t).call(this)),e&&"object"===Q(e)?(o.y=e.y,o.width=e.width,o.height=e.height,o.x=e.x):(o.x=e||0,o.y=i||0,o.width=n||0,o.height=r||0),o}return ee(t,xt),J(t,[{key:"xMin",get:function(){return this.x},set:function(e){this.width+=this.x-e,this.x=e}},{key:"yMin",get:function(){return this.y},set:function(e){this.height+=this.y-e,this.y=e}},{key:"xMax",get:function(){return this.x+this.width},set:function(e){this.width=e-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(e){this.height=e-this.y}},{key:"center",get:function(){return new Oi(this.x+.5*this.width,this.y+.5*this.height)},set:function(e){this.x=e.x-.5*this.width,this.y=e.y-.5*this.height}},{key:"origin",get:function(){return new cc.Vec2(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"size",get:function(){return new en(this.width,this.height)},set:function(e){this.width=e.width,this.height=e.height}},{key:"z",set:function(e){this.width=e},get:function(){return this.width}},{key:"w",set:function(e){this.height=e},get:function(){return this.height}}],[{key:"fromMinMax",value:function(e,t,i){var n=Math.min(t.x,i.x),r=Math.min(t.y,i.y),o=Math.max(t.x,i.x),a=Math.max(t.y,i.y);return e.x=n,e.y=r,e.width=o-n,e.height=a-r,e}},{key:"lerp",value:function(e,t,i,n){var r=t.x,o=t.y,a=t.width,s=t.height;return e.x=r+(i.x-r)*n,e.y=o+(i.y-o)*n,e.width=a+(i.width-a)*n,e.height=s+(i.height-s)*n,e}},{key:"intersection",value:function(e,t,i){var n=t.x,r=t.y,o=t.x+t.width,a=t.y+t.height,s=i.x,l=i.y,c=i.x+i.width,u=i.y+i.height;return e.x=Math.max(n,s),e.y=Math.max(r,l),e.width=Math.min(o,c)-e.x,e.height=Math.min(a,u)-e.y,e}},{key:"union",value:function(e,t,i){var n=t.x,r=t.y,o=t.width,a=t.height,s=i.x,l=i.y,c=i.width,u=i.height;return e.x=Math.min(n,s),e.y=Math.min(r,l),e.width=Math.max(n+o,s+c)-e.x,e.height=Math.max(r+a,l+u)-e.y,e}}]),J(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"set",value:function(e,t,i,n){return e&&"object"===Q(e)?(this.y=e.y,this.width=e.width,this.height=e.height,this.x=e.x):(this.x=e||0,this.y=t||0,this.width=i||0,this.height=n||0),this}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}},{key:"lerp",value:function(e,t){var i=this.x,n=this.y,r=this.width,o=this.height;return this.x=i+(e.x-i)*t,this.y=n+(e.y-n)*t,this.width=r+(e.width-r)*t,this.height=o+(e.height-o)*t,this}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(2),", ").concat(this.y.toFixed(2),", ").concat(this.width.toFixed(2),", ").concat(this.height.toFixed(2),")")}},{key:"intersects",value:function(e){var t=this.x+this.width,i=this.y+this.height,n=e.x+e.width,r=e.y+e.height;return!(t<e.x||n<this.x||i<e.y||r<this.y)}},{key:"contains",value:function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y}},{key:"containsRect",value:function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height}},{key:"transformMat4",value:function(e){var t=this.x,i=this.y,n=t+this.width,r=i+this.height,o=e.m00*t+e.m04*i+e.m12,a=e.m01*t+e.m05*i+e.m13,s=e.m00*n+e.m04*i+e.m12,l=e.m01*n+e.m05*i+e.m13,c=e.m00*t+e.m04*r+e.m12,u=e.m01*t+e.m05*r+e.m13,h=e.m00*n+e.m04*r+e.m12,p=e.m01*n+e.m05*r+e.m13,f=Math.min(o,s,c,h),_=Math.max(o,s,c,h),d=Math.min(a,l,u,p),m=Math.max(a,l,u,p);return this.x=f,this.y=d,this.width=_-f,this.height=m-d,this}}]),t}();function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new nn(e,t,i,n)}ni.fastDefine("cc.Rect",nn,{x:0,y:0,width:0,height:0}),cc.Rect=nn,cc.rect=rn;var on=function(e){function t(e,i,n,r){var o;return Z(this,t),(o=re(this,te(t).call(this)))._val=0,"string"==typeof e?o.fromHEX(e):void 0!==i?o.set(e,i,n,r):o.set(e),o}return ee(t,xt),J(t,[{key:"r",get:function(){return 255&this._val},set:function(e){e=~~pi(e,0,255),this._val=(4294967040&this._val|e)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(e){e=~~pi(e,0,255),this._val=(4294902015&this._val|e<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(e){e=~~pi(e,0,255),this._val=(4278255615&this._val|e<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(e){e=~~pi(e,0,255),this._val=(16777215&this._val|e<<24>>>0)>>>0}},{key:"x",get:function(){return this.r*(1/255)},set:function(e){this.r=255*e}},{key:"y",get:function(){return this.g*(1/255)},set:function(e){this.g=255*e}},{key:"z",get:function(){return this.b*(1/255)},set:function(e){this.b=255*e}},{key:"w",get:function(){return this.a*(1/255)},set:function(e){this.a=255*e}}],[{key:"clone",value:function(e){var i=new t;return e._val?i._val=e._val:i._val=(e.a<<24>>>0)+(e.b<<16)+(e.g<<8)+e.r,i}},{key:"copy",value:function(e,t){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a,e}},{key:"set",value:function(e,t,i,n,r){return e.r=t,e.g=i,e.b=n,e.a=r,e}},{key:"fromHEX",value:function(e,t){return t=0===t.indexOf("#")?t.substring(1):t,e.r=parseInt(t.substr(0,2),16)||0,e.g=parseInt(t.substr(2,2),16)||0,e.b=parseInt(t.substr(4,2),16)||0,e.a=parseInt(t.substr(6,2),16)||255,e._val=(e.a<<24>>>0)+(e.b<<16)+(e.g<<8)+e.r,e}},{key:"add",value:function(e,t,i){return e.r=t.r+i.r,e.g=t.g+i.g,e.b=t.b+i.b,e.a=t.a+i.a,e}},{key:"subtract",value:function(e,t,i){return e.r=t.r-i.r,e.g=t.g-i.g,e.b=t.b-i.b,e.a=t.a-i.a,e}},{key:"multiply",value:function(e,t,i){return e.r=t.r*i.r,e.g=t.g*i.g,e.b=t.b*i.b,e.a=t.a*i.a,e}},{key:"divide",value:function(e,t,i){return e.r=t.r/i.r,e.g=t.g/i.g,e.b=t.b/i.b,e.a=t.a/i.a,e}},{key:"scale",value:function(e,t,i){return e.r=t.r*i,e.g=t.g*i,e.b=t.b*i,e.a=t.a*i,e}},{key:"lerp",value:function(e,t,i,n){var r=t.r,o=t.g,a=t.b,s=t.a;return r+=(i.r-r)*n,o+=(i.g-o)*n,a+=(i.b-a)*n,s+=(i.a-s)*n,e._val=Math.floor((s<<24>>>0)+(a<<16)+(o<<8)+r),e}},{key:"toArray",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=i instanceof t||i.a>1?1/255:1;return e[n+0]=i.r*r,e[n+1]=i.g*r,e[n+2]=i.b*r,e[n+3]=i.a*r,e}},{key:"fromArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.r=255*e[i+0],t.g=255*e[i+1],t.b=255*e[i+2],t.a=255*e[i+3],t}},{key:"strictEquals",value:function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},{key:"equals",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;return Math.abs(e.r-t.r)<=i*Math.max(1,Math.abs(e.r),Math.abs(t.r))&&Math.abs(e.g-t.g)<=i*Math.max(1,Math.abs(e.g),Math.abs(t.g))&&Math.abs(e.b-t.b)<=i*Math.max(1,Math.abs(e.b),Math.abs(t.b))&&Math.abs(e.a-t.a)<=i*Math.max(1,Math.abs(e.a),Math.abs(t.a))}},{key:"hex",value:function(e){return(255*e.r<<24|255*e.g<<16|255*e.b<<8|255*e.a)>>>0}}]),J(t,[{key:"clone",value:function(){var e=new t;return e._val=this._val,e}},{key:"equals",value:function(e){return e&&this._val===e._val}},{key:"lerp",value:function(e,t){var i=this.r,n=this.g,r=this.b,o=this.a;return i+=(e.r-i)*t,n+=(e.g-n)*t,r+=(e.b-r)*t,o+=(e.a-o)*t,this._val=Math.floor((o<<24>>>0)+(r<<16)+(n<<8)+i),this}},{key:"toString",value:function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"}},{key:"toCSS",value:function(e){return"rgba"===e?"rgba("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+","+(this.a*(1/255)).toFixed(2)+")":"rgb"===e?"rgb("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+")":"#"+this.toHEX(e)}},{key:"fromHEX",value:function(e){e=0===e.indexOf("#")?e.substring(1):e;var t=parseInt(e.substr(0,2),16)||0,i=parseInt(e.substr(2,2),16)||0,n=parseInt(e.substr(4,2),16)||0,r=parseInt(e.substr(6,2),16)||255;return this._val=(r<<24>>>0)+(n<<16)+(i<<8)+t,this}},{key:"toHEX",value:function(e){var t=[(0|this.r).toString(16),(0|this.g).toString(16),(0|this.b).toString(16)],i=-1;if("#rrggbb"===e)for(i=0;i<t.length;++i)1===t[i].length&&(t[i]="0"+t[i]);else if("#rrggbbaa"===e)for(t.push((0|this.a).toString(16)),i=0;i<t.length;++i)1===t[i].length&&(t[i]="0"+t[i]);return t.join("")}},{key:"toRGBValue",value:function(){return 16777215&this._val}},{key:"fromHSV",value:function(e,t,i){var n=0,r=0,o=0;if(0===t)n=r=o=i;else if(0===i)n=r=o=0;else{1===e&&(e=0),e*=6,t=t,i=i;var a=Math.floor(e),s=e-a,l=i*(1-t),c=i*(1-t*s),u=i*(1-t*(1-s));switch(a){case 0:n=i,r=u,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=u;break;case 3:n=l,r=c,o=i;break;case 4:n=u,r=l,o=i;break;case 5:n=i,r=l,o=c}}return n*=255,r*=255,o*=255,this._val=(this.a<<24>>>0)+(o<<16)+(r<<8)+n,this}},{key:"toHSV",value:function(){var e=this.r*(1/255),t=this.g*(1/255),i=this.b*(1/255),n={h:0,s:0,v:0},r=Math.max(e,t,i),o=Math.min(e,t,i),a=0;return n.v=r,n.s=r?(r-o)/r:0,n.s?(a=r-o,n.h=e===r?(t-i)/a:t===r?2+(i-e)/a:4+(e-t)/a,n.h/=6,n.h<0&&(n.h+=1)):n.h=0,n}},{key:"set",value:function(e,t,i,n){return"object"===Q(e)?null!=e._val?this._val=e._val:(t=e.g||0,i=e.b||0,n="number"==typeof e.a?e.a:255,e=e.r||0,this._val=(n<<24>>>0)+(i<<16)+(t<<8)+e):(e=e||0,t=t||0,i=i||0,n="number"==typeof n?n:255,this._val=(n<<24>>>0)+(i<<16)+(t<<8)+e),this}},{key:"multiply",value:function(e){var t=(255&this._val)*e.r>>8,i=(65280&this._val)*e.g>>8,n=(16711680&this._val)*e.b>>8,r=((4278190080&this._val)>>>8)*e.a;return this._val=4278190080&r|16711680&n|65280&i|255&t,this}},{key:"_set_r_unsafe",value:function(e){return this._val=(4294967040&this._val|e)>>>0,this}},{key:"_set_g_unsafe",value:function(e){return this._val=(4294902015&this._val|e<<8)>>>0,this}},{key:"_set_b_unsafe",value:function(e){return this._val=(4278255615&this._val|e<<16)>>>0,this}},{key:"_set_a_unsafe",value:function(e){return this._val=(16777215&this._val|e<<24>>>0)>>>0,this}}]),t}();function an(e,t,i,n){return new on(e,t,i,n)}on.WHITE=Object.freeze(new on(255,255,255,255)),on.GRAY=Object.freeze(new on(127,127,127,255)),on.BLACK=Object.freeze(new on(0,0,0,255)),on.TRANSPARENT=Object.freeze(new on(0,0,0,0)),on.RED=Object.freeze(new on(255,0,0,255)),on.GREEN=Object.freeze(new on(0,255,0,255)),on.BLUE=Object.freeze(new on(0,0,255,255)),on.CYAN=Object.freeze(new on(0,255,255,255)),on.MAGENTA=Object.freeze(new on(255,0,255,255)),on.YELLOW=Object.freeze(new on(255,255,0,255)),ni.fastDefine("cc.Color",on,{r:0,g:0,b:0,a:255}),cc.Color=on,cc.color=an;var sn,ln,cn,un=10;var hn=0,pn=new Map;sn=function(e,t,i,n,r,o){var a=pn.get(o);a&&a.logTimes>a.count&&(r("'%s' is deprecated, please use '%s' instead.","".concat(e,".").concat(t),"".concat(i,".").concat(n)),a.count++)},exports.replaceProperty=function(e,t,i){null!=e&&i.forEach((function(i){var n=hn++;pn.set(n,{id:n,count:0,logTimes:void 0!==i.logTimes?i.logTimes:un});var r=null!=i.target?i.target:e,o=null!=i.newName?i.newName:i.name,a=null!=i.targetName?i.targetName:t,s=r==e;if(null!=i.customFunction)e[i.name]=function(){var e;return sn(t,i.name,a,o,u,n),(e=i.customFunction).call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=i.customSetter||null!=i.customGetter){var l=null!=i.customSetter,c=null!=i.customGetter;l&&c?Object.defineProperty(e,i.name,{get:function(){return sn(t,i.name,a,o,u,n),i.customGetter.call(this)},set:function(e){sn(t,i.name,a,o,u,n),i.customSetter.call(this,e)}}):l?Object.defineProperty(e,i.name,{set:function(e){sn(t,i.name,a,o,u,n),i.customSetter.call(this,e)}}):c&&Object.defineProperty(e,i.name,{get:function(){return sn(t,i.name,a,o,u,n),i.customGetter.call(this)}})}else Object.defineProperty(e,i.name,{get:function(){return sn(t,i.name,a,o,u,n),s?this[o]:r[o]},set:function(e){sn(t,i.name,a,o,u,n),s?this[o]=e:r[o]=e}})}))},cn=function(e,t,i,n,r){var o=pn.get(n),a=void 0===r?"":"("+r+")";o&&o.logTimes>o.count&&(i("'%s' has been removed. "+a,"".concat(e,".").concat(t)),o.count++)},exports.removeProperty=function(e,t,i){null!=e&&i.forEach((function(i){var n=hn++;pn.set(n,{id:n,count:0,logTimes:void 0!==i.logTimes?i.logTimes:un}),Object.defineProperty(e,i.name,{get:function(){return cn(t,i.name,h,n,i.suggest)},set:function(){cn(t,i.name,h,n,i.suggest)}})}))},ln=function(e,t,i,n,r){var o=pn.get(n),a=void 0===r?"":"("+r+")";o&&o.logTimes>o.count&&(i("'%s' is deprecated. "+a,"".concat(e,".").concat(t)),o.count++)},exports.markAsWarning=function(e,t,i){if(null!=e){var n=function(e,t,i,n,r,o){if(e.get){var a=e.get();e.get=function(){return ln(t,i,n,r,o),a.call(this)}}if(e.set){var s=Object.create(e.set);e.set=function(e){ln(t,i,n,r,o),s.call(this,e)}}};i.forEach((function(i){var r=i.name,o=Object.getOwnPropertyDescriptor(e,r);if(o){var a=hn++;if(pn.set(a,{id:a,count:0,logTimes:void 0!==i.logTimes?i.logTimes:un}),null!=o.value)if("function"==typeof o.value){var s=o.value;e[r]=function(){return ln(t,r,u,a,i.suggest),s.call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}}else n(o,t,r,u,a,i.suggest);else n(o,t,r,u,a,i.suggest)}}))}},exports.replaceProperty(Oi,"Vec2",[{name:"sub",newName:"subtract",target:Oi,targetName:"Vec2"},{name:"mul",newName:"multiply",target:Oi,targetName:"Vec2"},{name:"div",newName:"divide",target:Oi,targetName:"Vec2"},{name:"dist",newName:"distance",target:Oi,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:Oi,targetName:"Vec2"},{name:"mag",newName:"len",target:Oi,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:Oi,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:Oi,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:Oi,targetName:"Vec2"}]),exports.replaceProperty(Oi.prototype,"Vec2",[{name:"mag",newName:"length",target:Oi.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:Oi.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:Oi.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:Oi.prototype,targetName:"Vec2"}]),exports.removeProperty(Oi.prototype,"vmath",[{name:"divide"}]),exports.replaceProperty(Mi,"Vec3",[{name:"sub",newName:"subtract",target:Mi,targetName:"Vec3"},{name:"mul",newName:"multiply",target:Mi,targetName:"Vec3"},{name:"div",newName:"divide",target:Mi,targetName:"Vec3"},{name:"dist",newName:"distance",target:Mi,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:Mi,targetName:"Vec3"},{name:"mag",newName:"len",target:Mi,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:Mi,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Mi,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Mi,targetName:"Vec3"}]),exports.replaceProperty(Mi.prototype,"Vec3",[{name:"mag",newName:"length",target:Mi.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:Mi.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Mi.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Mi.prototype,targetName:"Vec3"}]),exports.removeProperty(Mi.prototype,"vmath",[{name:"divide"}]),exports.replaceProperty(Ni,"Vec4",[{name:"sub",newName:"subtract",target:Ni,targetName:"Vec4"},{name:"mul",newName:"multiply",target:Ni,targetName:"Vec4"},{name:"div",newName:"divide",target:Ni,targetName:"Vec4"},{name:"dist",newName:"distance",target:Ni,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:Ni,targetName:"Vec4"},{name:"mag",newName:"len",target:Ni,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:Ni,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Ni,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Ni,targetName:"Vec4"}]),exports.replaceProperty(Ni.prototype,"Vec4",[{name:"mag",newName:"length",target:Ni.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:Ni.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Ni.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Ni.prototype,targetName:"Vec4"}]),exports.removeProperty(Ni.prototype,"vmath",[{name:"divide"}]),exports.replaceProperty(Xi,"Quat",[{name:"mag",newName:"len",target:Xi,targetName:"Quat"},{name:"mul",newName:"multiply",target:Xi,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:Xi,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:Xi,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Xi,targetName:"Quat"}]),exports.replaceProperty(Xi.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:Xi.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Xi.prototype,targetName:"Quat"}]),exports.replaceProperty(on,"Color",[{name:"sub",newName:"subtract",target:on,targetName:"Color"},{name:"mul",newName:"multiply",target:on,targetName:"Color"},{name:"div",newName:"divide",target:on,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:on,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[1].toString(16);return cc.Color.fromHEX(t[0],n)}}]),exports.replaceProperty(zi,"Mat3",[{name:"sub",newName:"subtract",target:zi,targetName:"Mat3"},{name:"mul",newName:"multiply",target:zi,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:zi,targetName:"Mat3"}]),exports.replaceProperty(zi.prototype,"Mat3",[{name:"sub",newName:"subtract",target:zi.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:zi.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:zi.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:zi.prototype,targetName:"Mat3"}]),exports.replaceProperty(Qi,"Mat4",[{name:"sub",newName:"subtract",target:Qi,targetName:"Mat4"},{name:"mul",newName:"multiply",target:Qi,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:Qi,targetName:"Mat4"}]),exports.replaceProperty(Qi.prototype,"Mat4",[{name:"sub",newName:"subtract",target:Qi.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:Qi.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:Qi.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:Qi.prototype,targetName:"Mat4"}]);var fn=Object.freeze({__proto__:null,bits:q,Vec2:Oi,v2:Ii,Vec3:Mi,v3:Bi,Vec4:Ni,v4:Li,Quat:Xi,quat:qi,Mat3:zi,Mat4:Qi,mat4:Ji,AffineTransform:$i,Size:en,size:tn,Rect:nn,rect:rn,Color:on,color:an,EPSILON:ci,equals:ui,approx:hi,clamp:pi,clamp01:fi,lerp:_i,toRadian:di,toDegree:mi,random:vi,randomRange:yi,randomRangeInt:gi,pseudoRandom:Ai,pseudoRandomRange:bi,pseudoRandomRangeInt:xi,nextPow2:Ti,repeat:Si,pingPong:Ei,inverseLerp:Ci,absMaxComponent:wi,absMax:ki}),_n=new Mi,dn=new Mi,mn=new Mi,vn=new Mi,yn=new Mi,gn=new Mi,An=new Array(3),bn=new Array(3);function xn(e,t){return Mi.dot(t.n,e)-t.d}function Tn(e,t,i){return Mi.copy(e,t),Mi.subtract(yn,i.center,i.halfExtents),Mi.add(gn,i.center,i.halfExtents),e.x=e.x<yn.x?yn.x:e.x,e.y=e.y<yn.x?yn.y:e.y,e.z=e.z<yn.x?yn.z:e.z,e.x=e.x>gn.x?gn.x:e.x,e.y=e.y>gn.x?gn.y:e.y,e.z=e.z>gn.x?gn.z:e.z,e}function Sn(e,t,i){Mi.set(_n,i.orientation.m00,i.orientation.m01,i.orientation.m02),Mi.set(dn,i.orientation.m03,i.orientation.m04,i.orientation.m05),Mi.set(mn,i.orientation.m06,i.orientation.m07,i.orientation.m08),An[0]=_n,An[1]=dn,An[2]=mn,bn[0]=i.halfExtents.x,bn[1]=i.halfExtents.y,bn[2]=i.halfExtents.z,Mi.subtract(vn,t,i.center),Mi.set(e,i.center.x,i.center.y,i.center.z);for(var n=0;n<3;n++){var r=Mi.dot(vn,An[n]);r>bn[n]&&(r=bn[n]),r<-bn[n]&&(r=-bn[n]),e.x+=r*An[n].x,e.y+=r*An[n].y,e.z+=r*An[n].z}return e}var En=Object.freeze({__proto__:null,point_plane:xn,pt_point_plane:function(e,t,i){var n=xn(t,i);return Mi.subtract(e,t,Mi.multiplyScalar(e,i.n,n))},pt_point_aabb:Tn,pt_point_obb:Sn,pt_point_line:function(e,t,i,n){Mi.subtract(_n,i,n);var r=_n,o=Mi.lengthSqr(r);if(0==o)Mi.copy(e,i);else{Mi.subtract(_n,t,i);var a=Mi.dot(_n,r)/o;a<0?Mi.copy(e,i):a>1?Mi.copy(e,n):Mi.scaleAndAdd(e,i,r,a)}}}),Cn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;Z(this,e),this.o=void 0,this.d=void 0,this._type=void 0,this._type=V.SHAPE_RAY,this.o=new Mi(t,i,n),this.d=new Mi(r,o,a)}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return new e(t,i,n,r,o,a)}},{key:"clone",value:function(t){return new e(t.o.x,t.o.y,t.o.z,t.d.x,t.d.y,t.d.z)}},{key:"copy",value:function(e,t){return Mi.copy(e.o,t.o),Mi.copy(e.d,t.d),e}},{key:"fromPoints",value:function(e,t,i){return Mi.copy(e.o,t),Mi.normalize(e.d,Mi.subtract(e.d,i,t)),e}},{key:"set",value:function(e,t,i,n,r,o,a){return e.o.x=t,e.o.y=i,e.o.z=n,e.d.x=r,e.d.y=o,e.d.z=a,e}}]),J(e,[{key:"computeHit",value:function(e,t){Mi.normalize(e,this.d),Mi.scaleAndAdd(e,this.o,e,t)}}]),e}(),wn=new Mi;function kn(e){return Math.max(Math.max(e.x,e.y),e.z)}var On,Rn,Fn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Z(this,e),this.center=void 0,this.radius=void 0,this._type=void 0,this._type=V.SHAPE_SPHERE,this.center=new Mi(t,i,n),this.radius=r}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(t,i,n,r){return new e(t,i,n,r)}},{key:"clone",value:function(t){return new e(t.center.x,t.center.y,t.center.z,t.radius)}},{key:"copy",value:function(e,t){return Mi.copy(e.center,t.center),e.radius=t.radius,e}},{key:"fromPoints",value:function(e,t,i){return Mi.multiplyScalar(e.center,Mi.add(wn,t,i),.5),e.radius=.5*Mi.subtract(wn,i,t).length(),e}},{key:"set",value:function(e,t,i,n,r){return e.center.x=t,e.center.y=i,e.center.z=n,e.radius=r,e}}]),J(e,[{key:"clone",value:function(){return e.clone(this)}},{key:"copy",value:function(t){return e.copy(this,t)}},{key:"getBoundary",value:function(e,t){Mi.set(e,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),Mi.set(t,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)}},{key:"transform",value:function(e,t,i,n,r){Mi.transformMat4(r.center,this.center,e),r.radius=this.radius*kn(n)}},{key:"translateAndRotate",value:function(e,t,i){Mi.transformMat4(i.center,this.center,e)}},{key:"setScale",value:function(e,t){t.radius=this.radius*kn(e)}}]),e}(),In=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;Z(this,e),this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this._type=V.SHAPE_TRIANGLE,this.a=new Mi(t,i,n),this.b=new Mi(r,o,a),this.c=new Mi(s,l,c)}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return new e(t,i,n,r,o,a,s,l,c)}},{key:"clone",value:function(t){return new e(t.a.x,t.a.y,t.a.z,t.b.x,t.b.y,t.b.z,t.c.x,t.c.y,t.c.z)}},{key:"copy",value:function(e,t){return Mi.copy(e.a,t.a),Mi.copy(e.b,t.b),Mi.copy(e.c,t.c),e}},{key:"fromPoints",value:function(e,t,i,n){return Mi.copy(e.a,t),Mi.copy(e.b,i),Mi.copy(e.c,n),e}},{key:"set",value:function(e,t,i,n,r,o,a,s,l,c){return e.a.x=t,e.a.y=i,e.a.z=n,e.b.x=r,e.b.y=o,e.b.z=a,e.c.x=s,e.c.y=l,e.c.z=c,e}}]),e}();(On=exports.GFXObjectType||(exports.GFXObjectType={}))[On.UNKNOWN=0]="UNKNOWN",On[On.BUFFER=1]="BUFFER",On[On.TEXTURE=2]="TEXTURE",On[On.TEXTURE_VIEW=3]="TEXTURE_VIEW",On[On.RENDER_PASS=4]="RENDER_PASS",On[On.FRAMEBUFFER=5]="FRAMEBUFFER",On[On.SAMPLER=6]="SAMPLER",On[On.SHADER=7]="SHADER",On[On.PIPELINE_LAYOUT=8]="PIPELINE_LAYOUT",On[On.PIPELINE_STATE=9]="PIPELINE_STATE",On[On.BINDING_LAYOUT=10]="BINDING_LAYOUT",On[On.INPUT_ASSEMBLER=11]="INPUT_ASSEMBLER",On[On.COMMAND_ALLOCATOR=12]="COMMAND_ALLOCATOR",On[On.COMMAND_BUFFER=13]="COMMAND_BUFFER",On[On.QUEUE=14]="QUEUE",On[On.WINDOW=15]="WINDOW",(Rn=exports.GFXStatus||(exports.GFXStatus={}))[Rn.UNREADY=0]="UNREADY",Rn[Rn.FAILED=1]="FAILED",Rn[Rn.SUCCESS=2]="SUCCESS";var Mn,Pn,Dn,Bn,Nn,Ln,zn,Gn,Un,Xn,Vn,Hn,jn,Wn,Yn,qn,Qn,Zn,Kn,Jn,$n,er,tr,ir,nr,rr,or,ar,sr,lr,cr,ur,hr,pr,fr=function(){function e(t){Z(this,e),this._gfxType=exports.GFXObjectType.UNKNOWN,this._status=exports.GFXStatus.UNREADY,this._gfxType=t}return J(e,[{key:"gfxType",get:function(){return this._gfxType}},{key:"status",get:function(){return this._status}}]),e}();(Mn=exports.GFXAttributeName||(exports.GFXAttributeName={})).ATTR_POSITION="a_position",Mn.ATTR_NORMAL="a_normal",Mn.ATTR_TANGENT="a_tangent",Mn.ATTR_BITANGENT="a_bitangent",Mn.ATTR_WEIGHTS="a_weights",Mn.ATTR_JOINTS="a_joints",Mn.ATTR_COLOR="a_color",Mn.ATTR_COLOR1="a_color1",Mn.ATTR_COLOR2="a_color2",Mn.ATTR_TEX_COORD="a_texCoord",Mn.ATTR_TEX_COORD1="a_texCoord1",Mn.ATTR_TEX_COORD2="a_texCoord2",Mn.ATTR_TEX_COORD3="a_texCoord3",Mn.ATTR_TEX_COORD4="a_texCoord4",Mn.ATTR_TEX_COORD5="a_texCoord5",Mn.ATTR_TEX_COORD6="a_texCoord6",Mn.ATTR_TEX_COORD7="a_texCoord7",Mn.ATTR_TEX_COORD8="a_texCoord8",Mn.ATTR_BATCH_ID="a_batch_id",Mn.ATTR_BATCH_UV="a_batch_uv",(Pn=exports.GFXType||(exports.GFXType={}))[Pn.UNKNOWN=0]="UNKNOWN",Pn[Pn.BOOL=1]="BOOL",Pn[Pn.BOOL2=2]="BOOL2",Pn[Pn.BOOL3=3]="BOOL3",Pn[Pn.BOOL4=4]="BOOL4",Pn[Pn.INT=5]="INT",Pn[Pn.INT2=6]="INT2",Pn[Pn.INT3=7]="INT3",Pn[Pn.INT4=8]="INT4",Pn[Pn.UINT=9]="UINT",Pn[Pn.UINT2=10]="UINT2",Pn[Pn.UINT3=11]="UINT3",Pn[Pn.UINT4=12]="UINT4",Pn[Pn.FLOAT=13]="FLOAT",Pn[Pn.FLOAT2=14]="FLOAT2",Pn[Pn.FLOAT3=15]="FLOAT3",Pn[Pn.FLOAT4=16]="FLOAT4",Pn[Pn.MAT2=17]="MAT2",Pn[Pn.MAT2X3=18]="MAT2X3",Pn[Pn.MAT2X4=19]="MAT2X4",Pn[Pn.MAT3X2=20]="MAT3X2",Pn[Pn.MAT3=21]="MAT3",Pn[Pn.MAT3X4=22]="MAT3X4",Pn[Pn.MAT4X2=23]="MAT4X2",Pn[Pn.MAT4X3=24]="MAT4X3",Pn[Pn.MAT4=25]="MAT4",Pn[Pn.SAMPLER1D=26]="SAMPLER1D",Pn[Pn.SAMPLER1D_ARRAY=27]="SAMPLER1D_ARRAY",Pn[Pn.SAMPLER2D=28]="SAMPLER2D",Pn[Pn.SAMPLER2D_ARRAY=29]="SAMPLER2D_ARRAY",Pn[Pn.SAMPLER3D=30]="SAMPLER3D",Pn[Pn.SAMPLER_CUBE=31]="SAMPLER_CUBE",Pn[Pn.COUNT=32]="COUNT",(Dn=exports.GFXFormat||(exports.GFXFormat={}))[Dn.UNKNOWN=0]="UNKNOWN",Dn[Dn.A8=1]="A8",Dn[Dn.L8=2]="L8",Dn[Dn.LA8=3]="LA8",Dn[Dn.R8=4]="R8",Dn[Dn.R8SN=5]="R8SN",Dn[Dn.R8UI=6]="R8UI",Dn[Dn.R8I=7]="R8I",Dn[Dn.R16F=8]="R16F",Dn[Dn.R16UI=9]="R16UI",Dn[Dn.R16I=10]="R16I",Dn[Dn.R32F=11]="R32F",Dn[Dn.R32UI=12]="R32UI",Dn[Dn.R32I=13]="R32I",Dn[Dn.RG8=14]="RG8",Dn[Dn.RG8SN=15]="RG8SN",Dn[Dn.RG8UI=16]="RG8UI",Dn[Dn.RG8I=17]="RG8I",Dn[Dn.RG16F=18]="RG16F",Dn[Dn.RG16UI=19]="RG16UI",Dn[Dn.RG16I=20]="RG16I",Dn[Dn.RG32F=21]="RG32F",Dn[Dn.RG32UI=22]="RG32UI",Dn[Dn.RG32I=23]="RG32I",Dn[Dn.RGB8=24]="RGB8",Dn[Dn.SRGB8=25]="SRGB8",Dn[Dn.RGB8SN=26]="RGB8SN",Dn[Dn.RGB8UI=27]="RGB8UI",Dn[Dn.RGB8I=28]="RGB8I",Dn[Dn.RGB16F=29]="RGB16F",Dn[Dn.RGB16UI=30]="RGB16UI",Dn[Dn.RGB16I=31]="RGB16I",Dn[Dn.RGB32F=32]="RGB32F",Dn[Dn.RGB32UI=33]="RGB32UI",Dn[Dn.RGB32I=34]="RGB32I",Dn[Dn.RGBA8=35]="RGBA8",Dn[Dn.SRGB8_A8=36]="SRGB8_A8",Dn[Dn.RGBA8SN=37]="RGBA8SN",Dn[Dn.RGBA8UI=38]="RGBA8UI",Dn[Dn.RGBA8I=39]="RGBA8I",Dn[Dn.RGBA16F=40]="RGBA16F",Dn[Dn.RGBA16UI=41]="RGBA16UI",Dn[Dn.RGBA16I=42]="RGBA16I",Dn[Dn.RGBA32F=43]="RGBA32F",Dn[Dn.RGBA32UI=44]="RGBA32UI",Dn[Dn.RGBA32I=45]="RGBA32I",Dn[Dn.R5G6B5=46]="R5G6B5",Dn[Dn.R11G11B10F=47]="R11G11B10F",Dn[Dn.RGB5A1=48]="RGB5A1",Dn[Dn.RGBA4=49]="RGBA4",Dn[Dn.RGB10A2=50]="RGB10A2",Dn[Dn.RGB10A2UI=51]="RGB10A2UI",Dn[Dn.RGB9E5=52]="RGB9E5",Dn[Dn.D16=53]="D16",Dn[Dn.D16S8=54]="D16S8",Dn[Dn.D24=55]="D24",Dn[Dn.D24S8=56]="D24S8",Dn[Dn.D32F=57]="D32F",Dn[Dn.D32F_S8=58]="D32F_S8",Dn[Dn.BC1=59]="BC1",Dn[Dn.BC1_ALPHA=60]="BC1_ALPHA",Dn[Dn.BC1_SRGB=61]="BC1_SRGB",Dn[Dn.BC1_SRGB_ALPHA=62]="BC1_SRGB_ALPHA",Dn[Dn.BC2=63]="BC2",Dn[Dn.BC2_SRGB=64]="BC2_SRGB",Dn[Dn.BC3=65]="BC3",Dn[Dn.BC3_SRGB=66]="BC3_SRGB",Dn[Dn.BC4=67]="BC4",Dn[Dn.BC4_SNORM=68]="BC4_SNORM",Dn[Dn.BC5=69]="BC5",Dn[Dn.BC5_SNORM=70]="BC5_SNORM",Dn[Dn.BC6H_UF16=71]="BC6H_UF16",Dn[Dn.BC6H_SF16=72]="BC6H_SF16",Dn[Dn.BC7=73]="BC7",Dn[Dn.BC7_SRGB=74]="BC7_SRGB",Dn[Dn.ETC_RGB8=75]="ETC_RGB8",Dn[Dn.ETC2_RGB8=76]="ETC2_RGB8",Dn[Dn.ETC2_SRGB8=77]="ETC2_SRGB8",Dn[Dn.ETC2_RGB8_A1=78]="ETC2_RGB8_A1",Dn[Dn.ETC2_SRGB8_A1=79]="ETC2_SRGB8_A1",Dn[Dn.ETC2_RGBA8=80]="ETC2_RGBA8",Dn[Dn.ETC2_SRGB8_A8=81]="ETC2_SRGB8_A8",Dn[Dn.EAC_R11=82]="EAC_R11",Dn[Dn.EAC_R11SN=83]="EAC_R11SN",Dn[Dn.EAC_RG11=84]="EAC_RG11",Dn[Dn.EAC_RG11SN=85]="EAC_RG11SN",Dn[Dn.PVRTC_RGB2=86]="PVRTC_RGB2",Dn[Dn.PVRTC_RGBA2=87]="PVRTC_RGBA2",Dn[Dn.PVRTC_RGB4=88]="PVRTC_RGB4",Dn[Dn.PVRTC_RGBA4=89]="PVRTC_RGBA4",Dn[Dn.PVRTC2_2BPP=90]="PVRTC2_2BPP",Dn[Dn.PVRTC2_4BPP=91]="PVRTC2_4BPP",(Bn=exports.GFXBufferUsageBit||(exports.GFXBufferUsageBit={}))[Bn.NONE=0]="NONE",Bn[Bn.TRANSFER_SRC=1]="TRANSFER_SRC",Bn[Bn.TRANSFER_DST=2]="TRANSFER_DST",Bn[Bn.INDEX=4]="INDEX",Bn[Bn.VERTEX=8]="VERTEX",Bn[Bn.UNIFORM=16]="UNIFORM",Bn[Bn.STORAGE=32]="STORAGE",Bn[Bn.INDIRECT=64]="INDIRECT",(Nn=exports.GFXMemoryUsageBit||(exports.GFXMemoryUsageBit={}))[Nn.NONE=0]="NONE",Nn[Nn.DEVICE=1]="DEVICE",Nn[Nn.HOST=2]="HOST",(Ln=exports.GFXBufferFlagBit||(exports.GFXBufferFlagBit={}))[Ln.NONE=0]="NONE",Ln[Ln.BAKUP_BUFFER=4]="BAKUP_BUFFER",(zn=exports.GFXBufferAccessBit||(exports.GFXBufferAccessBit={}))[zn.NONE=0]="NONE",zn[zn.READ=1]="READ",zn[zn.WRITE=2]="WRITE",(Gn=exports.GFXPrimitiveMode||(exports.GFXPrimitiveMode={}))[Gn.POINT_LIST=0]="POINT_LIST",Gn[Gn.LINE_LIST=1]="LINE_LIST",Gn[Gn.LINE_STRIP=2]="LINE_STRIP",Gn[Gn.LINE_LOOP=3]="LINE_LOOP",Gn[Gn.LINE_LIST_ADJACENCY=4]="LINE_LIST_ADJACENCY",Gn[Gn.LINE_STRIP_ADJACENCY=5]="LINE_STRIP_ADJACENCY",Gn[Gn.ISO_LINE_LIST=6]="ISO_LINE_LIST",Gn[Gn.TRIANGLE_LIST=7]="TRIANGLE_LIST",Gn[Gn.TRIANGLE_STRIP=8]="TRIANGLE_STRIP",Gn[Gn.TRIANGLE_FAN=9]="TRIANGLE_FAN",Gn[Gn.TRIANGLE_LIST_ADJACENCY=10]="TRIANGLE_LIST_ADJACENCY",Gn[Gn.TRIANGLE_STRIP_ADJACENCY=11]="TRIANGLE_STRIP_ADJACENCY",Gn[Gn.TRIANGLE_PATCH_ADJACENCY=12]="TRIANGLE_PATCH_ADJACENCY",Gn[Gn.QUAD_PATCH_LIST=13]="QUAD_PATCH_LIST",(Un=exports.GFXPolygonMode||(exports.GFXPolygonMode={}))[Un.FILL=0]="FILL",Un[Un.POINT=1]="POINT",Un[Un.LINE=2]="LINE",(Xn=exports.GFXShadeModel||(exports.GFXShadeModel={}))[Xn.GOURAND=0]="GOURAND",Xn[Xn.FLAT=1]="FLAT",(Vn=exports.GFXCullMode||(exports.GFXCullMode={}))[Vn.NONE=0]="NONE",Vn[Vn.FRONT=1]="FRONT",Vn[Vn.BACK=2]="BACK",(Hn=exports.GFXComparisonFunc||(exports.GFXComparisonFunc={}))[Hn.NEVER=0]="NEVER",Hn[Hn.LESS=1]="LESS",Hn[Hn.EQUAL=2]="EQUAL",Hn[Hn.LESS_EQUAL=3]="LESS_EQUAL",Hn[Hn.GREATER=4]="GREATER",Hn[Hn.NOT_EQUAL=5]="NOT_EQUAL",Hn[Hn.GREATER_EQUAL=6]="GREATER_EQUAL",Hn[Hn.ALWAYS=7]="ALWAYS",(jn=exports.GFXStencilOp||(exports.GFXStencilOp={}))[jn.ZERO=0]="ZERO",jn[jn.KEEP=1]="KEEP",jn[jn.REPLACE=2]="REPLACE",jn[jn.INCR=3]="INCR",jn[jn.DECR=4]="DECR",jn[jn.INVERT=5]="INVERT",jn[jn.INCR_WRAP=6]="INCR_WRAP",jn[jn.DECR_WRAP=7]="DECR_WRAP",(Wn=exports.GFXBlendOp||(exports.GFXBlendOp={}))[Wn.ADD=0]="ADD",Wn[Wn.SUB=1]="SUB",Wn[Wn.REV_SUB=2]="REV_SUB",Wn[Wn.MIN=3]="MIN",Wn[Wn.MAX=4]="MAX",(Yn=exports.GFXBlendFactor||(exports.GFXBlendFactor={}))[Yn.ZERO=0]="ZERO",Yn[Yn.ONE=1]="ONE",Yn[Yn.SRC_ALPHA=2]="SRC_ALPHA",Yn[Yn.DST_ALPHA=3]="DST_ALPHA",Yn[Yn.ONE_MINUS_SRC_ALPHA=4]="ONE_MINUS_SRC_ALPHA",Yn[Yn.ONE_MINUS_DST_ALPHA=5]="ONE_MINUS_DST_ALPHA",Yn[Yn.SRC_COLOR=6]="SRC_COLOR",Yn[Yn.DST_COLOR=7]="DST_COLOR",Yn[Yn.ONE_MINUS_SRC_COLOR=8]="ONE_MINUS_SRC_COLOR",Yn[Yn.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",Yn[Yn.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",Yn[Yn.CONSTANT_COLOR=11]="CONSTANT_COLOR",Yn[Yn.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",Yn[Yn.CONSTANT_ALPHA=13]="CONSTANT_ALPHA",Yn[Yn.ONE_MINUS_CONSTANT_ALPHA=14]="ONE_MINUS_CONSTANT_ALPHA",(qn=exports.GFXColorMask||(exports.GFXColorMask={}))[qn.NONE=0]="NONE",qn[qn.R=1]="R",qn[qn.G=2]="G",qn[qn.B=4]="B",qn[qn.A=8]="A",qn[qn.ALL=15]="ALL",(Qn=exports.GFXFilter||(exports.GFXFilter={}))[Qn.NONE=0]="NONE",Qn[Qn.POINT=1]="POINT",Qn[Qn.LINEAR=2]="LINEAR",Qn[Qn.ANISOTROPIC=3]="ANISOTROPIC",(Zn=exports.GFXAddress||(exports.GFXAddress={}))[Zn.WRAP=0]="WRAP",Zn[Zn.MIRROR=1]="MIRROR",Zn[Zn.CLAMP=2]="CLAMP",Zn[Zn.BORDER=3]="BORDER",(Kn=exports.GFXTextureType||(exports.GFXTextureType={}))[Kn.TEX1D=0]="TEX1D",Kn[Kn.TEX2D=1]="TEX2D",Kn[Kn.TEX3D=2]="TEX3D",(Jn=exports.GFXTextureUsageBit||(exports.GFXTextureUsageBit={}))[Jn.NONE=0]="NONE",Jn[Jn.TRANSFER_SRC=1]="TRANSFER_SRC",Jn[Jn.TRANSFER_DST=2]="TRANSFER_DST",Jn[Jn.SAMPLED=4]="SAMPLED",Jn[Jn.STORAGE=8]="STORAGE",Jn[Jn.COLOR_ATTACHMENT=16]="COLOR_ATTACHMENT",Jn[Jn.DEPTH_STENCIL_ATTACHMENT=32]="DEPTH_STENCIL_ATTACHMENT",Jn[Jn.TRANSIENT_ATTACHMENT=64]="TRANSIENT_ATTACHMENT",Jn[Jn.INPUT_ATTACHMENT=128]="INPUT_ATTACHMENT",($n=exports.GFXSampleCount||(exports.GFXSampleCount={}))[$n.X1=0]="X1",$n[$n.X2=1]="X2",$n[$n.X4=2]="X4",$n[$n.X8=3]="X8",$n[$n.X16=4]="X16",$n[$n.X32=5]="X32",$n[$n.X64=6]="X64",(er=exports.GFXTextureFlagBit||(exports.GFXTextureFlagBit={}))[er.NONE=0]="NONE",er[er.GEN_MIPMAP=1]="GEN_MIPMAP",er[er.CUBEMAP=2]="CUBEMAP",er[er.BAKUP_BUFFER=4]="BAKUP_BUFFER",(tr=exports.GFXTextureViewType||(exports.GFXTextureViewType={}))[tr.TV1D=0]="TV1D",tr[tr.TV2D=1]="TV2D",tr[tr.TV3D=2]="TV3D",tr[tr.CUBE=3]="CUBE",tr[tr.TV1D_ARRAY=4]="TV1D_ARRAY",tr[tr.TV2D_ARRAY=5]="TV2D_ARRAY",(ir=exports.GFXShaderType||(exports.GFXShaderType={}))[ir.VERTEX=0]="VERTEX",ir[ir.HULL=1]="HULL",ir[ir.DOMAIN=2]="DOMAIN",ir[ir.GEOMETRY=3]="GEOMETRY",ir[ir.FRAGMENT=4]="FRAGMENT",ir[ir.COMPUTE=5]="COMPUTE",ir[ir.COUNT=6]="COUNT",(nr=exports.GFXBindingType||(exports.GFXBindingType={}))[nr.UNKNOWN=0]="UNKNOWN",nr[nr.UNIFORM_BUFFER=1]="UNIFORM_BUFFER",nr[nr.SAMPLER=2]="SAMPLER",nr[nr.STORAGE_BUFFER=3]="STORAGE_BUFFER",(rr=exports.GFXCommandBufferType||(exports.GFXCommandBufferType={}))[rr.PRIMARY=0]="PRIMARY",rr[rr.SECONDARY=1]="SECONDARY",(or=exports.GFXLoadOp||(exports.GFXLoadOp={}))[or.LOAD=0]="LOAD",or[or.CLEAR=1]="CLEAR",or[or.DISCARD=2]="DISCARD",(ar=exports.GFXStoreOp||(exports.GFXStoreOp={}))[ar.STORE=0]="STORE",ar[ar.DISCARD=1]="DISCARD",(sr=exports.GFXTextureLayout||(exports.GFXTextureLayout={}))[sr.UNDEFINED=0]="UNDEFINED",sr[sr.GENERAL=1]="GENERAL",sr[sr.COLOR_ATTACHMENT_OPTIMAL=2]="COLOR_ATTACHMENT_OPTIMAL",sr[sr.DEPTH_STENCIL_ATTACHMENT_OPTIMAL=3]="DEPTH_STENCIL_ATTACHMENT_OPTIMAL",sr[sr.DEPTH_STENCIL_READONLY_OPTIMAL=4]="DEPTH_STENCIL_READONLY_OPTIMAL",sr[sr.SHADER_READONLY_OPTIMAL=5]="SHADER_READONLY_OPTIMAL",sr[sr.TRANSFER_SRC_OPTIMAL=6]="TRANSFER_SRC_OPTIMAL",sr[sr.TRANSFER_DST_OPTIMAL=7]="TRANSFER_DST_OPTIMAL",sr[sr.PREINITIALIZED=8]="PREINITIALIZED",sr[sr.PRESENT_SRC=9]="PRESENT_SRC",(lr=exports.GFXPipelineBindPoint||(exports.GFXPipelineBindPoint={}))[lr.GRAPHICS=0]="GRAPHICS",lr[lr.COMPUTE=1]="COMPUTE",lr[lr.RAY_TRACING=2]="RAY_TRACING",(cr=exports.GFXDynamicState||(exports.GFXDynamicState={}))[cr.VIEWPORT=0]="VIEWPORT",cr[cr.SCISSOR=1]="SCISSOR",cr[cr.LINE_WIDTH=2]="LINE_WIDTH",cr[cr.DEPTH_BIAS=3]="DEPTH_BIAS",cr[cr.BLEND_CONSTANTS=4]="BLEND_CONSTANTS",cr[cr.DEPTH_BOUNDS=5]="DEPTH_BOUNDS",cr[cr.STENCIL_WRITE_MASK=6]="STENCIL_WRITE_MASK",cr[cr.STENCIL_COMPARE_MASK=7]="STENCIL_COMPARE_MASK",(ur=exports.GFXStencilFace||(exports.GFXStencilFace={}))[ur.FRONT=0]="FRONT",ur[ur.BACK=1]="BACK",ur[ur.ALL=2]="ALL",(hr=exports.GFXQueueType||(exports.GFXQueueType={}))[hr.GRAPHICS=0]="GRAPHICS",hr[hr.COMPUTE=1]="COMPUTE",hr[hr.TRANSFER=2]="TRANSFER",(pr=exports.GFXClearFlag||(exports.GFXClearFlag={}))[pr.NONE=0]="NONE",pr[pr.COLOR=1]="COLOR",pr[pr.DEPTH=2]="DEPTH",pr[pr.STENCIL=4]="STENCIL",pr[pr.DEPTH_STENCIL=6]="DEPTH_STENCIL",pr[pr.ALL=7]="ALL";var _r,dr=function e(){Z(this,e),this.baseMipLevel=0,this.levelCount=1,this.baseArrayLayer=0,this.layerCount=1},mr=function e(){Z(this,e),this.srcSubres=new dr,this.srcOffset={x:0,y:0,z:0},this.dstSubres=new dr,this.dstOffset={x:0,y:0,z:0},this.extent={width:0,height:0,depth:0}},vr=function e(){Z(this,e),this.buffOffset=0,this.buffStride=0,this.buffTexHeight=0,this.texOffset={x:0,y:0,z:0},this.texExtent={width:0,height:0,depth:0},this.texSubres=new dr};(_r=exports.GFXFormatType||(exports.GFXFormatType={}))[_r.NONE=0]="NONE",_r[_r.UNORM=1]="UNORM",_r[_r.SNORM=2]="SNORM",_r[_r.UINT=3]="UINT",_r[_r.INT=4]="INT",_r[_r.UFLOAT=5]="UFLOAT",_r[_r.FLOAT=6]="FLOAT";var yr=[{name:"UNKNOWN",size:0,count:0,type:exports.GFXFormatType.NONE,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"A8",size:1,count:1,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"L8",size:1,count:1,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"LA8",size:1,count:2,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R8",size:1,count:1,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R8SN",size:1,count:1,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R8UI",size:1,count:1,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R8I",size:1,count:1,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R16F",size:2,count:1,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R16UI",size:2,count:1,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R16I",size:2,count:1,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R32F",size:4,count:1,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R32UI",size:4,count:1,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R32I",size:4,count:1,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG8",size:2,count:2,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG8SN",size:2,count:2,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG8UI",size:2,count:2,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG8I",size:2,count:2,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG16F",size:4,count:2,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG16UI",size:4,count:2,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG16I",size:4,count:2,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG32F",size:8,count:2,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG32UI",size:8,count:2,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RG32I",size:8,count:2,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB8",size:3,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"SRGB8",size:3,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB8SN",size:3,count:3,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB8UI",size:3,count:3,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB8I",size:3,count:3,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB16F",size:6,count:3,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB16UI",size:6,count:3,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB16I",size:6,count:3,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB32F",size:12,count:3,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB32UI",size:12,count:3,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB32I",size:12,count:3,type:exports.GFXFormatType.INT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA8",size:4,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"SRGB8_A8",size:4,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA8SN",size:4,count:4,type:exports.GFXFormatType.SNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA8UI",size:4,count:4,type:exports.GFXFormatType.UINT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA8I",size:4,count:4,type:exports.GFXFormatType.INT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA16F",size:8,count:4,type:exports.GFXFormatType.FLOAT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA16UI",size:8,count:4,type:exports.GFXFormatType.UINT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA16I",size:8,count:4,type:exports.GFXFormatType.INT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA32F",size:16,count:4,type:exports.GFXFormatType.FLOAT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA32UI",size:16,count:4,type:exports.GFXFormatType.UINT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA32I",size:16,count:4,type:exports.GFXFormatType.INT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R5G6B5",size:2,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"R11G11B10F",size:4,count:3,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB5A1",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGBA4",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB10A2",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB10A2UI",size:2,count:4,type:exports.GFXFormatType.UINT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"RGB9E5",size:2,count:4,type:exports.GFXFormatType.FLOAT,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!1},{name:"D16",size:2,count:1,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!0,hasStencil:!1,isCompressed:!1},{name:"D16S8",size:3,count:2,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!0,hasStencil:!0,isCompressed:!1},{name:"D24",size:3,count:1,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!0,hasStencil:!1,isCompressed:!1},{name:"D24S8",size:4,count:2,type:exports.GFXFormatType.UINT,hasAlpha:!1,hasDepth:!0,hasStencil:!0,isCompressed:!1},{name:"D32F",size:4,count:1,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!0,hasStencil:!1,isCompressed:!1},{name:"D32FS8",size:5,count:2,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!0,hasStencil:!0,isCompressed:!1},{name:"BC1",size:1,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC1_ALPHA",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC1_SRGB",size:1,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC1_SRGB_ALPHA",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC2",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC2_SRGB",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC3",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC3_SRGB",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC4",size:1,count:1,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC4_SNORM",size:1,count:1,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC5",size:1,count:2,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC5_SNORM",size:1,count:2,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC6H_UF16",size:1,count:3,type:exports.GFXFormatType.UFLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC6H_SF16",size:1,count:3,type:exports.GFXFormatType.FLOAT,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC7",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"BC7_SRGB",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC_RGB8",size:1,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_RGB8",size:1,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_SRGB8",size:1,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_RGB8_A1",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_SRGB8_A1",size:1,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_RGBA8",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"ETC2_SRGB8_A8",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"EAC_R11",size:1,count:1,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"EAC_R11SN",size:1,count:1,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"EAC_RG11",size:2,count:2,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"EAC_RG11SN",size:2,count:2,type:exports.GFXFormatType.SNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC_RGB2",size:2,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC_RGBA2",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC_RGB4",size:2,count:3,type:exports.GFXFormatType.UNORM,hasAlpha:!1,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC_RGBA4",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC2_2BPP",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0},{name:"PVRTC2_4BPP",size:2,count:4,type:exports.GFXFormatType.UNORM,hasAlpha:!0,hasDepth:!1,hasStencil:!1,isCompressed:!0}];function gr(e,t,i,n){if(!yr[e].isCompressed)return t*i*n*yr[e].size;switch(e){case exports.GFXFormat.BC1:case exports.GFXFormat.BC1_ALPHA:case exports.GFXFormat.BC1_SRGB:case exports.GFXFormat.BC1_SRGB_ALPHA:return Math.ceil(t/4)*Math.ceil(i/4)*8*n;case exports.GFXFormat.BC2:case exports.GFXFormat.BC2_SRGB:case exports.GFXFormat.BC3:case exports.GFXFormat.BC3_SRGB:case exports.GFXFormat.BC4:case exports.GFXFormat.BC4_SNORM:case exports.GFXFormat.BC6H_SF16:case exports.GFXFormat.BC6H_UF16:case exports.GFXFormat.BC7:case exports.GFXFormat.BC7_SRGB:return Math.ceil(t/4)*Math.ceil(i/4)*16*n;case exports.GFXFormat.BC5:case exports.GFXFormat.BC5_SNORM:return Math.ceil(t/4)*Math.ceil(i/4)*32*n;case exports.GFXFormat.ETC_RGB8:case exports.GFXFormat.ETC2_RGB8:case exports.GFXFormat.ETC2_SRGB8:case exports.GFXFormat.ETC2_RGB8_A1:case exports.GFXFormat.ETC2_SRGB8_A1:case exports.GFXFormat.EAC_R11:case exports.GFXFormat.EAC_R11SN:return Math.ceil(t/4)*Math.ceil(i/4)*8*n;case exports.GFXFormat.ETC2_RGBA8:case exports.GFXFormat.EAC_RG11:case exports.GFXFormat.EAC_RG11SN:return Math.ceil(t/4)*Math.ceil(i/4)*16*n;case exports.GFXFormat.PVRTC_RGB2:case exports.GFXFormat.PVRTC_RGBA2:case exports.GFXFormat.PVRTC2_2BPP:return Math.ceil(Math.max(t,16)*Math.max(i,8)/4)*n;case exports.GFXFormat.PVRTC_RGB4:case exports.GFXFormat.PVRTC_RGBA4:case exports.GFXFormat.PVRTC2_4BPP:return Math.ceil(Math.max(t,16)*Math.max(i,8)/2)*n;default:return 0}}function Ar(e,t,i,n,r){for(var o=0,a=0;a<r;++a)o+=gr(e,t,i,n),t=Math.max(t>>1,1),i=Math.max(i>>1,1);return o}var br=[0,4,8,12,16,4,8,12,16,4,8,12,16,4,8,12,16,16,24,32,24,36,48,32,48,64,4,4,4,4,4,4];function xr(e){return br[e]||0}function Tr(e){var t=e.size/e.count;switch(e.type){case exports.GFXFormatType.UNORM:case exports.GFXFormatType.UINT:switch(t){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array}break;case exports.GFXFormatType.SNORM:case exports.GFXFormatType.INT:switch(t){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array}break;case exports.GFXFormatType.FLOAT:return Float32Array}return Float32Array}var Sr,Er,Cr=Object.freeze({__proto__:null,GFX_MAX_VERTEX_ATTRIBUTES:16,GFX_MAX_TEXTURE_UNITS:16,GFX_MAX_ATTACHMENTS:4,GFX_MAX_BUFFER_BINDINGS:24,get GFXObjectType(){return exports.GFXObjectType},get GFXStatus(){return exports.GFXStatus},GFXObject:fr,get GFXAttributeName(){return exports.GFXAttributeName},get GFXType(){return exports.GFXType},get GFXFormat(){return exports.GFXFormat},get GFXBufferUsageBit(){return exports.GFXBufferUsageBit},get GFXMemoryUsageBit(){return exports.GFXMemoryUsageBit},get GFXBufferFlagBit(){return exports.GFXBufferFlagBit},get GFXBufferAccessBit(){return exports.GFXBufferAccessBit},get GFXPrimitiveMode(){return exports.GFXPrimitiveMode},get GFXPolygonMode(){return exports.GFXPolygonMode},get GFXShadeModel(){return exports.GFXShadeModel},get GFXCullMode(){return exports.GFXCullMode},get GFXComparisonFunc(){return exports.GFXComparisonFunc},get GFXStencilOp(){return exports.GFXStencilOp},get GFXBlendOp(){return exports.GFXBlendOp},get GFXBlendFactor(){return exports.GFXBlendFactor},get GFXColorMask(){return exports.GFXColorMask},get GFXFilter(){return exports.GFXFilter},get GFXAddress(){return exports.GFXAddress},get GFXTextureType(){return exports.GFXTextureType},get GFXTextureUsageBit(){return exports.GFXTextureUsageBit},get GFXSampleCount(){return exports.GFXSampleCount},get GFXTextureFlagBit(){return exports.GFXTextureFlagBit},get GFXTextureViewType(){return exports.GFXTextureViewType},get GFXShaderType(){return exports.GFXShaderType},get GFXBindingType(){return exports.GFXBindingType},get GFXCommandBufferType(){return exports.GFXCommandBufferType},get GFXLoadOp(){return exports.GFXLoadOp},get GFXStoreOp(){return exports.GFXStoreOp},get GFXTextureLayout(){return exports.GFXTextureLayout},get GFXPipelineBindPoint(){return exports.GFXPipelineBindPoint},get GFXDynamicState(){return exports.GFXDynamicState},get GFXStencilFace(){return exports.GFXStencilFace},get GFXQueueType(){return exports.GFXQueueType},get GFXClearFlag(){return exports.GFXClearFlag},GFXTextureSubres:dr,GFXTextureCopy:mr,GFXBufferTextureCopy:vr,get GFXFormatType(){return exports.GFXFormatType},GFXFormatInfos:yr,GFXFormatSize:gr,GFXFormatSurfaceSize:Ar,GFXGetTypeSize:xr,getTypedArrayConstructor:Tr}),wr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.BUFFER)))._device=void 0,i._usage=exports.GFXBufferUsageBit.NONE,i._memUsage=exports.GFXMemoryUsageBit.NONE,i._size=0,i._stride=1,i._count=0,i._flags=exports.GFXBufferFlagBit.NONE,i._bufferView=null,i._indirectBuffer=null,i._device=e,i}return ee(t,fr),J(t,[{key:"usage",get:function(){return this._usage}},{key:"memUsage",get:function(){return this._memUsage}},{key:"size",get:function(){return this._size}},{key:"stride",get:function(){return this._stride}},{key:"count",get:function(){return this._count}},{key:"flags",get:function(){return this._flags}},{key:"bufferView",get:function(){return this._bufferView}}]),t}(),kr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.COMMAND_BUFFER)))._device=void 0,i._allocator=null,i._type=exports.GFXCommandBufferType.PRIMARY,i._numDrawCalls=0,i._numInstances=0,i._numTris=0,i._device=e,i}return ee(t,fr),J(t,[{key:"type",get:function(){return this._type}},{key:"numDrawCalls",get:function(){return this._numDrawCalls}},{key:"numInstances",get:function(){return this._numInstances}},{key:"numTris",get:function(){return this._numTris}}]),t}();bt(exports.GFXFormat),(Sr=exports.GFXAPI||(exports.GFXAPI={}))[Sr.UNKNOWN=0]="UNKNOWN",Sr[Sr.WEBGL=1]="WEBGL",Sr[Sr.WEBGL2=2]="WEBGL2",(Er=exports.GFXFeature||(exports.GFXFeature={}))[Er.COLOR_FLOAT=0]="COLOR_FLOAT",Er[Er.COLOR_HALF_FLOAT=1]="COLOR_HALF_FLOAT",Er[Er.TEXTURE_FLOAT=2]="TEXTURE_FLOAT",Er[Er.TEXTURE_HALF_FLOAT=3]="TEXTURE_HALF_FLOAT",Er[Er.TEXTURE_FLOAT_LINEAR=4]="TEXTURE_FLOAT_LINEAR",Er[Er.TEXTURE_HALF_FLOAT_LINEAR=5]="TEXTURE_HALF_FLOAT_LINEAR",Er[Er.FORMAT_R11G11B10F=6]="FORMAT_R11G11B10F",Er[Er.FORMAT_D24S8=7]="FORMAT_D24S8",Er[Er.FORMAT_ETC1=8]="FORMAT_ETC1",Er[Er.FORMAT_ETC2=9]="FORMAT_ETC2",Er[Er.FORMAT_DXT=10]="FORMAT_DXT",Er[Er.FORMAT_PVRTC=11]="FORMAT_PVRTC",Er[Er.FORMAT_ASTC=12]="FORMAT_ASTC",Er[Er.MSAA=13]="MSAA",Er[Er.ELEMENT_INDEX_UINT=14]="ELEMENT_INDEX_UINT",Er[Er.INSTANCED_ARRAYS=15]="INSTANCED_ARRAYS",Er[Er.COUNT=16]="COUNT";var Or=function(){function e(){Z(this,e),this._canvas=null,this._canvas2D=null,this._gfxAPI=exports.GFXAPI.UNKNOWN,this._deviceName="",this._renderer="",this._vendor="",this._version="",this._features=new Array(exports.GFXFeature.COUNT),this._queue=null,this._devicePixelRatio=1,this._width=0,this._height=0,this._nativeWidth=0,this._nativeHeight=0,this._mainWindow=null,this._cmdAllocator=null,this._maxVertexAttributes=0,this._maxVertexUniformVectors=0,this._maxFragmentUniformVectors=0,this._maxTextureUnits=0,this._maxVertexTextureUnits=0,this._maxUniformBufferBindings=24,this._maxUniformBlockSize=0,this._maxTextureSize=0,this._maxCubeMapTextureSize=0,this._depthBits=0,this._stencilBits=0,this._colorFmt=exports.GFXFormat.UNKNOWN,this._depthStencilFmt=exports.GFXFormat.UNKNOWN,this._reverseCW=!1,this._shaderIdGen=0,this._macros=new Map,this._numDrawCalls=0,this._numInstances=0,this._numTris=0,this._memoryStatus={bufferSize:0,textureSize:0}}return J(e,[{key:"hasFeature",value:function(e){return this._features[e]}},{key:"genShaderId",value:function(){return this._shaderIdGen++}},{key:"defineMacro",value:function(e,t){var i=void 0!==t?t:"";this._macros.set(e,i)}},{key:"canvas",get:function(){return this._canvas}},{key:"canvas2D",get:function(){return this._canvas2D}},{key:"gfxAPI",get:function(){return this._gfxAPI}},{key:"queue",get:function(){return this._queue}},{key:"devicePixelRatio",get:function(){return this._devicePixelRatio}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"nativeWidth",get:function(){return this._nativeWidth}},{key:"nativeHeight",get:function(){return this._nativeHeight}},{key:"mainWindow",get:function(){return this._mainWindow}},{key:"commandAllocator",get:function(){return this._cmdAllocator}},{key:"renderer",get:function(){return this._renderer}},{key:"vendor",get:function(){return this._vendor}},{key:"maxVertexAttributes",get:function(){return this._maxVertexAttributes}},{key:"maxVertexUniformVectors",get:function(){return this._maxVertexUniformVectors}},{key:"maxFragmentUniformVectors",get:function(){return this._maxFragmentUniformVectors}},{key:"maxTextureUnits",get:function(){return this._maxTextureUnits}},{key:"maxVertexTextureUnits",get:function(){return this._maxVertexTextureUnits}},{key:"maxUniformBufferBindings",get:function(){return this._maxUniformBufferBindings}},{key:"maxUniformBlockSize",get:function(){return this._maxUniformBlockSize}},{key:"maxTextureSize",get:function(){return this._maxTextureSize}},{key:"maxCubeMapTextureSize",get:function(){return this._maxCubeMapTextureSize}},{key:"depthBits",get:function(){return this._depthBits}},{key:"stencilBits",get:function(){return this._stencilBits}},{key:"colorFormat",get:function(){return this._colorFmt}},{key:"depthStencilFormat",get:function(){return this._depthStencilFmt}},{key:"macros",get:function(){return this._macros}},{key:"numDrawCalls",get:function(){return this._numDrawCalls}},{key:"numInstances",get:function(){return this._numInstances}},{key:"numTris",get:function(){return this._numTris}},{key:"memoryStatus",get:function(){return this._memoryStatus}},{key:"reverseCW",get:function(){return this._reverseCW},set:function(e){this._reverseCW=e}}]),e}(),Rr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.FRAMEBUFFER)))._device=void 0,i._renderPass=null,i._colorViews=[],i._depthStencilView=null,i._isOffscreen=!0,i._device=e,i}return ee(t,fr),J(t,[{key:"renderPass",get:function(){return this._renderPass}},{key:"colorViews",get:function(){return this._colorViews}},{key:"depthStencilView",get:function(){return this._depthStencilView}},{key:"isOffscreen",get:function(){return this._isOffscreen}}]),t}(),Fr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.INPUT_ASSEMBLER)))._device=void 0,i._attributes=[],i._vertexBuffers=[],i._indexBuffer=null,i._vertexCount=0,i._firstVertex=0,i._indexCount=0,i._firstIndex=0,i._vertexOffset=0,i._instanceCount=0,i._firstInstance=0,i._isIndirect=!1,i._indirectBuffer=null,i._device=e,i}return ee(t,fr),J(t,[{key:"vertexBuffers",get:function(){return this._vertexBuffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"attributes",get:function(){return this._attributes}},{key:"vertexCount",get:function(){return this._vertexCount},set:function(e){this._vertexCount=e}},{key:"firstVertex",get:function(){return this._firstVertex},set:function(e){this._firstVertex=e}},{key:"indexCount",get:function(){return this._indexCount},set:function(e){this._indexCount=e}},{key:"firstIndex",get:function(){return this._firstIndex},set:function(e){this._firstIndex=e}},{key:"vertexOffset",get:function(){return this._vertexOffset},set:function(e){this._vertexOffset=e}},{key:"instanceCount",get:function(){return this._instanceCount},set:function(e){this._instanceCount=e}},{key:"firstInstance",get:function(){return this._firstInstance},set:function(e){this._firstInstance=e}},{key:"isIndirect",get:function(){return this._isIndirect}},{key:"indirectBuffer",get:function(){return this._indirectBuffer}}]),J(t,[{key:"getVertexBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._vertexBuffers.length?this._vertexBuffers[e]:null}}]),t}(),Ir=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.PIPELINE_LAYOUT)))._device=void 0,i._pushConstantsRanges=[],i._layouts=[],i._device=e,i}return ee(t,fr),J(t,[{key:"layouts",get:function(){return this._layouts}}]),t}(),Mr=function(){function e(){Z(this,e),this.isDiscard=!1,this.polygonMode=exports.GFXPolygonMode.FILL,this.shadeModel=exports.GFXShadeModel.GOURAND,this.cullMode=exports.GFXCullMode.BACK,this.isFrontFaceCCW=!0,this.depthBias=0,this.depthBiasClamp=0,this.depthBiasSlop=0,this.isDepthClip=!0,this.isMultisample=!1,this.lineWidth=1}return J(e,[{key:"compare",value:function(e){return this.isDiscard===e.isDiscard&&this.polygonMode===e.polygonMode&&this.shadeModel===e.shadeModel&&this.cullMode===e.cullMode&&this.isFrontFaceCCW===e.isFrontFaceCCW&&this.depthBias===e.depthBias&&this.depthBiasClamp===e.depthBiasClamp&&this.depthBiasSlop===e.depthBiasSlop&&this.isDepthClip===e.isDepthClip&&this.lineWidth===e.lineWidth&&this.isMultisample===e.isMultisample}}]),e}(),Pr=function(){function e(){Z(this,e),this.depthTest=!0,this.depthWrite=!0,this.depthFunc=exports.GFXComparisonFunc.LESS,this.stencilTestFront=!1,this.stencilFuncFront=exports.GFXComparisonFunc.ALWAYS,this.stencilReadMaskFront=65535,this.stencilWriteMaskFront=65535,this.stencilFailOpFront=exports.GFXStencilOp.KEEP,this.stencilZFailOpFront=exports.GFXStencilOp.KEEP,this.stencilPassOpFront=exports.GFXStencilOp.KEEP,this.stencilRefFront=1,this.stencilTestBack=!1,this.stencilFuncBack=exports.GFXComparisonFunc.ALWAYS,this.stencilReadMaskBack=65535,this.stencilWriteMaskBack=65535,this.stencilFailOpBack=exports.GFXStencilOp.KEEP,this.stencilZFailOpBack=exports.GFXStencilOp.KEEP,this.stencilPassOpBack=exports.GFXStencilOp.KEEP,this.stencilRefBack=1}return J(e,[{key:"compare",value:function(e){return this.depthTest===e.depthTest&&this.depthWrite===e.depthWrite&&this.depthFunc===e.depthFunc&&this.stencilTestFront===e.stencilTestFront&&this.stencilFuncFront===e.stencilFuncFront&&this.stencilReadMaskFront===e.stencilReadMaskFront&&this.stencilWriteMaskFront===e.stencilWriteMaskFront&&this.stencilFailOpFront===e.stencilFailOpFront&&this.stencilZFailOpFront===e.stencilZFailOpFront&&this.stencilPassOpFront===e.stencilPassOpFront&&this.stencilRefFront===e.stencilRefFront&&this.stencilTestBack===e.stencilTestBack&&this.stencilFuncBack===e.stencilFuncBack&&this.stencilReadMaskBack===e.stencilReadMaskBack&&this.stencilWriteMaskBack===e.stencilWriteMaskBack&&this.stencilFailOpBack===e.stencilFailOpBack&&this.stencilZFailOpBack===e.stencilZFailOpBack&&this.stencilPassOpBack===e.stencilPassOpBack&&this.stencilRefBack===e.stencilRefBack}}]),e}(),Dr=function(){function e(){Z(this,e),this.blend=!1,this.blendSrc=exports.GFXBlendFactor.ONE,this.blendDst=exports.GFXBlendFactor.ZERO,this.blendEq=exports.GFXBlendOp.ADD,this.blendSrcAlpha=exports.GFXBlendFactor.ONE,this.blendDstAlpha=exports.GFXBlendFactor.ZERO,this.blendAlphaEq=exports.GFXBlendOp.ADD,this.blendColorMask=exports.GFXColorMask.ALL}return J(e,[{key:"compare",value:function(e){return this.blend===e.blend&&this.blendSrc===e.blendSrc&&this.blendDst===e.blendDst&&this.blendEq===e.blendEq&&this.blendSrcAlpha===e.blendSrcAlpha&&this.blendDstAlpha===e.blendDstAlpha&&this.blendAlphaEq===e.blendAlphaEq&&this.blendColorMask===e.blendColorMask}}]),e}(),Br=function e(){Z(this,e),this.isA2C=!1,this.isIndepend=!1,this.blendColor=[0,0,0,0],this.targets=[new Dr]},Nr=function e(){Z(this,e),this.attributes=[]},Lr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.PIPELINE_STATE)))._device=void 0,i._shader=null,i._primitive=exports.GFXPrimitiveMode.TRIANGLE_LIST,i._is=null,i._rs=null,i._dss=null,i._bs=null,i._dynamicStates=[],i._layout=null,i._renderPass=null,i._hash=0,i._device=e,i}return ee(t,fr),J(t,[{key:"shader",get:function(){return this._shader}},{key:"primitive",get:function(){return this._primitive}},{key:"rasterizerState",get:function(){return this._rs}},{key:"depthStencilState",get:function(){return this._dss}},{key:"blendState",get:function(){return this._bs}},{key:"inputState",get:function(){return this._is}},{key:"dynamicStates",get:function(){return this._dynamicStates}},{key:"pipelineLayout",get:function(){return this._layout}},{key:"renderPass",get:function(){return this._renderPass}},{key:"hash",get:function(){return this._hash}}]),t}(),zr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.QUEUE)))._device=void 0,i._type=exports.GFXQueueType.GRAPHICS,i._device=e,i}return ee(t,fr),J(t,[{key:"type",get:function(){return this._type}}]),t}(),Gr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.RENDER_PASS)))._device=void 0,i._colorInfos=[],i._depthStencilInfo=null,i._device=e,i}return ee(t,fr),t}(),Ur=function(){function e(){Z(this,e),this.name="",this.minFilter=exports.GFXFilter.LINEAR,this.magFilter=exports.GFXFilter.LINEAR,this.mipFilter=exports.GFXFilter.NONE,this.addressU=exports.GFXAddress.WRAP,this.addressV=exports.GFXAddress.WRAP,this.addressW=exports.GFXAddress.WRAP,this.maxAnisotropy=16,this.cmpFunc=exports.GFXComparisonFunc.NEVER,this.borderColor={r:0,g:0,b:0,a:0},this.minLOD=0,this.maxLOD=0,this.mipLODBias=0}return J(e,[{key:"compare",value:function(e){return this.minFilter===e.minFilter&&this.magFilter===e.magFilter&&this.mipFilter===e.mipFilter&&this.addressU===e.addressU&&this.addressV===e.addressV&&this.addressW===e.addressW&&this.maxAnisotropy===e.maxAnisotropy&&this.cmpFunc===e.cmpFunc&&this.borderColor.r===e.borderColor.r&&this.borderColor.g===e.borderColor.g&&this.borderColor.b===e.borderColor.b&&this.borderColor.a===e.borderColor.a&&this.minLOD===e.minLOD&&this.maxLOD===e.maxLOD&&this.mipLODBias===e.mipLODBias}}]),e}(),Xr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.SAMPLER)))._device=void 0,i._state=new Ur,i._device=e,i._state=new Ur,i}return ee(t,fr),J(t,[{key:"state",get:function(){return this._state}}]),t}(),Vr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.SHADER)))._device=void 0,i._id=void 0,i._name="",i._stages=[],i._blocks=[],i._samplers=[],i._device=e,i._id=e.genShaderId(),i}return ee(t,fr),J(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}}]),t}();function Hr(e){return e>0&&0==(e&e-1)}var jr,Wr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.TEXTURE)))._device=void 0,i._type=exports.GFXTextureType.TEX2D,i._usage=exports.GFXTextureUsageBit.NONE,i._format=exports.GFXFormat.UNKNOWN,i._width=0,i._height=0,i._depth=1,i._arrayLayer=1,i._mipLevel=1,i._samples=exports.GFXSampleCount.X1,i._flags=exports.GFXTextureFlagBit.NONE,i._isPowerOf2=!1,i._size=0,i._buffer=null,i._device=e,i}return ee(t,fr),J(t,[{key:"type",get:function(){return this._type}},{key:"usage",get:function(){return this._usage}},{key:"format",get:function(){return this._format}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}},{key:"arrayLayer",get:function(){return this._arrayLayer}},{key:"mipLevel",get:function(){return this._mipLevel}},{key:"samples",get:function(){return this._samples}},{key:"flags",get:function(){return this._flags}},{key:"size",get:function(){return this._size}},{key:"buffer",get:function(){return this._buffer}}]),t}(),Yr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.TEXTURE_VIEW)))._device=void 0,i._texture=null,i._type=exports.GFXTextureViewType.TV2D,i._format=exports.GFXFormat.UNKNOWN,i._baseLevel=0,i._levelCount=1,i._baseLayer=0,i._layerCount=1,i._device=e,i}return ee(t,fr),J(t,[{key:"texture",get:function(){return this._texture}},{key:"type",get:function(){return this._type}},{key:"format",get:function(){return this._format}},{key:"baseLevel",get:function(){return this._baseLevel}},{key:"levelCount",get:function(){return this._levelCount}},{key:"baseLayer",get:function(){return this._baseLayer}},{key:"layerCount",get:function(){return this._layerCount}}]),t}(),qr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.BINDING_LAYOUT)))._device=void 0,i._bindingUnits=[],i._isDirty=!1,i._device=e,i}return ee(t,fr),J(t,[{key:"bindBuffer",value:function(e,t){for(var i,n=fe(this._bindingUnits);!(i=n()).done;){var r=i.value;if(r.binding===e)return void(r.type===exports.GFXBindingType.UNIFORM_BUFFER?r.buffer!==t&&(r.buffer=t,this._isDirty=!0):console.error("Setting binding is not GFXBindingType.UNIFORM_BUFFER."))}}},{key:"bindSampler",value:function(e,t){for(var i,n=fe(this._bindingUnits);!(i=n()).done;){var r=i.value;if(r.binding===e)return void(r.type===exports.GFXBindingType.SAMPLER?r.sampler!==t&&(r.sampler=t,this._isDirty=!0):console.error("Setting binding is not GFXBindingType.SAMPLER."))}}},{key:"bindTextureView",value:function(e,t){for(var i,n=fe(this._bindingUnits);!(i=n()).done;){var r=i.value;if(r.binding===e)return void(r.type===exports.GFXBindingType.SAMPLER?r.texView!==t&&(r.texView=t,this._isDirty=!0):console.error("Setting binding is not GFXBindingType.SAMPLER."))}}},{key:"getBindingUnit",value:function(e){for(var t,i=fe(this._bindingUnits);!(t=i()).done;){var n=t.value;if(n.binding===e)return n}return null}}]),t}(),Qr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.COMMAND_ALLOCATOR)))._device=void 0,i._device=e,i}return ee(t,fr),t}(),Zr=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,exports.GFXObjectType.WINDOW)))._device=void 0,i._title="",i._left=0,i._top=0,i._width=0,i._height=0,i._nativeWidth=0,i._nativeHeight=0,i._colorFmt=exports.GFXFormat.UNKNOWN,i._depthStencilFmt=exports.GFXFormat.UNKNOWN,i._isOffscreen=!1,i._renderPass=null,i._colorTex=null,i._colorTexView=null,i._depthStencilTex=null,i._depthStencilTexView=null,i._framebuffer=null,i._device=e,i}return ee(t,fr),J(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"colorFormat",get:function(){return this._colorFmt}},{key:"detphStencilFormat",get:function(){return this._depthStencilFmt}},{key:"isOffscreen",get:function(){return this._isOffscreen}},{key:"renderPass",get:function(){return this._renderPass}},{key:"colorTexView",get:function(){return this._colorTexView}},{key:"depthStencilTexView",get:function(){return this._depthStencilTexView}},{key:"framebuffer",get:function(){return this._framebuffer}}]),t}();cc.GFXDevice=Or,cc.GFXBuffer=wr,cc.GFXTexture=Wr,cc.GFXTextureView=Yr,cc.GFXSampler=Xr,cc.GFXShader=Vr,cc.GFXInputAssembler=Fr,cc.GFXRenderPass=Gr,cc.GFXFramebuffer=Rr,cc.GFXPipelineLayout=Ir,cc.GFXPipelineState=Lr,cc.GFXCommandBuffer=kr,cc.GFXQueue=zr,Object.assign(cc,Cr),function(e){e[e.ALL=0]="ALL",e[e.CLOSEST=1]="CLOSEST",e[e.ANY=2]="ANY"}(jr||(jr={}));var Kr,Jr,$r,eo,to,io,no=(Kr=new Mi(0,0,0),function(e,t){var i=Mi.dot(e.d,t.n);if(Math.abs(i)<Number.EPSILON)return 0;Mi.multiplyScalar(Kr,t.n,t.d);var n=Mi.dot(Mi.subtract(Kr,Kr,e.o),t.n)/i;return n<0?0:n}),ro=(Jr=new Mi(0,0,0),$r=new Mi(0,0,0),eo=new Mi(0,0,0),to=new Mi(0,0,0),io=new Mi(0,0,0),function(e,t,i){Mi.subtract(Jr,t.b,t.a),Mi.subtract($r,t.c,t.a),Mi.cross(eo,e.d,$r);var n=Mi.dot(Jr,eo);if(n<Number.EPSILON&&(!i||n>-Number.EPSILON))return 0;var r=1/n;Mi.subtract(to,e.o,t.a);var o=Mi.dot(to,eo)*r;if(o<0||o>1)return 0;Mi.cross(io,to,Jr);var a=Mi.dot(e.d,io)*r;if(a<0||o+a>1)return 0;var s=Mi.dot($r,io)*r;return s<0?0:s}),oo=function(){var e=new Mi(0,0,0);return function(t,i){var n=i.radius,r=i.center,o=t.o,a=t.d,s=n*n;Mi.subtract(e,r,o);var l=e.lengthSqr(),c=Mi.dot(e,a),u=s-(l-c*c);if(u<0)return 0;var h=Math.sqrt(u),p=l<s?c+h:c-h;return p<0?0:p}}(),ao=function(){var e=new Mi,t=new Mi;return function(i,n){return Mi.subtract(e,n.center,n.halfExtents),Mi.add(t,n.center,n.halfExtents),so(i,e,t)}}();function so(e,t,i){var n=e.o,r=e.d,o=1/r.x,a=1/r.y,s=1/r.z,l=(t.x-n.x)*o,c=(i.x-n.x)*o,u=(t.y-n.y)*a,h=(i.y-n.y)*a,p=(t.z-n.z)*s,f=(i.z-n.z)*s,_=Math.max(Math.max(Math.min(l,c),Math.min(u,h)),Math.min(p,f)),d=Math.min(Math.min(Math.max(l,c),Math.max(u,h)),Math.max(p,f));return d<0||_>d?0:_>0?_:d}var lo,co,uo=function(){var e=new Mi,t=new Mi,i=new Mi,n=new Mi,r=new Mi,o=new Mi,a=new Mi,s=new Array(3),l=new Array(3),c=new Array(3),u=new Array(6);return function(h,p){s[0]=p.halfExtents.x,s[1]=p.halfExtents.y,s[2]=p.halfExtents.z,e=p.center,t=h.o,i=h.d,Mi.set(n,p.orientation.m00,p.orientation.m01,p.orientation.m02),Mi.set(r,p.orientation.m03,p.orientation.m04,p.orientation.m05),Mi.set(o,p.orientation.m06,p.orientation.m07,p.orientation.m08),Mi.subtract(a,e,t),l[0]=Mi.dot(n,i),l[1]=Mi.dot(r,i),l[2]=Mi.dot(o,i),c[0]=Mi.dot(n,a),c[1]=Mi.dot(r,a),c[2]=Mi.dot(o,a);for(var f=0;f<3;++f){if(0===l[f]){if(-c[f]-s[f]>0||-c[f]+s[f]<0)return 0;l[f]=1e-7}u[2*f+0]=(c[f]+s[f])/l[f],u[2*f+1]=(c[f]-s[f])/l[f]}var _=Math.max(Math.max(Math.min(u[0],u[1]),Math.min(u[2],u[3])),Math.min(u[4],u[5])),d=Math.min(Math.min(Math.max(u[0],u[1]),Math.max(u[2],u[3])),Math.max(u[4],u[5]));return d<0||_>d?0:_>0?_:d}}(),ho=function(){var e=new Mi,t=new Mi,i=new Mi,n=new Mi,r=new Mi,o=new Mi,a=new Mi,s=new Fn;return function(l,c){var u=c.radius*c.radius,h=Mi.normalize(e,l.d),p=c.ellipseCenter0,f=c.ellipseCenter1,_=Mi.subtract(t,f,p);if(_.equals(Mi.ZERO))return s.radius=c.radius,s.center.set(c.ellipseCenter0),Zo.ray_sphere(l,s);var d=l.o,m=Mi.subtract(i,d,p),v=Mi.cross(n,h,_),y=v.lengthSqr();if(0===y){s.radius=c.radius;var g=Mi.subtract(r,f,d);return m.lengthSqr()<g.lengthSqr()?s.center.set(c.ellipseCenter0):s.center.set(c.ellipseCenter1),Zo.ray_sphere(l,s)}var A=Mi.cross(r,m,_),b=_.lengthSqr(),x=2*Mi.dot(v,A),T=x*x-4*y*(A.lengthSqr()-u*b);if(T<0)return 0;var S=(-x-Math.sqrt(T))/(2*y);if(S<0){s.radius=c.radius;var E=Mi.subtract(o,f,d);return m.lengthSqr()<E.lengthSqr()?s.center.set(c.ellipseCenter0):s.center.set(c.ellipseCenter1),Zo.ray_sphere(l,s)}var C=Mi.scaleAndAdd(o,l.o,h,S),w=Mi.subtract(a,C,p),k=Mi.dot(w,_)/b;return k>=0&&k<=1?S:k<0?(s.radius=c.radius,s.center.set(c.ellipseCenter0),Zo.ray_sphere(l,s)):k>1?(s.radius=c.radius,s.center.set(c.ellipseCenter1),Zo.ray_sphere(l,s)):0}}(),po=function(){var e=In.create(),t={distance:1/0,doubleSided:!1,mode:jr.ANY},i=0,n=function(e,t,n,r,o,a){e==jr.CLOSEST?(i>t||0==i)&&(i=t,a&&(0==a.length?a.push({distance:t,vertexIndex0:n/3,vertexIndex1:r/3,vertexIndex2:o/3}):(a[0].distance=t,a[0].vertexIndex0=n/3,a[0].vertexIndex1=r/3,a[0].vertexIndex2=o/3))):(i=t,a&&a.push({distance:t,vertexIndex0:n/3,vertexIndex1:r/3,vertexIndex2:o/3}))};return function(r,o,a){if(i=0,0==o.geometricInfo.positions.length)return i;var s=void 0===a?t:a;if(so(r,o.geometricInfo.boundingBox.min,o.geometricInfo.boundingBox.max)){var l=o.primitiveMode,c=o.geometricInfo;!function(t,i,r,o,a){if(r===exports.GFXPrimitiveMode.TRIANGLE_LIST)for(var s=i.length,l=0;l<s;l+=3){var c=3*i[l],u=3*i[l+1],h=3*i[l+2];Mi.set(e.a,t[c],t[c+1],t[c+2]),Mi.set(e.b,t[u],t[u+1],t[u+2]),Mi.set(e.c,t[h],t[h+1],t[h+2]);var p=Zo.ray_triangle(o,e,a.doubleSided);if(!(0==p||p>a.distance)&&(n(a.mode,p,c,u,h,a.result),a.mode==jr.ANY))return p}else if(r===exports.GFXPrimitiveMode.TRIANGLE_STRIP)for(var f=i.length-2,_=0,d=0;d<f;d+=1){var m=3*i[d-_],v=3*i[d+_+1],y=3*i[d+2];Mi.set(e.a,t[m],t[m+1],t[m+2]),Mi.set(e.b,t[v],t[v+1],t[v+2]),Mi.set(e.c,t[y],t[y+1],t[y+2]),_=~_;var g=Zo.ray_triangle(o,e,a.doubleSided);if(!(0==g||g>a.distance)&&(n(a.mode,g,m,v,y,a.result),a.mode==jr.ANY))return g}else if(r===exports.GFXPrimitiveMode.TRIANGLE_FAN){var A=i.length-1,b=3*i[0];Mi.set(e.a,t[b],t[b+1],t[b+2]);for(var x=1;x<A;x+=1){var T=3*i[x],S=3*i[x+1];Mi.set(e.b,t[T],t[T+1],t[T+2]),Mi.set(e.c,t[S],t[S+1],t[S+2]);var E=Zo.ray_triangle(o,e,a.doubleSided);if(!(0==E||E>a.distance)&&(n(a.mode,E,b,T,S,a.result),a.mode==jr.ANY))return E}}}(c.positions,c.indices,l,r,s)}return i}}(),fo=(lo=0,co={distance:1/0,doubleSided:!1,mode:jr.ANY},function(e,t,i){lo=0;var n=void 0===i?co:i,r=t.renderingSubMeshes.length,o=t.struct.minPosition,a=t.struct.maxPosition;if(o&&a&&!so(e,o,a))return lo;for(var s=0;s<r;s++){var l=t.renderingSubMeshes[s],c=po(e,l,n);if(c)if(n.mode==jr.CLOSEST)(0==lo||lo>c)&&(lo=c,n.subIndices&&(n.subIndices[0]=s));else if(lo=c,n.subIndices&&n.subIndices.push(s),n.mode==jr.ANY)return c}return lo&&n.mode==jr.CLOSEST&&(n.result&&(n.result[0].distance=lo,n.result.length=1),n.subIndices&&(n.subIndices.length=1)),lo}),_o=function(){var e=0,t={distance:1/0,doubleSided:!1,mode:jr.ANY},i=new Cn,n=new Qi;return function(r,o,a){e=0;var s=void 0===a?t:a,l=o.subModelNum,c=o.worldBounds;if(c&&!ao(r,c))return e;Cn.copy(i,r),o.node&&(Qi.invert(n,o.node.getWorldMatrix(n)),Mi.transformMat4(i.o,r.o,n),Mi.transformMat4Normal(i.d,r.d,n));for(var u=0;u<l;u++){var h=o.getSubModel(u).subMeshData,p=po(i,h,s);if(p)if(s.mode==jr.CLOSEST)(0==e||e>p)&&(e=p,s.subIndices&&(s.subIndices[0]=u));else if(e=p,s.subIndices&&s.subIndices.push(u),s.mode==jr.ANY)return p}return e&&s.mode==jr.CLOSEST&&(s.result&&(s.result[0].distance=e,s.result.length=1),s.subIndices&&(s.subIndices.length=1)),e}}(),mo=function(){var e=new Mi(0,0,0);return function(t,i){Mi.subtract(e,t.e,t.s);var n=(i.d-Mi.dot(t.s,i.n))/Mi.dot(e,i.n);return n<0||n>1?0:n}}(),vo=function(){var e=new Mi(0,0,0),t=new Mi(0,0,0),i=new Mi(0,0,0),n=new Mi(0,0,0),r=new Mi(0,0,0),o=new Mi(0,0,0);return function(a,s,l){Mi.subtract(e,s.b,s.a),Mi.subtract(t,s.c,s.a),Mi.subtract(i,a.s,a.e),Mi.cross(r,e,t);var c=Mi.dot(i,r);if(c<=0)return 0;Mi.subtract(n,a.s,s.a);var u=Mi.dot(n,r);if(u<0||u>c)return 0;Mi.cross(o,i,n);var h=Mi.dot(t,o);if(h<0||h>c)return 0;var p=-Mi.dot(e,o);if(p<0||h+p>c)return 0;if(l){var f=1/c,_=1-(h*=f)-(p*=f);Mi.set(l,s.a.x*_+s.b.x*h+s.c.x*p,s.a.y*_+s.b.y*h+s.c.y*p,s.a.z*_+s.b.z*h+s.c.z*p)}return 1}}(),yo=new Cn;function go(e,t){yo.o.set(e.s),Mi.subtract(yo.d,e.e,e.s),yo.d.normalize();var i=ao(yo,t);return i<=e.length()?i:0}function Ao(e,t){yo.o.set(e.s),Mi.subtract(yo.d,e.e,e.s),yo.d.normalize();var i=uo(yo,t);return i<=e.length()?i:0}function bo(e,t){yo.o.set(e.s),Mi.subtract(yo.d,e.e,e.s),yo.d.normalize();var i=oo(yo,t);return i<=e.length()?i:0}var xo,To,So,Eo,Co=(xo=new Mi,To=new Mi,So=new Mi,Eo=new Mi,function(e,t){return Mi.subtract(xo,e.center,e.halfExtents),Mi.add(To,e.center,e.halfExtents),Mi.subtract(So,t.center,t.halfExtents),Mi.add(Eo,t.center,t.halfExtents),xo.x<=Eo.x&&To.x>=So.x&&xo.y<=Eo.y&&To.y>=So.y&&xo.z<=Eo.z&&To.z>=So.z});function wo(e,t,i,n,r,o){Mi.set(o[0],e.x+i.x*t.x+n.x*t.y+r.x*t.z,e.y+i.y*t.x+n.y*t.y+r.y*t.z,e.z+i.z*t.x+n.z*t.y+r.z*t.z),Mi.set(o[1],e.x-i.x*t.x+n.x*t.y+r.x*t.z,e.y-i.y*t.x+n.y*t.y+r.y*t.z,e.z-i.z*t.x+n.z*t.y+r.z*t.z),Mi.set(o[2],e.x+i.x*t.x-n.x*t.y+r.x*t.z,e.y+i.y*t.x-n.y*t.y+r.y*t.z,e.z+i.z*t.x-n.z*t.y+r.z*t.z),Mi.set(o[3],e.x+i.x*t.x+n.x*t.y-r.x*t.z,e.y+i.y*t.x+n.y*t.y-r.y*t.z,e.z+i.z*t.x+n.z*t.y-r.z*t.z),Mi.set(o[4],e.x-i.x*t.x-n.x*t.y-r.x*t.z,e.y-i.y*t.x-n.y*t.y-r.y*t.z,e.z-i.z*t.x-n.z*t.y-r.z*t.z),Mi.set(o[5],e.x+i.x*t.x-n.x*t.y-r.x*t.z,e.y+i.y*t.x-n.y*t.y-r.y*t.z,e.z+i.z*t.x-n.z*t.y-r.z*t.z),Mi.set(o[6],e.x-i.x*t.x+n.x*t.y-r.x*t.z,e.y-i.y*t.x+n.y*t.y-r.y*t.z,e.z-i.z*t.x+n.z*t.y-r.z*t.z),Mi.set(o[7],e.x-i.x*t.x-n.x*t.y+r.x*t.z,e.y-i.y*t.x-n.y*t.y+r.y*t.z,e.z-i.z*t.x-n.z*t.y+r.z*t.z)}function ko(e,t){for(var i=Mi.dot(t,e[0]),n=i,r=1;r<8;++r){var o=Mi.dot(t,e[r]);i=o<i?o:i,n=o>n?o:n}return[i,n]}var Oo,Ro,Fo,Io=function(){for(var e=new Array(15),t=0;t<15;t++)e[t]=new Mi(0,0,0);for(var i=new Array(8),n=new Array(8),r=0;r<8;r++)i[r]=new Mi(0,0,0),n[r]=new Mi(0,0,0);var o=new Mi,a=new Mi;return function(t,r){Mi.set(e[0],1,0,0),Mi.set(e[1],0,1,0),Mi.set(e[2],0,0,1),Mi.set(e[3],r.orientation.m00,r.orientation.m01,r.orientation.m02),Mi.set(e[4],r.orientation.m03,r.orientation.m04,r.orientation.m05),Mi.set(e[5],r.orientation.m06,r.orientation.m07,r.orientation.m08);for(var s=0;s<3;++s)Mi.cross(e[6+3*s+0],e[s],e[0]),Mi.cross(e[6+3*s+1],e[s],e[1]),Mi.cross(e[6+3*s+1],e[s],e[2]);Mi.subtract(o,t.center,t.halfExtents),Mi.add(a,t.center,t.halfExtents),function(e,t,i){Mi.set(i[0],e.x,t.y,t.z),Mi.set(i[1],e.x,t.y,e.z),Mi.set(i[2],e.x,e.y,t.z),Mi.set(i[3],e.x,e.y,e.z),Mi.set(i[4],t.x,t.y,t.z),Mi.set(i[5],t.x,t.y,e.z),Mi.set(i[6],t.x,e.y,t.z),Mi.set(i[7],t.x,e.y,e.z)}(o,a,i),wo(r.center,r.halfExtents,e[3],e[4],e[5],n);for(var l=0;l<15;++l){var c=ko(i,e[l]),u=ko(n,e[l]);if(u[0]>c[1]||c[0]>u[1])return 0}return 1}}(),Mo=function(e,t){var i=e.halfExtents.x*Math.abs(t.n.x)+e.halfExtents.y*Math.abs(t.n.y)+e.halfExtents.z*Math.abs(t.n.z),n=Mi.dot(t.n,e.center);return n+i<t.d?-1:n-i>t.d?0:1},Po=function(e,t){for(var i=0;i<t.planes.length;i++)if(-1===Mo(e,t.planes[i]))return 0;return 1},Do=function(){for(var e=new Array(8),t=0,i=0,n=0;n<e.length;n++)e[n]=new Mi(0,0,0);return function(n,r){for(var o=0,a=!1,s=0;s<r.planes.length;s++){if(-1===(o=Mo(n,r.planes[s])))return 0;1===o&&(a=!0)}if(!a)return 1;for(var l=0;l<r.vertices.length;l++)Mi.subtract(e[l],r.vertices[l],n.center);t=0,i=0;for(var c=0;c<r.vertices.length;c++)e[c].x>n.halfExtents.x?t++:e[c].x<-n.halfExtents.x&&i++;if(t===r.vertices.length||i===r.vertices.length)return 0;t=0,i=0;for(var u=0;u<r.vertices.length;u++)e[u].y>n.halfExtents.y?t++:e[u].y<-n.halfExtents.y&&i++;if(t===r.vertices.length||i===r.vertices.length)return 0;t=0,i=0;for(var h=0;h<r.vertices.length;h++)e[h].z>n.halfExtents.z?t++:e[h].z<-n.halfExtents.z&&i++;return t===r.vertices.length||i===r.vertices.length?0:1}}(),Bo=(Oo=new Mi(0,0,0),Ro=new zi,function(e,t){return Mi.subtract(Oo,t,e.center),Mi.transformMat3(Oo,Oo,zi.transpose(Ro,e.orientation)),i=Oo,n=e.halfExtents,Math.abs(i.x)<n.x&&Math.abs(i.y)<n.y&&Math.abs(i.z)<n.z;var i,n}),No=(Fo=function(e,t,i,n){return Math.abs(e.x*t+e.y*i+e.z*n)},function(e,t){var i=e.halfExtents.x*Fo(t.n,e.orientation.m00,e.orientation.m01,e.orientation.m02)+e.halfExtents.y*Fo(t.n,e.orientation.m03,e.orientation.m04,e.orientation.m05)+e.halfExtents.z*Fo(t.n,e.orientation.m06,e.orientation.m07,e.orientation.m08),n=Mi.dot(t.n,e.center);return n+i<t.d?-1:n-i>t.d?0:1}),Lo=function(e,t){for(var i=0;i<t.planes.length;i++)if(-1===No(e,t.planes[i]))return 0;return 1},zo=function(){for(var e=new Array(8),t=0,i=0,n=0,r=0;r<e.length;r++)e[r]=new Mi(0,0,0);var o=function(e,t,i,n){return e.x*t+e.y*i+e.z*n};return function(r,a){for(var s=0,l=!1,c=0;c<a.planes.length;c++){if(-1===(s=No(r,a.planes[c])))return 0;1===s&&(l=!0)}if(!l)return 1;for(var u=0;u<a.vertices.length;u++)Mi.subtract(e[u],a.vertices[u],r.center);i=0,n=0;for(var h=0;h<a.vertices.length;h++)(t=o(e[h],r.orientation.m00,r.orientation.m01,r.orientation.m02))>r.halfExtents.x?i++:t<-r.halfExtents.x&&n++;if(i===a.vertices.length||n===a.vertices.length)return 0;i=0,n=0;for(var p=0;p<a.vertices.length;p++)(t=o(e[p],r.orientation.m03,r.orientation.m04,r.orientation.m05))>r.halfExtents.y?i++:t<-r.halfExtents.y&&n++;if(i===a.vertices.length||n===a.vertices.length)return 0;i=0,n=0;for(var f=0;f<a.vertices.length;f++)(t=o(e[f],r.orientation.m06,r.orientation.m07,r.orientation.m08))>r.halfExtents.z?i++:t<-r.halfExtents.z&&n++;return i===a.vertices.length||n===a.vertices.length?0:1}}(),Go=function(){for(var e=new Array(15),t=0;t<15;t++)e[t]=new Mi(0,0,0);for(var i=new Array(8),n=new Array(8),r=0;r<8;r++)i[r]=new Mi(0,0,0),n[r]=new Mi(0,0,0);return function(t,r){Mi.set(e[0],t.orientation.m00,t.orientation.m01,t.orientation.m02),Mi.set(e[1],t.orientation.m03,t.orientation.m04,t.orientation.m05),Mi.set(e[2],t.orientation.m06,t.orientation.m07,t.orientation.m08),Mi.set(e[3],r.orientation.m00,r.orientation.m01,r.orientation.m02),Mi.set(e[4],r.orientation.m03,r.orientation.m04,r.orientation.m05),Mi.set(e[5],r.orientation.m06,r.orientation.m07,r.orientation.m08);for(var o=0;o<3;++o)Mi.cross(e[6+3*o+0],e[o],e[0]),Mi.cross(e[6+3*o+1],e[o],e[1]),Mi.cross(e[6+3*o+1],e[o],e[2]);wo(t.center,t.halfExtents,e[0],e[1],e[2],i),wo(r.center,r.halfExtents,e[3],e[4],e[5],n);for(var a=0;a<15;++a){var s=ko(i,e[a]),l=ko(n,e[a]);if(l[0]>s[1]||s[0]>l[1])return 0}return 1}}(),Uo=function(){for(var e=new Fn,t=new Mi,i=new Mi,n=new Mi,r=new Array(8),o=0;o<8;o++)r[o]=new Mi;for(var a=new Array(8),s=0;s<8;s++)a[s]=new Mi;return function(o,s){if(0===Mi.squaredDistance(s.ellipseCenter0,s.ellipseCenter1))return e.radius=s.radius,e.center.set(s.ellipseCenter0),Zo.sphere_obb(e,o);t.x=o.orientation.m00,t.y=o.orientation.m01,t.z=o.orientation.m02,i.x=o.orientation.m03,i.y=o.orientation.m04,i.z=o.orientation.m05,n.x=o.orientation.m06,n.y=o.orientation.m07,n.z=o.orientation.m08,wo(o.center,o.halfExtents,t,i,n,r);var l=a,c=Mi.copy(l[0],t),u=Mi.copy(l[1],i),h=Mi.copy(l[2],n);Mi.subtract(l[3],s.center,o.center).normalize();var p=Mi.subtract(l[4],s.ellipseCenter0,s.ellipseCenter1);p.normalize(),Mi.cross(l[5],c,p),Mi.cross(l[6],u,p),Mi.cross(l[7],h,p);for(var f=0;f<8;++f){var _=ko(r,l[f]),d=Mi.dot(l[f],s.ellipseCenter0),m=Mi.dot(l[f],s.ellipseCenter1),v=Math.max(d,m),y=Math.min(d,m)-s.radius,g=v+s.radius;if(y>_[1]||_[0]>g)return 0}return 1}}(),Xo=function(e,t){var i=Mi.dot(t.n,e.center),n=e.radius*t.n.length();return i+n<t.d?-1:i-n>t.d?0:1},Vo=function(e,t){for(var i=0;i<t.planes.length;i++)if(-1===Xo(e,t.planes[i]))return 0;return 1},Ho=function(){var e=new Mi(0,0,0),t=[1,-1,1,-1,1,-1];return function(i,n){for(var r=0;r<6;r++){var o=n.planes[r],a=i.radius,s=i.center,l=o.n,c=o.d,u=Mi.dot(l,s);if(u+a<c)return 0;if(!(u-a>c)){Mi.add(e,s,Mi.multiplyScalar(e,l,a));for(var h=0;h<6;h++)if(h!==r&&h!==r+t[r]){var p=n.planes[h];if(Mi.dot(p.n,e)<p.d)return 0}}}return 1}}(),jo=function(e,t){var i=e.radius+t.radius;return Mi.squaredDistance(e.center,t.center)<i*i},Wo=function(){var e=new Mi;return function(t,i){return Tn(e,t.center,i),Mi.squaredDistance(t.center,e)<t.radius*t.radius}}(),Yo=function(){var e=new Mi;return function(t,i){return Sn(e,t.center,i),Mi.squaredDistance(t.center,e)<t.radius*t.radius}}(),qo=function(){var e=new Mi,t=new Mi;return function(i,n){var r=i.radius+n.radius,o=r*r,a=Mi.squaredDistance(n.ellipseCenter0,n.ellipseCenter1);if(0===a)return Mi.squaredDistance(i.center,n.center)<o;Mi.subtract(e,i.center,n.ellipseCenter0),Mi.subtract(t,n.ellipseCenter1,n.ellipseCenter0);var s=Mi.dot(e,t)/a;return s<0?Mi.squaredDistance(i.center,n.ellipseCenter0)<o:s>1?Mi.squaredDistance(i.center,n.ellipseCenter1)<o:(Mi.scaleAndAdd(e,n.ellipseCenter0,t,s),Mi.squaredDistance(i.center,e)<o)}}(),Qo=function(){var e=new Mi,t=new Mi,i=new Mi,n=new Mi,r=new Mi,o=new Mi;return function(a,s){var l,c,u,h,p=Mi.subtract(e,a.ellipseCenter1,a.ellipseCenter0),f=Mi.subtract(t,s.ellipseCenter1,s.ellipseCenter0),_=Mi.subtract(i,a.ellipseCenter0,s.ellipseCenter0),d=Mi.dot(p,p),m=Mi.dot(p,f),v=Mi.dot(f,f),y=Mi.dot(p,_),g=Mi.dot(f,_),A=d*v-m*m,b=A,x=A;A<ci?(c=0,b=1,h=g,x=v):(h=d*g-m*y,(c=m*g-v*y)<0?(c=0,h=g,x=v):c>b&&(c=b,h=g+m,x=v)),h<0?(h=0,-y<0?c=0:-y>d?c=b:(c=-y,b=d)):h>x&&(h=x,-y+m<0?c=0:-y+m>d?c=b:(c=-y+m,b=d)),l=Math.abs(c)<ci?0:c/b,u=Math.abs(h)<ci?0:h/x;var T=n;T.set(_),T.add(Mi.multiplyScalar(r,p,l)),T.subtract(Mi.multiplyScalar(o,f,u));var S=a.radius+s.radius;return T.lengthSqr()<S*S}}(),Zo={ray_sphere:oo,ray_aabb:ao,ray_obb:uo,ray_plane:no,ray_triangle:ro,ray_capsule:ho,ray_subMesh:po,ray_mesh:fo,ray_model:_o,line_sphere:bo,line_aabb:go,line_obb:Ao,line_plane:mo,line_triangle:vo,sphere_sphere:jo,sphere_aabb:Wo,sphere_obb:Yo,sphere_plane:Xo,sphere_frustum:Vo,sphere_frustum_accurate:Ho,sphere_capsule:qo,aabb_aabb:Co,aabb_obb:Io,aabb_plane:Mo,aabb_frustum:Po,aabb_frustum_accurate:Do,obb_obb:Go,obb_plane:No,obb_frustum:Lo,obb_frustum_accurate:zo,obb_point:Bo,obb_capsule:Uo,capsule_capsule:Qo,resolve:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e._type,r=t._type,o=this[n|r];return n<r?o(e,t,i):o(t,e,i)}};Zo[V.SHAPE_RAY|V.SHAPE_SPHERE]=oo,Zo[V.SHAPE_RAY|V.SHAPE_AABB]=ao,Zo[V.SHAPE_RAY|V.SHAPE_OBB]=uo,Zo[V.SHAPE_RAY|V.SHAPE_PLANE]=no,Zo[V.SHAPE_RAY|V.SHAPE_TRIANGLE]=ro,Zo[V.SHAPE_RAY|V.SHAPE_CAPSULE]=ho,Zo[V.SHAPE_LINE|V.SHAPE_SPHERE]=bo,Zo[V.SHAPE_LINE|V.SHAPE_AABB]=go,Zo[V.SHAPE_LINE|V.SHAPE_OBB]=Ao,Zo[V.SHAPE_LINE|V.SHAPE_PLANE]=mo,Zo[V.SHAPE_LINE|V.SHAPE_TRIANGLE]=vo,Zo[V.SHAPE_SPHERE]=jo,Zo[V.SHAPE_SPHERE|V.SHAPE_AABB]=Wo,Zo[V.SHAPE_SPHERE|V.SHAPE_OBB]=Yo,Zo[V.SHAPE_SPHERE|V.SHAPE_PLANE]=Xo,Zo[V.SHAPE_SPHERE|V.SHAPE_FRUSTUM]=Vo,Zo[V.SHAPE_SPHERE|V.SHAPE_FRUSTUM_ACCURATE]=Ho,Zo[V.SHAPE_SPHERE|V.SHAPE_CAPSULE]=qo,Zo[V.SHAPE_AABB]=Co,Zo[V.SHAPE_AABB|V.SHAPE_OBB]=Io,Zo[V.SHAPE_AABB|V.SHAPE_PLANE]=Mo,Zo[V.SHAPE_AABB|V.SHAPE_FRUSTUM]=Po,Zo[V.SHAPE_AABB|V.SHAPE_FRUSTUM_ACCURATE]=Do,Zo[V.SHAPE_OBB]=Go,Zo[V.SHAPE_OBB|V.SHAPE_PLANE]=No,Zo[V.SHAPE_OBB|V.SHAPE_FRUSTUM]=Lo,Zo[V.SHAPE_OBB|V.SHAPE_FRUSTUM_ACCURATE]=zo,Zo[V.SHAPE_OBB|V.SHAPE_CAPSULE]=Uo,Zo[V.SHAPE_CAPSULE]=Qo;var Ko=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;Z(this,e),this.s=void 0,this.e=void 0,this._type=void 0,this._type=V.SHAPE_LINE,this.s=new Mi(t,i,n),this.e=new Mi(r,o,a)}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(t,i,n,r,o,a){return new e(t,i,n,r,o,a)}},{key:"clone",value:function(t){return new e(t.s.x,t.s.y,t.s.z,t.e.x,t.e.y,t.e.z)}},{key:"copy",value:function(e,t){return Mi.copy(e.s,t.s),Mi.copy(e.e,t.e),e}},{key:"fromPoints",value:function(e,t,i){return Mi.copy(e.s,t),Mi.copy(e.e,i),e}},{key:"set",value:function(e,t,i,n,r,o,a){return e.s.x=t,e.s.y=i,e.s.z=n,e.e.x=r,e.e.y=o,e.e.z=a,e}},{key:"len",value:function(e){return Mi.distance(e.s,e.e)}}]),J(e,[{key:"length",value:function(){return Mi.distance(this.s,this.e)}}]),e}(),Jo=new Mi(0,0,0),$o=new Mi(0,0,0),ea=cc.mat4(),ta=cc.v4(),ia=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Z(this,e),this.n=void 0,this.d=void 0,this._type=void 0,this._type=V.SHAPE_PLANE,this.n=new Mi(t,i,n),this.d=r}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(t,i,n,r){return new e(t,i,n,r)}},{key:"clone",value:function(t){return new e(t.n.x,t.n.y,t.n.z,t.d)}},{key:"copy",value:function(e,t){return Mi.copy(e.n,t.n),e.d=t.d,e}},{key:"fromPoints",value:function(e,t,i,n){return Mi.subtract(Jo,i,t),Mi.subtract($o,n,t),Mi.normalize(e.n,Mi.cross(e.n,Jo,$o)),e.d=Mi.dot(e.n,t),e}},{key:"set",value:function(e,t,i,n,r){return e.n.x=t,e.n.y=i,e.n.z=n,e.d=r,e}},{key:"fromNormalAndPoint",value:function(e,t,i){return Mi.copy(e.n,t),e.d=Mi.dot(t,i),e}},{key:"normalize",value:function(e,t){var i=t.n.length();return Mi.normalize(e.n,t.n),i>0&&(e.d=t.d/i),e}}]),J(e,[{key:"transform",value:function(e){Qi.invert(ea,e),Qi.transpose(ea,ea),Ni.set(ta,this.n.x,this.n.y,this.n.z,this.d),Ni.transformMat4(ta,ta,ea),Mi.set(this.n,ta.x,ta.y,ta.z),this.d=ta.w}}]),e}(),na=new Mi,ra=new Mi,oa=new Mi,aa=new Mi,sa=new zi,la=function(e,t,i){sa.m00=Math.abs(i.m00),sa.m01=Math.abs(i.m01),sa.m02=Math.abs(i.m02),sa.m03=Math.abs(i.m04),sa.m04=Math.abs(i.m05),sa.m05=Math.abs(i.m06),sa.m06=Math.abs(i.m08),sa.m07=Math.abs(i.m09),sa.m08=Math.abs(i.m10),Mi.transformMat3(e,t,sa)},ca=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Z(this,e),this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=V.SHAPE_AABB,this.center=new Mi(t,i,n),this.halfExtents=new Mi(r,o,a)}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(t,i,n,r,o,a){return new e(t,i,n,r,o,a)}},{key:"clone",value:function(t){return new e(t.center.x,t.center.y,t.center.z,t.halfExtents.x,t.halfExtents.y,t.halfExtents.z)}},{key:"copy",value:function(e,t){return Mi.copy(e.center,t.center),Mi.copy(e.halfExtents,t.halfExtents),e}},{key:"fromPoints",value:function(e,t,i){return Mi.add(na,i,t),Mi.subtract(ra,i,t),Mi.multiplyScalar(e.center,na,.5),Mi.multiplyScalar(e.halfExtents,ra,.5),e}},{key:"set",value:function(e,t,i,n,r,o,a){return Mi.set(e.center,t,i,n),Mi.set(e.halfExtents,r,o,a),e}},{key:"merge",value:function(t,i,n){return Mi.subtract(na,i.center,i.halfExtents),Mi.subtract(ra,n.center,n.halfExtents),Mi.add(oa,i.center,i.halfExtents),Mi.add(aa,n.center,n.halfExtents),Mi.max(aa,oa,aa),Mi.min(oa,na,ra),e.fromPoints(t,oa,aa)}},{key:"transform",value:function(e,t,i){return Mi.transformMat4(e.center,t.center,i),la(e.halfExtents,t.halfExtents,i),e}}]),J(e,[{key:"getBoundary",value:function(e,t){Mi.subtract(e,this.center,this.halfExtents),Mi.add(t,this.center,this.halfExtents)}},{key:"transform",value:function(e,t,i,n,r){Mi.transformMat4(r.center,this.center,e),la(r.halfExtents,this.halfExtents,e)}},{key:"clone",value:function(){return e.clone(this)}},{key:"copy",value:function(t){return e.copy(this,t)}}]),e}(),ua=new Mi,ha=new Mi,pa=new zi,fa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:1;Z(this,e),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=V.SHAPE_OBB,this.center=new Mi(t,i,n),this.halfExtents=new Mi(r,o,a),this.orientation=new zi(s,l,c,u,h,p,f,_,d)}return J(e,[{key:"type",get:function(){return this._type}}],[{key:"create",value:function(t,i,n,r,o,a,s,l,c,u,h,p,f,_,d){return new e(t,i,n,r,o,a,s,l,c,u,h,p,f,_,d)}},{key:"clone",value:function(t){return new e(t.center.x,t.center.y,t.center.z,t.halfExtents.x,t.halfExtents.y,t.halfExtents.z,t.orientation.m00,t.orientation.m01,t.orientation.m02,t.orientation.m03,t.orientation.m04,t.orientation.m05,t.orientation.m06,t.orientation.m07,t.orientation.m08)}},{key:"copy",value:function(e,t){return Mi.copy(e.center,t.center),Mi.copy(e.halfExtents,t.halfExtents),zi.copy(e.orientation,t.orientation),e}},{key:"fromPoints",value:function(e,t,i){return Mi.multiplyScalar(e.center,Mi.add(ua,t,i),.5),Mi.multiplyScalar(e.halfExtents,Mi.subtract(ha,i,t),.5),zi.identity(e.orientation),e}},{key:"set",value:function(e,t,i,n,r,o,a,s,l,c,u,h,p,f,_,d){return Mi.set(e.center,t,i,n),Mi.set(e.halfExtents,r,o,a),zi.set(e.orientation,s,l,c,u,h,p,f,_,d),e}}]),J(e,[{key:"getBoundary",value:function(e,t){!function(e,t,i){pa.m00=Math.abs(i.m00),pa.m01=Math.abs(i.m01),pa.m02=Math.abs(i.m02),pa.m03=Math.abs(i.m03),pa.m04=Math.abs(i.m04),pa.m05=Math.abs(i.m05),pa.m06=Math.abs(i.m06),pa.m07=Math.abs(i.m07),pa.m08=Math.abs(i.m08),Mi.transformMat3(e,t,pa)}(ua,this.halfExtents,this.orientation),Mi.subtract(e,this.center,ua),Mi.add(t,this.center,ua)}},{key:"transform",value:function(e,t,i,n,r){Mi.transformMat4(r.center,this.center,e),zi.fromQuat(r.orientation,i),Mi.multiply(r.halfExtents,this.halfExtents,n)}},{key:"translateAndRotate",value:function(e,t,i){Mi.transformMat4(i.center,this.center,e),zi.fromQuat(i.orientation,t)}},{key:"setScale",value:function(e,t){Mi.multiply(t.halfExtents,this.halfExtents,e)}}]),e}(),_a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Z(this,e),this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=V.SHAPE_CAPSULE,this.radius=t,this.halfHeight=i,this.axis=n,this.center=new Mi,this.rotation=new Xi,this.ellipseCenter0=new Mi(0,i,0),this.ellipseCenter1=new Mi(0,-i,0),this.updateCache()}return J(e,[{key:"type",get:function(){return this._type}}]),J(e,[{key:"transform",value:function(e,t,i,n,r){var o=n,a=wi(o);r.radius=this.radius*Math.abs(a);var s=(this.halfHeight+this.radius)*Math.abs(o.y)-r.radius;s<0&&(s=0),r.halfHeight=s,Mi.transformMat4(r.center,this.center,e),Xi.multiply(r.rotation,this.rotation,i),r.updateCache()}},{key:"updateCache",value:function(){this.updateLocalCenter(),Mi.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),Mi.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)}},{key:"updateLocalCenter",value:function(){var e=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(e,0,0),this.ellipseCenter1.set(-e,0,0);break;case 1:this.ellipseCenter0.set(0,e,0),this.ellipseCenter1.set(0,-e,0);break;case 2:this.ellipseCenter0.set(0,0,e),this.ellipseCenter1.set(0,0,-e)}}}]),e}(),da=new Array(8);da[0]=new Mi(1,1,1),da[1]=new Mi(-1,1,1),da[2]=new Mi(-1,-1,1),da[3]=new Mi(1,-1,1),da[4]=new Mi(1,1,-1),da[5]=new Mi(-1,1,-1),da[6]=new Mi(-1,-1,-1),da[7]=new Mi(1,-1,-1);var ma=function(){function e(){Z(this,e),this._type=void 0,this.planes=void 0,this.vertices=void 0,this._type=V.SHAPE_FRUSTUM,this.planes=new Array(6);for(var t=0;t<6;++t)this.planes[t]=ia.create(0,0,0,0);this.vertices=new Array(8);for(var i=0;i<8;++i)this.vertices[i]=new Mi}return J(e,[{key:"accurate",set:function(e){this._type=e?V.SHAPE_FRUSTUM_ACCURATE:V.SHAPE_FRUSTUM}},{key:"type",get:function(){return this._type}}],[{key:"create",value:function(){return new e}},{key:"clone",value:function(t){return e.copy(new e,t)}},{key:"copy",value:function(e,t){e._type=t._type;for(var i=0;i<6;++i)ia.copy(e.planes[i],t.planes[i]);for(var n=0;n<8;++n)Mi.copy(e.vertices[n],t.vertices[n]);return e}}]),J(e,[{key:"update",value:function(e,t){if(Mi.set(this.planes[0].n,e.m03+e.m00,e.m07+e.m04,e.m11+e.m08),this.planes[0].d=-(e.m15+e.m12),Mi.set(this.planes[1].n,e.m03-e.m00,e.m07-e.m04,e.m11-e.m08),this.planes[1].d=-(e.m15-e.m12),Mi.set(this.planes[2].n,e.m03+e.m01,e.m07+e.m05,e.m11+e.m09),this.planes[2].d=-(e.m15+e.m13),Mi.set(this.planes[3].n,e.m03-e.m01,e.m07-e.m05,e.m11-e.m09),this.planes[3].d=-(e.m15-e.m13),Mi.set(this.planes[4].n,e.m03+e.m02,e.m07+e.m06,e.m11+e.m10),this.planes[4].d=-(e.m15+e.m14),Mi.set(this.planes[5].n,e.m03-e.m02,e.m07-e.m06,e.m11-e.m10),this.planes[5].d=-(e.m15-e.m14),this._type===V.SHAPE_FRUSTUM_ACCURATE){for(var i=0;i<6;i++){var n=this.planes[i],r=1/n.n.length();Mi.multiplyScalar(n.n,n.n,r),n.d*=r}for(var o=0;o<8;o++)Mi.transformMat4(this.vertices[o],da[o],t)}}},{key:"transform",value:function(e){if(this._type===V.SHAPE_FRUSTUM_ACCURATE){for(var t=0;t<8;t++)Mi.transformMat4(this.vertices[t],this.vertices[t],e);ia.fromPoints(this.planes[0],this.vertices[1],this.vertices[5],this.vertices[6]),ia.fromPoints(this.planes[1],this.vertices[3],this.vertices[7],this.vertices[4]),ia.fromPoints(this.planes[2],this.vertices[6],this.vertices[7],this.vertices[3]),ia.fromPoints(this.planes[3],this.vertices[0],this.vertices[4],this.vertices[5]),ia.fromPoints(this.planes[4],this.vertices[2],this.vertices[3],this.vertices[0]),ia.fromPoints(this.planes[0],this.vertices[7],this.vertices[6],this.vertices[5])}}}]),e}();ma.createOrtho=function(){var e=new Mi;return function(t,i,n,r,o,a){var s=i/2,l=n/2;Mi.set(e,s,l,r),Mi.transformMat4(t.vertices[0],e,a),Mi.set(e,-s,l,r),Mi.transformMat4(t.vertices[1],e,a),Mi.set(e,-s,-l,r),Mi.transformMat4(t.vertices[2],e,a),Mi.set(e,s,-l,r),Mi.transformMat4(t.vertices[3],e,a),Mi.set(e,s,l,o),Mi.transformMat4(t.vertices[4],e,a),Mi.set(e,-s,l,o),Mi.transformMat4(t.vertices[5],e,a),Mi.set(e,-s,-l,o),Mi.transformMat4(t.vertices[6],e,a),Mi.set(e,s,-l,o),Mi.transformMat4(t.vertices[7],e,a),ia.fromPoints(t.planes[0],t.vertices[1],t.vertices[6],t.vertices[5]),ia.fromPoints(t.planes[1],t.vertices[3],t.vertices[4],t.vertices[7]),ia.fromPoints(t.planes[2],t.vertices[6],t.vertices[3],t.vertices[7]),ia.fromPoints(t.planes[3],t.vertices[0],t.vertices[5],t.vertices[4]),ia.fromPoints(t.planes[4],t.vertices[2],t.vertices[0],t.vertices[3]),ia.fromPoints(t.planes[0],t.vertices[7],t.vertices[5],t.vertices[6])}}();var va=At({Default:0,Once:1,Loop:2,PingPong:3,ClampForever:4}),ya=function e(){Z(this,e),this.time=0,this.value=0,this.inTangent=0,this.outTangent=0};ni.fastDefine("cc.Keyframe",ya,{time:0,value:0,inTangent:0,outTangent:0});var ga=function(){function e(){Z(this,e),this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}return J(e,[{key:"evaluate",value:function(e){return function(e,t){return e*(e*(e*t[0]+t[1])+t[2])+t[3]}(e-this.time,this.coefficient)}}]),e}();var Aa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Z(this,e),this.keyFrames=void 0,this.preWrapMode=va.Loop,this.postWrapMode=va.Loop,this.cachedKey=void 0,this.keyFrames=t||[].concat(e.defaultKF),this.cachedKey=new ga}return J(e,[{key:"addKey",value:function(e){null==this.keyFrames&&(this.keyFrames=[]),this.keyFrames.push(e)}},{key:"evaluate_slow",value:function(e){var t=e,i=e<0?this.preWrapMode:this.postWrapMode,n=this.keyFrames[0].time,r=this.keyFrames[this.keyFrames.length-1].time;switch(i){case va.Loop:t=Si(e-n,r-n)+n;break;case va.PingPong:t=Ei(e-n,r-n)+n;break;case va.ClampForever:t=pi(e,n,r)}var o=0;if(t>this.keyFrames[0].time)if(t>=this.keyFrames[this.keyFrames.length-1].time)o=this.keyFrames.length-2;else for(var a=0;a<this.keyFrames.length-1;a++)if(t>=this.keyFrames[0].time&&t<=this.keyFrames[a+1].time){o=a;break}var s=this.keyFrames[o],l=this.keyFrames[o+1],c=Ci(s.time,l.time,t),u=l.time-s.time,h=s.outTangent*u,p=l.inTangent*u,f=c*c,_=f*c,d=_-2*f+c,m=_-f,v=-2*_+3*f;return(2*_-3*f+1)*s.value+d*h+m*p+v*l.value}},{key:"evaluate",value:function(e){var t=e,i=e<0?this.preWrapMode:this.postWrapMode,n=this.keyFrames[0].time,r=this.keyFrames[this.keyFrames.length-1].time;switch(i){case va.Loop:t=Si(e-n,r-n)+n;break;case va.PingPong:t=Ei(e-n,r-n)+n;break;case va.ClampForever:t=pi(e,n,r)}if(t>=this.cachedKey.time&&t<this.cachedKey.endTime)return this.cachedKey.evaluate(t);var o=this.findIndex(this.cachedKey,t),a=o+1;return a===this.keyFrames.length&&(a-=1),this.calcOptimizedKey(this.cachedKey,o,a),this.cachedKey.evaluate(t)}},{key:"calcOptimizedKey",value:function(e,t,i){var n=this.keyFrames[t],r=this.keyFrames[i];e.index=t,e.time=n.time,e.endTime=r.time;var o=r.time-n.time,a=r.value-n.value,s=1/(o*o),l=n.outTangent*o,c=r.inTangent*o;e.coefficient[0]=(l+c-a-a)*s/o,e.coefficient[1]=(a+a+a-l-l-c)*s,e.coefficient[2]=n.outTangent,e.coefficient[3]=n.value}},{key:"findIndex",value:function(e,t){var i=e.index;if(-1!==i)if(t>this.keyFrames[i].time)for(var n=0;n<3;n++){var r=i+n;if(r+1<this.keyFrames.length&&this.keyFrames[r+1].time>t)return r}else for(var o=0;o<3;o++){var a=i-o;if(a>=0&&this.keyFrames[a-1].time<=t)return a-1}for(var s=0,l=this.keyFrames.length,c=Math.floor((s+l)/2);l-s>1;)this.keyFrames[c].time>=t?l=c:s=c+1,c=Math.floor((s+l)/2);return s}}]),e}();Aa.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],ni.fastDefine("cc.AnimationCurve",Aa,{preWrapMode:va.Default,postWrapMode:va.Default,keyFrames:[]}),exports.replaceProperty(Ko.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),exports.removeProperty(Zo,"intersect",[{name:"line_quad"}]);var ba=Object.freeze({__proto__:null,distance:En,enums:V,intersect:Zo,line:Ko,plane:ia,ray:Cn,triangle:In,sphere:Fn,aabb:ca,obb:fa,capsule:_a,frustum:ma,Keyframe:ya,AnimationCurve:Aa,get ERaycastMode(){return jr}}),xa=function(){function e(t,i){Z(this,e),this._fn=void 0,this._idx=void 0,this._frees=void 0,this._fn=t,this._idx=i-1,this._frees=new Array(i);for(var n=0;n<i;++n)this._frees[n]=t()}return J(e,[{key:"alloc",value:function(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var e=this._frees[this._idx];return this._frees.splice(this._idx),--this._idx,e}},{key:"free",value:function(e){++this._idx,this._frees[this._idx]=e}},{key:"clear",value:function(e){for(var t=0;t<=this._idx;t++)e&&e(this._frees[t]);this._frees.splice(0),this._idx=-1}},{key:"_expand",value:function(e){var t=this._frees;this._frees=new Array(e);for(var i=e-t.length,n=0;n<i;++n)this._frees[n]=this._fn();for(var r=i,o=0;r<e;++r,++o)this._frees[r]=t[o];this._idx+=i}}]),e}(),Ta=function(){function e(t,i){Z(this,e),this._fn=void 0,this._count=0,this._data=void 0,this._fn=t,this._data=new Array(i);for(var n=0;n<i;++n)this._data[n]=t()}return J(e,[{key:"reset",value:function(){this._count=0}},{key:"resize",value:function(e){if(e>this._data.length)for(var t=this._data.length;t<e;++t)this._data[t]=this._fn()}},{key:"add",value:function(){return this._count>=this._data.length&&this.resize(2*this._data.length),this._data[this._count++]}},{key:"removeAt",value:function(e){if(!(e>=this._count)){var t=this._count-1,i=this._data[e];this._data[e]=this._data[t],this._data[t]=i,this._count-=1}}},{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}]),e}(),Sa=function(){function e(t,i){Z(this,e),this.array=void 0,this.length=0,this._compareFn=void 0,this.array=new Array(t),this.length=0,this._compareFn=void 0!==i?i:function(e,t){return e-t}}return J(e,[{key:"push",value:function(e){this.array[this.length++]=e}},{key:"pop",value:function(){return this.array[--this.length]}},{key:"get",value:function(e){return this.array[e]}},{key:"clear",value:function(){this.length=0}},{key:"sort",value:function(){this.array.length=this.length,this.array.sort(this._compareFn)}},{key:"concat",value:function(e){for(var t=0;t<e.length;++t)this.array[this.length++]=e[t]}},{key:"fastRemove",value:function(e){if(!(e>=this.length||e<0)){var t=--this.length;this.array[e]=this.array[t]}}},{key:"indexOf",value:function(e){return this.array.indexOf(e)}}]),e}(),Ea=Object.freeze({__proto__:null,Pool:xa,RecyclePool:Ta,CachedArray:Sa}),Ca=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûа-яА-ЯЁё]+|\S)/,wa=/^[!,.:;'}\]%\?>、‘“》？。，！]/,ka=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]+|\S)$/,Oa=/[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]+$/,Ra=/^[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]/;function Fa(e){return/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/.test(e)||/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(e)||/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/.test(e)}function Ia(e){var t=e.charCodeAt(0);return t>=9&&t<=13||32===t||133===t||160===t||5760===t||t>=8192&&t<=8202||8232===t||8233===t||8239===t||8287===t||12288===t}function Ma(e,t){var i=e.measureText(t);return i&&i.width||0}function Pa(e,t,i,n){var r=[];if(0===e.length||i<0)return r.push(""),r;for(var o=e;t>i&&o.length>1;){for(var a=o.length*(i/t)|0,s=o.substr(a),l=t-n(s),c=s,u=0,h=0;l>i&&h++<10;)a*=i/l,a|=0,l=t-n(s=o.substr(a));for(h=0;l<=i&&h++<10;){if(s){var p=Ca.exec(s);u=p?p[0].length:1,c=s}a+=u,l=t-n(s=o.substr(a))}0===(a-=u)&&(a=1,c=c.substr(1));var f=o.substr(0,a),_=void 0;wa.test(c||s)&&(0===(a-=(_=ka.exec(f))?_[0].length:0)&&(a=1),c=o.substr(a),f=o.substr(0,a)),Ra.test(c)&&(_=Oa.exec(f))&&f!==_[0]&&(a-=_[0].length,c=o.substr(a),f=o.substr(0,a)),(0===r.length||(f=f.trim()).length>0)&&r.push(f),t=n(o=c||s)}return(0===r.length||(o=o.trim()).length>0)&&r.push(o),r}var Da=/^(click)(\s)*=|(param)(\s)*=/,Ba=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/,Na=function(){function e(){Z(this,e),this._specialSymbolArray=[],this._stack=[],this._resultObjectArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"])}return J(e,[{key:"parse",value:function(e){this._resultObjectArray.length=0,this._stack.length=0;for(var t=0,i=e.length;t<i;){var n=e.indexOf("<",t);if(n<0)this._stack.pop(),this._processResult(e.substring(t)),t=i;else{this._processResult(e.substring(t,n));var r=e.indexOf(">",t);-1===r?r=n:"/"===e.charAt(n+1)?this._stack.pop():this._addToStack(e.substring(n+1,r)),t=r+1}}return this._resultObjectArray}},{key:"_attributeToObject",value:function(e){var t={},i=(e=e.trim()).match(/^(color|size)(\s)*=/),n="",r=0,o="";if(i){if(n=i[0],""===(e=e.substring(n.length).trim()))return t;switch(r=e.indexOf(" "),n[0]){case"c":t.color=r>-1?e.substring(0,r).trim():e;break;case"s":t.size=parseInt(e)}return r>-1&&(o=e.substring(r+1).trim(),t.event=this._processEventHandler(o)),t}if((i=e.match(/^(br(\s)*\/)/))&&i[0].length>0&&(n=i[0].trim()).startsWith("br")&&"/"===n[n.length-1])return t.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),t;var a="";if((i=e.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&i[0].length>0&&(n=i[0].trim()).startsWith("img")&&"/"===n[n.length-1]){var s;i=e.match(Ba);for(var l=!1;i;)n=(e=e.substring(e.indexOf(i[0]))).substr(0,i[0].length),s=(r=(a=e.substring(n.length).trim()).indexOf(" "))>-1?a.substr(0,r):a,n=(n=n.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=a.substring(r).trim(),"src"===n?(t.isImage=!0,s.endsWith("/")&&(s=s.substring(0,s.length-1)),(0===s.indexOf("'")||0===s.indexOf('"'))&&(l=!0,s=s.substring(1,s.length-1)),t.src=s):"height"===n?t.imageHeight=parseInt(s):"width"===n?t.imageWidth=parseInt(s):"click"===n&&(t.event=this._processEventHandler(n+"="+s)),t.event&&"param"===n&&(t.event[n]=s.replace(/^\"|\"$/g,"")),i=e.match(Ba);return l&&t.isImage&&this._resultObjectArray.push({text:"",style:t}),{}}if(i=e.match(/^(outline(\s)*[^>]*)/)){var c={color:"#ffffff",width:1};if(e=i[0].substring("outline".length).trim()){var u,h=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(i=e.match(h);i;)n=(e=e.substring(e.indexOf(i[0]))).substr(0,i[0].length),u=(r=(a=e.substring(n.length).trim()).indexOf(" "))>-1?a.substr(0,r):a,n=(n=n.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=a.substring(r).trim(),"click"===n?t.event=this._processEventHandler(n+"="+u):"color"===n?c.color=u:"width"===n&&(c.width=parseInt(u)),t.event&&"param"===n&&(t.event[n]=u.replace(/^\"|\"$/g,"")),i=e.match(h)}t.outline=c}if((i=e.match(/^(on|u|b|i)(\s)*/))&&i[0].length>0){switch(n=i[0],e=e.substring(n.length).trim(),n[0]){case"u":t.underline=!0;break;case"i":t.italic=!0;break;case"b":t.bold=!0}if(""===e)return t;t.event=this._processEventHandler(e)}return t}},{key:"_processEventHandler",value:function(e){for(var t=0,i=new Map,n=e.match(Da),r=!1;n;){var o=n[0],a="";if(r=!1,'"'===(e=e.substring(o.length).trim()).charAt(0))(t=e.indexOf('"',1))>-1&&(a=e.substring(1,t).trim(),r=!0),t++;else if("'"===e.charAt(0))(t=e.indexOf("'",1))>-1&&(a=e.substring(1,t).trim(),r=!0),t++;else{var s=e.match(/(\S)+/);t=(a=s?s[0]:"").length}r&&(i[o=o.substring(0,o.length-1).trim()]=a),n=(e=e.substring(t).trim()).match(Da)}return i}},{key:"_addToStack",value:function(e){var t=this._attributeToObject(e);if(0===this._stack.length)this._stack.push(t);else{if(t.isNewLine||t.isImage)return;var i=this._stack[this._stack.length-1];for(var n in i)t[n]||(t[n]=i[n]);this._stack.push(t)}}},{key:"_processResult",value:function(e){0!==e.length&&(e=this._escapeSpecialSymbol(e),this._stack.length>0?this._resultObjectArray.push({text:e,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:e}))}},{key:"_escapeSpecialSymbol",value:function(e){for(var t,i=fe(this._specialSymbolArray);!(t=i()).done;){var n=t.value,r=n[0],o=n[1];e=e.replace(r,o)}return e}}]),e}();function La(e){return e}function za(e,t){return e[t]||(e[t]={})}function Ga(e){return function(t){return"function"==typeof t?e(t):function(i){return e(i,t)}}}function Ua(e,t,i){return function(e){return function(i){return t(i,e)}}}var Xa=Ua.bind(null,!1);function Va(e){return Ua.bind(null,!1)}var Ha=Va(),ja=Va();function Wa(e,t){return za(e,"__ccclassCache__")}function Ya(e,t,i,n,r,o){var a;n&&(a=(a=Gt(n))||n);var s=Ue(t[i]||{},a||{});if(r&&(r.get||r.set))r.get&&(s.get=r.get),r.set&&(s.set=r.set);else{var l;if(r)r.initializer&&(l=function(e){var t;try{t=e()}catch(t){return e}return"object"!==Q(t)||null===t?t:e}(r.initializer));else{var c=o.default||(o.default=function(e){var t;try{t=new e}catch(e){return{}}return t}(e));c.hasOwnProperty(i)&&(l=c[i])}s.default=l}t[i]=s}var qa=Ga((function(e,t){var i=Ve(e);i===Object&&(i=null);var n={name:t,extends:i,ctor:e,__ES6__:!0},r=e.__ccclassCache__;if(r){var o=r.proto;o&&Ue(n,o),e.__ccclassCache__=void 0}return cc.Class(n)}));function Qa(e,t,i){var n=null;function r(e,t,i){var r=Wa(e.constructor);if(r){var o=za(r,"proto"),a=za(o,"properties");Ya(e.constructor,a,t,n,i,r)}}return void 0===e?Qa({type:void 0}):void 0===t?(n=e,r):void r(e,t,i)}function Za(e,t,i){return e((function(e,n){var r=Wa(e);if(r){var o=void 0!==i?i:n,a=za(r,"proto");za(a,"editor")[t]=o}}),t)}function Ka(e){return e(La)}var Ja=Ka(Ga),$a=Za(Xa,"requireComponent"),es=Ka(Ha),ts=Za(ja,"executionOrder"),is=Ka(Ga),ns=Ka(Ga),rs=Ka(Ha),os=Ka(Ha),as=Ka(Ha),ss=hs(Rt),ls=hs(Ft),cs=hs(It),us=hs(Mt);function hs(e){return Qa({type:e})}var ps,fs,_s,ds,ms,vs,ys,gs=Object.freeze({__proto__:null,ccclass:qa,property:Qa,executeInEditMode:Ja,requireComponent:$a,menu:es,executionOrder:ts,disallowMultiple:is,playOnFocus:ns,inspector:rs,icon:os,help:as,integer:ss,float:ls,boolean:cs,string:us,type:hs}),As=qa("cc.PrefabInfo")((_s=de((fs=function e(){Z(this,e),_e(this,"root",_s,this),_e(this,"asset",ds,this),_e(this,"fileId",ms,this),_e(this,"sync",vs,this),_e(this,"_synced",ys,this)}).prototype,"root",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ds=de(fs.prototype,"asset",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ms=de(fs.prototype,"fileId",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vs=de(fs.prototype,"sync",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ys=de(fs.prototype,"_synced",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{default:!1,serializable:!1}}}),ps=fs))||ps;cc._PrefabInfo=As;var bs,xs="undefined"==typeof window?global:window;!function(e){e[e.NONE=0]="NONE",e[e.LAN=1]="LAN",e[e.WWAN=2]="WWAN"}(bs||(bs={}));var Ts,Ss,Es,Cs,ws={NetworkType:bs,LANGUAGE_ENGLISH:"en",LANGUAGE_CHINESE:"zh",LANGUAGE_FRENCH:"fr",LANGUAGE_ITALIAN:"it",LANGUAGE_GERMAN:"de",LANGUAGE_SPANISH:"es",LANGUAGE_DUTCH:"du",LANGUAGE_RUSSIAN:"ru",LANGUAGE_KOREAN:"ko",LANGUAGE_JAPANESE:"ja",LANGUAGE_HUNGARIAN:"hu",LANGUAGE_PORTUGUESE:"pt",LANGUAGE_ARABIC:"ar",LANGUAGE_NORWEGIAN:"no",LANGUAGE_POLISH:"pl",LANGUAGE_TURKISH:"tr",LANGUAGE_UKRAINIAN:"uk",LANGUAGE_ROMANIAN:"ro",LANGUAGE_BULGARIAN:"bg",LANGUAGE_UNKNOWN:"unknown",OS_IOS:"iOS",OS_ANDROID:"Android",OS_WINDOWS:"Windows",OS_LINUX:"Linux",OS_OSX:"OS X",OS_UNKNOWN:"Unknown",UNKNOWN:-1,WIN32:0,LINUX:1,MACOS:2,ANDROID:3,IPHONE:4,IPAD:5,BLACKBERRY:6,NACL:7,EMSCRIPTEN:8,TIZEN:9,WINRT:10,WP8:11,MOBILE_BROWSER:100,DESKTOP_BROWSER:101,EDITOR_PAGE:102,EDITOR_CORE:103,WECHAT_GAME:104,QQ_PLAY:105,BROWSER_TYPE_WECHAT:"wechat",BROWSER_TYPE_WECHAT_GAME:"wechatgame",BROWSER_TYPE_ALIPAY_GAME:"alipaygame",BROWSER_TYPE_XIAOMI_GAME:"xiaomiquickgame",BROWSER_TYPE_BAIDU_GAME:"baidugame",BROWSER_TYPE_COCOSPLAY:"cocosplay",BROWSER_TYPE_ANDROID:"androidbrowser",BROWSER_TYPE_IE:"ie",BROWSER_TYPE_QQ:"qqbrowser",BROWSER_TYPE_MOBILE_QQ:"mqqbrowser",BROWSER_TYPE_UC:"ucbrowser",BROWSER_TYPE_UCBS:"ucbs",BROWSER_TYPE_360:"360browser",BROWSER_TYPE_BAIDU_APP:"baiduboxapp",BROWSER_TYPE_BAIDU:"baidubrowser",BROWSER_TYPE_MAXTHON:"maxthon",BROWSER_TYPE_OPERA:"opera",BROWSER_TYPE_OUPENG:"oupeng",BROWSER_TYPE_MIUI:"miuibrowser",BROWSER_TYPE_FIREFOX:"firefox",BROWSER_TYPE_SAFARI:"safari",BROWSER_TYPE_CHROME:"chrome",BROWSER_TYPE_LIEBAO:"liebao",BROWSER_TYPE_QZONE:"qzone",BROWSER_TYPE_SOUGOU:"sogou",BROWSER_TYPE_UNKNOWN:"unknown",isNative:!1,isBrowser:"object"===("undefined"==typeof window?"undefined":Q(window))&&"object"===("undefined"==typeof document?"undefined":Q(document))&&!1,isMobile:!1,isLittleEndian:(Ts=new ArrayBuffer(2),new DataView(Ts).setInt16(0,256,!0),256===new Int16Array(Ts)[0]),platform:-1,language:"unknown",os:"Unknown",osVersion:"",osMainVersion:0,browserType:"unknown",browserVersion:"",windowPixelResolution:null,capabilities:null,localStorage:null,__audioSupport:null,getNetworkType:function(){return bs.LAN},getBatteryLevel:function(){return 1},garbageCollect:function(){},isObjectValid:function(e){return null!=e},dump:function(){var e="";e+="isMobile : "+this.isMobile+"\r\n",e+="language : "+this.language+"\r\n",e+="browserType : "+this.browserType+"\r\n",e+="browserVersion : "+this.browserVersion+"\r\n",e+="capabilities : "+JSON.stringify(this.capabilities)+"\r\n",e+="os : "+this.os+"\r\n",e+="osVersion : "+this.osVersion+"\r\n",e+="platform : "+this.platform+"\r\n",e+="Using "+(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n",cc.log(e)},openURL:function(e){window.open(e)},now:function(){return Date.now?Date.now():+new Date},dumpRoot:function(){},restartVM:function(){},cleanScript:function(e){}};if(xs.__globalAdapter&&xs.__globalAdapter.adaptSys)xs.__globalAdapter.adaptSys(ws);else{var ks=window,Os=ks.navigator,Rs=document,Fs=Rs.documentElement,Is=Os.userAgent.toLowerCase();ws.isMobile=/mobile|android|iphone|ipad/.test(Is),ws.platform=ws.isMobile?ws.MOBILE_BROWSER:ws.DESKTOP_BROWSER;var Ms=Os.language;Ms=(Ms=Ms||Os.browserLanguage)?Ms.split("-")[0]:ws.LANGUAGE_ENGLISH,ws.language=Ms;var Ps=!1,Ds=!1,Bs="",Ns=0,Ls=/android\s*(\d+(?:\.\d+)*)/i.exec(Is)||/android\s*(\d+(?:\.\d+)*)/i.exec(Os.platform);Ls&&(Ps=!0,Bs=Ls[1]||"",Ns=parseInt(Bs)||0),(Ls=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(Is))?(Ds=!0,Bs=Ls[2]||"",Ns=parseInt(Bs)||0):(/(iPhone|iPad|iPod)/.exec(Os.platform)||"MacIntel"===Os.platform&&Os.maxTouchPoints&&Os.maxTouchPoints>1)&&(Ds=!0,Bs="",Ns=0);var zs=ws.OS_UNKNOWN;-1!==Os.appVersion.indexOf("Win")?zs=ws.OS_WINDOWS:Ds?zs=ws.OS_IOS:-1!==Os.appVersion.indexOf("Mac")?zs=ws.OS_OSX:-1!==Os.appVersion.indexOf("X11")&&-1===Os.appVersion.indexOf("Linux")?zs=ws.OS_UNIX:Ps?zs=ws.OS_ANDROID:-1===Os.appVersion.indexOf("Linux")&&-1===Is.indexOf("ubuntu")||(zs=ws.OS_LINUX),ws.os=zs,ws.osVersion=Bs,ws.osMainVersion=Ns,ws.browserType=ws.BROWSER_TYPE_UNKNOWN,function(){var e=/mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(Is);e||(e=/qqbrowser|ucbrowser/i.exec(Is)),e||(e=/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(Is));var t=e?e[0].toLowerCase():ws.BROWSER_TYPE_UNKNOWN;t=ws.BROWSER_TYPE_WECHAT_GAME,ws.browserType=t}(),ws.browserVersion="",function(){var e=Is.match(/(mqqbrowser|micromessenger|qq|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui)(mobile)?(browser)?\/?([\d.]+)/i);e||(e=Is.match(/(qqbrowser|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i)),ws.browserVersion=e?e[4]:""}();var Gs=window.innerWidth||document.documentElement.clientWidth,Us=window.innerHeight||document.documentElement.clientHeight,Xs=window.devicePixelRatio||1;ws.windowPixelResolution={width:Xs*Gs,height:Xs*Us};var Vs=document.createElement("canvas");try{var Hs=ws.localStorage=ks.localStorage;Hs.setItem("storage",""),Hs.removeItem("storage"),Hs=null}catch(bn){var js=function(){cc.warnID(5200)};ws.localStorage={getItem:js,setItem:js,removeItem:js,clear:js}}var Ws=Vs.toDataURL("image/webp").startsWith("data:image/webp"),Ys=!!Vs.getContext("2d"),qs=!1;if(ws.browserType===ws.BROWSER_TYPE_WECHAT_GAME)qs=!0;else if(ks.WebGLRenderingContext&&(function e(t,i,n){if(!n)return e(t,i,"webgl")||e(t,i,"experimental-webgl")||e(t,i,"webkit-3d")||e(t,i,"moz-webgl")||null;try{return t.getContext(n,i)}catch(e){return null}}(document.createElement("CANVAS"))&&(qs=!0),qs&&ws.os===ws.OS_ANDROID)){var Qs=parseFloat(ws.browserVersion);switch(ws.browserType){case ws.BROWSER_TYPE_MOBILE_QQ:case ws.BROWSER_TYPE_BAIDU:case ws.BROWSER_TYPE_BAIDU_APP:qs=Qs>=6.2;break;case ws.BROWSER_TYPE_ANDROID:ws.osMainVersion&&ws.osMainVersion>=5&&(qs=!0);break;case ws.BROWSER_TYPE_CHROME:qs=Qs>=30;break;case ws.BROWSER_TYPE_UC:qs=Qs>11;break;case ws.BROWSER_TYPE_360:qs=!1}}var Zs,Ks=ws.capabilities={canvas:Ys,opengl:qs,webp:Ws};(void 0!==Fs.ontouchstart||void 0!==Rs.ontouchstart||Os.msPointerEnabled)&&(Ks.touches=!0),void 0!==Fs.onmouseup&&(Ks.mouse=!0),void 0!==Fs.onkeyup&&(Ks.keyboard=!0),(ks.DeviceMotionEvent||ks.DeviceOrientationEvent)&&(Ks.accelerometer=!0),Es=ws.browserType!==ws.BROWSER_TYPE_WECHAT_GAME&&!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),Zs={ONLY_ONE:!1,WEB_AUDIO:Es,DELAY_CREATE_CTX:!1},ws.os===ws.OS_IOS&&(Zs.USE_LOADER_EVENT="loadedmetadata"),ws.browserType===ws.BROWSER_TYPE_FIREFOX&&(Zs.DELAY_CREATE_CTX=!0,Zs.USE_LOADER_EVENT="canplay"),ws.os===ws.OS_ANDROID&&ws.browserType===ws.BROWSER_TYPE_UC&&(Zs.ONE_SOURCE=!0);try{Zs.WEB_AUDIO&&(Zs._context=null,Object.defineProperty(Zs,"context",{get:function(){return this._context?this._context:this._context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}}))}catch(h){Zs.WEB_AUDIO=!1,cc.logID(5201)}var Js=[];(Ss=document.createElement("audio")).canPlayType&&(Ss.canPlayType('audio/ogg; codecs="vorbis"')&&Js.push(".ogg"),Ss.canPlayType("audio/mpeg")&&Js.push(".mp3"),Ss.canPlayType('audio/wav; codecs="1"')&&Js.push(".wav"),Ss.canPlayType("audio/mp4")&&Js.push(".mp4"),Ss.canPlayType("audio/x-m4a")&&Js.push(".m4a")),Zs.format=Js,ws.__audioSupport=Zs}cc.sys=ws;var $s=($(Cs={},exports.GFXFormatType.UNORM,"Uint"),$(Cs,exports.GFXFormatType.SNORM,"Int"),$(Cs,exports.GFXFormatType.UINT,"Uint"),$(Cs,exports.GFXFormatType.INT,"Int"),$(Cs,exports.GFXFormatType.UFLOAT,"Float"),$(Cs,exports.GFXFormatType.FLOAT,"Float"),$(Cs,"default","Uint"),Cs);function el(e){return($s[e.type]||$s.default)+e.size/e.count*8}function tl(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:exports.GFXFormat.R32F,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=yr[i];r||(r=o.size);for(var a="set"+el(o),s=o.size/o.count,l=Math.floor(t.length/o.count),c=ws.isLittleEndian,u=0;u<l;++u)for(var h=n+r*u,p=0;p<o.count;++p){var f=h+s*p;e[a](f,t[o.count*u+p],c)}}function il(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:exports.GFXFormat.R32F,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength-i,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=yr[t];r||(r=a.size);for(var s="get"+el(a),l=a.size/a.count,c=Math.floor(n/r),u=ws.isLittleEndian,h=0;h<c;++h)for(var p=i+r*h,f=0;f<a.count;++f){var _=p+l*f;o[a.count*h+f]=e[s](_,u)}return o}function nl(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:exports.GFXFormat.R32F,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.byteLength-n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;a||(a=new DataView(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)));var s=yr[i];o||(o=s.size);for(var l="set"+el(s),c="get"+el(s),u=s.size/s.count,h=Math.floor(r/o),p=ws.isLittleEndian,f=0;f<h;++f)for(var _=n+o*f,d=0;d<s.count;++d){var m=_+u*d,v=e[c](m,p);a[l](m,t(v,d,e),p)}return a}var rl=function(){function e(){Z(this,e),this._arrayBufferOrPaddings=[],this._length=0}return J(e,[{key:"setNextAlignment",value:function(e){if(0!==e){var t=this._length%e;if(0!==t){var i=e-t;this._arrayBufferOrPaddings.push(i),this._length+=i}}}},{key:"addBuffer",value:function(e){var t=this._length;return this._arrayBufferOrPaddings.push(e),this._length+=e.byteLength,t}},{key:"getLength",value:function(){return this._length}},{key:"getCombined",value:function(){var e=new Uint8Array(this._length),t=0;return this._arrayBufferOrPaddings.forEach((function(i){"number"==typeof i?t+=i:(e.set(new Uint8Array(i),t),t+=i.byteLength)})),e.buffer}}]),e}(),ol=String.prototype.charCodeAt;function al(e){return this[e]}function sl(e,t){for(var i=e.length,n=t^i,r=0,o="string"==typeof e?ol:al;i>=4;){var a=255&o.call(e,r)|(255&o.call(e,++r))<<8|(255&o.call(e,++r))<<16|(255&o.call(e,++r))<<24;a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),i-=4,++r}switch(i){case 3:n^=(255&o.call(e,r+2))<<16;case 2:n^=(255&o.call(e,r+1))<<8;case 1:n=1540483477*(65535&(n^=255&o.call(e,r)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}var ll=function(){function e(t,i){Z(this,e),this.type=void 0,this.bubbles=void 0,this.target=null,this.currentTarget=null,this.eventPhase=0,this.propagationStopped=!1,this.propagationImmediateStopped=!1,this.type=t,this.bubbles=!!i}return J(e,[{key:"unuse",value:function(){this.type=e.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=e.NONE,this.propagationStopped=!1,this.propagationImmediateStopped=!1}},{key:"reuse",value:function(e,t){this.type=e,this.bubbles=t||!1}},{key:"isStopped",value:function(){return this.propagationStopped||this.propagationImmediateStopped}},{key:"getCurrentTarget",value:function(){return this.currentTarget}},{key:"getType",value:function(){return this.type}}]),e}();ll.NO_TYPE="no_type",ll.TOUCH="touch",ll.MOUSE="mouse",ll.KEYBOARD="keyboard",ll.ACCELERATION="acceleration",ll.NONE=0,ll.CAPTURING_PHASE=1,ll.AT_TARGET=2,ll.BUBBLING_PHASE=3,cc.Event=ll;var cl=[];var ul=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Z(this,e),this._objFlags=void 0,this._name=void 0,this._name=t,this._objFlags=0}return J(e,null,[{key:"_deferredDestroy",value:function(){for(var e=cl.length,t=0;t<e;++t){var i=cl[t];1&i._objFlags||i._destroyImmediate()}e===cl.length?cl.length=0:cl.splice(0,e)}}]),J(e,[{key:"destroy",value:function(){return 1&this._objFlags?(g(5e3),!1):!(4&this._objFlags)&&(this._objFlags|=4,cl.push(this),!0)}},{key:"_destruct",value:function(){var e=this.constructor,t=e.__destruct__;t||(t=function(e,t){var i,n=e instanceof cc._BaseNode||e instanceof cc.Component,r=n?"_id":null,o={};for(i in e)if(e.hasOwnProperty(i)){if(i===r)continue;switch(Q(e[i])){case"string":o[i]="";break;case"object":case"function":o[i]=null}}if(ni._isCCClass(t))for(var a=cc.Class.Attr.getClassAttrs(t),s=t.__props__,l=0;l<s.length;l++){var c=(i=s[l])+cc.Class.Attr.DELIMETER+"default";if(c in a){if(n&&"_id"===i)continue;switch(Q(a[c])){case"string":o[i]="";break;case"object":case"function":o[i]=null;break;case"undefined":o[i]=void 0}}}return function(e){for(var t in o)e[t]=o[t]}}(this,e),Ce(e,"__destruct__",t,!0)),t(this)}},{key:"_destroyImmediate",value:function(){1&this._objFlags?b(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"isValid",get:function(){return!(1&this._objFlags)}}]),e}(),hl=ul.prototype;function pl(e,t){return"object"===Q(e)?!(!e||e._objFlags&(t?5:1)):void 0!==e}hl._deserialize=null,hl._onPreDestroy=null,ni.fastDefine("cc.Object",ul,{_name:"",_objFlags:0}),Ce(ul,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),cc.isValid=pl,cc.Object=ul;var fl=tt.fastRemoveAt;function _l(){}var dl=function(){function e(){Z(this,e),this.callback=_l,this.target=void 0,this.once=!1}return J(e,[{key:"set",value:function(e,t,i){this.callback=e||_l,this.target=t,this.once=!!i}},{key:"reset",value:function(){this.target=void 0,this.callback=_l,this.once=!1}},{key:"check",value:function(){return!(this.target instanceof ul&&!pl(this.target,!0))}}]),e}(),ml=new xa((function(){return new dl}),32),vl=function(){function e(){Z(this,e),this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}return J(e,[{key:"removeByCallback",value:function(e){for(var t=0;t<this.callbackInfos.length;++t){var i=this.callbackInfos[t];i&&i.callback===e&&(i.reset(),ml.free(i),fl(this.callbackInfos,t),--t)}}},{key:"removeByTarget",value:function(e){for(var t=0;t<this.callbackInfos.length;++t){var i=this.callbackInfos[t];i&&i.target===e&&(i.reset(),ml.free(i),fl(this.callbackInfos,t),--t)}}},{key:"cancel",value:function(e){var t=this.callbackInfos[e];t&&(t.reset(),this.isInvoking?this.callbackInfos[e]=null:fl(this.callbackInfos,e),ml.free(t)),this.containCanceled=!0}},{key:"cancelAll",value:function(){for(var e=0;e<this.callbackInfos.length;e++){var t=this.callbackInfos[e];t&&(t.reset(),ml.free(t),this.callbackInfos[e]=null)}this.containCanceled=!0}},{key:"purgeCanceled",value:function(){for(var e=this.callbackInfos.length-1;e>=0;--e){this.callbackInfos[e]||fl(this.callbackInfos,e)}this.containCanceled=!1}},{key:"clear",value:function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1}}]),e}(),yl=new xa((function(){return new vl}),16),gl=function(){function e(){Z(this,e),this._callbackTable=Re(!0)}return J(e,[{key:"on",value:function(e,t,i,n){if(!this.hasEventListener(e,t,i)){var r=this._callbackTable[e];r||(r=this._callbackTable[e]=yl.alloc());var o=ml.alloc();o.set(t,i,n),r.callbackInfos.push(o)}return t}},{key:"hasEventListener",value:function(e,t,i){var n=this._callbackTable[e];if(!n)return!1;var r=n.callbackInfos;if(!t){if(n.isInvoking){for(var o=0;o<r.length;++o)if(r[o])return!0;return!1}return r.length>0}for(var a=0;a<r.length;++a){var s=r[a];if(s&&s.check()&&s.callback===t&&s.target===i)return!0}return!1}},{key:"removeAll",value:function(e){if("string"==typeof e){var t=this._callbackTable[e];t&&(t.isInvoking?t.cancelAll():(t.clear(),yl.free(t),delete this._callbackTable[e]))}else if(e)for(var i in this._callbackTable){var n=this._callbackTable[i];if(n.isInvoking)for(var r=n.callbackInfos,o=0;o<r.length;++o){var a=r[o];a&&a.target===e&&n.cancel(o)}else n.removeByTarget(e)}}},{key:"off",value:function(e,t,i){var n=this._callbackTable[e];if(n){var r=n.callbackInfos;if(t)for(var o=0;o<r.length;++o){var a=r[o];if(a&&a.callback===t&&a.target===i){n.cancel(o);break}}else this.removeAll(e)}}},{key:"emit",value:function(e,t,i,n,r,o){var a=this._callbackTable[e];if(a){var s=!a.isInvoking;a.isInvoking=!0;for(var l=a.callbackInfos,c=0,u=l.length;c<u;++c){var h=l[c];if(h){var p=h.callback,f=h.target;h.once&&this.off(e,p,f),h.check()?f?p.call(f,t,i,n,r,o):p(t,i,n,r,o):this.off(e,p,f)}}s&&(a.isInvoking=!1,a.containCanceled&&a.purgeCanceled())}}},{key:"clear",value:function(){for(var e in this._callbackTable){var t=this._callbackTable[e];t&&(t.clear(),yl.free(t),delete this._callbackTable[e])}}}]),e}();function Al(e){var t=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._callbackTable=Re(!0),i}return ee(t,e),J(t,[{key:"once",value:function(e,t,i){return this.on(e,t,i,!0)}},{key:"targetOff",value:function(e){this.removeAll(e)}}]),t}(e),i=Object.getOwnPropertyDescriptors(gl.prototype);for(var n in i)n in t.prototype||Object.defineProperty(t.prototype,n,i[n]);return t}var bl,xl=Al((function e(){Z(this,e)}));cc.EventTarget=xl;var Tl,Sl,El,Cl,wl,kl,Ol,Rl=qa("cc.RawAsset")(bl=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._uuid=void 0,Object.defineProperty(ne(i),"_uuid",{value:"",writable:!0}),i}return ee(t,ul),J(t,null,[{key:"isRawAssetType",value:function(e){return He(e,cc.RawAsset)&&!He(e,cc.Asset)}}]),t}())||bl;cc.RawAsset=Rl;var Fl,Il,Ml,Pl,Dl,Bl,Nl,Ll,zl,Gl,Ul=(Tl=qa("cc.Asset"),Sl=Qa({visible:!1}),Tl((Ol=kl=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).loaded=!0,_e(i,"_native",wl,ne(i)),i._file=null,i}return ee(t,Al(Rl)),J(t,[{key:"toString",value:function(){return this.nativeUrl}},{key:"serialize",value:function(){}},{key:"_setRawAsset",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._native=!1!==t?e||"":"/"+e}},{key:"nativeUrl",get:function(){if(this._native){var e=this._native;if(47===e.charCodeAt(0))return e.slice(1);if(cc.AssetLibrary){var t=cc.AssetLibrary.getLibUrlNoExt(this._uuid,!0);return 46===e.charCodeAt(0)?t+e:t+"/"+e}cc.errorID(6400)}return""}},{key:"_nativeAsset",get:function(){return this._file},set:function(e){this._file=e}}],[{key:"deserialize",value:function(e){return cc.deserialize(e)}}]),t}(),kl.preventDeferredLoadDependents=!1,kl.preventPreloadNativeObject=!1,wl=de((Cl=Ol).prototype,"_native",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de(Cl.prototype,"nativeUrl",[Sl],Object.getOwnPropertyDescriptor(Cl.prototype,"nativeUrl"),Cl.prototype),de(Cl.prototype,"_nativeAsset",[Qa],Object.getOwnPropertyDescriptor(Cl.prototype,"_nativeAsset"),Cl.prototype),El=Cl))||El);Ul.prototype.createNode=null,cc.Asset=Ul,function(e){e[e.RGB565=exports.GFXFormat.R5G6B5]="RGB565",e[e.RGB5A1=exports.GFXFormat.RGB5A1]="RGB5A1",e[e.RGBA4444=exports.GFXFormat.RGBA4]="RGBA4444",e[e.RGB888=exports.GFXFormat.RGB8]="RGB888",e[e.RGB32F=exports.GFXFormat.RGB32F]="RGB32F",e[e.RGBA8888=exports.GFXFormat.RGBA8]="RGBA8888",e[e.RGBA32F=exports.GFXFormat.RGBA32F]="RGBA32F",e[e.A8=exports.GFXFormat.A8]="A8",e[e.I8=exports.GFXFormat.L8]="I8",e[e.AI8=exports.GFXFormat.LA8]="AI8",e[e.RGB_PVRTC_2BPPV1=exports.GFXFormat.PVRTC_RGB2]="RGB_PVRTC_2BPPV1",e[e.RGBA_PVRTC_2BPPV1=exports.GFXFormat.PVRTC_RGBA2]="RGBA_PVRTC_2BPPV1",e[e.RGB_PVRTC_4BPPV1=exports.GFXFormat.PVRTC_RGB4]="RGB_PVRTC_4BPPV1",e[e.RGBA_PVRTC_4BPPV1=exports.GFXFormat.PVRTC_RGBA4]="RGBA_PVRTC_4BPPV1",e[e.RGB_ETC1=exports.GFXFormat.ETC_RGB8]="RGB_ETC1",e[e.RGB_ETC2=exports.GFXFormat.ETC2_RGB8]="RGB_ETC2",e[e.RGBA_ETC2=exports.GFXFormat.ETC2_RGBA8]="RGBA_ETC2"}(Fl||(Fl={})),function(e){e[e.REPEAT=exports.GFXAddress.WRAP]="REPEAT",e[e.CLAMP_TO_EDGE=exports.GFXAddress.CLAMP]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=exports.GFXAddress.MIRROR]="MIRRORED_REPEAT",e[e.CLAMP_TO_BORDER=exports.GFXAddress.BORDER]="CLAMP_TO_BORDER"}(Il||(Il={})),function(e){e[e.NONE=exports.GFXFilter.NONE]="NONE",e[e.LINEAR=exports.GFXFilter.LINEAR]="LINEAR",e[e.NEAREST=exports.GFXFilter.POINT]="NEAREST"}(Ml||(Ml={})),function(e){e[e.NONE=exports.GFXFormat.UNKNOWN]="NONE",e[e.DEPTH_16=exports.GFXFormat.D16]="DEPTH_16",e[e.DEPTH_24=exports.GFXFormat.D24]="DEPTH_24",e[e.DEPTH_32=exports.GFXFormat.D32F]="DEPTH_32",e[e.DEPTH_16_STENCIL_8=exports.GFXFormat.D16S8]="DEPTH_16_STENCIL_8",e[e.DEPTH_24_STENCIL_8=exports.GFXFormat.D24S8]="DEPTH_24_STENCIL_8",e[e.DEPTH_32_STENCIL_8=exports.GFXFormat.D32F_S8]="DEPTH_32_STENCIL_8"}(Pl||(Pl={}));var Xl,Vl=(Dl=qa("cc.ImageAsset"),Bl=Qa({override:!0}),Dl((Gl=zl=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this)))._nativeData=void 0,i._tex=void 0,i._url=void 0,i._exportedExts=void 0,i._format=Fl.RGBA8888,i._width=0,i._height=0,i._url="",i.loaded=!1,i._nativeData={_data:null,width:0,height:0,format:0,_compressed:!1},void 0!==e&&i.reset(e),i}return ee(t,Ul),J(t,[{key:"_nativeAsset",get:function(){return this._nativeData},set:function(e){e instanceof HTMLElement||(e.format=this._format),this.reset(e)}},{key:"data",get:function(){var e=this._nativeData&&this._nativeData._data;return ArrayBuffer.isView(e)?e:this._nativeData}},{key:"width",get:function(){return this._nativeData.width||this._width}},{key:"height",get:function(){return this._nativeData.height||this._height}},{key:"format",get:function(){return this._format}},{key:"isCompressed",get:function(){return this._format>=Fl.RGB_ETC1&&this._format<=Fl.RGBA_PVRTC_4BPPV1}},{key:"url",get:function(){return this._url}},{key:"_texture",set:function(e){this._tex=e},get:function(){if(!this._tex){var e=new cc.Texture2D;e.name=this._url,e.image=this,this._tex=e}return this._tex}}]),J(t,[{key:"reset",value:function(e){e instanceof HTMLElement?(this._nativeData=e,this._onDataComplete()):(this._nativeData=e,this._format=e.format,this._onDataComplete())}},{key:"destroy",value:function(){return this.data&&this.data instanceof HTMLImageElement&&(this.data.src="",this._setRawAsset(""),cc.loader.removeItem(this.data.id)),ae(te(t.prototype),"destroy",this).call(this)}},{key:"_serialize",value:function(){var e=this._exportedExts;if(!e&&this._native&&(e=[this._native]),!e)return"";for(var i,n=[],r=fe(e);!(i=r()).done;){var o=i.value,a=o.split("@"),s=t.extnames.indexOf(a[0]),l=s<0?o:"".concat(s);a[1]&&(l+="@"+a[1]),n.push(l)}return{fmt:n.join("_"),w:this.width,h:this.height}}},{key:"_deserialize",value:function(e,i){var n="";"string"==typeof e?n=e:(this._width=e.w,this._height=e.h,n=e.fmt);for(var r,o=cc.director.root?cc.director.root.device:null,a=n.split("_"),s=Number.MAX_VALUE,l=this._format,c="",u=cc.macro.SUPPORT_TEXTURE_FORMATS,h=fe(a);!(r=h()).done;){var p=r.value.split("@"),f=parseInt(p[0],void 0),_=t.extnames[f]||p.join(),d=u.indexOf(_);if(-1!==d&&d<s){var m=p[1]?parseInt(p[1]):this._format;if(!(".pvr"!==_||o&&o.hasFeature(exports.GFXFeature.FORMAT_PVRTC)))continue;if(!(m!==Fl.RGB_ETC1||o&&o.hasFeature(exports.GFXFeature.FORMAT_ETC1)))continue;if(!(m!==Fl.RGB_ETC2&&m!==Fl.RGBA_ETC2||o&&o.hasFeature(exports.GFXFeature.FORMAT_ETC2)))continue;if(".webp"===_&&!cc.sys.capabilities.webp)continue;s=d,c=_,l=m}}c&&(this._setRawAsset(c),this._format=l);var v=i.customEnv,y=v&&v.uuid;y&&(this._uuid=y,this._url=this.nativeUrl)}},{key:"_onDataComplete",value:function(){this.loaded=!0,this.emit("load")}}]),t}(),zl.extnames=[".png",".jpg",".jpeg",".bmp",".webp",".pvr",".pkm"],de((Ll=Gl).prototype,"_nativeAsset",[Bl],Object.getOwnPropertyDescriptor(Ll.prototype,"_nativeAsset"),Ll.prototype),Nl=Ll))||Nl);cc.ImageAsset=Vl,function(e){e[e.minFilter=0]="minFilter",e[e.magFilter=1]="magFilter",e[e.mipFilter=2]="mipFilter",e[e.addressU=3]="addressU",e[e.addressV=4]="addressV",e[e.addressW=5]="addressW",e[e.maxAnisotropy=6]="maxAnisotropy",e[e.cmpFunc=7]="cmpFunc",e[e.minLOD=8]="minLOD",e[e.maxLOD=9]="maxLOD",e[e.mipLODBias=10]="mipLODBias",e[e.total=11]="total"}(Xl||(Xl={}));var Hl=[exports.GFXFilter.LINEAR,exports.GFXFilter.LINEAR,exports.GFXFilter.NONE,exports.GFXAddress.WRAP,exports.GFXAddress.WRAP,exports.GFXAddress.WRAP,8,exports.GFXComparisonFunc.NEVER,0,0,0],jl=ql(Hl),Wl={r:0,g:0,b:0,a:0},Yl={};function ql(e){for(var t=0,i=0,n=0;n<Hl.length;n++)switch(t=e[n]||Hl[n],n){case Xl.minFilter:i|=t;break;case Xl.magFilter:i|=t<<2;break;case Xl.mipFilter:i|=t<<4;break;case Xl.addressU:i|=t<<6;break;case Xl.addressV:i|=t<<8;break;case Xl.addressW:i|=t<<10;break;case Xl.maxAnisotropy:i|=t<<12;break;case Xl.cmpFunc:i|=t<<16;break;case Xl.minLOD:i|=t<<20;break;case Xl.maxLOD:i|=t<<24;break;case Xl.mipLODBias:i|=t<<28}return i}var Ql,Zl,Kl,Jl,$l,ec,tc,ic,nc,rc,oc,ac,sc,lc,uc=new(function(){function e(){Z(this,e),this._cache={}}return J(e,[{key:"getSampler",value:function(e,t){0===t&&(t=jl);var i=this._cache[t];return i||(Yl.minFilter=3&t,Yl.magFilter=t>>2&3,Yl.mipFilter=t>>4&3,Yl.addressU=t>>6&3,Yl.addressV=t>>8&3,Yl.addressW=t>>10&3,Yl.maxAnisotropy=t>>12&15,Yl.cmpFunc=t>>16&15,Yl.minLOD=t>>20&15,Yl.maxLOD=t>>24&15,Yl.mipLODBias=t>>28&15,Yl.borderColor=Wl,this._cache[t]=e.createSampler(Yl))}}]),e}());cc.samplerLib=uc;var hc=new be("Tex"),pc=qa("cc.TextureBase")((lc=sc=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Z(this,t),_e(e=re(this,te(t).call(this)),"_format",Kl,ne(e)),_e(e,"_premultiplyAlpha",Jl,ne(e)),_e(e,"_flipY",$l,ne(e)),_e(e,"_minFilter",ec,ne(e)),_e(e,"_magFilter",tc,ne(e)),_e(e,"_mipFilter",ic,ne(e)),_e(e,"_wrapS",nc,ne(e)),_e(e,"_wrapT",rc,ne(e)),_e(e,"_wrapR",oc,ne(e)),_e(e,"_anisotropy",ac,ne(e)),e._width=0,e._height=0,e._id=void 0,e._samplerInfo=[],e._samplerHash=0,e._gfxSampler=null,e._gfxDevice=null,e._flipY=i,e._id=hc.getNewId(),e.loaded=!1,e._gfxDevice=e._getGFXDevice(),e}return ee(t,Ul),J(t,[{key:"isCompressed",get:function(){return this._format>=Fl.RGB_ETC1&&this._format<=Fl.RGBA_PVRTC_4BPPV1}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),J(t,[{key:"getId",value:function(){return this._id}},{key:"getPixelFormat",value:function(){return this._format}},{key:"hasPremultipliedAlpha",value:function(){return this._premultiplyAlpha||!1}},{key:"getAnisotropy",value:function(){return this._anisotropy}},{key:"setWrapMode",value:function(e,t,i){this._wrapS=e,this._samplerInfo[Xl.addressU]=e,this._wrapT=t,this._samplerInfo[Xl.addressV]=t,void 0!==i&&(this._wrapR=i,this._samplerInfo[Xl.addressW]=i),this._samplerHash=ql(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=uc.getSampler(this._gfxDevice,this._samplerHash))}},{key:"setFilters",value:function(e,t){this._minFilter=e,this._samplerInfo[Xl.minFilter]=e,this._magFilter=t,this._samplerInfo[Xl.magFilter]=t,this._samplerHash=ql(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=uc.getSampler(this._gfxDevice,this._samplerHash))}},{key:"setMipFilter",value:function(e){this._mipFilter=e,this._samplerInfo[Xl.mipFilter]=e,this._samplerInfo[Xl.maxLOD]=e===Ml.NONE?0:15,this._samplerHash=ql(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=uc.getSampler(this._gfxDevice,this._samplerHash))}},{key:"setFlipY",value:function(e){this._flipY=e}},{key:"setPremultiplyAlpha",value:function(e){this._premultiplyAlpha=e}},{key:"setAnisotropy",value:function(e){this._anisotropy=e,this._samplerInfo[Xl.maxAnisotropy]=e,this._samplerHash=ql(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=uc.getSampler(this._gfxDevice,this._samplerHash))}},{key:"destroy",value:function(){return ae(te(t.prototype),"destroy",this).call(this)}},{key:"getGFXTextureView",value:function(){return null}},{key:"getSamplerHash",value:function(){return this._samplerHash}},{key:"getGFXSampler",value:function(){return this._gfxSampler||(this._gfxDevice?this._gfxSampler=uc.getSampler(this._gfxDevice,this._samplerHash):cc.errorID(9302)),this._gfxSampler}},{key:"_serialize",value:function(e){return this._minFilter+","+this._magFilter+","+this._wrapS+","+this._wrapT+","+(this._premultiplyAlpha?1:0)+","+this._mipFilter+","+this._anisotropy+","+(this._flipY?1:0)}},{key:"_deserialize",value:function(e,t){var i=e.split(",");i.unshift(""),i.length>=6&&(this.setFilters(parseInt(i[1]),parseInt(i[2])),this.setWrapMode(parseInt(i[3]),parseInt(i[4])),this._premultiplyAlpha=49===i[5].charCodeAt(0)),i.length>=8&&(this.setMipFilter(parseInt(i[6])),this.setAnisotropy(parseInt(i[7]))),i.length>=9&&(this._flipY=49===i[8].charCodeAt(0))}},{key:"_getGFXDevice",value:function(){return cc.director.root&&cc.director.root.device}},{key:"_getGFXFormat",value:function(){return this._format}},{key:"_setGFXFormat",value:function(e){this._format=void 0===e?Fl.RGBA8888:e}}]),t}(),sc.PixelFormat=Fl,sc.WrapMode=Il,sc.Filter=Ml,Kl=de((Zl=lc).prototype,"_format",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Fl.RGBA8888}}),Jl=de(Zl.prototype,"_premultiplyAlpha",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$l=de(Zl.prototype,"_flipY",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ec=de(Zl.prototype,"_minFilter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ml.LINEAR}}),tc=de(Zl.prototype,"_magFilter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ml.LINEAR}}),ic=de(Zl.prototype,"_mipFilter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ml.NONE}}),nc=de(Zl.prototype,"_wrapS",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Il.REPEAT}}),rc=de(Zl.prototype,"_wrapT",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Il.REPEAT}}),oc=de(Zl.prototype,"_wrapR",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Il.REPEAT}}),ac=de(Zl.prototype,"_anisotropy",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),Ql=Zl))||Ql;pc||(pc={}),cc.TextureBase=pc;var fc,_c={SUPPORT_TEXTURE_FORMATS:[".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],KEY:{none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX:!0,ENABLE_TILEDMAP_CULLING:!0,DIRECTOR_STATS_POSITION:new Oi(0,0),TOUCH_TIMEOUT:5e3,DOWNLOAD_MAX_CONCURRENT:64,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!1,CLEANUP_IMAGE_CACHE:!1,ENABLE_MULTI_TOUCH:!0};cc.macro=_c;var dc=[{buffOffset:0,buffStride:0,buffTexHeight:0,texOffset:{x:0,y:0,z:0},texExtent:{width:1,height:1,depth:1},texSubres:{baseMipLevel:1,levelCount:1,baseArrayLayer:0,layerCount:1}}];function mc(e){return e&&0==(e&e-1)}var vc,yc,gc,Ac,bc,xc=qa("cc.SimpleTexture")(fc=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gfxTexture=null,i._gfxTextureView=null,i._mipmapLevel=1,i}return ee(t,pc),J(t,[{key:"getGFXTexture",value:function(){return this._gfxTexture}},{key:"getGFXTextureView",value:function(){return this._gfxTextureView}},{key:"destroy",value:function(){return this._tryDestroyTexture(),ae(te(t.prototype),"destroy",this).call(this)}},{key:"updateImage",value:function(){this.updateMipmaps(0)}},{key:"updateMipmaps",value:function(){}},{key:"uploadData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._gfxTexture&&!(this._gfxTexture.mipLevel<=t)){var n=this._getGFXDevice();if(n){var r=dc[0];r.texExtent.width=this._gfxTexture.width>>t,r.texExtent.height=this._gfxTexture.height>>t,r.texSubres.baseMipLevel=t,r.texSubres.baseArrayLayer=i,ArrayBuffer.isView(e)?n.copyBuffersToTexture([e],this._gfxTexture,dc):n.copyTexImagesToTexture([e],this._gfxTexture,dc)}}}},{key:"_assignImage",value:function(e,t,i){var n=this,r=function(){var r=e.data;r&&(n.uploadData(r,t,i),n._checkTextureLoaded(),_c.CLEANUP_IMAGE_CACHE&&cc.loader.release(e))};if(e.loaded)r();else{if(e.once("load",(function(){r()})),!this.isCompressed){var o=cc.builtinResMgr.get("black-texture").image;this.uploadData(o.data,t,i)}cc.textureUtil.postLoadImage(e)}}},{key:"_checkTextureLoaded",value:function(){this._textureReady()}},{key:"_textureReady",value:function(){this.loaded=!0,this.emit("load")}},{key:"_setMipmapLevel",value:function(e){this._mipmapLevel=e<1?1:e}},{key:"_getGfxTextureCreateInfo",value:function(e){return null}},{key:"_getGfxTextureViewCreateInfo",value:function(e){return null}},{key:"_tryReset",value:function(){this._tryDestroyTexture();var e=this._getGFXDevice();e&&this._createTexture(e)}},{key:"_createTexture",value:function(e){var t=exports.GFXTextureFlagBit.NONE;this._mipFilter!==Ml.NONE&&function(e,t,i){return!(e.gfxAPI===exports.GFXAPI.WEBGL)||mc(t)&&mc(i)}(e,this._width,this._height)&&(this._mipmapLevel=function(e,t){for(var i=Math.max(e,t),n=0;i;)i>>=1,n++;return n}(this._width,this._height),t=exports.GFXTextureFlagBit.GEN_MIPMAP);var i=this._getGfxTextureCreateInfo({usage:exports.GFXTextureUsageBit.SAMPLED|exports.GFXTextureUsageBit.TRANSFER_DST,format:this._getGFXFormat(),mipLevel:this._mipmapLevel,flags:t});if(i){var n=e.createTexture(i),r=this._getGfxTextureViewCreateInfo({texture:n,format:this._getGFXFormat()});if(r){var o=e.createTextureView(r);o?(this._gfxTexture=n,this._gfxTextureView=o):n.destroy()}else n.destroy()}}},{key:"_tryDestroyTexture",value:function(){this._gfxTexture&&(this._gfxTexture.destroy(),this._gfxTexture=null),this._gfxTextureView&&(this._gfxTextureView.destroy(),this._gfxTextureView=null)}},{key:"mipmapLevel",get:function(){return this._mipmapLevel}}]),t}())||fc;cc.SimpleTexture=xc;var Tc=(vc=qa("cc.Texture2D"),yc=Qa([Vl]),vc((bc=de((Ac=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this,!0)),"_mipmaps",bc,ne(e)),e}return ee(t,xc),J(t,[{key:"mipmaps",get:function(){return this._mipmaps},set:function(e){var t=this;if(this._mipmaps=e,this._setMipmapLevel(this._mipmaps.length),this._mipmaps.length>0){var i=this._mipmaps[0];this.reset({width:i.width,height:i.height,format:i.format,mipmapLevel:this._mipmaps.length}),this._mipmaps.forEach((function(e,i){t._assignImage(e,i)}))}else this.reset({width:0,height:0,mipmapLevel:this._mipmaps.length})}},{key:"image",get:function(){return 0===this._mipmaps.length?null:this._mipmaps[0]},set:function(e){this.mipmaps=e?[e]:[]}}]),J(t,[{key:"initialize",value:function(){this.mipmaps=this._mipmaps}},{key:"onLoaded",value:function(){this.initialize()}},{key:"reset",value:function(e){this._width=e.width,this._height=e.height,this._setGFXFormat(e.format),this._setMipmapLevel(e.mipmapLevel||1),this._tryReset()}},{key:"create",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fl.RGBA8888,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.reset({width:e,height:t,format:i,mipmapLevel:n})}},{key:"toString",value:function(){return 0!==this._mipmaps.length?this._mipmaps[0].url:""}},{key:"updateMipmaps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(!(e>=this._mipmaps.length))for(var i=Math.min(void 0===t?this._mipmaps.length:t,this._mipmaps.length-e),n=0;n<i;++n){var r=e+n;this._assignImage(this._mipmaps[r],r)}}},{key:"getHtmlElementObj",value:function(){return this._mipmaps[0]&&this._mipmaps[0].data instanceof HTMLElement?this._mipmaps[0].data:null}},{key:"destroy",value:function(){return this._mipmaps=[],ae(te(t.prototype),"destroy",this).call(this)}},{key:"description",value:function(){var e=this._mipmaps[0]?this._mipmaps[0].url:"";return"<cc.Texture2D | Name = ".concat(e," | Dimension = ").concat(this.width," x ").concat(this.height,">")}},{key:"releaseTexture",value:function(){this.destroy()}},{key:"_serialize",value:function(e){return{base:ae(te(t.prototype),"_serialize",this).call(this,e),mipmaps:this._mipmaps.map((function(t){return t&&t._uuid?e?EditorExtends.UuidUtils.compressUuid(t._uuid,!0):t._uuid:null}))}}},{key:"_deserialize",value:function(e,i){var n=e;ae(te(t.prototype),"_deserialize",this).call(this,n.base,i),this._mipmaps=new Array(n.mipmaps.length);for(var r=0;r<n.mipmaps.length;++r)if(this._mipmaps[r]=new Vl,n.mipmaps[r]){var o=n.mipmaps[r];i.result.push(this._mipmaps,"".concat(r),o),this._mipmaps[r]._texture=this}}},{key:"_getGfxTextureCreateInfo",value:function(e){return Object.assign({type:exports.GFXTextureType.TEX2D,width:this._width,height:this._height},e)}},{key:"_getGfxTextureViewCreateInfo",value:function(e){return Object.assign({type:exports.GFXTextureViewType.TV2D},e)}},{key:"_checkTextureLoaded",value:function(){for(var e=!0,i=0;i<this._mipmaps.length;++i){if(!this._mipmaps[i].loaded){e=!1;break}}e&&ae(te(t.prototype),"_textureReady",this).call(this)}}]),t}()).prototype,"_mipmaps",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gc=Ac))||gc);cc.Texture2D=Tc;var Sc={NONE:0,IGNORE_RAYCAST:1<<20,GIZMOS:1<<21,EDITOR:1<<22,UI_3D:1<<23,SCENE_GIZMO:1<<24,UI_2D:1<<25,PROFILER:1<<28,DEFAULT:1<<30,ALL:4294967295},Ec=function(){function e(){Z(this,e)}return J(e,null,[{key:"makeMaskInclude",value:function(e){for(var t,i=0,n=fe(e);!(t=n()).done;){i|=t.value}return i}},{key:"makeMaskExclude",value:function(t){return~e.makeMaskInclude(t)}},{key:"addLayer",value:function(t,i){void 0!==i?i>19||i<0?console.warn("maximum layers reached."):(e.Enum[t]=1<<i,e.Enum[i]=t,e.BitMask[t]=1<<i,e.BitMask[i]=t):console.warn("bitNum can't be undefined")}},{key:"deleteLayer",value:function(t){t>19||t<0?console.warn("do not change buildin layers."):(delete e.Enum[e.Enum[t]],delete e.Enum[t],delete e.BitMask[e.BitMask[t]],delete e.BitMask[t])}}]),e}();Ec.Enum=At(Sc),Ec.BitMask=gt(Object.assign({},Sc)),cc.Layers=Ec;var Cc,wc;!function(e){e[e.DEFAULT=100]="DEFAULT"}(Cc||(Cc={})),cc.RenderPassStage=Cc,function(e){e[e.MIN=0]="MIN",e[e.MAX=255]="MAX",e[e.DEFAULT=128]="DEFAULT"}(wc||(wc={}));var kc;!function(e){e[e.UBO_GLOBAL=23]="UBO_GLOBAL",e[e.UBO_SHADOW=22]="UBO_SHADOW",e[e.UBO_LOCAL=21]="UBO_LOCAL",e[e.UBO_FORWARD_LIGHTS=20]="UBO_FORWARD_LIGHTS",e[e.UBO_SKINNING_ANIMATION=19]="UBO_SKINNING_ANIMATION",e[e.UBO_SKINNING_TEXTURE=18]="UBO_SKINNING_TEXTURE",e[e.UBO_UI=17]="UBO_UI",e[e.UBO_MORPH=16]="UBO_MORPH",e[e.UBO_BUILTIN_BINDING_END=15]="UBO_BUILTIN_BINDING_END",e[e.SAMPLER_JOINTS=25]="SAMPLER_JOINTS",e[e.SAMPLER_ENVIRONMENT=26]="SAMPLER_ENVIRONMENT",e[e.SAMPLER_MORPH_POSITION=27]="SAMPLER_MORPH_POSITION",e[e.SAMPLER_MORPH_NORMAL=28]="SAMPLER_MORPH_NORMAL",e[e.SAMPLER_MORPH_TANGENT=29]="SAMPLER_MORPH_TANGENT",e[e.SAMPLER_LIGHTING_MAP=30]="SAMPLER_LIGHTING_MAP",e[e.CUSTUM_UBO_BINDING_END_POINT=e.UBO_BUILTIN_BINDING_END]="CUSTUM_UBO_BINDING_END_POINT",e[e.CUSTOM_SAMPLER_BINDING_START_POINT=31]="CUSTOM_SAMPLER_BINDING_START_POINT"}(kc||(kc={}));var Oc=function(e){return e>=kc.CUSTUM_UBO_BINDING_END_POINT&&e<kc.CUSTOM_SAMPLER_BINDING_START_POINT},Rc=function e(){Z(this,e),this.view=new Float32Array(e.COUNT)};Rc.SIZE=4*(Rc.COUNT=(Rc.AMBIENT_GROUND_OFFSET=(Rc.AMBIENT_SKY_OFFSET=(Rc.MAIN_LIT_COLOR_OFFSET=(Rc.MAIN_LIT_DIR_OFFSET=(Rc.EXPOSURE_OFFSET=(Rc.CAMERA_POS_OFFSET=(Rc.MAT_VIEW_PROJ_INV_OFFSET=(Rc.MAT_VIEW_PROJ_OFFSET=(Rc.MAT_PROJ_INV_OFFSET=(Rc.MAT_PROJ_OFFSET=(Rc.MAT_VIEW_INV_OFFSET=(Rc.MAT_VIEW_OFFSET=(Rc.NATIVE_SIZE_OFFSET=(Rc.SCREEN_SCALE_OFFSET=(Rc.SCREEN_SIZE_OFFSET=(Rc.TIME_OFFSET=0)+4)+4)+4)+4)+16)+16)+16)+16)+16)+16)+4)+4)+4)+4)+4)+4),Rc.BLOCK={binding:kc.UBO_GLOBAL,name:"CCGlobal",members:[{name:"cc_time",type:exports.GFXType.FLOAT4,count:1},{name:"cc_screenSize",type:exports.GFXType.FLOAT4,count:1},{name:"cc_screenScale",type:exports.GFXType.FLOAT4,count:1},{name:"cc_nativeSize",type:exports.GFXType.FLOAT4,count:1},{name:"cc_matView",type:exports.GFXType.MAT4,count:1},{name:"cc_matViewInv",type:exports.GFXType.MAT4,count:1},{name:"cc_matProj",type:exports.GFXType.MAT4,count:1},{name:"cc_matProjInv",type:exports.GFXType.MAT4,count:1},{name:"cc_matViewProj",type:exports.GFXType.MAT4,count:1},{name:"cc_matViewProjInv",type:exports.GFXType.MAT4,count:1},{name:"cc_cameraPos",type:exports.GFXType.FLOAT4,count:1},{name:"cc_exposure",type:exports.GFXType.FLOAT4,count:1},{name:"cc_mainLitDir",type:exports.GFXType.FLOAT4,count:1},{name:"cc_mainLitColor",type:exports.GFXType.FLOAT4,count:1},{name:"cc_ambientSky",type:exports.GFXType.FLOAT4,count:1},{name:"cc_ambientGround",type:exports.GFXType.FLOAT4,count:1}]};var Fc=function e(){Z(this,e),this.view=new Float32Array(e.COUNT)};Fc.SIZE=4*(Fc.COUNT=(Fc.SHADOW_COLOR_OFFSET=(Fc.MAT_LIGHT_PLANE_PROJ_OFFSET=0)+16)+4),Fc.BLOCK={binding:kc.UBO_SHADOW,name:"CCShadow",members:[{name:"cc_matLightPlaneProj",type:exports.GFXType.MAT4,count:1},{name:"cc_shadowColor",type:exports.GFXType.FLOAT4,count:1}]};var Ic={binding:kc.SAMPLER_ENVIRONMENT,name:"cc_environment",type:exports.GFXType.SAMPLER_CUBE,count:1},Mc=new Map,Pc=function e(){Z(this,e),this.view=new Float32Array(e.COUNT)};Pc.SIZE=4*(Pc.COUNT=(Pc.LIGHTINGMAP_UVPARAM=(Pc.MAT_WORLD_IT_OFFSET=(Pc.MAT_WORLD_OFFSET=0)+16)+16)+4),Pc.BLOCK={binding:kc.UBO_LOCAL,name:"CCLocal",members:[{name:"cc_matWorld",type:exports.GFXType.MAT4,count:1},{name:"cc_matWorldIT",type:exports.GFXType.MAT4,count:1},{name:"cc_lightingMapUVParam",type:exports.GFXType.FLOAT4,count:1}]},Mc.set(Pc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Pc.BLOCK});var Dc=function e(){Z(this,e),this.view=new Float32Array(e.COUNT)};Dc.BATCHING_COUNT=10,Dc.MAT_WORLDS_OFFSET=0,Dc.SIZE=4*(Dc.COUNT=16*Dc.BATCHING_COUNT),Dc.BLOCK={binding:kc.UBO_LOCAL,name:"CCLocalBatched",members:[{name:"cc_matWorlds",type:exports.GFXType.MAT4,count:Dc.BATCHING_COUNT}]},Mc.set(Dc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Dc.BLOCK});var Bc=function e(){Z(this,e),this.view=new Float32Array(e.COUNT)};Bc.MAX_SPHERE_LIGHTS=2,Bc.MAX_SPOT_LIGHTS=2,Bc.SIZE=4*(Bc.COUNT=(Bc.SPOT_LIGHT_COLOR_OFFSET=(Bc.SPOT_LIGHT_DIR_OFFSET=(Bc.SPOT_LIGHT_SIZE_RANGE_ANGLE_OFFSET=(Bc.SPOT_LIGHT_POS_OFFSET=(Bc.SPHERE_LIGHT_COLOR_OFFSET=(Bc.SPHERE_LIGHT_SIZE_RANGE_OFFSET=(Bc.SPHERE_LIGHT_POS_OFFSET=0)+4*Bc.MAX_SPHERE_LIGHTS)+4*Bc.MAX_SPHERE_LIGHTS)+4*Bc.MAX_SPOT_LIGHTS)+4*Bc.MAX_SPOT_LIGHTS)+4*Bc.MAX_SPOT_LIGHTS)+4*Bc.MAX_SPOT_LIGHTS)+4*Bc.MAX_SPOT_LIGHTS),Bc.BLOCK={binding:kc.UBO_FORWARD_LIGHTS,name:"CCForwardLight",members:[{name:"cc_sphereLitPos",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPHERE_LIGHTS},{name:"cc_sphereLitSizeRange",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPHERE_LIGHTS},{name:"cc_sphereLitColor",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPHERE_LIGHTS},{name:"cc_spotLitPos",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPOT_LIGHTS},{name:"cc_spotLitSizeRangeAngle",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPOT_LIGHTS},{name:"cc_spotLitDir",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPOT_LIGHTS},{name:"cc_spotLitColor",type:exports.GFXType.FLOAT4,count:Bc.MAX_SPOT_LIGHTS}]},Mc.set(Bc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Bc.BLOCK});var Nc=function e(){Z(this,e)};Nc.SIZE=4*(Nc.COUNT=(Nc.JOINTS_TEXTURE_INFO_OFFSET=0)+4),Nc.BLOCK={binding:kc.UBO_SKINNING_TEXTURE,name:"CCSkinningTexture",members:[{name:"cc_jointTextureInfo",type:exports.GFXType.FLOAT4,count:1}]},Mc.set(Nc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Nc.BLOCK});var Lc=function e(){Z(this,e)};Lc.SIZE=4*(Lc.COUNT=(Lc.JOINTS_ANIM_INFO_OFFSET=0)+4),Lc.BLOCK={binding:kc.UBO_SKINNING_ANIMATION,name:"CCSkinningAnimation",members:[{name:"cc_jointAnimInfo",type:exports.GFXType.FLOAT4,count:1}]},Mc.set(Lc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Lc.BLOCK});var zc=function e(){Z(this,e)};zc.SIZE=4*(zc.COUNT=(zc.JOINTS_OFFSET=0)+360),zc.BLOCK={binding:kc.UBO_SKINNING_TEXTURE,name:"CCSkinning",members:[{name:"cc_joints",type:exports.GFXType.FLOAT4,count:90}]},Mc.set(zc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:zc.BLOCK});var Gc={binding:kc.SAMPLER_JOINTS,name:"cc_jointTexture",type:exports.GFXType.SAMPLER2D,count:1};Mc.set(Gc.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:Gc});var Uc=function e(){Z(this,e)};Uc.MAX_MORPH_TARGET_COUNT=60,Uc.OFFSET_OF_WEIGHTS=0,Uc.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT=(Uc.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH=4*Uc.MAX_MORPH_TARGET_COUNT)+4,Uc.COUNT_BASE_4_BYTES=4*Math.ceil(Uc.MAX_MORPH_TARGET_COUNT/4)+4,Uc.SIZE=4*Uc.COUNT_BASE_4_BYTES,Uc.BLOCK={binding:kc.UBO_MORPH,name:"CCMorph",members:[{name:"cc_displacementWeights",type:exports.GFXType.FLOAT4,count:Uc.MAX_MORPH_TARGET_COUNT/4},{name:"cc_displacementTextureInfo",type:exports.GFXType.FLOAT4,count:1}]},Mc.set(Uc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Uc.BLOCK});var Xc={binding:kc.SAMPLER_MORPH_POSITION,name:"cc_PositionDisplacements",type:exports.GFXType.SAMPLER2D,count:1};Mc.set(Xc.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:Xc});var Vc={binding:kc.SAMPLER_MORPH_NORMAL,name:"cc_NormalDisplacements",type:exports.GFXType.SAMPLER2D,count:1};Mc.set(Vc.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:Vc});var Hc={binding:kc.SAMPLER_LIGHTING_MAP,name:"cc_lightingMap",type:exports.GFXType.SAMPLER2D,count:1};Mc.set(Hc.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:Hc});var jc={binding:kc.SAMPLER_MORPH_TANGENT,name:"cc_TangentDisplacements",type:exports.GFXType.SAMPLER2D,count:1};Mc.set(jc.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:jc});var Wc=Ec.makeMaskExclude([Ec.BitMask.UI_2D,Ec.BitMask.GIZMOS,Ec.BitMask.EDITOR,Ec.BitMask.SCENE_GIZMO,Ec.BitMask.PROFILER]),Yc=Ec.makeMaskExclude([Ec.BitMask.UI_2D,Ec.BitMask.PROFILER]),qc=Ec.Enum.ALL,Qc=Object.freeze({__proto__:null,PIPELINE_FLOW_FORWARD:"ForwardFlow",PIPELINE_FLOW_SMAA:"SMAAFlow",PIPELINE_FLOW_TONEMAP:"ToneMapFlow",get RenderPassStage(){return Cc},get RenderPriority(){return wc},get UniformBinding(){return kc},isBuiltinBinding:Oc,UBOGlobal:Rc,UBOShadow:Fc,UNIFORM_ENVIRONMENT:Ic,localBindingsDesc:Mc,UBOLocal:Pc,INST_MAT_WORLD:"a_matWorld0",UBOLocalBatched:Dc,UBOForwardLight:Bc,JOINT_UNIFORM_CAPACITY:30,UBOSkinningTexture:Nc,UBOSkinningAnimation:Lc,INST_JOINT_ANIM_INFO:"a_jointAnimInfo",UBOSkinning:zc,UniformJointTexture:Gc,UBOMorph:Uc,UniformPositionMorphTexture:Xc,UniformNormalMorphTexture:Vc,UniformLightingMapSampler:Hc,UniformTangentMorphTexture:jc,CAMERA_DEFAULT_MASK:Wc,CAMERA_EDITOR_MASK:Yc,MODEL_ALWAYS_MASK:qc});var Zc,Kc,Jc,$c,eu,tu=function(){function e(t,i){if(Z(this,e),this._mesh=void 0,this._subMeshRenderings=[],this._mesh=t,this._mesh.struct.morph){var n=this._mesh.struct.primitives.length;this._subMeshRenderings=new Array(n).fill(null);for(var r=0;r<n;++r){var o=this._mesh.struct.morph.subMeshMorphs[r];o&&(o.targets.length>Uc.MAX_MORPH_TARGET_COUNT?g(10002,Uc.MAX_MORPH_TARGET_COUNT,o.targets.length):this._subMeshRenderings[r]=new iu(this._mesh,r,this._mesh.struct.morph,i))}}}return J(e,[{key:"createInstance",value:function(){for(var e=this,t=this._mesh.struct.primitives.length,i=new Array(t),n=0;n<t;++n){var r,o;i[n]=null!==(r=null===(o=this._subMeshRenderings[n])||void 0===o?void 0:o.createInstance())&&void 0!==r?r:null}return{setWeights:function(e,t){var n;null===(n=i[e])||void 0===n||n.setWeights(t)},requiredPatches:function(t){var n=e._mesh.struct.morph.subMeshMorphs[t],r=i[t];if(null!==r){var o=[{name:"CC_USE_MORPH",value:!0},{name:"CC_MORPH_TARGET_COUNT",value:n.targets.length}];return n.attributes.includes(exports.GFXAttributeName.ATTR_POSITION)&&o.push({name:"CC_MORPH_TARGET_HAS_POSITION",value:!0}),n.attributes.includes(exports.GFXAttributeName.ATTR_NORMAL)&&o.push({name:"CC_MORPH_TARGET_HAS_NORMAL",value:!0}),n.attributes.includes(exports.GFXAttributeName.ATTR_TANGENT)&&o.push({name:"CC_MORPH_TARGET_HAS_TANGENT",value:!0}),o.push.apply(o,ue(r.requiredPatches())),o}},adaptPipelineState:function(e,t){var n;null===(n=i[e])||void 0===n||n.adaptPipelineState(t)},destroy:function(){for(var e,t=fe(i);!(e=t()).done;){var n=e.value;null==n||n.destroy()}}}}}]),e}(),iu=function(){function e(t,i,n,r){Z(this,e),this._gfxDevice=void 0,this._subMeshMorph=void 0,this._textureInfo=void 0,this._attributes=void 0,this._gfxDevice=r;var o=t.data.buffer,a=n.subMeshMorphs[i];this._subMeshMorph=a,function(e,t,i){e.renderingSubMeshes[t].enableVertexIdChannel(i)}(t,i,r);var s=t.struct.vertexBundles[t.struct.primitives[i].vertexBundelIndices[0]].view.count,l=a.targets.length,c=function(e){return W(Math.ceil(Math.sqrt(e)))}(l+s*l),u=c,h=c;this._textureInfo={width:u,height:h},this._attributes=a.attributes.map((function(e,t){var i=a.targets.length,n={displacements:new Array,targetOffsets:new Array(i).fill(0)};a.targets.forEach((function(e,i){var r,a=e.displacements[t];n.targetOffsets[i]=n.displacements.length,(r=n.displacements).push.apply(r,ue(new Float32Array(o,a.offset,a.count)))}));for(var s=Tc.PixelFormat.RGB32F,l=new Float32Array(3*u*h),c=i,p=3*c,f=0;f<i;++f)l[3*f]=c+n.targetOffsets[f]/3;for(var _=0;_<n.displacements.length;++_)l[p+_]=n.displacements[_];var d=new Vl({width:u,height:h,_data:l,_compressed:!1,format:s}),m=new Tc;m.setFilters(Tc.Filter.NEAREST,Tc.Filter.NEAREST),m.setMipFilter(Tc.Filter.NONE),m.setWrapMode(Tc.WrapMode.CLAMP_TO_EDGE,Tc.WrapMode.CLAMP_TO_EDGE,Tc.WrapMode.CLAMP_TO_EDGE),m.image=d;var v=uc.getSampler(r,m.getSamplerHash());return{name:e,texture:m,sampler:v}}))}return J(e,[{key:"destroy",value:function(){for(var e,t=fe(this._attributes);!(e=t()).done;){var i=e.value;i.texture.destroy(),i.sampler.destroy()}}},{key:"createInstance",value:function(){var e=this,t=new nu(this._gfxDevice,this._subMeshMorph.targets.length);return t.setMorphTextureInfo(this._textureInfo.width,this._textureInfo.height),t.commit(),{setWeights:function(e){t.setWeights(e),t.commit()},requiredPatches:function(){return[{name:"CC_MORPH_TARGET_USE_TEXTURE",value:!0}]},adaptPipelineState:function(i){for(var n,r=i.pipelineLayout.layouts[0],o=fe(e._attributes);!(n=o()).done;){var a=n.value,s=void 0;switch(a.name){case exports.GFXAttributeName.ATTR_POSITION:s=Xc.binding;break;case exports.GFXAttributeName.ATTR_NORMAL:s=Vc.binding;break;case exports.GFXAttributeName.ATTR_TANGENT:s=jc.binding;break;default:u("Unexpected attribute!")}void 0!==s&&(r.bindSampler(s,a.sampler),r.bindTextureView(s,a.texture.getGFXTextureView()))}r.bindBuffer(Uc.BLOCK.binding,t.buffer),r.update()},destroy:function(){}}}}]),e}(),nu=function(){function e(t,i){Z(this,e),this._targetCount=void 0,this._localBuffer=void 0,this._remoteBuffer=void 0,this._targetCount=i,this._localBuffer=new DataView(new ArrayBuffer(Uc.SIZE)),this._remoteBuffer=t.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Uc.SIZE,stride:Uc.SIZE})}return J(e,[{key:"destroy",value:function(){this._remoteBuffer.destroy()}},{key:"setWeights",value:function(e){e.length,this._targetCount;for(var t=0;t<e.length;++t)this._localBuffer.setFloat32(Uc.OFFSET_OF_WEIGHTS+4*t,e[t],cc.sys.isLittleEndian)}},{key:"setMorphTextureInfo",value:function(e,t){this._localBuffer.setFloat32(Uc.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH,e,cc.sys.isLittleEndian),this._localBuffer.setFloat32(Uc.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT,t,cc.sys.isLittleEndian)}},{key:"commit",value:function(){this._remoteBuffer.update(this._localBuffer.buffer,this._localBuffer.byteOffset,this._localBuffer.byteLength)}},{key:"buffer",get:function(){return this._remoteBuffer}}]),e}();function ru(e){switch(e){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array}return Uint8Array}var ou=function(){function e(t,i,n){Z(this,e),this.vertexBuffers=void 0,this.attributes=void 0,this.primitiveMode=void 0,this.indexBuffer=void 0,this.indirectBuffer=void 0,this.mesh=void 0,this.subMeshIdx=void 0,this._flatBuffers=void 0,this._jointMappedBuffers=void 0,this._jointMappedBufferIndices=void 0,this._vertexIdChannel=void 0,this._geometricInfo=void 0,this.vertexBuffers=t,this.attributes=i,this.primitiveMode=n}return J(e,[{key:"geometricInfo",get:function(){if(this._geometricInfo)return this._geometricInfo;if(void 0===this.mesh)return{positions:new Float32Array,indices:new Uint8Array,boundingBox:{min:Mi.ZERO,max:Mi.ZERO}};if(void 0===this.subMeshIdx)return{positions:new Float32Array,indices:new Uint8Array,boundingBox:{min:Mi.ZERO,max:Mi.ZERO}};var e=this.mesh,t=this.subMeshIdx,i=e.readAttribute(t,exports.GFXAttributeName.ATTR_POSITION),n=e.readIndices(t),r=new Mi,o=new Mi,a=this.attributes.find((function(e){return e.name===cc.GFXAttributeName.ATTR_POSITION}));if(a){var s=yr[a.format].count;2===s?(r.set(i[0],i[1],0),o.set(i[0],i[1],0)):(r.set(i[0],i[1],i[2]),o.set(i[0],i[1],i[2]));for(var l=0;l<i.length;l+=s)2===s?(r.x=i[l]>r.x?i[l]:r.x,r.y=i[l+1]>r.y?i[l+1]:r.y,o.x=i[l]<o.x?i[l]:o.x,o.y=i[l+1]<o.y?i[l+1]:o.y):(r.x=i[l]>r.x?i[l]:r.x,r.y=i[l+1]>r.y?i[l+1]:r.y,r.z=i[l+2]>r.z?i[l+2]:r.z,o.x=i[l]<o.x?i[l]:o.x,o.y=i[l+1]<o.y?i[l+1]:o.y,o.z=i[l+2]<o.z?i[l+2]:o.z)}return this._geometricInfo={positions:i,indices:n,boundingBox:{max:r,min:o}},this._geometricInfo}},{key:"flatBuffers",get:function(){if(this._flatBuffers)return this._flatBuffers;var e=this._flatBuffers=[];if(!this.mesh||void 0===this.subMeshIdx)return e;var t=this.mesh,i=0,n=t.struct.primitives[this.subMeshIdx];n.indexView&&(i=n.indexView.count);for(var r,o=fe(n.vertexBundelIndices);!(r=o()).done;){var a=r.value,s=t.struct.vertexBundles[a],l=n.indexView?n.indexView.count:s.view.count,c=s.view.stride,u=c*l,h=new Uint8Array(t.data.buffer,s.view.offset,s.view.length);if(n.indexView){for(var p=new Uint8Array(u),f=t.readIndices(this.subMeshIdx),_=0;_<i;++_)for(var d=_*c,m=f[_]*c,v=0;v<c;++v)p[d+v]=h[m+v];this._flatBuffers.push({stride:c,count:l,buffer:p})}else this._flatBuffers.push({stride:c,count:l,buffer:h})}return this._flatBuffers}},{key:"jointMappedBuffers",get:function(){var e=this;if(this._jointMappedBuffers)return this._jointMappedBuffers;var t=this._jointMappedBuffers=[],i=this._jointMappedBufferIndices=[];if(!this.mesh||void 0===this.subMeshIdx)return this._jointMappedBuffers=this.vertexBuffers;var n,r,o=this.mesh.struct,a=o.primitives[this.subMeshIdx];if(!o.jointMaps||void 0===a.jointMapIndex||!o.jointMaps[a.jointMapIndex])return this._jointMappedBuffers=this.vertexBuffers;for(var s=cc.director.root.device,l=0;l<a.vertexBundelIndices.length;l++){var c=o.vertexBundles[a.vertexBundelIndices[l]];r=0,n=exports.GFXFormat.UNKNOWN;for(var u=0;u<c.attributes.length;u++){var h=c.attributes[u];if(h.name===exports.GFXAttributeName.ATTR_JOINTS){n=h.format;break}r+=yr[h.format].size}n?function(){var u=new Uint8Array(e.mesh.data.buffer,c.view.offset,c.view.length),h=new DataView(u.slice().buffer),p=o.jointMaps[a.jointMapIndex];nl(h,(function(e){return p.indexOf(e)}),n,r,c.view.length,c.view.stride,h);var f=s.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:c.view.length,stride:c.view.stride});f.update(h.buffer),t.push(f),i.push(l)}():t.push(this.vertexBuffers[a.vertexBundelIndices[l]])}return this._vertexIdChannel&&t.push(this._allocVertexIdBuffer(s)),t}}]),J(e,[{key:"destroy",value:function(){for(var e=0;e<this.vertexBuffers.length;e++)this.vertexBuffers[e].destroy();if(this.vertexBuffers.length=0,this.indexBuffer&&(this.indexBuffer.destroy(),this.indexBuffer=void 0),this._jointMappedBuffers&&this._jointMappedBufferIndices){for(var t=0;t<this._jointMappedBufferIndices.length;t++)this._jointMappedBuffers[this._jointMappedBufferIndices[t]].destroy();this._jointMappedBuffers=void 0,this._jointMappedBufferIndices=void 0}this.indirectBuffer&&(this.indirectBuffer.destroy(),this.indirectBuffer=void 0)}},{key:"enableVertexIdChannel",value:function(e){if(!this._vertexIdChannel){var t=this.vertexBuffers.length,i=this.attributes.length,n=this._allocVertexIdBuffer(e);this.vertexBuffers.push(n),this.attributes.push({name:"a_vertexId",format:exports.GFXFormat.R32F,stream:t,isNormalized:!1}),this._vertexIdChannel={stream:t,index:i}}}},{key:"_allocVertexIdBuffer",value:function(e){for(var t=0===this.vertexBuffers.length||0===this.vertexBuffers[0].stride?0:this.vertexBuffers[0].size/this.vertexBuffers[0].stride,i=new Float32Array(t),n=0;n<t;++n)i[n]=n;var r=e.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:i.byteLength,stride:i.BYTES_PER_ELEMENT});return r.update(i),r}}]),e}(),au=new Mi,su=new Mi,lu=qa("cc.Mesh")((Jc=de((Kc=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_struct",Jc,ne(e)),_e(e,"_dataLength",$c,ne(e)),_e(e,"_hash",eu,ne(e)),e._data=null,e._initialized=!1,e._renderingSubMeshes=null,e._boneSpaceBounds=new Map,e._jointBufferIndices=null,e.morphRendering=null,e.loaded=!1,e}return ee(t,Ul),J(t,[{key:"_nativeAsset",get:function(){return this._data.buffer},set:function(e){this._data&&this._data.byteLength===e.byteLength?(this._data.set(new Uint8Array(e)),cc.loader._cache[this.nativeUrl]&&(cc.loader._cache[this.nativeUrl].content=this._data.buffer)):this._data=new Uint8Array(e),this.loaded=!0,this.emit("load")}},{key:"subMeshCount",get:function(){var e=this.renderingSubMeshes;return e?e.length:0}},{key:"minPosition",get:function(){return this.struct.minPosition}},{key:"maxPosition",get:function(){return this.struct.maxPosition}},{key:"struct",get:function(){return this._struct}},{key:"data",get:function(){return this._data}},{key:"hash",get:function(){return!this._hash&&this._data&&(this._hash=sl(this._data,666)),this._hash}},{key:"jointBufferIndices",get:function(){return this._jointBufferIndices?this._jointBufferIndices:this._jointBufferIndices=this._struct.primitives.map((function(e){return e.jointMapIndex||0}))}}]),J(t,[{key:"initialize",value:function(){var e=this;if(!this._initialized){var t,i;this._initialized=!0,this._data||(this._data=new Uint8Array(this._dataLength),(t=this).loaded?i&&i():t.nativeUrl?cc.loader.load({url:t.nativeUrl},(function(e,n){n&&(t.loaded||(t._nativeAsset=n)),i&&i(e)})):i&&i());for(var n=this._data.buffer,r=cc.director.root.device,o=this._createVertexBuffers(r,n),a=[],s=function(t){var i=e._struct.primitives[t];if(0===i.vertexBundelIndices.length)return"continue";var s=void 0,l=null;if(i.indexView){var c=i.indexView,u=c.stride,h=c.length;if(4===u&&!r.hasFeature(exports.GFXFeature.ELEMENT_INDEX_UINT)){var p=e._struct.vertexBundles[i.vertexBundelIndices[0]].view.count;if(p>=65536)return g(10001,p,65536),"continue";u>>=1,h>>=1}s=r.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:h,stride:u}),l=new(ru(c.stride))(n,c.offset,c.count),c.stride!==u&&(l=ru(u).from(l)),e.loaded?s.update(l):e.once("load",(function(){s.update(l)}))}var f=i.vertexBundelIndices.map((function(e){return o[e]})),_=[];if(i.vertexBundelIndices.length>0){var d=i.vertexBundelIndices[0];_=e._struct.vertexBundles[d].attributes}var m=new ou(f,_,i.primitiveMode);m.mesh=e,m.subMeshIdx=t,m.indexBuffer=s,a.push(m)},l=0;l<this._struct.primitives.length;l++)s(l);this._renderingSubMeshes=a,this._struct.morph&&(this.morphRendering=function(e,t){return new tu(e,t)}(this,r))}}},{key:"destroy",value:function(){return this.destroyRenderingMesh(),ae(te(t.prototype),"destroy",this).call(this)}},{key:"destroyRenderingMesh",value:function(){if(this._renderingSubMeshes){for(var e=0;e<this._renderingSubMeshes.length;e++)this._renderingSubMeshes[e].destroy();this._renderingSubMeshes=null,this._data=null,this._initialized=!1}}},{key:"assign",value:function(e,t){this.reset({struct:e,data:t})}},{key:"reset",value:function(e){this.destroyRenderingMesh(),this._struct=e.struct,this._data=e.data,this._hash=0,this.loaded=!0,this.emit("load")}},{key:"getBoneSpaceBounds",value:function(e){if(this._boneSpaceBounds.has(e.hash))return this._boneSpaceBounds.get(e.hash);var t=[];this._boneSpaceBounds.set(e.hash,t);for(var i=[],n=e.bindposes,r=0;r<n.length;r++)t.push(new ca(1/0,1/0,1/0,-1/0,-1/0,-1/0)),i.push(!1);for(var o=this._struct.primitives,a=0;a<o.length;a++){var s=this.readAttribute(a,exports.GFXAttributeName.ATTR_JOINTS),l=this.readAttribute(a,exports.GFXAttributeName.ATTR_WEIGHTS),c=this.readAttribute(a,exports.GFXAttributeName.ATTR_POSITION);if(s&&l&&c)for(var u=Math.min(s.length/4,l.length/4,c.length/3),h=0;h<u;h++){Mi.set(au,c[3*h+0],c[3*h+1],c[3*h+2]);for(var p=0;p<4;++p){var f=4*h+p,_=s[f];if(!(0===l[f]||_>=n.length)){Mi.transformMat4(su,au,n[_]),i[_]=!0;var d=t[_];Mi.min(d.center,d.center,su),Mi.max(d.halfExtents,d.halfExtents,su)}}}}for(var m=0;m<n.length;m++){var v=t[m];i[m]?ca.fromPoints(v,v.center,v.halfExtents):t[m]=null}return t}},{key:"merge",value:function(e,t,i){if(i&&(!this.loaded||!e.loaded||!this.validateMergingMesh(e)))return!1;var n=new Mi,r=t&&new Xi,o=t&&new ca;if(r&&t.getRotation(r),!this._initialized&&e._data){var a=JSON.parse(JSON.stringify(e._struct)),s=e._data.slice();if(t){a.maxPosition&&a.minPosition&&(Mi.add(o.center,a.maxPosition,a.minPosition),Mi.multiplyScalar(o.center,o.center,.5),Mi.subtract(o.halfExtents,a.maxPosition,a.minPosition),Mi.multiplyScalar(o.halfExtents,o.halfExtents,.5),ca.transform(o,o,t),Mi.add(a.maxPosition,o.center,o.halfExtents),Mi.subtract(a.minPosition,o.center,o.halfExtents));for(var l=0;l<a.vertexBundles.length;l++)for(var c=a.vertexBundles[l],u=0;u<c.attributes.length;u++)if(c.attributes[u].name===exports.GFXAttributeName.ATTR_POSITION||c.attributes[u].name===exports.GFXAttributeName.ATTR_NORMAL){var h=c.attributes[u].format,p=new DataView(s.buffer,c.view.offset+cu(c.attributes,u)),f=gu(p,h),_=Au(p,h);if(!f||!_)continue;for(var d=c.view.count,m=c.view.stride,v=yu(h),y=0;y<d;y++){var g=y*m,A=g+v,b=A+v;switch(n.set(f(g),f(A),f(b)),c.attributes[u].name){case exports.GFXAttributeName.ATTR_POSITION:n.transformMat4(t);break;case exports.GFXAttributeName.ATTR_NORMAL:Mi.transformQuat(n,n,r)}_(g,n.x),_(A,n.y),_(b,n.z)}}}return this.reset({struct:a,data:s}),this.initialize(),!0}for(var x,T,S,E,C,w=new rl,k=0,O=0,R=0,F=0,I=0,M=0,P=0,D=0,B=!1,N=new Array(this._struct.vertexBundles.length),L=0;L<this._struct.vertexBundles.length;++L){var z=this._struct.vertexBundles[L],G=e._struct.vertexBundles[L];R=z.view.offset,F=G.view.offset,O=z.view.stride,k=z.view.count+G.view.count,x=new ArrayBuffer(k*O),T=new Uint8Array(x),R+=(S=this._data.subarray(R,R+z.view.length)).length,F+=(E=e._data.subarray(F,F+G.view.length)).length,T.set(S),I=0;for(var U,X=fe(z.attributes);!(U=X()).done;){var V=U.value;P=0,B=!1;for(var H,j=fe(G.attributes);!(H=j()).done;){var W=H.value;if(V.name===W.name&&V.format===W.format){B=!0;break}P+=yr[W.format].size}if(B){D=yr[V.format].size,M=z.view.length+I;for(var Y=0;Y<G.view.count;++Y){if(C=E.subarray(P,P+D),T.set(C,M),(V.name===exports.GFXAttributeName.ATTR_POSITION||V.name===exports.GFXAttributeName.ATTR_NORMAL)&&t){var q=new Float32Array(T.buffer,M,3);switch(n.set(q[0],q[1],q[2]),V.name){case exports.GFXAttributeName.ATTR_POSITION:n.transformMat4(t);break;case exports.GFXAttributeName.ATTR_NORMAL:Mi.transformQuat(n,n,r)}q[0]=n.x,q[1]=n.y,q[2]=n.z}M+=z.view.stride,P+=G.view.stride}}I+=yr[V.format].size}N[L]={attributes:z.attributes,view:{offset:w.getLength(),length:x.byteLength,count:k,stride:O}},w.addBuffer(x)}for(var Q,Z,K,J=0,$=2,ee=0,te=new Array(this._struct.primitives.length),ie=0;ie<this._struct.primitives.length;++ie){var ne=this._struct.primitives[ie],re=e._struct.primitives[ie];te[ie]={primitiveMode:ne.primitiveMode,vertexBundelIndices:ne.vertexBundelIndices};for(var oe,ae=fe(ne.vertexBundelIndices);!(oe=ae()).done;){var se=oe.value;ee=Math.max(ee,this._struct.vertexBundles[se].view.count)}if(ne.indexView&&re.indexView){J=ne.indexView.count,J+=re.indexView.count,R=ne.indexView.offset,F=re.indexView.offset,$=J<256?1:J<65536?2:4;var le=new ArrayBuffer(J*$);if(Q=2===$?new Uint16Array(le):1===$?new Uint8Array(le):new Uint32Array(le),Z=2===ne.indexView.stride?new Uint16Array(this._data.buffer,R,ne.indexView.count):1===ne.indexView.stride?new Uint8Array(this._data.buffer,R,ne.indexView.count):new Uint32Array(this._data.buffer,R,ne.indexView.count),$===ne.indexView.stride)Q.set(Z);else for(var ce=0;ce<ne.indexView.count;++ce)Q[ce]=Z[ce];R+=ne.indexView.length,K=2===re.indexView.stride?new Uint16Array(e._data.buffer,F,re.indexView.count):1===re.indexView.stride?new Uint8Array(e._data.buffer,F,re.indexView.count):new Uint32Array(e._data.buffer,F,re.indexView.count);for(var ue=0;ue<re.indexView.count;++ue)Q[ne.indexView.count+ue]=ee+K[ue];F+=re.indexView.length,te[ie].indexView={offset:w.getLength(),length:le.byteLength,count:J,stride:$},w.setNextAlignment($),w.addBuffer(le)}}var he={vertexBundles:N,primitives:te,minPosition:this._struct.minPosition,maxPosition:this._struct.maxPosition};return he.minPosition&&e._struct.minPosition&&he.maxPosition&&e._struct.maxPosition&&(t?(Mi.add(o.center,e._struct.maxPosition,e._struct.minPosition),Mi.multiplyScalar(o.center,o.center,.5),Mi.subtract(o.halfExtents,e._struct.maxPosition,e._struct.minPosition),Mi.multiplyScalar(o.halfExtents,o.halfExtents,.5),ca.transform(o,o,t),Mi.add(n,o.center,o.halfExtents),Mi.max(he.maxPosition,he.maxPosition,n),Mi.subtract(n,o.center,o.halfExtents),Mi.min(he.minPosition,he.minPosition,n)):(Mi.min(he.minPosition,he.minPosition,e._struct.minPosition),Mi.max(he.maxPosition,he.maxPosition,e._struct.maxPosition))),this.reset({struct:he,data:new Uint8Array(w.getCombined())}),this.initialize(),!0}},{key:"validateMergingMesh",value:function(e){if(!this._data&&e._data)return!0;if(this._struct.vertexBundles.length!==e._struct.vertexBundles.length)return!1;for(var t=0;t<this._struct.vertexBundles.length;++t){var i=this._struct.vertexBundles[t],n=e._struct.vertexBundles[t];if(i.attributes.length!==n.attributes.length)return!1;for(var r=0;r<i.attributes.length;++r)if(i.attributes[r].format!==n.attributes[r].format)return!1}if(this._struct.primitives.length!==e._struct.primitives.length)return!1;for(var o=0;o<this._struct.primitives.length;++o){var a=this._struct.primitives[o],s=e._struct.primitives[o];if(a.vertexBundelIndices.length!==s.vertexBundelIndices.length)return!1;for(var l=0;l<a.vertexBundelIndices.length;++l)if(a.vertexBundelIndices[l]!==s.vertexBundelIndices[l])return!1;if(a.primitiveMode!==s.primitiveMode)return!1;if(a.indexView){if(void 0===s.indexView)return!1}else if(s.indexView)return!1}return!0}},{key:"readAttribute",value:function(e,t){var i=this,n=null;return this._accessAttribute(e,t,(function(e,t){var r=e.attributes[t].format,o=new DataView(i._data.buffer,e.view.offset+cu(e.attributes,t)),a=yr[r],s=Tr(yr[r]),l=gu(o,r);if(s&&l){for(var c=e.view.count,u=a.count,h=new s(c*u),p=e.view.stride,f=0;f<c;++f)for(var _=0;_<u;++_)h[u*f+_]=l(p*f+h.BYTES_PER_ELEMENT*_);n=h}})),n}},{key:"copyAttribute",value:function(e,t,i,n,r){var o=this,a=!1;return this._accessAttribute(e,t,(function(e,t){var s=e.attributes[t].format,l=new DataView(o._data.buffer,e.view.offset+cu(e.attributes,t)),c=new DataView(i,r),u=yr[s],h=gu(l,s),p=Au(c,s);if(h&&p){for(var f=e.view.count,_=u.count,d=e.view.stride,m=yu(s),v=n,y=m,g=0;g<f;++g)for(var A=0;A<_;++A){p(v*g+y*A,h(d*g+m*A))}a=!0}})),a}},{key:"readIndices",value:function(e){if(!this._data||e>=this._struct.primitives.length)return null;var t=this._struct.primitives[e];if(!t.indexView)return null;var i=t.indexView.stride;return new(1===i?Uint8Array:2===i?Uint16Array:Uint32Array)(this._data.buffer,t.indexView.offset,t.indexView.count)}},{key:"copyIndices",value:function(e,t){if(!this._data||e>=this._struct.primitives.length)return!1;var i=this._struct.primitives[e];if(!i.indexView)return!1;for(var n=i.indexView.count,r=1===i.indexView.stride?exports.GFXFormat.R8UI:2===i.indexView.stride?exports.GFXFormat.R16UI:exports.GFXFormat.R32UI,o=gu(new DataView(this._data.buffer),r),a=0;a<n;++a)t[a]=o(i.indexView.offset+yr[r].size*a);return!0}},{key:"_accessAttribute",value:function(e,t,i){if(this._data&&!(e>=this._struct.primitives.length))for(var n,r=fe(this._struct.primitives[e].vertexBundelIndices);!(n=r()).done;){var o=n.value,a=this._struct.vertexBundles[o],s=a.attributes.findIndex((function(e){return e.name===t}));if(!(s<0)){i(a,s);break}}}},{key:"_createVertexBuffers",value:function(e,t){var i=this;return this._struct.vertexBundles.map((function(n){var r=e.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:n.view.length,stride:n.view.stride}),o=new Uint8Array(t,n.view.offset,n.view.length);return i.loaded?r.update(o):i.once("load",(function(){r.update(o)})),r}))}},{key:"renderingSubMeshes",get:function(){return this.initialize(),this._renderingSubMeshes}}]),t}()).prototype,"_struct",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{vertexBundles:[],primitives:[]}}}),$c=de(Kc.prototype,"_dataLength",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),eu=de(Kc.prototype,"_hash",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zc=Kc))||Zc;function cu(e,t){for(var i=0,n=0;n<t;++n){var r=e[n];i+=yr[r.format].size}return i}cc.Mesh=lu;var uu,hu,pu,fu,_u,du,mu,vu=ws.isLittleEndian;function yu(e){var t=yr[e];return t.size/t.count}function gu(e,t){var i=yr[t],n=i.size/i.count;switch(i.type){case exports.GFXFormatType.UNORM:switch(n){case 1:return function(t){return e.getUint8(t)};case 2:return function(t){return e.getUint16(t,vu)};case 4:return function(t){return e.getUint32(t,vu)}}break;case exports.GFXFormatType.SNORM:case exports.GFXFormatType.INT:switch(n){case 1:return function(t){return e.getInt8(t)};case 2:return function(t){return e.getInt16(t,vu)};case 4:return function(t){return e.getInt32(t,vu)}}break;case exports.GFXFormatType.UINT:switch(n){case 1:return function(t){return e.getUint8(t)};case 2:return function(t){return e.getUint16(t,vu)};case 4:return function(t){return e.getUint32(t,vu)}}break;case exports.GFXFormatType.FLOAT:return function(t){return e.getFloat32(t,vu)}}return null}function Au(e,t){var i=yr[t],n=i.size/i.count;switch(i.type){case exports.GFXFormatType.UNORM:switch(n){case 1:return function(t,i){return e.setUint8(t,i)};case 2:return function(t,i){return e.setUint16(t,i,vu)};case 4:return function(t,i){return e.setUint32(t,i,vu)}}break;case exports.GFXFormatType.SNORM:case exports.GFXFormatType.INT:switch(n){case 1:return function(t,i){return e.setInt8(t,i)};case 2:return function(t,i){return e.setInt16(t,i,vu)};case 4:return function(t,i){return e.setInt32(t,i,vu)}}break;case exports.GFXFormatType.UINT:switch(n){case 1:return function(t,i){return e.setUint8(t,i)};case 2:return function(t,i){return e.setUint16(t,i,vu)};case 4:return function(t,i){return e.setUint32(t,i,vu)}}break;case exports.GFXFormatType.FLOAT:return function(t,i){return e.setFloat32(t,i,vu)}}return null}bt(Pl);var bu,xu=(uu=qa("cc.RenderTexture"),hu=Qa({type:Pl}),uu((mu=du=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._window=null,_e(i,"_depthStencilFormat",_u,ne(i)),i}return ee(t,pc),J(t,[{key:"getGFXWindow",value:function(){return this._window}},{key:"getGFXTextureView",value:function(){return this._window?this._window.colorTexView:null}},{key:"getGFXStencilTexture",value:function(){return this._window?this._window.depthStencilTexView:null}},{key:"reset",value:function(e){e&&(this._width=e.width,this._height=e.height,e.colorFormat&&(this._format=e.colorFormat),e.depthStencilFormat&&(this._depthStencilFormat=e.depthStencilFormat),this._tryResetWindow(),this.emit("resize",this))}},{key:"destroy",value:function(){return this._window&&(cc.director.root.destroyWindow(this._window),this._window=null),ae(te(t.prototype),"destroy",this).call(this)}},{key:"onLoaded",value:function(){this._tryResetWindow()}},{key:"_serialize",value:function(e){return{base:ae(te(t.prototype),"_serialize",this).call(this),name:this._name,width:this._width,height:this._height,colorFormat:this._format,depthStencilFormat:this._depthStencilFormat}}},{key:"_deserialize",value:function(e,i){ae(te(t.prototype),"_deserialize",this).call(this,e.base,i);var n=e;this.name=n.name||"",this._width=n.width,this._height=n.height,this._format=n.colorFormat,this._depthStencilFormat=n.depthStencilFormat}},{key:"_tryResetWindow",value:function(){var e=this._getGFXDevice();e&&(this._window&&this._window.destroy(),this._createWindow(e))}},{key:"_createWindow",value:function(e){var t={title:this.name,isOffscreen:!0,width:this._width,height:this._height,colorFmt:this._format,depthStencilFmt:this._depthStencilFormat};if(this._window)return this._window.initialize(t),this._window;this._window=cc.director.root.createWindow(t),this.loaded=!0,this.emit("load")}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this.reset()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this.reset()}},{key:"depthStencilFormat",get:function(){return this._depthStencilFormat},set:function(e){this._depthStencilFormat=e,this.reset()}}]),t}(),du.DepthStencilFormat=Pl,_u=de((fu=mu).prototype,"_depthStencilFormat",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Pl.NONE}}),de(fu.prototype,"width",[Qa],Object.getOwnPropertyDescriptor(fu.prototype,"width"),fu.prototype),de(fu.prototype,"height",[Qa],Object.getOwnPropertyDescriptor(fu.prototype,"height"),fu.prototype),de(fu.prototype,"depthStencilFormat",[hu],Object.getOwnPropertyDescriptor(fu.prototype,"depthStencilFormat"),fu.prototype),pu=fu))||pu);cc.RenderTexture=xu;var Tu,Su,Eu,Cu,wu,ku,Ou=[{u:0,v:0},{u:0,v:0},{u:0,v:0},{u:0,v:0}],Ru=qa("cc.SpriteFrame")(bu=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this))).vertices=null,e.uv=[],e.uvHash=0,e.uvSliced=[],e._rect=new nn,e._offset=new Oi,e._originalSize=new en,e._rotated=!1,e._capInsets=[0,0,0,0],e._atlasUuid="",e._texture=void 0,e._flipUv=!1,e}return ee(t,Ul),J(t,[{key:"insetTop",get:function(){return this._capInsets[1]},set:function(e){this._capInsets[1]!==e&&(this._capInsets[1]=e,this._texture&&this._calculateSlicedUV())}},{key:"insetBottom",get:function(){return this._capInsets[3]},set:function(e){this._capInsets[3]!==e&&(this._capInsets[3]=e,this._texture&&this._calculateSlicedUV())}},{key:"insetLeft",get:function(){return this._capInsets[0]},set:function(e){this._capInsets[0]!==e&&(this._capInsets[0]=e,this._texture&&this._calculateSlicedUV())}},{key:"insetRight",get:function(){return this._capInsets[2]},set:function(e){this._capInsets[2]!==e&&(this._capInsets[2]=e,this._texture&&this._calculateSlicedUV())}},{key:"rect",get:function(){return this._rect},set:function(e){this._rect.equals(e)||(this._rect.set(e),this._texture&&this._calculateUV())}},{key:"originalSize",get:function(){return this._originalSize},set:function(e){this._originalSize.equals(e)||(this._originalSize.set(e),this._texture&&this._calculateUV())}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset.set(e)}},{key:"rotated",get:function(){return this._rotated},set:function(e){this._rotated!==e&&(this._rotated=e,this._texture&&this._calculateUV())}},{key:"texture",get:function(){return this._texture},set:function(e){e?this.reset({texture:e},!0):console.warn("Error Texture in ".concat(this.name))}},{key:"atlasUuid",get:function(){return this._atlasUuid},set:function(e){this._atlasUuid=e}},{key:"width",get:function(){return this._texture.width}},{key:"height",get:function(){return this._texture.height}},{key:"_textureSource",set:function(e){e&&(this._refreshTexture(e),this._calculateUV())}}],[{key:"createWithImage",value:function(e){var i=e instanceof Vl?e:new Vl(e),n=new Tc;n.image=i;var r=new t;return r.texture=n,r}}]),J(t,[{key:"textureLoaded",value:function(){return this.texture&&this.texture.loaded}},{key:"isRotated",value:function(){return this._rotated}},{key:"setRotated",value:function(e){this.rotated=e}},{key:"getRect",value:function(e){return e?(e.set(this._rect),e):this._rect.clone()}},{key:"setRect",value:function(e){this.rect=e}},{key:"getOriginalSize",value:function(e){return e?(e.set(this._originalSize),e):this._originalSize.clone()}},{key:"setOriginalSize",value:function(e){this.originalSize=e}},{key:"getOffset",value:function(e){return e?(e.set(this._offset),e):this._offset.clone()}},{key:"setOffset",value:function(e){this.offset=e}},{key:"getGFXTextureView",value:function(){return this._texture.getGFXTextureView()}},{key:"getGFXSampler",value:function(){return this._texture.getGFXSampler()}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;t&&(this._originalSize.set(0,0),this._rect.set(0,0,0,0),this._offset.set(0,0),this._capInsets=[0,0,0,0],this._rotated=!1,i=!0),e&&(e.texture&&(this.loaded=!1,this._rect.x=this._rect.y=0,this._rect.width=e.texture.width,this._rect.height=e.texture.height,this._refreshTexture(e.texture),this.checkRect(this._texture)),e.originalSize&&this._originalSize.set(e.originalSize),e.rect&&this._rect.set(e.rect),e.offset&&this._offset.set(e.offset),void 0!==e.borderTop&&(this._capInsets[1]=e.borderTop),void 0!==e.borderBottom&&(this._capInsets[3]=e.borderBottom),void 0!==e.borderLeft&&(this._capInsets[0]=e.borderLeft),void 0!==e.borderRight&&(this._capInsets[2]=e.borderRight),void 0!==e.isRotate&&(this._rotated=!!e.isRotate),void 0!==e.isFlipUv&&(this._flipUv=!!e.isFlipUv),this._texture instanceof xu&&(this._flipUv=!0),i=!0),i&&this.texture&&this._calculateUV()}},{key:"checkRect",value:function(e){var t=this._rect,i=t.x,n=t.y;return this._rotated?(i+=t.height,n+=t.width):(i+=t.width,n+=t.height),i>e.width?(cc.errorID(3300,this.name+"/"+e.name,i,e.width),!1):!(n>e.height)||(cc.errorID(3301,this.name+"/"+e.name,n,e.height),!1)}},{key:"onLoaded",value:function(){this.loaded=!0,this.emit("load")}},{key:"destroy",value:function(){return ae(te(t.prototype),"destroy",this).call(this)}},{key:"_calculateSlicedUV",value:function(){var e=this._rect,t=this.texture,i=t.width,n=t.height,r=this._capInsets[0],o=this._capInsets[2],a=e.width-r-o,s=this._capInsets[1],l=this._capInsets[3],c=e.height-s-l,u=this.uvSliced;if(u.length=0,this._rotated){Ou[0].u=(e.x+.5)/i,Ou[1].u=(e.x+l)/i,Ou[2].u=(e.x+l+c)/i,Ou[3].u=(e.x+e.height-.5)/i,Ou[3].v=(e.y+.5)/n,Ou[2].v=(e.y+r)/n,Ou[1].v=(e.y+r+a)/n,Ou[0].v=(e.y+e.width-.5)/n;for(var h=0;h<4;++h)for(var p=Ou[h],f=0;f<4;++f){var _=Ou[3-f];u.push({u:p.u,v:_.v})}}else{Ou[0].u=(e.x+.5)/i,Ou[1].u=(e.x+r)/i,Ou[2].u=(e.x+r+a)/i,Ou[3].u=(e.x+e.width-.5)/i,Ou[3].v=(e.y+.5)/n,Ou[2].v=(e.y+s)/n,Ou[1].v=(e.y+s+c)/n,Ou[0].v=(e.y+e.height-.5)/n;for(var d=0;d<4;++d)for(var m=Ou[d],v=0;v<4;++v){var y=Ou[v];u.push({u:y.u,v:m.v})}}}},{key:"_calculateUV",value:function(){var e=this._rect,t=this.uv,i=this.texture,n=i.width,r=i.height;if(this._rotated){var o=0===n?0:(e.x+.5)/n,a=0===n?0:(e.x+e.height-.5)/n,s=0===r?0:(e.y+.5)/r,l=0===r?0:(e.y+e.width-.5)/r;this._flipUv,t[0]=o,t[1]=s,t[2]=o,t[3]=l,t[4]=a,t[5]=s,t[6]=a,t[7]=l}else{var c=0===n?0:(e.x+.5)/n,u=0===n?0:(e.x+e.width-.5)/n,h=0===r?0:(e.y+e.height-.5)/r,p=0===r?0:(e.y+.5)/r;this._flipUv?(t[0]=c,t[1]=p,t[2]=u,t[3]=p,t[4]=c,t[5]=h,t[6]=u,t[7]=h):(t[0]=c,t[1]=h,t[2]=u,t[3]=h,t[4]=c,t[5]=p,t[6]=u,t[7]=p)}for(var f="",_=0;_<t.length;_++)f+=t[_];this.uvHash=sl(f,666);var d=this.vertices;if(d){d.nu.length=0,d.nv.length=0;for(var m=0;m<d.u.length;m++)d.nu[m]=d.u[m]/n,d.nv[m]=d.v[m]/r}this._calculateSlicedUV()}},{key:"_serialize",value:function(e){var t,i,n=this._rect,r=this._offset,o=this._originalSize,a=this._uuid;return this._texture&&(t=this._texture._uuid),a&&e&&(a=EditorExtends.UuidUtils.compressUuid(a,!0)),t&&e&&(t=EditorExtends.UuidUtils.compressUuid(t,!0)),this.vertices&&(i={triangles:this.vertices.triangles,x:this.vertices.x,y:this.vertices.y,u:this.vertices.u,v:this.vertices.v}),{name:this._name,atlas:e?void 0:this._atlasUuid,rect:n,offset:r,originalSize:o,rotated:this._rotated,capInsets:this._capInsets,vertices:i,texture:t}}},{key:"_deserialize",value:function(e,t){var i=e,n=i.rect;n&&(this._rect=new nn(n.x,n.y,n.width,n.height));var r=i.offset;i.offset&&(this._offset=new Oi(r.x,r.y));var o=i.originalSize;i.originalSize&&(this._originalSize=new en(o.width,o.height)),this._rotated=!!i.rotated,this._name=i.name;var a=i.capInsets;a&&(this._capInsets[0]=a[0],this._capInsets[1]=a[1],this._capInsets[2]=a[2],this._capInsets[3]=a[3]),i.texture&&t.result.push(this,"_textureSource",i.texture),this.vertices=i.vertices,this.vertices&&(this.vertices.nu=[],this.vertices.nv=[])}},{key:"_textureLoaded",value:function(){var e=this._texture,t={},i=!1;0!==this._rect.width&&0!==this._rect.height&&this.checkRect(e)||(t.rect=new nn(0,0,e.width,e.height),i=!0),(0===this._originalSize.width||0===this._originalSize.height||i)&&(t.originalSize=new en(e.width,e.height),i=!0),i&&(this.reset(t),this.onLoaded())}},{key:"_refreshTexture",value:function(e){this._texture=e,e.loaded?this._textureLoaded():e.once("load",this._textureLoaded,this)}}]),t}())||bu;cc.SpriteFrame=Ru,function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom",e[e.front=4]="front",e[e.back=5]="back"}(ku||(ku={}));var Fu=qa("cc.TextureCube")((wu=Cu=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_mipmaps",Eu,ne(e)),e}return ee(t,xc),J(t,[{key:"mipmaps",get:function(){return this._mipmaps},set:function(e){var t=this;if(this._mipmaps=e,this._setMipmapLevel(this._mipmaps.length),this._mipmaps.length>0){var i=this._mipmaps[0].front;this.reset({width:i.width,height:i.height,format:i.format,mipmapLevel:this._mipmaps.length}),this._mipmaps.forEach((function(e,i){Iu(e,(function(e,n){t._assignImage(e,i,n)}))}))}else this.reset({width:0,height:0,mipmapLevel:this._mipmaps.length})}},{key:"image",get:function(){return 0===this._mipmaps.length?null:this._mipmaps[0]},set:function(e){this.mipmaps=e?[e]:[]}}],[{key:"fromTexture2DArray",value:function(e,i){for(var n=[],r=e.length/6,o=0;o<r;o++){var a=6*o;n.push({front:e[a+ku.front].image,back:e[a+ku.back].image,left:e[a+ku.left].image,right:e[a+ku.right].image,top:e[a+ku.top].image,bottom:e[a+ku.bottom].image})}return(i=i||new t).mipmaps=n,i}}]),J(t,[{key:"onLoaded",value:function(){this.mipmaps=this._mipmaps,this.loaded=!0,this.emit("load")}},{key:"reset",value:function(e){this._width=e.width,this._height=e.height,this._setGFXFormat(e.format),this._setMipmapLevel(e.mipmapLevel||1),this._tryReset()}},{key:"updateMipmaps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;if(!(t>=this._mipmaps.length))for(var n=Math.min(void 0===i?this._mipmaps.length:i,this._mipmaps.length-t),r=function(i){var n=t+i;Iu(e._mipmaps[n],(function(t,i){e._assignImage(t,n,i)}))},o=0;o<n;++o)r(o)}},{key:"destroy",value:function(){return this._mipmaps=[],ae(te(t.prototype),"destroy",this).call(this)}},{key:"releaseTexture",value:function(){this.mipmaps=[]}},{key:"_serialize",value:function(e){return{base:ae(te(t.prototype),"_serialize",this).call(this),mipmaps:this._mipmaps.map((function(t){return e?{front:EditorExtends.UuidUtils.compressUuid(t.front._uuid,!0),back:EditorExtends.UuidUtils.compressUuid(t.back._uuid,!0),left:EditorExtends.UuidUtils.compressUuid(t.left._uuid,!0),right:EditorExtends.UuidUtils.compressUuid(t.right._uuid,!0),top:EditorExtends.UuidUtils.compressUuid(t.top._uuid,!0),bottom:EditorExtends.UuidUtils.compressUuid(t.bottom._uuid,!0)}:{front:t.front._uuid,back:t.back._uuid,left:t.left._uuid,right:t.right._uuid,top:t.top._uuid,bottom:t.bottom._uuid}}))}}},{key:"_deserialize",value:function(e,i){var n=e;ae(te(t.prototype),"_deserialize",this).call(this,n.base,i),this._mipmaps=new Array(n.mipmaps.length);for(var r=0;r<n.mipmaps.length;++r){this._mipmaps[r]={front:new Vl,back:new Vl,left:new Vl,right:new Vl,top:new Vl,bottom:new Vl};var o=n.mipmaps[r];i.result.push(this._mipmaps[r],"front",o.front),i.result.push(this._mipmaps[r],"back",o.back),i.result.push(this._mipmaps[r],"left",o.left),i.result.push(this._mipmaps[r],"right",o.right),i.result.push(this._mipmaps[r],"top",o.top),i.result.push(this._mipmaps[r],"bottom",o.bottom)}}},{key:"_getGfxTextureCreateInfo",value:function(e){var t=Object.assign({type:exports.GFXTextureType.TEX2D,width:this._width,height:this._height,arrayLayer:6},e);return t.flags=(t.flags||0)|exports.GFXTextureFlagBit.CUBEMAP,t}},{key:"_getGfxTextureViewCreateInfo",value:function(e){return Object.assign({type:exports.GFXTextureViewType.CUBE,layerCount:6},e)}}]),t}(),Cu.FaceIndex=ku,Eu=de((Su=wu).prototype,"_mipmaps",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Tu=Su))||Tu;function Iu(e,t){t(e.front,ku.front),t(e.back,ku.back),t(e.left,ku.left),t(e.right,ku.right),t(e.top,ku.top),t(e.bottom,ku.bottom)}cc.TextureCube=Fu;var Mu,Pu,Du=[{name:"builtin-billboard",_uuid:"711ebe11-f673-4cd9-9a83-63c60ba54c5b",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"builtin-billboard|vert:vs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"builtin-billboard|vert:vs_main|tinted-fs:add",hash:3052980566,glsl3:{vert:"\nprecision mediump float;\nuniform Constants {\n  vec4 mainTiling_Offset;\n  vec4 frameTile_velLenScale;\n  vec4 scale;\n};\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nout vec2 uv;\nout vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n  , mat4 viewInv\n) {\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nuniform builtin {\n  vec4 cc_size_rotation;\n};\nvec4 vs_main() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matWorld * pos;\n  vec2 vertOffset = a_texCoord.xy - 0.5;\n  computeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.xy;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nuniform FragConstants {\n  vec4 tintColor;\n};\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n  return CCFragOutput(col);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"},glsl1:{vert:"\nprecision mediump float;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp mat4 cc_matWorld;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nvarying vec2 uv;\nvarying vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n  , mat4 viewInv\n) {\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nuniform vec4 cc_size_rotation;\nvec4 vs_main() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matWorld * pos;\n  vec2 vertOffset = a_texCoord.xy - 0.5;\n  computeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.xy;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\n  return CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"builtin",defines:[],binding:1,members:[{name:"cc_size_rotation",type:16,count:1}]},{name:"FragConstants",defines:[],binding:2,members:[{name:"tintColor",type:16,count:1}]}],samplers:[{name:"mainTexture",type:28,count:1,defines:[],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_texCoord",type:14,count:1,defines:[],format:21,location:1},{name:"a_color",type:16,count:1,defines:[],format:43,location:2}]}]},{name:"builtin-particle-gpu",_uuid:"971bdb23-3ff6-43eb-b422-1c30165a3663",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"builtin-particle-gpu|particle-vs-gpu:gpvs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"builtin-particle-gpu|particle-vs-gpu:gpvs_main|tinted-fs:add",hash:4003605751,glsl3:{vert:"\nprecision mediump float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\n  float x2 = q.x + q.x;\n  float y2 = q.y + q.y;\n  float z2 = q.z + q.z;\n  float xx = q.x * x2;\n  float xy = q.x * y2;\n  float xz = q.x * z2;\n  float yy = q.y * y2;\n  float yz = q.y * z2;\n  float zz = q.z * z2;\n  float wx = q.w * x2;\n  float wy = q.w * y2;\n  float wz = q.w * z2;\n  return mat4(\n    1. - (yy + zz), xy + wz, xz - wy, 0,\n    xy - wz, 1. - (xx + zz), yz + wx, 0,\n    xz + wy, yz - wx, 1. - (xx + yy), 0,\n    p.x, p.y, p.z, 1\n  );\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\n  float x = q.x, y = q.y, z = q.z, w = q.w;\n  float x2 = x + x;\n  float y2 = y + y;\n  float z2 = z + z;\n  float xx = x * x2;\n  float xy = x * y2;\n  float xz = x * z2;\n  float yy = y * y2;\n  float yz = y * z2;\n  float zz = z * z2;\n  float wx = w * x2;\n  float wy = w * y2;\n  float wz = w * z2;\n  float sx = s.x;\n  float sy = s.y;\n  float sz = s.z;\n  return mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n    (xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n    (xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\n    t.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nuniform Constants {\n  vec4 mainTiling_Offset;\n  vec4 frameTile_velLenScale;\n  vec4 scale;\n};\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\nout vec2 uv;\nout vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n  , mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n  , vec3 eye\n  , vec4 velocity\n  , float velocityScale\n  , float lengthScale\n  , float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\n  vec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\n  vec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\n  pos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = vec3(1, 0, 0);\n  vec3 camY = vec3(0, 0, -1);\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\n  vec2 viewSpaceVert = vec2(vertOffset.x * s.x, vertOffset.y * s.y);\n  rotateCorner(viewSpaceVert, q.z);\n  vec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\n  vec3 camY = vec3(0, 1, 0);\n  vec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\n  pos.xyz += offset;\n#else\n  pos.x += vertOffset.x;\n  pos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\n  vec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\n  aniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\n  vertIndex.y = 1. - vertIndex.y;\n#endif\n  return (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nuniform SampleConstants {\n  vec4 u_sampleInfo;\n};\nuniform TickConstants {\n  vec4 u_worldRot;\n  vec4 u_timeDelta;\n};\nin vec4 a_position_starttime;\nin vec4 a_size_uv;\nin vec4 a_rotation_uv;\nin vec4 a_color;\nin vec4 a_dir_life;\nin float a_rndSeed;\n#if CC_RENDER_MODE == 4\n  in vec3 a_texCoord;\n  in vec3 a_texCoord3;\n  in vec3 a_normal;\n  in vec4 a_color1;\n#endif\nvec3 unpackCurveData (sampler2D tex, vec2 coord) {\n    vec4 a = texture(tex, coord);\n    vec4 b = texture(tex, coord + u_sampleInfo.y);\n    float c = fract(coord.x * u_sampleInfo.x);\n    return mix(a.xyz, b.xyz, c);\n}\nvec3 unpackCurveData (sampler2D tex, vec2 coord, out float w) {\n    vec4 a = texture(tex, coord);\n    vec4 b = texture(tex, coord + u_sampleInfo.y);\n    float c = fract(coord.x * u_sampleInfo.x);\n    w = mix(a.w, b.w, c);\n    return mix(a.xyz, b.xyz, c);\n}\nfloat pseudoRandom (float seed) {\n  seed = mod(seed, 233280.);\n  float q = (seed * 9301. + 49297.) / 233280.;\n  return fract(q);\n}\n#if COLOR_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D color_over_time_tex0;\n  uniform ColorConstant {\n    int u_color_mode;\n  };\n#endif\n#if ROTATION_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D rotation_over_time_tex0;\n  uniform RotationConstant {\n    int u_rotation_mode;\n  };\n#endif\n#if SIZE_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D size_over_time_tex0;\n  uniform SizeConstant {\n    int u_size_mode;\n  };\n#endif\n#if FORCE_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D force_over_time_tex0;\n  uniform ForceConstant {\n    int u_force_mode;\n    int u_force_space;\n  };\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D velocity_over_time_tex0;\n  uniform VelocityConstant {\n    int u_velocity_mode;\n    int u_velocity_space;\n  };\n#endif\n#if TEXTURE_ANIMATION_MODULE_ENABLE\n  uniform sampler2D texture_animation_tex0;\n  uniform AnimationConstant {\n    vec4 u_anim_info;\n  };\n#endif\nfloat repeat (float t, float length) {\n  return t - floor(t / length) * length;\n}\nvec4 rotateQuat (vec4 p, vec4 q) {\n  vec3 iv = cross(q.xyz, p.xyz) + q.w * p.xyz;\n  vec3 res = p.xyz + 2.0 * cross(q.xyz, iv);\n  return vec4(res.xyz, p.w);\n}\nvec4 gpvs_main () {\n  float activeTime = u_timeDelta.x - a_position_starttime.w;\n  float normalizedTime = clamp(activeTime / a_dir_life.w, 0.0, 1.0);\n  vec2 timeCoord0 = vec2(normalizedTime, 0.);\n  vec2 timeCoord1 = vec2(normalizedTime, 1.);\n  #if CC_RENDER_MODE == 4\n    vec2 vertIdx = vec2(a_texCoord.x, a_texCoord.y);\n  #else\n    vec2 vertIdx = vec2(a_size_uv.w, a_rotation_uv.w);\n  #endif\n  vec4 velocity = vec4(a_dir_life.xyz, 0.);\n  vec4 pos = vec4(a_position_starttime.xyz, 1.);\n  vec3 size = a_size_uv.xyz;\n  #if SIZE_OVER_TIME_MODULE_ENABLE\n    if (u_size_mode == 1) {\n      size *= unpackCurveData(size_over_time_tex0, timeCoord0);\n    } else {\n      vec3 size_0 = unpackCurveData(size_over_time_tex0, timeCoord0);\n      vec3 size_1 = unpackCurveData(size_over_time_tex0, timeCoord1);\n      float factor_s = pseudoRandom(a_rndSeed + 39825.);\n      size *= mix(size_0, size_1, factor_s);\n    }\n  #endif\n  vec3 compScale = scale.xyz * size;\n  #if FORCE_OVER_TIME_MODULE_ENABLE\n    vec3 forceAnim = vec3(0.);\n    if (u_force_mode == 1) {\n      forceAnim = unpackCurveData(force_over_time_tex0, timeCoord0);\n    } else {\n      vec3 force_0 = unpackCurveData(force_over_time_tex0, timeCoord0);\n      vec3 force_1 = unpackCurveData(force_over_time_tex0, timeCoord1);\n      float factor_f =  pseudoRandom(a_rndSeed + 212165.);\n      forceAnim = mix(force_0, force_1, factor_f);\n    }\n    vec4 forceTrack = vec4(forceAnim, 0.);\n    if (u_force_space == 0) {\n      forceTrack = rotateQuat(forceTrack, u_worldRot);\n    }\n    velocity.xyz += forceTrack.xyz;\n  #endif\n  #if VELOCITY_OVER_TIME_MODULE_ENABLE\n    float speedModifier0 = 1.;\n    float speedModifier1 = 1.;\n    vec3 velocityAnim = vec3(0.);\n    if (u_velocity_mode == 1) {\n      velocityAnim = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n    } else {\n      vec3 vectory_0 = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n      vec3 vectory_1 = unpackCurveData(velocity_over_time_tex0, timeCoord1, speedModifier1);\n      float factor_v = pseudoRandom(a_rndSeed + 197866.);\n      velocityAnim = mix(vectory_0, vectory_1, factor_v);\n      speedModifier0 = mix(speedModifier0, speedModifier1, factor_v);\n    }\n    vec4 velocityTrack = vec4(velocityAnim, 0.);\n    if (u_velocity_space == 0) {\n      velocityTrack = rotateQuat(velocityTrack, u_worldRot);\n    }\n    velocity.xyz += velocityTrack.xyz;\n    velocity.xyz *= speedModifier0;\n  #endif\n  pos.xyz += velocity.xyz * normalizedTime * a_dir_life.w;\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    #if CC_RENDER_MODE == 1\n      velocity = rotateQuat(velocity, u_worldRot);\n    #endif\n  #endif\n  vec3 rotation = a_rotation_uv.xyz;\n  #if ROTATION_OVER_TIME_MODULE_ENABLE\n    if (u_rotation_mode == 1) {\n      rotation += unpackCurveData(rotation_over_time_tex0, timeCoord0) * normalizedTime * a_dir_life.w;\n    } else {\n      vec3 rotation_0 = unpackCurveData(rotation_over_time_tex0, timeCoord0);\n      vec3 rotation_1 = unpackCurveData(rotation_over_time_tex0, timeCoord1);\n      float factor_r = pseudoRandom(a_rndSeed + 125292.);\n      rotation += mix(rotation_0, rotation_1, factor_r) * normalizedTime * a_dir_life.w;\n    }\n  #endif\n  #if COLOR_OVER_TIME_MODULE_ENABLE\n    if (u_color_mode == 1) {\n      color = a_color * texture(color_over_time_tex0, timeCoord0);\n    } else {\n      vec4 color_0 = texture(color_over_time_tex0, timeCoord0);\n      vec4 color_1 = texture(color_over_time_tex0, timeCoord1);\n      float factor_c = pseudoRandom(a_rndSeed + 91041.);\n      color = a_color * mix(color_0, color_1, factor_c);\n    }\n  #else\n    color = a_color;\n  #endif\n  #if CC_RENDER_MODE != 4\n    vec2 cornerOffset = vec2((vertIdx - 0.5));\n    #if CC_RENDER_MODE == 0\n      vec3 rotEuler = rotation.xyz;\n    #elif CC_RENDER_MODE == 1\n      vec3 rotEuler = vec3(0.);\n    #else\n      vec3 rotEuler = vec3(0., 0., rotation.z);\n    #endif\n    computeVertPos(pos, cornerOffset, quaternionFromEuler(rotEuler), compScale\n      #if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n        , cc_matViewInv\n      #endif\n      #if CC_RENDER_MODE == 1\n        , cc_cameraPos.xyz\n        , velocity\n        , frameTile_velLenScale.z\n        , frameTile_velLenScale.w\n        , a_size_uv.w\n      #endif\n    );\n  #else\n    mat4 xformNoScale = matrixFromRT(quaternionFromEuler(rotation), pos.xyz);\n    mat4 xform = matFromRTS(quaternionFromEuler(rotation), pos.xyz, compScale);\n    pos = xform * vec4(a_texCoord3, 1);\n    vec4 normal = xformNoScale * vec4(a_normal, 0);\n    color *= a_color1;\n  #endif\n  pos = cc_matViewProj * pos;\n  float frameIndex = 0.;\n  #if TEXTURE_ANIMATION_MODULE_ENABLE\n    float startFrame = 0.;\n    vec3 frameInfo = vec3(0.);\n    if (int(u_anim_info.x) == 1) {\n      frameInfo = unpackCurveData(texture_animation_tex0, timeCoord0);\n    } else {\n      vec3 frameInfo0 = unpackCurveData(texture_animation_tex0, timeCoord0);\n      vec3 frameInfo1 = unpackCurveData(texture_animation_tex0, timeCoord1);\n      float factor_t = pseudoRandom(a_rndSeed + 90794.);\n      frameInfo = mix(frameInfo0, frameInfo1, factor_t);\n    }\n    startFrame = frameInfo.x / u_anim_info.y;\n    frameIndex = repeat(u_anim_info.z * (frameInfo.y + startFrame), 1.);\n  #endif\n  uv = computeUV(frameIndex, vertIdx, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\n  return pos;\n}\nvoid main() { gl_Position = gpvs_main(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nuniform FragConstants {\n  vec4 tintColor;\n};\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n  return CCFragOutput(col);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"},glsl1:{vert:"\nprecision mediump float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\n  float x2 = q.x + q.x;\n  float y2 = q.y + q.y;\n  float z2 = q.z + q.z;\n  float xx = q.x * x2;\n  float xy = q.x * y2;\n  float xz = q.x * z2;\n  float yy = q.y * y2;\n  float yz = q.y * z2;\n  float zz = q.z * z2;\n  float wx = q.w * x2;\n  float wy = q.w * y2;\n  float wz = q.w * z2;\n  return mat4(\n    1. - (yy + zz), xy + wz, xz - wy, 0,\n    xy - wz, 1. - (xx + zz), yz + wx, 0,\n    xz + wy, yz - wx, 1. - (xx + yy), 0,\n    p.x, p.y, p.z, 1\n  );\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\n  float x = q.x, y = q.y, z = q.z, w = q.w;\n  float x2 = x + x;\n  float y2 = y + y;\n  float z2 = z + z;\n  float xx = x * x2;\n  float xy = x * y2;\n  float xz = x * z2;\n  float yy = y * y2;\n  float yz = y * z2;\n  float zz = z * z2;\n  float wx = w * x2;\n  float wy = w * y2;\n  float wz = w * z2;\n  float sx = s.x;\n  float sy = s.y;\n  float sz = s.z;\n  return mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n    (xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n    (xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\n    t.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nuniform vec4 mainTiling_Offset;\nuniform vec4 frameTile_velLenScale;\nuniform vec4 scale;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying vec2 uv;\nvarying vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n  , mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n  , vec3 eye\n  , vec4 velocity\n  , float velocityScale\n  , float lengthScale\n  , float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\n  vec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\n  vec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\n  pos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = vec3(1, 0, 0);\n  vec3 camY = vec3(0, 0, -1);\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\n  vec2 viewSpaceVert = vec2(vertOffset.x * s.x, vertOffset.y * s.y);\n  rotateCorner(viewSpaceVert, q.z);\n  vec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\n  vec3 camY = vec3(0, 1, 0);\n  vec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\n  pos.xyz += offset;\n#else\n  pos.x += vertOffset.x;\n  pos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\n  vec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\n  aniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\n  vertIndex.y = 1. - vertIndex.y;\n#endif\n  return (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nuniform vec4 u_sampleInfo;\nuniform vec4 u_worldRot;\nuniform vec4 u_timeDelta;\nattribute vec4 a_position_starttime;\nattribute vec4 a_size_uv;\nattribute vec4 a_rotation_uv;\nattribute vec4 a_color;\nattribute vec4 a_dir_life;\nattribute float a_rndSeed;\n#if CC_RENDER_MODE == 4\n  attribute vec3 a_texCoord;\n  attribute vec3 a_texCoord3;\n  attribute vec3 a_normal;\n  attribute vec4 a_color1;\n#endif\nvec3 unpackCurveData (sampler2D tex, vec2 coord) {\n    vec4 a = texture2D(tex, coord);\n    vec4 b = texture2D(tex, coord + u_sampleInfo.y);\n    float c = fract(coord.x * u_sampleInfo.x);\n    return mix(a.xyz, b.xyz, c);\n}\nvec3 unpackCurveData (sampler2D tex, vec2 coord, out float w) {\n    vec4 a = texture2D(tex, coord);\n    vec4 b = texture2D(tex, coord + u_sampleInfo.y);\n    float c = fract(coord.x * u_sampleInfo.x);\n    w = mix(a.w, b.w, c);\n    return mix(a.xyz, b.xyz, c);\n}\nfloat pseudoRandom (float seed) {\n  seed = mod(seed, 233280.);\n  float q = (seed * 9301. + 49297.) / 233280.;\n  return fract(q);\n}\n#if COLOR_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D color_over_time_tex0;\n  uniform int u_color_mode;\n#endif\n#if ROTATION_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D rotation_over_time_tex0;\n  uniform int u_rotation_mode;\n#endif\n#if SIZE_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D size_over_time_tex0;\n  uniform int u_size_mode;\n#endif\n#if FORCE_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D force_over_time_tex0;\n  uniform int u_force_mode;\nuniform int u_force_space;\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\n  uniform sampler2D velocity_over_time_tex0;\n  uniform int u_velocity_mode;\nuniform int u_velocity_space;\n#endif\n#if TEXTURE_ANIMATION_MODULE_ENABLE\n  uniform sampler2D texture_animation_tex0;\n  uniform vec4 u_anim_info;\n#endif\nfloat repeat (float t, float length) {\n  return t - floor(t / length) * length;\n}\nvec4 rotateQuat (vec4 p, vec4 q) {\n  vec3 iv = cross(q.xyz, p.xyz) + q.w * p.xyz;\n  vec3 res = p.xyz + 2.0 * cross(q.xyz, iv);\n  return vec4(res.xyz, p.w);\n}\nvec4 gpvs_main () {\n  float activeTime = u_timeDelta.x - a_position_starttime.w;\n  float normalizedTime = clamp(activeTime / a_dir_life.w, 0.0, 1.0);\n  vec2 timeCoord0 = vec2(normalizedTime, 0.);\n  vec2 timeCoord1 = vec2(normalizedTime, 1.);\n  #if CC_RENDER_MODE == 4\n    vec2 vertIdx = vec2(a_texCoord.x, a_texCoord.y);\n  #else\n    vec2 vertIdx = vec2(a_size_uv.w, a_rotation_uv.w);\n  #endif\n  vec4 velocity = vec4(a_dir_life.xyz, 0.);\n  vec4 pos = vec4(a_position_starttime.xyz, 1.);\n  vec3 size = a_size_uv.xyz;\n  #if SIZE_OVER_TIME_MODULE_ENABLE\n    if (u_size_mode == 1) {\n      size *= unpackCurveData(size_over_time_tex0, timeCoord0);\n    } else {\n      vec3 size_0 = unpackCurveData(size_over_time_tex0, timeCoord0);\n      vec3 size_1 = unpackCurveData(size_over_time_tex0, timeCoord1);\n      float factor_s = pseudoRandom(a_rndSeed + 39825.);\n      size *= mix(size_0, size_1, factor_s);\n    }\n  #endif\n  vec3 compScale = scale.xyz * size;\n  #if FORCE_OVER_TIME_MODULE_ENABLE\n    vec3 forceAnim = vec3(0.);\n    if (u_force_mode == 1) {\n      forceAnim = unpackCurveData(force_over_time_tex0, timeCoord0);\n    } else {\n      vec3 force_0 = unpackCurveData(force_over_time_tex0, timeCoord0);\n      vec3 force_1 = unpackCurveData(force_over_time_tex0, timeCoord1);\n      float factor_f =  pseudoRandom(a_rndSeed + 212165.);\n      forceAnim = mix(force_0, force_1, factor_f);\n    }\n    vec4 forceTrack = vec4(forceAnim, 0.);\n    if (u_force_space == 0) {\n      forceTrack = rotateQuat(forceTrack, u_worldRot);\n    }\n    velocity.xyz += forceTrack.xyz;\n  #endif\n  #if VELOCITY_OVER_TIME_MODULE_ENABLE\n    float speedModifier0 = 1.;\n    float speedModifier1 = 1.;\n    vec3 velocityAnim = vec3(0.);\n    if (u_velocity_mode == 1) {\n      velocityAnim = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n    } else {\n      vec3 vectory_0 = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n      vec3 vectory_1 = unpackCurveData(velocity_over_time_tex0, timeCoord1, speedModifier1);\n      float factor_v = pseudoRandom(a_rndSeed + 197866.);\n      velocityAnim = mix(vectory_0, vectory_1, factor_v);\n      speedModifier0 = mix(speedModifier0, speedModifier1, factor_v);\n    }\n    vec4 velocityTrack = vec4(velocityAnim, 0.);\n    if (u_velocity_space == 0) {\n      velocityTrack = rotateQuat(velocityTrack, u_worldRot);\n    }\n    velocity.xyz += velocityTrack.xyz;\n    velocity.xyz *= speedModifier0;\n  #endif\n  pos.xyz += velocity.xyz * normalizedTime * a_dir_life.w;\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    #if CC_RENDER_MODE == 1\n      velocity = rotateQuat(velocity, u_worldRot);\n    #endif\n  #endif\n  vec3 rotation = a_rotation_uv.xyz;\n  #if ROTATION_OVER_TIME_MODULE_ENABLE\n    if (u_rotation_mode == 1) {\n      rotation += unpackCurveData(rotation_over_time_tex0, timeCoord0) * normalizedTime * a_dir_life.w;\n    } else {\n      vec3 rotation_0 = unpackCurveData(rotation_over_time_tex0, timeCoord0);\n      vec3 rotation_1 = unpackCurveData(rotation_over_time_tex0, timeCoord1);\n      float factor_r = pseudoRandom(a_rndSeed + 125292.);\n      rotation += mix(rotation_0, rotation_1, factor_r) * normalizedTime * a_dir_life.w;\n    }\n  #endif\n  #if COLOR_OVER_TIME_MODULE_ENABLE\n    if (u_color_mode == 1) {\n      color = a_color * texture2D(color_over_time_tex0, timeCoord0);\n    } else {\n      vec4 color_0 = texture2D(color_over_time_tex0, timeCoord0);\n      vec4 color_1 = texture2D(color_over_time_tex0, timeCoord1);\n      float factor_c = pseudoRandom(a_rndSeed + 91041.);\n      color = a_color * mix(color_0, color_1, factor_c);\n    }\n  #else\n    color = a_color;\n  #endif\n  #if CC_RENDER_MODE != 4\n    vec2 cornerOffset = vec2((vertIdx - 0.5));\n    #if CC_RENDER_MODE == 0\n      vec3 rotEuler = rotation.xyz;\n    #elif CC_RENDER_MODE == 1\n      vec3 rotEuler = vec3(0.);\n    #else\n      vec3 rotEuler = vec3(0., 0., rotation.z);\n    #endif\n    computeVertPos(pos, cornerOffset, quaternionFromEuler(rotEuler), compScale\n      #if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n        , cc_matViewInv\n      #endif\n      #if CC_RENDER_MODE == 1\n        , cc_cameraPos.xyz\n        , velocity\n        , frameTile_velLenScale.z\n        , frameTile_velLenScale.w\n        , a_size_uv.w\n      #endif\n    );\n  #else\n    mat4 xformNoScale = matrixFromRT(quaternionFromEuler(rotation), pos.xyz);\n    mat4 xform = matFromRTS(quaternionFromEuler(rotation), pos.xyz, compScale);\n    pos = xform * vec4(a_texCoord3, 1);\n    vec4 normal = xformNoScale * vec4(a_normal, 0);\n    color *= a_color1;\n  #endif\n  pos = cc_matViewProj * pos;\n  float frameIndex = 0.;\n  #if TEXTURE_ANIMATION_MODULE_ENABLE\n    float startFrame = 0.;\n    vec3 frameInfo = vec3(0.);\n    if (int(u_anim_info.x) == 1) {\n      frameInfo = unpackCurveData(texture_animation_tex0, timeCoord0);\n    } else {\n      vec3 frameInfo0 = unpackCurveData(texture_animation_tex0, timeCoord0);\n      vec3 frameInfo1 = unpackCurveData(texture_animation_tex0, timeCoord1);\n      float factor_t = pseudoRandom(a_rndSeed + 90794.);\n      frameInfo = mix(frameInfo0, frameInfo1, factor_t);\n    }\n    startFrame = frameInfo.x / u_anim_info.y;\n    frameIndex = repeat(u_anim_info.z * (frameInfo.y + startFrame), 1.);\n  #endif\n  uv = computeUV(frameIndex, vertIdx, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\n  return pos;\n}\nvoid main() { gl_Position = gpvs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\n  return CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"COLOR_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"ROTATION_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"SIZE_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"FORCE_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"VELOCITY_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"TEXTURE_ANIMATION_MODULE_ENABLE",type:"boolean"},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"SampleConstants",defines:[],binding:1,members:[{name:"u_sampleInfo",type:16,count:1}]},{name:"TickConstants",defines:[],binding:2,members:[{name:"u_worldRot",type:16,count:1},{name:"u_timeDelta",type:16,count:1}]},{name:"ColorConstant",defines:["COLOR_OVER_TIME_MODULE_ENABLE"],binding:3,members:[{name:"u_color_mode",type:5,count:1}]},{name:"RotationConstant",defines:["ROTATION_OVER_TIME_MODULE_ENABLE"],binding:4,members:[{name:"u_rotation_mode",type:5,count:1}]},{name:"SizeConstant",defines:["SIZE_OVER_TIME_MODULE_ENABLE"],binding:5,members:[{name:"u_size_mode",type:5,count:1}]},{name:"ForceConstant",defines:["FORCE_OVER_TIME_MODULE_ENABLE"],binding:6,members:[{name:"u_force_mode",type:5,count:1},{name:"u_force_space",type:5,count:1}]},{name:"VelocityConstant",defines:["VELOCITY_OVER_TIME_MODULE_ENABLE"],binding:7,members:[{name:"u_velocity_mode",type:5,count:1},{name:"u_velocity_space",type:5,count:1}]},{name:"AnimationConstant",defines:["TEXTURE_ANIMATION_MODULE_ENABLE"],binding:8,members:[{name:"u_anim_info",type:16,count:1}]},{name:"FragConstants",defines:[],binding:9,members:[{name:"tintColor",type:16,count:1}]}],samplers:[{name:"color_over_time_tex0",type:28,count:1,defines:["COLOR_OVER_TIME_MODULE_ENABLE"],binding:31},{name:"rotation_over_time_tex0",type:28,count:1,defines:["ROTATION_OVER_TIME_MODULE_ENABLE"],binding:32},{name:"size_over_time_tex0",type:28,count:1,defines:["SIZE_OVER_TIME_MODULE_ENABLE"],binding:33},{name:"force_over_time_tex0",type:28,count:1,defines:["FORCE_OVER_TIME_MODULE_ENABLE"],binding:34},{name:"velocity_over_time_tex0",type:28,count:1,defines:["VELOCITY_OVER_TIME_MODULE_ENABLE"],binding:35},{name:"texture_animation_tex0",type:28,count:1,defines:["TEXTURE_ANIMATION_MODULE_ENABLE"],binding:36},{name:"mainTexture",type:28,count:1,defines:[],binding:37}],attributes:[{name:"a_position_starttime",type:16,count:1,defines:[],format:43,location:0},{name:"a_size_uv",type:16,count:1,defines:[],format:43,location:1},{name:"a_rotation_uv",type:16,count:1,defines:[],format:43,location:2},{name:"a_color",type:16,count:1,defines:[],format:43,location:3},{name:"a_dir_life",type:16,count:1,defines:[],format:43,location:4},{name:"a_rndSeed",type:13,count:1,defines:[],format:11,location:5},{name:"a_texCoord",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:6},{name:"a_texCoord3",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:7},{name:"a_normal",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:8},{name:"a_color1",type:16,count:1,defines:["CC_RENDER_MODE"],format:43,location:9}]}]},{name:"builtin-particle-trail",_uuid:"17debcc3-0a6b-4b8a-b00b-dc58b885581e",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"builtin-particle-trail|particle-trail:vs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},frameTile_velLenScale:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"builtin-particle-trail|particle-trail:vs_main|tinted-fs:add",hash:535523547,glsl3:{vert:"\nprecision mediump float;\nuniform Constants {\n  vec4 mainTiling_Offset;\n  vec4 frameTile_velLenScale;\n  vec4 scale;\n};\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\nout vec2 uv;\nout vec4 color;\nin vec3 a_position;\nin vec4 a_texCoord;\nin vec3 a_texCoord1;\nin vec3 a_texCoord2;\nin vec4 a_color;\n#if CC_DRAW_WIRE_FRAME\n  out vec3 vBarycentric;\n#endif\nvec4 vs_main() {\n  highp vec4 pos = vec4(a_position, 1);\n  vec4 velocity = vec4(a_texCoord1.xyz, 0);\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    velocity = cc_matWorld * velocity;\n  #endif\n  float vertOffset = (a_texCoord.x - 0.5) * a_texCoord.y;\n  vec3 camUp = normalize(cross(pos.xyz - cc_cameraPos.xyz, velocity.xyz));\n  pos.xyz += camUp * vertOffset;\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.zw * mainTiling_Offset.xy + mainTiling_Offset.zw;;\n  color = a_color;\n  #if CC_DRAW_WIRE_FRAME\n    vBarycentric = a_texCoord2;\n  #endif\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\n  precision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n  in vec2 uv;\n  in vec4 color;\n  #if CC_DRAW_WIRE_FRAME\n    in vec3 vBarycentric;\n  #endif\n  uniform sampler2D mainTexture;\n  uniform FragConstants {\n    vec4 tintColor;\n  };\n  vec4 add () {\n    vec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n#if CC_DRAW_WIRE_FRAME\n    if (any(lessThan(vBarycentric, vec3(0.02)))) {\n        col = vec4(0., 1., 1., 1.);\n    }\n#endif\n    return CCFragOutput(col);\n  }\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"},glsl1:{vert:"\nprecision mediump float;\nuniform vec4 mainTiling_Offset;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying vec2 uv;\nvarying vec4 color;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec3 a_texCoord1;\nattribute vec3 a_texCoord2;\nattribute vec4 a_color;\n#if CC_DRAW_WIRE_FRAME\n  varying vec3 vBarycentric;\n#endif\nvec4 vs_main() {\n  highp vec4 pos = vec4(a_position, 1);\n  vec4 velocity = vec4(a_texCoord1.xyz, 0);\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    velocity = cc_matWorld * velocity;\n  #endif\n  float vertOffset = (a_texCoord.x - 0.5) * a_texCoord.y;\n  vec3 camUp = normalize(cross(pos.xyz - cc_cameraPos.xyz, velocity.xyz));\n  pos.xyz += camUp * vertOffset;\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.zw * mainTiling_Offset.xy + mainTiling_Offset.zw;;\n  color = a_color;\n  #if CC_DRAW_WIRE_FRAME\n    vBarycentric = a_texCoord2;\n  #endif\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\n  precision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n  varying vec2 uv;\n  varying vec4 color;\n  #if CC_DRAW_WIRE_FRAME\n    varying vec3 vBarycentric;\n  #endif\n  uniform sampler2D mainTexture;\n  uniform vec4 tintColor;\n  vec4 add () {\n    vec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\n#if CC_DRAW_WIRE_FRAME\n    if (any(lessThan(vBarycentric, vec3(0.02)))) {\n        col = vec4(0., 1., 1., 1.);\n    }\n#endif\n    return CCFragOutput(col);\n  }\nvoid main() { gl_FragColor = add(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"CC_DRAW_WIRE_FRAME",type:"boolean"},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"FragConstants",defines:[],binding:1,members:[{name:"tintColor",type:16,count:1}]}],samplers:[{name:"mainTexture",type:28,count:1,defines:[],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_texCoord",type:16,count:1,defines:[],format:43,location:1},{name:"a_texCoord1",type:15,count:1,defines:[],format:32,location:2},{name:"a_texCoord2",type:15,count:1,defines:[],format:32,location:3},{name:"a_color",type:16,count:1,defines:[],format:43,location:4}]}]},{name:"builtin-particle",_uuid:"d1346436-ac96-4271-b863-1f4fdead95b0",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"builtin-particle|particle-vs-legacy:lpvs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"builtin-particle|particle-vs-legacy:lpvs_main|tinted-fs:add",hash:2171161221,glsl3:{vert:"\nprecision highp float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\n  float x2 = q.x + q.x;\n  float y2 = q.y + q.y;\n  float z2 = q.z + q.z;\n  float xx = q.x * x2;\n  float xy = q.x * y2;\n  float xz = q.x * z2;\n  float yy = q.y * y2;\n  float yz = q.y * z2;\n  float zz = q.z * z2;\n  float wx = q.w * x2;\n  float wy = q.w * y2;\n  float wz = q.w * z2;\n  return mat4(\n    1. - (yy + zz), xy + wz, xz - wy, 0,\n    xy - wz, 1. - (xx + zz), yz + wx, 0,\n    xz + wy, yz - wx, 1. - (xx + yy), 0,\n    p.x, p.y, p.z, 1\n  );\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\n  float x = q.x, y = q.y, z = q.z, w = q.w;\n  float x2 = x + x;\n  float y2 = y + y;\n  float z2 = z + z;\n  float xx = x * x2;\n  float xy = x * y2;\n  float xz = x * z2;\n  float yy = y * y2;\n  float yz = y * z2;\n  float zz = z * z2;\n  float wx = w * x2;\n  float wy = w * y2;\n  float wz = w * z2;\n  float sx = s.x;\n  float sy = s.y;\n  float sz = s.z;\n  return mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n    (xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n    (xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\n    t.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nuniform Constants {\n  vec4 mainTiling_Offset;\n  vec4 frameTile_velLenScale;\n  vec4 scale;\n};\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\nout vec2 uv;\nout vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n  , mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n  , vec3 eye\n  , vec4 velocity\n  , float velocityScale\n  , float lengthScale\n  , float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\n  vec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\n  vec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\n  pos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = vec3(1, 0, 0);\n  vec3 camY = vec3(0, 0, -1);\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\n  vec2 viewSpaceVert = vec2(vertOffset.x * s.x, vertOffset.y * s.y);\n  rotateCorner(viewSpaceVert, q.z);\n  vec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\n  vec3 camY = vec3(0, 1, 0);\n  vec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\n  pos.xyz += offset;\n#else\n  pos.x += vertOffset.x;\n  pos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\n  vec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\n  aniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\n  vertIndex.y = 1. - vertIndex.y;\n#endif\n  return (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nin vec3 a_position;\nin vec3 a_texCoord;\nin vec3 a_texCoord1;\nin vec3 a_texCoord2;\nin vec4 a_color;\n#if CC_RENDER_MODE == 1\n  in vec3 a_color1;\n#endif\n#if CC_RENDER_MODE == 4\n  in vec3 a_texCoord3;\n  in vec3 a_normal;\n  in vec4 a_color1;\n#endif\nvec4 lpvs_main () {\n  vec3 compScale = scale.xyz * a_texCoord1;\n  vec4 pos = vec4(a_position, 1);\n  #if CC_RENDER_MODE == 1\n    vec4 velocity = vec4(a_color1.xyz, 0);\n  #endif\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    #if CC_RENDER_MODE == 1\n      velocity = cc_matWorld * velocity;\n    #endif\n  #endif\n  #if CC_RENDER_MODE != 4\n    vec2 cornerOffset = vec2((a_texCoord.xy - 0.5));\n    #if CC_RENDER_MODE == 0\n      vec3 rotEuler = a_texCoord2;\n    #elif CC_RENDER_MODE == 1\n      vec3 rotEuler = vec3(0.);\n    #else\n      vec3 rotEuler = vec3(0., 0., a_texCoord2.z);\n    #endif\n    computeVertPos(pos, cornerOffset, quaternionFromEuler(rotEuler), compScale\n    #if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n      , cc_matViewInv\n    #endif\n    #if CC_RENDER_MODE == 1\n      , cc_cameraPos.xyz\n      , velocity\n      , frameTile_velLenScale.z\n      , frameTile_velLenScale.w\n      , a_texCoord.x\n    #endif\n    );\n    color = a_color;\n  #else\n    mat4 xformNoScale = matrixFromRT(quaternionFromEuler(a_texCoord2), pos.xyz);\n    mat4 xform = matFromRTS(quaternionFromEuler(a_texCoord2), pos.xyz, compScale);\n    pos = xform * vec4(a_texCoord3, 1);\n    vec4 normal = xformNoScale * vec4(a_normal, 0);\n    color = a_color * a_color1;\n  #endif\n  uv = computeUV(a_texCoord.z, a_texCoord.xy, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\n  pos = cc_matViewProj * pos;\n  return pos;\n}\nvoid main() { gl_Position = lpvs_main(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nuniform FragConstants {\n  vec4 tintColor;\n};\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n  return CCFragOutput(col);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"},glsl1:{vert:"\nprecision highp float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\n  float x2 = q.x + q.x;\n  float y2 = q.y + q.y;\n  float z2 = q.z + q.z;\n  float xx = q.x * x2;\n  float xy = q.x * y2;\n  float xz = q.x * z2;\n  float yy = q.y * y2;\n  float yz = q.y * z2;\n  float zz = q.z * z2;\n  float wx = q.w * x2;\n  float wy = q.w * y2;\n  float wz = q.w * z2;\n  return mat4(\n    1. - (yy + zz), xy + wz, xz - wy, 0,\n    xy - wz, 1. - (xx + zz), yz + wx, 0,\n    xz + wy, yz - wx, 1. - (xx + yy), 0,\n    p.x, p.y, p.z, 1\n  );\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\n  float x = q.x, y = q.y, z = q.z, w = q.w;\n  float x2 = x + x;\n  float y2 = y + y;\n  float z2 = z + z;\n  float xx = x * x2;\n  float xy = x * y2;\n  float xz = x * z2;\n  float yy = y * y2;\n  float yz = y * z2;\n  float zz = z * z2;\n  float wx = w * x2;\n  float wy = w * y2;\n  float wz = w * z2;\n  float sx = s.x;\n  float sy = s.y;\n  float sz = s.z;\n  return mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n    (xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n    (xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\n    t.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvoid rotateCorner (inout vec2 corner, float angle){\n  float xOS = cos(angle) * corner.x - sin(angle) * corner.y;\n  float yOS = sin(angle) * corner.x + cos(angle) * corner.y;\n  corner.x = xOS;\n  corner.y = yOS;\n}\nuniform vec4 mainTiling_Offset;\nuniform vec4 frameTile_velLenScale;\nuniform vec4 scale;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying vec2 uv;\nvarying vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n  , mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n  , vec3 eye\n  , vec4 velocity\n  , float velocityScale\n  , float lengthScale\n  , float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\n  vec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\n  vec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\n  pos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = vec3(1, 0, 0);\n  vec3 camY = vec3(0, 0, -1);\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\n  vec2 viewSpaceVert = vec2(vertOffset.x * s.x, vertOffset.y * s.y);\n  rotateCorner(viewSpaceVert, q.z);\n  vec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\n  vec3 camY = vec3(0, 1, 0);\n  vec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\n  pos.xyz += offset;\n#else\n  pos.x += vertOffset.x;\n  pos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\n  vec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\n  aniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\n  vertIndex.y = 1. - vertIndex.y;\n#endif\n  return (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nattribute vec3 a_position;\nattribute vec3 a_texCoord;\nattribute vec3 a_texCoord1;\nattribute vec3 a_texCoord2;\nattribute vec4 a_color;\n#if CC_RENDER_MODE == 1\n  attribute vec3 a_color1;\n#endif\n#if CC_RENDER_MODE == 4\n  attribute vec3 a_texCoord3;\n  attribute vec3 a_normal;\n  attribute vec4 a_color1;\n#endif\nvec4 lpvs_main () {\n  vec3 compScale = scale.xyz * a_texCoord1;\n  vec4 pos = vec4(a_position, 1);\n  #if CC_RENDER_MODE == 1\n    vec4 velocity = vec4(a_color1.xyz, 0);\n  #endif\n  #if !CC_USE_WORLD_SPACE\n    pos = cc_matWorld * pos;\n    #if CC_RENDER_MODE == 1\n      velocity = cc_matWorld * velocity;\n    #endif\n  #endif\n  #if CC_RENDER_MODE != 4\n    vec2 cornerOffset = vec2((a_texCoord.xy - 0.5));\n    #if CC_RENDER_MODE == 0\n      vec3 rotEuler = a_texCoord2;\n    #elif CC_RENDER_MODE == 1\n      vec3 rotEuler = vec3(0.);\n    #else\n      vec3 rotEuler = vec3(0., 0., a_texCoord2.z);\n    #endif\n    computeVertPos(pos, cornerOffset, quaternionFromEuler(rotEuler), compScale\n    #if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n      , cc_matViewInv\n    #endif\n    #if CC_RENDER_MODE == 1\n      , cc_cameraPos.xyz\n      , velocity\n      , frameTile_velLenScale.z\n      , frameTile_velLenScale.w\n      , a_texCoord.x\n    #endif\n    );\n    color = a_color;\n  #else\n    mat4 xformNoScale = matrixFromRT(quaternionFromEuler(a_texCoord2), pos.xyz);\n    mat4 xform = matFromRTS(quaternionFromEuler(a_texCoord2), pos.xyz, compScale);\n    pos = xform * vec4(a_texCoord3, 1);\n    vec4 normal = xformNoScale * vec4(a_normal, 0);\n    color = a_color * a_color1;\n  #endif\n  uv = computeUV(a_texCoord.z, a_texCoord.xy, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\n  pos = cc_matViewProj * pos;\n  return pos;\n}\nvoid main() { gl_Position = lpvs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\n  vec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\n  return CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"FragConstants",defines:[],binding:1,members:[{name:"tintColor",type:16,count:1}]}],samplers:[{name:"mainTexture",type:28,count:1,defines:[],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_texCoord",type:15,count:1,defines:[],format:32,location:1},{name:"a_texCoord1",type:15,count:1,defines:[],format:32,location:2},{name:"a_texCoord2",type:15,count:1,defines:[],format:32,location:3},{name:"a_color",type:16,count:1,defines:[],format:43,location:4},{name:"a_color1",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:5},{name:"a_texCoord3",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:6},{name:"a_normal",type:15,count:1,defines:["CC_RENDER_MODE"],format:32,location:7}]}]},{name:"builtin-sprite",_uuid:"60f7195c-ec2a-45eb-ba94-8955f60e81d0",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"builtin-sprite|sprite-vs:vert|sprite-fs:frag",priority:244,depthStencilState:{depthTest:!1,depthWrite:!1},properties:{mainTexture:{value:"white",type:28}}}]}],shaders:[{name:"builtin-sprite|sprite-vs:vert|sprite-fs:frag",hash:447598955,glsl3:{vert:"\nprecision highp float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\n#if USE_LOCAL\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\n#endif\nin vec3 a_position;\nin vec4 a_color;\nout vec4 color;\nin vec2 a_texCoord;\nout vec2 uv0;\nvec4 vert () {\n  vec4 pos = vec4(a_position, 1);\n  #if USE_LOCAL\n    pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n    pos = cc_matViewProj * pos;\n  #endif\n  uv0 = a_texCoord;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nin vec4 color;\n#if USE_TEXTURE\n  in vec2 uv0;\n  uniform sampler2D mainTexture;\n#endif\nvec4 frag () {\n  vec4 o = vec4(1, 1, 1, 1);\n  #if USE_TEXTURE\n    o *= texture(mainTexture, uv0);\n    #if IS_GRAY\n      float gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\n      o.r = o.g = o.b = gray;\n    #endif\n  #endif\n  o *= color;\n  return o;\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nuniform highp mat4 cc_matViewProj;\n#if USE_LOCAL\nuniform highp mat4 cc_matWorld;\n#endif\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 color;\nattribute vec2 a_texCoord;\nvarying vec2 uv0;\nvec4 vert () {\n  vec4 pos = vec4(a_position, 1);\n  #if USE_LOCAL\n    pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n    pos = cc_matViewProj * pos;\n  #endif\n  uv0 = a_texCoord;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvarying vec4 color;\n#if USE_TEXTURE\n  varying vec2 uv0;\n  uniform sampler2D mainTexture;\n#endif\nvec4 frag () {\n  vec4 o = vec4(1, 1, 1, 1);\n  #if USE_TEXTURE\n    o *= texture2D(mainTexture, uv0);\n    #if IS_GRAY\n      float gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\n      o.r = o.g = o.b = gray;\n    #endif\n  #endif\n  o *= color;\n  return o;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:["USE_LOCAL"]}],samplers:[]}},defines:[{name:"USE_LOCAL",type:"boolean"},{name:"USE_TEXTURE",type:"boolean"},{name:"IS_GRAY",type:"boolean"}],blocks:[],samplers:[{name:"mainTexture",type:28,count:1,defines:["USE_TEXTURE"],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_color",type:16,count:1,defines:[],format:43,location:1},{name:"a_texCoord",type:14,count:1,defines:[],format:21,location:2}]}]},{name:"builtin-standard",_uuid:"1baf0fc9-befa-459c-8bdd-af1a450a0319",techniques:[{name:"opaque",passes:[{program:"builtin-standard|standard-vs:vert|standard-fs:frag",properties:{tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16,handleInfo:["albedo",0,16]},albedoScale:{value:[1,1,1],type:15,handleInfo:["albedoScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["albedoScaleAndCutoff",3,13]},occlusion:{value:[1],type:13,handleInfo:["pbrParams",0,13]},roughness:{value:[.8],type:13,handleInfo:["pbrParams",1,13]},metallic:{value:[.6],type:13,handleInfo:["pbrParams",2,13]},normalStrenth:{value:[1],type:13,handleInfo:["pbrParams",3,13]},emissive:{value:[0,0,0,1],type:16},emissiveScale:{value:[1,1,1],type:15,handleInfo:["emissiveScaleParam",0,15]},mainTexture:{value:"grey",type:28,handleInfo:["albedoMap",0,28]},normalMap:{value:"normal",type:28},pbrMap:{value:"grey",type:28},metallicRoughnessMap:{value:"grey",type:28},occlusionMap:{value:"white",type:28},emissiveMap:{value:"grey",type:28},albedo:{type:16,value:[1,1,1,1]},albedoScaleAndCutoff:{type:16,value:[1,1,1,.5]},pbrParams:{type:16,value:[1,.8,.6,1]},emissiveScaleParam:{type:16,value:[1,1,1,0]},albedoMap:{type:28,value:"grey"}}}]}],shaders:[{name:"builtin-standard|standard-vs:vert|standard-fs:frag",hash:3284921961,glsl3:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n};\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_weights;\nin vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    in highp vec4 a_jointAnimInfo;\n  #endif\n  uniform CCSkinningTexture {\n    highp vec4 cc_jointTextureInfo;\n  };\n  uniform CCSkinningAnimation {\n    highp vec4 cc_jointAnimInfo;\n  };\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform CCSkinning {\n    highp vec4 cc_joints[30 * 3];\n  };\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\n#endif\nuniform Constants {\n  vec4 tilingOffset;\n  vec4 albedo;\n  vec4 albedoScaleAndCutoff;\n  vec4 pbrParams;\n  vec4 emissive;\n  vec4 emissiveScaleParam;\n};\n#if USE_VERTEX_COLOR\n  in vec3 a_color;\n  out vec3 v_color;\n#endif\nout vec3 v_position;\nout vec3 v_normal;\n#if USE_NORMAL_MAP\n  out vec3 v_tangent;\n  out vec3 v_bitangent;\n#endif\nin vec2 a_texCoord;\nout vec2 v_uv;\nin vec2 a_texCoord1;\nout vec2 v_uv1;\n#if USE_LIGHTMAP && !USE_BATCHING && !USE_INSTANCING\n  out vec2 v_luv;\n#endif\nvec4 vert () {\n  StandardVertInput In;\n  In.position = vec4(a_position, 1.0);\n  In.normal = a_normal;\n  In.tangent = a_tangent;\n  #if CC_USE_MORPH\n    applyMorph(In);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(In);\n  #endif\n  mat4 matWorld, matWorldIT;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n    matWorldIT = matWorld;\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n    matWorldIT = matWorld;\n  #else\n    matWorld = cc_matWorld;\n    matWorldIT = cc_matWorldIT;\n  #endif\n  vec4 pos = matWorld * In.position;\n  v_position = pos.xyz;\n  v_normal = normalize((matWorldIT * vec4(In.normal, 0.0)).xyz);\n  #if USE_NORMAL_MAP\n    v_tangent = normalize((matWorld * vec4(In.tangent.xyz, 0.0)).xyz);\n    v_bitangent = cross(v_normal, v_tangent) * In.tangent.w;\n  #endif\n  v_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n  #if HAS_SECOND_UV\n    v_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n  #endif\n  #if USE_VERTEX_COLOR\n    v_color = a_color;\n  #endif\n  #if USE_LIGHTMAP && HAS_SECOND_UV && !USE_BATCHING && !USE_INSTANCING\n    v_luv = cc_lightingMapUVParam.xy + a_texCoord1 * cc_lightingMapUVParam.zw;\n  #endif\n  return cc_matProj * (cc_matView * matWorld) * In.position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\n  return rgbe.rgb * pow(2.0, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\n    return textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\n    return textureLod(tex, coord, lod);\n}\n#endif\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nuniform CCForwardLight {\n  highp vec4 cc_sphereLitPos[2];\n  vec4 cc_sphereLitSizeRange[2];\n  vec4 cc_sphereLitColor[2];\n  highp vec4 cc_spotLitPos[2];\n  vec4 cc_spotLitSizeRangeAngle[2];\n  vec4 cc_spotLitDir[2];\n  vec4 cc_spotLitColor[2];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\n  float factor = distSqr * invSqrAttRadius;\n  float smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\n  return smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\n  float attenuation = 1.0 / max(distSqr, 0.01*0.01);\n  attenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\n  return attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\n  float cd = dot(litDir, L);\n  float attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\n  return (attenuation * attenuation);\n}\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\n  vec3 NxH = cross(N, H);\n  float OneMinusNoHSqr = dot(NxH, NxH);\n  float a = roughness * roughness;\n  float n = NoH * a;\n  float p = a / (OneMinusNoHSqr + n * n);\n  return p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\n  return (roughness*0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\n  const vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\n  const vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\n  vec4 r = roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n  AB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\n  return specular * AB.x + AB.y;\n}\nvec3 CalcDynamicLighting (vec3 worldPos, vec3 N, vec3 V, vec3 diffuse, vec3 specular, float roughness) {\n  vec3 lighting = vec3(0.0);\n  vec3 diffuseContrib = diffuse / 3.14159265359;\n  for (int i = 0; i < 2; i++) {\n    vec3 PLU = cc_sphereLitPos[i].xyz - worldPos;\n    vec3 PL = normalize(PLU);\n    vec3 PH = normalize(PL + V);\n    float PNL = max(dot(N, PL), 0.001);\n    float PNH = max(dot(N, PH), 0.0);\n    float distSqr = dot(PLU, PLU);\n    float litRadius = cc_sphereLitSizeRange[i].x;\n    float litRadiusSqr = litRadius * litRadius;\n    float illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\n    float attRadiusSqrInv = 1.0 / max(cc_sphereLitSizeRange[i].y, 0.01);\n    attRadiusSqrInv *= attRadiusSqrInv;\n    float att = GetDistAtt(distSqr, attRadiusSqrInv);\n    vec3 lspec = specular * CalcSpecular(roughness, PNH, PH, N);\n    lighting += PNL * cc_sphereLitColor[i].rgb * cc_sphereLitColor[i].w * illum * att * (diffuseContrib + lspec);\n  }\n  for (int i = 0; i < 2; i++) {\n    vec3 SLU = cc_spotLitPos[i].xyz - worldPos;\n    vec3 SL = normalize(SLU);\n    vec3 SH = normalize(SL + V);\n    float SNL = max(dot(N, SL), 0.001);\n    float SNH = max(dot(N, SH), 0.0);\n    float distSqr = dot(SLU, SLU);\n    float litRadius = cc_spotLitSizeRangeAngle[i].x;\n    float litRadiusSqr = litRadius * litRadius;\n    float illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\n    float attRadiusSqrInv = 1.0 / max(cc_spotLitSizeRangeAngle[i].y, 0.01);\n    attRadiusSqrInv *= attRadiusSqrInv;\n    float cosInner = max(dot(-cc_spotLitDir[i].xyz, SL), 0.01);\n    float cosOuter = cc_spotLitSizeRangeAngle[i].z;\n    float litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\n    float litAngleOffset = -cosOuter * litAngleScale;\n    float att = GetDistAtt(distSqr, attRadiusSqrInv);\n    att *= GetAngleAtt(SL, -cc_spotLitDir[i].xyz, litAngleScale, litAngleOffset);\n    vec3 lspec = specular * CalcSpecular(roughness, SNH, SH, N);\n    lighting += SNL * cc_spotLitColor[i].rgb * cc_spotLitColor[i].w * illum * att * (diffuseContrib + lspec);\n  }\n  return lighting;\n}\nstruct StandardSurface {\n  vec4 albedo;\n  vec3 position;\n  vec3 normal;\n  vec3 emissive;\n  float roughness;\n  float metallic;\n  float occlusion;\n};\nvec4 CCStandardShading (StandardSurface s) {\n  vec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\n  vec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\n  vec3 N = normalize(s.normal);\n  vec3 V = normalize(cc_cameraPos.xyz - s.position);\n  vec3 L = normalize(-cc_mainLitDir.xyz);\n  vec3 H = normalize(L+V);\n  float NV = max(abs(dot(N, V)), 0.001);\n  float NL = max(dot(N, L), 0.001);\n  float NH = max(dot(N, H), 0.0);\n  specular = BRDFApprox(specular, s.roughness, NV);\n  vec3 diffuseContrib = diffuse / 3.14159265359;\n  vec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\n  vec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w * (diffuseContrib + specularContrib);\n  finalColor += CalcDynamicLighting(s.position, N, V, diffuse, specular, s.roughness);\n  float fAmb = 0.5 - N.y * 0.5;\n  vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n  finalColor += (ambDiff.rgb * diffuse);\n  #if CC_USE_IBL\n    vec3 R = normalize(reflect(-V, N));\n    vec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n    #if CC_USE_IBL == 2\n      vec3 env = unpackRGBE(envmap);\n    #else\n      vec3 env = SRGBToLinear(envmap.rgb);\n    #endif\n    finalColor += env * cc_ambientSky.w * specular;\n  #endif\n  finalColor = finalColor * s.occlusion;\n  #if CC_USE_HDR\n    s.emissive *= cc_exposure.w;\n  #endif\n  finalColor += s.emissive;\n  return vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\n  color = min(color, vec3(8.0));\n  const float A = 2.51;\n  const float B = 0.03;\n  const float C = 2.43;\n  const float D = 0.59;\n  const float E = 0.14;\n  return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n  #if !CC_USE_HDR\n    color.rgb = sqrt(ACESToneMap(color.rgb));\n  #endif\n  return color;\n}\nuniform Constants {\n  vec4 tilingOffset;\n  vec4 albedo;\n  vec4 albedoScaleAndCutoff;\n  vec4 pbrParams;\n  vec4 emissive;\n  vec4 emissiveScaleParam;\n};\nin vec3 v_position;\nin vec2 v_uv;\nin vec2 v_uv1;\nin vec3 v_normal;\n#if USE_VERTEX_COLOR\n  in vec3 v_color;\n#endif\n#if USE_ALBEDO_MAP\n  uniform sampler2D albedoMap;\n#endif\n#if USE_NORMAL_MAP\n  in vec3 v_tangent;\n  in vec3 v_bitangent;\n  uniform sampler2D normalMap;\n#endif\n#if USE_PBR_MAP\n  uniform sampler2D pbrMap;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\n  uniform sampler2D metallicRoughnessMap;\n#endif\n#if USE_OCCLUSION_MAP\n  uniform sampler2D occlusionMap;\n#endif\n#if USE_EMISSIVE_MAP\n  uniform sampler2D emissiveMap;\n#endif\n#if USE_LIGHTMAP\n  in vec2 v_luv;\n  uniform sampler2D cc_lightingMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvoid surf (out StandardSurface s) {\n  vec4 baseColor = albedo;\n  #if USE_VERTEX_COLOR\n    baseColor.rgb *= v_color;\n  #endif\n  #if USE_ALBEDO_MAP\n    vec4 texColor = texture(albedoMap, ALBEDO_UV);\n    texColor.rgb = SRGBToLinear(texColor.rgb);\n    baseColor *= texColor;\n  #endif\n  s.albedo = baseColor;\n  s.albedo.rgb *= albedoScaleAndCutoff.xyz;\n  #if USE_ALPHA_TEST\n    if (s.albedo.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n  #endif\n  s.normal = v_normal;\n  #if USE_NORMAL_MAP\n    vec3 nmmp = texture(normalMap, NORMAL_UV).xyz - vec3(0.5);\n    s.normal =\n      (nmmp.x * pbrParams.w) * normalize(v_tangent) +\n      (nmmp.y * pbrParams.w) * normalize(v_bitangent) +\n      nmmp.z * normalize(s.normal);\n  #endif\n  s.position = v_position;\n  vec4 pbr = pbrParams;\n  #if USE_PBR_MAP\n    vec4 res = texture(pbrMap, PBR_UV);\n    pbr.x *= res.OCCLUSION_CHANNEL;\n    pbr.y *= res.ROUGHNESS_CHANNEL;\n    pbr.z *= res.METALLIC_CHANNEL;\n  #endif\n  #if USE_METALLIC_ROUGHNESS_MAP\n    vec4 metallicRoughness = texture(metallicRoughnessMap, METALLIC_ROUGHNESS_UV);\n    pbr.z *= metallicRoughness.METALLIC_CHANNEL;\n    pbr.y *= metallicRoughness.ROUGHNESS_CHANNEL;\n  #endif\n  #if USE_OCCLUSION_MAP\n    pbr.x *= texture(occlusionMap, OCCLUSION_UV).OCCLUSION_CHANNEL;\n  #endif\n  s.occlusion = clamp(pbr.x, 0.0, 0.96);\n  s.roughness = clamp(pbr.y, 0.04, 1.0);\n  s.metallic = pbr.z;\n  s.emissive = emissive.rgb * emissiveScaleParam.xyz;\n  #if USE_EMISSIVE_MAP\n    s.emissive *= SRGBToLinear(texture(emissiveMap, EMISSIVE_UV).rgb);\n  #endif\n}\nvec4 frag () {\n  StandardSurface s; surf(s);\n  vec4 color = CCStandardShading(s);\n  #if USE_LIGHTMAP && !USE_BATCHING && !USE_INSTANCING\n    vec4 lighting = texture(cc_lightingMap, v_luv);\n    float fAmb = 0.5 - s.normal.y * 0.5;\n    vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n    vec3 finalColor = (ambDiff.rgb * s.albedo.rgb);\n    finalColor += lighting.rgb *  s.albedo.rgb;\n    finalColor = finalColor * s.occlusion;\n    finalColor += s.emissive;\n    color.rgb = lighting.a * finalColor + (1.0 - lighting.a) * color.rgb;\n  #endif\n  return CCFragOutput(color);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture2D(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_weights;\nattribute vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    attribute highp vec4 a_jointAnimInfo;\n  #endif\n  uniform highp vec4 cc_jointTextureInfo;\n  uniform highp vec4 cc_jointAnimInfo;\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  uniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\nuniform highp mat4 cc_matWorldIT;\nuniform highp vec4 cc_lightingMapUVParam;\n#endif\nuniform vec4 tilingOffset;\n#if USE_VERTEX_COLOR\n  attribute vec3 a_color;\n  varying vec3 v_color;\n#endif\nvarying vec3 v_position;\nvarying vec3 v_normal;\n#if USE_NORMAL_MAP\n  varying vec3 v_tangent;\n  varying vec3 v_bitangent;\n#endif\nattribute vec2 a_texCoord;\nvarying vec2 v_uv;\nattribute vec2 a_texCoord1;\nvarying vec2 v_uv1;\n#if USE_LIGHTMAP && !USE_BATCHING && !USE_INSTANCING\n  varying vec2 v_luv;\n#endif\nvec4 vert () {\n  StandardVertInput In;\n  In.position = vec4(a_position, 1.0);\n  In.normal = a_normal;\n  In.tangent = a_tangent;\n  #if CC_USE_MORPH\n    applyMorph(In);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(In);\n  #endif\n  mat4 matWorld, matWorldIT;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n    matWorldIT = matWorld;\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n    matWorldIT = matWorld;\n  #else\n    matWorld = cc_matWorld;\n    matWorldIT = cc_matWorldIT;\n  #endif\n  vec4 pos = matWorld * In.position;\n  v_position = pos.xyz;\n  v_normal = normalize((matWorldIT * vec4(In.normal, 0.0)).xyz);\n  #if USE_NORMAL_MAP\n    v_tangent = normalize((matWorld * vec4(In.tangent.xyz, 0.0)).xyz);\n    v_bitangent = cross(v_normal, v_tangent) * In.tangent.w;\n  #endif\n  v_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n  #if HAS_SECOND_UV\n    v_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n  #endif\n  #if USE_VERTEX_COLOR\n    v_color = a_color;\n  #endif\n  #if USE_LIGHTMAP && HAS_SECOND_UV && !USE_BATCHING && !USE_INSTANCING\n    v_luv = cc_lightingMapUVParam.xy + a_texCoord1 * cc_lightingMapUVParam.zw;\n  #endif\n  return cc_matProj * (cc_matView * matWorld) * In.position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\n  #ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n  #endif\nprecision highp float;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_exposure;\nuniform mediump vec4 cc_mainLitDir;\nuniform mediump vec4 cc_mainLitColor;\nuniform mediump vec4 cc_ambientSky;\nuniform mediump vec4 cc_ambientGround;\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\n  return rgbe.rgb * pow(2.0, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\n    #ifdef GL_EXT_shader_texture_lod\n      return texture2DLodEXT(tex, coord, lod);\n    #else\n      return texture2D(tex, coord, lod);\n    #endif\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\n    #ifdef GL_EXT_shader_texture_lod\n      return textureCubeLodEXT(tex, coord, lod);\n    #else\n      return textureCube(tex, coord, lod);\n    #endif\n}\n#endif\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nuniform highp vec4 cc_sphereLitPos[2];\nuniform vec4 cc_sphereLitSizeRange[2];\nuniform vec4 cc_sphereLitColor[2];\nuniform highp vec4 cc_spotLitPos[2];\nuniform vec4 cc_spotLitSizeRangeAngle[2];\nuniform vec4 cc_spotLitDir[2];\nuniform vec4 cc_spotLitColor[2];\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\n  float factor = distSqr * invSqrAttRadius;\n  float smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\n  return smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\n  float attenuation = 1.0 / max(distSqr, 0.01*0.01);\n  attenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\n  return attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\n  float cd = dot(litDir, L);\n  float attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\n  return (attenuation * attenuation);\n}\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\n  vec3 NxH = cross(N, H);\n  float OneMinusNoHSqr = dot(NxH, NxH);\n  float a = roughness * roughness;\n  float n = NoH * a;\n  float p = a / (OneMinusNoHSqr + n * n);\n  return p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\n  return (roughness*0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\n  const vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\n  const vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\n  vec4 r = roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n  AB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\n  return specular * AB.x + AB.y;\n}\nvec3 CalcDynamicLighting (vec3 worldPos, vec3 N, vec3 V, vec3 diffuse, vec3 specular, float roughness) {\n  vec3 lighting = vec3(0.0);\n  vec3 diffuseContrib = diffuse / 3.14159265359;\n  for (int i = 0; i < 2; i++) {\n    vec3 PLU = cc_sphereLitPos[i].xyz - worldPos;\n    vec3 PL = normalize(PLU);\n    vec3 PH = normalize(PL + V);\n    float PNL = max(dot(N, PL), 0.001);\n    float PNH = max(dot(N, PH), 0.0);\n    float distSqr = dot(PLU, PLU);\n    float litRadius = cc_sphereLitSizeRange[i].x;\n    float litRadiusSqr = litRadius * litRadius;\n    float illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\n    float attRadiusSqrInv = 1.0 / max(cc_sphereLitSizeRange[i].y, 0.01);\n    attRadiusSqrInv *= attRadiusSqrInv;\n    float att = GetDistAtt(distSqr, attRadiusSqrInv);\n    vec3 lspec = specular * CalcSpecular(roughness, PNH, PH, N);\n    lighting += PNL * cc_sphereLitColor[i].rgb * cc_sphereLitColor[i].w * illum * att * (diffuseContrib + lspec);\n  }\n  for (int i = 0; i < 2; i++) {\n    vec3 SLU = cc_spotLitPos[i].xyz - worldPos;\n    vec3 SL = normalize(SLU);\n    vec3 SH = normalize(SL + V);\n    float SNL = max(dot(N, SL), 0.001);\n    float SNH = max(dot(N, SH), 0.0);\n    float distSqr = dot(SLU, SLU);\n    float litRadius = cc_spotLitSizeRangeAngle[i].x;\n    float litRadiusSqr = litRadius * litRadius;\n    float illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\n    float attRadiusSqrInv = 1.0 / max(cc_spotLitSizeRangeAngle[i].y, 0.01);\n    attRadiusSqrInv *= attRadiusSqrInv;\n    float cosInner = max(dot(-cc_spotLitDir[i].xyz, SL), 0.01);\n    float cosOuter = cc_spotLitSizeRangeAngle[i].z;\n    float litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\n    float litAngleOffset = -cosOuter * litAngleScale;\n    float att = GetDistAtt(distSqr, attRadiusSqrInv);\n    att *= GetAngleAtt(SL, -cc_spotLitDir[i].xyz, litAngleScale, litAngleOffset);\n    vec3 lspec = specular * CalcSpecular(roughness, SNH, SH, N);\n    lighting += SNL * cc_spotLitColor[i].rgb * cc_spotLitColor[i].w * illum * att * (diffuseContrib + lspec);\n  }\n  return lighting;\n}\nstruct StandardSurface {\n  vec4 albedo;\n  vec3 position;\n  vec3 normal;\n  vec3 emissive;\n  float roughness;\n  float metallic;\n  float occlusion;\n};\nvec4 CCStandardShading (StandardSurface s) {\n  vec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\n  vec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\n  vec3 N = normalize(s.normal);\n  vec3 V = normalize(cc_cameraPos.xyz - s.position);\n  vec3 L = normalize(-cc_mainLitDir.xyz);\n  vec3 H = normalize(L+V);\n  float NV = max(abs(dot(N, V)), 0.001);\n  float NL = max(dot(N, L), 0.001);\n  float NH = max(dot(N, H), 0.0);\n  specular = BRDFApprox(specular, s.roughness, NV);\n  vec3 diffuseContrib = diffuse / 3.14159265359;\n  vec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\n  vec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w * (diffuseContrib + specularContrib);\n  finalColor += CalcDynamicLighting(s.position, N, V, diffuse, specular, s.roughness);\n  float fAmb = 0.5 - N.y * 0.5;\n  vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n  finalColor += (ambDiff.rgb * diffuse);\n  #if CC_USE_IBL\n    vec3 R = normalize(reflect(-V, N));\n    vec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n    #if CC_USE_IBL == 2\n      vec3 env = unpackRGBE(envmap);\n    #else\n      vec3 env = SRGBToLinear(envmap.rgb);\n    #endif\n    finalColor += env * cc_ambientSky.w * specular;\n  #endif\n  finalColor = finalColor * s.occlusion;\n  #if CC_USE_HDR\n    s.emissive *= cc_exposure.w;\n  #endif\n  finalColor += s.emissive;\n  return vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\n  color = min(color, vec3(8.0));\n  const float A = 2.51;\n  const float B = 0.03;\n  const float C = 2.43;\n  const float D = 0.59;\n  const float E = 0.14;\n  return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n  #if !CC_USE_HDR\n    color.rgb = sqrt(ACESToneMap(color.rgb));\n  #endif\n  return color;\n}\nuniform vec4 albedo;\nuniform vec4 albedoScaleAndCutoff;\nuniform vec4 pbrParams;\nuniform vec4 emissive;\nuniform vec4 emissiveScaleParam;\nvarying vec3 v_position;\nvarying vec2 v_uv;\nvarying vec2 v_uv1;\nvarying vec3 v_normal;\n#if USE_VERTEX_COLOR\n  varying vec3 v_color;\n#endif\n#if USE_ALBEDO_MAP\n  uniform sampler2D albedoMap;\n#endif\n#if USE_NORMAL_MAP\n  varying vec3 v_tangent;\n  varying vec3 v_bitangent;\n  uniform sampler2D normalMap;\n#endif\n#if USE_PBR_MAP\n  uniform sampler2D pbrMap;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\n  uniform sampler2D metallicRoughnessMap;\n#endif\n#if USE_OCCLUSION_MAP\n  uniform sampler2D occlusionMap;\n#endif\n#if USE_EMISSIVE_MAP\n  uniform sampler2D emissiveMap;\n#endif\n#if USE_LIGHTMAP\n  varying vec2 v_luv;\n  uniform sampler2D cc_lightingMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvoid surf (out StandardSurface s) {\n  vec4 baseColor = albedo;\n  #if USE_VERTEX_COLOR\n    baseColor.rgb *= v_color;\n  #endif\n  #if USE_ALBEDO_MAP\n    vec4 texColor = texture2D(albedoMap, ALBEDO_UV);\n    texColor.rgb = SRGBToLinear(texColor.rgb);\n    baseColor *= texColor;\n  #endif\n  s.albedo = baseColor;\n  s.albedo.rgb *= albedoScaleAndCutoff.xyz;\n  #if USE_ALPHA_TEST\n    if (s.albedo.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n  #endif\n  s.normal = v_normal;\n  #if USE_NORMAL_MAP\n    vec3 nmmp = texture2D(normalMap, NORMAL_UV).xyz - vec3(0.5);\n    s.normal =\n      (nmmp.x * pbrParams.w) * normalize(v_tangent) +\n      (nmmp.y * pbrParams.w) * normalize(v_bitangent) +\n      nmmp.z * normalize(s.normal);\n  #endif\n  s.position = v_position;\n  vec4 pbr = pbrParams;\n  #if USE_PBR_MAP\n    vec4 res = texture2D(pbrMap, PBR_UV);\n    pbr.x *= res.OCCLUSION_CHANNEL;\n    pbr.y *= res.ROUGHNESS_CHANNEL;\n    pbr.z *= res.METALLIC_CHANNEL;\n  #endif\n  #if USE_METALLIC_ROUGHNESS_MAP\n    vec4 metallicRoughness = texture2D(metallicRoughnessMap, METALLIC_ROUGHNESS_UV);\n    pbr.z *= metallicRoughness.METALLIC_CHANNEL;\n    pbr.y *= metallicRoughness.ROUGHNESS_CHANNEL;\n  #endif\n  #if USE_OCCLUSION_MAP\n    pbr.x *= texture2D(occlusionMap, OCCLUSION_UV).OCCLUSION_CHANNEL;\n  #endif\n  s.occlusion = clamp(pbr.x, 0.0, 0.96);\n  s.roughness = clamp(pbr.y, 0.04, 1.0);\n  s.metallic = pbr.z;\n  s.emissive = emissive.rgb * emissiveScaleParam.xyz;\n  #if USE_EMISSIVE_MAP\n    s.emissive *= SRGBToLinear(texture2D(emissiveMap, EMISSIVE_UV).rgb);\n  #endif\n}\nvec4 frag () {\n  StandardSurface s; surf(s);\n  vec4 color = CCStandardShading(s);\n  #if USE_LIGHTMAP && !USE_BATCHING && !USE_INSTANCING\n    vec4 lighting = texture2D(cc_lightingMap, v_luv);\n    float fAmb = 0.5 - s.normal.y * 0.5;\n    vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n    vec3 finalColor = (ambDiff.rgb * s.albedo.rgb);\n    finalColor += lighting.rgb *  s.albedo.rgb;\n    finalColor = finalColor * s.occlusion;\n    finalColor += s.emissive;\n    color.rgb = lighting.a * finalColor + (1.0 - lighting.a) * color.rgb;\n  #endif\n  return CCFragOutput(color);\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[{name:"cc_environment",defines:["CC_USE_IBL"]}]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]},{name:"CCForwardLight",defines:[]}],samplers:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"cc_lightingMap",defines:["USE_LIGHTMAP"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"CC_SUPPORT_FLOAT_TEXTURE",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_VERTEX_COLOR",type:"boolean"},{name:"USE_NORMAL_MAP",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"HAS_SECOND_UV",type:"boolean"},{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_ALBEDO_MAP",type:"boolean"},{name:"ALBEDO_UV",type:"string",options:["v_uv","v_uv1"]},{name:"NORMAL_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_PBR_MAP",type:"boolean"},{name:"PBR_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_METALLIC_ROUGHNESS_MAP",type:"boolean"},{name:"METALLIC_ROUGHNESS_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_OCCLUSION_MAP",type:"boolean"},{name:"OCCLUSION_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_EMISSIVE_MAP",type:"boolean"},{name:"EMISSIVE_UV",type:"string",options:["v_uv","v_uv1"]},{name:"OCCLUSION_CHANNEL",type:"string",options:["r","g","b"]},{name:"ROUGHNESS_CHANNEL",type:"string",options:["g","b","r"]},{name:"METALLIC_CHANNEL",type:"string",options:["b","r","g"]},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"ALPHA_TEST_CHANNEL",type:"string",options:["a","r"]}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"tilingOffset",type:16,count:1},{name:"albedo",type:16,count:1},{name:"albedoScaleAndCutoff",type:16,count:1},{name:"pbrParams",type:16,count:1},{name:"emissive",type:16,count:1},{name:"emissiveScaleParam",type:16,count:1}]}],samplers:[{name:"albedoMap",type:28,count:1,defines:["USE_ALBEDO_MAP"],binding:31},{name:"normalMap",type:28,count:1,defines:["USE_NORMAL_MAP"],binding:32},{name:"pbrMap",type:28,count:1,defines:["USE_PBR_MAP"],binding:33},{name:"metallicRoughnessMap",type:28,count:1,defines:["USE_METALLIC_ROUGHNESS_MAP"],binding:34},{name:"occlusionMap",type:28,count:1,defines:["USE_OCCLUSION_MAP"],binding:35},{name:"emissiveMap",type:28,count:1,defines:["USE_EMISSIVE_MAP"],binding:36}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],format:32,location:1},{name:"a_tangent",type:16,count:1,defines:[],format:43,location:2},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],format:11,location:3},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:4},{name:"a_joints",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:5},{name:"a_jointAnimInfo",type:16,count:1,precision:"highp ",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:43,isInstanced:!0,location:6},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:7},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:8},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:9},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:10},{name:"a_color",type:15,count:1,defines:["USE_VERTEX_COLOR"],format:32,location:11},{name:"a_texCoord",type:14,count:1,defines:[],format:21,location:12},{name:"a_texCoord1",type:14,count:1,defines:[],format:21,location:13}]}]},{name:"builtin-terrain",_uuid:"1d08ef62-a503-4ce2-8b9a-46c90873f7d3",techniques:[{name:"opaque",passes:[{program:"builtin-terrain|terrain-vs:vert|terrain-fs:frag",properties:{UVScale:{value:[1,1,1,1],type:16},lightMapUVParam:{value:[0,0,0,0],type:16},weightMap:{value:"black",type:28},detailMap0:{value:"grey",type:28},detailMap1:{value:"grey",type:28},detailMap2:{value:"grey",type:28},detailMap3:{value:"grey",type:28},lightMap:{value:"grey",type:28}}}]}],shaders:[{name:"builtin-terrain|terrain-vs:vert|terrain-fs:frag",hash:29493851,glsl3:{vert:"\n  precision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\n  in vec3 a_position;\n  in vec3 a_normal;\n  in vec2 a_texCoord;\n  out vec2 uvw;\n  out vec2 uv0;\n  out vec2 uv1;\n  out vec2 uv2;\n  out vec2 uv3;\n  out vec2 luv;\n  out vec3 diffuse;\n  uniform TexCoords {\n    vec4 UVScale;\n    vec4 lightMapUVParam;\n  };\n  vec4 vert () {\n    vec3 worldPos;\n    worldPos.x = cc_matWorld[3][0] + a_position.x;\n    worldPos.y = cc_matWorld[3][1] + a_position.y;\n    worldPos.z = cc_matWorld[3][2] + a_position.z;\n    vec4 pos = vec4(worldPos, 1);\n    pos = cc_matViewProj * pos;\n    uvw = a_texCoord;\n    uv0 = a_position.xz * UVScale.x;\n    uv1 = a_position.xz * UVScale.y;\n    uv2 = a_position.xz * UVScale.z;\n    uv3 = a_position.xz * UVScale.w;\n    float fAmb = dot(a_normal, vec3(0.0, -1.0, 0.0)) * 0.5 + 0.5;\n    vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n#if LIGHT_MAP == 0\n    vec3 L = normalize(-cc_mainLitDir.xyz);\n    vec3 N = a_normal;\n    diffuse = ambDiff + vec3(dot(N, L)) * cc_mainLitColor.rgb;\n#else\n    diffuse = ambDiff;\n    luv = lightMapUVParam.xy + a_texCoord * lightMapUVParam.zw;\n#endif\n    return pos;\n  }\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n  in vec2 uvw;\n  in vec2 uv0;\n  in vec2 uv1;\n  in vec2 uv2;\n  in vec2 uv3;\n  in vec3 diffuse;\n  in vec2 luv;\n  uniform sampler2D weightMap;\n  uniform sampler2D detailMap0;\n  uniform sampler2D detailMap1;\n  uniform sampler2D detailMap2;\n  uniform sampler2D detailMap3;\n  uniform sampler2D lightMap;\nvec4 frag () {\n  vec4 color = vec4(0, 0, 0, 0);\n  #if LAYERS == 1\n    color = texture(detailMap0, uv0);\n  #elif LAYERS == 2\n    vec4 w = texture(weightMap, uvw);\n    color += texture(detailMap0, uv0) * w.r;\n    color += texture(detailMap1, uv1) * w.g;\n  #elif LAYERS == 3\n    vec4 w = texture(weightMap, uvw);\n    color += texture(detailMap0, uv0) * w.r;\n    color += texture(detailMap1, uv1) * w.g;\n    color += texture(detailMap2, uv2) * w.b;\n  #elif LAYERS == 4\n    vec4 w = texture(weightMap, uvw);\n    color += texture(detailMap0, uv0) * w.r;\n    color += texture(detailMap1, uv1) * w.g;\n    color += texture(detailMap2, uv2) * w.b;\n    color += texture(detailMap3, uv3) * w.a;\n  #else\n    color = texture(detailMap0, uv0);\n  #endif\n  vec3 lighting = diffuse;\n  #if LIGHT_MAP == 1\n    lighting += texture(lightMap, luv).rgb;\n  #endif\n  color.rgb *= lighting;\n  return CCFragOutput(color);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\n  precision mediump float;\nuniform highp mat4 cc_matViewProj;\nuniform mediump vec4 cc_mainLitDir;\nuniform mediump vec4 cc_mainLitColor;\nuniform mediump vec4 cc_ambientSky;\nuniform mediump vec4 cc_ambientGround;\nuniform highp mat4 cc_matWorld;\n  attribute vec3 a_position;\n  attribute vec3 a_normal;\n  attribute vec2 a_texCoord;\n  varying vec2 uvw;\n  varying vec2 uv0;\n  varying vec2 uv1;\n  varying vec2 uv2;\n  varying vec2 uv3;\n  varying vec2 luv;\n  varying vec3 diffuse;\n  uniform vec4 UVScale;\nuniform vec4 lightMapUVParam;\n  vec4 vert () {\n    vec3 worldPos;\n    worldPos.x = cc_matWorld[3][0] + a_position.x;\n    worldPos.y = cc_matWorld[3][1] + a_position.y;\n    worldPos.z = cc_matWorld[3][2] + a_position.z;\n    vec4 pos = vec4(worldPos, 1);\n    pos = cc_matViewProj * pos;\n    uvw = a_texCoord;\n    uv0 = a_position.xz * UVScale.x;\n    uv1 = a_position.xz * UVScale.y;\n    uv2 = a_position.xz * UVScale.z;\n    uv3 = a_position.xz * UVScale.w;\n    float fAmb = dot(a_normal, vec3(0.0, -1.0, 0.0)) * 0.5 + 0.5;\n    vec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\n#if LIGHT_MAP == 0\n    vec3 L = normalize(-cc_mainLitDir.xyz);\n    vec3 N = a_normal;\n    diffuse = ambDiff + vec3(dot(N, L)) * cc_mainLitColor.rgb;\n#else\n    diffuse = ambDiff;\n    luv = lightMapUVParam.xy + a_texCoord * lightMapUVParam.zw;\n#endif\n    return pos;\n  }\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n  varying vec2 uvw;\n  varying vec2 uv0;\n  varying vec2 uv1;\n  varying vec2 uv2;\n  varying vec2 uv3;\n  varying vec3 diffuse;\n  varying vec2 luv;\n  uniform sampler2D weightMap;\n  uniform sampler2D detailMap0;\n  uniform sampler2D detailMap1;\n  uniform sampler2D detailMap2;\n  uniform sampler2D detailMap3;\n  uniform sampler2D lightMap;\nvec4 frag () {\n  vec4 color = vec4(0, 0, 0, 0);\n  #if LAYERS == 1\n    color = texture2D(detailMap0, uv0);\n  #elif LAYERS == 2\n    vec4 w = texture2D(weightMap, uvw);\n    color += texture2D(detailMap0, uv0) * w.r;\n    color += texture2D(detailMap1, uv1) * w.g;\n  #elif LAYERS == 3\n    vec4 w = texture2D(weightMap, uvw);\n    color += texture2D(detailMap0, uv0) * w.r;\n    color += texture2D(detailMap1, uv1) * w.g;\n    color += texture2D(detailMap2, uv2) * w.b;\n  #elif LAYERS == 4\n    vec4 w = texture2D(weightMap, uvw);\n    color += texture2D(detailMap0, uv0) * w.r;\n    color += texture2D(detailMap1, uv1) * w.g;\n    color += texture2D(detailMap2, uv2) * w.b;\n    color += texture2D(detailMap3, uv3) * w.a;\n  #else\n    color = texture2D(detailMap0, uv0);\n  #endif\n  vec3 lighting = diffuse;\n  #if LIGHT_MAP == 1\n    lighting += texture2D(lightMap, luv).rgb;\n  #endif\n  color.rgb *= lighting;\n  return CCFragOutput(color);\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"LIGHT_MAP",type:"number",range:[0,3]},{name:"CC_USE_HDR",type:"boolean"},{name:"LAYERS",type:"number",range:[0,4]}],blocks:[{name:"TexCoords",defines:[],binding:0,members:[{name:"UVScale",type:16,count:1},{name:"lightMapUVParam",type:16,count:1}]}],samplers:[{name:"weightMap",type:28,count:1,defines:[],binding:31},{name:"detailMap0",type:28,count:1,defines:[],binding:32},{name:"detailMap1",type:28,count:1,defines:[],binding:33},{name:"detailMap2",type:28,count:1,defines:[],binding:34},{name:"detailMap3",type:28,count:1,defines:[],binding:35},{name:"lightMap",type:28,count:1,defines:[],binding:36}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],format:21,location:2}]}]},{name:"builtin-unlit",_uuid:"a3cd009f-0ab0-420d-9278-b9fdab939bbc",techniques:[{name:"opaque",passes:[{program:"builtin-unlit|unlit-vs:vert|unlit-fs:frag",properties:{mainTexture:{value:"grey",type:28},tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16},colorScale:{value:[1,1,1],type:15,handleInfo:["colorScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["colorScaleAndCutoff",3,13]},color:{type:16,handleInfo:["mainColor",0,16]},colorScaleAndCutoff:{type:16,value:[1,1,1,.5]}}}]}],shaders:[{name:"builtin-unlit|unlit-vs:vert|unlit-fs:frag",hash:2113725771,glsl3:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n};\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_weights;\nin vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    in highp vec4 a_jointAnimInfo;\n  #endif\n  uniform CCSkinningTexture {\n    highp vec4 cc_jointTextureInfo;\n  };\n  uniform CCSkinningAnimation {\n    highp vec4 cc_jointAnimInfo;\n  };\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform CCSkinning {\n    highp vec4 cc_joints[30 * 3];\n  };\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\n#endif\n#if USE_VERTEX_COLOR\n  in vec4 a_color;\n  out vec4 v_color;\n#endif\n#if USE_TEXTURE\n  in vec2 a_texCoord;\n  out vec2 v_uv;\n  uniform TexCoords {\n    vec4 tilingOffset;\n  };\n#endif\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  #if CC_USE_MORPH\n    applyMorph(position);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(position);\n  #endif\n  mat4 matWorld;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n  #else\n    matWorld = cc_matWorld;\n  #endif\n  #if USE_TEXTURE\n    v_uv = a_texCoord;\n    #if FLIP_UV\n      v_uv.y = 1.0 - v_uv.y;\n    #endif\n    v_uv = v_uv * tilingOffset.xy + tilingOffset.zw;\n  #endif\n  #if USE_VERTEX_COLOR\n    v_color = a_color;\n  #endif\n  return cc_matProj * (cc_matView * matWorld) * position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n#if USE_ALPHA_TEST\n#endif\n#if USE_TEXTURE\n  in vec2 v_uv;\n  uniform sampler2D mainTexture;\n#endif\nuniform Constant {\n  vec4 mainColor;\n  vec4 colorScaleAndCutoff;\n};\n#if USE_VERTEX_COLOR\n  in vec4 v_color;\n#endif\nvec4 frag () {\n  vec4 o = mainColor;\n  o.rgb *= colorScaleAndCutoff.xyz;\n  #if USE_VERTEX_COLOR\n    o *= v_color;\n  #endif\n  #if USE_TEXTURE\n    o *= texture(mainTexture, v_uv);\n  #endif\n  #if USE_ALPHA_TEST\n    if (o.ALPHA_TEST_CHANNEL < colorScaleAndCutoff.w) discard;\n  #endif\n  return CCFragOutput(o);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture2D(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_weights;\nattribute vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    attribute highp vec4 a_jointAnimInfo;\n  #endif\n  uniform highp vec4 cc_jointTextureInfo;\n  uniform highp vec4 cc_jointAnimInfo;\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  uniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\n#endif\n#if USE_VERTEX_COLOR\n  attribute vec4 a_color;\n  varying vec4 v_color;\n#endif\n#if USE_TEXTURE\n  attribute vec2 a_texCoord;\n  varying vec2 v_uv;\n  uniform vec4 tilingOffset;\n#endif\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  #if CC_USE_MORPH\n    applyMorph(position);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(position);\n  #endif\n  mat4 matWorld;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n  #else\n    matWorld = cc_matWorld;\n  #endif\n  #if USE_TEXTURE\n    v_uv = a_texCoord;\n    #if FLIP_UV\n      v_uv.y = 1.0 - v_uv.y;\n    #endif\n    v_uv = v_uv * tilingOffset.xy + tilingOffset.zw;\n  #endif\n  #if USE_VERTEX_COLOR\n    v_color = a_color;\n  #endif\n  return cc_matProj * (cc_matView * matWorld) * position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\n#if USE_ALPHA_TEST\n#endif\n#if USE_TEXTURE\n  varying vec2 v_uv;\n  uniform sampler2D mainTexture;\n#endif\nuniform vec4 mainColor;\nuniform vec4 colorScaleAndCutoff;\n#if USE_VERTEX_COLOR\n  varying vec4 v_color;\n#endif\nvec4 frag () {\n  vec4 o = mainColor;\n  o.rgb *= colorScaleAndCutoff.xyz;\n  #if USE_VERTEX_COLOR\n    o *= v_color;\n  #endif\n  #if USE_TEXTURE\n    o *= texture2D(mainTexture, v_uv);\n  #endif\n  #if USE_ALPHA_TEST\n    if (o.ALPHA_TEST_CHANNEL < colorScaleAndCutoff.w) discard;\n  #endif\n  return CCFragOutput(o);\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplers:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"CC_SUPPORT_FLOAT_TEXTURE",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_VERTEX_COLOR",type:"boolean"},{name:"USE_TEXTURE",type:"boolean"},{name:"FLIP_UV",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"ALPHA_TEST_CHANNEL",type:"string",options:["a","r","g","b"]}],blocks:[{name:"TexCoords",defines:["USE_TEXTURE"],binding:0,members:[{name:"tilingOffset",type:16,count:1}]},{name:"Constant",defines:[],binding:1,members:[{name:"mainColor",type:16,count:1},{name:"colorScaleAndCutoff",type:16,count:1}]}],samplers:[{name:"mainTexture",type:28,count:1,defines:["USE_TEXTURE"],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],format:11,location:1},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:2},{name:"a_joints",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:3},{name:"a_jointAnimInfo",type:16,count:1,precision:"highp ",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:43,isInstanced:!0,location:4},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:5},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:6},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:7},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:8},{name:"a_color",type:16,count:1,defines:["USE_VERTEX_COLOR"],format:43,location:9},{name:"a_texCoord",type:14,count:1,defines:["USE_TEXTURE"],format:21,location:10}]}]},{name:"pipeline/planar-shadow",_uuid:"9361fd90-ba52-4f84-aa93-6e878fd576ca",techniques:[{passes:[{phase:"planarShadow",blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},program:"pipeline/planar-shadow|planar-shadow-vs:vert|planar-shadow-fs:frag",depthStencilState:{depthTest:!0,depthWrite:!1,stencilTestFront:!0,stencilFuncFront:5,stencilPassOpFront:2,stencilRefBack:128,stencilRefFront:128,stencilReadMaskBack:128,stencilReadMaskFront:128,stencilWriteMaskBack:128,stencilWriteMaskFront:128}}]}],shaders:[{name:"pipeline/planar-shadow|planar-shadow-vs:vert|planar-shadow-fs:frag",hash:3024494042,glsl3:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n};\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_weights;\nin vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    in highp vec4 a_jointAnimInfo;\n  #endif\n  uniform CCSkinningTexture {\n    highp vec4 cc_jointTextureInfo;\n  };\n  uniform CCSkinningAnimation {\n    highp vec4 cc_jointAnimInfo;\n  };\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform CCSkinning {\n    highp vec4 cc_joints[30 * 3];\n  };\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\nuniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n};\n#endif\nuniform CCShadow {\n  highp mat4 cc_matLightPlaneProj;\n  lowp vec4 cc_shadowColor;\n};\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  #if CC_USE_MORPH\n    applyMorph(position);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(position);\n  #endif\n  mat4 matWorld;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n  #else\n    matWorld = cc_matWorld;\n  #endif\n  position = cc_matProj * (cc_matView * cc_matLightPlaneProj * matWorld) * position;\n  position.z -= 0.0001;\n  return position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform CCShadow {\n  highp mat4 cc_matLightPlaneProj;\n  lowp vec4 cc_shadowColor;\n};\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvec4 frag () {\n  return CCFragOutput(cc_shadowColor);\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n        return int(a_vertexId);\n    }\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\n    vec4 fetchFlatPixel(sampler2D tex, int pixelIndex) {\n        float pixelIndexF = float(pixelIndex);\n        vec2 textureResolution = vec2(float(cc_displacementTextureInfo.x), float(cc_displacementTextureInfo.y));\n        float pixelX = mod(pixelIndexF, textureResolution.x);\n        float pixelY = floor(pixelIndexF / textureResolution.x);\n        vec2 uv = (vec2(pixelX, pixelY) + .5) / textureResolution;\n        return texture2D(tex, uv);\n    }\nfloat getDisplacementWeight(int index) {\n    float m = mod(float(index), 4.0);\n    if (m < 1.0) {\n        return cc_displacementWeights[index / 4].x;\n    } else if (m < 2.0) {\n        return cc_displacementWeights[index / 4].y;\n    } else if (m < 3.0) {\n        return cc_displacementWeights[index / 4].z;\n    } else {\n        return cc_displacementWeights[index / 4].w;\n    }\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\n    return fetchFlatPixel(tex, vertexIndex).rgb;\n#else\n    vec3 result = vec3(0, 0, 0);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n        int dataPixelStart = int(fetchFlatPixel(tex, iTarget).r);\n        result += (fetchFlatPixel(tex, dataPixelStart + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n        return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_weights;\nattribute vec4 a_joints;\n#if CC_USE_BAKED_ANIMATION\n  #if USE_INSTANCING\n    attribute highp vec4 a_jointAnimInfo;\n  #endif\n  uniform highp vec4 cc_jointTextureInfo;\n  uniform highp vec4 cc_jointAnimInfo;\n  uniform sampler2D cc_jointTexture;\n    #if !CC_SUPPORT_FLOAT_TEXTURE\n    highp float decode32 (highp vec4 rgba) {\n      rgba = rgba * 255.0;\n      highp float Sign = 1.0 - step(128.0, rgba[3]) * 2.0;\n      highp float Exponent = 2.0 * mod(rgba[3], 128.0) + step(128.0, rgba[2]) - 127.0;\n      highp float Mantissa = mod(rgba[2], 128.0) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n      return Sign * exp2(Exponent - 23.0) * Mantissa;\n    }\n  #endif\n#else\n  uniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n  #if CC_SUPPORT_FLOAT_TEXTURE\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n      vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n      vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #else\n    mat4 getJointMatrix (float i) {\n    #if USE_INSTANCING\n      highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n    #else\n      highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n    #endif\n    highp float invSize = cc_jointTextureInfo.w;\n    highp float y = floor(j * invSize);\n    highp float x = j - y * cc_jointTextureInfo.x;\n    y = (y + 0.5) * invSize;\n      vec4 v1 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n      );\n      vec4 v2 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n      );\n      vec4 v3 = vec4(\n        decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n        decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n      );\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n#else\n  mat4 getJointMatrix (float i) {\n    int idx = int(i);\n    vec4 v1 = cc_joints[idx * 3];\n    vec4 v2 = cc_joints[idx * 3 + 1];\n    vec4 v3 = cc_joints[idx * 3 + 2];\n    return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n  }\n#endif\nmat4 skinMatrix () {\n  return getJointMatrix(a_joints.x) * a_weights.x\n       + getJointMatrix(a_joints.y) * a_weights.y\n       + getJointMatrix(a_joints.z) * a_weights.z\n       + getJointMatrix(a_joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\n  mat4 m = skinMatrix();\n  position = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\n  mat4 m = skinMatrix();\n  attr.position = m * attr.position;\n  attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n  attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  uniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\n#endif\nuniform highp mat4 cc_matLightPlaneProj;\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  #if CC_USE_MORPH\n    applyMorph(position);\n  #endif\n  #if CC_USE_SKINNING\n    CCSkin(position);\n  #endif\n  mat4 matWorld;\n  #if USE_INSTANCING\n    matWorld = mat4(\n      vec4(a_matWorld0.xyz, 0.0),\n      vec4(a_matWorld1.xyz, 0.0),\n      vec4(a_matWorld2.xyz, 0.0),\n      vec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n    );\n  #elif USE_BATCHING\n    matWorld = cc_matWorlds[int(a_dyn_batch_id)];\n  #else\n    matWorld = cc_matWorld;\n  #endif\n  position = cc_matProj * (cc_matView * cc_matLightPlaneProj * matWorld) * position;\n  position.z -= 0.0001;\n  return position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform lowp vec4 cc_shadowColor;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvec4 frag () {\n  return CCFragOutput(cc_shadowColor);\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCShadow",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplers:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"CC_SUPPORT_FLOAT_TEXTURE",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[],samplers:[],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],format:11,location:1},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:2},{name:"a_joints",type:16,count:1,defines:["CC_USE_SKINNING"],format:43,location:3},{name:"a_jointAnimInfo",type:16,count:1,precision:"highp ",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:43,isInstanced:!0,location:4},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:5},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:6},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],format:43,isInstanced:!0,location:7},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:8}]}]},{name:"pipeline/skybox",_uuid:"511d2633-09a7-4bdd-ac42-f778032124b3",techniques:[{passes:[{rasterizerState:{cullMode:0},program:"pipeline/skybox|sky-vs:vert|sky-fs:frag",priority:245,depthStencilState:{depthTest:!0,depthWrite:!1}}]}],shaders:[{name:"pipeline/skybox|sky-vs:vert|sky-fs:frag",hash:1449700672,glsl3:{vert:"\nprecision highp float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nout vec4 viewDir;\nvec4 vert () {\n  viewDir = vec4(a_position, 1.0);\n  mat4 matViewRotOnly = mat4(mat3(cc_matView));\n  vec4 pos = matViewRotOnly * viewDir;\n  vec2 f = cc_matProj[3][3] > 0.0 ? vec2(4.8, 2.4) : vec2(cc_matProj[1][1]);\n  pos.xy *= vec2(cc_screenSize.y * cc_screenSize.z, 1.0) * f;\n  pos.zw = vec2(-0.99999 * pos.z, -pos.z);\n  return pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\n  return rgbe.rgb * pow(2.0, rgbe.a * 255.0 - 128.0);\n}\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec3 ACESToneMap (vec3 color) {\n  color = min(color, vec3(8.0));\n  const float A = 2.51;\n  const float B = 0.03;\n  const float C = 2.43;\n  const float D = 0.59;\n  const float E = 0.14;\n  return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n  #if !CC_USE_HDR\n    color.rgb = sqrt(ACESToneMap(color.rgb));\n  #endif\n  return color;\n}\nin vec4 viewDir;\nvec4 frag () {\n  #if USE_RGBE_CUBEMAP\n    vec3 c = unpackRGBE(texture(cc_environment, viewDir.xyz));\n  #else\n    vec3 c = SRGBToLinear(texture(cc_environment, viewDir.xyz).rgb);\n  #endif\n  return CCFragOutput(vec4(c * cc_ambientSky.w, 1.0));\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nvarying vec4 viewDir;\nvec4 vert () {\n  viewDir = vec4(a_position, 1.0);\n  mat4 matViewRotOnly = mat4(mat3(cc_matView));\n  vec4 pos = matViewRotOnly * viewDir;\n  vec2 f = cc_matProj[3][3] > 0.0 ? vec2(4.8, 2.4) : vec2(cc_matProj[1][1]);\n  pos.xy *= vec2(cc_screenSize.y * cc_screenSize.z, 1.0) * f;\n  pos.zw = vec2(-0.99999 * pos.z, -pos.z);\n  return pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_ambientSky;\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\n  return rgbe.rgb * pow(2.0, rgbe.a * 255.0 - 128.0);\n}\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec3 ACESToneMap (vec3 color) {\n  color = min(color, vec3(8.0));\n  const float A = 2.51;\n  const float B = 0.03;\n  const float C = 2.43;\n  const float D = 0.59;\n  const float E = 0.14;\n  return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n  #if !CC_USE_HDR\n    color.rgb = sqrt(ACESToneMap(color.rgb));\n  #endif\n  return color;\n}\nvarying vec4 viewDir;\nvec4 frag () {\n  #if USE_RGBE_CUBEMAP\n    vec3 c = unpackRGBE(textureCube(cc_environment, viewDir.xyz));\n  #else\n    vec3 c = SRGBToLinear(textureCube(cc_environment, viewDir.xyz).rgb);\n  #endif\n  return CCFragOutput(vec4(c * cc_ambientSky.w, 1.0));\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[{name:"cc_environment",defines:[]}]},locals:{blocks:[],samplers:[]}},defines:[{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_RGBE_CUBEMAP",type:"boolean"}],blocks:[],samplers:[],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0}]}]},{name:"util/profiler",_uuid:"871c3b6c-7379-419d-bda3-794b239ab90d",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"util/profiler|profiler-vs:vert|profiler-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1}}]}],shaders:[{name:"util/profiler|profiler-vs:vert|profiler-fs:frag",hash:3438710735,glsl3:{vert:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec2 v_uv;\nuniform Constants {\n  vec4 offset;\n};\nuniform PerFrameInfo {\n  vec4 digits[8 * 10 / 4];\n};\nfloat getComponent(vec4 v, float i) {\n  if (i < 1.0) { return v.x; }\n  else if (i < 2.0) { return v.y; }\n  else if (i < 3.0) { return v.z; }\n  else { return v.w; }\n}\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  position.x *= cc_screenSize.y * cc_screenSize.z;\n  position.xy += offset.xy + abs(position.xy);\n  v_uv = a_color.xy;\n  if (a_color.z >= 0.0) {\n    float n = getComponent(digits[int(a_color.z)], a_color.w);\n    v_uv += vec2(offset.z * n, 0.0);\n  }\n  return position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_nativeSize;\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n};\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nin vec2 v_uv;\nuniform sampler2D mainTexture;\nvec4 frag () {\n  return CCFragOutput(texture(mainTexture, v_uv));\n}\nout vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision mediump float;\nuniform mediump vec4 cc_screenSize;\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec2 v_uv;\nuniform vec4 offset;\nuniform vec4 digits[20];\nfloat getComponent(vec4 v, float i) {\n  if (i < 1.0) { return v.x; }\n  else if (i < 2.0) { return v.y; }\n  else if (i < 3.0) { return v.z; }\n  else { return v.w; }\n}\nvec4 vert () {\n  vec4 position;\n  position = vec4(a_position, 1.0);\n  position.x *= cc_screenSize.y * cc_screenSize.z;\n  position.xy += offset.xy + abs(position.xy);\n  v_uv = a_color.xy;\n  if (a_color.z >= 0.0) {\n    float n = getComponent(digits[int(a_color.z)], a_color.w);\n    v_uv += vec2(offset.z * n, 0.0);\n  }\n  return position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\n  return gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n  #if CC_USE_HDR\n    color.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n  #endif\n  return color;\n}\nvarying vec2 v_uv;\nuniform sampler2D mainTexture;\nvec4 frag () {\n  return CCFragOutput(texture2D(mainTexture, v_uv));\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[],samplers:[]}},defines:[{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,members:[{name:"offset",type:16,count:1}]},{name:"PerFrameInfo",defines:[],binding:1,members:[{name:"digits",type:16,count:20}]}],samplers:[{name:"mainTexture",type:28,count:1,defines:[],binding:31}],attributes:[{name:"a_position",type:15,count:1,defines:[],format:32,location:0},{name:"a_color",type:16,count:1,defines:[],format:43,location:1}]}]}],Bu=function(){function e(){Z(this,e),this._device=null,this._resources={}}return J(e,[{key:"initBuiltinRes",value:function(e){this._device=e;var t=this._resources,i=document.createElement("canvas"),n=i.getContext("2d"),r=new Vl(i),o=i.width=i.height=2;n.fillStyle="#000",n.fillRect(0,0,o,o);var a=new Tc;a._uuid="black-texture",a.image=r,t[a._uuid]=a,n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,o,o);for(var s=new Uint8Array(16),l=0;l<s.length;++l)s[l]=0;var c=new Tc;c._uuid="empty-texture",c.image=r,c.uploadData(s),t[c._uuid]=c;var u=new Fu;u._uuid="black-cube-texture",u.setMipFilter(Fu.Filter.LINEAR),u.image={front:new Vl(i),back:new Vl(i),left:new Vl(i),right:new Vl(i),top:new Vl(i),bottom:new Vl(i)},t[u._uuid]=u,n.fillStyle="#777",n.fillRect(0,0,o,o);var h=new Tc;h._uuid="grey-texture",h.image=r,t[h._uuid]=h,n.fillStyle="#fff",n.fillRect(0,0,o,o);var p=new Tc;p._uuid="white-texture",p.image=r,t[p._uuid]=p;var f=new Fu;f._uuid="white-cube-texture",f.setMipFilter(Fu.Filter.LINEAR),f.image={front:new Vl(i),back:new Vl(i),left:new Vl(i),right:new Vl(i),top:new Vl(i),bottom:new Vl(i)},t[f._uuid]=f,n.fillStyle="#7f7fff",n.fillRect(0,0,o,o);var _=new Tc;_._uuid="normal-texture",_.image=r,t[_._uuid]=_,i.width=i.height=16,n.fillStyle="#ddd",n.fillRect(0,0,16,16),n.fillStyle="#555",n.fillRect(0,0,8,8),n.fillStyle="#555",n.fillRect(8,8,8,8);var d=new Tc;d._uuid="default-texture",d.image=r,t[d._uuid]=d;var m=new Fu;m.setMipFilter(Fu.Filter.LINEAR),m._uuid="default-cube-texture",m.image={front:new Vl(i),back:new Vl(i),left:new Vl(i),right:new Vl(i),top:new Vl(i),bottom:new Vl(i)},t[m._uuid]=m;var v=new Ru,y=r._texture;v.texture=y,v._uuid="default-spriteframe",t[v._uuid]=v,Du.forEach((function(e){Object.assign(new cc.EffectAsset,e).onLoaded()}));var g=new cc.Material;g._uuid="standard-material",g.initialize({effectName:"builtin-standard"}),t[g._uuid]=g;var A=new cc.Material;A._uuid="missing-effect-material",A.initialize({effectName:"builtin-unlit",defines:{USE_COLOR:!0}}),A.setProperty("mainColor",cc.color("#ffff00")),t[A._uuid]=A;var b=new cc.Material;b._uuid="missing-material",b.initialize({effectName:"builtin-unlit",defines:{USE_COLOR:!0}}),b.setProperty("mainColor",cc.color("#ff00ff")),t[b._uuid]=b;var x=new cc.Material;x._uuid="ui-base-material",x.initialize({defines:{USE_TEXTURE:!1},effectName:"builtin-sprite"}),t[x._uuid]=x;var T=new cc.Material;T._uuid="ui-sprite-material",T.initialize({defines:{USE_TEXTURE:!0,IS_GRAY:!1},effectName:"builtin-sprite"}),t[T._uuid]=T;var S=new cc.Material;S._uuid="ui-sprite-gray-material",S.initialize({defines:{USE_TEXTURE:!0,IS_GRAY:!0},effectName:"builtin-sprite"}),t[S._uuid]=S;var E=new cc.Material;E._uuid="default-particle-material",E.initialize({effectName:"builtin-particle"}),t[E._uuid]=E;var C=new cc.Material;C._uuid="default-particle-gpu-material",C.initialize({effectName:"builtin-particle-gpu"}),t[C._uuid]=C;var w=new cc.Material;w._uuid="default-trail-material",w.initialize({effectName:"builtin-particle-trail"}),t[w._uuid]=w;var k=new cc.Material;k._uuid="default-billboard-material",k.initialize({effectName:"builtin-billboard"}),t[k._uuid]=k}},{key:"get",value:function(e){return this._resources[e]}}]),e}(),Nu=cc.builtinResMgr=new Bu,Lu=function(){function e(){Z(this,e),this.priority=wc.DEFAULT,this._psos=null,this._subMeshObject=null,this._material=null,this._inputAssembler=null,this._cmdBuffers=[]}return J(e,[{key:"initialize",value:function(e,t,i){this.psos=i,this.subMeshData=e,this.material=t}},{key:"destroy",value:function(){this._inputAssembler&&(this._inputAssembler.destroy(),this._inputAssembler=null);for(var e=0;e<this.passes.length;e++)this.passes[e].destroyPipelineState(this._psos[e]);for(var t,i=fe(this._cmdBuffers);!(t=i()).done;){t.value.destroy()}this._cmdBuffers.length=0,this._material=null}},{key:"updateCommandBuffer",value:function(){if(this._material){for(var e=0;e<this._material.passes.length;e++)this.recordCommandBuffer(e);for(var t=this._cmdBuffers.length-1;t>=this._material.passes.length;t--){var i=this._cmdBuffers.pop();i&&i.destroy()}}}},{key:"recordCommandBuffer",value:function(e){var t=cc.director.root.device,i=this._psos[e];if(null==this._cmdBuffers[e]){var n={allocator:t.commandAllocator,type:exports.GFXCommandBufferType.SECONDARY};this._cmdBuffers[e]=t.createCommandBuffer(n)}else this._cmdBuffers[e].status===exports.GFXStatus.UNREADY&&this._cmdBuffers[e].initialize({allocator:t.commandAllocator,type:exports.GFXCommandBufferType.SECONDARY});var r=this._inputAssembler,o=this._cmdBuffers[e];o.begin(),o.bindPipelineState(i),o.bindBindingLayout(i.pipelineLayout.layouts[0]),o.bindInputAssembler(r),o.draw(r),o.end()}},{key:"psos",set:function(e){this._psos=e},get:function(){return this._psos}},{key:"subMeshData",set:function(e){this._inputAssembler&&this._inputAssembler.destroy(),this._subMeshObject=e,this._inputAssembler?this._inputAssembler.initialize(e):this._inputAssembler=cc.director.root.device.createInputAssembler(e)},get:function(){return this._subMeshObject}},{key:"material",set:function(e){this._material=e,null!=e&&this.updateCommandBuffer()},get:function(){return this._material}},{key:"passes",get:function(){return this._material.passes}},{key:"inputAssembler",get:function(){return this._inputAssembler}},{key:"commandBuffers",get:function(){return this._cmdBuffers}}]),e}(),zu=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e<<28&4026531840|i<<22&264241152|t<<14&4177920|16383&n},Gu=function(e){return(4026531840&e)>>>28},Uu=function(e){return(264241152&e)>>>22},Xu=function(e){return(4177920&e)>>>14},Vu=function(e){return 16383&e},Hu=function(e,t){return-264241153&e|t<<22&264241152},ju=($(Mu={},exports.GFXType.UNKNOWN,(function(e,t){return console.warn("illegal uniform handle")})),$(Mu,exports.GFXType.INT,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i]})),$(Mu,exports.GFXType.INT2,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Oi.fromArray(t,e,i)})),$(Mu,exports.GFXType.INT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mi.fromArray(t,e,i)})),$(Mu,exports.GFXType.INT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ni.fromArray(t,e,i)})),$(Mu,exports.GFXType.FLOAT,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i]})),$(Mu,exports.GFXType.FLOAT2,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Oi.fromArray(t,e,i)})),$(Mu,exports.GFXType.FLOAT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mi.fromArray(t,e,i)})),$(Mu,exports.GFXType.FLOAT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ni.fromArray(t,e,i)})),$(Mu,exports.GFXType.MAT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return zi.fromArray(t,e,i)})),$(Mu,exports.GFXType.MAT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Qi.fromArray(t,e,i)})),Mu),Wu=($(Pu={},exports.GFXType.UNKNOWN,(function(e,t){return console.warn("illegal uniform handle")})),$(Pu,exports.GFXType.INT,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i]=t})),$(Pu,exports.GFXType.INT2,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Oi.toArray(e,t,i)})),$(Pu,exports.GFXType.INT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mi.toArray(e,t,i)})),$(Pu,exports.GFXType.INT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ni.toArray(e,t,i)})),$(Pu,exports.GFXType.FLOAT,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[i]=t})),$(Pu,exports.GFXType.FLOAT2,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Oi.toArray(e,t,i)})),$(Pu,exports.GFXType.FLOAT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mi.toArray(e,t,i)})),$(Pu,exports.GFXType.FLOAT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ni.toArray(e,t,i)})),$(Pu,exports.GFXType.MAT3,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return zi.toArray(e,t,i)})),$(Pu,exports.GFXType.MAT4,(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Qi.toArray(e,t,i)})),Pu),Yu=[Object.freeze([0]),Object.freeze([0,0]),Object.freeze([0,0,0,0]),Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])];function qu(e){switch(e){case exports.GFXType.BOOL:case exports.GFXType.INT:case exports.GFXType.UINT:case exports.GFXType.FLOAT:return Yu[0];case exports.GFXType.BOOL2:case exports.GFXType.INT2:case exports.GFXType.UINT2:case exports.GFXType.FLOAT2:return Yu[1];case exports.GFXType.BOOL4:case exports.GFXType.INT4:case exports.GFXType.UINT4:case exports.GFXType.FLOAT4:return Yu[2];case exports.GFXType.MAT4:return Yu[3];case exports.GFXType.SAMPLER2D:return"default-texture";case exports.GFXType.SAMPLER_CUBE:return"default-cube-texture"}return Yu[0]}function Qu(e,t){for(var i=Object.entries(t),n=!1,r=0;r<i.length;r++)e[i[r][0]]!==i[r][1]&&(e[i[r][0]]=i[r][1],n=!0);return n}function Zu(e){return Math.ceil(Math.log2(Math.max(e,2)))}function Ku(e,t){switch(e.type){case"boolean":return("number"==typeof t?t:t?1:0)+"";case"string":return void 0!==t?t:e.options[0];case"number":return(void 0!==t?t:e.range[0])+""}return console.warn("unknown define type '".concat(e.type,"'")),"-1"}function Ju(e,t){return e+t.reduce((function(e,t){return t.isDefault?e:"".concat(e,"|").concat(t.name).concat(t.value)}),"")}function $u(e,t,i){for(var n,r=e.builtins[i],o=e.blocks,a=fe(r.blocks);!(n=a()).done;){var s=n.value,l=t.get(s.name);if(l&&l.type===exports.GFXBindingType.UNIFORM_BUFFER){var c=Object.assign({defines:s.defines,size:eh(l.blockInfo),bindingType:exports.GFXBindingType.UNIFORM_BUFFER,defaultValue:l.defaultValue},l.blockInfo);o.push(c)}else console.warn("builtin UBO '".concat(s.name,"' not available!"))}for(var u,h=e.samplers,p=fe(r.samplers);!(u=p()).done;){var f=u.value,_=t.get(f.name);if(_&&_.type===exports.GFXBindingType.SAMPLER){var d=Object.assign({defines:f.defines,bindingType:exports.GFXBindingType.SAMPLER,defaultValue:_.defaultValue},_.samplerInfo);h.push(d)}else console.warn("builtin sampler '".concat(f.name,"' not available!"))}}function eh(e){return e.members.reduce((function(e,t){return e+xr(t.type)*t.count}),0)}function th(e,t){for(var i=0;i<e.length;i++){var n=e[i];if("!"===n[0]){if(t[n.slice(1)])return!1}else if(!t[n])return!1}return!0}var ih=new(function(){function e(){Z(this,e),this._templates=void 0,this._cache=void 0,this._templates={},this._cache={}}return J(e,[{key:"define",value:function(e){var t=this._templates[e.name];if(!t||t.hash!==e.hash){for(var i,n=e,r=0,o=function(){var e=i.value,t=1;if("number"===e.type){var n=e.range;t=Zu(n[1]-n[0]+1),e._map=function(e){return e-n[0]}}else"string"===e.type?(t=Zu(e.options.length),e._map=function(t){return Math.max(0,e.options.findIndex((function(e){return e===t})))}):"boolean"===e.type&&(e._map=function(e){return e?1:0});e._offset=r,r+=t},a=fe(n.defines);!(i=a()).done;)o();r>31&&(n.uber=!0),n.blocks.forEach((function(e){e.bindingType=exports.GFXBindingType.UNIFORM_BUFFER,e.size=eh(e)})),n.samplers.forEach((function(e){return e.bindingType=exports.GFXBindingType.SAMPLER})),n.handleMap=function(e){for(var t={},i=0;i<e.blocks.length;i++)for(var n=e.blocks[i],r=n.members,o=0,a=0;a<r.length;a++){var s=r[a];t[s.name]=zu(exports.GFXBindingType.UNIFORM_BUFFER,n.binding,s.type,o),o+=(xr(s.type)>>2)*s.count}for(var l=0;l<e.samplers.length;l++){var c=e.samplers[l];t[c.name]=zu(exports.GFXBindingType.SAMPLER,c.binding,c.type)}return t}(n),n.localsInited||($u(n,Mc,"locals"),n.localsInited=!0),this._templates[e.name]=n}}},{key:"getTemplate",value:function(e){return this._templates[e]}},{key:"hasProgram",value:function(e){return void 0!==this._templates[e]}},{key:"getKey",value:function(e,t){var i=this._templates[e],n=i.defines;if(i.uber){for(var r="",o=0;o<n.length;o++){var a=n[o],s=t[a.name];if(void 0!==s&&a._map){var l=a._map(s);r+=a._offset+(l+"|")}}return r+i.hash}for(var c=0,u=0;u<n.length;u++){var h=n[u],p=t[h.name];if(void 0!==p&&h._map)c|=h._map(p)<<h._offset}return"".concat(c.toString(16),"|").concat(i.hash)}},{key:"destroyShaderByDefines",value:function(e){var t=this,i=Object.keys(e);if(i.length)for(var n,r=i.map((function(t){var i=e[t];return"boolean"==typeof i&&(i=i?"1":"0"),new RegExp(t+i)})),o=fe(Object.keys(this._cache).filter((function(e){return r.every((function(i){return i.test(t._cache[e].shader.name)}))})));!(n=o()).done;){var a=n.value,s=this._cache[a].shader;console.log("destroyed shader ".concat(s.name)),s.destroy(),delete this._cache[a]}}},{key:"getGFXShader",value:function(e,t,i,n){Object.assign(i,n.macros);var r=this.getKey(t,i),o=this._cache[r];if(o)return o;var a=this._templates[t];a.globalsInited||($u(a,n.globalBindings,"globals"),a.globalsInited=!0);var s=function(e,t){for(var i,n=[],r=fe(t);!(i=r()).done;){var o=i.value,a=o.name,s=e[a],l=Ku(o,s),c=!s||"0"===s;n.push({name:a,value:l,isDefault:c})}return n}(i,a.defines),l=s.reduce((function(e,t){return"".concat(e,"#define ").concat(t.name," ").concat(t.value,"\n")}),"")+"\n",c=a.glsl3;switch(e.gfxAPI){case exports.GFXAPI.WEBGL2:c=a.glsl3;break;default:c=a.glsl1}var u=[],h=[],p=[],f=new Nr;!function(e,t,i,n,r,o){for(var a=e.blocks,s=e.samplers,l=e.attributes,c=0;c<a.length;c++){var u=a[c];th(u.defines,t)&&(i.push(u),r.push(u))}for(var h=0;h<s.length;h++){var p=s[h];th(p.defines,t)&&(n.push(p),r.push(p))}for(var f=0;f<l.length;f++){var _=l[f];th(_.defines,t)&&o.push(_)}}(a,i,u,h,p,f.attributes);var _=e.createShader({name:Ju(t,s),blocks:u,samplers:h,stages:[{type:exports.GFXShaderType.VERTEX,source:l+c.vert},{type:exports.GFXShaderType.FRAGMENT,source:l+c.frag}]});return this._cache[r]={shader:_,bindings:p,inputState:f}}}]),e}());cc.programLib=ih;var nh,rh=new Qi,oh=new xa((function(){return new Lu}),32);!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SKINNING=1]="SKINNING",e[e.BAKED_SKINNING=2]="BAKED_SKINNING",e[e.UI_BATCH=3]="UI_BATCH",e[e.PARTICLE_BATCH=4]="PARTICLE_BATCH",e[e.LINE=5]="LINE"}(nh||(nh={}));var ah,sh,lh=function(){function e(){Z(this,e),this.type=nh.DEFAULT,this.scene=null,this.node=null,this.transform=null,this.enabled=!0,this.visFlags=Ec.Enum.NONE,this.castShadow=!1,this.isDynamicBatching=!1,this.instancedAttributes={buffer:null,list:[]},this._device=void 0,this._worldBounds=null,this._modelBounds=null,this._subModels=[],this._implantPSOs=[],this._matPSORecord=new Map,this._matRefCount=new Map,this._localData=new Float32Array(Pc.COUNT),this._localBuffer=null,this._lightBuffer=null,this._inited=!1,this._updateStamp=-1,this._transformUpdated=!0,this._instMatWorldIdx=-1,this._device=cc.director.root.device}return J(e,[{key:"subModels",get:function(){return this._subModels}},{key:"subModelNum",get:function(){return this._subModels.length}},{key:"inited",get:function(){return this._inited}},{key:"worldBounds",get:function(){return this._worldBounds}},{key:"modelBounds",get:function(){return this._modelBounds}},{key:"lightBuffer",get:function(){return this._lightBuffer}},{key:"localBuffer",get:function(){return this._localBuffer}},{key:"updateStamp",get:function(){return this._updateStamp}},{key:"isInstancingEnabled",get:function(){return this._instMatWorldIdx>=0}}]),J(e,[{key:"initialize",value:function(e){this.transform=this.node=e}},{key:"destroy",value:function(){for(var e,t=fe(this._subModels);!(e=t()).done;){var i=e.value;i.destroy(),oh.free(i)}this._localBuffer&&(this._localBuffer.destroy(),this._localBuffer=null),this._lightBuffer&&(this._lightBuffer.destroy(),this._lightBuffer=null),this._worldBounds=null,this._modelBounds=null,this._subModels.length=0,this._matPSORecord.clear(),this._matRefCount.clear(),this._inited=!1,this._transformUpdated=!0,this.isDynamicBatching=!1}},{key:"attachToScene",value:function(e){this.scene=e}},{key:"detachFromScene",value:function(){this.scene=null}},{key:"getSubModel",value:function(e){return this._subModels[e]}},{key:"updateTransform",value:function(e){var t=this.transform;(t.hasChangedFlags||t._dirtyFlags)&&(t.updateWorldTransform(),this._transformUpdated=!0,this._modelBounds&&this._worldBounds&&this._modelBounds.transform(t._mat,t._pos,t._rot,t._scale,this._worldBounds))}},{key:"updateLightingmap",value:function(e,t){Ni.toArray(this._localData,t,Pc.LIGHTINGMAP_UVPARAM),null===e&&(e=Nu.get("empty-texture"));var i=e.getGFXTextureView();if(null!==i){var n;if(e.mipmaps.length>1){var r=ql([exports.GFXFilter.LINEAR,exports.GFXFilter.LINEAR,exports.GFXFilter.LINEAR,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP]);n=uc.getSampler(this._device,r)}else{var o=ql([exports.GFXFilter.NONE,exports.GFXFilter.NONE,exports.GFXFilter.NONE,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP]);n=uc.getSampler(this._device,o)}for(var a,s=fe(this._subModels);!(a=s()).done;){var l=a.value;if(null!==l.psos)for(var c=0;c<l.psos.length;c++)l.psos[c].pipelineLayout.layouts[0].bindTextureView(Hc.binding,i),l.psos[c].pipelineLayout.layouts[0].bindSampler(Hc.binding,n),l.psos[c].pipelineLayout.layouts[0].update()}}}},{key:"updateUBOs",value:function(e){if(this._matPSORecord.forEach(this._updatePass,this),this._updateStamp=e,this._transformUpdated){this._transformUpdated=!1;var t=this.transform._mat,i=this._instMatWorldIdx;if(i>=0){var n=this.instancedAttributes.list;!function(e,t,i,n){t[0]=e.m00,t[1]=e.m01,t[2]=e.m02,t[3]=e.m12,i[0]=e.m04,i[1]=e.m05,i[2]=e.m06,i[3]=e.m13,n[0]=e.m08,n[1]=e.m09,n[2]=e.m10,n[3]=e.m14}(t,n[i].view,n[i+1].view,n[i+2].view)}else Qi.toArray(this._localData,t,Pc.MAT_WORLD_OFFSET),Qi.inverseTranspose(rh,t),Qi.toArray(this._localData,rh,Pc.MAT_WORLD_IT_OFFSET),this._localBuffer.update(this._localData)}}},{key:"createBoundingShape",value:function(e,t){e&&t&&(this._modelBounds=ca.fromPoints(ca.create(),e,t),this._worldBounds=ca.clone(this._modelBounds))}},{key:"initSubModel",value:function(e,t,i){if(this.initLocalBindings(i),null==this._subModels[e])this._subModels[e]=oh.alloc();else{var n=this._subModels[e].material;this._subModels[e].destroy(),this.releasePSO(n)}this.allocatePSO(i,e),this._subModels[e].initialize(t,i,this._matPSORecord.get(i)),this._inited=!0}},{key:"setSubModelMesh",value:function(e,t){null==this._subModels[e]&&(this._subModels[e]=oh.alloc()),this._subModels[e].subMeshData=t}},{key:"setSubModelMaterial",value:function(e,t){this.initLocalBindings(t),this._subModels[e]&&(this._subModels[e].material===t?t&&(this.destroyPipelineStates(t,this._matPSORecord.get(t)),this._matPSORecord.set(t,this.createPipelineStates(t,e))):(this._subModels[e].material&&this.releasePSO(this._subModels[e].material),t&&this.allocatePSO(t,e)),this._subModels[e].psos=t&&this._matPSORecord.get(t)||null,this._subModels[e].material=t)}},{key:"onGlobalPipelineStateChanged",value:function(){var e=this,t=this._subModels;this._matPSORecord.forEach((function(i,n){for(var r=0;r<t.length&&t[r].material!==n;r++);if(!(r>=t.length)){for(var o=0;o<n.passes.length;o++){var a=n.passes[o];a.destroyPipelineState(i[o]),a.beginChangeStatesSilently(),a.tryCompile(),a.endChangeStatesSilently()}var s=e.createPipelineStates(n,r);i.length=s.length;for(var l=0;l<s.length;l++)i[l]=s[l]}}));for(var i=0;i<t.length;i++)t[i].updateCommandBuffer()}},{key:"insertImplantPSO",value:function(e){this._implantPSOs.push(e)}},{key:"removeImplantPSO",value:function(e){var t=this._implantPSOs.indexOf(e);t>=0&&this._implantPSOs.splice(t,1)}},{key:"createPipelineStates",value:function(e,t){for(var i=[],n=0;n<e.passes.length;n++){var r=e.passes[n];i[n]=this.createPipelineState(r,t)}return i[0]&&this.updateInstancedAttributeList(i[0],e.passes[0]),i}},{key:"destroyPipelineStates",value:function(e,t){for(var i=0;i<e.passes.length;i++){e.passes[i].destroyPipelineState(t[i])}}},{key:"createPipelineState",value:function(e,t,i){var n=e.createPipelineState(i),r=n.pipelineLayout.layouts[0];return this._localBuffer&&r.bindBuffer(Pc.BLOCK.binding,this._localBuffer),this._lightBuffer&&r.bindBuffer(Bc.BLOCK.binding,this._lightBuffer),n}},{key:"updateInstancedAttributeList",value:function(e,t){if(t.device.hasFeature(exports.GFXFeature.INSTANCED_ARRAYS)){for(var i=e.inputState.attributes,n=0,r=0;r<i.length;r++){var o=i[r];o.isInstanced&&(n+=yr[o.format].size)}var a=this.instancedAttributes;a.buffer=new Uint8Array(n),a.list.length=0;for(var s=0,l=a.buffer.buffer,c=0;c<i.length;c++){var u=i[c];if(u.isInstanced){var h=u.format,p=yr[h],f=new(Tr(p))(l,s,p.count),_=u.isNormalized;s+=p.size,a.list.push({name:u.name,format:h,isNormalized:_,view:f})}}t.instancedBuffer&&t.instancedBuffer.destroy(),this._instMatWorldIdx=this.getInstancedAttributeIndex("a_matWorld0"),this._transformUpdated=!0}}},{key:"getInstancedAttributeIndex",value:function(e){for(var t=this.instancedAttributes.list,i=0;i<t.length;i++)if(t[i].name===e)return i;return-1}},{key:"initLocalBindings",value:function(e){if(this._localBuffer||(this._localBuffer=this._device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Pc.SIZE,stride:Pc.SIZE})),e){for(var t,i=!1,n=fe(e.passes);!(t=n()).done;){var r=t.value;if(ih.getTemplate(r.program).builtins.locals.blocks.find((function(e){return e.name===Bc.BLOCK.name}))){i=!0;break}}i&&!this._lightBuffer&&(this._lightBuffer=this._device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Bc.SIZE,stride:Bc.SIZE}))}}},{key:"_updatePass",value:function(e,t){for(var i=0;i<t.passes.length;i++)t.passes[i].update();for(var n=0;n<e.length;n++)e[n].pipelineLayout.layouts[0].update()}},{key:"allocatePSO",value:function(e,t){null==this._matRefCount.get(e)?(this._matRefCount.set(e,1),this._matPSORecord.set(e,this.createPipelineStates(e,t))):this._matRefCount.set(e,this._matRefCount.get(e)+1)}},{key:"releasePSO",value:function(e){this._matRefCount.set(e,this._matRefCount.get(e)-1),0===this._matRefCount.get(e)&&(this.destroyPipelineStates(e,this._matPSORecord.get(e)),this._matPSORecord.delete(e),this._matRefCount.delete(e))}}]),e}(),ch=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._morphRenderingInstance=null,i._usedMaterials=new Set,i}return ee(t,lh),J(t,[{key:"createPipelineState",value:function(e,i,n){var r;if(!this._morphRenderingInstance)return ae(te(t.prototype),"createPipelineState",this).apply(this,arguments);var o=this._morphRenderingInstance.requiredPatches(i),a=ae(te(t.prototype),"createPipelineState",this).call(this,e,i,o?null!==(r=null==n?void 0:n.concat(o))&&void 0!==r?r:o:n);return this._morphRenderingInstance.adaptPipelineState(i,a),a}},{key:"initSubModel",value:function(e,i,n){return ae(te(t.prototype),"initSubModel",this).call(this,e,i,this._launderMaterial(n))}},{key:"setSubModelMaterial",value:function(e,i){return ae(te(t.prototype),"setSubModelMaterial",this).call(this,e,i?this._launderMaterial(i):i)}},{key:"_launderMaterial",value:function(e){return e}},{key:"setMorphRendering",value:function(e){this._morphRenderingInstance=e}}]),t}();!function(e){e[e.LOCAL=0]="LOCAL",e[e.WORLD=1]="WORLD"}(ah||(ah={})),function(e){e[e.NONE=0]="NONE",e[e.POSITION=1]="POSITION",e[e.ROTATION=2]="ROTATION",e[e.SCALE=4]="SCALE",e[e.RS=e.ROTATION|e.SCALE]="RS",e[e.TRS=e.POSITION|e.ROTATION|e.SCALE]="TRS",e[e.TRS_MASK=~e.TRS]="TRS_MASK"}(sh||(sh={})),cc.internal.TransformBit=sh;var uh,hh,ph,fh,_h,dh,mh,vh,yh,gh=new Dc,Ah=function(){function e(t){Z(this,e),this.batches=[],this.pass=void 0,this.pass=t}return J(e,[{key:"destroy",value:function(){for(var e=0;e<this.batches.length;++e){for(var t=this.batches[e],i=0;i<t.vbs.length;++i)t.vbs[i].destroy();t.vbIdx.destroy(),t.ia.destroy(),t.ubo.destroy()}this.batches.length=0}},{key:"merge",value:function(e,t,i){var n=e.subMeshData.flatBuffers;if(0!==n.length){for(var r=0,o=0,a=n[0].count,s=i.pipelineLayout.layouts[0],l=!1,c=0;c<this.batches.length;++c){var u=this.batches[c];if(u.vbs.length===n.length&&u.mergeCount<Dc.BATCHING_COUNT){l=!0;for(var h=0;h<u.vbs.length;++h){if(u.vbs[h].stride!==n[h].stride){l=!1;break}}if(l){for(var p=0;p<u.vbs.length;++p){var f=n[p],_=u.vbs[p],d=u.vbDatas[p];(r=(a+u.vbCount)*f.stride)>_.size&&(_.resize(r),d=u.vbDatas[p]=new Uint8Array(_.bufferView.buffer)),d.set(f.buffer,u.vbCount*f.stride)}(o=4*(a+u.vbCount))>u.vbIdx.size&&(u.vbIdx.resize(o),u.vbIdxData=new Float32Array(u.vbIdx.bufferView.buffer));var m=u.vbCount,v=m+a,y=u.vbIdxData,g=u.mergeCount;if(y[m]!==g||y[v-1]!==g)for(var A=m;A<v;A++)y[A]=g+.1;return Qi.toArray(u.uboData.view,t.model.transform.worldMatrix,Dc.MAT_WORLDS_OFFSET+16*u.mergeCount),u.mergeCount||u.pso===i||(s.bindBuffer(Dc.BLOCK.binding,u.ubo),s.update(),u.pso=i),++u.mergeCount,u.vbCount+=a,void(u.ia.vertexCount+=a)}}}for(var b=this.pass.device,x=[],T=[],S=[],E=0;E<n.length;++E){var C=n[E],w=b.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:C.count*C.stride,stride:C.stride,flags:exports.GFXBufferFlagBit.BAKUP_BUFFER});w.update(C.buffer.buffer),x.push(w),T.push(new Uint8Array(w.bufferView.buffer)),S.push(w)}var k=b.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:4*a,stride:4,flags:exports.GFXBufferFlagBit.BAKUP_BUFFER}),O=new Float32Array(a);O.fill(0),k.update(O),S.push(k);for(var R=new Float32Array(k.bufferView.buffer),F=e.inputAssembler.attributes,I=new Array(F.length+1),M=0;M<F.length;++M)I[M]=F[M];I[F.length]={name:"a_dyn_batch_id",format:exports.GFXFormat.R32F,stream:n.length};var P=b.createInputAssembler({attributes:I,vertexBuffers:S}),D=this.pass.device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Dc.SIZE});s.bindBuffer(Dc.BLOCK.binding,D),s.update();var B=new Dc;Qi.toArray(B.view,t.model.transform.worldMatrix,Dc.MAT_WORLDS_OFFSET),this.batches.push({mergeCount:1,vbs:x,vbDatas:T,vbIdx:k,vbIdxData:R,vbCount:a,ia:P,ubo:D,uboData:B,pso:i})}}},{key:"clear",value:function(){for(var e=0;e<this.batches.length;++e){var t=this.batches[e];t.vbCount=0,t.mergeCount=0,t.ia.vertexCount=0}}},{key:"clearUBO",value:function(){for(var e=0;e<this.batches.length;++e){this.batches[e].ubo.update(gh.view.buffer)}}}]),e}(),bh=function(){function e(t){Z(this,e),this.instances=[],this.pso=null,this.pass=void 0,this.pass=t}return J(e,[{key:"destroy",value:function(){for(var e=0;e<this.instances.length;++e){var t=this.instances[e];t.vb.destroy(),t.ia.destroy()}this.instances.length=0}},{key:"merge",value:function(e,t,i){var n=t.buffer.length;if(n){this.pso||(this.pso=i);for(var r=e.inputAssembler,o=0;o<this.instances.length;++o){var a=this.instances[o];if(!(a.ia.indexBuffer!==r.indexBuffer||a.count>=1024)){if(a.stride!==n)return;if(a.count>=a.capacity){a.capacity<<=1;var s=a.stride*a.capacity,l=a.data;a.data=new Uint8Array(s),a.data.set(l),a.vb.resize(s)}return void a.data.set(t.buffer,a.stride*a.count++)}}for(var c=this.pass.device,u=c.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:32*n,stride:n}),h=new Uint8Array(32*n),p=r.vertexBuffers.slice(),f=r.attributes.slice(),_=r.indexBuffer||void 0,d=0;d<t.list.length;d++){var m=t.list[d],v={name:m.name,format:m.format,stream:p.length,isInstanced:!0};void 0!==m.isNormalized&&(v.isNormalized=m.isNormalized),f.push(v)}h.set(t.buffer),p.push(u);var y=c.createInputAssembler({attributes:f,vertexBuffers:p,indexBuffer:_});this.instances.push({count:1,capacity:32,vb:u,data:h,ia:y,stride:n})}}},{key:"uploadBuffers",value:function(){for(var e=0;e<this.instances.length;++e){var t=this.instances[e];t.count&&(t.ia.instanceCount=t.count,t.vb.update(t.data))}}},{key:"clear",value:function(){for(var e=0;e<this.instances.length;++e){this.instances[e].count=0}this.pso=null}}]),e}(),xh=(uh=new Map,hh=0,function(e){return"number"==typeof e?e:(uh.has(e)||(uh.set(e,1<<hh),hh++),uh.get(e))}),Th={memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:0,usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST},Sh={bindings:null},Eh={layouts:null},Ch={primitive:0,shader:null,inputState:null,rasterizerState:null,depthStencilState:null,blendState:null,dynamicStates:null,layout:null,renderPass:null,hash:0,program:"",defines:null,stage:0},wh=function(){function e(t){Z(this,e),this._buffers={},this._samplers={},this._textureViews={},this._resources=[],this._phase=xh("default"),this._idxInTech=0,this._programName="",this._priority=wc.DEFAULT,this._primitive=exports.GFXPrimitiveMode.TRIANGLE_LIST,this._stage=Cc.DEFAULT,this._bindings=[],this._inputState=new Nr,this._bs=new Br,this._dss=new Pr,this._rs=new Mr,this._dynamicStates=[],this._dynamics={},this._customizations=[],this._handleMap={},this._blocks=[],this._shaderInfo=null,this._defines={},this._properties={},this._hash=0,this._device=void 0,this._renderPass=null,this._shader=null,this._batchedBuffer=null,this._instancedBuffer=null,this._device=t}return J(e,null,[{key:"fillinPipelineInfo",value:function(e,t){void 0!==t.priority&&(e._priority=t.priority),void 0!==t.primitive&&(e._primitive=t.primitive),void 0!==t.stage&&(e._stage=t.stage),void 0!==t.dynamicStates&&(e._dynamicStates=t.dynamicStates),t.customizations&&(e._customizations=t.customizations),t.phase&&(e._phase=xh(t.phase));var i=e._bs;if(t.blendState){var n=Object.assign({},t.blendState);n.targets&&n.targets.forEach((function(e,t){return Object.assign(i.targets[t]||(i.targets[t]=new Dr),e)})),delete n.targets,Object.assign(i,n)}Object.assign(e._rs,t.rasterizerState),Object.assign(e._dss,t.depthStencilState)}},{key:"getPSOHash",value:function(e){var t,i=ih.getKey(e.program,e.defines),n="".concat(i,",").concat(e.stage,",").concat(e.primitive);return n+=function(e){for(var t,i=",bs,".concat(e.isA2C,",").concat(e.blendColor),n=fe(e.targets);!(t=n()).done;){var r=t.value;i+=",bt,".concat(r.blend,",").concat(r.blendEq,",").concat(r.blendAlphaEq,",").concat(r.blendColorMask),i+=",".concat(r.blendSrc,",").concat(r.blendDst,",").concat(r.blendSrcAlpha,",").concat(r.blendDstAlpha)}return i}(e.blendState),n+=function(e){var t=",dss,".concat(e.depthTest,",").concat(e.depthWrite,",").concat(e.depthFunc);return t+=",".concat(e.stencilTestFront,",").concat(e.stencilFuncFront,",").concat(e.stencilRefFront,",").concat(e.stencilReadMaskFront),t+=",".concat(e.stencilFailOpFront,",").concat(e.stencilZFailOpFront,",").concat(e.stencilPassOpFront,",").concat(e.stencilWriteMaskFront),t+=",".concat(e.stencilTestBack,",").concat(e.stencilFuncBack,",").concat(e.stencilRefBack,",").concat(e.stencilReadMaskBack),t+=",".concat(e.stencilFailOpBack,",").concat(e.stencilZFailOpBack,",").concat(e.stencilPassOpBack,",").concat(e.stencilWriteMaskBack)}(e.depthStencilState),sl(n+=(t=e.rasterizerState,",rs,".concat(t.cullMode,",").concat(t.depthBias,",").concat(t.isFrontFaceCCW)),666)}}]),J(e,[{key:"initialize",value:function(e){this._doInit(e),this.resetUBOs(),this.resetTextures()}},{key:"getHandle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:exports.GFXType.UNKNOWN,n=this._handleMap[e];if(n)return i?n=Hu(n,i):t&&(n=Hu(n,Uu(n)-t)),n+t}},{key:"getBinding",value:function(t){var i=this.getHandle(t);if(void 0!==i)return e.getBindingFromHandle(i)}},{key:"setUniform",value:function(t,i){var n=e.getBindingFromHandle(t),r=e.getTypeFromHandle(t),o=e.getOffsetFromHandle(t),a=this._blocks[n];Wu[r](a.view,i,o),a.dirty=!0}},{key:"getUniform",value:function(t,i){var n=e.getBindingFromHandle(t),r=e.getTypeFromHandle(t),o=e.getOffsetFromHandle(t),a=this._blocks[n];return ju[r](a.view,i,o)}},{key:"setUniformArray",value:function(t,i){for(var n=e.getBindingFromHandle(t),r=e.getTypeFromHandle(t),o=xr(r)>>2,a=this._blocks[n],s=e.getOffsetFromHandle(t),l=0;l<i.length;l++,s+=o)null!==i[l]&&Wu[r](a.view,i[l],s);a.dirty=!0}},{key:"bindBuffer",value:function(e,t){if(this._buffers[e]!==t){this._buffers[e]=t;for(var i=this._resources.length,n=0;n<i;n++){this._resources[n].bindingLayout.bindBuffer(e,t)}}}},{key:"bindTextureView",value:function(e,t){if(this._textureViews[e]!==t){this._textureViews[e]=t;for(var i=this._resources.length,n=0;n<i;n++){this._resources[n].bindingLayout.bindTextureView(e,t)}}}},{key:"bindSampler",value:function(e,t){if(this._samplers[e]!==t){this._samplers[e]=t;for(var i=this._resources.length,n=0;n<i;n++){this._resources[n].bindingLayout.bindSampler(e,t)}}}},{key:"setDynamicState",value:function(e,t){var i=this._dynamics[e];i&&i.value===t||(i.value=t,i.dirty=!0)}},{key:"overridePipelineStates",value:function(e,t){console.warn("base pass cannot override states, please use pass instance instead.")}},{key:"update",value:function(){for(var e=this._blocks.length,t=0;t<e;t++){var i=this._blocks[t];i.dirty&&(this._buffers[t].update(i.view),i.dirty=!1)}for(var n=cc.director.root.pipeline.globalBindings,r=this._shaderInfo.builtins.globals,o=r.samplers.length,a=0;a<o;a++){var s=r.samplers[a],l=n.get(s.name);l.sampler&&this.bindSampler(l.samplerInfo.binding,l.sampler),this.bindTextureView(l.samplerInfo.binding,l.textureView)}}},{key:"destroy",value:function(){for(var e,t=fe(this._shaderInfo.blocks);!(e=t()).done;){var i=e.value;Oc(i.binding)||this._buffers[i.binding].destroy()}this._buffers={},this._samplers={},this._textureViews={},this._instancedBuffer&&(this._instancedBuffer.destroy(),this._instancedBuffer=null),this._batchedBuffer&&(this._batchedBuffer.destroy(),this._batchedBuffer=null)}},{key:"resetUniform",value:function(t){var i=this.getHandle(t),n=e.getTypeFromHandle(i),r=e.getBindingFromHandle(i),o=e.getOffsetFromHandle(i),a=this._blocks[r],s=this._properties[t],l=s&&s.value||qu(n);Wu[n](a.view,l,o),a.dirty=!0}},{key:"resetTexture",value:function(t){var i=this.getHandle(t),n=e.getTypeFromHandle(i),r=e.getBindingFromHandle(i),o=this._properties[t],a=o&&o.value,s=a?a+"-texture":qu(n),l=Nu.get(s),c=l&&l.getGFXTextureView(),u=o&&void 0!==o.samplerHash?o.samplerHash:l.getSamplerHash(),h=uc.getSampler(this._device,u);this._textureViews[r]=c,this._samplers[r]=h;for(var p=0;p<this._resources.length;p++){var f=this._resources[p];f.bindingLayout.bindSampler(r,h),f.bindingLayout.bindTextureView(r,c)}}},{key:"resetUBOs",value:function(){for(var e,t=fe(this._shaderInfo.blocks);!(e=t()).done;){var i=e.value;if(!Oc(i.binding)){var n=this._blocks[i.binding];if(n){for(var r=0,o=0;o<i.members.length;o++){for(var a=i.members[o],s=this._properties[a.name],l=s&&s.value,c=l||qu(a.type),u=(xr(a.type)>>2)*a.count,h=0;h+c.length<=u;h+=c.length)n.view.set(c,r+h);r+=u}n.dirty=!0}}}}},{key:"resetTextures",value:function(){for(var e,t=fe(this._shaderInfo.samplers);!(e=t()).done;){var i=e.value;Oc(i.binding)||this.resetTexture(i.name)}}},{key:"tryCompile",value:function(){var e=cc.director.root.pipeline;if(!e)return null;if(this._dynamicBatchingSync(),this._renderPass=e.getRenderPass(this._stage),!this._renderPass)return console.warn("illegal pass stage."),!1;var t=ih.getGFXShader(this._device,this._programName,this._defines,e);return t.shader?(this._shader=t.shader,this._bindings=t.bindings,this._inputState=t.inputState,!0):(console.warn("create shader ".concat(this._programName," failed")),!1)}},{key:"createPipelineState",value:function(e){if(!(this._renderPass&&this._shader&&this._bindings.length||this.tryCompile()))return console.warn("pass resources not complete, create PSO failed"),null;var t=e?this._getShaderWithBuiltinMacroPatches(e):null,i=t&&t.shader||this._shader;Sh.bindings=t&&t.bindings||this._bindings;var n=this._device.createBindingLayout(Sh);for(var r in this._buffers)n.bindBuffer(parseInt(r),this._buffers[r]);for(var o in this._samplers)n.bindSampler(parseInt(o),this._samplers[o]);for(var a in this._textureViews)n.bindTextureView(parseInt(a),this._textureViews[a]);for(var s,l=cc.director.root.pipeline.globalBindings,c=this._shaderInfo.builtins.globals,u=fe(c.blocks);!(s=u()).done;){var h=s.value,p=l.get(h.name);p&&p.type===exports.GFXBindingType.UNIFORM_BUFFER?n.bindBuffer(p.blockInfo.binding,p.buffer):console.warn("builtin UBO '".concat(h.name,"' not available!"))}for(var f,_=fe(c.samplers);!(f=_()).done;){var d=f.value,m=l.get(d.name);m&&m.type===exports.GFXBindingType.SAMPLER?(m.sampler&&n.bindSampler(m.samplerInfo.binding,m.sampler),n.bindTextureView(m.samplerInfo.binding,m.textureView)):console.warn("builtin texture '".concat(d.name,"' not available!"))}Eh.layouts=[n];var v=this._device.createPipelineLayout(Eh);Ch.inputState=t&&t.inputState||this._inputState,Ch.primitive=this._primitive,Ch.shader=i,Ch.rasterizerState=this._rs,Ch.depthStencilState=this._dss,Ch.blendState=this._bs,Ch.dynamicStates=this._dynamicStates,Ch.layout=v,Ch.renderPass=this._renderPass,Ch.program=this._programName,Ch.defines=this._defines,Ch.stage=this._stage,Ch.hash=this._hash;var y=this._device.createPipelineState(Ch);return this._resources.push({bindingLayout:n,pipelineLayout:v,pipelineState:y}),y}},{key:"destroyPipelineState",value:function(e){var t=this._resources.findIndex((function(t){return t.pipelineState===e}));if(t>=0){var i=this._resources[t],n=i.bindingLayout,r=i.pipelineLayout,o=i.pipelineState;n.destroy(),r.destroy(),o.destroy(),this._resources.splice(t,1)}}},{key:"beginChangeStatesSilently",value:function(){}},{key:"endChangeStatesSilently",value:function(){}},{key:"_doInit",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._idxInTech=t.idxInTech,this._programName=t.program,this._defines=i?Object.assign({},t.defines):t.defines,this._shaderInfo=ih.getTemplate(t.program),this._properties=t.properties||this._properties;var n=this._device;e.fillinPipelineInfo(this,t),t.stateOverrides&&e.fillinPipelineInfo(this,t.stateOverrides),this._hash=e.getPSOHash(this);for(var r=this._shaderInfo.blocks,o=0;o<r.length;o++){var a=r[o],s=a.size,l=a.binding;if(!Oc(l)){Th.size=16*Math.ceil(s/16),this._buffers[l]=n.createBuffer(Th);var c=new ArrayBuffer(s);this._blocks[l]={view:new Float32Array(c),dirty:!1}}}var u=this._handleMap=this._shaderInfo.handleMap,h={};for(var p in this._properties){var f=this._properties[p];f.handleInfo&&(h[p]=this.getHandle.apply(this,f.handleInfo))}Object.assign(u,h),this.tryCompile()}},{key:"_dynamicBatchingSync",value:function(){this._defines.USE_INSTANCING?this._device.hasFeature(exports.GFXFeature.INSTANCED_ARRAYS)?this._instancedBuffer||(this._instancedBuffer=new bh(this)):this._defines.USE_INSTANCING=!1:this._defines.USE_BATCHING&&(this._batchedBuffer||(this._batchedBuffer=new Ah(this))),!this._defines.USE_INSTANCING&&this._instancedBuffer&&(this._instancedBuffer.destroy(),this._instancedBuffer=null),!this._defines.USE_BATCHING&&this._batchedBuffer&&(this._batchedBuffer.destroy(),this._batchedBuffer=null)}},{key:"_getShaderWithBuiltinMacroPatches",value:function(e){var t=cc.director.root.pipeline;if(!t)return null;for(var i=0;i<e.length;i++){var n=e[i];this._defines[n.name]=n.value}for(var r=ih.getGFXShader(this._device,this._programName,this._defines,t),o=0;o<e.length;o++){var a=e[o];delete this._defines[a.name]}return r}},{key:"priority",get:function(){return this._priority}},{key:"primitive",get:function(){return this._primitive}},{key:"stage",get:function(){return this._stage}},{key:"inputState",get:function(){return this._inputState}},{key:"rasterizerState",get:function(){return this._rs}},{key:"depthStencilState",get:function(){return this._dss}},{key:"blendState",get:function(){return this._bs}},{key:"dynamicStates",get:function(){return this._dynamicStates}},{key:"customizations",get:function(){return this._customizations}},{key:"phase",get:function(){return this._phase}},{key:"device",get:function(){return this._device}},{key:"shaderInfo",get:function(){return this._shaderInfo}},{key:"program",get:function(){return this._programName}},{key:"properties",get:function(){return this._properties}},{key:"defines",get:function(){return this._defines}},{key:"idxInTech",get:function(){return this._idxInTech}},{key:"bindings",get:function(){return this._bindings}},{key:"shader",get:function(){return this._shader}},{key:"renderPass",get:function(){return this._renderPass}},{key:"dynamics",get:function(){return this._dynamics}},{key:"batchedBuffer",get:function(){return this._batchedBuffer}},{key:"instancedBuffer",get:function(){return this._instancedBuffer}},{key:"blocks",get:function(){return this._blocks}},{key:"hash",get:function(){return this._hash}}]),e}();wh.getBindingTypeFromHandle=Gu,wh.getTypeFromHandle=Uu,wh.getBindingFromHandle=Xu,wh.getOffsetFromHandle=Vu;var kh,Oh,Rh,Fh,Ih,Mh,Ph,Dh,Bh,Nh={},Lh=qa("cc.EffectAsset")((yh=vh=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"techniques",_h,ne(i)),_e(i,"shaders",dh,ne(i)),_e(i,"combinations",mh,ne(i)),i}return ee(t,Ul),J(t,[{key:"onLoaded",value:function(){this.shaders.forEach((function(e){return ih.define(e)})),cc.game.once(cc.Game.EVENT_ENGINE_INITED,this._precompile,this),t.register(this)}},{key:"_precompile",value:function(){for(var e=this,t=cc.director.root,i=function(i){var n=e.shaders[i],r=e.combinations[i];if(!r)return"continue";Object.keys(r).reduce((function(e,t){return e.reduce((function(e,i){var n=r[t],o=[i].concat(ue(Array(n.length-1)).map((function(){return Object.assign({},i)})));return o.forEach((function(e,i){return e[t]=n[i]})),e.concat(o)}),[])}),[{}]).forEach((function(e){return ih.getGFXShader(t.device,n.name,e,t.pipeline)}))},n=0;n<this.shaders.length;n++)i(n)}}],[{key:"register",value:function(e){Nh[e.name]=e}},{key:"remove",value:function(e){if(Nh[e])delete Nh[e];else for(var t in Nh)if(Nh[t]._uuid===e)return void delete Nh[t]}},{key:"get",value:function(e){if(Nh[e])return Nh[e];for(var t in Nh)if(Nh[t]._uuid===e)return Nh[t];return null}},{key:"getAll",value:function(){return Nh}}]),t}(),vh._effects={},_h=de((fh=yh).prototype,"techniques",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dh=de(fh.prototype,"shaders",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mh=de(fh.prototype,"combinations",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ph=fh))||ph;cc.EffectAsset=Lh;var zh,Gh,Uh,Xh=(kh=qa("cc.Material"),Oh=Qa(Lh),kh((Ih=de((Fh=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_effectAsset",Ih,ne(e)),_e(e,"_techIdx",Mh,ne(e)),_e(e,"_defines",Ph,ne(e)),_e(e,"_states",Dh,ne(e)),_e(e,"_props",Bh,ne(e)),e._passes=[],e._hash=0,e.loaded=!1,e}return ee(t,Ul),J(t,[{key:"effectAsset",get:function(){return this._effectAsset}},{key:"effectName",get:function(){return this._effectAsset?this._effectAsset.name:""}},{key:"technique",get:function(){return this._techIdx}},{key:"passes",get:function(){return this._passes}},{key:"hash",get:function(){return this._hash}},{key:"parent",get:function(){return null}},{key:"owner",get:function(){return null}}],[{key:"getHash",value:function(e){for(var t,i="",n=fe(e.passes);!(t=n()).done;){i+=t.value.hash}return sl(i,666)}}]),J(t,[{key:"initialize",value:function(e){this._defines||(this._defines=[]),this._states||(this._states=[]),this._props||(this._props=[]),void 0!==e.technique&&(this._techIdx=e.technique),e.effectAsset?this._effectAsset=e.effectAsset:e.effectName&&(this._effectAsset=Lh.get(e.effectName)),e.defines&&this._prepareInfo(e.defines,this._defines),e.states&&this._prepareInfo(e.states,this._states),this._update()}},{key:"reset",value:function(e){this.initialize(e)}},{key:"destroy",value:function(){return this._doDestroy(),ae(te(t.prototype),"destroy",this).call(this)}},{key:"recompileShaders",value:function(e,t){console.warn("Shaders in material asset '"+this.name+"' cannot be modified at runtime, please instantiate the material first.")}},{key:"overridePipelineStates",value:function(e,t){console.warn("Pipeline states in material asset '"+this.name+"' cannot be modified at runtime, please instantiate the material first.")}},{key:"onLoaded",value:function(){this._update(),this.loaded=!0,this.emit("load")}},{key:"resetUniforms",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._props.length=this._passes.length;for(var t=0;t<this._props.length;t++)this._props[t]={};if(e)for(var i,n=fe(this._passes);!(i=n()).done;){var r=i.value;r.resetUBOs(),r.resetTextures()}}},{key:"setProperty",value:function(e,t,i){var n=!1;if(void 0===i)for(var r=this._passes,o=r.length,a=0;a<o;a++){var s=r[a];this._uploadProperty(s,e,t)&&(this._props[a][e]=t,n=!0)}else{if(i>=this._passes.length)return void console.warn("illegal pass index: ".concat(i,"."));var l=this._passes[i];this._uploadProperty(l,e,t)&&(this._props[i][e]=t,n=!0)}n||console.warn("illegal property name: ".concat(e,"."))}},{key:"getProperty",value:function(e,t){if(void 0===t)for(var i=this._props,n=i.length,r=0;r<n;r++){var o=i[r];for(var a in o)if(a===e)return o[a]}else{if(t>=this._props.length)return console.warn("illegal pass index: ".concat(t,".")),null;var s=this._props[t];for(var l in s)if(l===e)return s[l]}return null}},{key:"copy",value:function(e){this._techIdx=e._techIdx,this._props.length=e._props.length;for(var t=0;t<e._props.length;t++)this._props[t]=Object.assign({},e._props[t]);this._defines.length=e._defines.length;for(var i=0;i<e._defines.length;i++)this._defines[i]=Object.assign({},e._defines[i]);this._states.length=e._states.length;for(var n=0;n<e._states.length;n++)this._states[n]=Object.assign({},e._states[n]);this._effectAsset=e._effectAsset,this._update()}},{key:"_prepareInfo",value:function(e,t){if(!Array.isArray(e)){var i=this._effectAsset?this._effectAsset.techniques[this._techIdx].passes.length:1;e=Array(i).fill(e)}for(var n=0;n<e.length;++n)Object.assign(t[n]||(t[n]={}),e[n])}},{key:"_createPasses",value:function(){var e=this._effectAsset.techniques[this._techIdx||0];if(!e)return[];for(var t=e.passes.length,i=[],n=0;n<t;++n){var r=e.passes[n],o=r.defines=this._defines.length>n?this._defines[n]:{};if(!r.switch||o[r.switch]){r.stateOverrides=this._states.length>n?this._states[n]:{},r.idxInTech=n;var a=new wh(cc.director.root.device);a.initialize(r),i.push(a)}}return i}},{key:"_update",value:function(){var e=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._effectAsset){if(this._passes&&this._passes.length)for(var n,r=fe(this._passes);!(n=r()).done;){var o=n.value;o.destroy()}this._passes=this._createPasses();var a=this._effectAsset.techniques[this._techIdx].passes.length;if(this._props.length=a,i)this._passes.forEach((function(t,i){var n=e._props[t.idxInTech];for(var r in n||(n=e._props[i]={}),n)e._uploadProperty(t,r,n[r])}));else for(var s=0;s<this._props.length;s++)this._props[s]={}}else{var l=Nu.get("missing-effect-material");l&&(this._passes=l._passes.slice())}this._hash=t.getHash(this)}},{key:"_uploadProperty",value:function(e,t,i){var n=e.getHandle(t);if(void 0===n)return!1;var r=wh.getBindingTypeFromHandle(n);if(r===exports.GFXBindingType.UNIFORM_BUFFER)Array.isArray(i)?e.setUniformArray(n,i):null!==i?e.setUniform(n,i):e.resetUniform(t);else if(r===exports.GFXBindingType.SAMPLER){var o=wh.getBindingFromHandle(n);if(i instanceof Yr)e.bindTextureView(o,i);else if(i instanceof pc||i instanceof Ru){var a=i.getGFXTextureView();if(!a||!a.texture.width||!a.texture.height)return!1;e.bindTextureView(o,a),i instanceof pc&&e.bindSampler(o,uc.getSampler(cc.director.root.device,i.getSamplerHash()))}else i||e.resetTexture(t)}return!0}},{key:"_doDestroy",value:function(){if(this._passes&&this._passes.length)for(var e,t=fe(this._passes);!(e=t()).done;){e.value.destroy()}this._effectAsset=null,this._passes.length=0,this._props.length=0,this._defines.length=0,this._states.length=0}}]),t}()).prototype,"_effectAsset",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mh=de(Fh.prototype,"_techIdx",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ph=de(Fh.prototype,"_defines",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dh=de(Fh.prototype,"_states",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bh=de(Fh.prototype,"_props",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rh=Fh))||Rh);cc.Material=Xh;var Vh=qa("cc.Script")(zh=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Ul),t}())||zh;cc._Script=Vh;var Hh=qa("cc.JavaScript")(Gh=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Vh),t}())||Gh;cc._JavaScript=Hh;var jh,Wh,Yh,qh,Qh,Zh,Kh,Jh,$h,ep,tp,ip,np,rp=qa("cc.TypeScript")(Uh=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Vh),t}())||Uh;cc._TypeScript=rp;var op=new be("Comp"),ap=(ul.Flags.IsOnEnableCalled,ul.Flags.IsOnLoadCalled),sp=(jh=qa("cc.Component"),Wh=Qa({visible:!1}),Yh=Qa({visible:!1}),qh=Qa({displayName:"Script",type:Vh,tooltip:void 0}),Qh=Qa({visible:!1}),Zh=Qa({visible:!1}),Kh=Qa({visible:!1}),jh((np=ip=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"node",ep,ne(i)),_e(i,"_enabled",tp,ne(i)),i._sceneGetter=null,i._id=op.getNewId(),i}return ee(t,ul),J(t,[{key:"_getRenderScene",value:function(){return this._sceneGetter?this._sceneGetter():this.node.scene._renderScene}},{key:"addComponent",value:function(e){return this.node.addComponent(e)}},{key:"getComponent",value:function(e){return this.node.getComponent(e)}},{key:"getComponents",value:function(e){return this.node.getComponents(e)}},{key:"getComponentInChildren",value:function(e){return this.node.getComponentInChildren(e)}},{key:"getComponentsInChildren",value:function(e){return this.node.getComponentsInChildren(e)}},{key:"destroy",value:function(){ae(te(t.prototype),"destroy",this).call(this)&&this._enabled&&this.node.activeInHierarchy&&cc.director._compScheduler.disableComp(this)}},{key:"_onPreDestroy",value:function(){this.unscheduleAllCallbacks(),cc.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)}},{key:"_instantiate",value:function(e){return e||(e=cc.instantiate._clone(this,this)),e.node=null,e}},{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cc.macro.REPEAT_FOREVER,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;cc.assertID(e,1619),cc.assertID(t>=0,1620),t=t||0,i=isNaN(i)?cc.macro.REPEAT_FOREVER:i,n=n||0;var r=cc.director.getScheduler(),o=r.isTargetPaused(this);r.schedule(e,this,t,i,n,o)}},{key:"scheduleOnce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.schedule(e,0,0,t)}},{key:"unschedule",value:function(e){e&&cc.director.getScheduler().unschedule(e,this)}},{key:"unscheduleAllCallbacks",value:function(){cc.director.getScheduler().unscheduleAllForTarget(this)}},{key:"name",get:function(){if(this._name)return this._name;var e=Fe(this),t=e.lastIndexOf(".");return t>=0&&(e=e.slice(t+1)),this.node.name+"<"+e+">"},set:function(e){this._name=e}},{key:"uuid",get:function(){return this._id}},{key:"__scriptAsset",get:function(){return null}},{key:"enabled",get:function(){return this._enabled},set:function(e){if(this._enabled!==e&&(this._enabled=e,this.node.activeInHierarchy)){var t=cc.director._compScheduler;e?t.enableComp(this):t.disableComp(this)}}},{key:"enabledInHierarchy",get:function(){return this._enabled&&this.node&&this.node.activeInHierarchy}},{key:"_isOnLoadCalled",get:function(){return this._objFlags&ap}}]),t}(),ip.system=null,de(($h=np).prototype,"name",[Wh],Object.getOwnPropertyDescriptor($h.prototype,"name"),$h.prototype),de($h.prototype,"uuid",[Yh],Object.getOwnPropertyDescriptor($h.prototype,"uuid"),$h.prototype),de($h.prototype,"__scriptAsset",[qh],Object.getOwnPropertyDescriptor($h.prototype,"__scriptAsset"),$h.prototype),de($h.prototype,"enabled",[Qh],Object.getOwnPropertyDescriptor($h.prototype,"enabled"),$h.prototype),de($h.prototype,"enabledInHierarchy",[Zh],Object.getOwnPropertyDescriptor($h.prototype,"enabledInHierarchy"),$h.prototype),ep=de($h.prototype,"node",[Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tp=de($h.prototype,"_enabled",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jh=$h))||Jh),lp=sp.prototype;lp.update=null,lp.lateUpdate=null,lp.__preload=null,lp.onLoad=null,lp.start=null,lp.onEnable=null,lp.onDisable=null,lp.onDestroy=null,lp.onFocusInEditor=null,lp.onLostFocusInEditor=null,lp.resetInEditor=null,lp._getLocalBounds=null,lp.onRestore=null,sp._requireComponent=null,sp._executionOrder=0,Ce(sp,"_registerEditorProps",(function(e,t){var i=t.requireComponent;i&&(e._requireComponent=i);var n=t.executionOrder;n&&"number"==typeof n&&(e._executionOrder=n)})),cc.Component=sp;var cp,up,hp,pp,fp,_p,dp,mp,vp,yp,gp,Ap,bp,xp,Tp,Sp,Ep,Cp,wp,kp,Op,Rp,Fp,Ip,Mp,Pp,Dp,Bp,Np,Lp,zp,Gp,Up,Xp,Vp,Hp=function(e){function t(e,i){var n;Z(this,t),(n=re(this,te(t).call(this,e.device)))._parent=void 0,n._owner=void 0,n._dontNotify=!1,n._parent=e,n._owner=i,n._doInit(n._parent,!0);for(var r,o=fe(n._shaderInfo.blocks);!(r=o()).done;){var a=r.value;if(!Oc(a.binding)){var s=n._blocks[a.binding],l=n._parent.blocks[a.binding];s.view.set(l.view),s.dirty=!0}}for(var c,u=fe(n._shaderInfo.samplers);!(c=u()).done;){var h=c.value;Oc(h.binding)||(n._textureViews[h.binding]=n._parent._textureViews[h.binding],n._samplers[h.binding]=n._parent._samplers[h.binding])}return n}return ee(t,wh),J(t,[{key:"parent",get:function(){return this._parent}}]),J(t,[{key:"overridePipelineStates",value:function(e,t){this._bs=new Br,this._dss=new Pr,this._rs=new Mr,wh.fillinPipelineInfo(this,e),wh.fillinPipelineInfo(this,t),this._onStateChange()}},{key:"tryCompile",value:function(e){if(e&&!Qu(this._defines,e))return!1;var i=ae(te(t.prototype),"tryCompile",this).call(this);return this._onStateChange(),i}},{key:"beginChangeStatesSilently",value:function(){this._dontNotify=!0}},{key:"endChangeStatesSilently",value:function(){this._dontNotify=!1}},{key:"_dynamicBatchingSync",value:function(){this._defines.USE_BATCHING=this._defines.USE_INSTANCING=!1}},{key:"_onStateChange",value:function(){this._hash=wh.getPSOHash(this),this._owner.onPassStateChange(this._dontNotify)}}]),t}(),jp=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this)))._passes=[],i._parent=void 0,i._owner=void 0,i._subModelIdx=0,i._parent=e.parent,i._owner=e.owner||null,i._subModelIdx=e.subModelIdx||0,i.copy(i._parent),i}return ee(t,Xh),J(t,[{key:"parent",get:function(){return this._parent}},{key:"owner",get:function(){return this._owner}}]),J(t,[{key:"recompileShaders",value:function(e,t){if(this._passes&&this.effectAsset)if(void 0===t)for(var i,n=fe(this._passes);!(i=n()).done;){i.value.tryCompile(e)}else this._passes[t].tryCompile(e)}},{key:"overridePipelineStates",value:function(e,t){if(this._passes&&this.effectAsset){var i=this.effectAsset.techniques[this.technique].passes;if(void 0===t)for(var n=0;n<this._passes.length;n++){var r=this._passes[n];this._states[n]=e,r.overridePipelineStates(i[r.idxInTech],e)}else this._states[t]=e,this._passes[t].overridePipelineStates(i[t],e)}}},{key:"destroy",value:function(){return this._doDestroy(),!0}},{key:"onPassStateChange",value:function(e){this._hash=Xh.getHash(this),!e&&this._owner&&this._owner._onRebuildPSO(this._subModelIdx,this)}},{key:"_createPasses",value:function(){var e=[],t=this._parent.passes;if(!t)return e;for(var i=0;i<t.length;++i)e.push(new Hp(t[i],this));return e}}]),t}(),Wp={parent:null,owner:null,subModelIdx:0},Yp=(cp=qa("cc.RenderableComponent"),up=Qa({type:[Xh]}),hp=Qa({visible:!1}),pp=Qa({type:Xh,displayName:"Materials"}),cp((dp=de((_p=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_materials",dp,ne(i)),_e(i,"_visFlags",mp,ne(i)),i._materialInstances=[],i._models=[],i}return ee(t,sp),J(t,[{key:"getMaterial",value:function(e){return e<0||e>=this._materials.length?null:this._materials[e]}},{key:"setMaterial",value:function(e,t){e&&e instanceof jp&&console.error("Can't set a material instance to a sharedMaterial slot"),this._materials[t]=e;var i=this._materialInstances[t];i?i.parent!==this._materials[t]&&(i.destroy(),this._materialInstances[t]=null,this._onMaterialModified(t,this._materials[t])):this._onMaterialModified(t,this._materials[t])}},{key:"getMaterialInstance",value:function(e){if(!this._materials[e])return null;if(null==this._materialInstances[e]){Wp.parent=this._materials[e],Wp.owner=this,Wp.subModelIdx=e;var t=new jp(Wp);this.setMaterialInstance(e,t)}return this._materialInstances[e]}},{key:"setMaterialInstance",value:function(e,t){t&&t.parent?t!==this._materialInstances[e]&&(this._materialInstances[e]=t,this._onMaterialModified(e,t)):t!==this._materials[e]&&this.setMaterial(t,e)}},{key:"getRenderMaterial",value:function(e){return this._materialInstances[e]||this._materials[e]}},{key:"_collectModels",value:function(){return this._models}},{key:"_attachToScene",value:function(){}},{key:"_detachFromScene",value:function(){}},{key:"_onMaterialModified",value:function(e,t){}},{key:"_onRebuildPSO",value:function(e,t){}},{key:"_clearMaterials",value:function(){}},{key:"_onVisibilityChange",value:function(e){}},{key:"visibility",get:function(){return this._visFlags},set:function(e){this._visFlags=e,this._onVisibilityChange(e)}},{key:"sharedMaterials",get:function(){return this._materials},set:function(e){for(var t=0;t<e.length;t++)e[t]!==this._materials[t]&&this.setMaterial(e[t],t);if(e.length<this._materials.length){for(var i=e.length;i<this._materials.length;i++)this.setMaterial(null,i);this._materials.splice(e.length)}}},{key:"materials",get:function(){for(var e=0;e<this._materials.length;e++)this._materialInstances[e]=this.getMaterialInstance(e);return this._materialInstances},set:function(e){var t=e.length-this._materials.length;if(t>0)this._materials.length=e.length,this._materialInstances.length=e.length;else if(t<0)for(var i=this._materials.length-t;i<this._materials.length;++i)this.setMaterialInstance(i,null);for(var n=0;n<this._materialInstances.length;n++)this._materialInstances[n]!=e[n]&&this.setMaterialInstance(n,e[n])}},{key:"sharedMaterial",get:function(){return this.getMaterial(0)}},{key:"material",get:function(){return this.getMaterialInstance(0)},set:function(e){1===this._materials.length&&this._materials[0]===e||this.setMaterialInstance(0,e)}}]),t}()).prototype,"_materials",[up],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mp=de(_p.prototype,"_visFlags",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ec.Enum.NONE}}),de(_p.prototype,"visibility",[hp],Object.getOwnPropertyDescriptor(_p.prototype,"visibility"),_p.prototype),de(_p.prototype,"sharedMaterials",[pp],Object.getOwnPropertyDescriptor(_p.prototype,"sharedMaterials"),_p.prototype),fp=_p))||fp),qp=At({OFF:0,ON:1}),Qp=(vp=qa("cc.ModelLightmapSettings"),yp=Qa({visible:!1}),gp=Qa({visible:!1}),Ap=Qa({formerlySerializedAs:"_recieveShadow"}),vp((Tp=de((xp=function(){function e(){Z(this,e),_e(this,"texture",Tp,this),_e(this,"uvParam",Sp,this),_e(this,"_bakeable",Ep,this),_e(this,"_castShadow",Cp,this),_e(this,"_receiveShadow",wp,this),_e(this,"_lightmapSize",kp,this)}return J(e,[{key:"bakeable",get:function(){return this._bakeable},set:function(e){this._bakeable=e}},{key:"castShadow",get:function(){return this._castShadow},set:function(e){this._castShadow=e}},{key:"receiveShadow",get:function(){return this._receiveShadow},set:function(e){this._receiveShadow=e}},{key:"lightmapSize",get:function(){return this._lightmapSize},set:function(e){this._lightmapSize=e}}]),e}()).prototype,"texture",[yp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sp=de(xp.prototype,"uvParam",[gp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ni}}),Ep=de(xp.prototype,"_bakeable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cp=de(xp.prototype,"_castShadow",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wp=de(xp.prototype,"_receiveShadow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kp=de(xp.prototype,"_lightmapSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 64}}),de(xp.prototype,"bakeable",[Qa],Object.getOwnPropertyDescriptor(xp.prototype,"bakeable"),xp.prototype),de(xp.prototype,"castShadow",[Qa],Object.getOwnPropertyDescriptor(xp.prototype,"castShadow"),xp.prototype),de(xp.prototype,"receiveShadow",[Qa],Object.getOwnPropertyDescriptor(xp.prototype,"receiveShadow"),xp.prototype),de(xp.prototype,"lightmapSize",[Qa],Object.getOwnPropertyDescriptor(xp.prototype,"lightmapSize"),xp.prototype),bp=xp))||bp);function Zp(e,t){var i=e.sharedMaterials.length;if(i!==t.sharedMaterials.length)return!1;for(var n=0;n<i;n++)if(e.getRenderMaterial(n)!==t.getRenderMaterial(n))return!1;return!0}exports.ModelComponent=(Op=qa("cc.ModelComponent"),Rp=as("i18n:cc.ModelComponent"),Fp=ts(100),Ip=es("Components/Model"),Mp=Qa({type:qp,tooltip:"i18n:model.shadow_casting_model"}),Pp=Qa({type:lu,tooltip:"i18n:model.mesh"}),Dp=Qa({visible:function(){return!!(this.mesh&&this.mesh.struct.morph&&this.mesh.struct.morph.subMeshMorphs.some((function(e){return!!e})))}}),Op(Bp=Rp(Bp=Fp(Bp=Ip(Bp=Ja((Vp=Xp=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"lightmapSettings",Lp,ne(e)),_e(e,"_mesh",zp,ne(e)),_e(e,"_shadowCastingMode",Gp,ne(e)),e._modelType=void 0,e._model=null,e._morphInstance=null,_e(e,"_enableMorph",Up,ne(e)),e._modelType=lh,e}return ee(t,Yp),J(t,[{key:"shadowCastingMode",get:function(){return this._shadowCastingMode},set:function(e){this._shadowCastingMode=e,this._updateCastShadow()}},{key:"mesh",get:function(){return this._mesh},set:function(e){var t,i=this._mesh;this._mesh=e,null===(t=this._mesh)||void 0===t||t.initialize(),this._watchMorphInMesh(),this._onMeshChanged(i),this._updateModels(),this.enabledInHierarchy&&this._attachToScene()}},{key:"model",get:function(){return this._model}},{key:"enableMorph",get:function(){return this._enableMorph},set:function(e){this._enableMorph=e}}]),J(t,[{key:"onLoad",value:function(){var e;null===(e=this._mesh)||void 0===e||e.initialize(),this._watchMorphInMesh(),this._updateModels(),this._updateCastShadow()}},{key:"onRestore",value:function(){this._updateModels()}},{key:"onEnable",value:function(){this._model||this._updateModels(),this._attachToScene()}},{key:"onDisable",value:function(){this._model&&this._detachFromScene()}},{key:"onDestroy",value:function(){this._model&&(cc.director.root.destroyModel(this._model),this._model=null,this._models.length=0),this._morphInstance&&this._morphInstance.destroy()}},{key:"setWeights",value:function(e,t){this._morphInstance&&this._morphInstance.setWeights(t,e)}},{key:"setInstancedAttribute",value:function(e,t){if(this.model)for(var i=this.model.instancedAttributes.list,n=0;n<i.length;n++)if(i[n].name===e){i[n].view.set(t);break}}},{key:"_updateLightmap",value:function(e,t,i,n,r){this.lightmapSettings.texture=e,this.lightmapSettings.uvParam.x=t,this.lightmapSettings.uvParam.y=i,this.lightmapSettings.uvParam.z=n,this.lightmapSettings.uvParam.w=r,null!==this.model&&this.model.updateLightingmap(this.lightmapSettings.texture,this.lightmapSettings.uvParam)}},{key:"_updateModels",value:function(){this.enabledInHierarchy&&this._mesh&&(this._model?(this._model.destroy(),this._model.initialize(this.node)):this._createModel(),this._updateModelParams(),null!=this.model&&this.model.updateLightingmap(this.lightmapSettings.texture,this.lightmapSettings.uvParam))}},{key:"_createModel",value:function(){var e=!!this._morphInstance&&this._modelType===lh?ch:this._modelType;this._model=cc.director.root.createModel(e),this._model.visFlags=this.visibility,this._model.initialize(this.node),this._models.length=0,this._models.push(this._model),this._morphInstance&&this._model instanceof ch&&this._model.setMorphRendering(this._morphInstance)}},{key:"_attachToScene",value:function(){if(this.node.scene&&this._model){var e=this._getRenderScene();null!=this._model.scene&&this._detachFromScene(),e.addModel(this._model)}}},{key:"_detachFromScene",value:function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)}},{key:"_updateModelParams",value:function(){if(this._mesh&&this._model){this.node.hasChangedFlags|=sh.POSITION,this._model.transform.hasChangedFlags|=sh.POSITION,this._model.isDynamicBatching=this._isBatchingEnabled();var e=this._mesh?this._mesh.subMeshCount:0,t=this._mesh.renderingSubMeshes;if(t)for(var i=0;i<e;++i){var n=this.getRenderMaterial(i),r=t[i];r&&this._model.initSubModel(i,r,n||this._getBuiltinMaterial())}this._model.createBoundingShape(this._mesh.minPosition,this._mesh.maxPosition),this._model.enabled=!0}}},{key:"_onMaterialModified",value:function(e,t){this._model&&this._model.inited&&this._onRebuildPSO(e,t||this._getBuiltinMaterial())}},{key:"_onRebuildPSO",value:function(e,t){this._model&&this._model.inited&&(this._model.isDynamicBatching=this._isBatchingEnabled(),this._model.setSubModelMaterial(e,t),this._model.updateLightingmap(this.lightmapSettings.texture,this.lightmapSettings.uvParam))}},{key:"_onMeshChanged",value:function(e){}},{key:"_clearMaterials",value:function(){if(this._model)for(var e=0;e<this._model.subModelNum;++e)this._onMaterialModified(e,null)}},{key:"_getBuiltinMaterial",value:function(){return Nu.get("missing-material")}},{key:"_onVisibilityChange",value:function(e){this._model&&(this._model.visFlags=e)}},{key:"_updateCastShadow",value:function(){this._model&&(this._shadowCastingMode===qp.OFF?this._model.castShadow=!1:(this._shadowCastingMode,qp.ON,"ShadowCastingMode ".concat(this._shadowCastingMode," is not supported."),this._model.castShadow=!0))}},{key:"_isBatchingEnabled",value:function(){for(var e=0;e<this._materials.length;++e){var t=this._materials[e];if(t)for(var i=0;i<t.passes.length;++i){var n=t.passes[i];if(n.instancedBuffer||n.batchedBuffer)return!0}}return!1}},{key:"_watchMorphInMesh",value:function(){if(this._morphInstance&&(this._morphInstance.destroy(),this._morphInstance=null),this._enableMorph&&this._mesh&&this._mesh.struct.morph&&this._mesh.morphRendering){var e=this._mesh.struct.morph;this._morphInstance=this._mesh.morphRendering.createInstance();for(var t=this._mesh.struct.primitives.length,i=0;i<t;++i){var n=e.subMeshMorphs[i];if(n){var r=n.weights||e.weights,o=r?r.slice():new Array(n.targets.length).fill(0);this._morphInstance.setWeights(i,o)}}this._model&&this._model instanceof ch&&this._model.setMorphRendering(this._morphInstance)}}},{key:"_syncMorphWeights",value:function(e){if(this._morphInstance){var t=this._morphInstance[e];t&&t.renderResources&&t.renderResources.setWeights(t.weights)}}}]),t}(),Xp.ShadowCastingMode=qp,Lp=de((Np=Vp).prototype,"lightmapSettings",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Qp}}),zp=de(Np.prototype,"_mesh",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gp=de(Np.prototype,"_shadowCastingMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qp.OFF}}),de(Np.prototype,"shadowCastingMode",[Mp],Object.getOwnPropertyDescriptor(Np.prototype,"shadowCastingMode"),Np.prototype),de(Np.prototype,"mesh",[Pp],Object.getOwnPropertyDescriptor(Np.prototype,"mesh"),Np.prototype),de(Np.prototype,"enableMorph",[Dp],Object.getOwnPropertyDescriptor(Np.prototype,"enableMorph"),Np.prototype),Up=de(Np.prototype,"_enableMorph",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bp=Np))||Bp)||Bp)||Bp)||Bp)||Bp),exports.ModelComponent||(exports.ModelComponent={});var Kp=function(){function e(){Z(this,e)}return J(e,null,[{key:"batchStaticModel",value:function(e,t){var i=e.getComponentsInChildren(exports.ModelComponent);if(i.length<2)return console.error("the number of static models to batch is less than 2,it needn't batch."),!1;for(var n=1;n<i.length;n++){if(!i[0].mesh.validateMergingMesh(i[n].mesh))return console.error("the meshes of "+i[0].node.name+" and "+i[n].node.name+" can't be merged"),!1;if(!Zp(i[0],i[n]))return console.error("the materials of "+i[0].node.name+" and "+i[n].node.name+" can't be merged"),!1}var r=new lu,o=new Qi,a=new Qi;e.getWorldMatrix(a),Qi.invert(a,a);for(var s=0;s<i.length;s++){var l=i[s];l.node.getWorldMatrix(o),Qi.multiply(o,a,o),r.merge(i[s].mesh,o),l.enabled=!1}var c=t.addComponent(exports.ModelComponent);return c.mesh=r,c.sharedMaterials=i[0].sharedMaterials,!0}},{key:"unbatchStaticModel",value:function(e,t){for(var i=e.getComponentsInChildren(exports.ModelComponent),n=0;n<i.length;n++){i[n].enabled=!0}var r=t.getComponent(exports.ModelComponent);return r&&r.destroy(),!0}}]),e}(),Jp=new Mi;function $p(e,t,i,n){n||(n=new Mi),e.convertToUINode(t,i,n);var r=i.position;return n.add(r),n}function ef(e,t,i){return i||(i=new Mi),e.worldToScreen(t,i),i.x=i.x/cc.view.getScaleX(),i.y=i.y/cc.view.getScaleY(),i}var tf,nf,rf,of,af,sf,lf,cf,uf,hf,pf,ff,_f,df={WorldNode3DToLocalNodeUI:$p,WorldNode3DToWorldNodeUI:ef};cc.pipelineUtils=df,exports.replaceProperty(cc.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.CameraComponent.prototype",customFunction:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0],r=t[3]||Jp;return n.convertToUINode(t[1],t[2],r),r.add(t[2].position),t[3]||r.clone()}}]);var mf=(tf=qa("cc.MissingClass"),nf=Qa({visible:!1,editorOnly:!0}),tf((af=de((of=function e(){Z(this,e),_e(this,"_$erialized",af,this)}).prototype,"_$erialized",[nf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rf=of))||rf),vf=(sf=qa("cc.MissingScript"),lf=rs("packages://inspector/inspectors/comps/missing-script.js"),cf=Qa({serializable:!1}),uf=Qa({visible:!1,editorOnly:!0}),sf(hf=lf((ff=de((pf=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"compiled",ff,ne(e)),_e(e,"_$erialized",_f,ne(e)),e}return ee(t,sp),J(t,null,[{key:"safeFindClass",value:function(e,i){var n=Ke(e);return n||(e?(cc.deserialize.reportMissingClass(e),t.getMissingWrapper(e,i)):null)}},{key:"getMissingWrapper",value:function(e,i){return i.node&&(/^[0-9a-zA-Z+/]{23}$/.test(e)||rt.test(e))?t:mf}}]),J(t,[{key:"onLoad",value:function(){cc.warnID(4600,this.node.name)}}]),t}()).prototype,"compiled",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_f=de(pf.prototype,"_$erialized",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hf=pf))||hf)||hf);cc._MissingScript=vf;var yf=function(){function e(){Z(this,e),this.uuidList=void 0,this.uuidObjList=void 0,this.uuidPropList=void 0,this._stillUseUrl=void 0,this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this._stillUseUrl=Re(!0)}return J(e,[{key:"reset",value:function(){this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,je(this._stillUseUrl)}},{key:"push",value:function(e,t,i,n){n&&(this._stillUseUrl[this.uuidList.length]=!0),this.uuidList.push(i),this.uuidObjList.push(e),this.uuidPropList.push(t)}}]),e}();yf.pool=void 0,yf.pool=new et((function(e){e.reset()}),10),yf.pool.get=function(){return this._get()||new yf};function gf(e,t,i,n,r){var o;n.hasOwnProperty("__deserialize__")?o=n.__deserialize__:(o=function(e,t){var i,n=rt.test($e(t)),r=cc.js.isChildClassOf(t,cc._BaseNode)||cc.js.isChildClassOf(t,cc.Component),o=[],a=o,s=[],l=s,c=[],u=[];return function(){var e=t.__values__;i="_$erialized"===e[e.length-1];for(var r=Ct(t),h=0;h<e.length;h++){var p=e[h],f=p;r[p+"$_$formerlySerializedAs"]&&(f=r[p+"$_$formerlySerializedAs"]);var _=r[p+"$_$saveUrlAsAsset"],d=ni.getDefault(r[p+"$_$default"]),m=!1;if(n){var v=r[p+"$_$type"];if(void 0===d&&v)m=v===cc.String||v===cc.Integer||v===cc.Float||v===cc.Boolean;else{var y=Q(d);m="string"===y&&!_||"number"===y||"boolean"===y}}n&&m?(f!==p&&a===o&&(a=o.slice()),o.push(p),a!==o&&a.push(f)):(f!==p&&l===s&&(l=s.slice()),s.push(p),l!==s&&l.push(f),c.push(_),u.push(d instanceof cc.ValueType&&d.constructor))}}(),function(e,t,h,p,f){for(var _=0;_<o.length;++_){var d=h[a[_]];void 0!==d&&(t[o[_]]=d)}for(var m=0;m<s.length;++m){var v=s[m],y=h[l[m]];if(void 0!==y)if(n||"object"===Q(y)){var g=u[m];g?n||y?e._deserializeTypedObject(t[v],y,g):t[v]=null:y?e._deserializeObjField(t,y,v,null,c[m]):t[v]=null}else t[v]=y}r&&h._id&&(t._id=h._id),i&&(t._$erialized=JSON.parse(JSON.stringify(h)),e._deserializePrimitiveObject(t._$erialized,h))}}(0,n),Ce(n,"__deserialize__",o,!0)),o(e,t,i,n,r),t.__postDeserialize&&t.__postDeserialize()}var Af=function(){function e(t,i,n,r,o){Z(this,e),this.result=void 0,this.customEnv=void 0,this.deserializedList=void 0,this.deserializedData=void 0,this._classFinder=void 0,this._target=void 0,this._ignoreEditorOnly=void 0,this._idList=void 0,this._idObjList=void 0,this._idPropList=void 0,this.result=t,this.customEnv=r,this.deserializedList=[],this.deserializedData=null,this._classFinder=n,this._idList=[],this._idObjList=[],this._idPropList=[]}return J(e,[{key:"deserialize",value:function(e){if(Array.isArray(e)){var t=e,i=t.length;this.deserializedList.length=i;for(var n=0;n<i;n++)t[n]&&(this.deserializedList[n]=this._deserializeObject(t[n],!1));this.deserializedData=i>0?this.deserializedList[0]:[]}else this.deserializedList.length=1,this.deserializedData=e?this._deserializeObject(e,!1):null,this.deserializedList[0]=this.deserializedData;return function(e){var t,i,n,r=e.deserializedList,o=e._idPropList,a=e._idList,s=e._idObjList;for(e._classFinder&&e._classFinder.onDereferenced,t=0;t<a.length;t++)i=o[t],n=a[t],s[t][i]=r[n]}(this),this.deserializedData}},{key:"_deserializeObject",value:function(e,t,i,n,r){var o,a=null,s=null,l=e.__type__;if("TypedArray"===l){var c=e.array;a=new window[e.ctor](c.length);for(var u=0;u<c.length;++u)a[u]=c[u];return a}if(l){if(!(s=this._classFinder(l,e,n,r)))return this._classFinder===Ke&&cc.deserialize.reportMissingClass(l),null;var h=this;(a=new s)._deserialize?a._deserialize(e.content,h):cc.Class._isCCClass(s)?gf(h,a,e,s,i):h._deserializeTypedObject(a,e,s)}else if(Array.isArray(e)){a=new Array(e.length);for(var p=0;p<e.length;p++)"object"===Q(o=e[p])&&o?this._deserializeObjField(a,o,""+p,null,t):a[p]=o}else a={},this._deserializePrimitiveObject(a,e);return a}},{key:"_deserializeObjField",value:function(e,t,i,n,r){var o=t.__id__;if(void 0===o){var a=t.__uuid__;a?this.result.push(e,i,a,r):e[i]=this._deserializeObject(t,r)}else{var s=this.deserializedList[o];s?e[i]=s:(this._idList.push(o),this._idObjList.push(e),this._idPropList.push(i))}}},{key:"_deserializePrimitiveObject",value:function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"!==Q(n)?"__type__"!==i&&(e[i]=n):n?this._deserializeObjField(e,n,i):e[i]=null}}},{key:"_deserializeTypedObject",value:function(e,t,i){if(i===cc.Vec2)return e.x=t.x||0,void(e.y=t.y||0);if(i===cc.Vec3)return e.x=t.x||0,e.y=t.y||0,void(e.z=t.z||0);if(i!==cc.Color){if(i===cc.Size)return e.width=t.width||0,void(e.height=t.height||0);for(var n=Ct(i),r=i.__props__||Object.keys(e),o=0;o<r.length;o++){var a=r[o],s=t[a];void 0!==s&&t.hasOwnProperty(a)||(s=ni.getDefault(n[a+"$_$default"])),"object"!==Q(s)?e[a]=s:s?this._deserializeObjField(e,s,a):e[a]=null}}else{e.r=t.r||0,e.g=t.g||0,e.b=t.b||0;var l=t.a;e.a=void 0===l?255:l}}}]),e}();function bf(e,t,i){var n=(i=i||{}).classFinder||Ke,r=i.createAssetRefs||cc.sys.platform===cc.sys.EDITOR_CORE,o=i.customEnv,a=i.ignoreEditorOnly;"string"==typeof e&&(e=JSON.parse(e));var s=!t;t=t||yf.pool.get();var l=Af.pool.get(t,!1,n,o,a);cc.game._isCloning=!0;var c=l.deserialize(e);return cc.game._isCloning=!1,Af.pool.put(l),r&&t.assignAssetsBy(EditorExtends.serialize.asAsset),s&&yf.pool.put(t),c}Af.pool=void 0,Af.pool=new et((function(e){e.result=null,e.customEnv=null,e.deserializedList.length=0,e.deserializedData=null,e._classFinder=null,e._idList.length=0,e._idObjList.length=0,e._idPropList.length=0}),1),Af.pool.get=function(e,t,i,n,r){var o=this._get();return o?(o.result=e,o.customEnv=n,o._classFinder=i,o):new Af(e,t,i,n,r)},bf.Details=yf,bf.reportMissingClass=function(e){g(5302,e)},cc.deserialize=bf;var xf,Tf,Sf,Ef,Cf,wf,kf,Of,Rf,Ff,If,Mf=ul.Flags.Destroyed,Pf=ul.Flags.PersistentMask,Df=[];function Bf(e,t){if(!t){if("object"!==Q(e)||Array.isArray(e))return null;if(!e)return null;if(!cc.isValid(e))return null}var i;if(e instanceof ul){if((e=e)._instantiate)return cc.game._isCloning=!0,i=e._instantiate(),cc.game._isCloning=!1,i;if(e instanceof cc.Asset)return null}return cc.game._isCloning=!0,i=Nf(e),cc.game._isCloning=!1,i}function Nf(e,t){if(Array.isArray(e))return null;if(ft&&ft(e))return null;var i;if(e._iN$t)i=e._iN$t;else if(e.constructor){i=new(0,e.constructor)}else i=Object.create(null);Lf(e,i,t);for(var n=0,r=Df.length;n<r;++n)Df[n]._iN$t=null;return Df.length=0,i}function Lf(e,t,i){Ce(e,"_iN$t",t,!0),Df.push(e);var n=e.constructor;if(cc.Class._isCCClass(n))!function(e,t,i,n){for(var r=e.__values__,o=0;o<r.length;o++){var a=r[o],s=t[a];if("object"===Q(s)&&s){var l=i[a];l instanceof xt&&l.constructor===s.constructor?l.set(s):i[a]=s._iN$t||zf(s,n)}else i[a]=s}}(n,e,t,i);else for(var r in e)if(e.hasOwnProperty(r)&&(95!==r.charCodeAt(0)||95!==r.charCodeAt(1)||"__type__"===r)){var o=e[r];if("object"===Q(o)&&o){if(o===t)continue;t[r]=o._iN$t||zf(o,i)}else t[r]=o}e instanceof ul&&(t._objFlags&=Pf)}function zf(e,t){if(e instanceof xt)return e.clone();if(e instanceof cc.Asset)return e;var i;if(Array.isArray(e)){var n=e.length;i=new Array(n),e._iN$t=i;for(var r=0;r<n;++r){var o=e[r];"object"===Q(o)&&o?i[r]=o._iN$t||zf(o,t):i[r]=o}return Df.push(e),i}if(e._objFlags&Mf)return null;var a=e.constructor;if(cc.Class._isCCClass(a)){if(t)if(t instanceof cc.Component){if(e instanceof cc._BaseNode||e instanceof cc.Component)return e}else if(t instanceof cc._BaseNode)if(e instanceof cc._BaseNode){if(!e.isChildOf(t))return e}else if(e instanceof cc.Component&&!e.node.isChildOf(t))return e;i=new a}else if(a===Object)i={};else{if(a)return e;i=Object.create(null)}return Lf(e,i,t),i}Bf._clone=Nf,cc.instantiate=Bf,function(e){e[e.Uint8=0]="Uint8",e[e.Uint16=1]="Uint16",e[e.Uint32=2]="Uint32",e[e.Int8=3]="Int8",e[e.Int16=4]="Int16",e[e.Int32=5]="Int32",e[e.Float32=6]="Float32",e[e.Float64=7]="Float64"}(Ff||(Ff={})),function(e){e[e.Scalar=0]="Scalar",e[e.Vec2=1]="Vec2",e[e.Vec3=2]="Vec3",e[e.Vec4=3]="Vec4",e[e.Quat=4]="Quat",e[e.Mat4=5]="Mat4"}(If||(If={}));function Gf(e,t){return(t<<3)+e}var Uf=qa("cc.CompactValueTypeArray")((Of=kf=function(){function e(){Z(this,e),_e(this,"_byteOffset",Sf,this),_e(this,"_unitCount",Ef,this),_e(this,"_unitElement",Cf,this),_e(this,"_length",wf,this)}return J(e,[{key:"decompress",value:function(e){for(var t,i={storageUnit:7&(t=this._unitElement),elementType:t>>3},n=i.storageUnit,r=Xf(i.elementType),o=new(Vf(n))(e,this._byteOffset,this._unitCount),a=new Array(this._length),s=0;s<this._length;++s)a[s]=r.decompress(o,s);return a}}],[{key:"lengthFor",value:function(e,t,i){return Xf(t).requiredUnits*e.length*Vf(i).BYTES_PER_ELEMENT}},{key:"compress",value:function(t,i,n,r,o,a){for(var s=Xf(i),l=Vf(n),c=s.requiredUnits*t.length,u=new l(r,o,c),h=0;h<t.length;++h)s.compress(u,h,t[h]);var p=new e;return p._unitElement=Gf(n,i),p._byteOffset=a,p._unitCount=c,p._length=t.length,p}}]),e}(),kf.StorageUnit=Ff,kf.ElementType=If,Sf=de((Tf=Of).prototype,"_byteOffset",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ef=de(Tf.prototype,"_unitCount",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cf=de(Tf.prototype,"_unitElement",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gf(Ff.Uint8,If.Scalar)}}),wf=de(Tf.prototype,"_length",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xf=Tf))||xf;function Xf(e){return Hf[e]}function Vf(e){switch(e){case Ff.Uint8:return Uint8Array;case Ff.Uint16:return Uint16Array;case Ff.Uint32:return Uint32Array;case Ff.Int8:return Int8Array;case Ff.Int16:return Int16Array;case Ff.Int32:return Int32Array;case Ff.Float32:return Float32Array;case Ff.Float64:return Float64Array}}var Hf=($(Rf={},If.Scalar,{requiredUnits:1,compress:function(e,t,i){e[t]=i},decompress:function(e,t){return e[t]}}),$(Rf,If.Vec2,{requiredUnits:2,compress:function(e,t,i){e[2*t]=i.x,e[2*t+1]=i.y},decompress:function(e,t){return new Mi(e[2*t],e[2*t+1])}}),$(Rf,If.Vec3,{requiredUnits:3,compress:function(e,t,i){e[3*t]=i.x,e[3*t+1]=i.y,e[3*t+2]=i.z},decompress:function(e,t){return new Mi(e[3*t],e[3*t+1],e[3*t+2])}}),$(Rf,If.Vec4,{requiredUnits:4,compress:function(e,t,i){e[4*t]=i.x,e[4*t+1]=i.y,e[4*t+2]=i.z,e[4*t+3]=i.w},decompress:function(e,t){return new Ni(e[4*t],e[4*t+1],e[4*t+2],e[4*t+3])}}),$(Rf,If.Quat,{requiredUnits:4,compress:function(e,t,i){e[4*t]=i.x,e[4*t+1]=i.y,e[4*t+2]=i.z,e[4*t+3]=i.w},decompress:function(e,t){return new Xi(e[4*t],e[4*t+1],e[4*t+2],e[4*t+3])}}),$(Rf,If.Mat4,{requiredUnits:16,compress:function(e,t,i){Qi.toArray(e,i,16*t)},decompress:function(e,t){return Qi.fromArray(new Qi,e,16*t)}}),Rf);function jf(e){var t=[];return function e(t,i){for(var n,r=fe(i);!(n=r()).done;){var o=n.value;Array.isArray(o)?e(t,o):t.push(o)}}(t,e),t.join("")}cc._decorator=gs;var Wf=ul.Flags.Destroyed,Yf=ul.Flags.PersistentMask,qf=ni.IDENTIFIER_RE,Qf={"cc.Node":"cc.Node","cc.Sprite":"cc.Sprite","cc.Label":"cc.Label","cc.Button":"cc.Button","cc.Widget":"cc.Widget","cc.Animation":"cc.Animation","cc.ClickEvent":!1,"cc.PrefabInfo":!1},Zf=ni.escapeForJS,Kf=function(){function e(t,i){Z(this,e),this.varName=void 0,this.expression=void 0,this.varName=t,this.expression=i}return J(e,[{key:"toString",value:function(){return"var "+this.varName+"="+this.expression+";"}}]),e}();function Jf(e,t){return t instanceof Kf?new Kf(t.varName,e+t.expression):e+t}function $f(e,t,i){Array.isArray(i)?(i[0]=Jf(t,i[0]),e.push(i)):e.push(Jf(t,i)+";")}var e_=function(){function e(t){Z(this,e),this._exps=void 0,this._targetExp=void 0,this._exps=[],this._targetExp=t}return J(e,[{key:"append",value:function(e,t){this._exps.push([e,t])}},{key:"writeCode",value:function(e){var t;if(this._exps.length>1)e.push("t="+this._targetExp+";"),t="t";else{if(1!==this._exps.length)return;t=this._targetExp}for(var i=0;i<this._exps.length;i++){var n=this._exps[i];$f(e,t+t_(n[0])+"=",n[1])}}}]),e}();function t_(e){return qf.test(e)?"."+e:"["+Zf(e)+"]"}e_.pool=void 0,e_.pool=new et((function(e){e._exps.length=0,e._targetExp=null}),1),e_.pool.get=function(e){var t=this._get()||new e_;return t._targetExp=e,t};var i_,n_,r_,o_,a_,s_,l_,c_=function(){function e(t,i){var n;Z(this,e),this.parent=void 0,this.objsToClear_iN$t=void 0,this.codeArray=void 0,this.objs=void 0,this.funcs=void 0,this.funcModuleCache=void 0,this.globalVariables=void 0,this.globalVariableId=void 0,this.localVariableId=void 0,this.result=void 0,this.parent=i,this.objsToClear_iN$t=[],this.codeArray=[],this.objs=[],this.funcs=[],this.funcModuleCache=Re(),Ue(this.funcModuleCache,Qf),this.globalVariables=[],this.globalVariableId=0,this.localVariableId=0,this.codeArray.push("var o,t;","if(R){","o=R;","}else{","o=R=new "+this.getFuncModule(t.constructor,!0)+"();","}"),t._iN$t={globalVar:"R"},this.objsToClear_iN$t.push(t),this.enumerateObject(this.codeArray,t),this.globalVariables.length>0&&(n="var "+this.globalVariables.join(",")+";");var r=jf(["return (function(R){",n||[],this.codeArray,"return o;","})"]);this.result=Function("O","F",r)(this.objs,this.funcs);for(var o=0,a=this.objsToClear_iN$t.length;o<a;++o)this.objsToClear_iN$t[o]._iN$t=null;this.objsToClear_iN$t.length=0}return J(e,[{key:"getFuncModule",value:function(e,t){var i=Fe(e);if(i){var n=this.funcModuleCache[i];if(n)return n;if(void 0===n){var r=-1!==i.indexOf(".");if(r)try{if(r=e===Function("return "+i)())return this.funcModuleCache[i]=i,i}catch(e){}}}var o=this.funcs.indexOf(e);o<0&&(o=this.funcs.length,this.funcs.push(e));var a="F["+o+"]";return t&&(a="("+a+")"),this.funcModuleCache[i]=a,a}},{key:"getObjRef",value:function(e){var t=this.objs.indexOf(e);return t<0&&(t=this.objs.length,this.objs.push(e)),"O["+t+"]"}},{key:"setValueType",value:function(e,t,i,n){var r=e_.pool.get(n),o=t.constructor.__props__;o||(o=Object.keys(t));for(var a=0;a<o.length;a++){var s=o[a],l=i[s];if(t[s]!==l){var c=this.enumerateField(i,s,l);r.append(s,c)}}r.writeCode(e),e_.pool.put(r)}},{key:"enumerateCCClass",value:function(e,t,i){for(var n=i.__values__,r=Ct(i),o=0;o<n.length;o++){var a=n[o],s=t[a],l=r[a+"$_$default"];if(!u_(l,s))if("object"===Q(s)&&s instanceof cc.ValueType&&(l=ni.getDefault(l))&&l.constructor===s.constructor){var c="o"+t_(a);this.setValueType(e,l,s,c)}else this.setObjProp(e,t,a,s)}}},{key:"instantiateArray",value:function(e){if(0===e.length)return"[]";var t="a"+ ++this.localVariableId,i=[new Kf(t,"new Array("+e.length+")")];e._iN$t={globalVar:"",source:i},this.objsToClear_iN$t.push(e);for(var n=0;n<e.length;++n){$f(i,t+"["+n+"]=",this.enumerateField(e,n,e[n]))}return i}},{key:"enumerateField",value:function(e,t,i){if("object"===Q(i)&&i){var n=i._iN$t;if(n){var r=n.globalVar;if(!r){r=n.globalVar="v"+ ++this.globalVariableId,this.globalVariables.push(r);var o=n.source[0];n.source[0]=Jf(r+"=",o)}return r}return Array.isArray(i)?this.instantiateArray(i):this.instantiateObj(i)}return"function"==typeof i?this.getFuncModule(i):"string"==typeof i?Zf(i):("_objFlags"===t&&e instanceof ul&&(i&=Yf),i)}},{key:"setObjProp",value:function(e,t,i,n){$f(e,"o"+t_(i)+"=",this.enumerateField(t,i,n))}},{key:"enumerateObject",value:function(e,t){var i=t.constructor;if(cc.Class._isCCClass(i))this.enumerateCCClass(e,t,i);else for(var n in t)if(t.hasOwnProperty(n)&&(95!==n.charCodeAt(0)||95!==n.charCodeAt(1)||"__type__"===n)){var r=t[n];"object"===Q(r)&&r&&r===t._iN$t||this.setObjProp(e,t,n,r)}}},{key:"instantiateObj",value:function(e){if(e instanceof cc.ValueType)return ni.getNewValueTypeCode(e);if(e instanceof cc.Asset)return this.getObjRef(e);if(e._objFlags&Wf)return null;var t,i=e.constructor;if(cc.Class._isCCClass(i)){if(this.parent)if(this.parent instanceof cc.Component){if(e instanceof cc._BaseNode||e instanceof cc.Component)return this.getObjRef(e)}else if(this.parent instanceof cc._BaseNode)if(e instanceof cc._BaseNode){if(!e.isChildOf(this.parent))return this.getObjRef(e)}else if(e instanceof cc.Component&&!e.node.isChildOf(this.parent))return this.getObjRef(e);t=new Kf("o","new "+this.getFuncModule(i,!0)+"()")}else if(i===Object)t=new Kf("o","{}");else{if(i)return this.getObjRef(e);t=new Kf("o","Object.create(null)")}var n=[t];return e._iN$t={globalVar:"",source:n},this.objsToClear_iN$t.push(e),this.enumerateObject(n,e),["(function(){",n,"return o;})();"]}}]),e}();function u_(e,t){if("function"==typeof e)try{e=e()}catch(e){return!1}if(e===t)return!0;if(e&&t){if(e instanceof cc.ValueType&&e.equals(t))return!0;if(Array.isArray(e)&&Array.isArray(t)||e.constructor===Object&&t.constructor===Object)try{return Array.isArray(e)&&Array.isArray(t)&&0===e.length&&0===t.length}catch(e){}}return!1}var h_,p_,f_,__,d_=At({AUTO:0,SINGLE_INSTANCE:1,MULTI_INSTANCE:2}),m_=qa("cc.Prefab")((l_=s_=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"data",r_,ne(e)),_e(e,"optimizationPolicy",o_,ne(e)),_e(e,"asyncLoadAssets",a_,ne(e)),e._createFunction=void 0,e._instantiatedTimes=void 0,e._createFunction=null,e._instantiatedTimes=0,e}return ee(t,Ul),J(t,[{key:"createNode",value:function(e){var t=cc.instantiate(this);t.name=this.name,e(null,t)}},{key:"compileCreateFunction",value:function(){var e,t;this._createFunction=(e=this.data,t=e instanceof cc._BaseNode&&e,new c_(e,t).result)}},{key:"_doInstantiate",value:function(e){return this.data._prefab?this.data._prefab._synced=!0:cc.warnID(3700),this._createFunction||this.compileCreateFunction(),this._createFunction(e)}},{key:"_instantiate",value:function(){var e;return this.data._prefab._synced=!0,e=this.data._instantiate(),++this._instantiatedTimes,e}}]),t}(),s_.OptimizationPolicy=d_,s_.OptimizationPolicyThreshold=3,r_=de((n_=l_).prototype,"data",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o_=de(n_.prototype,"optimizationPolicy",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d_.AUTO}}),a_=de(n_.prototype,"asyncLoadAssets",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i_=n_))||i_;cc.Prefab=m_,Ie(cc,"cc._Prefab","Prefab");var v_,y_,g_,A_=qa("cc.SceneAsset")((f_=de((p_=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"scene",f_,ne(i)),_e(i,"asyncLoadAssets",__,ne(i)),i}return ee(t,Ul),t}()).prototype,"scene",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),__=de(p_.prototype,"asyncLoadAssets",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h_=p_))||h_;cc.SceneAsset=A_;var b_,x_,T_,S_=qa("cc.SpriteAtlas")((g_=de((y_=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"spriteFrames",g_,ne(i)),i}return ee(t,Ul),J(t,[{key:"getTexture",value:function(){var e=Object.keys(this.spriteFrames);if(e.length>0){var t=this.spriteFrames[e[0]];return t&&t.texture}return null}},{key:"getSpriteFrame",value:function(e){var t=this.spriteFrames[e];return t?(t.name||(t.name=e),t):null}},{key:"getSpriteFrames",value:function(){for(var e=[],t=this.spriteFrames,i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e.push(t[r])}return e}},{key:"_serialize",value:function(e){for(var t=[],i=0,n=Object.keys(this.spriteFrames);i<n.length;i++){var r=n[i],o=this.spriteFrames[r],a=o?o._uuid:"";a&&e&&(a=EditorExtends.UuidUtils.compressUuid(a,!0)),t.push(r),t.push(a)}return{name:this._name,spriteFrames:t}}},{key:"_deserialize",value:function(e,t){var i=e;this._name=i.name;var n=i.spriteFrames;this.spriteFrames=Re();for(var r=0;r<n.length;r+=2)t.result.push(this.spriteFrames,n[r],n[r+1])}}]),t}()).prototype,"spriteFrames",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Re()}}),v_=y_))||v_;cc.SpriteAtlas=S_;var E_,C_,w_,k_=qa("cc.TextAsset")((T_=de((x_=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"text",T_,ne(i)),i}return ee(t,Ul),J(t,[{key:"toString",value:function(){return this.text}}]),t}()).prototype,"text",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b_=x_))||b_;cc.TextAsset=k_;var O_=qa("cc.JsonAsset")((w_=de((C_=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"json",w_,ne(i)),i}return ee(t,Ul),t}()).prototype,"json",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E_=C_))||E_;cc.JsonAsset=O_;var R_="0123456789abcdef".split(""),F_=["","","",""],I_=F_.concat(F_,"-",F_,"-",F_,"-",F_,"-",F_,F_,F_),M_=I_.map((function(e,t){return"-"===e?NaN:t})).filter(isFinite);function P_(e){var t=e.split("@")[0];if(22!==t.length)return e;I_[0]=e[0],I_[1]=e[1];for(var i=2,n=2;i<22;i+=2){var r=lt[e.charCodeAt(i)],o=lt[e.charCodeAt(i+1)];I_[M_[n++]]=R_[r>>2],I_[M_[n++]]=R_[(3&r)<<2|o>>4],I_[M_[n++]]=R_[15&o]}return e.replace(t,I_.join(""))}var D_={_rawAssets:"",normalize:function(e){return e&&(46===e.charCodeAt(0)&&47===e.charCodeAt(1)?e=e.slice(2):47===e.charCodeAt(0)&&(e=e.slice(1))),e},raw:function(e){if((e=this.normalize(e)).startsWith("resources/")){var t=cc.loader._getResUuid(e.slice(10),cc.Asset,null,!0);if(t)return cc.AssetLibrary.getLibUrlNoExt(t,!0)+M(e)}else b(7002,e);return this._rawAssets+e},_init:function(e){this._rawAssets=G(e)+"/"}};cc.url=D_;var B_=function e(t,i){Z(this,e),this.uuid=void 0,this.type=void 0,this.uuid=t,this.type=i};function N_(e,t){return!(e.length>t.length)||47===e.charCodeAt(t.length)}var L_=function(){function e(){Z(this,e),this._pathToUuid=void 0,this._pathToUuid=Re(!0)}return J(e,[{key:"getUuid",value:function(e,t){e=D_.normalize(e);var i=this._pathToUuid[e];if(i)if(Array.isArray(i)){if(!t)return i[0].uuid;for(var n=0;n<i.length;n++){var r=i[n];if(He(r.type,t))return r.uuid}}else if(!t||He(i.type,t))return i.uuid;return""}},{key:"getUuidArray",value:function(e,t,i){"/"===(e=D_.normalize(e))[e.length-1]&&(e=e.slice(0,-1));var n=this._pathToUuid,r=[];for(var o in n)if(o.startsWith(e)&&N_(o,e)||!e){var a=n[o];if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];t&&!He(l.type,t)||(r.push(l.uuid),i&&i.push(o))}else t&&!He(a.type,t)||(r.push(a.uuid),i&&i.push(o))}return r}},{key:"add",value:function(e,t,i,n){n&&(e=e.substring(0,e.length-M(e).length));var r=new B_(t,i);ht(this._pathToUuid,e,r,n)}},{key:"_getInfo_DEBUG",value:function(e,t){for(var i=this._pathToUuid,n=Object.keys(i),r=0;r<n.length;++r){var o=n[r],a=i[o];if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];if(l.uuid===e)return t.path=o,t.type=l.type,!0}else if(a.uuid===e)return t.path=o,t.type=a.type,!0}return!1}},{key:"reset",value:function(){this._pathToUuid=Re(!0)}}]),e}();function z_(e,t){var i=cc.loader.getItem(e);if(i){var n=i.dependKeys;if(n)for(var r=0;r<n.length;r++){var o=n[r];t[o]||(t[o]=!0,z_(o,t))}}}function G_(e,t){if(e._uuid){var i=cc.loader._getReferenceKey(e);t[i]||(t[i]=!0,z_(i,t))}}function U_(e,t){for(var i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var r=e[i[n]];if("object"===Q(r)&&r)if(Array.isArray(r))for(var o=0;o<r.length;o++){var a=r[o];a instanceof Rl&&G_(a,t)}else if(r.constructor&&r.constructor!==Object)r instanceof Rl&&G_(r,t);else for(var s=Object.getOwnPropertyNames(r),l=0;l<s.length;l++){var c=r[s[l]];c instanceof Rl&&G_(c,t)}}}function X_(e,t){for(var i=0;i<e._components.length;i++)U_(e._components[i],t);for(var n=0;n<e._children.length;n++)X_(e._children[n],t)}function V_(e){var t={};return z_(e,t),Object.keys(t)}var H_,j_=0|998*Math.random(),W_=Re(!0),Y_=[];!function(e){e[e.WORKING=0]="WORKING",e[e.COMPLETE=1]="COMPLETE",e[e.ERROR=2]="ERROR"}(H_||(H_={}));var q_=Re(!0);function Q_(e){if(e){var t=e.split("?");if(t&&t[0]&&t[1]){var i={};return t[1].split("&").forEach((function(e){var t=e.split("=");i[t[0]]=t[1]})),i}}}function Z_(e,t){var i="object"===Q(e)?e.url:e,n={queueId:t,id:i,url:i,rawUrl:void 0,urlParam:Q_(i),type:"",error:null,content:null,complete:!1,states:{},deps:null,isScene:e.uuid&&cc.game._sceneInfos.find((function(t){return t.uuid===e.uuid}))};if("object"===Q(e)&&(Ue(n,e),e.skips))for(var r=0;r<e.skips.length;r++){var o=e.skips[r];n.states[o]=H_.COMPLETE}return n.rawUrl=n.url,i&&!n.type&&(n.type=M(i).toLowerCase().substr(1)),n}var K_=[];function J_(e,t,i){if(!e||!t)return!1;var n=!1;if(K_.push(t.id),t.deps){var r,o,a=t.deps;for(r=0;r<a.length;r++){if((o=a[r]).id===e.id){n=!0;break}if(!(K_.indexOf(o.id)>=0)&&(o.deps&&J_(e,o,!0))){n=!0;break}}}return i||(K_.length=0),n}var $_=function(e){function t(e,i,n,r){var o;return Z(this,t),(o=re(this,te(t).call(this))).onProgress=void 0,o.onComplete=void 0,o.map=Re(!0),o.completed={},o.totalCount=0,o.completedCount=0,o.active=void 0,o._id=void 0,o._pipeline=void 0,o._errorUrls=[],o._appending=!1,o._ownerQueue=null,o._id=++j_,W_[o._id]=ne(o),o._pipeline=e,o.onProgress=n,o.onComplete=r,o._pipeline?o.active=!0:o.active=!1,i&&(i.length>0?o.append(i):o.allComplete()),o}return ee(t,gl),J(t,[{key:"append",value:function(e,i){var n=this;if(!this.active)return[];i&&!i.deps&&(i.deps=[]),this._appending=!0;var r,o,a,s,l=[];for(r=0;r<e.length;++r){if((o=e[r]).queueId&&!this.map[o.id]){if(this.map[o.id]=o,i&&i.deps.push(o),o.complete||J_(i,o)){this.totalCount++,this.itemComplete(o.id);continue}if("continue"===function(){var e=n,r=W_[o.queueId];return r&&(n.totalCount++,t.registerQueueDep(i||n._id,o.id),r.addListener(o.id,(function(t){e.itemComplete(t.id)}))),"continue"}())continue}if("string"==typeof((s=o).url||s)){var c=(a=Z_(o,this._id)).id;this.map[c]||(this.map[c]=a,this.totalCount++,i&&i.deps.push(a),t.registerQueueDep(i||this._id,c),l.push(a))}}return this._appending=!1,this.completedCount===this.totalCount?this.allComplete():this._pipeline.flowIn(l),l}},{key:"_childOnProgress",value:function(e){if(this.onProgress){var t=q_[this._id];this.onProgress(t?t.completed.length:this.completedCount,t?t.deps.length:this.totalCount,e)}}},{key:"allComplete",value:function(){var e=0===this._errorUrls.length?null:this._errorUrls;this.onComplete&&this.onComplete(e,this)}},{key:"isCompleted",value:function(){return this.completedCount>=this.totalCount}},{key:"isItemCompleted",value:function(e){return!!this.completed[e]}},{key:"exists",value:function(e){return!!this.map[e]}},{key:"getContent",value:function(e){var t=this.map[e],i=null;return t&&(t.content?i=t.content:t.alias&&(i=t.alias.content)),i}},{key:"getError",value:function(e){var t=this.map[e],i=null;return t&&(t.error?i=t.error:t.alias&&(i=t.alias.error)),i}},{key:"removeItem",value:function(e){var t=this.map[e];t&&this.completed[t.alias||e]&&(delete this.completed[e],delete this.map[e],t.alias&&(delete this.completed[t.alias.id],delete this.map[t.alias.id]),this.completedCount--,this.totalCount--)}},{key:"itemComplete",value:function(e){var i=this.map[e];if(i){var n=this._errorUrls.indexOf(e);if(i.error&&-1===n?this._errorUrls.push(e):i.error||-1===n||this._errorUrls.splice(n,1),this.completed[e]=i,this.completedCount++,t.finishDep(i.id),this.onProgress){var r=q_[this._id];this.onProgress(r?r.completed.length:this.completedCount,r?r.deps.length:this.totalCount,i)}this.emit(e,i),this.removeAll(e),!this._appending&&this.completedCount>=this.totalCount&&this.allComplete()}}},{key:"destroy",value:function(){this.active=!1,this._appending=!1,this._pipeline=null,this._ownerQueue=null,this._errorUrls.length=0,this.onProgress=void 0,this.onComplete=void 0,this.map=Re(!0),this.completed={},this.totalCount=0,this.completedCount=0,this.clear(),W_[this._id]=null,q_[this._id]&&(q_[this._id].completed.length=0,q_[this._id].deps.length=0),-1===Y_.indexOf(this)&&Y_.length<10&&Y_.push(this)}},{key:"addListener",value:function(e,i,n){return ae(te(t.prototype),"on",this).call(this,e,i,n)}},{key:"hasListener",value:function(e,i,n){return ae(te(t.prototype),"hasEventListener",this).call(this,e,i,n)}},{key:"removeListener",value:function(e,i,n){return ae(te(t.prototype),"off",this).call(this,e,i,n)}},{key:"removeAllListeners",value:function(e){ae(te(t.prototype),"removeAll",this).call(this,e)}}],[{key:"create",value:function(e,i,n,r){void 0===n?"function"==typeof i&&(r=i,i=n=null):void 0===r&&("function"==typeof i?(r=n,n=i,i=null):(r=n,n=null));var o=Y_.pop();return o?(o._pipeline=e,o.onProgress=n,o.onComplete=r,W_[o._id]=o,o._pipeline&&(o.active=!0),i&&o.append(i)):o=new t(e,i,n,r),o}},{key:"getQueue",value:function(e){return e.queueId?W_[e.queueId]:null}},{key:"itemComplete",value:function(e){var t=W_[e.queueId];t&&t.itemComplete(e.id)}},{key:"initQueueDeps",value:function(e){var t=q_[e._id];t?(t.completed.length=0,t.deps.length=0):t=q_[e._id]={completed:[],deps:[]}}},{key:"registerQueueDep",value:function(e,t){var i=e.queueId||e;if(!i)return!1;var n=q_[i];if(n)-1===n.deps.indexOf(t)&&n.deps.push(t);else if(e.id)for(var r in q_){var o=q_[r];-1!==o.deps.indexOf(e.id)&&-1===o.deps.indexOf(t)&&o.deps.push(t)}}},{key:"finishDep",value:function(e){for(var t in q_){var i=q_[t];-1!==i.deps.indexOf(e)&&-1===i.completed.indexOf(e)&&i.completed.push(e)}}}]),t}();$_.ItemState=new cc.Enum(H_),cc.LoadingItems=$_;var ed=$_.ItemState;function td(e,t){var i=e.id,n=t.states[i],r=e.next,o=e.pipeline;if(!t.error&&n!==ed.WORKING&&n!==ed.ERROR)if(n===ed.COMPLETE)r?td(r,t):o.flowOut(t);else{t.states[i]=ed.WORKING;var a=e.handle(t,(function(e,n){e?(t.error=e,t.states[i]=ed.ERROR,o.flowOut(t)):(n&&(t.content=n),t.states[i]=ed.COMPLETE,r?td(r,t):o.flowOut(t))}));a instanceof Error?(t.error=a,t.states[i]=ed.ERROR,o.flowOut(t)):void 0!==a&&(null!==a&&(t.content=a),t.states[i]=ed.COMPLETE,r?td(r,t):o.flowOut(t))}}var id=function(){function e(t){Z(this,e),this._pipes=void 0,this._cache=Re(!0),this._pipes=t;for(var i=0;i<t.length;++i){var n=t[i];n.handle&&n.id&&(n.pipeline=this,n.next=i<t.length-1?t[i+1]:null)}}return J(e,[{key:"insertPipe",value:function(e,t){if(!e.handle||!e.id||t>this._pipes.length)cc.warnID(4921);else if(this._pipes.indexOf(e)>0)cc.warnID(4922);else{e.pipeline=this;var i=null;t<this._pipes.length&&(i=this._pipes[t]);var n=null;t>0&&(n=this._pipes[t-1]),n&&(n.next=e),e.next=i,this._pipes.splice(t,0,e)}}},{key:"insertPipeAfter",value:function(e,t){var i=this._pipes.indexOf(e);i<0||this.insertPipe(t,i+1)}},{key:"appendPipe",value:function(e){e.handle&&e.id&&(e.pipeline=this,e.next=null,this._pipes.length>0&&(this._pipes[this._pipes.length-1].next=e),this._pipes.push(e))}},{key:"flowIn",value:function(e){var t,i,n=this._pipes[0];if(n){for(t=0;t<e.length;t++)(i=e[t]).isScene||(this._cache[i.id]=i);for(t=0;t<e.length;t++)td(n,i=e[t])}else for(t=0;t<e.length;t++)this.flowOut(e[t])}},{key:"flowInDeps",value:function(e,t,i){return $_.create(this,(function(e,t){i(e,t),t.destroy()})).append(t,e)}},{key:"flowOut",value:function(e){e.error?delete this._cache[e.id]:this._cache[e.id]||e.isScene||(this._cache[e.id]=e),e.complete=!0,$_.itemComplete(e)}},{key:"copyItemStates",value:function(e,t){if(t instanceof Array)for(var i=0;i<t.length;++i)t[i].states=e.states;else t.states=e.states}},{key:"getItem",value:function(e){var t=this._cache[e];return t?(t.alias&&(t=t.alias),t):t}},{key:"removeItem",value:function(e){var t=this._cache[e];return t&&t.complete&&delete this._cache[e],t}},{key:"clear",value:function(){for(var e in this._cache){var t=this._cache[e];delete this._cache[e],t.complete||(t.error=new Error("Canceled manually"),this.flowOut(t))}}}]),e}();id.ItemState=ed,cc.Pipeline=id;var nd="MD5Pipe",rd=/(\.[^.\n\\/]*)$/,od=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/;var ad=function(){function e(t,i,n){Z(this,e),this.id=nd,this.async=!1,this.pipeline=null,this.md5AssetsMap=void 0,this.md5NativeAssetsMap=void 0,this.libraryBase=void 0,this.id=nd,this.async=!1,this.pipeline=null,this.md5AssetsMap=t,this.md5NativeAssetsMap=i,this.libraryBase=n}return J(e,[{key:"handle",value:function(e){var t=!1;return"ttf"===e.type&&(t=!0),e.url=this.transformURL(e.url,t),e}},{key:"transformURL",value:function(e,t){var i=function(e){var t=e.match(od);return t?t[1]:""}(e);if(i){var n=(!e.match(this.libraryBase)?this.md5NativeAssetsMap:this.md5AssetsMap)[i];if(n)if(t){var r=cc.path.dirname(e),o=cc.path.basename(e);e="".concat(r,".").concat(n,"/").concat(o)}else{var a=!1;e=e.replace(rd,(function(e,t){return a=!0,"."+n+t})),a||(e=e+"."+n)}}return e}}]),e}();ad.ID=nd,id.MD5Pipe=ad;var sd,ld=function(){function e(){Z(this,e),this.jsons={}}return J(e,[{key:"load",value:function(e,t){t.length!==e.length&&b(4915);for(var i=0;i<e.length;i++){var n=e[i],r=t[i];this.jsons[n]=r}}},{key:"retrieve",value:function(e){return this.jsons[e]||null}}]),e}(),cd=function(){function e(){Z(this,e),this.contents={}}return J(e,[{key:"load",value:function(e,t){var i=t.data;i.length!==e.length&&b(4915);for(var n=0;n<e.length;n++)this.contents[e[n]]={base:i[n][0],mipmaps:i[n][1]}}},{key:"retrieve",value:function(e){var t=this.contents[e];return t?{__type__:it._getClassId(Tc),content:t}:null}}]),e}(),ud=/\?/;function hd(e){return cc.game.config.noCache&&"string"==typeof e&&(ud.test(e)?e+="&_t="+(new Date-0):e+="?_t="+(new Date-0)),e}function pd(e,t){if(Array.isArray(e))for(var i=0,n=e.length;i<n;i++)pd(e[i],t);else if("object"===Q(e))for(var r in e)pd(e[r],t),Number.isNaN(Number(r))||(e[t[r]]=e[r],delete e[r]);return null}!function(e){e[e.Invalid=0]="Invalid",e[e.Removed=1]="Removed",e[e.Downloading=2]="Downloading",e[e.Loaded=3]="Loaded"}(sd||(sd={}));var fd=function e(){Z(this,e),this.unpacker=void 0,this.state=void 0,this.unpacker=null,this.state=sd.Invalid},_d={},dd={},md={};function vd(e,t){return new Error("Can not retrieve "+e+" from packer "+t)}function yd(e){for(var t in dd=e,e)for(var i=e[t],n=0;n<i.length;n++){var r=i[n],o=1===i.length;ht(_d,r,t,o)}}function gd(e,t,i){var n=cc.AssetLibrary.getLibUrlNoExt(t)+".json";cc.loader.load({url:n,ignoreMaxConcurrency:!0},(function(n,r){if(n)return b(4916,e),i(n);var o=Ad(e,t,r);o?i(null,o):i(vd(e,t))}))}function Ad(e,t,i){var n=md[t];if(n.state!==sd.Loaded){if("string"==typeof i&&(i=JSON.parse(i)),i.keys&&i.data){var r=i.keys;pd(i=i.data,r)}Array.isArray(i)?n.unpacker=new ld:i.type===$e(Tc)&&(n.unpacker=new cd),n.unpacker.load(dd[t],i),n.state=sd.Loaded}return n.unpacker.retrieve(e)}function bd(e){for(var t=sd.Invalid,i="",n=0;n<e.length;n++){var r=e[n],o=md[r];if(o){var a=o.state;if(a===sd.Loaded)return r;a>t&&(t=a,i=r)}}return t!==sd.Invalid?i:e[0]}function xd(e,t){var i=e.uuid,n=_d[i];if(n){Array.isArray(n)&&(n=bd(n));var r=md[n];if(r&&r.state===sd.Loaded){var o=r.unpacker.retrieve(i);return o||vd(i,n)}return r||(console.log("Create unpacker %s for %s",n,i),(r=md[n]=new fd).state=sd.Downloading),gd(i,n,t),null}}var Td=Object.freeze({__proto__:null,initPacks:yd,_loadNewPack:gd,_doPreload:function(e,t){var i=md[e];i||((i=md[e]=new fd).state=sd.Downloading),i.state!==sd.Loaded&&(i.unpacker=new ld,i.unpacker.load(dd[e],t),i.state=sd.Loaded)},_doLoadNewPack:Ad,_selectLoadedPack:bd,load:xd}),Sd=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/;var Ed=Object.create(null),Cd=function(){function e(t){Z(this,e),this.id="SubPackPipe",this.async=!1,this.pipeline=null;var i=function(e){var i=t[e];i.uuids&&i.uuids.forEach((function(e){var t=P_(e),n=t.split("@").map((function(e){return encodeURIComponent(e)}));t=n.join("@"),Ed[t]=i.path}))};for(var n in t)i(n)}return J(e,[{key:"handle",value:function(e){return e.url=this.transformURL(e.url),null}},{key:"transformURL",value:function(e){var t=function(e){var t=e.match(Sd);return t?t[1]:""}(e);if(t){var i=Ed[t];if(i)return e.replace("res/raw-assets/",i+"raw-assets/")}return e}}]),e}();Cd.ID="SubPackPipe",id.SubPackPipe=Cd;var wd="",kd="",Od=Re(!0);function Rd(e,t){this.url=e,this.type=t}var Fd,Id={_uuidToAsset:{},loadAsset:function(e,t,i){if("string"!=typeof e)return _t(t,new Error("[AssetLibrary] uuid must be string"),null);var n={uuid:e,type:"uuid"};i&&i.existingAsset&&(n.existingAsset=i.existingAsset),cc.loader.load(n,(function(i,n){if(i||!n)i=new Error("[AssetLibrary] loading JSON or dependencies failed: "+(i?i.message:"Unknown error"));else if(n.constructor===cc.SceneAsset){var r=cc.loader._getReferenceKey(e);n.scene.dependAssets=V_(r)}t&&t(i,n)}))},getLibUrlNoExt:function(e,t){var i=(e=P_(e)).split("@").map((function(e){return encodeURIComponent(e)}));return e=i.join("@"),(t?kd+"assets/":wd)+e.slice(0,2)+"/"+e},_queryAssetInfoInEditor:function(e,t){t(new Error("Unable to load resource: EditorExtends is not defined."))},_getAssetInfoInRuntime:function(e,t){t=t||{url:null,raw:!1};var i=Od[e];return i&&!He(i.type,cc.Asset)?(t.url=kd+i.url,t.raw=!0):(t.url=this.getLibUrlNoExt(e)+".json",t.raw=!1),t},_uuidInSettings:function(e){return e in Od},queryAssetInfo:function(e,t){var i=this._getAssetInfoInRuntime(e);t(null,i.url,i.raw)},parseUuidInEditor:function(e){},loadJson:function(e,t){var i=""+((new Date).getTime()+Math.random()),n={uuid:i,type:"uuid",content:e,skips:[cc.loader.assetLoader.id,cc.loader.downloader.id]};cc.loader.load(n,(function(e,n){if(e)e=new Error("[AssetLibrary] loading JSON or dependencies failed: "+e.message);else{if(n.constructor===cc.SceneAsset){var r=cc.loader._getReferenceKey(i);n.scene.dependAssets=V_(r)}if(function(e){return e&&(e.constructor===cc.SceneAsset||e instanceof cc.Scene)}(n)){var o=cc.loader._getReferenceKey(i);cc.loader.removeItem(o)}}n._uuid="",t&&t(e,n)}))},getAssetByUuid:function(e){return Id._uuidToAsset[e]||null},init:function(e){var t=e.libraryPath;t=t.replace(/\\/g,"/"),wd=cc.path.stripSep(t)+"/",kd=e.rawAssetsBase;var i=e.md5AssetsMap;if(i&&i.import){var n=0,r=Re(!0),o=i.import;for(n=0;n<o.length;n+=2){var a=P_(o[n]).split("@").map((function(e){return encodeURIComponent(e)}));r[a.join("@")]=o[n+1]}var s=Re(!0);for(o=i["raw-assets"],n=0;n<o.length;n+=2){var l=P_(o[n]).split("@").map((function(e){return encodeURIComponent(e)}));s[l.join("@")]=o[n+1]}var c=new ad(r,s,wd);cc.loader.insertPipeAfter(cc.loader.assetLoader,c),cc.loader.md5Pipe=c}var u=e.subPackages;if(u){cc.loader.downloader.setSubPackages(u);var h=new Cd(u);cc.loader.insertPipeAfter(cc.loader.assetLoader,h),cc.loader.subPackPipe=h}var p=cc.loader._assetTables;for(var f in p)p[f].reset();var _=e.rawAssets;if(_)for(var d in _){var m=_[d];for(var v in m){var y=m[v],g=y[0],A=y[1],b=Ke(A);if(b){Od[v]=new Rd(d+"/"+g,b);var x=1===y[2];p[d]||(p[d]=new L_),p[d].add(g,v,b,!x)}else cc.error("Cannot get",A)}}e.packedAssets&&yd(e.packedAssets),cc.url._init(e.mountPaths&&e.mountPaths.assets||kd+"assets")}};cc.AssetLibrary=Id;var Md,Pd,Dd,Bd,Nd,Ld=qa("cc.Font")(Fd=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Ul),t}())||Fd;cc.Font=Ld;var zd,Gd,Ud,Xd,Vd,Hd,jd,Wd,Yd=(Md=qa("cc.TTFFont"),Pd=Qa({override:!0}),Md((Nd=de((Bd=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_fontFamily",Nd,ne(i)),i}return ee(t,Ld),J(t,[{key:"_nativeAsset",get:function(){return this._fontFamily},set:function(e){this._fontFamily=e||"Arial"}}]),t}()).prototype,"_fontFamily",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(Bd.prototype,"_nativeAsset",[Pd,us],Object.getOwnPropertyDescriptor(Bd.prototype,"_nativeAsset"),Bd.prototype),Dd=Bd))||Dd);cc.TTFFont=Yd;var qd,Qd=(zd=qa("cc.BitmapFont"),Gd=Qa({type:Ru}),zd((Vd=de((Xd=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"fntDataStr",Vd,ne(i)),_e(i,"spriteFrame",Hd,ne(i)),_e(i,"fontSize",jd,ne(i)),_e(i,"fntConfig",Wd,ne(i)),i}return ee(t,Ld),t}()).prototype,"fntDataStr",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Hd=de(Xd.prototype,"spriteFrame",[Gd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jd=de(Xd.prototype,"fontSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Wd=de(Xd.prototype,"fntConfig",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ud=Xd))||Ud);cc.BitmapFont=Qd;var Zd=qa("cc.LabelAtlas")(qd=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Qd),t}())||qd;cc.LabelAtlas=Zd;var Kd=[],Jd=function(){function e(){Z(this,e),this.id="AssetLoader",this.async=!0,this.pipeline=null}return J(e,[{key:"handle",value:function(e,t){var i=e.uuid;if(!i)return e.content||null;cc.AssetLibrary.queryAssetInfo(i,(function(n,r,o){if(n)t(n);else if(e.url=e.rawUrl=r,e.isRawAsset=o,o){var a=M(r).toLowerCase();if(!a)return void t(new Error(E(4931,i,r)));a=a.substr(1);var s=$_.getQueue(e);Kd[0]={queueId:e.queueId,id:r,url:r,type:a,error:null,alias:e,complete:!0},s&&s.append(Kd),e.type=a,t(null,e.content)}else e.type="uuid",t(null,e.content)}))}}]),e}();function $d(e,t){var i=e.url,n=cc.loader.getXMLHttpRequest(),r="Load binary data failed: "+i;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){var e=n.response;e?t(null,e):t({status:n.status,errorMessage:r+"(no response)"})},n.onerror=function(){t({status:n.status,errorMessage:r+"(error)"})},n.ontimeout=function(){t({status:n.status,errorMessage:r+"(time out)"})},n.send(null)}function em(e,t){var i=e.url;i=hd(i);var n=cc.loader.getXMLHttpRequest(),r="Load text file failed: "+i;n.open("GET",i,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onload=function(){4===n.readyState?200===n.status||0===n.status?t(null,n.responseText):t({status:n.status,errorMessage:r+"(wrong status)"}):t({status:n.status,errorMessage:r+"(wrong readyState)"})},n.onerror=function(){t({status:n.status,errorMessage:r+"(error)"})},n.ontimeout=function(){t({status:n.status,errorMessage:r+"(time out)"})},n.send(null)}Jd.ID="AssetLoader",id.AssetLoader=Jd;var tm={INITIALIZING:0,PLAYING:1,STOPPED:2},im=function(){function e(t){var i=this;Z(this,e),this._state=tm.STOPPED,this._duration=0,this._eventTarget=void 0,this._onHide=void 0,this._onShow=void 0,this._interrupted=!1,this._blocking=!1,this._duration=t.duration,this._eventTarget=t.eventTarget,this._onHide=function(){i._blocking=!0,i._state===tm.PLAYING&&(i.pause(),i._interrupted=!0)},this._onShow=function(){i._blocking=!1,i._interrupted&&(i.play(),i._interrupted=!1)},cc.game.on(cc.Game.EVENT_HIDE,this._onHide),cc.game.on(cc.Game.EVENT_SHOW,this._onShow)}return J(e,[{key:"getState",value:function(){return this._state}},{key:"getDuration",value:function(){return this._duration}},{key:"destroy",value:function(){cc.game.off(cc.Game.EVENT_HIDE,this._onHide),cc.game.off(cc.Game.EVENT_SHOW,this._onShow)}}]),e}();cc.internal.AudioPlayer=im;var nm,rm,om,am,sm,lm,cm,um,hm=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e)))._volume=1,i._loop=!1,i._oneShotOngoing=!1,i._audio=void 0,i._cbRegistered=!1,i._remove_cb=void 0,i._post_play=void 0,i._on_gesture=void 0,i._post_gesture=void 0,i._audio=e.clip,i._remove_cb=function(){i._cbRegistered&&(cc.game.canvas.removeEventListener("touchend",i._on_gesture),cc.game.canvas.removeEventListener("mouseup",i._on_gesture),i._cbRegistered=!1)},i._post_play=function(){i._state=tm.PLAYING,i._eventTarget.emit("started"),i._remove_cb()},i._post_gesture=function(){i._interrupted?(i._post_play(),i._interrupted=!1):(i._audio.pause(),i._audio.currentTime=0)},i._on_gesture=function(){if(i._audio){var e=i._audio.play();if(!e)return i._state=tm.PLAYING,void cc.director.once(cc.Director.EVENT_AFTER_UPDATE,i._post_gesture);e.then(i._post_gesture),i._remove_cb()}},i._audio.volume=i._volume,i._audio.loop=i._loop,i._audio.addEventListener("ended",(function(){i._oneShotOngoing||(i._state=tm.STOPPED,i._audio.currentTime=0,i._eventTarget.emit("ended"))})),cc.game.canvas.addEventListener("touchend",i._on_gesture),cc.game.canvas.addEventListener("mouseup",i._on_gesture),i._cbRegistered=!0,i}return ee(t,im),J(t,[{key:"play",value:function(){var e=this;if(this._audio&&this._state!==tm.PLAYING)if(this._blocking)this._interrupted=!0;else{var t=this._audio.play();if(!t)return this._state=tm.PLAYING,void cc.director.once(cc.Director.EVENT_AFTER_UPDATE,this._post_play);t.then(this._post_play).catch((function(){e._interrupted=!0}))}}},{key:"pause",value:function(){this._audio&&this._state===tm.PLAYING&&(this._audio.pause(),this._state=tm.STOPPED,this._oneShotOngoing=!1)}},{key:"stop",value:function(){this._audio&&(this._audio.currentTime=0,this._state===tm.PLAYING&&(this._audio.pause(),this._state=tm.STOPPED,this._oneShotOngoing=!1))}},{key:"playOneShot",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this._audio;i&&(i.currentTime=0,i.volume=t,this._oneShotOngoing||(i.loop=!1,this._oneShotOngoing=!0,i.play().then((function(){i.addEventListener("ended",(function(){i.currentTime=0,i.volume=e._volume,i.loop=e._loop,e._oneShotOngoing=!1}),{once:!0})})).catch((function(){e._oneShotOngoing=!1}))))}},{key:"setCurrentTime",value:function(e){this._audio&&(this._audio.currentTime=pi(e,0,this._duration))}},{key:"getCurrentTime",value:function(){return this._audio?this._audio.currentTime:0}},{key:"setVolume",value:function(e,t){this._volume=e,this._audio&&(this._audio.volume=e)}},{key:"getVolume",value:function(){return this._audio?this._audio.volume:this._volume}},{key:"setLoop",value:function(e){this._loop=e,this._audio&&(this._audio.loop=e)}},{key:"getLoop",value:function(){return this._loop}},{key:"destroy",value:function(){this._audio&&(this._audio.src=""),ae(te(t.prototype),"destroy",this).call(this)}}]),t}(),pm=ws.__audioSupport,fm=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e)))._startTime=0,i._offset=0,i._volume=1,i._loop=!1,i._currentTimer=0,i._audio=void 0,i._context=void 0,i._sourceNode=void 0,i._gainNode=void 0,i._startInvoked=!1,i._onEndedCB=void 0,i._onGestureCB=void 0,i._onGestureProceedCB=void 0,i._audio=e.clip,i._context=pm.context,i._sourceNode=i._context.createBufferSource(),i._gainNode=i._context.createGain(),i._gainNode.connect(i._context.destination),i._onEndedCB=i._onEnded.bind(ne(i)),i._onGestureCB=i._onGesture.bind(ne(i)),i._onGestureProceedCB=i._onGestureProceed.bind(ne(i)),"running"!==i._context.state&&i._context.resume&&(cc.game.canvas.addEventListener("touchend",i._onGestureCB),cc.game.canvas.addEventListener("mouseup",i._onGestureCB)),i}return ee(t,im),J(t,[{key:"play",value:function(){this._audio&&this._state!==tm.PLAYING&&(this._blocking||"running"!==this._context.state?this._interrupted=!0:this._doPlay())}},{key:"pause",value:function(){this._state===tm.PLAYING&&(this._doStop(),this._offset+=this._context.currentTime-this._startTime,this._state=tm.STOPPED,clearInterval(this._currentTimer))}},{key:"stop",value:function(){this._offset=0,this._state===tm.PLAYING&&(this._doStop(),this._state=tm.STOPPED,clearInterval(this._currentTimer))}},{key:"playOneShot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this._audio){var t=this._context.createGain();t.connect(this._context.destination),t.gain.value=e;var i=this._context.createBufferSource();i.buffer=this._audio,i.loop=!1,i.connect(t),i.start()}}},{key:"setCurrentTime",value:function(e){this._offset=pi(e,0,this._audio&&this._audio.duration||this._duration),this._state===tm.PLAYING&&(this._doStop(),this._doPlay())}},{key:"getCurrentTime",value:function(){return this._state!==tm.PLAYING?this._offset:this._context.currentTime-this._startTime+this._offset}},{key:"setVolume",value:function(e,t){this._volume=e,!t&&this._gainNode.gain.setTargetAtTime?this._gainNode.gain.setTargetAtTime(e,this._context.currentTime,.01):this._gainNode.gain.value=e}},{key:"getVolume",value:function(){return this._volume}},{key:"setLoop",value:function(e){this._loop=e,this._sourceNode.loop=e}},{key:"getLoop",value:function(){return this._loop}},{key:"destroy",value:function(){ae(te(t.prototype),"destroy",this).call(this)}},{key:"_doPlay",value:function(){var e=this;this._state=tm.PLAYING,this._sourceNode=this._context.createBufferSource(),this._sourceNode.buffer=this._audio,this._sourceNode.loop=this._loop,this._sourceNode.connect(this._gainNode),this._startTime=this._context.currentTime,this._startInvoked=!1,cc.director.once(cc.Director.EVENT_AFTER_UPDATE,this._playAndEmit,this),clearInterval(this._currentTimer),this._currentTimer=window.setInterval((function(){e._onEnded(),clearInterval(e._currentTimer),e._sourceNode.loop&&(e._currentTimer=window.setInterval(e._onEndedCB,1e3*e._audio.duration))}),1e3*(this._audio.duration-this._offset))}},{key:"_doStop",value:function(){this._startInvoked?this._sourceNode.stop():cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this._playAndEmit,this)}},{key:"_playAndEmit",value:function(){this._sourceNode.start(0,this._offset),this._eventTarget.emit("started"),this._startInvoked=!0}},{key:"_onEnded",value:function(){this._offset=0,this._startTime=this._context.currentTime,this._sourceNode.loop||(this._eventTarget.emit("ended"),this._state=tm.STOPPED)}},{key:"_onGestureProceed",value:function(){this._interrupted&&(this._doPlay(),this._interrupted=!1),cc.game.canvas.removeEventListener("touchend",this._onGestureCB),cc.game.canvas.removeEventListener("mouseup",this._onGestureCB)}},{key:"_onGesture",value:function(){"running"!==this._context.state?this._context.resume().then(this._onGestureProceedCB):this._onGestureProceed()}}]),t}(),_m=At({WEB_AUDIO:0,DOM_AUDIO:1,JSB_AUDIO:2,UNKNOWN_AUDIO:3});exports.AudioClip=(nm=qa("cc.AudioClip"),rm=Qa({type:_m}),nm((um=cm=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_duration",sm,ne(e)),_e(e,"_loadMode",lm,ne(e)),e._audio=null,e._player=null,e.loaded=!1,e}return ee(t,Ul),J(t,[{key:"destroy",value:function(){return this._player&&this._player.destroy(),ae(te(t.prototype),"destroy",this).call(this)}},{key:"play",value:function(){this._player&&this._player.play()}},{key:"pause",value:function(){this._player&&this._player.pause()}},{key:"stop",value:function(){this._player&&this._player.stop()}},{key:"playOneShot",value:function(e){this._player&&this._player.playOneShot(e)}},{key:"setCurrentTime",value:function(e){this._player&&this._player.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this._player?this._player.getCurrentTime():0}},{key:"getDuration",value:function(){return this._player?this._player.getDuration():this._duration}},{key:"setVolume",value:function(e,t){this._player&&this._player.setVolume(e,t||!1)}},{key:"getVolume",value:function(){return this._player?this._player.getVolume():1}},{key:"setLoop",value:function(e){this._player&&this._player.setLoop(e)}},{key:"getLoop",value:function(){return!!this._player&&this._player.getLoop()}},{key:"_getPlayer",value:function(e){var t;return"undefined"!=typeof AudioBuffer&&e instanceof AudioBuffer?(t=fm,this._loadMode=_m.WEB_AUDIO):(t=hm,this._loadMode=_m.DOM_AUDIO),t}},{key:"_nativeAsset",set:function(e){if(this._audio=e,e){var t=this._getPlayer(e);this._player=new t({clip:e,duration:this._duration,eventTarget:this}),this.loaded=!0,this.emit("load")}else this._player=null,this._loadMode=_m.UNKNOWN_AUDIO,this._duration=0,this.loaded=!1},get:function(){return this._audio}},{key:"loadMode",get:function(){return this._loadMode}},{key:"state",get:function(){return this._player?this._player.getState():tm.INITIALIZING}}]),t}(),cm.PlayingState=tm,cm.AudioType=_m,cm.preventDeferredLoadDependents=!0,sm=de((am=um).prototype,"_duration",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lm=de(am.prototype,"_loadMode",[rm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _m.UNKNOWN_AUDIO}}),om=am))||om),exports.AudioClip||(exports.AudioClip={}),cc.AudioClip=exports.AudioClip;var dm=ws.__audioSupport,mm=dm.format;function vm(e,t){var i=document.createElement("audio");i.src=e.url;var n=function(){clearTimeout(r),i.removeEventListener("canplaythrough",o,!1),i.removeEventListener("error",a,!1),dm.USE_LOADER_EVENT&&i.removeEventListener(dm.USE_LOADER_EVENT,o,!1)},r=setTimeout((function(){0===i.readyState?a():o()}),8e3),o=function(){n(),t(null,i)},a=function(){n();var i="load audio failure - "+e.url;c(i),t(i)};i.addEventListener("canplaythrough",o,!1),i.addEventListener("error",a,!1),dm.USE_LOADER_EVENT&&i.addEventListener(dm.USE_LOADER_EVENT,o,!1)}function ym(e,t){var i=dm.context;i||t(new Error(E(4926)));var n=cc.loader.getXMLHttpRequest();n.open("GET",e.url,!0),n.responseType="arraybuffer",n.onload=function(){i.decodeAudioData(n.response,(function(e){t(null,e)}),(function(){t("decode error - "+e.id,null)}))},n.onerror=function(){t("request error - "+e.id,null)},n.send()}function gm(e,t){if(0===mm.length)return new Error(E(4927));var i;dm.WEB_AUDIO?i=e._owner instanceof exports.AudioClip?e._owner.loadMode===_m.WEB_AUDIO?ym:vm:e.urlParam&&e.urlParam.useDom?vm:ym:i=vm;i(e,t)}function Am(){return null}function bm(e,t,i){var n=e.url,r=document,o=document.createElement("script");function a(){o.parentNode&&o.parentNode.removeChild(o),o.removeEventListener("load",a,!1),o.removeEventListener("error",s,!1),t(null,n)}function s(){o.parentNode&&o.parentNode.removeChild(o),o.removeEventListener("load",a,!1),o.removeEventListener("error",s,!1),t(new Error(E(4928,n)))}o.async=!!i,o.src=hd(n),o.addEventListener("load",a,!1),o.addEventListener("error",s,!1),r.body.appendChild(o)}function xm(e,t,i,n){void 0===i&&(i=!0);var r=hd(e.url);function o(){n.removeEventListener("load",o),n.removeEventListener("error",a),n.id=e.id,t(null,n)}function a(){n.removeEventListener("load",o),n.removeEventListener("error",a),"https:"!==window.location.protocol&&n.crossOrigin&&"anonymous"===n.crossOrigin.toLowerCase()?xm(e,t,!1,n):t(new Error(E(4930,r)))}if(n=n||new Image,i&&"file:"!==window.location.protocol?n.crossOrigin="anonymous":n.crossOrigin=null,n.complete&&n.naturalWidth>0&&n.src===r)return n;n.addEventListener("load",o),n.addEventListener("error",a),n.src=r}var Tm={js:bm,png:xm,jpg:xm,bmp:xm,jpeg:xm,gif:xm,ico:xm,tiff:xm,webp:xm,image:xm,pvr:$d,pkm:$d,mp3:gm,ogg:gm,wav:gm,m4a:gm,txt:em,xml:em,vsh:em,fsh:em,atlas:em,tmx:em,tsx:em,json:em,ExportJson:em,plist:em,fnt:em,font:Am,eot:Am,ttf:Am,woff:Am,svg:Am,ttc:Am,uuid:function(e,t){var i=xd(e,t);return void 0===i?this.extMap.json(e,t):i||void 0},binary:$d,bin:$d,default:em},Sm=function(){function e(t){Z(this,e),this.id="Downloader",this.async=!0,this.pipeline=null,this.extMap=void 0,this._curConcurrent=0,this._loadQueue=[],this._subPackages={},this.extMap=Ue(t,Tm)}return J(e,[{key:"setSubPackages",value:function(e){this._subPackages=e}},{key:"addHandlers",value:function(e){Ue(this.extMap,e)}},{key:"_handleLoadQueue",value:function(){for(;this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT;){var e=this._loadQueue.shift();if(!e)break;var t=this.handle(e.item,e.callback);void 0!==t&&(t instanceof Error?e.callback(t):e.callback(null,t))}}},{key:"handle",value:function(e,t){var i=this,n=this.extMap[e.type]||this.extMap.default,r=void 0;if(this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT){if(this._curConcurrent++,void 0!==(r=n.call(this,e,(function(e,n){i._curConcurrent=Math.max(0,i._curConcurrent-1),i._handleLoadQueue(),t&&t(e,n)}))))return this._curConcurrent=Math.max(0,this._curConcurrent-1),this._handleLoadQueue(),r}else if(e.ignoreMaxConcurrency){if(void 0!==(r=n.call(this,e,t)))return r}else this._loadQueue.push({item:e,callback:t})}},{key:"loadSubpackage",value:function(e,t){var i=this._subPackages[e];i?i.loaded?t&&t():bm({url:i.path},(function(e){e||(i.loaded=!0),t&&t(e)})):t&&t(new Error("Can't find subpackage ".concat(e)))}}]),e}();Sm.ID="Downloader",Sm.PackDownloader=Td,id.Downloader=Sm;var Em=function(){function e(){Z(this,e),this._isSupportDOMParser=void 0,this._parser=void 0,window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):(this._isSupportDOMParser=!1,this._parser=null)}return J(e,[{key:"parse",value:function(e){return this._parseXML(e)}},{key:"_parseXML",value:function(e){var t;return this._isSupportDOMParser?t=this._parser.parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t}}]),e}(),Cm=new(function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Em),J(t,[{key:"parse",value:function(e){var t=this._parseXML(e),i=t.documentElement;if("plist"!==i.tagName)return g(5100),{};for(var n=null,r=0,o=i.childNodes.length;r<o&&1!==(n=i.childNodes[r]).nodeType;r++);return t=null,this._parseNode(n)}},{key:"_parseNode",value:function(e){var t=null,i=e.tagName;if("dict"===i)t=this._parseDict(e);else if("array"===i)t=this._parseArray(e);else if("string"===i)if(1===e.childNodes.length)t=e.firstChild.nodeValue;else{t="";for(var n=0;n<e.childNodes.length;n++)t+=e.childNodes[n].nodeValue}else"false"===i?t=!1:"true"===i?t=!0:"real"===i?t=parseFloat(e.firstChild.nodeValue):"integer"===i&&(t=parseInt(e.firstChild.nodeValue,10));return t}},{key:"_parseArray",value:function(e){for(var t=[],i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&t.push(this._parseNode(r))}return t}},{key:"_parseDict",value:function(e){for(var t={},i=null,n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];1===o.nodeType&&("key"===o.tagName?i=o.firstChild.nodeValue:t[i]=this._parseNode(o))}return t}}]),t}());function wm(e){return e&&(e[0]&&"cc.Scene"===e[0].__type__||e[1]&&"cc.Scene"===e[1].__type__||e[0]&&"cc.Prefab"===e[0].__type__)}function km(e,t){var i,n;if("string"==typeof e.content)try{if((i=JSON.parse(e.content)).keys&&i.data){var r=i.keys;pd(i=i.data,r)}}catch(t){return new Error(E(4923,e.id,t.stack))}else{if("object"!==Q(e.content))return new Error(E(4924));i=e.content}if(null==i)return new Error(E(4923,e.id));var o=wm(i);n=o?cc._MissingScript.safeFindClass:function(e){var t=Ke(e);return t||(cc.warnID(4903,e),Object)};var a,s=cc.deserialize.Details.pool.get();try{a=cc.deserialize(i,s,{classFinder:n,target:e.existingAsset,customEnv:e})}catch(t){return cc.deserialize.Details.pool.put(s),console.error(t),new Error("Failed to load asset ".concat(e.id,", exception occurs during deserialization: ").concat(t.stack,"."))}a._uuid=e.uuid;var l=function(e,t,i,n){var r,o,a,s=i.uuidList,l=i.uuidObjList,c=i.uuidPropList,u=i._stillUseUrl,h=e.dependKeys=[];if(n)for(r=[],o=0;o<s.length;o++){a=s[o];var p=l[o],f=c[o],_=cc.AssetLibrary._getAssetInfoInRuntime(a);if(_.raw){var d=_.url;p[f]=d,h.push(d)}else r.push({type:"uuid",uuid:a,deferredLoadRaw:!0,_owner:p,_ownerProp:f,_stillUseUrl:u[o]})}else{for(r=new Array(s.length),o=0;o<s.length;o++)a=s[o],r[o]={type:"uuid",uuid:a,_owner:l[o],_ownerProp:c[o],_stillUseUrl:u[o]};t._native&&!t.constructor.preventPreloadNativeObject&&r.push({url:t.nativeUrl,_owner:t,_ownerProp:"_nativeAsset"})}return r}(e,a,s,function(e,t,i){var n=t.deferredLoadRaw;return n?e instanceof cc.Asset&&e.constructor.preventDeferredLoadDependents&&(n=!1):i&&(e instanceof cc.SceneAsset||e instanceof cc.Prefab)&&(n=e.asyncLoadAssets),n}(a,e,o));cc.deserialize.Details.pool.put(s);var c=function(e,i){if(!e&&i.onLoaded)try{i.onLoaded()}catch(t){e=t}t(e,i)};if(0===l.length)return c(null,a);!function(e,t,i,n,r){t.content=i;var o=t.dependKeys;e.flowInDeps(t,n,(function(e,t){var a,s=t.map;for(var l in s)(a=s[l]).uuid&&a.content&&(a.content._uuid=a.uuid);for(var c=0;c<n.length;c++){var u=function(e){var t=e.content;this._stillUseUrl&&(t=t?t.nativeUrl:e.rawUrl),this._owner[this._ownerProp]=t,e.uuid!==i._uuid&&o.indexOf(e.id)<0&&o.push(e.id)},h=n[c],p=h.uuid,f=h.url;h._owner,h._ownerProp;if(a=s[f]){var _=h;if(a.complete||a.content)a.error?cc._throw(a.error):u.call(_,a);else{var d=$_.getQueue(a);d&&d.addListener(p,u,_)}}}r(e,i)}))}(this.pipeline,e,a,l,c)}km.isSceneObj=wm;var Om,Rm=null,Fm={},Im=-1,Mm=[],Pm=function(){if(!Om)if(window.FontFace){var e=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),t=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Om=e?parseInt(e[1],10)>42:!t}else Om=!1;return Om};function Dm(){for(var e=!0,t=Date.now(),i=Mm.length-1;i>=0;i--){var n=Mm[i],r=n.fontFamilyName;if(t-n.startTime>3e3)cc.warnID(4933,r),n.callback(null,r),Mm.splice(i,1);else{var o=n.refWidth;Rm.font="40px "+r,o!==Ma(Rm,"BES bswy:->@123丁ぁᄁ")?(Mm.splice(i,1),n.callback(null,r)):e=!1}}e&&(clearInterval(Im),Im=-1)}function Bm(e,t){var i=e.url,n=function(e){var t=e.lastIndexOf(".ttf");if(-1===t)return e;var i,n=e.lastIndexOf("/");i=-1===n?e.substring(0,t)+"_LABEL":e.substring(n+1,t)+"_LABEL";-1!==i.indexOf(" ")&&(i='"'+i+'"');return i}(i);if(Fm[n])return n;if(!Rm){var r=document.createElement("canvas");r.width=100,r.height=100,Rm=r.getContext("2d")}var o="40px "+n;Rm.font=o;var a=Ma(Rm,"BES bswy:->@123丁ぁᄁ"),s=document.createElement("style");s.type="text/css";var l="";isNaN(n-0)?l+="@font-face { font-family:"+n+"; src:":l+="@font-face { font-family:'"+n+"'; src:",l+="url('"+i+"');",s.textContent=l+"}",document.body.appendChild(s);var c=document.createElement("div"),u=c.style;if(u.fontFamily=n,c.innerHTML=".",u.position="absolute",u.left="-100px",u.top="-100px",document.body.appendChild(c),Pm())!function(e,t,i){var n,r=new Promise((function(i,n){!function r(){Date.now()-e>=3e3?n():document.fonts.load("40px "+t).then((function(e){e.length>=1?i():setTimeout(r,100)}),(function(){n()}))}()})),o=new Promise((function(e,t){n=setTimeout(t,3e3)}));Promise.race([o,r]).then((function(){n&&(clearTimeout(n),n=null),i(null,t)}),(function(){cc.warnID(4933,t),i(null,t)}))}(Date.now(),n,t);else{var h={fontFamilyName:n,refWidth:a,callback:t,startTime:Date.now()};Mm.push(h),-1===Im&&(Im=setInterval(Dm,100))}Fm[n]=s}function Nm(e){if("string"!=typeof e.content)return new Error("JSON Loader: Input item doesn't contain string content");try{return JSON.parse(e.content)}catch(t){return new Error("JSON Loader: Parse json ["+e.id+"] failed : "+t)}}function Lm(e){if(e._owner instanceof cc.Asset)return null;var t=e.content;if(cc.sys.platform!==cc.sys.FB_PLAYABLE_ADS&&!(t instanceof Image))return new Error("Image Loader: Input item doesn't contain Image content");var i=e.rawUrl,n=e.imageAsset||new Vl;return n._uuid=e.uuid,n._url=i,n._setRawAsset(i,!1),n._nativeAsset=t,n}function zm(e,t){if(e._owner instanceof cc.Asset)return null;var i=new cc.AudioClip;return i._setRawAsset(e.rawUrl,!1),i._nativeAsset=e.content,i}function Gm(e){return e.load?e.load(e.content):e.content}function Um(e,t){return e[t]<<8|e[t+1]}var Xm={png:Lm,jpg:Lm,bmp:Lm,jpeg:Lm,gif:Lm,ico:Lm,tiff:Lm,webp:Lm,image:Lm,pvr:function(e){var t=e.content instanceof ArrayBuffer?e.content:e.content.buffer,i=new Int32Array(t,0,13);if(55727696===i[0]){var n=i[7],r=i[6],o=i[12]+52;return t=t.slice(o,t.byteLength),{_data:new Uint8Array(t),_compressed:!0,width:n,height:r}}if(559044176===i[11]){var a=i[0],s=i[1],l=i[2];return t=t.slice(a,t.byteLength),{_data:new Uint8Array(t),_compressed:!0,width:l,height:s}}return new Error("Invalid magic number in PVR header")},pkm:function(e){var t=e.content instanceof ArrayBuffer?e.content:e.content.buffer,i=new Uint8Array(t),n=Um(i,6);if(0!==n&&1!==n&&3!==n)return new Error("Invalid magic number in ETC header");var r=Um(i,12),o=Um(i,14);return Um(i,8),Um(i,10),t=t.slice(16,t.byteLength),{_data:new Uint8Array(t),_compressed:!0,width:r,height:o}},mp3:zm,ogg:zm,wav:zm,m4a:zm,json:Nm,ExportJson:Nm,plist:function(e){if("string"!=typeof e.content)return new Error("Plist Loader: Input item doesn't contain string content");var t=Cm.parse(e.content);return t||new Error("Plist Loader: Parse ["+e.id+"] failed")},uuid:km,prefab:km,fire:km,scene:km,binary:Gm,bin:Gm,font:Bm,eot:Bm,ttf:Bm,woff:Bm,svg:Bm,ttc:Bm,default:function(){return null}},Vm=function(){function e(t){Z(this,e),this.id="Loader",this.async=!0,this.pipeline=null,this.extMap=void 0,this.extMap=Ue(t,Xm)}return J(e,[{key:"addHandlers",value:function(e){this.extMap=Ue(this.extMap,e)}},{key:"handle",value:function(e,t){return(this.extMap[e.type]||this.extMap.default).call(this,e,t)}}]),e}();Vm.ID="Loader",id.Loader=Vm;var Hm=Object.create(null);function jm(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")}Hm.assets=new L_,Hm.internal=new L_;var Wm={url:null,raw:!1};function Ym(e){var t,i,n;if("object"===Q(e)){if(i=e,e.url)return i;t=e.uuid}else i={},t=e;return n=i.type?"uuid"===i.type:cc.AssetLibrary._uuidInSettings(t),cc.AssetLibrary._getAssetInfoInRuntime(t,Wm),i.url=n?Wm.url:t,Wm.url&&"uuid"===i.type&&Wm.raw?(i.type=null,i.isRawAsset=!0):n||(i.isRawAsset=!0),i}var qm=[],Qm=[],Zm=function(e){function t(){var e;Z(this,t);var i=new Jd,n=new Sm,r=new Vm;return(e=re(this,te(t).call(this,[i,n,r]))).getXMLHttpRequest=void 0,e.assetLoader=void 0,e.md5Pipe=void 0,e.downloader=void 0,e.loader=void 0,e.onProgress=void 0,e._assetTables=void 0,e._autoReleaseSetting=void 0,e._releasedAssetChecker_DEBUG=void 0,e.getXMLHttpRequest=jm,e.assetLoader=i,e.md5Pipe=null,e.downloader=n,e.loader=r,e.onProgress=null,e._assetTables=Hm,e._autoReleaseSetting=Re(!0),e}return ee(t,id),J(t,[{key:"init",value:function(e){}},{key:"addDownloadHandlers",value:function(e){this.downloader.addHandlers(e)}},{key:"addLoadHandlers",value:function(e){this.loader.addHandlers(e)}},{key:"load",value:function(e,t,i){void 0===i&&(i=t,t=this.onProgress||null);var n,r,o=this,a=!1;e instanceof Array?n=e:e?(a=!0,n=[e]):n=[],qm.length=0;for(var s=0;s<n.length;++s){var l=n[s];if(l&&l.id&&(g(4920,l.id),l.uuid||l.url||(l.url=l.id)),(r=Ym(l)).url||r.uuid){var c=this._cache[r.url];qm.push(c||r)}}var u=$_.create(this,t,(function(e,t){_t((function(){if(i){if(a){var n=r.url;i.call(o,t.getError(n),t.getContent(n))}else i.call(o,e,t);i=null}t.destroy()}))}));$_.initQueueDeps(u),u.append(qm),qm.length=0}},{key:"flowInDeps",value:function(e,t,i){Qm.length=0;for(var n=0;n<t.length;++n){var r=Ym(t[n]);if(r.url||r.uuid){var o=this._cache[r.url];o?Qm.push(o):Qm.push(r)}}var a=$_.create(this,e?function(e,t,i){a._ownerQueue&&a._ownerQueue.onProgress&&a._ownerQueue._childOnProgress(i)}:null,(function(t,n){i(t,n),e&&e.deps&&(e.deps.length=0),n.destroy()}));if(e){var s=$_.getQueue(e);a._ownerQueue=s&&s._ownerQueue||s}var l=a.append(Qm,e);return Qm.length=0,l}},{key:"loadRes",value:function(e,t,i,n,r){5!==arguments.length&&(r=n,n=i,i="assets");var o=this._parseLoadResArgs(t,n,r);t=o.type,n=o.onProgress,r=o.onComplete;var a=this,s=a._getResUuid(e,t,i,!0);s?this.load({type:"uuid",uuid:s},n,(function(e,t){t&&a.setAutoReleaseRecursively(s,!1),r&&r(e,t)})):a._urlNotFound(e,t,r)}},{key:"loadResDir",value:function(e,t,i,n,r){if(5!==arguments.length&&(r=n,n=i,i="assets"),Hm[i]){var o=this._parseLoadResArgs(t,n,r);t=o.type,n=o.onProgress,r=o.onComplete;var a=[],s=Hm[i].getUuidArray(e,t,a);this._loadResUuids(s,n,(function(e,t,i){for(var n=t.length,o=0;o<n;++o)if(t[o]instanceof S_){var a=t[o].getSpriteFrames();for(var s in a){var l=a[s];t.push(l),i&&i.push("".concat(i[o],"/").concat(l.name))}}r&&r(e,t,i)}),a)}}},{key:"loadResArray",value:function(e,t,i,n,r){5!==arguments.length&&(r=n,n=i,i="assets");var o=this._parseLoadResArgs(t,n,r);t=o.type,n=o.onProgress,r=o.onComplete;for(var a=[],s=0;s<e.length;s++){var l=e[s],c=this._getResUuid(l,t,i,!0);if(!c)return void this._urlNotFound(l,t,r);a.push(c)}this._loadResUuids(a,n,r)}},{key:"getRes",value:function(e,t){var i=this._cache[e];if(!i){var n=this._getResUuid(e,t,null,!0);if(!n)return null;var r=this._getReferenceKey(n);i=this._cache[r]}return i&&i.alias&&(i=i.alias),i&&i.complete?i.content:null}},{key:"getResCount",value:function(){return Object.keys(this._cache).length}},{key:"getDependsRecursively",value:function(e){if(e){var t=this._getReferenceKey(e),i=V_(t);return i.push(t),i}return[]}},{key:"release",value:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t];this.release(i)}else if(e){var n=this._getReferenceKey(e),r=this.getItem(n);if(r){this.removeItem(n);if((e=r.content)instanceof Ul){var o=e.nativeUrl;o&&this.release(o),e.destroy()}}}}},{key:"releaseAsset",value:function(e){var t=e._uuid;t&&this.release(t)}},{key:"releaseRes",value:function(e,t,i){var n=this._getResUuid(e,t,i,!0);n?this.release(n):b(4914,e)}},{key:"releaseResDir",value:function(e,t,i){if(Hm[i=i||"assets"])for(var n=Hm[i].getUuidArray(e,t),r=0;r<n.length;r++){var o=n[r];this.release(o)}}},{key:"releaseAll",value:function(){for(var e in this._cache)this.release(e)}},{key:"removeItem",value:function(e){var t=id.prototype.removeItem.call(this,e);return delete this._autoReleaseSetting[e],t}},{key:"setAutoRelease",value:function(e,t){var i=this._getReferenceKey(e);i&&(this._autoReleaseSetting[i]=!!t)}},{key:"setAutoReleaseRecursively",value:function(e,t){t=!!t;var i=this._getReferenceKey(e);if(i){this._autoReleaseSetting[i]=t;for(var n=V_(i),r=0;r<n.length;r++){var o=n[r];this._autoReleaseSetting[o]=t}}}},{key:"isAutoRelease",value:function(e){var t=this._getReferenceKey(e);return!!t&&!!this._autoReleaseSetting[t]}},{key:"_getResUuid",value:function(e,t,i,n){var r="",o=Hm[i=i||"assets"];if(e&&o){var a=e.indexOf("?");if(-1!==a&&(e=e.substr(0,a)),!(r=o.getUuid(e,t))){var s=M(e);s&&(e=e.slice(0,-s.length),(r=o.getUuid(e,t))&&!n&&g(4901,e,s))}}return!r&&t&&(He(t,Ru)||He(t,Tc)||He(t,Fu))&&g(4934),r}},{key:"_getReferenceKey",value:function(e){var t;return"object"===Q(e)?t=e._uuid||null:"string"==typeof e&&(t=this._getResUuid(e,void 0,void 0,!0)||e),t?(cc.AssetLibrary._getAssetInfoInRuntime(t,Wm),this._cache[Wm.url]?Wm.url:t):(g(4800,e),t)}},{key:"_urlNotFound",value:function(e,t,i){_t((function(){e=cc.url.normalize(e);var n="".concat(t?Fe(t):"Asset",' in "resources/').concat(e,'" does not exist.');i&&i(new Error(n),[])}))}},{key:"_parseLoadResArgs",value:function(e,t,i){if(void 0===i){var n=He(e,cc.RawAsset);t?(i=t,n&&(t=this.onProgress||null)):void 0!==t||n||(i=e,t=this.onProgress||null,e=null),void 0===t||n||(t=e,e=null)}return{type:e,onProgress:t,onComplete:i}}},{key:"_loadResUuids",value:function(e,t,i,n){if(e.length>0){var r=this,o=e.map((function(e){return{type:"uuid",uuid:e}}));this.load(o,t,(function(e,t){if(i){for(var a=[],s=n&&[],l=0;l<o.length;++l){var c=o[l].uuid,u=r._getReferenceKey(c),h=t.getContent(u);h&&(r.setAutoReleaseRecursively(c,!1),a.push(h),s&&s.push(n[l]))}n?i(e,a,s):i(e,a)}}))}else i&&_t((function(){n?i(null,[],[]):i(null,[])}))}}]),t}(),Km=cc.loader=new Zm;var Jm,$m,ev,tv,iv,nv,rv,ov,av,sv,lv,cv,uv,hv=Object.freeze({__proto__:null,loadImage:function(e,t,i){S(!!e,3103);var n=Km.getRes(e);return n?n.loaded?(t&&t.call(i,null,n),n):(n.once("load",(function(){t&&t.call(i,null,n)}),i),n):(n=new Vl,Km.load({url:e,imageAsset:n},(function(e,r){if(e)return t&&t.call(i,e||new Error("Unknown error")),n;t&&t.call(i,null,r)})),n)},cacheImage:function(e,t){if(e&&t){var i=new Vl(t),n={id:e,url:e,error:null,content:i,complete:!1};return Km.flowOut(n),i}},postLoadImage:function(e,t){e.loaded?t&&t():e.nativeUrl?Km.load({url:e.nativeUrl,skips:e.isCompressed?void 0:["Loader"]},(function(i,n){n&&(e.loaded||(e._nativeAsset=n)),t&&t(i)})):t&&t()}}),pv=(Jm=qa("cc.Skeleton"),$m=Qa([Mt]),ev=Qa([Qi]),Jm((nv=de((iv=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_joints",nv,ne(i)),_e(i,"_bindposes",rv,ne(i)),_e(i,"_hash",ov,ne(i)),i._invBindposes=null,i}return ee(t,Ul),J(t,[{key:"destroy",value:function(){return cc.director.root.dataPoolManager.releaseSkeleton(this),ae(te(t.prototype),"destroy",this).call(this)}},{key:"joints",get:function(){return this._joints},set:function(e){this._joints=e}},{key:"bindposes",get:function(){return this._bindposes},set:function(e){this._bindposes=e}},{key:"inverseBindposes",get:function(){if(!this._invBindposes){this._invBindposes=[];for(var e=0;e<this._bindposes.length;e++){var t=new Qi;Qi.invert(t,this._bindposes[e]),this._invBindposes.push(t)}}return this._invBindposes}},{key:"hash",get:function(){if(!this._hash){for(var e="",t=0;t<this._bindposes.length;t++){var i=this._bindposes[t];e+=i.m00.toPrecision(2)+" "+i.m01.toPrecision(2)+" "+i.m02.toPrecision(2)+" "+i.m03.toPrecision(2)+" "+i.m04.toPrecision(2)+" "+i.m05.toPrecision(2)+" "+i.m06.toPrecision(2)+" "+i.m07.toPrecision(2)+" "+i.m08.toPrecision(2)+" "+i.m09.toPrecision(2)+" "+i.m10.toPrecision(2)+" "+i.m11.toPrecision(2)+" "+i.m12.toPrecision(2)+" "+i.m13.toPrecision(2)+" "+i.m14.toPrecision(2)+" "+i.m15.toPrecision(2)+"\n"}this._hash=sl(e,666)}return this._hash}}]),t}()).prototype,"_joints",[$m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rv=de(iv.prototype,"_bindposes",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ov=de(iv.prototype,"_hash",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tv=iv))||tv);cc.Skeleton=pv,function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(av||(av={})),function(e){e[e.ORTHO=0]="ORTHO",e[e.PERSPECTIVE=1]="PERSPECTIVE"}(sv||(sv={})),function(e){e[e.F1_8=0]="F1_8",e[e.F2_0=1]="F2_0",e[e.F2_2=2]="F2_2",e[e.F2_5=3]="F2_5",e[e.F2_8=4]="F2_8",e[e.F3_2=5]="F3_2",e[e.F3_5=6]="F3_5",e[e.F4_0=7]="F4_0",e[e.F4_5=8]="F4_5",e[e.F5_0=9]="F5_0",e[e.F5_6=10]="F5_6",e[e.F6_3=11]="F6_3",e[e.F7_1=12]="F7_1",e[e.F8_0=13]="F8_0",e[e.F9_0=14]="F9_0",e[e.F10_0=15]="F10_0",e[e.F11_0=16]="F11_0",e[e.F13_0=17]="F13_0",e[e.F14_0=18]="F14_0",e[e.F16_0=19]="F16_0",e[e.F18_0=20]="F18_0",e[e.F20_0=21]="F20_0",e[e.F22_0=22]="F22_0"}(lv||(lv={})),function(e){e[e.ISO100=0]="ISO100",e[e.ISO200=1]="ISO200",e[e.ISO400=2]="ISO400",e[e.ISO800=3]="ISO800"}(cv||(cv={})),function(e){e[e.D1=0]="D1",e[e.D2=1]="D2",e[e.D4=2]="D4",e[e.D8=3]="D8",e[e.D15=4]="D15",e[e.D30=5]="D30",e[e.D60=6]="D60",e[e.D125=7]="D125",e[e.D250=8]="D250",e[e.D500=9]="D500",e[e.D1000=10]="D1000",e[e.D2000=11]="D2000",e[e.D4000=12]="D4000"}(uv||(uv={}));var fv,_v=[1.8,2,2.2,2.5,2.8,3.2,3.5,4,4.5,5,5.6,6.3,7.1,8,9,10,11,13,14,16,18,20,22],dv=[1,.5,1/4,1/8,1/15,1/30,1/60,.008,.004,.002,.001,5e-4,1/4e3],mv=[100,200,400,800],vv=new Mi,yv=new Mi,gv=new Qi,Av=new Qi,bv=exports.GFXClearFlag.STENCIL<<1,xv=function(){function e(){Z(this,e),this.isWindowSize=!0,this.screenScale=void 0,this.viewport=new nn(0,0,1,1),this.clearStencil=0,this.clearDepth=1,this.clearFlag=exports.GFXClearFlag.NONE,this._scene=null,this._node=null,this._name=null,this._enabled=!1,this._proj=-1,this._width=void 0,this._height=void 0,this._aspect=void 0,this._orthoHeight=10,this._fovAxis=av.VERTICAL,this._fov=di(45),this._nearClip=1,this._farClip=1e3,this._clearColor={r:.2,g:.2,b:.2,a:1},this._isProjDirty=!0,this._matView=new Qi,this._matViewInv=null,this._matProj=new Qi,this._matProjInv=new Qi,this._matViewProj=new Qi,this._matViewProjInv=new Qi,this._frustum=new ma,this._forward=new Mi,this._position=new Mi,this._view=null,this._visibility=Wc,this._priority=0,this._aperture=lv.F16_0,this._apertureValue=void 0,this._shutter=uv.D125,this._shutterValue=0,this._iso=cv.ISO100,this._isoValue=0,this._ec=0,this._exposure=0,this._apertureValue=_v[this._aperture],this._shutterValue=dv[this._shutter],this._isoValue=mv[this._iso],this.updateExposure(),this._aspect=this._width=this._height=this.screenScale=1}return J(e,[{key:"initialize",value:function(e){this._name=e.name,this._node=e.node,this._proj=e.projection,this._priority=e.priority||0,this._view=cc.director.root.createView({camera:this,name:this._name,priority:this._priority,flows:e.flows}),this.changeTargetWindow(e.window),console.log("Created Camera: "+this._name+" "+this._width+"x"+this._height)}},{key:"destroy",value:function(){cc.director.root.destroyView(this._view),this._view=null,this._name=null}},{key:"attachToScene",value:function(e){this._scene=e,this._view&&this._view.enable(!0)}},{key:"detachFromScene",value:function(){this._scene=null,this._view&&this._view.enable(!1)}},{key:"resize",value:function(e,t){this._width=e,this._height=t,this._aspect=this._width/this._height,this._isProjDirty=!0}},{key:"setFixedSize",value:function(e,t){this._width=e,this._height=t,this._aspect=this._width/this._height,this.isWindowSize=!1}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._node){if((this._node.hasChangedFlags||e)&&(Qi.invert(this._matView,this._node.worldMatrix),this._forward.x=-this._matView.m02,this._forward.y=-this._matView.m06,this._forward.z=-this._matView.m10,this._node.getWorldPosition(this._position)),this._isProjDirty){if(this._proj===sv.PERSPECTIVE)Qi.perspective(this._matProj,this._fov,this._aspect,this._nearClip,this._farClip,this._fovAxis===av.VERTICAL);else{var t=this._orthoHeight*this._aspect,i=this._orthoHeight;Qi.ortho(this._matProj,-t,t,-i,i,this._nearClip,this._farClip)}Qi.invert(this._matProjInv,this._matProj)}(this._node.hasChangedFlags||this._isProjDirty||e)&&(Qi.multiply(this._matViewProj,this._matProj,this._matView),Qi.invert(this._matViewProjInv,this._matViewProj),this._frustum.update(this._matViewProj,this._matViewProjInv)),this._isProjDirty=!1}}},{key:"getSplitFrustum",value:function(e,t,i){if(this._node){if(t=Math.max(t,this._nearClip),i=Math.min(i,this._farClip),Qi.invert(this._matView,this._node.worldMatrix),this._proj===sv.PERSPECTIVE)Qi.perspective(gv,this._fov,this._aspect,t,i,this._fovAxis===av.VERTICAL);else{var n=this._orthoHeight*this._aspect,r=this._orthoHeight;Qi.ortho(gv,-n,n,-r,r,t,i)}Qi.multiply(Av,gv,this._matView),Qi.invert(gv,Av),e.update(Av,gv)}}},{key:"changeTargetWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||cc.director.root.mainWindow;t&&this._view&&(this._view.window=t,this.resize(t.width,t.height))}},{key:"screenPointToRay",value:function(e,t,i){var n=this.viewport.x*this._width,r=this.viewport.y*this._height,o=this.viewport.width*this._width,a=this.viewport.height*this._height;return Mi.set(vv,(t-n)/o*2-1,(i-r)/a*2-1,1),Mi.transformMat4(vv,vv,this._matViewProjInv),this._proj===sv.PERSPECTIVE?this._node&&this._node.getWorldPosition(yv):(Mi.set(yv,(t-n)/o*2-1,(i-r)/a*2-1,-1),Mi.transformMat4(yv,yv,this._matViewProjInv)),Cn.fromPoints(e,yv,vv)}},{key:"screenToWorld",value:function(e,t){var i=this.viewport.x*this._width,n=this.viewport.y*this._height,r=this.viewport.width*this._width,o=this.viewport.height*this._height;return this._proj===sv.PERSPECTIVE?(Mi.set(e,(t.x-i)/r*2-1,(t.y-n)/o*2-1,1),Mi.transformMat4(e,e,this._matViewProjInv),this._node&&this._node.getWorldPosition(vv),Mi.lerp(e,vv,e,_i(this._nearClip/this._farClip,1,t.z))):(Mi.set(e,(t.x-i)/r*2-1,(t.y-n)/o*2-1,2*t.z-1),Mi.transformMat4(e,e,this.matViewProjInv)),e}},{key:"worldToScreen",value:function(e,t){var i=this.viewport.x*this._width,n=this.viewport.y*this._height,r=this.viewport.width*this._width,o=this.viewport.height*this._height;return Mi.transformMat4(e,t,this.matViewProj),e.x=i+.5*(e.x+1)*r,e.y=n+.5*(e.y+1)*o,e.z=.5*e.z+.5,e}},{key:"updateExposure",value:function(){var e=Math.log2(this._apertureValue*this._apertureValue/this._shutterValue*100/this._isoValue);this._exposure=.833333/Math.pow(2,e)}},{key:"node",set:function(e){this._node=e},get:function(){return this._node}},{key:"enabled",set:function(e){this._enabled=e,this._view&&this._view.enable(e)},get:function(){return this._enabled}},{key:"view",get:function(){return this._view}},{key:"orthoHeight",set:function(e){this._orthoHeight=e,this._isProjDirty=!0},get:function(){return this._orthoHeight}},{key:"projectionType",set:function(e){this._proj=e,this._isProjDirty=!0},get:function(){return this._proj}},{key:"fovAxis",set:function(e){this._fovAxis=e,this._isProjDirty=!0},get:function(){return this._fovAxis}},{key:"fov",set:function(e){this._fov=e,this._isProjDirty=!0},get:function(){return this._fov}},{key:"nearClip",set:function(e){this._nearClip=e,this._isProjDirty=!0},get:function(){return this._nearClip}},{key:"farClip",set:function(e){this._farClip=e,this._isProjDirty=!0},get:function(){return this._farClip}},{key:"clearColor",set:function(e){this._clearColor.r=e.r,this._clearColor.g=e.g,this._clearColor.b=e.b,this._clearColor.a=e.a},get:function(){return this._clearColor}},{key:"scene",get:function(){return this._scene}},{key:"name",get:function(){return this._name}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"aspect",get:function(){return this._aspect}},{key:"matView",set:function(e){this._matView=e},get:function(){return this._matView}},{key:"matViewInv",set:function(e){this._matViewInv=e},get:function(){return this._matViewInv||this._node.worldMatrix}},{key:"matProj",set:function(e){this._matProj=e},get:function(){return this._matProj}},{key:"matProjInv",set:function(e){this._matProjInv=e},get:function(){return this._matProjInv}},{key:"matViewProj",set:function(e){this._matViewProj=e},get:function(){return this._matViewProj}},{key:"matViewProjInv",set:function(e){this._matViewProjInv=e},get:function(){return this._matViewProjInv}},{key:"frustum",set:function(e){this._frustum=e},get:function(){return this._frustum}},{key:"forward",set:function(e){this._forward=e},get:function(){return this._forward}},{key:"position",set:function(e){this._position=e},get:function(){return this._position}},{key:"visibility",set:function(e){this._visibility=e,this._view&&(this._view.visibility=e)},get:function(){return this._visibility}},{key:"priority",get:function(){return this._view?this._view.priority:-1},set:function(e){this._priority=e,this._view&&(this._view.priority=this._priority)}},{key:"aperture",set:function(e){this._aperture=e,this._apertureValue=_v[this._aperture],this.updateExposure()},get:function(){return this._aperture}},{key:"apertureValue",get:function(){return this._apertureValue}},{key:"shutter",set:function(e){this._shutter=e,this._shutterValue=dv[this._shutter],this.updateExposure()},get:function(){return this._shutter}},{key:"shutterValue",get:function(){return this._shutterValue}},{key:"iso",set:function(e){this._iso=e,this._isoValue=mv[this._iso],this.updateExposure()},get:function(){return this._iso}},{key:"isoValue",get:function(){return this._isoValue}},{key:"ec",set:function(e){this._ec=e},get:function(){return this._ec}},{key:"exposure",get:function(){return this._exposure}},{key:"flows",set:function(e){this._view&&this._view.setExecuteFlows(e)}}]),e}();(fv=exports.SystemEventType||(exports.SystemEventType={})).TOUCH_START="touch-start",fv.TOUCH_MOVE="touch-move",fv.TOUCH_END="touch-end",fv.TOUCH_CANCEL="touch-cancel",fv.MOUSE_DOWN="mouse-down",fv.MOUSE_MOVE="mouse-move",fv.MOUSE_UP="mouse-up",fv.MOUSE_WHEEL="mouse-wheel",fv.MOUSE_ENTER="mouse-enter",fv.MOUSE_LEAVE="mouse-leave",fv.KEY_DOWN="keydown",fv.KEY_UP="keyup",fv.DEVICEMOTION="devicemotion",fv.TRANSFORM_CHANGED="transform-changed",fv.SCENE_CHANGED_FOR_PERSISTS="scene-changed-for-persists",fv.SIZE_CHANGED="size-changed",fv.ANCHOR_CHANGED="anchor-changed",fv.CHILD_ADDED="child-added",fv.CHILD_REMOVED="child-removed",fv.PARENT_CHANGED="parent-changed",fv.NODE_DESTROYED="node-destroyed",bt(exports.SystemEventType),cc.SystemEventType=exports.SystemEventType;var Tv=new Oi,Sv=function(e){function t(e,i,n){var r;return Z(this,t),(r=re(this,te(t).call(this,ll.MOUSE,i))).movementX=0,r.movementY=0,r.eventType=void 0,r._button=t.BUTTON_MISSING,r._x=0,r._y=0,r._prevX=0,r._prevY=0,r._scrollX=0,r._scrollY=0,r.eventType=e,n&&(r._prevX=n.x,r._prevY=n.y),r}return ee(t,ll),J(t,[{key:"setScrollData",value:function(e,t){this._scrollX=e,this._scrollY=t}},{key:"getScrollX",value:function(){return this._scrollX}},{key:"getScrollY",value:function(){return this._scrollY}},{key:"setLocation",value:function(e,t){this._x=e,this._y=t}},{key:"getLocation",value:function(e){return e||(e=new Oi),Oi.set(e,this._x,this._y),e}},{key:"getLocationInView",value:function(e){return e||(e=new Oi),Oi.set(e,this._x,cc.view._designResolutionSize.height-this._y),e}},{key:"getUILocation",value:function(e){return e||(e=new Oi),Oi.set(e,this._x,this._y),cc.view._convertPointWithScale(e),e}},{key:"getPreviousLocation",value:function(e){return e||(e=new Oi),Oi.set(e,this._prevX,this._prevY),e}},{key:"getUIPreviousLocation",value:function(e){return e||(e=new Oi),Oi.set(e,this._prevX,this._prevY),cc.view._convertPointWithScale(e),e}},{key:"getDelta",value:function(e){return e||(e=new Oi),Oi.set(e,this._x-this._prevX,this._y-this._prevY),e}},{key:"getDeltaX",value:function(){return this._x-this._prevX}},{key:"getDeltaY",value:function(){return this._y-this._prevY}},{key:"getUIDelta",value:function(e){return e||(e=new Oi),Oi.set(e,(this._x-this._prevX)/cc.view.getScaleX(),(this._y-this._prevY)/cc.view.getScaleY()),e}},{key:"getUIDeltaX",value:function(){return(this._x-this._prevX)/cc.view.getScaleX()}},{key:"getUIDeltaY",value:function(){return(this._y-this._prevY)/cc.view.getScaleY()}},{key:"setButton",value:function(e){this._button=e}},{key:"getButton",value:function(){return this._button}},{key:"getLocationX",value:function(){return this._x}},{key:"getLocationY",value:function(){return this._y}},{key:"getUILocationX",value:function(){var e=cc.view.getViewportRect();return(this._x-e.x)/cc.view.getScaleX()}},{key:"getUILocationY",value:function(){var e=cc.view.getViewportRect();return(this._y-e.y)/cc.view.getScaleY()}}]),t}();Sv.NONE=0,Sv.DOWN=1,Sv.UP=2,Sv.MOVE=3,Sv.SCROLL=4,Sv.BUTTON_MISSING=-1,Sv.BUTTON_LEFT=0,Sv.BUTTON_RIGHT=2,Sv.BUTTON_MIDDLE=1,Sv.BUTTON_4=3,Sv.BUTTON_5=4,Sv.BUTTON_6=5,Sv.BUTTON_7=6,Sv.BUTTON_8=7;var Ev=function(e){function t(e,i,n){var r;return Z(this,t),(r=re(this,te(t).call(this,ll.TOUCH,i))).touch=null,r.simulate=!1,r._eventCode=void 0,r._touches=void 0,r._eventCode=n||0,r._touches=e||[],r}return ee(t,ll),J(t,[{key:"getEventCode",value:function(){return this._eventCode}},{key:"getTouches",value:function(){return this._touches}},{key:"setLocation",value:function(e,t){this.touch&&this.touch.setTouchInfo(this.touch.getID(),e,t)}},{key:"getLocation",value:function(e){return this.touch?this.touch.getLocation(e):new Oi}},{key:"getUILocation",value:function(e){return this.touch?this.touch.getUILocation(e):new Oi}},{key:"getLocationInView",value:function(e){return this.touch?this.touch.getLocationInView(e):new Oi}},{key:"getPreviousLocation",value:function(e){return this.touch?this.touch.getPreviousLocation(e):new Oi}},{key:"getStartLocation",value:function(e){return this.touch?this.touch.getStartLocation(e):new Oi}},{key:"getUIStartLocation",value:function(e){return this.touch?this.touch.getUIStartLocation(e):new Oi}},{key:"getID",value:function(){return this.touch?this.touch.getID():null}},{key:"getDelta",value:function(e){return this.touch?this.touch.getDelta(e):new Oi}},{key:"getUIDelta",value:function(e){return this.touch?this.touch.getUIDelta(e):new Oi}},{key:"getDeltaX",value:function(){return this.touch?this.touch.getDelta(Tv).x:0}},{key:"getDeltaY",value:function(){return this.touch?this.touch.getDelta(Tv).y:0}},{key:"getLocationX",value:function(){return this.touch?this.touch.getLocationX():0}},{key:"getLocationY",value:function(){return this.touch?this.touch.getLocationY():0}}]),t}();Ev.MAX_TOUCHES=5,Ev.BEGAN=0,Ev.MOVED=1,Ev.ENDED=2,Ev.CANCELLED=3;var Cv=function(e){function t(e,i){var n;return Z(this,t),(n=re(this,te(t).call(this,ll.ACCELERATION,i))).acc=void 0,n.acc=e,n}return ee(t,ll),t}(),wv=function(e){function t(e,i,n){var r;return Z(this,t),(r=re(this,te(t).call(this,ll.KEYBOARD,n))).keyCode=void 0,r.rawEvent=void 0,r.isPressed=void 0,"number"==typeof e?r.keyCode=e:(r.keyCode=e.keyCode,r.rawEvent=e),r.isPressed=i,r}return ee(t,ll),t}();ll.EventMouse=Sv,ll.EventTouch=Ev,ll.EventAcceleration=Cv,ll.EventKeyboard=wv;var kv=function(){function e(t,i,n){Z(this,e),this.owner=null,this.mask=null,this._previousIn=!1,this._target=null,this._onEvent=void 0,this._type=void 0,this._listenerID=void 0,this._registered=!1,this._fixedPriority=0,this._node=null,this._paused=!0,this._isEnabled=!0,this._onEvent=n,this._type=t||0,this._listenerID=i||""}return J(e,[{key:"onEvent",get:function(){return this._onEvent}}],[{key:"create",value:function(e){cc.assertID(e&&e.event,1900);var t=e.event;delete e.event;var i=null;if(t===cc.EventListener.TOUCH_ONE_BY_ONE?i=new Fv:t===cc.EventListener.TOUCH_ALL_AT_ONCE?i=new Iv:t===cc.EventListener.MOUSE?i=new Rv:t===cc.EventListener.KEYBOARD?i=new Pv:t===cc.EventListener.ACCELERATION&&(i=new Mv(e.callback),delete e.callback),i)for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];i[o]=e[o]}return i}}]),J(e,[{key:"_setPaused",value:function(e){this._paused=e}},{key:"_isPaused",value:function(){return this._paused}},{key:"_setRegistered",value:function(e){this._registered=e}},{key:"_isRegistered",value:function(){return this._registered}},{key:"_getType",value:function(){return this._type}},{key:"_getListenerID",value:function(){return this._listenerID}},{key:"_setFixedPriority",value:function(e){this._fixedPriority=e}},{key:"_getFixedPriority",value:function(){return this._fixedPriority}},{key:"_setSceneGraphPriority",value:function(e){this._target=e,this._node=e}},{key:"_getSceneGraphPriority",value:function(){return this._node}},{key:"checkAvailable",value:function(){return null!==this._onEvent}},{key:"clone",value:function(){return null}},{key:"setEnabled",value:function(e){this._isEnabled=e}},{key:"isEnabled",value:function(){return this._isEnabled}}]),e}();kv.UNKNOWN=0,kv.TOUCH_ONE_BY_ONE=1,kv.TOUCH_ALL_AT_ONCE=2,kv.KEYBOARD=3,kv.MOUSE=4,kv.ACCELERATION=6,kv.CUSTOM=8,kv.ListenerID={MOUSE:"__cc_mouse",TOUCH_ONE_BY_ONE:"__cc_touch_one_by_one",TOUCH_ALL_AT_ONCE:"__cc_touch_all_at_once",KEYBOARD:"__cc_keyboard",ACCELERATION:"__cc_acceleration"};var Ov=kv.ListenerID,Rv=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,kv.MOUSE,Ov.MOUSE,null))).onMouseDown=null,e.onMouseUp=null,e.onMouseMove=null,e.onMouseScroll=null,e._onEvent=function(t){return e._callback(t)},e}return ee(t,kv),J(t,[{key:"_callback",value:function(e){var t=cc.Event.EventMouse;switch(e.eventType){case t.DOWN:this.onMouseDown&&this.onMouseDown(e);break;case t.UP:this.onMouseUp&&this.onMouseUp(e);break;case t.MOVE:this.onMouseMove&&this.onMouseMove(e);break;case t.SCROLL:this.onMouseScroll&&this.onMouseScroll(e)}}},{key:"clone",value:function(){var e=new t;return e.onMouseDown=this.onMouseDown,e.onMouseUp=this.onMouseUp,e.onMouseMove=this.onMouseMove,e.onMouseScroll=this.onMouseScroll,e}},{key:"checkAvailable",value:function(){return!0}}]),t}(),Fv=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,kv.TOUCH_ONE_BY_ONE,Ov.TOUCH_ONE_BY_ONE,null))).swallowTouches=!1,e.onTouchBegan=null,e.onTouchMoved=null,e.onTouchEnded=null,e.onTouchCancelled=null,e._claimedTouches=[],e}return ee(t,kv),J(t,[{key:"setSwallowTouches",value:function(e){this.swallowTouches=e}},{key:"isSwallowTouches",value:function(){return this.swallowTouches}},{key:"clone",value:function(){var e=new t;return e.onTouchBegan=this.onTouchBegan,e.onTouchMoved=this.onTouchMoved,e.onTouchEnded=this.onTouchEnded,e.onTouchCancelled=this.onTouchCancelled,e.swallowTouches=this.swallowTouches,e}},{key:"checkAvailable",value:function(){return!!this.onTouchBegan||(cc.logID(1801),!1)}}]),t}(),Iv=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,kv.TOUCH_ALL_AT_ONCE,Ov.TOUCH_ALL_AT_ONCE,null))).onTouchesBegan=null,e.onTouchesMoved=null,e.onTouchesEnded=null,e.onTouchesCancelled=null,e}return ee(t,kv),J(t,[{key:"clone",value:function(){var e=new t;return e.onTouchesBegan=this.onTouchesBegan,e.onTouchesMoved=this.onTouchesMoved,e.onTouchesEnded=this.onTouchesEnded,e.onTouchesCancelled=this.onTouchesCancelled,e}},{key:"checkAvailable",value:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.logID(1802),!1)}}]),t}(),Mv=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,kv.ACCELERATION,Ov.ACCELERATION,null)))._onAccelerationEvent=null,i._onEvent=function(e){return i._callback(e)},i._onAccelerationEvent=e,i}return ee(t,kv),J(t,[{key:"_callback",value:function(e){this._onAccelerationEvent&&this._onAccelerationEvent(e.acc,e)}},{key:"checkAvailable",value:function(){return cc.assertID(this._onAccelerationEvent,1803),!0}},{key:"clone",value:function(){return new t(this._onAccelerationEvent)}}]),t}(),Pv=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,kv.KEYBOARD,Ov.KEYBOARD,null))).onKeyPressed=null,e.onKeyReleased=null,e._onEvent=function(t){return e._callback(t)},e}return ee(t,kv),J(t,[{key:"_callback",value:function(e){e.isPressed?this.onKeyPressed&&this.onKeyPressed(e.keyCode,e):this.onKeyReleased&&this.onKeyReleased(e.keyCode,e)}},{key:"clone",value:function(){var e=new t;return e.onKeyPressed=this.onKeyPressed,e.onKeyReleased=this.onKeyReleased,e}},{key:"checkAvailable",value:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.logID(1800),!1)}}]),t}();cc.EventListener=kv;var Dv=kv.ListenerID;var Bv=function(){function e(){Z(this,e),this.gt0Index=0,this._fixedListeners=[],this._sceneGraphListeners=[]}return J(e,[{key:"size",value:function(){return this._fixedListeners.length+this._sceneGraphListeners.length}},{key:"empty",value:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length}},{key:"push",value:function(e){0===e._getFixedPriority()?this._sceneGraphListeners.push(e):this._fixedListeners.push(e)}},{key:"clearSceneGraphListeners",value:function(){this._sceneGraphListeners.length=0}},{key:"clearFixedListeners",value:function(){this._fixedListeners.length=0}},{key:"clear",value:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0}},{key:"getFixedPriorityListeners",value:function(){return this._fixedListeners}},{key:"getSceneGraphPriorityListeners",value:function(){return this._sceneGraphListeners}}]),e}();var Nv=new(function(){function e(){Z(this,e),this._listenersMap={},this._priorityDirtyFlagMap={},this._nodeListenersMap={},this._toAddedListeners=[],this._toRemovedListeners=[],this._dirtyListeners=[],this._inDispatch=0,this._isEnabled=!1,this._internalCustomListenerIDs=[],this._currentTouch=null,this._currentTouchListener=null}return J(e,[{key:"pauseTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof cc._BaseNode){var i=this._nodeListenersMap[e.uuid];if(i)for(var n=0;n<i.length;++n){var r=i[n];r._setPaused(!0)}if(!0===t){var o=e.children;if(o)for(var a=0;a<o.length;++a){var s=o[a];this.pauseTarget(s,!0)}}}else cc.warnID(3506)}},{key:"resumeTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof cc._BaseNode){var i=this._nodeListenersMap[e.uuid];if(i)for(var n=0;n<i.length;++n){var r=i[n];r._setPaused(!1)}if(this._setDirtyForNode(e),!0===t&&e.children.length>0){var o=e.children;if(o)for(var a=0;a<o.length;++a){var s=o[a];this.resumeTarget(s,!0)}}}else cc.warnID(3506)}},{key:"frameUpdateListeners",value:function(){var e=this._listenersMap,t=this._priorityDirtyFlagMap;for(var i in e)e[i].empty()&&(delete t[i],delete e[i]);var n=this._toAddedListeners;if(0!==n.length){for(var r=0,o=n.length;r<o;r++)this._forceAddEventListener(n[r]);n.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},{key:"hasEventListener",value:function(e){return!!this._getListeners(e)}},{key:"addListener",value:function(e,t){if(cc.assertID(e&&t,3503),cc.js.isNumber(t)||t instanceof cc._BaseNode){if(e instanceof cc.EventListener){if(e._isRegistered())return void cc.logID(3505)}else cc.assertID(!cc.js.isNumber(t),3504),e=cc.EventListener.create(e);if(e.checkAvailable()){if(cc.js.isNumber(t)){if(0===t)return void cc.logID(3500);e._setSceneGraphPriority(null),e._setFixedPriority(t),e._setRegistered(!0),e._setPaused(!1),this._addListener(e)}else{if(!(i=t)||!i.getComponent("cc.UITransformComponent"))return void cc.logID(3512);e._setSceneGraphPriority(t),e._setFixedPriority(0),e._setRegistered(!0),this._addListener(e)}var i;return e}}else cc.warnID(3506)}},{key:"addCustomListener",value:function(e,t){var i=kv.create({event:cc.EventListener.CUSTOM,eventName:e,callback:t});return this.addListener(i,1),i}},{key:"removeListener",value:function(e){if(null!=e){var t=!1,i=this._listenersMap;for(var n in i){var r=i[n],o=r.getFixedPriorityListeners(),a=r.getSceneGraphPriorityListeners();if((t=this._removeListenerInVector(a,e))?this._setDirty(e._getListenerID(),2):(t=this._removeListenerInVector(o,e))&&this._setDirty(e._getListenerID(),1),r.empty()&&(delete this._priorityDirtyFlagMap[e._getListenerID()],delete i[n]),t)break}if(!t)for(var s=this._toAddedListeners,l=s.length-1;l>=0;l--){var c=s[l];if(c===e){cc.js.array.removeAt(s,l),c._setRegistered(!1);break}}}}},{key:"removeListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(cc.js.isNumber(e)||e instanceof cc._BaseNode)if(void 0!==e._id){var i=this._nodeListenersMap[e._id];if(i){for(var n=cc.js.array.copy(i),r=0;r<n.length;++r){var o=n[r];this.removeListener(o)}delete this._nodeListenersMap[e._id]}for(var a=this._toAddedListeners,s=0;s<a.length;){var l=a[s];l._getSceneGraphPriority()===e?(l._setSceneGraphPriority(null),l._setRegistered(!1),a.splice(s,1)):++s}if(!0===t)for(var c=e.getChildren(),u=0;u<c.length;++u){var h=c[u];this.removeListeners(h,!0)}}else e===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(Dv.TOUCH_ONE_BY_ONE):e===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(Dv.TOUCH_ALL_AT_ONCE):e===cc.EventListener.MOUSE?this._removeListenersForListenerID(Dv.MOUSE):e===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(Dv.ACCELERATION):e===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(Dv.KEYBOARD):cc.logID(3501);else cc.warnID(3506)}},{key:"removeCustomListeners",value:function(e){this._removeListenersForListenerID(e)}},{key:"removeAllListeners",value:function(){var e=this._listenersMap,t=this._internalCustomListenerIDs;for(var i in e)-1===t.indexOf(i)&&this._removeListenersForListenerID(i)}},{key:"setPriority",value:function(e,t){if(null!=e){var i=this._listenersMap;for(var n in i){var r=i[n].getFixedPriorityListeners();if(r)if(-1!==r.indexOf(e))return null!=e._getSceneGraphPriority()&&cc.logID(3502),void(e._getFixedPriority()!==t&&(e._setFixedPriority(t),this._setDirty(e._getListenerID(),1)))}}}},{key:"setEnabled",value:function(e){this._isEnabled=e}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"dispatchEvent",value:function(e){if(this._isEnabled)if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,e&&e.getType){if(e.getType().startsWith(cc.Event.TOUCH))return this._dispatchTouchEvent(e),void this._inDispatch--;var t=function(e){var t=ll,i=e.type;return i===t.ACCELERATION?Dv.ACCELERATION:i===t.KEYBOARD?Dv.KEYBOARD:i.startsWith(t.MOUSE)?Dv.MOUSE:(i.startsWith(t.TOUCH)&&cc.logID(2e3),"")}(e);this._sortEventListeners(t);var i=this._listenersMap[t];null!=i&&(this._dispatchEventToListeners(i,this._onListenerCallback,e),this._onUpdateListeners(i)),this._inDispatch--}else cc.errorID(3511)}},{key:"_onListenerCallback",value:function(e,t){t.currentTarget=e._target;var i=e.onEvent;return i&&i(t),t.isStopped()}},{key:"dispatchCustomEvent",value:function(e,t){var i=new cc.Event.EventCustom(e);i.setUserData(t),this.dispatchEvent(i)}},{key:"_setDirtyForNode",value:function(e){var t=this._nodeListenersMap[e._id];if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=t[i]._getListenerID();null==this._dirtyListeners[r]&&(this._dirtyListeners[r]=!0)}if(e.children.length>0)for(var o=e.children,a=0,s=o?o.length:0;a<s;a++)this._setDirtyForNode(o[a])}},{key:"_addListener",value:function(e){0===this._inDispatch?this._forceAddEventListener(e):this._toAddedListeners.push(e)}},{key:"_forceAddEventListener",value:function(e){var t=e._getListenerID(),i=this._listenersMap[t];if(i||(i=new Bv,this._listenersMap[t]=i),i.push(e),0===e._getFixedPriority()){this._setDirty(t,2);var n=e._getSceneGraphPriority();null===n&&cc.logID(3507),this._associateNodeAndEventListener(n,e),n.activeInHierarchy&&this.resumeTarget(n)}else this._setDirty(t,1)}},{key:"_getListeners",value:function(e){return this._listenersMap[e]}},{key:"_updateDirtyFlagForSceneGraph",value:function(){var e=this._dirtyListeners;for(var t in e)this._setDirty(t,2);this._dirtyListeners.length=0}},{key:"_removeAllListenersInVector",value:function(e){if(e)for(var t,i=e.length-1;i>=0;i--)(t=e[i])._setRegistered(!1),null!=t._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(t._getSceneGraphPriority(),t),t._setSceneGraphPriority(null)),0===this._inDispatch&&cc.js.array.removeAt(e,i)}},{key:"_removeListenersForListenerID",value:function(e){var t=this._listenersMap[e];if(t){var i=t.getFixedPriorityListeners(),n=t.getSceneGraphPriorityListeners();this._removeAllListenersInVector(n),this._removeAllListenersInVector(i),delete this._priorityDirtyFlagMap[e],this._inDispatch||(t.clear(),delete this._listenersMap[e])}for(var r=this._toAddedListeners,o=r.length-1;o>=0;o--){var a=r[o];a&&a._getListenerID()===e&&cc.js.array.removeAt(r,o)}}},{key:"_sortEventListeners",value:function(e){var t=0,i=this._priorityDirtyFlagMap;(i[e]&&(t=i[e]),0!==t)&&(i[e]=0,1&t&&this._sortListenersOfFixedPriority(e),2&t&&cc.director.getScene()&&this._sortListenersOfSceneGraphPriority(e))}},{key:"_sortListenersOfSceneGraphPriority",value:function(e){var t=this._getListeners(e);if(t){var i=t.getSceneGraphPriorityListeners();i&&0!==i.length&&t.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes)}}},{key:"_sortEventListenersOfSceneGraphPriorityDes",value:function(e,t){var i=e._getSceneGraphPriority(),n=t._getSceneGraphPriority();if(!(t&&n&&n._activeInHierarchy&&n._uiProps.uiTransformComp))return-1;if(!(e&&i&&i._activeInHierarchy&&i._uiProps.uiTransformComp))return 1;var r=i,o=n,a=i._uiProps.uiTransformComp,s=n._uiProps.uiTransformComp,l=!1;if(a.visibility!==s.visibility)return s.visibility-a.visibility;for(;r.parent._id!==o.parent._id;)r=null===r.parent.parent?(l=!0)&&n:r.parent,o=null===o.parent.parent?(l=!0)&&i:o.parent;if(r._id===o._id){if(r._id===n._id)return-1;if(r._id===i._id)return 1}var c=r.getSiblingIndex(),u=o.getSiblingIndex();return l?c-u:u-c}},{key:"_sortListenersOfFixedPriority",value:function(e){var t=this._listenersMap[e];if(t){var i=t.getFixedPriorityListeners();if(i&&0!==i.length){i.sort(this._sortListenersOfFixedPriorityAsc);for(var n=0,r=i.length;n<r&&!(i[n]._getFixedPriority()>=0);)++n;t.gt0Index=n}}}},{key:"_sortListenersOfFixedPriorityAsc",value:function(e,t){return e._getFixedPriority()-t._getFixedPriority()}},{key:"_onUpdateListeners",value:function(e){var t=e.getFixedPriorityListeners(),i=e.getSceneGraphPriorityListeners(),n=this._toRemovedListeners;if(i)for(var r=i.length-1;r>=0;r--){var o=i[r];if(!o._isRegistered()){cc.js.array.removeAt(i,r);var a=n.indexOf(o);-1!==a&&n.splice(a,1)}}if(t)for(var s=t.length-1;s>=0;s--){var l=t[s];if(!l._isRegistered()){cc.js.array.removeAt(t,s);var c=n.indexOf(l);-1!==c&&n.splice(c,1)}}i&&0===i.length&&e.clearSceneGraphListeners(),t&&0===t.length&&e.clearFixedListeners()}},{key:"_updateTouchListeners",value:function(e){var t=this._inDispatch;if(cc.assertID(t>0,3508),!(t>1)){var i;(i=this._listenersMap[Dv.TOUCH_ONE_BY_ONE])&&this._onUpdateListeners(i),(i=this._listenersMap[Dv.TOUCH_ALL_AT_ONCE])&&this._onUpdateListeners(i),cc.assertID(1===t,3509);var n=this._toAddedListeners;if(0!==n.length){for(var r=0,o=n.length;r<o;r++)this._forceAddEventListener(n[r]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}}},{key:"_cleanToRemovedListeners",value:function(){for(var e=this._toRemovedListeners,t=0;t<e.length;++t){var i=e[t],n=this._listenersMap[i._getListenerID()];if(n){var r=n.getFixedPriorityListeners(),o=n.getSceneGraphPriorityListeners();if(o){var a=o.indexOf(i);-1!==a&&o.splice(a,1)}if(r){var s=r.indexOf(i);-1!==s&&r.splice(s,1)}}}e.length=0}},{key:"_onTouchEventCallback",value:function(e,t){if(!e._isRegistered())return!1;var i=t.event,n=i.touch;i.currentTarget=e._getSceneGraphPriority();var r=!1,o=-1,a=i.getEventCode();if(a===Ev.BEGAN){if(!_c.ENABLE_MULTI_TOUCH&&Nv._currentTouch){var s=Nv._currentTouchListener._node;if(!s||s.activeInHierarchy)return!1}e.onTouchBegan&&(r=e.onTouchBegan(n,i))&&e._isRegistered()&&(e._claimedTouches.push(n),Nv._currentTouch=n,Nv._currentTouchListener=e)}else if(e._claimedTouches.length>0&&-1!==(o=e._claimedTouches.indexOf(n))){if(r=!0,!_c.ENABLE_MULTI_TOUCH&&Nv._currentTouch&&Nv._currentTouch!==n)return!1;a===Ev.MOVED&&e.onTouchMoved?e.onTouchMoved(n,i):a===Ev.ENDED?(e.onTouchEnded&&e.onTouchEnded(n,i),e._isRegistered()&&e._claimedTouches.splice(o,1),Nv._currentTouch=null,Nv._currentTouchListener=null):a===Ev.CANCELLED&&(e.onTouchCancelled&&e.onTouchCancelled(n,i),e._isRegistered()&&e._claimedTouches.splice(o,1),Nv._currentTouch=null,Nv._currentTouchListener=null)}return i.isStopped()?(Nv._updateTouchListeners(i),!0):!!(r&&e._isRegistered()&&e.swallowTouches)&&(t.needsMutableSet&&t.touches.splice(n,1),!0)}},{key:"_dispatchTouchEvent",value:function(e){this._sortEventListeners(Dv.TOUCH_ONE_BY_ONE),this._sortEventListeners(Dv.TOUCH_ALL_AT_ONCE);var t=this._getListeners(Dv.TOUCH_ONE_BY_ONE),i=this._getListeners(Dv.TOUCH_ALL_AT_ONCE);if(null!==t||null!==i){var n=e.getTouches(),r=cc.js.array.copy(n),o={event:e,needsMutableSet:t&&i,touches:r,selTouch:null};if(t)for(var a=0;a<n.length;++a){var s=n[a];e.touch=s,e.propagationStopped=e.propagationImmediateStopped=!1,this._dispatchEventToListeners(t,this._onTouchEventCallback,o)}i&&r.length>0&&(this._dispatchEventToListeners(i,this._onTouchesEventCallback,{event:e,touches:r}),e.isStopped())||this._updateTouchListeners(e)}}},{key:"_onTouchesEventCallback",value:function(e,t){if(!e._isRegistered())return!1;var i=t.event,n=t.touches,r=i.getEventCode();return i.currentTarget=e._getSceneGraphPriority(),r===Ev.BEGAN&&e.onTouchesBegan?e.onTouchesBegan(n,i):r===Ev.MOVED&&e.onTouchesMoved?e.onTouchesMoved(n,i):r===Ev.ENDED&&e.onTouchesEnded?e.onTouchesEnded(n,i):r===Ev.CANCELLED&&e.onTouchesCancelled&&e.onTouchesCancelled(n,i),!!i.isStopped()&&(Nv._updateTouchListeners(i),!0)}},{key:"_associateNodeAndEventListener",value:function(e,t){var i=this._nodeListenersMap[e.uuid];i||(i=[],this._nodeListenersMap[e.uuid]=i),i.push(t)}},{key:"_dissociateNodeAndEventListener",value:function(e,t){var i=this._nodeListenersMap[e.uuid];i&&(cc.js.array.remove(i,t),0===i.length&&delete this._nodeListenersMap[e.uuid])}},{key:"_dispatchEventToListeners",value:function(e,t,i){var n=!1,r=e.getFixedPriorityListeners(),o=e.getSceneGraphPriorityListeners(),a=0;if(r&&0!==r.length)for(;a<e.gt0Index;++a){var s=r[a];if(s.isEnabled()&&!s._isPaused()&&s._isRegistered()&&t(s,i)){n=!0;break}}if(o&&!n)for(var l=0;l<o.length;++l){var c=o[l];if(c.isEnabled()&&!c._isPaused()&&c._isRegistered()&&t(c,i)){n=!0;break}}if(r&&!n)for(;a<r.length;++a){var u=r[a];if(u.isEnabled()&&!u._isPaused()&&u._isRegistered()&&t(u,i)){n=!0;break}}}},{key:"_setDirty",value:function(e,t){var i=this._priorityDirtyFlagMap;null==i[e]?i[e]=t:i[e]=t|i[e]}},{key:"_sortNumberAsc",value:function(e,t){return e-t}},{key:"_removeListenerInCallback",value:function(e,t){if(null==e)return!1;for(var i=e.length-1;i>=0;i--){var n=e[i];if(n._onCustomEvent===t||n.onEvent===t)return n._setRegistered(!1),null!=n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(n._getSceneGraphPriority(),n),n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(e,i):this._toRemovedListeners.push(n),!0}return!1}},{key:"_removeListenerInVector",value:function(e,t){if(null==e)return!1;for(var i=e.length-1;i>=0;i--){var n=e[i];if(n===t)return n._setRegistered(!1),null!=n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(n._getSceneGraphPriority(),n),n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(e,i):this._toRemovedListeners.push(n),!0}return!1}}]),e}());cc.eventManager=Nv;var Lv=new Array(16),zv=null,Gv=new Oi,Uv=[exports.SystemEventType.TOUCH_START.toString(),exports.SystemEventType.TOUCH_MOVE.toString(),exports.SystemEventType.TOUCH_END.toString(),exports.SystemEventType.TOUCH_CANCEL.toString()],Xv=[exports.SystemEventType.MOUSE_DOWN.toString(),exports.SystemEventType.MOUSE_ENTER.toString(),exports.SystemEventType.MOUSE_MOVE.toString(),exports.SystemEventType.MOUSE_LEAVE.toString(),exports.SystemEventType.MOUSE_UP.toString(),exports.SystemEventType.MOUSE_WHEEL.toString()];function Vv(e,t){var i=this.owner;return!(!i||!i._uiProps.uiTransformComp)&&(e.getUILocation(Gv),!!i._uiProps.uiTransformComp.isHit(Gv,this)&&(t.type=exports.SystemEventType.TOUCH_START.toString(),t.touch=e,t.bubbles=!0,i.dispatchEvent(t),!0))}function Hv(e,t){var i=this.owner;if(!i||!i._uiProps.uiTransformComp)return!1;t.type=exports.SystemEventType.TOUCH_MOVE.toString(),t.touch=e,t.bubbles=!0,i.dispatchEvent(t)}function jv(e,t){var i=this.owner;i&&i._uiProps.uiTransformComp&&(e.getUILocation(Gv),i._uiProps.uiTransformComp.isHit(Gv,this)?t.type=exports.SystemEventType.TOUCH_END.toString():t.type=exports.SystemEventType.TOUCH_CANCEL.toString(),t.touch=e,t.bubbles=!0,i.dispatchEvent(t))}function Wv(e,t){var i=this.owner;i&&i._uiProps.uiTransformComp&&(t.type=exports.SystemEventType.TOUCH_CANCEL.toString(),t.touch=e,t.bubbles=!0,i.dispatchEvent(t))}function Yv(e){var t=this.owner;t&&t._uiProps.uiTransformComp&&(Gv=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Gv,this)&&(e.type=exports.SystemEventType.MOUSE_DOWN.toString(),e.bubbles=!0,t.dispatchEvent(e)))}function qv(e){var t=this.owner;if(t&&t._uiProps.uiTransformComp){if(Gv=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Gv,this))this._previousIn||(zv&&zv.eventProcessor.mouseListener&&(e.type=exports.SystemEventType.MOUSE_LEAVE,zv.dispatchEvent(e),zv.eventProcessor.mouseListener&&(zv.eventProcessor.mouseListener._previousIn=!1)),zv=t,e.type=exports.SystemEventType.MOUSE_ENTER.toString(),t.dispatchEvent(e),this._previousIn=!0),e.type=exports.SystemEventType.MOUSE_MOVE.toString(),e.bubbles=!0,t.dispatchEvent(e);else{if(!this._previousIn)return;e.type=exports.SystemEventType.MOUSE_LEAVE.toString(),t.dispatchEvent(e),this._previousIn=!1,zv=null}e.propagationStopped=!0}}function Qv(e){var t=this.owner;t&&t._uiProps.uiTransformComp&&(Gv=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Gv,this)&&(e.type=exports.SystemEventType.MOUSE_UP.toString(),e.bubbles=!0,t.dispatchEvent(e),e.propagationStopped=!0))}function Zv(e){var t=this.owner;t&&t._uiProps.uiTransformComp&&(Gv=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Gv,this)&&(e.type=exports.SystemEventType.MOUSE_WHEEL.toString(),e.bubbles=!0,t.dispatchEvent(e),e.propagationStopped=!0))}function Kv(e){var t=cc.MaskComponent;if(t)for(var i=0,n=e;n&&cc.Node.isNode(n);n=n.parent,++i)if(n.getComponent(t))return{index:i,node:n};return null}function Jv(e,t){if(!e._persistNode){if(e.eventProcessor.bubblingTargets)for(var i=0;i<t.length;++i)if(e.eventProcessor.bubblingTargets.hasEventListener(t[i]))return!0;if(e.eventProcessor.capturingTargets)for(var n=0;n<t.length;++n)if(e.eventProcessor.capturingTargets.hasEventListener(t[n]))return!0;return!1}return!0}var $v=function(){function e(t){Z(this,e),this.bubblingTargets=null,this.capturingTargets=null,this.touchListener=null,this.mouseListener=null,this._node=void 0,this._node=t}return J(e,[{key:"node",get:function(){return this._node}}]),J(e,[{key:"reattach",value:function(){if(this.touchListener){var e=this.touchListener.mask=Kv(this._node);this.mouseListener&&(this.mouseListener.mask=e)}else this.mouseListener&&(this.mouseListener.mask=Kv(this._node))}},{key:"destroy",value:function(){zv===this._node&&(zv=null),(this.touchListener||this.mouseListener)&&(Nv.removeListeners(this._node),this.touchListener&&(this.touchListener.owner=null,this.touchListener.mask=null,this.touchListener=null),this.mouseListener&&(this.mouseListener.owner=null,this.mouseListener.mask=null,this.mouseListener=null)),this.capturingTargets&&this.capturingTargets.clear(),this.bubblingTargets&&this.bubblingTargets.clear()}},{key:"on",value:function(e,t,i,n){return this._checknSetupSysEvent(e)?this._onDispatch(e,t,i,n):(this.bubblingTargets||(this.bubblingTargets=new gl),this.bubblingTargets.on(e,t,i))}},{key:"once",value:function(e,t,i,n){var r,o=this;(r=this._checknSetupSysEvent(e)&&n?this.capturingTargets=this.capturingTargets||new gl:this.bubblingTargets=this.bubblingTargets||new gl).on(e,t,i,!0),r.on(e,(function(){o.off(e,t,i)}),void 0,!0)}},{key:"off",value:function(e,t,i,n){var r=-1!==Uv.indexOf(e),o=!r&&-1!==Xv.indexOf(e);r||o?(this._offDispatch(e,t,i,n),r?this.touchListener&&!Jv(this._node,Uv)&&(Nv.removeListener(this.touchListener),this.touchListener=null):o&&this.mouseListener&&!Jv(this._node,Xv)&&(Nv.removeListener(this.mouseListener),this.mouseListener=null)):this.bubblingTargets&&this.bubblingTargets.off(e,t,i)}},{key:"emit",value:function(e,t,i,n,r,o){this.bubblingTargets&&this.bubblingTargets.emit(e,t,i,n,r,o)}},{key:"dispatchEvent",value:function(e){!function(e,t){var i,n=0;for(t.target=e,Lv.length=0,e.eventProcessor.getCapturingTargets(t.type,Lv),t.eventPhase=1,n=Lv.length-1;n>=0;--n)if((i=Lv[n]).eventProcessor.capturingTargets&&(t.currentTarget=i,i.eventProcessor.capturingTargets.emit(t.type,t,Lv),t.propagationStopped))return void(Lv.length=0);if(Lv.length=0,t.eventPhase=2,t.currentTarget=e,e.eventProcessor.capturingTargets&&e.eventProcessor.capturingTargets.emit(t.type,t),!t.propagationImmediateStopped&&e.eventProcessor.bubblingTargets&&e.eventProcessor.bubblingTargets.emit(t.type,t),!t.propagationStopped&&t.bubbles)for(e.eventProcessor.getBubblingTargets(t.type,Lv),t.eventPhase=3,n=0;n<Lv.length;++n)if((i=Lv[n]).eventProcessor.bubblingTargets&&(t.currentTarget=i,i.eventProcessor.bubblingTargets.emit(t.type,t),t.propagationStopped))return void(Lv.length=0);Lv.length=0}(this._node,e),Lv.length=0}},{key:"hasEventListener",value:function(e,t,i){var n=!1;return this.bubblingTargets&&(n=this.bubblingTargets.hasEventListener(e,t,i)),!n&&this.capturingTargets&&(n=this.capturingTargets.hasEventListener(e,t,i)),n}},{key:"targetOff",value:function(e){this.capturingTargets&&this.capturingTargets.removeAll(e),this.bubblingTargets&&this.bubblingTargets.removeAll(e),this.touchListener&&!Jv(this.node,Uv)&&(Nv.removeListener(this.touchListener),this.touchListener=null),this.mouseListener&&!Jv(this.node,Xv)&&(Nv.removeListener(this.mouseListener),this.mouseListener=null)}},{key:"getCapturingTargets",value:function(e,t){for(var i=this._node.parent;i;)i.eventProcessor.capturingTargets&&i.eventProcessor.capturingTargets.hasEventListener(e)&&t.push(i),i=i.parent}},{key:"getBubblingTargets",value:function(e,t){for(var i=this._node.parent;i;)i.eventProcessor.bubblingTargets&&i.eventProcessor.bubblingTargets.hasEventListener(e)&&t.push(i),i=i.parent}},{key:"_checknSetupSysEvent",value:function(e){var t=this,i=!1,n=!1;return-1!==Uv.indexOf(e)?(this.touchListener||(this.touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,owner:this._node,mask:Kv(this._node),onTouchBegan:Vv,onTouchMoved:Hv,onTouchEnded:jv,onTouchCancelled:Wv}),Nv.addListener(this.touchListener,this._node),i=!0),n=!0):-1!==Xv.indexOf(e)&&(this.mouseListener||(this.mouseListener=cc.EventListener.create({event:cc.EventListener.MOUSE,_previousIn:!1,owner:this._node,mask:Kv(this._node),onMouseDown:Yv,onMouseMove:qv,onMouseUp:Qv,onMouseScroll:Zv}),Nv.addListener(this.mouseListener,this._node),i=!0),n=!0),i&&!this._node.activeInHierarchy&&cc.director.getScheduler().schedule((function(){t._node.activeInHierarchy||Nv.pauseTarget(t._node)}),this._node,0,0,0,!1),n}},{key:"_onDispatch",value:function(e,t,i,n){if("boolean"==typeof i?(n=i,i=void 0):n=!!n,t){var r=null;return(r=n?this.capturingTargets=this.capturingTargets||new gl:this.bubblingTargets=this.bubblingTargets||new gl).hasEventListener(e,t,i)||r.on(e,t,i),t}cc.errorID(6800)}},{key:"_offDispatch",value:function(e,t,i,n){if("boolean"==typeof i?(n=i,i=void 0):n=!!n,t){var r=n?this.capturingTargets:this.bubblingTargets;r&&r.off(e,t,i)}else this.capturingTargets&&this.capturingTargets.removeAll(e),this.bubblingTargets&&this.bubblingTargets.removeAll(e)}}]),e}();cc.NodeEventProcessor=$v;ul.Flags.Destroying;var ey,ty,iy,ny,ry,oy,ay,sy,ly,cy=ul.Flags.Destroying,uy=ul.Flags.DontDestroy,hy=ul.Flags.Deactivating,py=(ul.Flags.Activating,new be("Node"));function fy(e){return e?"string"==typeof e?Je(e):e:(b(3804),null)}var _y,dy,my,vy,yy,gy,Ay,by,xy,Ty,Sy,Ey,Cy,wy,ky=qa("cc.BaseNode")((ly=sy=function(e){function t(e){var i;return Z(this,t),_e(i=re(this,te(t).call(this,e)),"_parent",iy,ne(i)),_e(i,"_children",ny,ne(i)),_e(i,"_active",ry,ne(i)),_e(i,"_components",oy,ne(i)),_e(i,"_prefab",ay,ne(i)),i._scene=null,i._activeInHierarchy=!1,i._id=py.getNewId(),i._name=void 0,i._eventProcessor=new $v(ne(i)),i._eventMask=0,i._siblingIndex=0,i._registerIfAttached=void 0,i._name=void 0!==e?e:"New Node",i}return ee(t,ul),J(t,[{key:"components",get:function(){return this._components}},{key:"_persistNode",get:function(){return(this._objFlags&uy)>0},set:function(e){e?this._objFlags|=uy:this._objFlags&=~uy}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"uuid",get:function(){return this._id}},{key:"children",get:function(){return this._children}},{key:"active",get:function(){return this._active},set:function(e){if(this._active!==e){this._active=e;var t=this._parent;if(t)t._activeInHierarchy&&cc.director._nodeActivator.activateNode(this,e)}}},{key:"activeInHierarchy",get:function(){return this._activeInHierarchy}},{key:"parent",get:function(){return this._parent},set:function(e){this.setParent(e)}},{key:"scene",get:function(){return this._scene}},{key:"eventProcessor",get:function(){return this._eventProcessor}}],[{key:"_setScene",value:function(e){e instanceof cc.Scene?e._scene=e:null==e._parent?cc.error("Node %s(%s) has not attached to a scene.",e.name,e.uuid):e._scene=e._parent._scene}},{key:"_findComponent",value:function(e,t){var i=t,n=e._components;if(i._sealed)for(var r=0;r<n.length;++r){var o=n[r];if(o.constructor===t)return o}else for(var a=0;a<n.length;++a){var s=n[a];if(s instanceof t)return s}return null}},{key:"_findComponents",value:function(e,t,i){var n=t,r=e._components;if(n._sealed)for(var o=0;o<r.length;++o){var a=r[o];a.constructor===t&&i.push(a)}else for(var s=0;s<r.length;++s){var l=r[s];l instanceof t&&i.push(l)}}},{key:"_findChildComponent",value:function(e,i){for(var n=0;n<e.length;++n){var r=e[n],o=t._findComponent(r,i);if(o)return o;if(r._children.length>0&&(o=t._findChildComponent(r._children,i)))return o}return null}},{key:"_findChildComponents",value:function(e,i,n){for(var r=0;r<e.length;++r){var o=e[r];t._findComponents(o,i,n),o._children.length>0&&t._findChildComponents(o._children,i,n)}}}]),J(t,[{key:"attr",value:function(e){Ue(this,e)}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._parent!==e){var i=this._parent,n=e;if(this._parent=n,this._siblingIndex=0,this._onSetParent(i,t),this.emit&&this.emit(exports.SystemEventType.PARENT_CHANGED,i),n&&(n._children.push(this),this._siblingIndex=n._children.length-1,n.emit&&n.emit(exports.SystemEventType.CHILD_ADDED,this)),i&&!(i._objFlags&cy)){var r=i._children.indexOf(this);i._children.splice(r,1),i._updateSiblingIndex(),i.emit&&i.emit(exports.SystemEventType.CHILD_REMOVED,this)}this._onHierarchyChanged(i)}}},{key:"getChildByUuid",value:function(e){if(!e)return cc.log("Invalid uuid"),null;for(var t=this._children,i=0,n=t.length;i<n;i++)if(t[i]._id===e)return t[i];return null}},{key:"getChildByName",value:function(e){if(!e)return cc.log("Invalid name"),null;for(var t=this._children,i=0,n=t.length;i<n;i++)if(t[i]._name===e)return t[i];return null}},{key:"getChildByPath",value:function(e){for(var t=e.split("/"),i=this,n=function(e){var n=t[e];if(0===n.length)return"continue";var r=i.children.find((function(e){return e.name===n}));if(!r)return{v:null};i=r},r=0;r<t.length;++r){var o=n(r);switch(o){case"continue":continue;default:if("object"===Q(o))return o.v}}return i}},{key:"addChild",value:function(e){cc.assertID(e,1606),cc.assertID(null===e._parent,1605),e.setParent(this)}},{key:"insertChild",value:function(e,t){e.parent=this,e.setSiblingIndex(t)}},{key:"getSiblingIndex",value:function(){return this._siblingIndex}},{key:"setSiblingIndex",value:function(e){if(this._parent)if(this._parent._objFlags&hy)b(3821);else{var t=this._parent._children;e=-1!==e?e:t.length-1;var i=t.indexOf(this);e!==i&&(t.splice(i,1),e<t.length?t.splice(e,0,this):t.push(this),this._parent._updateSiblingIndex(),this._onSiblingIndexChanged&&this._onSiblingIndexChanged(e))}}},{key:"walk",value:function(e,i){var n=1,r=null,o=null,a=0,s=t._stacks[t._stackId];s||(s=[],t._stacks.push(s)),t._stackId++,s.length=0,s[0]=this;for(var l=null,c=!1;n;)if(o=s[--n])if(!c&&e?e(o):c&&i&&i(o),s[n]=null,c){if(c=!1,r)if(r[++a])s[n]=r[a],n++;else if(l&&(s[n]=l,n++,c=!0,l._parent?(a=(r=l._parent._children).indexOf(l),l=l._parent):(l=null,r=null),a<0))break}else o._children.length>0?(l=o,r=o._children,a=0,s[n]=r[a],n++):(s[n]=o,n++,c=!0);s.length=0,t._stackId--}},{key:"removeFromParent",value:function(){this._parent&&this._parent.removeChild(this)}},{key:"removeChild",value:function(e){this._children.indexOf(e)>-1&&(e.parent=null)}},{key:"removeAllChildren",value:function(){for(var e=this._children,t=e.length-1;t>=0;t--){var i=e[t];i&&(i.parent=null)}this._children.length=0}},{key:"isChildOf",value:function(e){var t=this;do{if(t===e)return!0;t=t._parent}while(t);return!1}},{key:"getComponent",value:function(e){var i=fy(e);return i?t._findComponent(this,i):null}},{key:"getComponents",value:function(e){var i=fy(e),n=[];return i&&t._findComponents(this,i,n),n}},{key:"getComponentInChildren",value:function(e){var i=fy(e);return i?t._findChildComponent(this._children,i):null}},{key:"getComponentsInChildren",value:function(e){var i=fy(e),n=[];return i&&(t._findComponents(this,i,n),t._findChildComponents(this._children,i,n)),n}},{key:"addComponent",value:function(e){var t;if("string"==typeof e){if(!(t=Je(e)))return b(3807,e),cc._RF.peek()&&b(3808,e),null}else{if(!e)return b(3804),null;t=e}if("function"!=typeof t)return b(3809),null;if(!He(t,cc.Component))return b(3810),null;var i=t._requireComponent;if(i&&!this.getComponent(i)&&!this.addComponent(i))return null;var n=new t;return n.node=this,this._components.push(n),this._activeInHierarchy&&cc.director._nodeActivator.activateComp(n),n}},{key:"removeComponent",value:function(e){if(e){var t=null;(t=e instanceof sp?e:this.getComponent(e))&&t.destroy()}else b(3813)}},{key:"on",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(e){case exports.SystemEventType.TRANSFORM_CHANGED:this._eventMask|=1}this._eventProcessor.on(e,t,i,n)}},{key:"off",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._eventProcessor.off(e,t,i,n);var r=this._eventProcessor.hasEventListener(e);if(!r)switch(e){case exports.SystemEventType.TRANSFORM_CHANGED:this._eventMask&=-2}}},{key:"once",value:function(e,t,i,n){this._eventProcessor.once(e,t,i,n)}},{key:"emit",value:function(e,t,i,n,r,o){this._eventProcessor.emit(e,t,i,n,r,o)}},{key:"dispatchEvent",value:function(e){this._eventProcessor.dispatchEvent(e)}},{key:"hasEventListener",value:function(e,t,i){return this._eventProcessor.hasEventListener(e,t,i)}},{key:"targetOff",value:function(e){this._eventProcessor.targetOff(e),1&this._eventMask&&!this._eventProcessor.hasEventListener(exports.SystemEventType.TRANSFORM_CHANGED)&&(this._eventMask&=-2)}},{key:"destroy",value:function(){return!!ae(te(t.prototype),"destroy",this).call(this)&&(this._activeInHierarchy&&this._disableChildComps(),!0)}},{key:"destroyAllChildren",value:function(){for(var e=this._children,t=0;t<e.length;++t)e[t].destroy()}},{key:"_removeComponent",value:function(e){if(e){if(!(this._objFlags&cy)){var t=this._components.indexOf(e);-1!==t?this._components.splice(t,1):e.node!==this&&b(3815)}}else b(3814)}},{key:"_updateSiblingIndex",value:function(){for(var e=0;e<this._children.length;++e)this._children[e]._siblingIndex=e}},{key:"_onSetParent",value:function(e){this._parent&&(null!=e&&e._scene===this._parent._scene||null==this._parent._scene||this.walk((function(e){t._setScene(e)})))}},{key:"_onPostActivated",value:function(e){}},{key:"_onBatchRestored",value:function(){}},{key:"_onBatchCreated",value:function(){this._parent&&(this._siblingIndex=this._parent.children.indexOf(this))}},{key:"_onPreDestroy",value:function(){this._onPreDestroyBase()}},{key:"_onHierarchyChanged",value:function(e){return this._onHierarchyChangedBase(e)}},{key:"_instantiate",value:function(e){e||(e=cc.instantiate._clone(this,this));var t=this._prefab;t&&this===t.root&&t.sync;return e._parent=null,e._onBatchRestored(),e}},{key:"_onHierarchyChangedBase",value:function(e){var t=this._parent;!this._persistNode||t instanceof cc.Scene||cc.game.removePersistRootNode(this);var i=this._active&&!(!t||!t._activeInHierarchy);this._activeInHierarchy!==i&&cc.director._nodeActivator.activateNode(this,i)}},{key:"_onPreDestroyBase",value:function(){this._objFlags|=cy;var e=this._parent,t=!!e&&0!=(e._objFlags&cy);if(this._persistNode&&cc.game.removePersistRootNode(this),!t&&e){this.emit(exports.SystemEventType.PARENT_CHANGED,this);var i=e._children.indexOf(this);e._children.splice(i,1),this._siblingIndex=0,e.emit&&e.emit(exports.SystemEventType.CHILD_REMOVED,this)}this.emit(exports.SystemEventType.NODE_DESTROYED,this),this._eventProcessor.destroy();for(var n=this._children,r=0;r<n.length;++r)n[r]._destroyImmediate();for(var o=this._components,a=0;a<o.length;++a)o[a]._destroyImmediate();return t}},{key:"_disableChildComps",value:function(){for(var e=this._components,t=0;t<e.length;++t){var i=e[t];i._enabled&&cc.director._compScheduler.disableComp(i)}for(var n=this._children,r=0;r<n.length;++r){var o=n[r];o._active&&o._disableChildComps()}}}]),t}(),sy.idGenerator=py,sy._stacks=[[]],sy._stackId=0,de((ty=ly).prototype,"_persistNode",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"_persistNode"),ty.prototype),de(ty.prototype,"name",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"name"),ty.prototype),de(ty.prototype,"uuid",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"uuid"),ty.prototype),de(ty.prototype,"children",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"children"),ty.prototype),de(ty.prototype,"active",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"active"),ty.prototype),de(ty.prototype,"activeInHierarchy",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"activeInHierarchy"),ty.prototype),de(ty.prototype,"parent",[Qa],Object.getOwnPropertyDescriptor(ty.prototype,"parent"),ty.prototype),iy=de(ty.prototype,"_parent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ny=de(ty.prototype,"_children",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ry=de(ty.prototype,"_active",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oy=de(ty.prototype,"_components",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ay=de(ty.prototype,"_prefab",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ey=ty))||ey;cc._BaseNode=ky;var Oy=new Oi,Ry=new Oi,Fy=new Qi,Iy=new Qi,My=new Qi,Py=new Qi(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),Dy=new nn,By=(_y=qa("cc.UITransformComponent"),dy=as("i18n:cc.UITransformComponent"),my=ts(110),vy=es("UI/UITransform"),yy=Qa({displayOrder:0,tooltip:"内容尺寸"}),gy=Qa({displayOrder:1,tooltip:"锚点位置"}),Ay=Qa({tooltip:"渲染排序优先级"}),_y(by=dy(by=my(by=vy(by=Ja((wy=Cy=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_priority",Ty,ne(i)),i._canvas=null,_e(i,"_contentSize",Sy,ne(i)),_e(i,"_anchorPoint",Ey,ne(i)),i}return ee(t,sp),J(t,[{key:"__preload",value:function(){this.node._uiProps.uiTransformComp=this}},{key:"onEnable",value:function(){this._updateVisibility(),this.node.on(exports.SystemEventType.PARENT_CHANGED,this._parentChanged,this),this._sortSiblings()}},{key:"onDisable",value:function(){this.node.off(exports.SystemEventType.PARENT_CHANGED,this._parentChanged,this),this._canvas=null}},{key:"onDestroy",value:function(){this.node._uiProps.uiTransformComp=null}},{key:"setContentSize",value:function(e,t){var i=this._contentSize;if(void 0===t){if((e=e).width===i.width&&e.height===i.height)return;i.width=e.width,i.height=e.height}else{if(e===i.width&&t===i.height)return;i.width=e,i.height=t}this.node.emit(exports.SystemEventType.SIZE_CHANGED)}},{key:"setAnchorPoint",value:function(e,t){var i=this._anchorPoint;if(void 0===t){if((e=e).x===i.x&&e.y===i.y)return;i.x=e.x,i.y=e.y}else{if(e===i.x&&t===i.y)return;i.x=e,i.y=t}this.node.emit(exports.SystemEventType.ANCHOR_CHANGED,this._anchorPoint)}},{key:"isHit",value:function(e,t){var i=this._contentSize.width,n=this._contentSize.height,r=Oy,o=Ry,a=this._canvas;if(a){a.node.getWorldRT(Fy);var s=Fy.m12,l=Fy.m13,c=cc.visibleRect.center;if(Fy.m12=c.x-(Fy.m00*s+Fy.m04*l),Fy.m13=c.y-(Fy.m01*s+Fy.m05*l),Qi.invert(Fy,Fy),Oi.transformMat4(r,e,Fy),this.node.getWorldMatrix(My),Qi.invert(Fy,My),Qi.strictEquals(Fy,Py))return!1;if(Oi.transformMat4(o,r,Fy),o.x+=this._anchorPoint.x*i,o.y+=this._anchorPoint.y*n,o.x>=0&&o.y>=0&&o.x<=i&&o.y<=n){if(t&&t.mask){for(var u=t.mask,h=this.node,p=0;h&&p<u.index;++p,h=h.parent);if(h===u.node){var f=h.getComponent(cc.MaskComponent);return!f||!f.enabledInHierarchy||f.isHit(r)}return t.mask=null,!0}return!0}return!1}}},{key:"convertToNodeSpaceAR",value:function(e,t){return this.node.getWorldMatrix(My),Qi.invert(Fy,My),t||(t=new Mi),Mi.transformMat4(t,e,Fy)}},{key:"convertToWorldSpaceAR",value:function(e,t){return this.node.getWorldMatrix(My),t||(t=new Mi),Mi.transformMat4(t,e,My)}},{key:"getBoundingBox",value:function(){Qi.fromRTS(Iy,this.node.getRotation(),this.node.getPosition(),this.node.getScale());var e=this._contentSize.width,t=this._contentSize.height,i=new nn(-this._anchorPoint.x*e,-this._anchorPoint.y*t,e,t);return i.transformMat4(Iy),i}},{key:"getBoundingBoxToWorld",value:function(){return this.node.parent?(this.node.parent.getWorldMatrix(My),this.getBoundingBoxTo(My)):this.getBoundingBox()}},{key:"getBoundingBoxTo",value:function(e){Qi.fromRTS(Iy,this.node.getRotation(),this.node.getPosition(),this.node.getScale());var i=this._contentSize.width,n=this._contentSize.height,r=new nn(-this._anchorPoint.x*i,-this._anchorPoint.y*n,i,n);if(Qi.multiply(My,e,Iy),r.transformMat4(My),!this.node.children)return r;for(var o,a=fe(this.node.children);!(o=a()).done;){var s=o.value;if(s&&s.active){var l=s.getComponent(t);if(l){var c=l.getBoundingBoxTo(e);c&&nn.union(r,r,c)}}}return r}},{key:"getComputeAABB",value:function(e){var t=this._contentSize.width,i=this._contentSize.height;Dy.set(-this._anchorPoint.x*t,-this._anchorPoint.y*i,t,i),Dy.transformMat4(this.node.worldMatrix);var n=Dy.x+.5*Dy.width,r=Dy.y+.5*Dy.height,o=this.node.worldPosition.z,a=Dy.width/2,s=Dy.height/2;if(null==e)return new ca(n,r,o,a,s,.001);ca.set(e,n,r,o,a,s,.001)}},{key:"_updateVisibility",value:function(){for(var e=this.node;e;){if(e){var t=e.getComponent("cc.CanvasComponent");if(t){this._canvas=t;break}}e=e.parent}}},{key:"_parentChanged",value:function(e){this._canvas&&this._canvas.node===this.node||this._sortSiblings()}},{key:"_sortSiblings",value:function(){var e=this.node.parent&&this.node.parent.children;e&&(e.sort((function(e,t){var i=e._uiProps.uiTransformComp,n=t._uiProps.uiTransformComp,r=(i?i.priority:0)-(n?n.priority:0);return 0===r?e.getSiblingIndex()-t.getSiblingIndex():r})),this.node.parent._updateSiblingIndex())}},{key:"contentSize",get:function(){return this._contentSize},set:function(e){this._contentSize.equals(e)||(this._contentSize.set(e),this.node.emit(exports.SystemEventType.SIZE_CHANGED))}},{key:"width",get:function(){return this._contentSize.width},set:function(e){this._contentSize.width!==e&&(this._contentSize.width=e,this.node.emit(exports.SystemEventType.SIZE_CHANGED))}},{key:"height",get:function(){return this._contentSize.height},set:function(e){this.contentSize.height!==e&&(this._contentSize.height=e,this.node.emit(exports.SystemEventType.SIZE_CHANGED))}},{key:"anchorPoint",get:function(){return this._anchorPoint},set:function(e){this._anchorPoint.equals(e)||(this._anchorPoint.set(e),this.node.emit(exports.SystemEventType.ANCHOR_CHANGED,this._anchorPoint))}},{key:"anchorX",get:function(){return this._anchorPoint.x},set:function(e){this._anchorPoint.x!==e&&(this._anchorPoint.x=e,this.node.emit(exports.SystemEventType.ANCHOR_CHANGED,this._anchorPoint))}},{key:"anchorY",get:function(){return this._anchorPoint.y},set:function(e){this._anchorPoint.y!==e&&(this._anchorPoint.y=e,this.node.emit(exports.SystemEventType.ANCHOR_CHANGED,this._anchorPoint))}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority!==e&&(this._canvas&&this._canvas.node===this.node?cc.warn(9200):(this._priority=e,this._sortSiblings()))}},{key:"visibility",get:function(){return this._canvas?this._canvas.visibility:-1}}]),t}(),Cy.EventType=exports.SystemEventType,de((xy=wy).prototype,"contentSize",[yy],Object.getOwnPropertyDescriptor(xy.prototype,"contentSize"),xy.prototype),de(xy.prototype,"anchorPoint",[gy],Object.getOwnPropertyDescriptor(xy.prototype,"anchorPoint"),xy.prototype),de(xy.prototype,"priority",[Ay],Object.getOwnPropertyDescriptor(xy.prototype,"priority"),xy.prototype),Ty=de(xy.prototype,"_priority",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sy=de(xy.prototype,"_contentSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new en(100,100)}}),Ey=de(xy.prototype,"_anchorPoint",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(.5,.5)}}),by=xy))||by)||by)||by)||by)||by);cc.UITransformComponent=By;var Ny,Ly,zy,Gy,Uy,Xy,Vy,Hy,jy,Wy,Yy,qy=function(){function e(t){Z(this,e),this.uiComp=null,this.opacity=1,this._uiTransformComp=null,this._node=void 0,this._node=t}return J(e,[{key:"uiTransformComp",get:function(){return this._uiTransformComp||(this._uiTransformComp=this._node.getComponent(By)),this._uiTransformComp},set:function(e){this._uiTransformComp=e}}]),e}(),Qy=new Mi,Zy=new Xi,Ky=new Xi,Jy=new Array(10),$y=new Xi,eg=new zi,tg=new zi,ig=new Qi,ng=new Map,rg=(Ny=qa("cc.Node"),Ly=Qa({type:Mi}),Ny((Yy=Wy=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._uiProps=new qy(ne(i)),i._static=!1,i._pos=new Mi,i._rot=new Xi,i._scale=new Mi(1,1,1),i._mat=new Qi,_e(i,"_lpos",Uy,ne(i)),_e(i,"_lrot",Xy,ne(i)),_e(i,"_lscale",Vy,ne(i)),_e(i,"_layer",Hy,ne(i)),_e(i,"_euler",jy,ne(i)),i._dirtyFlags=sh.NONE,i._eulerDirty=!1,i}return ee(t,ky),J(t,[{key:"setParent",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i&&this.updateWorldTransform(),ae(te(t.prototype),"setParent",this).call(this,e,i)}},{key:"_onSetParent",value:function(e,i){if(ae(te(t.prototype),"_onSetParent",this).call(this,e,i),i){var n=this._parent;n?(n.updateWorldTransform(),Qi.multiply(ig,Qi.invert(ig,n._mat),this._mat),Qi.toRTS(ig,this._lrot,this._lpos,this._lscale)):(Mi.copy(this._lpos,this._pos),Xi.copy(this._lrot,this._rot),Mi.copy(this._lscale,this._scale)),this._eulerDirty=!0}this.invalidateChildren(sh.TRS)}},{key:"_onBatchCreated",value:function(){ae(te(t.prototype),"_onBatchCreated",this).call(this),ng.set(this._id,sh.TRS),this._dirtyFlags=sh.TRS;for(var e=this._children.length,i=0;i<e;++i)this._children[i]._onBatchCreated()}},{key:"_onBatchRestored",value:function(){this._onBatchCreated()}},{key:"_onBeforeSerialize",value:function(){this.eulerAngles}},{key:"translate",value:function(e,t){var i=t||ah.LOCAL;if(i===ah.LOCAL)Mi.transformQuat(Qy,e,this._lrot),this._lpos.x+=Qy.x,this._lpos.y+=Qy.y,this._lpos.z+=Qy.z;else if(i===ah.WORLD)if(this._parent){Xi.invert(Zy,this._parent.worldRotation),Mi.transformQuat(Qy,e,Zy);var n=this.worldScale;this._lpos.x+=Qy.x/n.x,this._lpos.y+=Qy.y/n.y,this._lpos.z+=Qy.z/n.z}else this._lpos.x+=e.x,this._lpos.y+=e.y,this._lpos.z+=e.z;this.invalidateChildren(sh.POSITION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.POSITION)}},{key:"rotate",value:function(e,t){var i=t||ah.LOCAL;if(Xi.normalize(Zy,e),i===ah.LOCAL)Xi.multiply(this._lrot,this._lrot,Zy);else if(i===ah.WORLD){var n=this.worldRotation;Xi.multiply(Ky,Zy,n),Xi.invert(Zy,n),Xi.multiply(Ky,Zy,Ky),Xi.multiply(this._lrot,this._lrot,Ky)}this._eulerDirty=!0,this.invalidateChildren(sh.ROTATION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.ROTATION)}},{key:"lookAt",value:function(e,t){this.getWorldPosition(Qy),Mi.subtract(Qy,Qy,e),Mi.normalize(Qy,Qy),Xi.fromViewUp(Zy,Qy,t),this.setWorldRotation(Zy)}},{key:"invalidateChildren",value:function(e){if((this._dirtyFlags&this.hasChangedFlags&e)!==e){this._dirtyFlags|=e,ng.set(this._id,this.hasChangedFlags|e),e|=sh.POSITION;for(var t=this._children.length,i=0;i<t;++i){var n=this._children[i];n.isValid&&n.invalidateChildren(e)}}}},{key:"updateWorldTransform",value:function(){if(this._dirtyFlags){for(var e,t=this,i=0;t&&t._dirtyFlags;)Jy[i++]=t,t=t._parent;for(var n=0;i;)n|=(e=Jy[--i])._dirtyFlags,t?(n&sh.POSITION&&(Mi.transformMat4(e._pos,e._lpos,t._mat),e._mat.m12=e._pos.x,e._mat.m13=e._pos.y,e._mat.m14=e._pos.z),n&sh.RS&&(Qi.fromRTS(e._mat,e._lrot,e._lpos,e._lscale),Qi.multiply(e._mat,t._mat,e._mat),n&sh.ROTATION&&Xi.multiply(e._rot,t._rot,e._lrot),zi.fromQuat(eg,Xi.conjugate($y,e._rot)),zi.multiplyMat4(eg,eg,e._mat),e._scale.x=eg.m00,e._scale.y=eg.m04,e._scale.z=eg.m08)):(n&sh.POSITION&&(Mi.copy(e._pos,e._lpos),e._mat.m12=e._pos.x,e._mat.m13=e._pos.y,e._mat.m14=e._pos.z),n&sh.RS&&(n&sh.ROTATION&&Xi.copy(e._rot,e._lrot),n&sh.SCALE&&Mi.copy(e._scale,e._lscale),Qi.fromRTS(e._mat,e._rot,e._pos,e._scale))),e._dirtyFlags=sh.NONE,t=e}}},{key:"setPosition",value:function(e,t,i){void 0===t||void 0===i?Mi.copy(this._lpos,e):Mi.set(this._lpos,e,t,i),this.invalidateChildren(sh.POSITION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.POSITION)}},{key:"getPosition",value:function(e){return e?Mi.set(e,this._lpos.x,this._lpos.y,this._lpos.z):Mi.copy(new Mi,this._lpos)}},{key:"setRotation",value:function(e,t,i,n){void 0===t||void 0===i||void 0===n?Xi.copy(this._lrot,e):Xi.set(this._lrot,e,t,i,n),this._eulerDirty=!0,this.invalidateChildren(sh.ROTATION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.ROTATION)}},{key:"setRotationFromEuler",value:function(e,t,i){Mi.set(this._euler,e,t,i),Xi.fromEuler(this._lrot,e,t,i),this._eulerDirty=!1,this.invalidateChildren(sh.ROTATION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.ROTATION)}},{key:"getRotation",value:function(e){return e?Xi.set(e,this._lrot.x,this._lrot.y,this._lrot.z,this._lrot.w):Xi.copy(new Xi,this._lrot)}},{key:"setScale",value:function(e,t,i){void 0===t||void 0===i?Mi.copy(this._lscale,e):Mi.set(this._lscale,e,t,i),this.invalidateChildren(sh.SCALE),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.SCALE)}},{key:"getScale",value:function(e){return e?Mi.set(e,this._lscale.x,this._lscale.y,this._lscale.z):Mi.copy(new Mi,this._lscale)}},{key:"inverseTransformPoint",value:function(e,t){Mi.copy(e,t);for(var i=this,n=0;i._parent;)Jy[n++]=i,i=i._parent;for(;n>=0;)Mi.transformInverseRTS(e,e,i._lrot,i._lpos,i._lscale),i=Jy[--n];return e}},{key:"setWorldPosition",value:function(e,t,i){void 0===t||void 0===i?Mi.copy(this._pos,e):Mi.set(this._pos,e,t,i);var n=this._parent,r=this._lpos;n?(n.updateWorldTransform(),Mi.transformMat4(r,this._pos,Qi.invert(ig,n._mat))):Mi.copy(r,this._pos),this.invalidateChildren(sh.POSITION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.POSITION)}},{key:"getWorldPosition",value:function(e){return this.updateWorldTransform(),e?Mi.copy(e,this._pos):Mi.copy(new Mi,this._pos)}},{key:"setWorldRotation",value:function(e,t,i,n){void 0===t||void 0===i||void 0===n?Xi.copy(this._rot,e):Xi.set(this._rot,e,t,i,n),this._parent?(this._parent.updateWorldTransform(),Xi.multiply(this._lrot,Xi.conjugate(this._lrot,this._parent._rot),this._rot)):Xi.copy(this._lrot,this._rot),this._eulerDirty=!0,this.invalidateChildren(sh.ROTATION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.ROTATION)}},{key:"setWorldRotationFromEuler",value:function(e,t,i){Xi.fromEuler(this._rot,e,t,i),this._parent?(this._parent.updateWorldTransform(),Xi.multiply(this._lrot,Xi.conjugate(this._lrot,this._parent._rot),this._rot)):Xi.copy(this._lrot,this._rot),this._eulerDirty=!0,this.invalidateChildren(sh.ROTATION),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.ROTATION)}},{key:"getWorldRotation",value:function(e){return this.updateWorldTransform(),e?Xi.copy(e,this._rot):Xi.copy(new Xi,this._rot)}},{key:"setWorldScale",value:function(e,t,i){void 0===t||void 0===i?Mi.copy(this._scale,e):Mi.set(this._scale,e,t,i);var n=this._parent;n?(n.updateWorldTransform(),zi.fromQuat(eg,Xi.conjugate($y,n._rot)),zi.multiplyMat4(eg,eg,n._mat),tg.m00=this._scale.x,tg.m04=this._scale.y,tg.m08=this._scale.z,zi.multiply(eg,tg,zi.invert(eg,eg)),this._lscale.x=Mi.set(Qy,eg.m00,eg.m01,eg.m02).length(),this._lscale.y=Mi.set(Qy,eg.m03,eg.m04,eg.m05).length(),this._lscale.z=Mi.set(Qy,eg.m06,eg.m07,eg.m08).length()):Mi.copy(this._lscale,this._scale),this.invalidateChildren(sh.SCALE),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.SCALE)}},{key:"getWorldScale",value:function(e){return this.updateWorldTransform(),e?Mi.copy(e,this._scale):Mi.copy(new Mi,this._scale)}},{key:"getWorldMatrix",value:function(e){return this.updateWorldTransform(),e||(e=new Qi),Qi.copy(e,this._mat)}},{key:"getWorldRS",value:function(e){return this.updateWorldTransform(),e||(e=new Qi),Qi.copy(e,this._mat),e.m12=0,e.m13=0,e.m14=0,e}},{key:"getWorldRT",value:function(e){return this.updateWorldTransform(),e||(e=new Qi),Qi.fromRT(e,this._rot,this._pos)}},{key:"setRTS",value:function(e,t,i){var n=0;e&&(n|=sh.ROTATION,void 0!==e.w?(Xi.copy(this._lrot,e),this._eulerDirty=!0):(Mi.copy(this._euler,e),Xi.fromEuler(this._lrot,e.x,e.y,e.z),this._eulerDirty=!1)),t&&(Mi.copy(this._lpos,t),n|=sh.POSITION),i&&(Mi.copy(this._lscale,i),n|=sh.SCALE),n&&(this.invalidateChildren(n),1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,n))}},{key:"getAnchorPoint",value:function(e){return e||(e=new Oi),e.set(this._uiProps.uiTransformComp.anchorPoint),e}},{key:"setAnchorPoint",value:function(e,t){this._uiProps.uiTransformComp.setAnchorPoint(e,t)}},{key:"getContentSize",value:function(e){return e||(e=new en),e.set(this._uiProps.uiTransformComp.contentSize),e}},{key:"setContentSize",value:function(e,t){this._uiProps.uiTransformComp.setContentSize(e,t)}},{key:"pauseSystemEvents",value:function(e){Nv.pauseTarget(this,e)}},{key:"resumeSystemEvents",value:function(e){Nv.resumeTarget(this,e)}},{key:"_onPostActivated",value:function(e){e?(Nv.resumeTarget(this),this.eventProcessor.reattach()):Nv.pauseTarget(this)}},{key:"position",get:function(){return this._lpos},set:function(e){this.setPosition(e)}},{key:"worldPosition",get:function(){return this.updateWorldTransform(),this._pos},set:function(e){this.setWorldPosition(e)}},{key:"rotation",get:function(){return this._lrot},set:function(e){this.setRotation(e)}},{key:"eulerAngles",set:function(e){this.setRotationFromEuler(e.x,e.y,e.z)},get:function(){return this._eulerDirty&&(Xi.toEuler(this._euler,this._lrot),this._eulerDirty=!1),this._euler}},{key:"worldRotation",get:function(){return this.updateWorldTransform(),this._rot},set:function(e){this.setWorldRotation(e)}},{key:"scale",get:function(){return this._lscale},set:function(e){this.setScale(e)}},{key:"worldScale",get:function(){return this.updateWorldTransform(),this._scale},set:function(e){this.setWorldScale(e)}},{key:"matrix",set:function(e){Qi.toRTS(e,this._lrot,this._lpos,this._lscale),this.invalidateChildren(sh.TRS),this._eulerDirty=!0,1&this._eventMask&&this.emit(exports.SystemEventType.TRANSFORM_CHANGED,sh.TRS)}},{key:"worldMatrix",get:function(){return this.updateWorldTransform(),this._mat}},{key:"forward",get:function(){return Mi.transformQuat(new Mi,Mi.FORWARD,this.worldRotation)},set:function(e){var t=e.length();Mi.multiplyScalar(Qy,e,-1/t),Xi.fromViewUp(Zy,Qy),this.setWorldRotation(Zy)}},{key:"layer",set:function(e){this._layer=e},get:function(){return this._layer}},{key:"hasChangedFlags",get:function(){return ng.get(this._id)||0},set:function(e){ng.set(this._id,e)}},{key:"width",get:function(){return this._uiProps.uiTransformComp.width},set:function(e){this._uiProps.uiTransformComp.width=e}},{key:"height",get:function(){return this._uiProps.uiTransformComp.height},set:function(e){this._uiProps.uiTransformComp.height=e}},{key:"anchorX",get:function(){return this._uiProps.uiTransformComp.anchorX},set:function(e){this._uiProps.uiTransformComp.anchorX=e}},{key:"anchorY",get:function(){return this._uiProps.uiTransformComp.anchorY},set:function(e){this._uiProps.uiTransformComp.anchorY=e}}],[{key:"isNode",value:function(e){return e instanceof t&&(e.constructor===t||!(e instanceof cc.Scene))}}]),t}(),Wy.bookOfChange=ng,Wy.EventType=exports.SystemEventType,Wy.NodeSpace=ah,Wy.TransformDirtyBit=sh,Wy.TransformBit=sh,Uy=de((Gy=Yy).prototype,"_lpos",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),Xy=de(Gy.prototype,"_lrot",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Xi}}),Vy=de(Gy.prototype,"_lscale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(1,1,1)}}),Hy=de(Gy.prototype,"_layer",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ec.Enum.DEFAULT}}),jy=de(Gy.prototype,"_euler",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),de(Gy.prototype,"eulerAngles",[Ly],Object.getOwnPropertyDescriptor(Gy.prototype,"eulerAngles"),Gy.prototype),de(Gy.prototype,"layer",[Qa],Object.getOwnPropertyDescriptor(Gy.prototype,"layer"),Gy.prototype),zy=Gy))||zy);cc.Node=rg;var og,ag,sg,lg,cg,ug,hg,pg,fg,_g,dg,mg,vg,yg,gg,Ag,bg,xg,Tg,Sg,Eg,Cg,wg,kg,Og,Rg,Fg,Ig,Mg,Pg,Dg,Bg,Ng,Lg,zg,Gg,Ug,Xg,Vg=function(){function e(t){Z(this,e),this._enabled=!0,this._skyColor=Float32Array.from([.2,.5,.8,1]),this._skyIllum=e.SKY_ILLUM,this._groundAlbedo=Float32Array.from([.2,.2,.2,1]),this._scene=void 0,this._scene=t}return J(e,[{key:"enabled",set:function(e){this._enabled=e},get:function(){return this._enabled}},{key:"skyColor",get:function(){return this._skyColor},set:function(e){this._skyColor=e}},{key:"skyIllum",set:function(e){this._skyIllum=e},get:function(){return this._skyIllum}},{key:"groundAlbedo",get:function(){return this._groundAlbedo},set:function(e){this._groundAlbedo=e}}]),J(e,[{key:"update",value:function(){}}]),e}();Vg.SUN_ILLUM=65e3,Vg.SKY_ILLUM=2e4;var Hg=new Mi(0,1,0),jg=new Mi,Wg=new Xi,Yg=(og=qa("cc.AmbientInfo"),ag=Qa({type:on}),sg=Qa({type:on}),og((ug=de((cg=function(){function e(){Z(this,e),_e(this,"_skyColor",ug,this),_e(this,"_skyIllum",hg,this),_e(this,"_groundAlbedo",pg,this),this._resource=null}return J(e,[{key:"skyColor",set:function(e){this._skyColor.set(e),this._resource&&on.toArray(this._resource.skyColor,this.skyColor)},get:function(){return this._skyColor}},{key:"skyIllum",set:function(e){this._skyIllum=e,this._resource&&(this._resource.skyIllum=this.skyIllum)},get:function(){return this._skyIllum}},{key:"groundAlbedo",set:function(e){this._groundAlbedo.set(e),this._resource&&Mi.toArray(this._resource.groundAlbedo,this.groundAlbedo)},get:function(){return this._groundAlbedo}},{key:"renderScene",set:function(e){this._resource=e.ambient,this.skyColor=this._skyColor,this.skyIllum=this._skyIllum,this.groundAlbedo=this._groundAlbedo}}]),e}()).prototype,"_skyColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(51,128,204,1)}}),hg=de(cg.prototype,"_skyIllum",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Vg.SKY_ILLUM}}),pg=de(cg.prototype,"_groundAlbedo",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(51,51,51,255)}}),de(cg.prototype,"skyColor",[ag],Object.getOwnPropertyDescriptor(cg.prototype,"skyColor"),cg.prototype),de(cg.prototype,"skyIllum",[ls],Object.getOwnPropertyDescriptor(cg.prototype,"skyIllum"),cg.prototype),de(cg.prototype,"groundAlbedo",[sg],Object.getOwnPropertyDescriptor(cg.prototype,"groundAlbedo"),cg.prototype),lg=cg))||lg);cc.AmbientInfo=Yg;var qg=(fg=qa("cc.SkyboxInfo"),_g=Qa(Fu),dg=Qa({type:It}),mg=Qa({type:It}),vg=Qa({type:Fu}),yg=Qa({type:It}),fg((bg=de((Ag=function(){function e(){Z(this,e),_e(this,"_envmap",bg,this),_e(this,"_isRGBE",xg,this),_e(this,"_enabled",Tg,this),_e(this,"_useIBL",Sg,this),this._resource=null}return J(e,[{key:"enabled",set:function(e){this._enabled=e,this._resource&&(this._resource.enabled=this._enabled)},get:function(){return this._enabled}},{key:"useIBL",set:function(e){this._useIBL=e,this._resource&&(this._resource.useIBL=this._useIBL)},get:function(){return this._useIBL}},{key:"envmap",set:function(e){this._envmap=e,this._resource&&(this._resource.envmap=this._envmap)},get:function(){return this._envmap}},{key:"isRGBE",set:function(e){this._isRGBE=e,this._resource&&(this._resource.isRGBE=this._isRGBE)},get:function(){return this._isRGBE}},{key:"renderScene",set:function(e){this._resource=e.skybox,this.isRGBE=this._isRGBE,this.envmap=this._envmap,this.enabled=this._enabled,this.useIBL=this._useIBL}}]),e}()).prototype,"_envmap",[_g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xg=de(Ag.prototype,"_isRGBE",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tg=de(Ag.prototype,"_enabled",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sg=de(Ag.prototype,"_useIBL",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(Ag.prototype,"enabled",[dg],Object.getOwnPropertyDescriptor(Ag.prototype,"enabled"),Ag.prototype),de(Ag.prototype,"useIBL",[mg],Object.getOwnPropertyDescriptor(Ag.prototype,"useIBL"),Ag.prototype),de(Ag.prototype,"envmap",[vg],Object.getOwnPropertyDescriptor(Ag.prototype,"envmap"),Ag.prototype),de(Ag.prototype,"isRGBE",[yg],Object.getOwnPropertyDescriptor(Ag.prototype,"isRGBE"),Ag.prototype),gg=Ag))||gg);cc.SkyboxInfo=qg;var Qg=(Eg=qa("cc.PlanarShadowInfo"),Cg=Qa({type:It}),wg=Qa({type:Mi}),kg=Qa({type:Ft}),Og=Qa({type:on}),Eg((Ig=de((Fg=function(){function e(){Z(this,e),_e(this,"_enabled",Ig,this),_e(this,"_normal",Mg,this),_e(this,"_distance",Pg,this),_e(this,"_shadowColor",Dg,this),this._resource=null}return J(e,[{key:"setPlaneFromNode",value:function(e){e.getWorldRotation(Wg),this.normal=Mi.transformQuat(jg,Hg,Wg),e.getWorldPosition(jg),this.distance=Mi.dot(this._normal,jg)}},{key:"enabled",set:function(e){this._enabled=e,this._resource&&(this._resource.enabled=e)},get:function(){return this._enabled}},{key:"normal",set:function(e){Mi.copy(this._normal,e),this._resource&&(this._resource.normal=e)},get:function(){return this._normal}},{key:"distance",set:function(e){this._distance=e,this._resource&&(this._resource.distance=e)},get:function(){return this._distance}},{key:"shadowColor",set:function(e){this._shadowColor.set(e),this._resource&&(this._resource.shadowColor=e)},get:function(){return this._shadowColor}},{key:"renderScene",set:function(e){this._resource=e.planarShadows,this.normal=this._normal,this.distance=this._distance,this.shadowColor=this._shadowColor,this.enabled=this._enabled}}]),e}()).prototype,"_enabled",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mg=de(Fg.prototype,"_normal",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(0,1,0)}}),Pg=de(Fg.prototype,"_distance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dg=de(Fg.prototype,"_shadowColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(0,0,0,76)}}),de(Fg.prototype,"enabled",[Cg],Object.getOwnPropertyDescriptor(Fg.prototype,"enabled"),Fg.prototype),de(Fg.prototype,"normal",[wg],Object.getOwnPropertyDescriptor(Fg.prototype,"normal"),Fg.prototype),de(Fg.prototype,"distance",[kg],Object.getOwnPropertyDescriptor(Fg.prototype,"distance"),Fg.prototype),de(Fg.prototype,"shadowColor",[Og],Object.getOwnPropertyDescriptor(Fg.prototype,"shadowColor"),Fg.prototype),Rg=Fg))||Rg);cc.PlanarShadowInfo=Qg;var Zg,Kg,Jg,$g,eA=(Bg=qa("cc.SceneGlobals"),Ng=Qa({type:qg}),Bg((Gg=de((zg=function(){function e(){Z(this,e),_e(this,"ambient",Gg,this),_e(this,"planarShadows",Ug,this),_e(this,"_skybox",Xg,this)}return J(e,[{key:"skybox",get:function(){return this._skybox},set:function(e){this._skybox=e}},{key:"renderScene",set:function(e){this.ambient.renderScene=e,this.skybox.renderScene=e,this.planarShadows.renderScene=e}}]),e}()).prototype,"ambient",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Yg}}),Ug=de(zg.prototype,"planarShadows",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Qg}}),Xg=de(zg.prototype,"_skybox",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new qg}}),de(zg.prototype,"skybox",[Ng],Object.getOwnPropertyDescriptor(zg.prototype,"skybox"),zg.prototype),Lg=zg))||Lg);cc.SceneGlobals=eA;var tA,iA=qa("cc.Scene")((Jg=de((Kg=function(e){function t(e){var i;return Z(this,t),_e(i=re(this,te(t).call(this,e)),"autoReleaseAssets",Jg,ne(i)),i._renderScene=null,i.dependAssets=null,_e(i,"_globals",$g,ne(i)),i._inited=void 0,i._prefabSyncedInLiveReload=!1,i._pos=Mi.ZERO,i._rot=Xi.IDENTITY,i._scale=Mi.ONE,i._mat=Qi.IDENTITY,i._dirtyFlags=0,i._activeInHierarchy=!1,cc.director&&cc.director.root&&(i._renderScene=cc.director.root.createScene({})),i._inited=!cc.game||!cc.game._isCloning,i}return ee(t,ky),J(t,[{key:"renderScene",get:function(){return this._renderScene}},{key:"globals",get:function(){return this._globals}}]),J(t,[{key:"destroy",value:function(){var e=ae(te(t.prototype),"destroy",this).call(this);return cc.director.root.destroyScene(this._renderScene),this._activeInHierarchy=!1,e}},{key:"addComponent",value:function(e){return g(3822),null}},{key:"_onHierarchyChanged",value:function(){}},{key:"_onBatchCreated",value:function(){ae(te(t.prototype),"_onBatchCreated",this).call(this);for(var e=this._children.length,i=0;i<e;++i)this._children[i]._onBatchCreated()}},{key:"_onBatchRestored",value:function(){this._onBatchCreated()}},{key:"getPosition",value:function(e){return Mi.copy(e||new Mi,Mi.ZERO)}},{key:"getRotation",value:function(e){return Xi.copy(e||new Xi,Xi.IDENTITY)}},{key:"getScale",value:function(e){return Mi.copy(e||new Mi,Mi.ONE)}},{key:"getWorldPosition",value:function(e){return Mi.copy(e||new Mi,Mi.ZERO)}},{key:"getWorldRotation",value:function(e){return Xi.copy(e||new Xi,Xi.IDENTITY)}},{key:"getWorldScale",value:function(e){return Mi.copy(e||new Mi,Mi.ONE)}},{key:"getWorldMatrix",value:function(e){return Qi.copy(e||new Qi,Qi.IDENTITY)}},{key:"getWorldRS",value:function(e){return Qi.copy(e||new Qi,Qi.IDENTITY)}},{key:"getWorldRT",value:function(e){return Qi.copy(e||new Qi,Qi.IDENTITY)}},{key:"updateWorldTransform",value:function(){}},{key:"_instantiate",value:function(){}},{key:"_load",value:function(){this._inited||(this._onBatchCreated(),this._inited=!0),this.walk(ky._setScene)}},{key:"_activate",value:function(e){e=!1!==e,cc.director._nodeActivator.activateNode(this,e),this._globals.renderScene=this._renderScene}},{key:"position",get:function(){return Mi.ZERO}},{key:"worldPosition",get:function(){return Mi.ZERO}},{key:"rotation",get:function(){return Xi.IDENTITY}},{key:"worldRotation",get:function(){return Xi.IDENTITY}},{key:"scale",get:function(){return Mi.ONE}},{key:"worldScale",get:function(){return Mi.ONE}},{key:"eulerAngles",get:function(){return Mi.ZERO}},{key:"worldMatrix",get:function(){return Qi.IDENTITY}}]),t}()).prototype,"autoReleaseAssets",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$g=de(Kg.prototype,"_globals",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new eA}}),Zg=Kg))||Zg;function nA(e,t){if(!t){var i=cc.director.getScene();if(!i)return null;t=i}return t.getChildByPath(e)}cc.Scene=iA,cc.find=nA;var rA=ul.Flags.HideInHierarchy,oA=qa("cc.PrivateNode")(tA=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e)))._objFlags|=rA,i}return ee(t,rg),t}())||tA;cc.PrivateNode=oA;var aA=tt.fastRemoveAt,sA=ul.Flags.IsStartCalled,lA=ul.Flags.IsOnEnableCalled;ul.Flags.IsEditorOnEnableCalled;function cA(e,t){for(var i=t.constructor._executionOrder,n=t._id,r=0,o=e.length-1,a=o>>>1;r<=o;a=r+o>>>1){var s=e[a],l=s.constructor._executionOrder;if(l>i)o=a-1;else if(l<i)r=a+1;else{var c=s._id;if(c>n)o=a-1;else{if(!(c<n))return a;r=a+1}}}return~r}function uA(e,t){for(var i=e.array,n=e.i+1;n<i.length;){var r=i[n];r._enabled&&r.node._activeInHierarchy?++n:(e.removeAt(n),t&&(r._objFlags&=~t))}}var hA=function e(t){Z(this,e),this._zero=void 0,this._neg=void 0,this._pos=void 0,this._invoke=void 0;var i=me;this._zero=new i([]),this._neg=new i([]),this._pos=new i([]),this._invoke=t};function pA(e,t){return e.constructor._executionOrder-t.constructor._executionOrder}hA.stableRemoveInactive=uA;var fA=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,hA),J(t,[{key:"add",value:function(e){var t=e.constructor._executionOrder;(0===t?this._zero:t<0?this._neg:this._pos).array.push(e)}},{key:"remove",value:function(e){var t=e.constructor._executionOrder;(0===t?this._zero:t<0?this._neg:this._pos).fastRemove(e)}},{key:"cancelInactive",value:function(e){uA(this._zero,e),uA(this._neg,e),uA(this._pos,e)}},{key:"invoke",value:function(){var e=this._neg;e.array.length>0&&(e.array.sort(pA),this._invoke(e),e.array.length=0),this._invoke(this._zero),this._zero.array.length=0;var t=this._pos;t.array.length>0&&(t.array.sort(pA),this._invoke(t),t.array.length=0)}}]),t}(),_A=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,hA),J(t,[{key:"add",value:function(e){var t=e.constructor._executionOrder;if(0===t)this._zero.array.push(e);else{var i=t<0?this._neg.array:this._pos.array,n=cA(i,e);n<0&&i.splice(~n,0,e)}}},{key:"remove",value:function(e){var t=e.constructor._executionOrder;if(0===t)this._zero.fastRemove(e);else{var i=t<0?this._neg:this._pos,n=cA(i.array,e);n>=0&&i.removeAt(n)}}},{key:"invoke",value:function(e){this._neg.array.length>0&&this._invoke(this._neg,e),this._invoke(this._zero,e),this._pos.array.length>0&&this._invoke(this._pos,e)}}]),t}();function dA(e,t,i){return function(n,r){try{t(n,r)}catch(t){cc._throw(t);var o=n.array;for(i&&(o[n.i]._objFlags|=i),++n.i;n.i<o.length;++n.i)try{e(o[n.i],r)}catch(e){cc._throw(e),i&&(o[n.i]._objFlags|=i)}}}}var mA=dA((function(e){e.start(),e._objFlags|=sA}),(function(e){var t=e.array;for(e.i=0;e.i<t.length;++e.i){var i=t[e.i];i.start(),i._objFlags|=sA}}),sA),vA=dA((function(e,t){e.update(t)}),(function(e,t){var i=e.array;for(e.i=0;e.i<i.length;++e.i)i[e.i].update(t)})),yA=dA((function(e,t){e.lateUpdate(t)}),(function(e,t){var i=e.array;for(e.i=0;e.i<i.length;++e.i)i[e.i].lateUpdate(t)})),gA=function(e){var t=cc.director._compScheduler,i=e.array;for(e.i=0;e.i<i.length;++e.i){var n=i[e.i];if(n._enabled)n.onEnable(),!n.node._activeInHierarchy||t._onEnabled(n)}},AA=function(){function e(){Z(this,e),this._deferredComps=[],this.unscheduleAll()}return J(e,[{key:"unscheduleAll",value:function(){this.startInvoker=new fA(mA),this.updateInvoker=new _A(vA),this.lateUpdateInvoker=new _A(yA),this._updating=!1}},{key:"_onEnabled",value:function(e){cc.director.getScheduler().resumeTarget(e),e._objFlags|=lA,this._updating?this._deferredComps.push(e):this._scheduleImmediate(e)}},{key:"_onDisabled",value:function(e){cc.director.getScheduler().pauseTarget(e),e._objFlags&=~lA;var t=this._deferredComps.indexOf(e);t>=0?aA(this._deferredComps,t):(!e.start||e._objFlags&sA||this.startInvoker.remove(e),e.update&&this.updateInvoker.remove(e),e.lateUpdate&&this.lateUpdateInvoker.remove(e))}},{key:"enableComp",value:function(e,t){if(!(e._objFlags&lA)){if(e.onEnable){if(t)return void t.add(e);if(e.onEnable(),!e.node._activeInHierarchy)return}this._onEnabled(e)}}},{key:"disableComp",value:function(e){e._objFlags&lA&&(e.onDisable&&e.onDisable(),this._onDisabled(e))}},{key:"startPhase",value:function(){this._updating=!0,this.startInvoker.invoke(),this._startForNewComps()}},{key:"updatePhase",value:function(e){this.updateInvoker.invoke(e)}},{key:"lateUpdatePhase",value:function(e){this.lateUpdateInvoker.invoke(e),this._updating=!1,this._startForNewComps()}},{key:"_startForNewComps",value:function(){this._deferredComps.length>0&&(this._deferredSchedule(),this.startInvoker.invoke())}},{key:"_scheduleImmediate",value:function(e){"function"!=typeof e.start||e._objFlags&sA||this.startInvoker.add(e),"function"==typeof e.update&&this.updateInvoker.add(e),"function"==typeof e.lateUpdate&&this.lateUpdateInvoker.add(e)}},{key:"_deferredSchedule",value:function(){for(var e=this._deferredComps,t=0,i=e.length;t<i;t++)this._scheduleImmediate(e[t]);e.length=0}}]),e}(),bA=ul.Flags.IsPreloadStarted,xA=ul.Flags.IsOnLoadStarted,TA=ul.Flags.IsOnLoadCalled,SA=ul.Flags.Deactivating,EA=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,hA),J(t,[{key:"add",value:function(e){this._zero.array.push(e)}},{key:"remove",value:function(e){this._zero.fastRemove(e)}},{key:"cancelInactive",value:function(e){hA.stableRemoveInactive(this._zero,e)}},{key:"invoke",value:function(){this._invoke(this._zero),this._zero.array.length=0}}]),t}(),CA=dA((function(e){e.__preload()}),(function(e){var t=e.array;for(e.i=0;e.i<t.length;++e.i)t[e.i].__preload()})),wA=dA((function(e){e.onLoad(),e._objFlags|=TA}),(function(e){var t=e.array;for(e.i=0;e.i<t.length;++e.i){var i=t[e.i];i.onLoad(),i._objFlags|=TA}}),TA),kA=new et(4);function OA(e,t,i){t?e._removeComponent(t):tt.removeAt(e._components,i)}kA.get=function(){var e=this._get()||{preload:new EA(CA),onLoad:new fA(wA),onEnable:new fA(gA)};e.preload._zero.i=-1;var t=e.onLoad;return t._zero.i=-1,t._neg.i=-1,t._pos.i=-1,(t=e.onEnable)._zero.i=-1,t._neg.i=-1,t._pos.i=-1,e};var RA,FA,IA,MA,PA,DA,BA,NA,LA,zA,GA,UA,XA,VA,HA,jA,WA,YA,qA,QA,ZA,KA,JA,$A,eb,tb,ib,nb,rb,ob,ab,sb,lb,cb,ub,hb,pb,fb,_b,db,mb,vb,yb,gb,Ab,bb,xb,Tb,Sb,Eb,Cb,wb,kb,Ob,Rb,Fb,Ib,Mb,Pb,Db,Bb,Nb,Lb,zb=function(){function e(){Z(this,e),this.resetComp=void 0,this.reset()}return J(e,[{key:"reset",value:function(){this._activatingStack=[]}},{key:"activateNode",value:function(e,t){if(t){var i=kA.get();this._activatingStack.push(i),this._activateNodeRecursively(e,i.preload,i.onLoad,i.onEnable),i.preload.invoke(),i.onLoad.invoke(),i.onEnable.invoke(),this._activatingStack.pop(),kA.put(i)}else{this._deactivateNodeRecursively(e);for(var n,r=fe(this._activatingStack);!(n=r()).done;){var o=n.value;o.preload.cancelInactive(bA),o.onLoad.cancelInactive(xA),o.onEnable.cancelInactive()}}e.emit("active-in-hierarchy-changed",e)}},{key:"activateComp",value:function(e,t,i,n){if(e._objFlags&bA||(e._objFlags|=bA,e.__preload&&(t?t.add(e):e.__preload())),e._objFlags&xA||(e._objFlags|=xA,e.onLoad?i?i.add(e):(e.onLoad(),e._objFlags|=TA):e._objFlags|=TA),e._enabled){if(!e.node._activeInHierarchy)return;cc.director._compScheduler.enableComp(e,n)}}},{key:"destroyComp",value:function(e){cc.director._compScheduler.disableComp(e),e.onDestroy&&e._objFlags&TA&&e.onDestroy()}},{key:"_activateNodeRecursively",value:function(e,t,i,n){if(e._objFlags&SA)cc.errorID(3816,e.name);else{e._activeInHierarchy=!0;for(var r=e._components.length,o=0;o<r;++o){var a=e._components[o];a instanceof cc.Component?this.activateComp(a,t,i,n):(OA(e,a,o),--o,--r)}e._childArrivalOrder=e._children.length;for(var s=0,l=e._children.length;s<l;++s){var c=e._children[s];c._active&&this._activateNodeRecursively(c,t,i,n)}e._onPostActivated(!0)}}},{key:"_deactivateNodeRecursively",value:function(e){e._objFlags|=SA,e._activeInHierarchy=!1;for(var t=e._components.length,i=0;i<t;++i){var n=e._components[i];if(n._enabled&&(cc.director._compScheduler.disableComp(n),e._activeInHierarchy))return void(e._objFlags&=~SA)}for(var r=0,o=e._children.length;r<o;++r){var a=e._children[r];if(a._activeInHierarchy&&(this._deactivateNodeRecursively(a),e._activeInHierarchy))return void(e._objFlags&=~SA)}e._onPostActivated(!1),e._objFlags&=~SA}}]),e}();exports.replaceProperty(ky.prototype,"BaseNode",[{name:"childrenCount",newName:"children.length",customGetter:function(){return this.children.length}}]),exports.removeProperty(rg.prototype,"Node.prototype",[{name:"addLayer"},{name:"removeLayer"}]),exports.removeProperty(Ec,"Layers",[{name:"All"},{name:"RaycastMask"},{name:"check"}]),exports.replaceProperty(Ec,"Layers",[{name:"Default",newName:"DEFAULT",target:Ec.Enum,targetName:"Layers.Enum"},{name:"Always",newName:"ALWAYS",target:Ec.Enum,targetName:"Layers.Enum"},{name:"IgnoreRaycast",newName:"IGNORE_RAYCAST",target:Ec.Enum,targetName:"Layers.Enum"},{name:"Gizmos",newName:"GIZMOS",target:Ec.Enum,targetName:"Layers.Enum"},{name:"Editor",newName:"EDITOR",target:Ec.Enum,targetName:"Layers.Enum"},{name:"UI",newName:"UI_3D",target:Ec.Enum,targetName:"Layers.Enum"},{name:"UI2D",newName:"UI_2D",target:Ec.Enum,targetName:"Layers.Enum"},{name:"SceneGizmo",newName:"SCENE_GIZMO",target:Ec.Enum,targetName:"Layers.Enum"},{name:"makeInclusiveMask",newName:"makeMaskInclude",target:Ec,targetName:"Layers"},{name:"makeExclusiveMask",newName:"makeMaskExclude",target:Ec,targetName:"Layers"}]),exports.removeProperty(Ec.Enum,"Layers.Enum",[{name:"ALWAYS"}]),exports.removeProperty(Ec.BitMask,"Layers.BitMask",[{name:"ALWAYS"}]),bt(exports.GFXTextureType),bt(exports.GFXTextureViewType),bt(exports.GFXTextureUsageBit),bt(exports.GFXStoreOp),bt(exports.GFXLoadOp),bt(exports.GFXTextureLayout),function(e){e[e.SCENE=0]="SCENE",e[e.POSTPROCESS=1]="POSTPROCESS",e[e.UI=2]="UI"}(Lb||(Lb={})),bt(Lb);var Gb=(RA=qa("RenderTextureDesc"),FA=Qa({type:exports.GFXTextureType}),IA=Qa({type:exports.GFXTextureViewType}),MA=Qa({type:exports.GFXTextureUsageBit}),PA=Qa({type:exports.GFXFormat}),RA((NA=de((BA=function e(){Z(this,e),_e(this,"name",NA,this),_e(this,"type",LA,this),_e(this,"viewType",zA,this),_e(this,"usage",GA,this),_e(this,"format",UA,this),_e(this,"width",XA,this),_e(this,"height",VA,this)}).prototype,"name",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),LA=de(BA.prototype,"type",[FA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureType.TEX2D}}),zA=de(BA.prototype,"viewType",[IA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureViewType.TV2D}}),GA=de(BA.prototype,"usage",[MA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureUsageBit.COLOR_ATTACHMENT}}),UA=de(BA.prototype,"format",[PA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXFormat.UNKNOWN}}),XA=de(BA.prototype,"width",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),VA=de(BA.prototype,"height",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),DA=BA))||DA),Ub=(HA=qa("FrameBufferDesc"),jA=Qa({type:[Mt]}),HA((qA=de((YA=function e(){Z(this,e),_e(this,"name",qA,this),_e(this,"renderPass",QA,this),_e(this,"colorViews",ZA,this),_e(this,"depthStencilView",KA,this)}).prototype,"name",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),QA=de(YA.prototype,"renderPass",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ZA=de(YA.prototype,"colorViews",[jA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),KA=de(YA.prototype,"depthStencilView",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),WA=YA))||WA),Xb=(JA=qa("ColorDesc"),$A=Qa({type:exports.GFXFormat}),eb=Qa({type:exports.GFXLoadOp}),tb=Qa({type:exports.GFXStoreOp}),ib=Qa({type:exports.GFXTextureLayout}),nb=Qa({type:exports.GFXTextureLayout}),JA((ab=de((ob=function e(){Z(this,e),_e(this,"format",ab,this),_e(this,"loadOp",sb,this),_e(this,"storeOp",lb,this),_e(this,"sampleCount",cb,this),_e(this,"beginLayout",ub,this),_e(this,"endLayout",hb,this)}).prototype,"format",[$A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXFormat.UNKNOWN}}),sb=de(ob.prototype,"loadOp",[eb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXLoadOp.CLEAR}}),lb=de(ob.prototype,"storeOp",[tb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXStoreOp.STORE}}),cb=de(ob.prototype,"sampleCount",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ub=de(ob.prototype,"beginLayout",[ib],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL}}),hb=de(ob.prototype,"endLayout",[nb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL}}),rb=ob))||rb),Vb=(pb=qa("DepthStencilDesc"),fb=Qa({type:exports.GFXFormat}),_b=Qa({type:exports.GFXLoadOp}),db=Qa({type:exports.GFXStoreOp}),mb=Qa({type:exports.GFXLoadOp}),vb=Qa({type:exports.GFXStoreOp}),yb=Qa({type:exports.GFXTextureLayout}),gb=Qa({type:exports.GFXTextureLayout}),pb((xb=de((bb=function e(){Z(this,e),_e(this,"format",xb,this),_e(this,"depthLoadOp",Tb,this),_e(this,"depthStoreOp",Sb,this),_e(this,"stencilLoadOp",Eb,this),_e(this,"stencilStoreOp",Cb,this),_e(this,"sampleCount",wb,this),_e(this,"beginLayout",kb,this),_e(this,"endLayout",Ob,this)}).prototype,"format",[fb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXFormat.UNKNOWN}}),Tb=de(bb.prototype,"depthLoadOp",[_b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXLoadOp.CLEAR}}),Sb=de(bb.prototype,"depthStoreOp",[db],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXStoreOp.STORE}}),Eb=de(bb.prototype,"stencilLoadOp",[mb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXLoadOp.CLEAR}}),Cb=de(bb.prototype,"stencilStoreOp",[vb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXStoreOp.STORE}}),wb=de(bb.prototype,"sampleCount",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),kb=de(bb.prototype,"beginLayout",[yb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL}}),Ob=de(bb.prototype,"endLayout",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL}}),Ab=bb))||Ab),Hb=(Rb=qa("RenderPassDesc"),Fb=Qa({type:[Xb]}),Ib=Qa({type:Vb}),Rb((Db=de((Pb=function e(){Z(this,e),_e(this,"index",Db,this),_e(this,"colorAttachments",Bb,this),_e(this,"depthStencilAttachment",Nb,this)}).prototype,"index",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Bb=de(Pb.prototype,"colorAttachments",[Fb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nb=de(Pb.prototype,"depthStencilAttachment",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Vb}}),Mb=Pb))||Mb);function jb(e,t){return e.hash-t.hash||e.depth-t.depth||e.shaderId-t.shaderId}function Wb(e,t){return e.hash-t.hash||t.depth-e.depth||e.shaderId-t.shaderId}var Yb,qb,Qb,Zb,Kb,Jb,$b,ex,tx,ix,nx,rx,ox,ax,sx,lx,cx,ux,hx,px,fx=function(){function e(t){Z(this,e),this.queue=void 0,this.cmdBuffs=void 0,this.cmdBuffCount=0,this._passDesc=void 0,this._passPool=void 0,this._passDesc=t,this._passPool=new Ta((function(){return{hash:0,depth:0,shaderId:0,subModel:null,cmdBuff:null}}),64),this.cmdBuffs=new Sa(64),this.queue=new Sa(64,this._passDesc.sortFunc)}return J(e,[{key:"clear",value:function(){this.queue.clear(),this._passPool.reset(),this.cmdBuffCount=0}},{key:"insertRenderPass",value:function(e,t,i){var n=e.model.getSubModel(t),r=n.passes[i],o=n.psos[i];if(o.blendState.targets[0].blend!==this._passDesc.isTransparent||!(r.phase&this._passDesc.phases))return!1;var a=0|r.priority<<16|n.priority<<8|i,s=this._passPool.add();return s.hash=a,s.depth=e.depth,s.shaderId=o.shader.id,s.subModel=n,s.cmdBuff=n.commandBuffers[i],this.queue.push(s),!0}},{key:"sort",value:function(){this.queue.sort(),this.cmdBuffCount=this.queue.length;for(var e=0;e<this.queue.length;++e)this.cmdBuffs.array[e]=this.queue.array[e].cmdBuff}}]),e}(),_x=[{r:0,g:0,b:0,a:1}],dx=[];!function(e){e[e.FRONT_TO_BACK=0]="FRONT_TO_BACK",e[e.BACK_TO_FRONT=1]="BACK_TO_FRONT"}(px||(px={})),bt(px);var mx,vx,yx,gx,Ax,bx,xx,Tx,Sx,Ex,Cx,kx,Ox,Rx=(Yb=qa("RenderQueueDesc"),qb=Qa({type:px}),Qb=Qa({type:[Mt]}),Yb((Jb=de((Kb=function e(){Z(this,e),_e(this,"isTransparent",Jb,this),_e(this,"sortMode",$b,this),_e(this,"stages",ex,this)}).prototype,"isTransparent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$b=de(Kb.prototype,"sortMode",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return px.FRONT_TO_BACK}}),ex=de(Kb.prototype,"stages",[Qb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Zb=Kb))||Zb),Fx=(tx=qa("RenderStage"),ix=Qa({displayOrder:0,visible:!0}),nx=Qa({displayOrder:1,visible:!0}),rx=Qa({displayOrder:2,visible:!0}),ox=Qa({type:[Rx],displayOrder:3,visible:!0}),tx((lx=de((sx=function(){function e(){Z(this,e),_e(this,"_name",lx,this),_e(this,"_priority",cx,this),_e(this,"frameBuffer",ux,this),_e(this,"renderQueues",hx,this),this._renderQueues=[],this._flow=null,this._pipeline=null,this._device=null,this._framebuffer=null,this._cmdBuff=null,this._clearColors=null,this._clearDepth=1,this._clearStencil=0,this._renderArea=null,this._pass=null,this._pso=null}return J(e,[{key:"initialize",value:function(e){return void 0!==e.name&&(this._name=e.name),this._priority=e.priority,e.framebuffer&&(this.frameBuffer=e.framebuffer),e.renderQueues&&(this.renderQueues=e.renderQueues),!0}},{key:"activate",value:function(e){if(this._flow=e,this._pipeline=e.pipeline,this._device=e.device,!this._flow.pipeline.root.device)throw new Error("");this._device=this._flow.pipeline.root.device,this._clearColors=[{r:.3,g:.6,b:.9,a:1}],this._renderArea={x:0,y:0,width:0,height:0};for(var t=0;t<this.renderQueues.length;t++){for(var i=0,n=0;n<this.renderQueues[t].stages.length;n++)i|=xh(this.renderQueues[t].stages[n]);var r=jb;switch(this.renderQueues[t].sortMode){case px.BACK_TO_FRONT:r=Wb;break;case px.FRONT_TO_BACK:r=jb}this._renderQueues[t]=new fx({isTransparent:this.renderQueues[t].isTransparent,phases:i,sortFunc:r})}"window"===this.frameBuffer?this._framebuffer=this._flow.pipeline.root.mainWindow.framebuffer:this._framebuffer=this._flow.pipeline.getFrameBuffer(this.frameBuffer)}},{key:"setClearColor",value:function(e){this._clearColors.length>0?this._clearColors[0]=e:this._clearColors.push(e)}},{key:"setClearColors",value:function(e){this._clearColors=e}},{key:"setClearDepth",value:function(e){this._clearDepth=e}},{key:"setClearStencil",value:function(e){this._clearStencil=e}},{key:"setRenderArea",value:function(e,t){this._renderArea.width=e,this._renderArea.height=t}},{key:"sortRenderQueue",value:function(){this._renderQueues.forEach(this.renderQueueClearFunc);for(var e=this._pipeline.renderObjects,t=0;t<e.length;++t)for(var i=e[t],n=0;n<i.model.subModelNum;n++)for(var r=0;r<i.model.getSubModel(n).passes.length;r++)for(var o=0;o<this._renderQueues.length;o++)this._renderQueues[o].insertRenderPass(i,n,r);this._renderQueues.forEach(this.renderQueueSortFunc)}},{key:"executeCommandBuffer",value:function(e){var t=e.camera,i=this._cmdBuff,n=t.viewport;this._renderArea.x=n.x*t.width,this._renderArea.y=n.y*t.height,this._renderArea.width=n.width*t.width*this.pipeline.shadingScale,this._renderArea.height=n.height*t.height*this.pipeline.shadingScale,t.clearFlag&exports.GFXClearFlag.COLOR&&(_x[0].a=t.clearColor.a,_x[0].r=t.clearColor.r,_x[0].g=t.clearColor.g,_x[0].b=t.clearColor.b),this._framebuffer||(this._framebuffer=e.window.framebuffer),i.begin(),i.beginRenderPass(this._framebuffer,this._renderArea,t.clearFlag,_x,t.clearDepth,t.clearStencil);for(var r=0;r<this._renderQueues.length;r++)i.execute(this._renderQueues[r].cmdBuffs.array,this._renderQueues[r].cmdBuffCount);i.endRenderPass(),i.end(),dx[0]=i,this._device.queue.submit(dx)}},{key:"createCmdBuffer",value:function(){this._cmdBuff=this._device.createCommandBuffer({allocator:this._device.commandAllocator,type:exports.GFXCommandBufferType.PRIMARY})}},{key:"renderQueueClearFunc",value:function(e){e.clear()}},{key:"renderQueueSortFunc",value:function(e){e.sort()}},{key:"flow",get:function(){return this._flow}},{key:"pipeline",get:function(){return this._pipeline}},{key:"priority",get:function(){return this._priority}},{key:"framebuffer",get:function(){return this._framebuffer}}]),e}()).prototype,"_name",[ix],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cx=de(sx.prototype,"_priority",[nx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ux=de(sx.prototype,"frameBuffer",[rx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hx=de(sx.prototype,"renderQueues",[ox],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ax=sx))||ax);cc.RenderStage=Fx;var Ix,Mx,Px,Dx,Bx,Nx,Lx,zx,Gx,Ux,Xx,Vx=(mx=qa("RenderFlow"),vx=Qa({displayOrder:0,visible:!0}),yx=Qa({displayOrder:1,visible:!0}),gx=Qa({type:cc.Material,displayOrder:2,visible:!0}),Ax=Qa({type:Lb,displayOrder:3,visible:!0}),bx=Qa({type:[Fx],displayOrder:4,visible:!0}),mx((Sx=de((Tx=function(){function e(){Z(this,e),this._device=null,this._pipeline=null,_e(this,"_name",Sx,this),_e(this,"_priority",Ex,this),_e(this,"_material",Cx,this),_e(this,"_type",kx,this),_e(this,"_stages",Ox,this)}return J(e,[{key:"initialize",value:function(e){void 0!==e.name&&(this._name=e.name),this._priority=e.priority,e.material&&(this._material=e.material),e.type&&(this._type=e.type)}},{key:"activate",value:function(e){this._device=e.device,this._pipeline=e,this._activateStages()}},{key:"resize",value:function(e,t){for(var i=0;i<this._stages.length;i++)this._stages[i].resize(e,t)}},{key:"render",value:function(e){for(var t=0;t<this._stages.length;t++)this._stages[t].render(e)}},{key:"destroyStages",value:function(){for(var e=0;e<this._stages.length;e++)this._stages[e].destroy();this._stages=[]}},{key:"_activateStages",value:function(){for(var e=0;e<this._stages.length;e++)this._stages[e].activate(this);this._stages.sort((function(e,t){return e.priority-t.priority}))}},{key:"device",get:function(){return this._device}},{key:"pipeline",get:function(){return this._pipeline}},{key:"name",get:function(){return this._name}},{key:"priority",get:function(){return this._priority}},{key:"stages",get:function(){return this._stages}},{key:"material",get:function(){return this._material}},{key:"type",get:function(){return this._type}}]),e}()).prototype,"_name",[vx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ex=de(Tx.prototype,"_priority",[yx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cx=de(Tx.prototype,"_material",[gx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kx=de(Tx.prototype,"_type",[Ax],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Lb.SCENE}}),Ox=de(Tx.prototype,"_stages",[bx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xx=Tx))||xx);cc.RenderFlow=Vx;var Hx,jx,Wx,Yx,qx,Qx=new Mi,Zx=(Ix=qa("RenderPipeline"),Mx=Qa({type:[Vx],visible:!0}),Px=Qa({type:[Gb]}),Dx=Qa({type:[Ub]}),Bx=Qa({type:[Hb]}),Ix((zx=de((Lx=function(){function e(){Z(this,e),this._root=null,this._device=null,this._renderObjects=[],_e(this,"_flows",zx,this),this._activeFlows=[],this._isHDRSupported=!1,this._isHDR=!1,this._lightMeterScale=1e4,this._fboCount=0,this._colorFmt=exports.GFXFormat.UNKNOWN,this._depthStencilFmt=exports.GFXFormat.UNKNOWN,this._shadingWidth=0,this._shadingHeight=0,this._shadingScale=1,this._curIdx="shading",this._prevIdx="shading1",this._usePostProcess=!1,this._useMSAA=!1,this._useSMAA=!1,this._quadVB=null,this._quadIB=null,this._quadIA=null,this._uboGlobal=new Rc,this._globalBindings=new Map,this._defaultTex=null,this._defaultTexView=null,this._fpScale=1/1024,this._fpScaleInv=1024,this._macros={},this._useDynamicBatching=!1,_e(this,"renderTextures",Gx,this),_e(this,"framebuffers",Ux,this),_e(this,"renderPasses",Xx,this),this._renderTextures=new Map,this._textureViews=new Map,this._frameBuffers=new Map,this._renderPasses=new Map}return J(e,[{key:"getTextureView",value:function(e){return this._textureViews.get(e)}},{key:"getRenderTexture",value:function(e){return this._renderTextures.get(e)}},{key:"getFrameBuffer",value:function(e){return this._frameBuffers.get(e)}},{key:"initialize",value:function(e){this._usePostProcess=void 0!==e.enablePostProcess&&e.enablePostProcess,this._isHDR=void 0!==e.enableHDR&&e.enableHDR,this._useSMAA=void 0!==e.enableSMAA&&e.enableSMAA,this._useMSAA=void 0!==e.enableMSAA&&e.enableMSAA,e.renderTextures&&(this.renderTextures=e.renderTextures),e.framebuffers&&(this.framebuffers=e.framebuffers),e.renderPasses&&(this.renderPasses=e.renderPasses)}},{key:"activate",value:function(e){if(this._root=e,this._device=e.device,!this._initRenderResource())return console.error("RenderPipeline:"+this.name+" startup failed!"),!1;for(var t=0;t<this._flows.length;t++){var i=this._flows[t];i.type===Lb.SCENE&&(i.activate(this),this.activateFlow(i))}return!0}},{key:"render",value:function(e){for(var t=0;t<e.flows.length;t++)e.flows[t].render(e)}},{key:"rebuild",value:function(){this.updateMacros()}},{key:"resize",value:function(e,t){var i=Math.floor(e*this._shadingScale),n=Math.floor(t*this._shadingScale);(i>this._shadingWidth||n>this._shadingHeight)&&this.resizeFBOs(i,n);for(var r=0;r<this._flows.length;r++)this._flows[r].resize(e,t)}},{key:"swapFBOs",value:function(){var e=this._curIdx;this._curIdx=this._prevIdx,this._prevIdx=e}},{key:"addRenderPass",value:function(e,t){t&&this._renderPasses.set(e,t)}},{key:"getRenderPass",value:function(e){var t=this._renderPasses.get(e);return t||null}},{key:"removeRenderPass",value:function(e){this._renderPasses.delete(e)}},{key:"clearRenderPasses",value:function(){this._renderPasses.clear()}},{key:"destroyFlows",value:function(){for(var e=0;e<this._flows.length;e++)this._flows[e].destroy();this._flows=[]}},{key:"getFlow",value:function(e){for(var t=0;t<this._flows.length;t++)if(this._flows[t].name===e)return this._flows[t];return null}},{key:"updateMacros",value:function(){ih.destroyShaderByDefines(this._macros),this._macros.CC_USE_HDR=this._isHDR,this._macros.CC_SUPPORT_FLOAT_TEXTURE=this.device.hasFeature(exports.GFXFeature.TEXTURE_FLOAT);for(var e=0;e<this._root.scenes.length;e++)this._root.scenes[e].onGlobalPipelineStateChanged()}},{key:"updateUBOs",value:function(e){var t=e.camera,i=t.scene,n=this._root.device,r=i.mainLight,o=i.ambient,a=this._uboGlobal.view;a[Rc.TIME_OFFSET]=this._root.cumulativeTime,a[Rc.TIME_OFFSET+1]=this._root.frameTime,a[Rc.TIME_OFFSET+2]=cc.director.getTotalFrames(),a[Rc.SCREEN_SIZE_OFFSET]=n.width,a[Rc.SCREEN_SIZE_OFFSET+1]=n.height,a[Rc.SCREEN_SIZE_OFFSET+2]=1/a[Rc.SCREEN_SIZE_OFFSET],a[Rc.SCREEN_SIZE_OFFSET+3]=1/a[Rc.SCREEN_SIZE_OFFSET+1],a[Rc.SCREEN_SCALE_OFFSET]=t.width/this._shadingWidth*this._shadingScale,a[Rc.SCREEN_SCALE_OFFSET+1]=t.height/this._shadingHeight*this._shadingScale,a[Rc.SCREEN_SCALE_OFFSET+2]=1/a[Rc.SCREEN_SCALE_OFFSET],a[Rc.SCREEN_SCALE_OFFSET+3]=1/a[Rc.SCREEN_SCALE_OFFSET+1],a[Rc.NATIVE_SIZE_OFFSET]=this._shadingWidth,a[Rc.NATIVE_SIZE_OFFSET+1]=this._shadingHeight,a[Rc.NATIVE_SIZE_OFFSET+2]=1/a[Rc.NATIVE_SIZE_OFFSET],a[Rc.NATIVE_SIZE_OFFSET+3]=1/a[Rc.NATIVE_SIZE_OFFSET+1],Qi.toArray(a,t.matView,Rc.MAT_VIEW_OFFSET),Qi.toArray(a,t.node.worldMatrix,Rc.MAT_VIEW_INV_OFFSET),Qi.toArray(a,t.matProj,Rc.MAT_PROJ_OFFSET),Qi.toArray(a,t.matProjInv,Rc.MAT_PROJ_INV_OFFSET),Qi.toArray(a,t.matViewProj,Rc.MAT_VIEW_PROJ_OFFSET),Qi.toArray(a,t.matViewProjInv,Rc.MAT_VIEW_PROJ_INV_OFFSET),Mi.toArray(a,t.position,Rc.CAMERA_POS_OFFSET);var s=t.exposure;if(a[Rc.EXPOSURE_OFFSET]=s,a[Rc.EXPOSURE_OFFSET+1]=1/s,a[Rc.EXPOSURE_OFFSET+2]=this._isHDR?1:0,a[Rc.EXPOSURE_OFFSET+3]=this._fpScale/s,r){if(Mi.toArray(a,r.direction,Rc.MAIN_LIT_DIR_OFFSET),Mi.toArray(a,r.color,Rc.MAIN_LIT_COLOR_OFFSET),r.useColorTemperature){var l=r.colorTemperatureRGB;a[Rc.MAIN_LIT_COLOR_OFFSET]*=l.x,a[Rc.MAIN_LIT_COLOR_OFFSET+1]*=l.y,a[Rc.MAIN_LIT_COLOR_OFFSET+2]*=l.z}this._isHDR?a[Rc.MAIN_LIT_COLOR_OFFSET+3]=r.illuminance*this._fpScale:a[Rc.MAIN_LIT_COLOR_OFFSET+3]=r.illuminance*s}else Mi.toArray(a,Mi.UNIT_Z,Rc.MAIN_LIT_DIR_OFFSET),Ni.toArray(a,Ni.ZERO,Rc.MAIN_LIT_COLOR_OFFSET);var c=o.skyColor;this._isHDR?c[3]=o.skyIllum*this._fpScale:c[3]=o.skyIllum*s,this._uboGlobal.view.set(c,Rc.AMBIENT_SKY_OFFSET),this._uboGlobal.view.set(o.groundAlbedo,Rc.AMBIENT_GROUND_OFFSET),this._globalBindings.get(Rc.BLOCK.name).buffer.update(this._uboGlobal.view)}},{key:"sceneCulling",value:function(e){var t=e.camera,i=t.scene;this._renderObjects.length=0;var n=i.mainLight,r=i.planarShadows;n&&(n.update(),r.enabled&&n.node.hasChangedFlags&&r.updateDirLight(n)),i.skybox.enabled&&t.clearFlag&bv&&this.addVisibleModel(i.skybox,t);for(var o=i.models,a=cc.director.getTotalFrames(),s=0;s<o.length;s++){var l=o[s];if(l.enabled)if(e.visibility&Ec.BitMask.UI_2D)(l.node&&e.visibility===l.node.layer||e.visibility===l.visFlags)&&(l.updateTransform(a),l.updateUBOs(a),this.addVisibleModel(l,t));else if(l.node&&(e.visibility&l.node.layer)===l.node.layer||e.visibility&l.visFlags){if(l.updateTransform(a),l.worldBounds&&!Zo.aabb_frustum(l.worldBounds,t.frustum))continue;l.updateUBOs(a),this.addVisibleModel(l,t)}}r.enabled&&r.updateCommandBuffers(t.frustum,a)}},{key:"_initRenderResource",value:function(){this._usePostProcess&&((this._device.hasFeature(exports.GFXFeature.FORMAT_R11G11B10F)||this._device.hasFeature(exports.GFXFeature.TEXTURE_HALF_FLOAT)||this._device.hasFeature(exports.GFXFeature.TEXTURE_FLOAT))&&(this._isHDRSupported=!0),this._fboCount=1,this._useMSAA&&(this._useMSAA=this.device.hasFeature(exports.GFXFeature.MSAA))),this._isHDR&&this._isHDRSupported&&(this._device.hasFeature(exports.GFXFeature.COLOR_HALF_FLOAT)&&this._device.hasFeature(exports.GFXFeature.TEXTURE_HALF_FLOAT_LINEAR)?this._device.hasFeature(exports.GFXFeature.FORMAT_R11G11B10F)?(this._colorFmt=exports.GFXFormat.R11G11B10F,this._isHDR=!0):this._device.hasFeature(exports.GFXFeature.TEXTURE_HALF_FLOAT)&&(this._colorFmt=exports.GFXFormat.RGBA16F,this._isHDR=!0):this._device.hasFeature(exports.GFXFeature.COLOR_FLOAT)&&this._device.hasFeature(exports.GFXFeature.TEXTURE_FLOAT_LINEAR)&&this._device.hasFeature(exports.GFXFeature.TEXTURE_FLOAT)&&(this._colorFmt=exports.GFXFormat.RGBA32F,this._isHDR=!0)),this._isHDR||(this._colorFmt=exports.GFXFormat.RGBA8),24===this._device.depthBits?8===this._device.stencilBits?this._depthStencilFmt=exports.GFXFormat.D24S8:this._depthStencilFmt=exports.GFXFormat.D24:this._depthStencilFmt=exports.GFXFormat.D16,this._shadingScale=1,this._shadingWidth=Math.floor(this._device.width),this._shadingHeight=Math.floor(this._device.height),console.info("USE_POST_PROCESS: "+this._usePostProcess),this._usePostProcess&&(console.info("USE_MSAA: "+this._useMSAA),console.info("USE_SMAA: "+this._useSMAA),console.info("USE_HDR: "+this._isHDR)),console.info("SHADING_SIZE: "+this._shadingWidth+" x "+this._shadingHeight),console.info("SHADING_SCALE: "+this._shadingScale.toFixed(4)),console.info("SHADING_COLOR_FORMAT: "+yr[this._colorFmt].name),console.info("SHADING_DEPTH_FORMAT: "+yr[this._depthStencilFmt].name);for(var e=0;e<this.renderTextures.length;e++){var t=this.renderTextures[e];this._renderTextures.set(t.name,this._device.createTexture({type:t.type,usage:t.usage,format:this._getTextureFormat(t.format,t.usage),width:-1===t.width?this._shadingWidth:t.width,height:-1===t.height?this._shadingHeight:t.height}));var i=this._renderTextures.get(t.name);if(null==i)return console.error("RenderTexture:"+t.name+" not found!"),!1;this._textureViews.set(t.name,this._device.createTextureView({texture:i,type:t.viewType,format:this._getTextureFormat(t.format,t.usage)}))}for(var n=0;n<this.renderPasses.length;n++){var r=this.renderPasses[n];this._renderPasses.set(r.index,this._device.createRenderPass({colorAttachments:r.colorAttachments,depthStencilAttachment:r.depthStencilAttachment}))}for(var o=0;o<this.framebuffers.length;o++){var a=this.framebuffers[o],s=this._renderPasses.get(a.renderPass);if(null==s)return console.error("RenderPass:"+a.renderPass+" not found!"),!1;for(var l=[],c=0;c<a.colorViews.length;c++){var u=this._textureViews.get(a.colorViews[c]);if(null==u)return console.error("TextureView:"+a.colorViews[c]+" not found!"),!1;l.push(u)}var h=this._textureViews.get(a.depthStencilView);this._frameBuffers.set(a.name,this._device.createFramebuffer({renderPass:s,colorViews:l,depthStencilView:h}))}if(!this.createQuadInputAssembler())return!1;if(!this.createUBOs())return!1;var p=this._root.mainWindow,f=null;return p&&(f=p.renderPass),f?(this.addRenderPass(Cc.DEFAULT,f),this.updateMacros(),!0):(console.error("RenderPass of main window is null."),!1)}},{key:"_destroy",value:function(){this.destroyFlows(),this.clearRenderPasses(),this.destroyQuadInputAssembler(),this.destroyUBOs();for(var e=this._renderTextures.values(),t=e.next();!t.done;)t.value.destroy(),t=e.next();for(var i=this._textureViews.values(),n=i.next();!n.done;)n.value.destroy(),n=i.next();for(var r=this._renderPasses.values(),o=r.next();!o.done;)o.value.destroy(),o=r.next();for(var a=this._frameBuffers.values(),s=a.next();!s.done;)s.value.destroy(),s=a.next()}},{key:"resizeFBOs",value:function(e,t){var i=this;this._shadingWidth=e,this._shadingHeight=t;for(var n=0;n<this.renderTextures.length;n++){var r=this.renderTextures[n];this._renderTextures.get(r.name).resize(e,t),this._textureViews.get(r.name).destroy(),this._textureViews.get(r.name).initialize({texture:this._renderTextures.get(r.name),type:r.viewType,format:this._getTextureFormat(r.format,r.usage)})}for(var o=0;o<this.framebuffers.length;o++){var a=this.framebuffers[o];this._frameBuffers.get(a.name).destroy(),this._frameBuffers.get(a.name).initialize({renderPass:this._renderPasses.get(a.renderPass),colorViews:a.colorViews.map((function(e){return i._textureViews.get(e)}),this),depthStencilView:this._textureViews.get(a.depthStencilView)})}console.info("Resizing shading fbos: "+this._shadingWidth+"x"+this._shadingHeight)}},{key:"createQuadInputAssembler",value:function(){var e=4*Float32Array.BYTES_PER_ELEMENT,t=4*e;if(this._quadVB=this._device.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:t,stride:e}),!this._quadVB)return!1;var i=new Float32Array(16),n=0;i[n++]=-1,i[n++]=-1,i[n++]=0,i[n++]=0,i[n++]=1,i[n++]=-1,i[n++]=1,i[n++]=0,i[n++]=-1,i[n++]=1,i[n++]=0,i[n++]=1,i[n++]=1,i[n++]=1,i[n++]=1,i[n++]=1,this._quadVB.update(i);var r=Uint8Array.BYTES_PER_ELEMENT,o=6*r;if(this._quadIB=this._device.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:o,stride:r}),!this._quadIB)return!1;var a=new Uint8Array(6);a[0]=0,a[1]=1,a[2]=2,a[3]=1,a[4]=3,a[5]=2,this._quadIB.update(a);var s=[{name:"a_position",format:exports.GFXFormat.RG32F},{name:"a_texCoord",format:exports.GFXFormat.RG32F}];return this._quadIA=this._device.createInputAssembler({attributes:s,vertexBuffers:[this._quadVB],indexBuffer:this._quadIB}),!0}},{key:"destroyQuadInputAssembler",value:function(){this._quadVB&&(this._quadVB.destroy(),this._quadVB=null),this._quadIB&&(this._quadIB.destroy(),this._quadIB=null),this._quadIA&&(this._quadIA.destroy(),this._quadIA=null)}},{key:"createUBOs",value:function(){if(!this._globalBindings.get(Rc.BLOCK.name)){var e=this._root.device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Rc.SIZE});this._globalBindings.set(Rc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Rc.BLOCK,buffer:e})}if(!this._globalBindings.get(Fc.BLOCK.name)){var t=this._root.device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Fc.SIZE});this._globalBindings.set(Fc.BLOCK.name,{type:exports.GFXBindingType.UNIFORM_BUFFER,blockInfo:Fc.BLOCK,buffer:t})}return this._globalBindings.get(Ic.name)||this._globalBindings.set(Ic.name,{type:exports.GFXBindingType.SAMPLER,samplerInfo:Ic}),!0}},{key:"destroyUBOs",value:function(){var e=this._globalBindings.get(Rc.BLOCK.name);e&&(e.buffer.destroy(),this._globalBindings.delete(Rc.BLOCK.name));var t=this._globalBindings.get(Fc.BLOCK.name);t&&(t.buffer.destroy(),this._globalBindings.delete(Fc.BLOCK.name))}},{key:"addVisibleModel",value:function(e,t){var i=0;e.node&&(Mi.subtract(Qx,e.node.worldPosition,t.position),i=Mi.dot(Qx,t.forward)),this._renderObjects.push({model:e,depth:i})}},{key:"activateFlow",value:function(e){this._activeFlows.push(e),this._activeFlows.sort((function(e,t){return e.priority-t.priority}))}},{key:"_getTextureFormat",value:function(e,t){return e===exports.GFXFormat.UNKNOWN?t&exports.GFXTextureUsageBit.COLOR_ATTACHMENT?this._colorFmt:t&exports.GFXTextureUsageBit.DEPTH_STENCIL_ATTACHMENT?this._depthStencilFmt:exports.GFXFormat.UNKNOWN:e}},{key:"root",get:function(){return this._root}},{key:"device",get:function(){return this._device}},{key:"name",get:function(){return it.getClassName(this.constructor)}},{key:"renderObjects",get:function(){return this._renderObjects}},{key:"flows",get:function(){return this._flows}},{key:"activeFlows",get:function(){return this._activeFlows}},{key:"usePostProcess",get:function(){return this._usePostProcess}},{key:"isHDRSupported",get:function(){return this._isHDRSupported}},{key:"isHDR",get:function(){return this._isHDR}},{key:"shadingScale",get:function(){return this._shadingScale}},{key:"lightMeterScale",set:function(e){this._lightMeterScale=e},get:function(){return this._lightMeterScale}},{key:"useMSAA",get:function(){return this._useMSAA}},{key:"useSMAA",get:function(){return this._useSMAA}},{key:"quadIA",get:function(){return this._quadIA}},{key:"globalBindings",get:function(){return this._globalBindings}},{key:"defaultTexture",get:function(){return this._defaultTex}},{key:"fpScale",get:function(){return this._fpScale}},{key:"fpScaleInv",get:function(){return this._fpScaleInv}},{key:"macros",get:function(){return this._macros}},{key:"defaultGlobalUBOData",get:function(){return this._uboGlobal.view}},{key:"currShading",get:function(){return this._curIdx}},{key:"prevShading",get:function(){return this._prevIdx}},{key:"useDynamicBatching",get:function(){return this._useDynamicBatching}}]),e}()).prototype,"_flows",[Mx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gx=de(Lx.prototype,"renderTextures",[Px],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ux=de(Lx.prototype,"framebuffers",[Dx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xx=de(Lx.prototype,"renderPasses",[Bx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nx=Lx))||Nx);cc.RenderPipeline=Zx;var Kx=(Hx=qa("cc.RenderPipelineAsset"),jx=Qa({type:Zx}),Hx((qx=de((Yx=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"renderPipeline",qx,ne(i)),i}return ee(t,Ul),t}()).prototype,"renderPipeline",[jx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wx=Yx))||Wx);cc.RenderPipelineAsset=Kx,exports.replaceProperty(lu.prototype,"Mesh.prototype",[{name:"renderingMesh",newName:"renderingSubMeshes"}]),exports.removeProperty(lu.prototype,"Mesh.prototype",[{name:"hasFlatBuffers"},{name:"destroyFlatBuffers"}]),cc.textureUtil=hv;var Jx,$x={topLeft:cc.v2(0,0),topRight:cc.v2(0,0),top:cc.v2(0,0),bottomLeft:cc.v2(0,0),bottomRight:cc.v2(0,0),bottom:cc.v2(0,0),center:cc.v2(0,0),left:cc.v2(0,0),right:cc.v2(0,0),width:0,height:0,init:function(e){var t=this.width=e.width,i=this.height=e.height,n=e.x,r=e.y,o=r+i,a=n+t;this.topLeft.x=n,this.topLeft.y=o,this.topRight.x=a,this.topRight.y=o,this.top.x=n+t/2,this.top.y=o,this.bottomLeft.x=n,this.bottomLeft.y=r,this.bottomRight.x=a,this.bottomRight.y=r,this.bottom.x=n+t/2,this.bottom.y=r,this.center.x=n+t/2,this.center.y=r+i/2,this.left.x=n,this.left.y=r+i/2,this.right.x=a,this.right.y=r+i/2}};cc.visibleRect=$x,function(e){e[e.GENERAL=100]="GENERAL"}(Jx||(Jx={}));var eT,tT=function(){function e(t,i){Z(this,e),this._root=void 0,this._name="",this._window=null,this._priority=0,this._visibility=Wc,this._camera=void 0,this._isEnable=!1,this._flows=[],this._root=t,this._camera=i}return J(e,[{key:"name",get:function(){return this._name}},{key:"window",get:function(){return this._window},set:function(e){this._window=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e,cc.director.root&&cc.director.root.sortViews()}},{key:"visibility",set:function(e){this._visibility=e},get:function(){return this._visibility}},{key:"camera",get:function(){return this._camera}},{key:"isEnable",get:function(){return this._isEnable}},{key:"flows",get:function(){return this._flows}}],[{key:"registerCreateFunc",value:function(t){t._createViewFun=function(t,i){return new e(t,i)}}}]),J(e,[{key:"initialize",value:function(e){return this._name=e.name,this.priority=e.priority,this.setExecuteFlows(e.flows),!0}},{key:"destroy",value:function(){this._window=null,this._priority=0}},{key:"enable",value:function(e){this._isEnable=e}},{key:"setExecuteFlows",value:function(e){if(this.flows.length=0,e&&1===e.length&&"UIFlow"===e[0])this._flows.push(cc.director.root.pipeline.getFlow("UIFlow"));else for(var t=cc.director.root.pipeline.activeFlows,i=0;i<t.length;++i){var n=t[i];(n.type===Lb.SCENE||e&&-1!==e.indexOf(n.name))&&this.flows.push(n)}}}]),e}();function iT(e,t){t<1e3?t=1e3:t>15e3&&(t=15e3);var i=t*t,n=(.860117757+.000154118254*t+1.28641212e-7*i)/(1+.000842420235*t+7.08145163e-7*i),r=(.317398726+422806245e-13*t+4.20481691e-8*i)/(1-289741816e-13*t+1.61456053e-7*i),o=2*n-8*r+4,a=3*n/o,s=2*r/o,l=1/s*a,c=1/s*(1-a-s);e.x=3.2404542*l-1.5371385+-.4985314*c,e.y=-.969266*l+1.8760108+.041556*c,e.z=.0556434*l-.2040259+1.0572252*c}!function(e){e[e.DIRECTIONAL=0]="DIRECTIONAL",e[e.SPHERE=1]="SPHERE",e[e.SPOT=2]="SPOT",e[e.UNKNOWN=3]="UNKNOWN"}(eT||(eT={}));var nT=function(e){return 4*Math.PI*Math.PI*e*e},rT=function(){function e(){Z(this,e),this._color=new Mi(1,1,1),this._useColorTemp=!1,this._colorTemp=6550,this._colorTempRGB=new Mi(1,1,1),this._scene=null,this._node=null,this._type=void 0,this._name=null,this._type=eT.UNKNOWN}return J(e,[{key:"color",set:function(e){this._color.set(e)},get:function(){return this._color}},{key:"useColorTemperature",set:function(e){this._useColorTemp=e},get:function(){return this._useColorTemp}},{key:"colorTemperature",set:function(e){this._colorTemp=e,iT(this._colorTempRGB,this._colorTemp)},get:function(){return this._colorTemp}},{key:"colorTemperatureRGB",get:function(){return this._colorTempRGB}},{key:"node",set:function(e){this._node=e,this._node&&(this._node.hasChangedFlags|=sh.ROTATION)},get:function(){return this._node}},{key:"type",get:function(){return this._type}},{key:"name",get:function(){return this._name}},{key:"scene",get:function(){return this._scene}}]),J(e,[{key:"initialize",value:function(e,t){this._name=e,this._type=eT.UNKNOWN,this._node=t}},{key:"attachToScene",value:function(e){this._scene=e}},{key:"detachFromScene",value:function(){this._scene=null}},{key:"destroy",value:function(){this._name=null,this._type=eT.UNKNOWN,this._node=null}},{key:"update",value:function(){}}]),e}();function oT(e,t){return!(!t.worldBounds||Zo.aabb_aabb(t.worldBounds,e.aabb))}function aT(e,t){return!(!t.worldBounds||Zo.aabb_aabb(t.worldBounds,e.aabb)&&Zo.aabb_frustum(t.worldBounds,e.frustum))}(sT=new ma).accurate=!0;var sT,lT,cT,uT=function(){var e=new Mi,t=new Mi,i=new Xi,n=new ma;n.accurate=!0;var r=new Qi,o=new Qi,a=new Mi,s=new Mi;return function(l,c,u,h,p,f){Qi.fromRT(r,u.node.getWorldRotation(i),c.node.getWorldPosition(e)),Qi.invert(o,r),c.getSplitFrustum(n,h,p),n.transform(o),Mi.set(a,n.vertices[0].x,n.vertices[0].y,n.vertices[0].z),Mi.copy(s,a);for(var _=1;_<n.vertices.length;_++)a.x=Math.min(a.x,n.vertices[_].x),a.y=Math.min(a.y,n.vertices[_].y),a.z=Math.min(a.z,n.vertices[_].z),s.x=Math.max(s.x,n.vertices[_].x),s.y=Math.max(s.y,n.vertices[_].y),s.z=Math.max(s.z,n.vertices[_].z);Mi.set(t,(a.x+s.x)/2,(a.y+s.y)/2,s.z),t.z+=f,Mi.transformMat4(e,t,r),Qi.fromRT(r,u.node.getWorldRotation(i),e),ma.createOrtho(l,s.x-a.x,s.y-a.y,0,a.z-f-s.z,r)}}();!function(e){e[e.FORWARD=0]="FORWARD"}(lT||(lT={})),function(e){e[e.FORWARD=0]="FORWARD",e[e.UI=10]="UI"}(cT||(cT={}));var hT=[],pT=[],fT=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Fx),J(t,[{key:"activate",value:function(e){ae(te(t.prototype),"activate",this).call(this,e),this._cmdBuff=this._device.createCommandBuffer({allocator:this._device.commandAllocator,type:exports.GFXCommandBufferType.PRIMARY})}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"resize",value:function(e,t){}},{key:"rebuild",value:function(){}},{key:"render",value:function(e){this._renderQueues[0].clear();for(var t,i=fe(this._pipeline.renderObjects);!(t=i()).done;)for(var n=t.value,r=0;r<n.model.subModelNum;r++)for(var o=0;o<n.model.getSubModel(r).passes.length;o++)this._renderQueues[0].insertRenderPass(n,r,o);this._renderQueues[0].sort();var a=e.window.framebuffer,s=this._cmdBuff,l=e.camera,c=l.viewport;this._renderArea.x=c.x*l.width,this._renderArea.y=c.y*l.height,this._renderArea.width=c.width*l.width,this._renderArea.height=c.height*l.height,pT[0]=l.clearColor,s.begin(),s.beginRenderPass(a,this._renderArea,l.clearFlag,[l.clearColor],l.clearDepth,l.clearStencil),s.execute(this._renderQueues[0].cmdBuffs.array,this._renderQueues[0].cmdBuffCount),s.endRenderPass(),s.end(),hT[0]=s,this._device.queue.submit(hT)}}]),t}();fT.initInfo={name:"UIStage",priority:0,renderQueues:[{isTransparent:!0,stages:["default"],sortMode:px.BACK_TO_FRONT}],framebuffer:"window"};var _T=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Vx),J(t,[{key:"initialize",value:function(e){ae(te(t.prototype),"initialize",this).call(this,e);var i=new fT;return i.initialize(fT.initInfo),this._stages.push(i),!0}},{key:"destroy",value:function(){this.destroyStages()}},{key:"rebuild",value:function(){}},{key:"render",value:function(e){e.camera.update(),this.pipeline.sceneCulling(e),this.pipeline.updateUBOs(e);var i=this.pipeline.defaultGlobalUBOData[Rc.EXPOSURE_OFFSET+2];this.pipeline.defaultGlobalUBOData[Rc.EXPOSURE_OFFSET+2]=0,this.pipeline.globalBindings.get(Rc.BLOCK.name).buffer.update(this.pipeline.defaultGlobalUBOData),ae(te(t.prototype),"render",this).call(this,e),this.pipeline.defaultGlobalUBOData[Rc.EXPOSURE_OFFSET+2]=i,this.pipeline.globalBindings.get(Rc.BLOCK.name).buffer.update(this.pipeline.defaultGlobalUBOData)}}]),t}();_T.initInfo={name:"UIFlow",priority:cT.UI,type:Lb.UI};var dT,mT,vT,yT,gT,AT,bT,xT,TT,ST,ET,CT,wT,kT,OT,RT=function(){function e(){Z(this,e),this.queue=new Set}return J(e,[{key:"clear",value:function(){for(var e=this.queue.values(),t=e.next();!t.done;)t.value.clear(),t=e.next();this.queue.clear()}},{key:"recordCommandBuffer",value:function(e){for(var t=this.queue.values(),i=t.next();!i.done;){for(var n=!1,r=0;r<i.value.batches.length;++r){var o=i.value.batches[r];if(o.mergeCount){for(var a=0;a<o.vbs.length;++a)o.vbs[a].update(o.vbDatas[a]);o.vbIdx.update(o.vbIdxData.buffer),o.ubo.update(o.uboData.view),n||(e.bindPipelineState(o.pso),n=!0),e.bindBindingLayout(o.pso.pipelineLayout.layouts[0]),e.bindInputAssembler(o.ia),e.draw(o.ia)}}i=t.next()}}}]),e}(),FT=function(){function e(){Z(this,e),this.queue=new Set}return J(e,[{key:"clear",value:function(){for(var e=this.queue.values(),t=e.next();!t.done;)t.value.clear(),t=e.next();this.queue.clear()}},{key:"recordCommandBuffer",value:function(e){for(var t=this.queue.values(),i=t.next();!i.done;){var n=i.value,r=n.instances,o=n.pso;if(o){i.value.uploadBuffers(),e.bindPipelineState(o),e.bindBindingLayout(o.pipelineLayout.layouts[0]);for(var a=0;a<r.length;++a){var s=r[a];s.count&&(e.bindInputAssembler(s.ia),e.draw(s.ia))}}i=t.next()}}}]),e}(),IT=[{r:0,g:0,b:0,a:1}],MT=[],PT=qa("ForwardStage")((vT=mT=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._opaqueBatchedQueue=void 0,e._opaqueInstancedQueue=void 0,e._opaqueBatchedQueue=new RT,e._opaqueInstancedQueue=new FT,e}return ee(t,Fx),J(t,[{key:"activate",value:function(e){ae(te(t.prototype),"activate",this).call(this,e),this.createCmdBuffer()}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"resize",value:function(e,t){}},{key:"rebuild",value:function(){}},{key:"render",value:function(e){this._opaqueInstancedQueue.clear(),this._opaqueBatchedQueue.clear(),this._renderQueues.forEach(this.renderQueueClearFunc);for(var t=this._pipeline.renderObjects,i=0;i<t.length;++i){var n=t[i];if(n.model.isDynamicBatching)for(var r=n.model.subModels,o=0;o<r.length;++o)for(var a=r[o],s=a.passes,l=0;l<s.length;++l){var c=s[l],u=a.psos[l];if(c.instancedBuffer)c.instancedBuffer.merge(a,n.model.instancedAttributes,u),this._opaqueInstancedQueue.queue.add(c.instancedBuffer);else if(c.batchedBuffer)c.batchedBuffer.merge(a,n,u),this._opaqueBatchedQueue.queue.add(c.batchedBuffer);else for(var h=0;h<this._renderQueues.length;h++)this._renderQueues[h].insertRenderPass(n,o,l)}else for(var p=0;p<n.model.subModelNum;p++)for(var f=0;f<n.model.getSubModel(p).passes.length;f++)for(var _=0;_<this._renderQueues.length;_++)this._renderQueues[_].insertRenderPass(n,p,f)}this._renderQueues.forEach(this.renderQueueSortFunc);var d,m,v=e.camera,y=this._cmdBuff,g=v.viewport;if(this._renderArea.x=g.x*v.width,this._renderArea.y=g.y*v.height,this._renderArea.width=g.width*v.width*this.pipeline.shadingScale,this._renderArea.height=g.height*v.height*this.pipeline.shadingScale,v.clearFlag&exports.GFXClearFlag.COLOR)if(this._pipeline.isHDR){d=IT[0],m=v.clearColor,d.r=m.r*m.r,d.g=m.g*m.g,d.b=m.b*m.b;var A=this._pipeline.fpScale/v.exposure;IT[0].r*=A,IT[0].g*=A,IT[0].b*=A}else IT[0].r=v.clearColor.r,IT[0].g=v.clearColor.g,IT[0].b=v.clearColor.b;IT[0].a=v.clearColor.a,this._pipeline.usePostProcess?this._pipeline.useMSAA?this._framebuffer=this._pipeline.getFrameBuffer("msaa"):this._framebuffer=this._pipeline.getFrameBuffer(this._pipeline.currShading):this._framebuffer=e.window.framebuffer;var b=v.scene.planarShadows;y.begin(),y.beginRenderPass(this._framebuffer,this._renderArea,v.clearFlag,IT,v.clearDepth,v.clearStencil),y.execute(this._renderQueues[0].cmdBuffs.array,this._renderQueues[0].cmdBuffCount),this._opaqueInstancedQueue.recordCommandBuffer(y),this._opaqueBatchedQueue.recordCommandBuffer(y),v.visibility&Ec.BitMask.DEFAULT&&b.recordCommandBuffer(y),y.execute(this._renderQueues[1].cmdBuffs.array,this._renderQueues[1].cmdBuffCount),y.endRenderPass(),y.end(),MT[0]=y,this._device.queue.submit(MT),this._pipeline.useMSAA&&this._device.blitFramebuffer(this._framebuffer,this._pipeline.getFrameBuffer(this._pipeline.currShading),this._renderArea,this._renderArea,exports.GFXFilter.POINT)}}]),t}(),mT.initInfo={name:"ForwardStage",priority:lT.FORWARD,renderQueues:[{isTransparent:!1,sortMode:px.FRONT_TO_BACK,stages:["default"]},{isTransparent:!0,sortMode:px.BACK_TO_FRONT,stages:["default","planarShadow"]}]},dT=vT))||dT,DT=qa("ForwardFlow")((AT=gT=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Vx),J(t,[{key:"initialize",value:function(e){ae(te(t.prototype),"initialize",this).call(this,e);var i=new PT;i.initialize(PT.initInfo),this._stages.push(i)}},{key:"render",value:function(e){e.camera.update(),this.pipeline.sceneCulling(e),this.pipeline.updateUBOs(e),ae(te(t.prototype),"render",this).call(this,e)}},{key:"destroy",value:function(){this.destroyStages()}},{key:"rebuild",value:function(){}}]),t}(),gT.initInfo={name:"ForwardFlow",priority:cT.FORWARD},yT=AT))||yT,BT=[],NT=qa("ToneMapStage")((TT=xT=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._hTexSampler=0,i._hBlendTexSampler=0,i._bindingLayout=null,i}return ee(t,Fx),J(t,[{key:"activate",value:function(e){ae(te(t.prototype),"activate",this).call(this,e),this._createCmdBuffer(),this.rebuild()}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"resize",value:function(e,t){}},{key:"rebuild",value:function(){this._pass=this._flow.material.passes[0],this._hTexSampler=this._pass.getBinding("u_texSampler");var e=this._pipeline.globalBindings.get(Rc.BLOCK.name);this._pso=this._pass.createPipelineState(),this._bindingLayout=this._pso.pipelineLayout.layouts[0],this._pass.bindBuffer(Rc.BLOCK.binding,e.buffer),this._pass.bindTextureView(this._hTexSampler,this._pipeline.getTextureView(this._pipeline.currShading)),this._pipeline.useSMAA&&(this._hBlendTexSampler=this._pass.getBinding("u_blendTexSampler"),this._pass.bindTextureView(this._hBlendTexSampler,this._pipeline.getTextureView("smaaBlend"))),this._pass.update(),this._bindingLayout.update()}},{key:"render",value:function(e){var t=e.camera;if(this._cmdBuff){this._renderArea.width=t.width,this._renderArea.height=t.height;var i=e.window.framebuffer;this._cmdBuff.begin(),this._cmdBuff.beginRenderPass(i,this._renderArea,exports.GFXClearFlag.ALL,[{r:0,g:0,b:0,a:1}],1,0),this._cmdBuff.bindPipelineState(this._pso),this._cmdBuff.bindBindingLayout(this._pso.pipelineLayout.layouts[0]),this._cmdBuff.bindInputAssembler(this._pipeline.quadIA),this._cmdBuff.draw(this._pipeline.quadIA),this._cmdBuff.endRenderPass(),this._cmdBuff.end()}BT[0]=this._cmdBuff,this._device.queue.submit(BT)}},{key:"_createCmdBuffer",value:function(){this._cmdBuff=this._device.createCommandBuffer({allocator:this._device.commandAllocator,type:exports.GFXCommandBufferType.PRIMARY})}}]),t}(),xT.initInfo={name:"ToneMapStage",priority:0,framebuffer:"window"},bT=TT))||bT,LT=qa("ToneMapFlow")((CT=ET=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Vx),J(t,[{key:"initialize",value:function(e){ae(te(t.prototype),"initialize",this).call(this,e),this._material.recompileShaders({CC_USE_SMAA:this._pipeline.useSMAA});var i=new NT;return i.initialize(NT.initInfo),this._stages.push(i),!0}},{key:"destroy",value:function(){this._material&&this._material.destroy(),this.destroyStages()}},{key:"rebuild",value:function(){this._material&&this._material.recompileShaders({CC_USE_SMAA:this._pipeline.useSMAA});for(var e,t=fe(this._stages);!(e=t()).done;){e.value.rebuild()}}}]),t}(),ET.initInfo={name:"ToneMapFlow",priority:cT.FORWARD+1},ST=CT))||ST,zT=new Float32Array(4),GT=Fn.create(0,0,0,1),UT=[],XT=[],VT=new Mi,HT=qa("ForwardPipeline")((OT=kT=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._uboLights=new Bc,e._lightsUBO=null,e._validLights=void 0,e._lightIndexOffset=void 0,e._lightIndices=void 0,e._validLights=[],e._lightIndexOffset=[],e._lightIndices=[],e}return ee(t,Zx),J(t,[{key:"lightsUBO",get:function(){return this._lightsUBO}}]),J(t,[{key:"initialize",value:function(e){ae(te(t.prototype),"initialize",this).call(this,e);var i=new DT;i.initialize(DT.initInfo),this._flows.push(i)}},{key:"activate",value:function(e){if(!ae(te(t.prototype),"activate",this).call(this,e))return!1;if(this._usePostProcess){this._useSMAA;var i=new LT;i.initialize(DT.initInfo),this._flows.push(i),i.activate(this)}var n=new _T;return n.initialize(_T.initInfo),this._flows.push(n),n.activate(this),!0}},{key:"destroy",value:function(){this._destroy()}},{key:"rebuild",value:function(){ae(te(t.prototype),"rebuild",this).call(this);for(var e=0;e<this._flows.length;e++)this._flows[e].rebuild()}},{key:"updateUBOs",value:function(e){ae(te(t.prototype),"updateUBOs",this).call(this,e);for(var i=e.camera.exposure,n=0;n<this._renderObjects.length;n++){this._uboLights.view.fill(0);var r=n+1<this._renderObjects.length?this._lightIndexOffset[n+1]:this._lightIndices.length;if(this._renderObjects[n].model.lightBuffer&&!this._renderObjects[n].model.isDynamicBatching){for(var o=0,a=0,s=this._lightIndexOffset[n];s<r;s++){var l=this._validLights[this._lightIndices[s]];if(l)switch(l.type){case eT.SPHERE:if(o>=Bc.MAX_SPHERE_LIGHTS)continue;var c=l;if(Mi.toArray(zT,c.position),this._uboLights.view.set(zT,Bc.SPHERE_LIGHT_POS_OFFSET+4*o),zT[0]=c.size,zT[1]=c.range,zT[2]=0,this._uboLights.view.set(zT,Bc.SPHERE_LIGHT_SIZE_RANGE_OFFSET+4*o),Mi.toArray(zT,l.color),l.useColorTemperature){var u=l.colorTemperatureRGB;zT[0]*=u.x,zT[1]*=u.y,zT[2]*=u.z}this._isHDR?zT[3]=c.luminance*this._fpScale*this._lightMeterScale:zT[3]=c.luminance*i*this._lightMeterScale,this._uboLights.view.set(zT,Bc.SPHERE_LIGHT_COLOR_OFFSET+4*o),o++;break;case eT.SPOT:if(a>=Bc.MAX_SPOT_LIGHTS)continue;var h=l;if(Mi.toArray(zT,h.position),zT[3]=h.size,this._uboLights.view.set(zT,Bc.SPOT_LIGHT_POS_OFFSET+4*a),zT[0]=h.size,zT[1]=h.range,zT[2]=h.spotAngle,this._uboLights.view.set(zT,Bc.SPOT_LIGHT_SIZE_RANGE_ANGLE_OFFSET+4*a),Mi.toArray(zT,h.direction),this._uboLights.view.set(zT,Bc.SPOT_LIGHT_DIR_OFFSET+4*a),Mi.toArray(zT,l.color),l.useColorTemperature){var p=l.colorTemperatureRGB;zT[0]*=p.x,zT[1]*=p.y,zT[2]*=p.z}this._isHDR?zT[3]=h.luminance*this._fpScale*this._lightMeterScale:zT[3]=h.luminance*i*this._lightMeterScale,this._uboLights.view.set(zT,Bc.SPOT_LIGHT_COLOR_OFFSET+4*a),a++}}this._renderObjects[n].model.lightBuffer.update(this._uboLights.view)}}}},{key:"sceneCulling",value:function(e){ae(te(t.prototype),"sceneCulling",this).call(this,e),this._validLights.length=0;for(var i=e.camera.scene.sphereLights,n=0;n<i.length;n++){var r=i[n];r.update(),Fn.set(GT,r.position.x,r.position.y,r.position.z,r.range),Zo.sphere_frustum(GT,e.camera.frustum)&&this._validLights.push(r)}for(var o=e.camera.scene.spotLights,a=0;a<o.length;a++){var s=o[a];s.update(),Fn.set(GT,s.position.x,s.position.y,s.position.z,s.range),Zo.sphere_frustum(GT,e.camera.frustum)&&this._validLights.push(s)}if(this._lightIndexOffset.length=this._lightIndices.length=0,this._validLights.length)for(var l=0;l<this._renderObjects.length;l++)this._lightIndexOffset[l]=this._lightIndices.length,this._renderObjects[l].model.lightBuffer&&this.cullLightPerModel(this._renderObjects[l].model)}},{key:"cullLightPerModel",value:function(e){UT.length=0;for(var t=0;t<this._validLights.length;t++){var i=!1;switch(this._validLights[t].type){case eT.DIRECTIONAL:this._validLights[t],i=!1;break;case eT.SPHERE:i=oT(this._validLights[t],e);break;case eT.SPOT:i=aT(this._validLights[t],e)}i||(UT.push(t),this._validLights[t].type===eT.DIRECTIONAL?XT[t]=0:XT[t]=Mi.distance(this._validLights[t].position,e.node.getWorldPosition(VT)))}UT.sort(this.sortLight),Array.prototype.push.apply(this._lightIndices,UT)}},{key:"sortLight",value:function(e,t){return XT[e]-XT[t]}}]),t}(),kT.initInfo={},wT=OT))||wT,jT=Qc,WT=new Oi,YT=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Z(this,e),this._point=new Oi,this._prevPoint=new Oi,this._lastModified=0,this._id=0,this._startPoint=new Oi,this._startPointCaptured=!1,this.setTouchInfo(n,t,i)}return J(e,[{key:"lastModified",get:function(){return this._lastModified}}]),J(e,[{key:"getLocation",value:function(e){return e||(e=new Oi),e.set(this._point.x,this._point.y),e}},{key:"getLocationX",value:function(){return this._point.x}},{key:"getLocationY",value:function(){return this._point.y}},{key:"getUILocation",value:function(e){return e||(e=new Oi),e.set(this._point.x,this._point.y),cc.view._convertPointWithScale(e),e}},{key:"getUILocationX",value:function(){var e=cc.view.getViewportRect();return(this._point.x-e.x)/cc.view.getScaleX()}},{key:"getUILocationY",value:function(){var e=cc.view.getViewportRect();return(this._point.y-e.y)/cc.view.getScaleY()}},{key:"getPreviousLocation",value:function(e){return e||(e=new Oi),e.set(this._prevPoint.x,this._prevPoint.y),e}},{key:"getUIPreviousLocation",value:function(e){return e||(e=new Oi),e.set(this._prevPoint.x,this._prevPoint.y),cc.view._convertPointWithScale(e),e}},{key:"getStartLocation",value:function(e){return e||(e=new Oi),e.set(this._startPoint.x,this._startPoint.y),e}},{key:"getUIStartLocation",value:function(e){return e||(e=new Oi),e.set(this._startPoint.x,this._startPoint.y),cc.view._convertPointWithScale(e),e}},{key:"getDelta",value:function(e){return e||(e=new Oi),e.set(this._point),e.subtract(this._prevPoint),e}},{key:"getUIDelta",value:function(e){return e||(e=new Oi),WT.set(this._point),WT.subtract(this._prevPoint),e.set(cc.view.getScaleX(),cc.view.getScaleY()),Oi.divide(e,WT,e),e}},{key:"getLocationInView",value:function(e){return e||(e=new Oi),e.set(this._point.x,cc.view._designResolutionSize.height-this._point.y),e}},{key:"getPreviousLocationInView",value:function(e){return e||(e=new Oi),e.set(this._prevPoint.x,cc.view._designResolutionSize.height-this._prevPoint.y),e}},{key:"getStartLocationInView",value:function(e){return e||(e=new Oi),e.set(this._startPoint.x,cc.view._designResolutionSize.height-this._startPoint.y),e}},{key:"getID",value:function(){return this._id}},{key:"setTouchInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this._prevPoint=this._point,this._point=new Oi(t||0,i||0),this._id=e,this._startPointCaptured||(this._startPoint=new Oi(this._point),this._startPointCaptured=!0)}},{key:"setPoint",value:function(e,t){"object"===Q(e)?(this._point.x=e.x,this._point.y=e.y):(this._point.x=e||0,this._point.y=t||0),this._lastModified=cc.director.getCurrentTime()}},{key:"setPrevPoint",value:function(e,t){"object"===Q(e)?this._prevPoint=new Oi(e.x,e.y):this._prevPoint=new Oi(e||0,t||0),this._lastModified=cc.director.getCurrentTime()}}]),e}();cc.Touch=YT;var qT,QT=_c.TOUCH_TIMEOUT,ZT=new Oi,KT=new Oi,JT=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Z(this,e),this.x=void 0,this.y=void 0,this.z=void 0,this.timestamp=void 0,this.x=t,this.y=i,this.z=n,this.timestamp=r};cc.internal.Acceleration=JT;var $T=new(function(){function e(){Z(this,e),this._mousePressed=!1,this._isRegisterEvent=!1,this._preTouchPoint=new Oi,this._prevMousePoint=new Oi,this._preTouchPool=[],this._preTouchPoolPointer=0,this._touches=[],this._touchesIntegerDict={},this._indexBitsUsed=0,this._maxTouches=8,this._accelEnabled=!1,this._accelInterval=.2,this._accelMinus=1,this._accelCurTime=0,this._acceleration=null,this._accelDeviceEvent=null,this._glView=null,this._pointLocked=!1}return J(e,[{key:"handleTouchesBegin",value:function(e){for(var t=[],i=this._touchesIntegerDict,n=0;n<e.length;++n){var r=e[n],o=r.getID();if(null!==o)if(void 0===i[o]){var a=this._getUnUsedIndex();if(-1===a){cc.logID(2300,a);continue}r.getLocation(ZT);var s=new YT(ZT.x,ZT.y,o);this._touches[a]=s,r.getPreviousLocation(ZT),s.setPrevPoint(ZT),i[o]=a,t.push(s)}}if(t.length>0){var l=new Ev(t,!1,Ev.BEGAN);Nv.dispatchEvent(l)}}},{key:"handleTouchesMove",value:function(e){for(var t=[],i=this._touches,n=0;n<e.length;++n){var r=e[n],o=r.getID();if(null!==o){var a=this._touchesIntegerDict[o];void 0!==a&&i[a]&&(r.getLocation(ZT),i[a].setPoint(ZT),r.getPreviousLocation(ZT),i[a].setPrevPoint(ZT),t.push(i[a]))}}if(t.length>0){var s=new Ev(t,!1,Ev.MOVED);Nv.dispatchEvent(s)}}},{key:"handleTouchesEnd",value:function(e){var t=this.getSetOfTouchesEndOrCancel(e);if(t.length>0){var i=new Ev(t,!1,Ev.ENDED);Nv.dispatchEvent(i)}this._preTouchPool.length=0}},{key:"handleTouchesCancel",value:function(e){var t=this.getSetOfTouchesEndOrCancel(e);if(t.length>0){var i=new Ev(t,!1,Ev.CANCELLED);Nv.dispatchEvent(i)}this._preTouchPool.length=0}},{key:"getSetOfTouchesEndOrCancel",value:function(e){for(var t=[],i=this._touches,n=this._touchesIntegerDict,r=0;r<e.length;++r){var o=e[r],a=o.getID();if(null!==a){var s=n[a];void 0!==s&&i[s]&&(o.getLocation(ZT),i[s].setPoint(ZT),o.getPreviousLocation(ZT),i[s].setPrevPoint(ZT),t.push(i[s]),this._removeUsedIndexBit(s),delete n[a])}}return t}},{key:"getHTMLElementPosition",value:function(e){if(ws.platform===ws.WECHAT_GAME)return{left:0,top:0,width:window.innerWidth,height:window.innerHeight};var t=document.documentElement,i=ws.os===ws.OS_IOS&&ws.isBrowser?window.screenLeft:window.pageXOffset;i-=t.clientLeft;var n=ws.os===ws.OS_IOS&&ws.isBrowser?window.screenTop:window.pageYOffset;if(n-=t.clientTop,e.getBoundingClientRect){var r=e.getBoundingClientRect();return{left:r.left+i,top:r.top+n,width:r.width,height:r.height}}return e instanceof HTMLCanvasElement?{left:i,top:n,width:e.width,height:e.height}:{left:i,top:n,width:parseInt(e.style.width||"0",void 0),height:parseInt(e.style.height||"0",void 0)}}},{key:"getPreTouch",value:function(e){for(var t=null,i=this._preTouchPool,n=e.getID(),r=i.length-1;r>=0;r--)if(i[r].getID()===n){t=i[r];break}return t||(t=e),t}},{key:"setPreTouch",value:function(e){for(var t=!1,i=this._preTouchPool,n=e.getID(),r=i.length-1;r>=0;r--)if(i[r].getID()===n){i[r]=e,t=!0;break}t||(i.length<=50?i.push(e):(i[this._preTouchPoolPointer]=e,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))}},{key:"getTouchByXY",value:function(e,t,i,n){var r=this._preTouchPoint,o=this._glView.convertToLocationInView(t,i,n);this._pointLocked&&(o.x=r.x+e.movementX,o.y=r.y-e.movementY);var a=new YT(o.x,o.y,0);return a.setPrevPoint(r.x,r.y),r.x=o.x,r.y=o.y,a}},{key:"getMouseEvent",value:function(e,t,i){var n=this._prevMousePoint,r=new Sv(i,!1,n);return n.x=e.x,n.y=e.y,this._glView._convertMouseToLocation(n,t),r.setLocation(n.x,n.y),r}},{key:"getPointByEvent",value:function(e,t){return null!=e.pageX?{x:e.pageX,y:e.pageY}:(ws.platform===ws.WECHAT_GAME?(t.left=0,t.top=0):(t.left-=document.body.scrollLeft,t.top-=document.body.scrollTop),{x:e.clientX,y:e.clientY})}},{key:"getTouchesByEvent",value:function(e,t){for(var i=[],n=this._glView,r=this._preTouchPoint,o=e.changedTouches.length,a=0;a<o;a++){var s=e.changedTouches[a];if(s){var l=void 0;l=ws.BROWSER_TYPE_FIREFOX===ws.browserType?n.convertToLocationInView(s.pageX,s.pageY,t,ZT):n.convertToLocationInView(s.clientX,s.clientY,t,ZT);var c=void 0;null!=s.identifier?(c=new YT(l.x,l.y,s.identifier),this.getPreTouch(c).getLocation(KT),c.setPrevPoint(KT.x,KT.y),this.setPreTouch(c)):(c=new YT(l.x,l.y)).setPrevPoint(r.x,r.y),r.x=l.x,r.y=l.y,i.push(c)}}return i}},{key:"registerSystemEvent",value:function(e){if(!this._isRegisterEvent&&e){this._glView=cc.view;var t=ws.isMobile,i="mouse"in ws.capabilities,n="touches"in ws.capabilities;ws.platform===ws.WECHAT_GAME&&(t=!1,n=!0,i=!1),i&&this._registerMouseEvents(e,t),window.navigator.msPointerEnabled&&this._registerMousePointerEvents(e),n&&this._registerTouchEvents(e),cc.sys.browserType!==cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB&&this._registerKeyboardEvent(),this._isRegisterEvent=!0}}},{key:"setAccelerometerEnabled",value:function(e){if(this._accelEnabled!==e){this._accelEnabled=e;var t=cc.director.getScheduler();t.enableForTarget(this),this._accelEnabled?(this._registerAccelerometerEvent(),this._accelCurTime=0,t.scheduleUpdate(this)):(this._unregisterAccelerometerEvent(),this._accelCurTime=0,t.unscheduleUpdate(this))}}},{key:"didAccelerate",value:function(e){if(this._accelEnabled){var t=this._acceleration,i=0,n=0,r=0;if(this._accelDeviceEvent===window.DeviceMotionEvent){var o=e.accelerationIncludingGravity;o&&(i=this._accelMinus*(o.x||0)*.1,n=this._accelMinus*(o.y||0)*.1,r=.1*(o.z||0))}else{var a=e;i=(a.gamma||0)/90*.981,n=-(a.beta||0)/90*.981,r=(a.alpha||0)/90*.981}if(cc.view._isRotated){var s=i;i=-n,n=s}t.x=i,t.y=n,t.z=r,t.timestamp=e.timeStamp||Date.now();var l=t.x;90===window.orientation?(t.x=-t.y,t.y=l):-90===window.orientation?(t.x=t.y,t.y=-l):180===window.orientation&&(t.x=-t.x,t.y=-t.y),cc.sys.os===cc.sys.OS_ANDROID&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_MOBILE_QQ&&(t.x=-t.x,t.y=-t.y)}}},{key:"update",value:function(e){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,Nv.dispatchEvent(new Cv(this._acceleration))),this._accelCurTime+=e}},{key:"setAccelerometerInterval",value:function(e){this._accelInterval!==e&&(this._accelInterval=e)}},{key:"_getUnUsedIndex",value:function(){for(var e=this._indexBitsUsed,t=cc.director.getCurrentTime(),i=0;i<this._maxTouches;i++){if(!(1&e))return this._indexBitsUsed|=1<<i,i;var n=this._touches[i];if(t-n.lastModified>QT){this._removeUsedIndexBit(i);var r=n.getID();return null!==r&&delete this._touchesIntegerDict[r],i}e>>=1}return-1}},{key:"_removeUsedIndexBit",value:function(e){if(!(e<0||e>=this._maxTouches)){var t=1<<e;t=~t,this._indexBitsUsed&=t}}},{key:"_registerMouseEvents",value:function(e,t){this._registerPointerLockEvent(),t||this._registerWindowMouseEvents(e),this._registerElementMouseEvents(e,t)}},{key:"_registerPointerLockEvent",value:function(){var e=this,t=function(){var t=cc.game.canvas;document.pointerLockElement===t||document.mozPointerLockElement===t?e._pointLocked=!0:e._pointLocked=!1};"onpointerlockchange"in document?document.addEventListener("pointerlockchange",t,!1):"onmozpointerlockchange"in document&&document.addEventListener("mozpointerlockchange",t,!1)}},{key:"_registerWindowMouseEvents",value:function(e){var t=this;window.addEventListener("mousedown",(function(){t._mousePressed=!0}),!1),window.addEventListener("mouseup",(function(i){if(t._mousePressed){t._mousePressed=!1;var n=t.getHTMLElementPosition(e),r=t.getPointByEvent(i,n);if(!rn(n.left,n.top,n.width,n.height).contains(new Oi(r.x,r.y))){t.handleTouchesEnd([t.getTouchByXY(i,r.x,r.y,n)]);var o=t.getMouseEvent(r,n,Sv.UP);o.setButton(i.button),Nv.dispatchEvent(o)}}}),!1)}},{key:"_registerElementMouseEvents",value:function(e,t){var i=this,n=function(t,n,r){e.addEventListener(t,(function(t){var o=i.getHTMLElementPosition(e),a=i.getPointByEvent(t,o),s=i.getMouseEvent(a,o,n);s.setButton(t.button),r(t,s,a,o),Nv.dispatchEvent(s),t.stopPropagation(),t.preventDefault()}))};t||(n("mousedown",Sv.DOWN,(function(t,n,r,o){i._mousePressed=!0,i.handleTouchesBegin([i.getTouchByXY(t,r.x,r.y,o)]),e.focus()})),n("mouseup",Sv.UP,(function(e,t,n,r){i._mousePressed=!1,i.handleTouchesEnd([i.getTouchByXY(e,n.x,n.y,r)])})),n("mousemove",Sv.MOVE,(function(e,t,n,r){i.handleTouchesMove([i.getTouchByXY(e,n.x,n.y,r)]),i._mousePressed||t.setButton(Sv.BUTTON_MISSING),void 0!==e.movementX&&void 0!==e.movementY&&(t.movementX=e.movementX,t.movementY=e.movementY)}))),n("mousewheel",Sv.SCROLL,(function(e,t,i,n){t.setScrollData(0,e.wheelDelta)})),n("DOMMouseScroll",Sv.SCROLL,(function(e,t,i,n){t.setScrollData(0,-120*e.detail)}))}},{key:"_registerMousePointerEvents",value:function(e){var t=this,i={MSPointerDown:this.handleTouchesBegin,MSPointerMove:this.handleTouchesMove,MSPointerUp:this.handleTouchesEnd,MSPointerCancel:this.handleTouchesCancel},n=function(n){var r=i[n];e.addEventListener(n,(function(i){var n=t.getHTMLElementPosition(e);n.left-=document.documentElement.scrollLeft,n.top-=document.documentElement.scrollTop,r.call(t,[t.getTouchByXY(i,i.clientX,i.clientY,n)]),i.stopPropagation()}),!1)};for(var r in i)n(r)}},{key:"_registerTouchEvents",value:function(e){cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB?this._registerWXGameTouchEvents(e):this._registerHTMLTouchEvents(e)}},{key:"_registerWXGameTouchEvents",value:function(e){var t=this,i=function(i){return function(n){var r=t.getHTMLElementPosition(e),o=document.body;r.left-=o.scrollLeft||0,r.top-=o.scrollTop||0,i(t.getTouchesByEvent(n,r))}};wx.onTouchStart(i((function(e){t.handleTouchesBegin(e)}))),wx.onTouchEnd(i((function(e){t.handleTouchesEnd(e)}))),wx.onTouchMove(i((function(e){t.handleTouchesMove(e)}))),wx.onTouchCancel(i((function(e){t.handleTouchesCancel(e)})))}},{key:"_registerHTMLTouchEvents",value:function(e){var t=this,i=function(i){return function(n){if(n.changedTouches){var r=t.getHTMLElementPosition(e),o=document.body;r.left-=o.scrollLeft||0,r.top-=o.scrollTop||0,i(t.getTouchesByEvent(n,r)),n.stopPropagation(),n.preventDefault()}}};e.addEventListener("touchstart",i((function(i){t.handleTouchesBegin(i),ws.platform!==ws.WECHAT_GAME&&e.focus()})),!1),e.addEventListener("touchmove",i((function(e){t.handleTouchesMove(e)})),!1),e.addEventListener("touchend",i((function(e){t.handleTouchesEnd(e)})),!1),e.addEventListener("touchcancel",i((function(e){t.handleTouchesCancel(e)})),!1)}},{key:"_registerKeyboardEvent",value:function(){var e=cc.game.canvas;e.addEventListener("keydown",(function(e){Nv.dispatchEvent(new wv(e,!0)),e.stopPropagation(),e.preventDefault()}),!1),e.addEventListener("keyup",(function(e){Nv.dispatchEvent(new wv(e,!1)),e.stopPropagation(),e.preventDefault()}),!1)}},{key:"_registerAccelerometerEvent",value:function(){var e=this;this._acceleration=new JT,this._accelDeviceEvent=window.DeviceMotionEvent||window.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent);var t=this._accelDeviceEvent===window.DeviceMotionEvent?"devicemotion":"deviceorientation";qT=function(){return e.didAccelerate.apply(e,arguments)},window.addEventListener(t,qT,!1)}},{key:"_unregisterAccelerometerEvent",value:function(){var e=this._accelDeviceEvent===window.DeviceMotionEvent?"devicemotion":"deviceorientation";qT&&window.removeEventListener(e,qT,!1)}}]),e}());cc.internal.inputManager=$T;var eS=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).frame=null,i.container=null,i.canvas=null,i.renderType=-1,i.eventTargetOn=ae(te(t.prototype),"on",ne(i)),i.eventTargetOnce=ae(te(t.prototype),"once",ne(i)),i.config={},i.onStart=null,i._persistRootNodes={},i._paused=!0,i._configLoaded=!1,i._isCloning=!1,i._inited=!1,i._rendererInitialized=!1,i._gfxDevice=null,i._intervalId=null,i._lastTime=null,i._frameTime=null,i._sceneInfos=[],i.collisionMatrix=[],i.groupList=[],i}return ee(t,xl),J(t,[{key:"setFrameRate",value:function(e){var t=this.config;"number"!=typeof e&&(e=parseInt(e),isNaN(e)&&(e=60)),t.frameRate=e,this._paused=!0,this._setAnimFrame(),this._runMainLoop()}},{key:"getFrameRate",value:function(){return this.config.frameRate||0}},{key:"step",value:function(){cc.director.mainLoop()}},{key:"pause",value:function(){this._paused||(this._paused=!0,this._intervalId&&(window.cAF(this._intervalId),this._intervalId=0))}},{key:"resume",value:function(){this._paused&&(this._paused=!1,this._runMainLoop())}},{key:"isPaused",value:function(){return this._paused}},{key:"restart",value:function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,(function(){for(var e in cc.game._persistRootNodes)cc.game.removePersistRootNode(cc.game._persistRootNodes[e]);cc.director.getScene().destroy(),cc.Object._deferredDestroy(),cc.director.purgeDirector(),cc.director.reset(),cc.game.onStart()}))}},{key:"end",value:function(){this._gfxDevice&&(this._gfxDevice.destroy(),this._gfxDevice=null),close()}},{key:"on",value:function(e,i,n,r){this._inited&&e===t.EVENT_ENGINE_INITED?i.call(n):this.eventTargetOn(e,i,n,r)}},{key:"once",value:function(e,i,n){this._inited&&e===t.EVENT_ENGINE_INITED?i.call(n):this.eventTargetOnce(e,i,n)}},{key:"init",value:function(e){return this._initConfig(e),this.config.assetOptions&&Id.init(this.config.assetOptions),this._initEngine(),cc.internal.SplashScreenWebgl&&this.canvas&&cc.internal.SplashScreenWebgl.instance.main(this.canvas),cc.director.root.dataPoolManager.jointTexturePool.registerCustomTextureLayouts(e.customJointTextureLayouts),this._inited}},{key:"run",value:function(e,i){var n=this;if(this._initEvents(),"function"!=typeof e&&i){var r=this.onStart;this.init(r),this.onStart=i}else this.onStart=e;this._setAnimFrame(),this._runMainLoop(),tS.config.registerSystemEvent&&$T.registerSystemEvent(tS.canvas);var o=cc.internal.SplashScreenWebgl&&cc.internal.SplashScreenWebgl.instance,a=o;a&&o.setOnFinish((function(){n.onStart&&n.onStart()}));var s=this.config.renderPipeline;s?cc.loader.load({uuid:s},(function(e,i){!e&&i instanceof Zx?n.setRenderPipeline(i):(console.warn("Failed load renderpipeline: ".concat(s,", engine failed to initialize, all process stopped")),console.warn(e)),n._safeEmit(t.EVENT_GAME_INITED),a?o.loadFinish=!0:n.onStart&&n.onStart()})):(this._safeEmit(t.EVENT_GAME_INITED),a?o.loadFinish=!0:this.onStart&&this.onStart())}},{key:"addPersistRootNode",value:function(e){if(cc.Node.isNode(e)&&e.uuid){var t=e.uuid;if(!this._persistRootNodes[t]){var i=cc.director._scene;if(cc.isValid(i))if(e.parent){if(!(e.parent instanceof cc.Scene))return void g(3801);if(e.parent!==i)return void g(3802)}else e.parent=i;this._persistRootNodes[t]=e,e._persistNode=!0}}else g(3800)}},{key:"removePersistRootNode",value:function(e){var t=e.uuid||"";e===this._persistRootNodes[t]&&(delete this._persistRootNodes[t],e._persistNode=!1)}},{key:"isPersistRootNode",value:function(e){return e._persistNode}},{key:"_initEngine",value:function(){this._initDevice(),cc.director._init(),this.setRenderPipeline(),console.log("Cocos Creator 3D v"+cc.ENGINE_VERSION),this._safeEmit(t.EVENT_ENGINE_INITED),this._inited=!0}},{key:"_setAnimFrame",value:function(){this._lastTime=new Date;var e=cc.game.config.frameRate;this._frameTime=1e3/e,this._intervalId&&(window.cAF(this._intervalId),this._intervalId=0),60!==e&&30!==e?(window.rAF=this._stTime,window.cAF=this._ctTime):(window.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cAF=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.ocancelAnimationFrame||this._ctTime)}},{key:"_stTime",value:function(e){var t=(new Date).getTime(),i=Math.max(0,cc.game._frameTime-(t-cc.game._lastTime)),n=window.setTimeout(e,i);return cc.game._lastTime=t+i,n}},{key:"_ctTime",value:function(e){window.clearTimeout(e)}},{key:"_runMainLoop",value:function(){var e,t=this,i=this.config,n=cc.director,r=!0,o=i.frameRate;w(!!i.showFPS),n.startAnimation(),e=function(i){t._paused||(t._intervalId=window.rAF(e),30===o&&(r=!r)||n.mainLoop(i))},this._intervalId&&(window.cAF(this._intervalId),this._intervalId=0),this._intervalId=window.rAF(e),this._paused=!1}},{key:"_initConfig",value:function(e){"number"!=typeof e.debugMode&&(e.debugMode=0),e.exposeClassName=!!e.exposeClassName,"number"!=typeof e.frameRate&&(e.frameRate=60);var t=e.renderMode;("number"!=typeof t||t>2||t<0)&&(e.renderMode=0),"boolean"!=typeof e.registerSystemEvent&&(e.registerSystemEvent=!0),e.showFPS=!!e.showFPS,this._sceneInfos=e.scenes||[],this.collisionMatrix=e.collisionMatrix||[],this.groupList=e.groupList||[],f(e.debugMode),this.config=e,this._configLoaded=!0}},{key:"_determineRenderType",value:function(){var e=this.config,i=parseInt(e.renderMode);this.renderType=t.RENDER_TYPE_CANVAS;var n=!1;if(0===i?cc.sys.capabilities.opengl?(this.renderType=t.RENDER_TYPE_WEBGL,n=!0):cc.sys.capabilities.canvas&&(this.renderType=t.RENDER_TYPE_CANVAS,n=!0):1===i&&cc.sys.capabilities.canvas?(this.renderType=t.RENDER_TYPE_CANVAS,n=!0):2===i&&cc.sys.capabilities.opengl&&(this.renderType=t.RENDER_TYPE_WEBGL,n=!0),!n)throw new Error(E(3820,i))}},{key:"_initDevice",value:function(){if(!this._rendererInitialized){if(this.canvas=this.config.adapter.canvas,this.frame=this.config.adapter.frame,this.container=this.config.adapter.container,this._determineRenderType(),this.renderType===t.RENDER_TYPE_WEBGL){var e=!!window.WebGL2RenderingContext,i=window.navigator.userAgent.toLowerCase();(-1!==i.indexOf("safari")&&-1===i.indexOf("chrome")||ws.browserType===ws.BROWSER_TYPE_UC)&&(e=!1),e&&cc.WebGL2GFXDevice?this._gfxDevice=new cc.WebGL2GFXDevice:cc.WebGLGFXDevice&&(this._gfxDevice=new cc.WebGLGFXDevice);var n={canvasElm:this.canvas,debug:!0,isAntialias:_c.ENABLE_WEBGL_ANTIALIAS,devicePixelRatio:window.devicePixelRatio,nativeWidth:Math.floor(screen.width*window.devicePixelRatio),nativeHeight:Math.floor(screen.height*window.devicePixelRatio)};!this._gfxDevice.initialize(n)&&e&&(this._gfxDevice=new cc.WebGLGFXDevice,this._gfxDevice.initialize(n))}if(!this._gfxDevice)return console.error("can not support canvas rendering in 3D"),void(this.renderType=t.RENDER_TYPE_CANVAS);this.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1}}}},{key:"_initEvents",value:function(){var e,i=window;void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden");var n=!1;function r(){n||(n=!0,cc.game.emit(t.EVENT_HIDE))}function o(){n&&(n=!1,cc.game.emit(t.EVENT_SHOW))}if(e)for(var a=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],s=0;s<a.length;s++)document.addEventListener(a[s],(function(t){var i=document[e];(i=i||t.hidden)?r():o()}));else i.addEventListener("blur",r),i.addEventListener("focus",o);window.navigator.userAgent.indexOf("MicroMessenger")>-1&&(i.onfocus=o),"onpageshow"in window&&"onpagehide"in window&&(i.addEventListener("pagehide",r),i.addEventListener("pageshow",o),document.addEventListener("pagehide",r),document.addEventListener("pageshow",o)),this.on(t.EVENT_HIDE,(function(){cc.game.pause()})),this.on(t.EVENT_SHOW,(function(){cc.game.resume()}))}},{key:"setRenderPipeline",value:function(e){e||(e=new HT).initialize(HT.initInfo),cc.director.root.setRenderPipeline(e)||this.setRenderPipeline(),this._rendererInitialized=!0,this._safeEmit(t.EVENT_RENDERER_INITED)}},{key:"_safeEmit",value:function(e){this.emit(e)}},{key:"inited",get:function(){return this._inited}}]),t}();eS.EVENT_HIDE="game_on_hide",eS.EVENT_SHOW="game_on_show",eS.EVENT_GAME_INITED="game_inited",eS.EVENT_ENGINE_INITED="engine_inited",eS.EVENT_RENDERER_INITED="renderer_inited",eS.RENDER_TYPE_CANVAS=0,eS.RENDER_TYPE_WEBGL=1,eS.RENDER_TYPE_OPENGL=2,cc.Game=eS;var tS=cc.game=new eS,iS=new(function(){function e(){Z(this,e),this.html=void 0,this.meta={width:"device-width"},this.adaptationType=cc.sys.browserType}return J(e,[{key:"init",value:function(){}},{key:"availWidth",value:function(e){return cc.sys.isMobile||!e||e===this.html?window.innerWidth:e.clientWidth}},{key:"availHeight",value:function(e){return cc.sys.isMobile||!e||e===this.html?window.innerHeight:e.clientHeight}}]),e}());switch(cc.sys.os===cc.sys.OS_IOS&&(iS.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),iS.adaptationType=cc.sys.BROWSER_TYPE_WECHAT_GAME,iS.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:iS.meta["minimal-ui"]="true";case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:iS.availWidth=function(e){return e.clientWidth},iS.availHeight=function(e){return e.clientHeight};break;case cc.sys.BROWSER_TYPE_WECHAT_GAME:iS.availWidth=function(){return window.innerWidth},iS.availHeight=function(){return window.innerHeight};break;case cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB:var nS=window.sharedCanvas||wx.getSharedCanvas();iS.availWidth=function(){return nS.width},iS.availHeight=function(){return nS.height}}var rS=function(e){function t(){var e;Z(this,t),(e=re(this,te(t).call(this)))._resizeWithBrowserSize=void 0,e._designResolutionSize=void 0,e._originalDesignResolutionSize=void 0,e._frameSize=void 0,e._scaleX=void 0,e._scaleY=void 0,e._viewportRect=void 0,e._visibleRect=void 0,e._autoFullScreen=void 0,e._devicePixelRatio=void 0,e._maxPixelRatio=void 0,e._retinaEnabled=void 0,e._resizeCallback=void 0,e._resizing=void 0,e._orientationChanging=void 0,e._isRotated=void 0,e._orientation=void 0,e._isAdjustViewport=void 0,e._antiAliasEnabled=void 0,e._resolutionPolicy=void 0,e._rpExactFit=void 0,e._rpShowAll=void 0,e._rpNoBorder=void 0,e._rpFixedHeight=void 0,e._rpFixedWidth=void 0;ne(e);var i=oS,n=aS;return e._frameSize=new en(0,0),e._designResolutionSize=new en(0,0),e._originalDesignResolutionSize=new en(0,0),e._scaleX=1,e._scaleY=1,e._viewportRect=new nn(0,0,0,0),e._visibleRect=new nn(0,0,0,0),e._autoFullScreen=!1,e._devicePixelRatio=1,e._maxPixelRatio=2,e._retinaEnabled=!1,e._resizeCallback=null,e._resizing=!1,e._resizeWithBrowserSize=!1,e._orientationChanging=!0,e._isRotated=!1,e._orientation=cc.macro.ORIENTATION_AUTO,e._isAdjustViewport=!0,e._antiAliasEnabled=!1,e._rpExactFit=new sS(i.EQUAL_TO_FRAME,n.EXACT_FIT),e._rpShowAll=new sS(i.EQUAL_TO_FRAME,n.SHOW_ALL),e._rpNoBorder=new sS(i.EQUAL_TO_FRAME,n.NO_BORDER),e._rpFixedHeight=new sS(i.EQUAL_TO_FRAME,n.FIXED_HEIGHT),e._rpFixedWidth=new sS(i.EQUAL_TO_FRAME,n.FIXED_WIDTH),e._resolutionPolicy=e._rpShowAll,cc.game.once(cc.Game.EVENT_ENGINE_INITED,e.init,ne(e)),e}return ee(t,xl),J(t,[{key:"init",value:function(){iS.init(),this._initFrameSize(),this.enableAntiAlias(!0);var e=cc.game.canvas.width,t=cc.game.canvas.height;this._designResolutionSize.width=e,this._designResolutionSize.height=t,this._originalDesignResolutionSize.width=e,this._originalDesignResolutionSize.height=t,this._viewportRect.width=e,this._viewportRect.height=t,this._visibleRect.width=e,this._visibleRect.height=t,cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect)}},{key:"resizeWithBrowserSize",value:function(e){e?this._resizeWithBrowserSize||(this._resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._orientationChange)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._orientationChange))}},{key:"setResizeCallback",value:function(e){"function"!=typeof e&&null!=e||(this._resizeCallback=e)}},{key:"setOrientation",value:function(e){(e&=cc.macro.ORIENTATION_AUTO)&&this._orientation!==e&&(this._orientation=e)}},{key:"adjustViewportMeta",value:function(e){this._isAdjustViewport=e}},{key:"enableRetina",value:function(e){this._retinaEnabled=!!e}},{key:"isRetinaEnabled",value:function(){return this._retinaEnabled}},{key:"enableAntiAlias",value:function(e){if(this._antiAliasEnabled!==e)if(this._antiAliasEnabled=e,cc.game.renderType===cc.Game.RENDER_TYPE_WEBGL){var t=cc.loader._cache;for(var i in t){var n=t[i],r=n&&n.content instanceof cc.Texture2D?n.content:null;if(r){var o=cc.Texture2D.Filter;e?r.setFilters(o.LINEAR,o.LINEAR):r.setFilters(o.NEAREST,o.NEAREST)}}}else if(cc.game.renderType===cc.Game.RENDER_TYPE_CANVAS){var a=cc.game.canvas.getContext("2d");a.imageSmoothingEnabled=e,a.mozImageSmoothingEnabled=e}}},{key:"isAntiAliasEnabled",value:function(){return this._antiAliasEnabled}},{key:"enableAutoFullScreen",value:function(e){e&&e!==this._autoFullScreen&&cc.sys.isMobile&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_WECHAT?(this._autoFullScreen=!0,cc.screen.autoFullScreen(cc.game.frame)):this._autoFullScreen=!1}},{key:"isAutoFullScreenEnabled",value:function(){return this._autoFullScreen}},{key:"setCanvasSize",value:function(e,t){var i=cc.game.canvas,n=cc.game.container;this._devicePixelRatio=window.devicePixelRatio,i.width=e*this._devicePixelRatio,i.height=t*this._devicePixelRatio,i.style.width=e+"px",i.style.height=t+"px",n.style.width=e+"px",n.style.height=t+"px",this._resizeEvent()}},{key:"getCanvasSize",value:function(){return new en(cc.game.canvas.width,cc.game.canvas.height)}},{key:"getFrameSize",value:function(){return new en(this._frameSize.width,this._frameSize.height)}},{key:"setFrameSize",value:function(e,t){this._frameSize.width=e,this._frameSize.height=t,cc.frame.style.width=e+"px",cc.frame.style.height=t+"px",this._resizeEvent()}},{key:"getVisibleSize",value:function(){return new en(this._visibleRect.width,this._visibleRect.height)}},{key:"getVisibleSizeInPixel",value:function(){return new en(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)}},{key:"getVisibleOrigin",value:function(){return new Oi(this._visibleRect.x,this._visibleRect.y)}},{key:"getVisibleOriginInPixel",value:function(){return new Oi(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)}},{key:"getResolutionPolicy",value:function(){return this._resolutionPolicy}},{key:"setResolutionPolicy",value:function(e){var t=this;if(e instanceof sS)t._resolutionPolicy=e;else{var i=sS;e===i.EXACT_FIT&&(t._resolutionPolicy=t._rpExactFit),e===i.SHOW_ALL&&(t._resolutionPolicy=t._rpShowAll),e===i.NO_BORDER&&(t._resolutionPolicy=t._rpNoBorder),e===i.FIXED_HEIGHT&&(t._resolutionPolicy=t._rpFixedHeight),e===i.FIXED_WIDTH&&(t._resolutionPolicy=t._rpFixedWidth)}}},{key:"setDesignResolutionSize",value:function(e,t,i){if(e>0||t>0){this.setResolutionPolicy(i);var n=this._resolutionPolicy;if(n&&n.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._orientationChanging=!0,this._resizing||this._initFrameSize(),n){this._originalDesignResolutionSize.width=this._designResolutionSize.width=e,this._originalDesignResolutionSize.height=this._designResolutionSize.height=t;var r=n.apply(this,this._designResolutionSize);if(r.scale&&2===r.scale.length&&(this._scaleX=r.scale[0],this._scaleY=r.scale[1]),r.viewport){var o=this._viewportRect,a=this._visibleRect,s=r.viewport;o.x=s.x,o.y=s.y,o.width=s.width,o.height=s.height,a.x=0,a.y=0,a.width=s.width/this._scaleX,a.height=s.height/this._scaleY}n.postApply(this),cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,$x&&$x.init(this._visibleRect),this.emit("design-resolution-changed")}else cc.logID(2201)}else cc.logID(2200)}},{key:"getDesignResolutionSize",value:function(){return new en(this._designResolutionSize.width,this._designResolutionSize.height)}},{key:"setRealPixelResolution",value:function(e,t,i){this.setDesignResolutionSize(e,t,i)}},{key:"getViewportRect",value:function(){return this._viewportRect}},{key:"getScaleX",value:function(){return this._scaleX}},{key:"getScaleY",value:function(){return this._scaleY}},{key:"getDevicePixelRatio",value:function(){return this._devicePixelRatio}},{key:"convertToLocationInView",value:function(e,t,i,n){var r=n||new Oi,o=this._devicePixelRatio*(e-i.left),a=this._devicePixelRatio*(i.top+i.height-t);return this._isRotated?(r.x=cc.game.canvas.width-a,r.y=o):(r.x=o,r.y=a),r}},{key:"_convertPointWithScale",value:function(e){var t=this._viewportRect;e.x=(e.x-t.x)/this._scaleX,e.y=(e.y-t.y)/this._scaleY}},{key:"_resizeEvent",value:function(){var e=cc.view,t=e._frameSize.width,i=e._frameSize.height,n=e._isRotated;if(cc.sys.isMobile){var r=cc.game.container.style,o=r.margin;r.margin="0",r.display="none",e._initFrameSize(),r.margin=o,r.display="block"}else e._initFrameSize();if(e._orientationChanging||e._isRotated!==n||e._frameSize.width!==t||e._frameSize.height!==i){var a=e._originalDesignResolutionSize.width,s=e._originalDesignResolutionSize.height;e._resizing=!0,a>0&&e.setDesignResolutionSize(a,s,e._resolutionPolicy),e._resizing=!1,e._resizeCallback&&e._resizeCallback.call()}}},{key:"_orientationChange",value:function(){cc.view._orientationChanging=!0,cc.view._resizeEvent()}},{key:"_initFrameSize",value:function(){var e=this._frameSize,t=iS.availWidth(cc.game.frame),i=iS.availHeight(cc.game.frame),n=t>=i;!cc.sys.isMobile||n&&this._orientation&cc.macro.ORIENTATION_LANDSCAPE||!n&&this._orientation&cc.macro.ORIENTATION_PORTRAIT?(e.width=t,e.height=i,cc.game.container.style["-webkit-transform"]="rotate(0deg)",cc.game.container.style.transform="rotate(0deg)",this._isRotated=!1):(e.width=i,e.height=t,cc.game.container.style["-webkit-transform"]="rotate(90deg)",cc.game.container.style.transform="rotate(90deg)",cc.game.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.game.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0,cc.game.canvas.style["-webkit-transform"]="translateZ(0px)",cc.game.canvas.style.transform="translateZ(0px)"),this._orientationChanging&&setTimeout((function(){cc.view._orientationChanging=!1}),1e3)}},{key:"_adjustSizeKeepCanvasSize",value:function(){var e=this._originalDesignResolutionSize.width,t=this._originalDesignResolutionSize.height;e>0&&this.setDesignResolutionSize(e,t,this._resolutionPolicy)}},{key:"_setViewportMeta",value:function(e,t){var i=document.getElementById("cocosMetaElement");i&&t&&document.head.removeChild(i);var n,r,o,a=document.getElementsByName("viewport"),s=a?a[0]:null;for(r in n=s?s.content:"",(i=i||document.createElement("meta")).id="cocosMetaElement",i.name="viewport",i.content="",e)-1===n.indexOf(r)?n+=","+r+"="+e[r]:t&&(o=new RegExp(r+"s*=s*[^,]+"),n.replace(o,r+"="+e[r]));/^,/.test(n)&&(n=n.substr(1)),i.content=n,s&&(s.content=n),document.head.appendChild(i)}},{key:"_adjustViewportMeta",value:function(){this._isAdjustViewport,0}},{key:"_convertMouseToLocation",value:function(e,t){e.x=this._devicePixelRatio*(e.x-t.left),e.y=this._devicePixelRatio*(t.top+t.height-e.y)}},{key:"_convertTouchWidthScale",value:function(e){var t=this._viewportRect,i=this._scaleX,n=this._scaleY;e._point.x=(e._point.x-t.x)/i,e._point.y=(e._point.y-t.y)/n,e._prevPoint.x=(e._prevPoint.x-t.x)/i,e._prevPoint.y=(e._prevPoint.y-t.y)/n}},{key:"_convertTouchesWithScale",value:function(e){for(var t,i,n=this._viewportRect,r=this._scaleX,o=this._scaleY,a=0;a<e.length;a++){var s=e[a];t=s._point,i=s._prevPoint,t.x=(t.x-n.x)/r,t.y=(t.y-n.y)/o,i.x=(i.x-n.x)/r,i.y=(i.y-n.y)/o}}}]),t}();rS.instance=void 0;var oS=function(){function e(){Z(this,e),this.name="ContainerStrategy"}return J(e,[{key:"preApply",value:function(e){}},{key:"apply",value:function(e,t){}},{key:"postApply",value:function(e){}},{key:"_setupContainer",value:function(e,t,i){var n=cc.game.canvas,r=cc.game.container;cc.sys.platform!==cc.sys.WECHAT_GAME&&(cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(e._isRotated?i:t)+"px",document.body.style.height=(e._isRotated?t:i)+"px"),r.style.width=n.style.width=t+"px",r.style.height=n.style.height=i+"px");var o=e._devicePixelRatio=1;e.isRetinaEnabled()&&(o=e._devicePixelRatio=Math.min(e._maxPixelRatio,window.devicePixelRatio||1)),n.width=t*o,n.height=i*o}},{key:"_fixContainer",value:function(){document.body.insertBefore(cc.game.container,document.body.firstChild);var e=document.body.style;e.width=window.innerWidth+"px",e.height=window.innerHeight+"px",e.overflow="hidden";var t=cc.game.container.style;t.position="fixed",t.left=t.top="0px",document.body.scrollTop=0}}]),e}();oS.EQUAL_TO_FRAME=void 0,oS.PROPORTION_TO_FRAME=void 0;var aS=function(){function e(){Z(this,e),this.name="ContentStrategy",this._result=void 0,this._result={scale:[1,1],viewport:null}}return J(e,[{key:"preApply",value:function(e){}},{key:"apply",value:function(e,t){return{scale:[1,1]}}},{key:"postApply",value:function(e){}},{key:"_buildResult",value:function(e,t,i,n,r,o){Math.abs(e-i)<2&&(i=e),Math.abs(t-n)<2&&(n=t);var a=new nn(Math.round((e-i)/2),Math.round((t-n)/2),i,n);return this._result.scale=[r,o],this._result.viewport=a,this._result}}]),e}();aS.EXACT_FIT=void 0,aS.SHOW_ALL=void 0,aS.NO_BORDER=void 0,aS.FIXED_HEIGHT=void 0,aS.FIXED_WIDTH=void 0,function(){var e=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="EqualToFrame",i}return ee(t,oS),J(t,[{key:"apply",value:function(e){var t=e._frameSize.height,i=cc.game.container.style;this._setupContainer(e,e._frameSize.width,e._frameSize.height),e._isRotated?i.margin="0 0 0 "+t+"px":i.margin="0px",i.padding="0px"}}]),t}(),t=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="ProportionalToFrame",i}return ee(t,oS),J(t,[{key:"apply",value:function(e,t){var i,n,r=e._frameSize.width,o=e._frameSize.height,a=cc.game.container.style,s=t.width,l=t.height,c=r/s,u=o/l;c<u?(i=r,n=l*c):(i=s*u,n=o);var h=Math.round((r-i)/2),p=Math.round((o-n)/2);i=r-2*h,n=o-2*p,this._setupContainer(e,i,n),e._isRotated?a.margin="0 0 0 "+o+"px":a.margin="0px",a.paddingLeft=h+"px",a.paddingRight=h+"px",a.paddingTop=p+"px",a.paddingBottom=p+"px"}}]),t}(),i=("undefined"==typeof window?global:window).__globalAdapter;i&&(i.adaptContainerStrategy&&i.adaptContainerStrategy(oS.prototype),i.adaptView&&i.adaptView(rS.prototype)),oS.EQUAL_TO_FRAME=new e,oS.PROPORTION_TO_FRAME=new t;var n=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="ExactFit",i}return ee(t,aS),J(t,[{key:"apply",value:function(e,t){var i=cc.game.canvas.width,n=cc.game.canvas.height,r=i/t.width,o=n/t.height;return this._buildResult(i,n,i,n,r,o)}}]),t}(),r=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="ShowAll",i}return ee(t,aS),J(t,[{key:"apply",value:function(e,t){var i,n,r=cc.game.canvas.width,o=cc.game.canvas.height,a=t.width,s=t.height,l=r/a,c=o/s,u=0;return l<c?(i=r,n=s*(u=l)):(i=a*(u=c),n=o),this._buildResult(r,o,i,n,u,u)}}]),t}(),o=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="NoBorder",i}return ee(t,aS),J(t,[{key:"apply",value:function(e,t){var i,n,r,o=cc.game.canvas.width,a=cc.game.canvas.height,s=t.width,l=t.height,c=o/s,u=a/l;return c<u?(n=s*(i=u),r=a):(n=o,r=l*(i=c)),this._buildResult(o,a,n,r,i,i)}}]),t}(),a=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="FixedHeight",i}return ee(t,aS),J(t,[{key:"apply",value:function(e,t){var i=cc.game.canvas.width,n=cc.game.canvas.height,r=n/t.height,o=i,a=n;return this._buildResult(i,n,o,a,r,r)}}]),t}(),s=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).name="FixedWidth",i}return ee(t,aS),J(t,[{key:"apply",value:function(e,t){var i=cc.game.canvas.width,n=cc.game.canvas.height,r=i/t.width,o=i,a=n;return this._buildResult(i,n,o,a,r,r)}}]),t}();aS.EXACT_FIT=new n,aS.SHOW_ALL=new r,aS.NO_BORDER=new o,aS.FIXED_HEIGHT=new a,aS.FIXED_WIDTH=new s}();var sS=function(){function e(t,i){Z(this,e),this.name="ResolutionPolicy",this._containerStrategy=void 0,this._contentStrategy=void 0,this._containerStrategy=null,this._contentStrategy=null,this.setContainerStrategy(t),this.setContentStrategy(i)}return J(e,[{key:"preApply",value:function(e){this._containerStrategy.preApply(e),this._contentStrategy.preApply(e)}},{key:"apply",value:function(e,t){return this._containerStrategy.apply(e,t),this._contentStrategy.apply(e,t)}},{key:"postApply",value:function(e){this._containerStrategy.postApply(e),this._contentStrategy.postApply(e)}},{key:"setContainerStrategy",value:function(e){e instanceof oS&&(this._containerStrategy=e)}},{key:"setContentStrategy",value:function(e){e instanceof aS&&(this._contentStrategy=e)}},{key:"canvasSize",get:function(){return cc.v2(cc.game.canvas.width,cc.game.canvas.height)}}]),e}();sS.EXACT_FIT=0,sS.NO_BORDER=1,sS.SHOW_ALL=2,sS.FIXED_HEIGHT=3,sS.FIXED_WIDTH=4,sS.UNKNOWN=5,sS.ContainerStrategy=oS,sS.ContentStrategy=aS,cc.ResolutionPolicy=sS;var lS=rS.instance=cc.view=new rS;cc.winSize=new Oi;var cS=null,uS=null,hS=null,pS=null,fS=function(e){function t(){return Z(this,t),re(this,te(t).call(this))}return ee(t,xl),J(t,[{key:"setAccelerometerEnabled",value:function(e){e&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(e){console.log("Device Motion Event request permission: ".concat(e)),$T.setAccelerometerEnabled("granted"===e)})):$T.setAccelerometerEnabled(e)}},{key:"setAccelerometerInterval",value:function(e){$T.setAccelerometerInterval(e)}},{key:"on",value:function(e,i,n,r){return ae(te(t.prototype),"on",this).call(this,e,i,n,r),e!==exports.SystemEventType.KEY_DOWN&&e!==exports.SystemEventType.KEY_UP||cS||(cS=kv.create({event:kv.KEYBOARD,onKeyPressed:function(e,t){t.type=exports.SystemEventType.KEY_DOWN,_S.emit(t.type,t)},onKeyReleased:function(e,t){t.type=exports.SystemEventType.KEY_UP,_S.emit(t.type,t)}}),Nv.addListener(cS,256)),e===exports.SystemEventType.DEVICEMOTION&&(uS||(uS=kv.create({event:kv.ACCELERATION,callback:function(e,t){t.type=exports.SystemEventType.DEVICEMOTION,cc.systemEvent.emit(t.type,t)}}),Nv.addListener(uS,256))),e!==exports.SystemEventType.TOUCH_START&&e!==exports.SystemEventType.TOUCH_MOVE&&e!==exports.SystemEventType.TOUCH_END&&e!==exports.SystemEventType.TOUCH_CANCEL||hS||(hS=kv.create({event:kv.TOUCH_ONE_BY_ONE,onTouchBegan:function(e,t){return t.type=exports.SystemEventType.TOUCH_START,cc.systemEvent.emit(t.type,e,t),!0},onTouchMoved:function(e,t){t.type=exports.SystemEventType.TOUCH_MOVE,cc.systemEvent.emit(t.type,e,t)},onTouchEnded:function(e,t){t.type=exports.SystemEventType.TOUCH_END,cc.systemEvent.emit(t.type,e,t)},onTouchCancelled:function(e,t){t.type=exports.SystemEventType.TOUCH_CANCEL,cc.systemEvent.emit(t.type,e,t)}}),Nv.addListener(hS,256)),e!==exports.SystemEventType.MOUSE_DOWN&&e!==exports.SystemEventType.MOUSE_MOVE&&e!==exports.SystemEventType.MOUSE_UP&&e!==exports.SystemEventType.MOUSE_WHEEL||pS||(pS=kv.create({event:kv.MOUSE,onMouseDown:function(e){e.type=exports.SystemEventType.MOUSE_DOWN,cc.systemEvent.emit(e.type,e)},onMouseMove:function(e){e.type=exports.SystemEventType.MOUSE_MOVE,cc.systemEvent.emit(e.type,e)},onMouseUp:function(e){e.type=exports.SystemEventType.MOUSE_UP,cc.systemEvent.emit(e.type,e)},onMouseScroll:function(e){e.type=exports.SystemEventType.MOUSE_WHEEL,cc.systemEvent.emit(e.type,e)}}),Nv.addListener(pS,256)),i}},{key:"off",value:function(e,i,n){if(ae(te(t.prototype),"off",this).call(this,e,i,n),cS&&(e===exports.SystemEventType.KEY_DOWN||e===exports.SystemEventType.KEY_UP)){var r=this.hasEventListener(exports.SystemEventType.KEY_DOWN),o=this.hasEventListener(exports.SystemEventType.KEY_UP);r||o||(Nv.removeListener(cS),cS=null)}if(uS&&e===exports.SystemEventType.DEVICEMOTION&&(Nv.removeListener(uS),uS=null),hS&&(e===exports.SystemEventType.TOUCH_START||e===exports.SystemEventType.TOUCH_MOVE||e===exports.SystemEventType.TOUCH_END||e===exports.SystemEventType.TOUCH_CANCEL)){var a=this.hasEventListener(exports.SystemEventType.TOUCH_START),s=this.hasEventListener(exports.SystemEventType.TOUCH_MOVE),l=this.hasEventListener(exports.SystemEventType.TOUCH_END),c=this.hasEventListener(exports.SystemEventType.TOUCH_CANCEL);a||s||l||c||(Nv.removeListener(hS),hS=null)}if(pS&&(e===exports.SystemEventType.MOUSE_DOWN||e===exports.SystemEventType.MOUSE_MOVE||e===exports.SystemEventType.MOUSE_UP||e===exports.SystemEventType.MOUSE_WHEEL)){var u=this.hasEventListener(exports.SystemEventType.MOUSE_DOWN),h=this.hasEventListener(exports.SystemEventType.MOUSE_MOVE),p=this.hasEventListener(exports.SystemEventType.MOUSE_UP),f=this.hasEventListener(exports.SystemEventType.MOUSE_WHEEL);u||h||p||f||(Nv.removeListener(pS),pS=null)}}}]),t}();fS.EventType=exports.SystemEventType,cc.SystemEvent=fS;var _S=new fS;cc.systemEvent=_S,exports.replaceProperty(exports.SystemEventType,"Node.EventType",[{name:"POSITION_PART",newName:"TRANSFORM_CHANGED"},{name:"ROTATION_PART",newName:"TRANSFORM_CHANGED"},{name:"SCALE_PART",newName:"TRANSFORM_CHANGED"}]);var dS={_supportsFullScreen:!1,_preOnFullScreenChange:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){this._fn={};var e,t,i,n,r=this._fnMap;for(e=0,t=r.length;e<t;e++)if((i=r[e])&&void 0!==document[i[1]]){for(e=0,n=i.length;e<n;e++)this._fn[r[0][e]]=i[e];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&(void 0!==document[this._fn.fullscreenElement]&&null!==document[this._fn.fullscreenElement])},requestFullScreen:function(e,t){if(this._supportsFullScreen){if(e=e||document.documentElement,t){var i=this._fn.fullscreenchange;this._preOnFullScreenChange&&document.removeEventListener(i,this._preOnFullScreenChange),this._preOnFullScreenChange=t,document.addEventListener(i,t,!1)}return e[this._fn.requestFullscreen]()}},exitFullScreen:function(){return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(e,t){e=e||document.body;var i=cc.game.canvas||e,n=this;this.requestFullScreen(e,t),i.addEventListener(this._touchEvent,(function r(){i.removeEventListener(n._touchEvent,r),n.requestFullScreen(e,t)}))}};dS.init(),cc.screen=dS;var mS,vS,yS=0,gS={},AS=function(e){if(void 0===gS[e]){var t=1<<yS;gS[e]=t,yS+=1}};function bS(e){return--e,e|=e>>16,e|=e>>8,e|=e>>4,e|=e>>2,e|=e>>1,++e}function xS(e,t){return Math.ceil(e/t)*t}!function(e){e[e.OPAQUE=0]="OPAQUE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OVERLAY=2]="OVERLAY"}(mS||(mS={})),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.FORWARD=2]="FORWARD",e[e.SHADOWCAST=4]="SHADOWCAST"}(vS||(vS={}));var TS,SS,ES,CS,wS,kS,OS=function(){function e(t){Z(this,e),this._device=void 0,this._format=exports.GFXFormat.UNKNOWN,this._formatSize=0,this._chunks=[],this._chunkCount=0,this._handles=[],this._region0=new vr,this._region1=new vr,this._region2=new vr,this._roundUpFn=null,this._bufferViewCtor=Uint8Array,this._channels=4,this._alignment=1,this._device=t}return J(e,[{key:"initialize",value:function(e){var t=yr[e.format];this._format=e.format,this._formatSize=t.size,this._channels=t.count,this._bufferViewCtor=Tr(t),this._roundUpFn=e.roundUpFn||null,this._alignment=e.alignment||1,e.inOrderFree&&(this.alloc=this._McDonaldAlloc)}},{key:"destroy",value:function(){for(var e=0;e<this._chunkCount;++e){var t=this._chunks[e];t.texView.destroy(),t.texture.destroy()}this._chunks.length=0,this._handles.length=0}},{key:"alloc",value:function(e,t){e=xS(e,this._alignment);var i=-1,n=-1;if(void 0!==t&&(i=t,n=this._findAvailableSpace(e,i)),n<0)for(var r=0;r<this._chunkCount&&(i=r,!((n=this._findAvailableSpace(e,i))>=0));++r);if(n>=0){var o=this._chunks[i];o.start+=e;var a={chunkIdx:i,start:n,end:n+e,texture:o.texture,texView:o.texView};return this._handles.push(a),a}var s=Math.sqrt(e/this._formatSize),l=this._roundUpFn&&this._roundUpFn(s,this._formatSize)||Math.max(1024,bS(s)),c=this._chunks[this.createChunk(l)];c.start+=e;var u={chunkIdx:this._chunkCount-1,start:0,end:e,texture:c.texture,texView:c.texView};return this._handles.push(u),u}},{key:"free",value:function(e){for(var t=0;t<this._handles.length;++t)if(this._handles[t]===e)return this._chunks[e.chunkIdx].end=e.end,void this._handles.splice(t,1)}},{key:"createChunk",value:function(e){var t=e*e*this._formatSize;console.info("TextureBufferPool: Allocate chunk "+this._chunkCount+", size: "+t+", format: "+this._format);var i=this._device.createTexture({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.SAMPLED,format:this._format,width:e,height:e,mipLevel:1}),n={texture:i,texView:this._device.createTextureView({texture:i,type:exports.GFXTextureViewType.TV2D,format:this._format}),size:t,start:0,end:t};return this._chunks[this._chunkCount]=n,this._chunkCount++}},{key:"update",value:function(e,t){var i=[],n=[],r=e.start/this._formatSize,o=t.byteLength/this._formatSize,a=r%e.texture.width,s=Math.floor(r/e.texture.width),l=Math.min(e.texture.width-a,o),c=0;a>0&&(this._region0.texOffset.x=a,this._region0.texOffset.y=s,this._region0.texExtent.width=l,this._region0.texExtent.height=1,i.push(new this._bufferViewCtor(t,c*this._formatSize,l*this._channels)),n.push(this._region0),a=0,s+=1,o-=l,c+=l),o>0&&(this._region1.texOffset.x=a,this._region1.texOffset.y=s,o>e.texture.width?(this._region1.texExtent.width=e.texture.width,this._region1.texExtent.height=Math.floor(o/e.texture.width),l=this._region1.texExtent.width*this._region1.texExtent.height):(l=o,this._region1.texExtent.width=l,this._region1.texExtent.height=1),i.push(new this._bufferViewCtor(t,c*this._formatSize,l*this._channels)),n.push(this._region1),a=0,s+=this._region1.texExtent.height,o-=l,c+=l),o>0&&(this._region2.texOffset.x=a,this._region2.texOffset.y=s,this._region2.texExtent.width=o,this._region2.texExtent.height=1,i.push(new this._bufferViewCtor(t,c*this._formatSize,o*this._channels)),n.push(this._region2)),this._device.copyBuffersToTexture(i,e.texture,n)}},{key:"_findAvailableSpace",value:function(e,t){var i=this._chunks[t],n=!1,r=i.start;if(r+e<=i.size)n=!0;else{r=0;for(var o=this._handles.filter((function(e){return e.chunkIdx===t})).sort((function(e,t){return e.start-t.start})),a=0;a<o.length;a++){var s=o[a];if(r+e<=s.start){n=!0;break}r=s.end}!n&&r+e<=i.size&&(n=!0)}return n?r:-1}},{key:"_McDonaldAlloc",value:function(e){e=xS(e,this._alignment);for(var t=0;t<this._chunkCount;++t){var i=this._chunks[t],n=!1,r=i.start;if(r+e<=i.end?n=!0:r>i.end?r+e<=i.size?n=!0:e<=i.end&&(i.start=r=0,n=!0):r===i.end&&(i.start=r=0,i.end=i.size,e<=i.end&&(n=!0)),n){i.start+=e;var o={chunkIdx:t,start:r,end:r+e,texture:i.texture,texView:i.texView};return this._handles.push(o),o}}var a=Math.sqrt(e/this._formatSize),s=this._roundUpFn&&this._roundUpFn(a,this._formatSize)||Math.max(1024,bS(a)),l=this._chunks[this.createChunk(s)];l.start+=e;var c={chunkIdx:this._chunkCount,start:0,end:e,texture:l.texture,texView:l.texView};return this._handles.push(c),c}}]),e}();function RS(e){return"string"==typeof e||"number"==typeof e}function FS(e,t){return e instanceof t}var IS=qa("cc.animation.HierarchyPath")((ES=de((SS=function(){function e(t){Z(this,e),_e(this,"path",ES,this),this.path=t||""}return J(e,[{key:"get",value:function(e){if(!(e instanceof rg))return u("Target of hierarchy path should be of type Node."),null;var t=e.getChildByPath(this.path);return t||(u('Node "'.concat(e.name,'" has no path "').concat(this.path,'"')),null)}}]),e}()).prototype,"path",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),TS=SS))||TS,MS=qa("cc.animation.ComponentPath")((kS=de((wS=function(){function e(t){Z(this,e),_e(this,"component",kS,this),this.component=t||""}return J(e,[{key:"get",value:function(e){if(!(e instanceof rg))return u("Target of component path should be of type Node."),null;var t=e.getComponent(this.component);return t||(u('Node "'.concat(e.name,'" has no component "').concat(this.component,'"')),null)}}]),e}()).prototype,"component",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CS=wS))||CS;function PS(e){for(var t=e,i=0;i<(arguments.length<=1?0:arguments.length-1);++i){var n=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];if(RS(n)){if(!(n in t))return u('Target object has no property "'.concat(n,'"')),null;t=t[n]}else t=n.get(t);if(null===t)break}return t}var DS=function(){function e(){Z(this,e)}return J(e,null,[{key:"getOrExtract",value:function(t){var i=e.pool.get(t);return i&&i.info.sample===t.sample||(i&&cc.director.root.dataPoolManager.releaseAnimationClip(t),i=function(e){var t={};e.curves.forEach((function(e){if(!e.valueAdapter&&FS(e.modifiers[0],IS)&&RS(e.modifiers[1])){var i=e.modifiers[0].path,n=t[i];n||(n=t[i]={}),n[e.modifiers[1]]={values:e.data.values,keys:e.data.keys}}}));for(var i=Math.ceil(e.sample*e.duration)+1,n=function(){var n=o[r],a=t[n];if(!a)return"continue";Object.defineProperty(a,"worldMatrix",{get:function(){if(!a._worldMatrix){var r=a.position,o=a.rotation,s=a.scale;BS(e,r,i),BS(e,o,i),BS(e,s,i),function(e,t,i){var n=i.position.values,r=i.rotation.values,o=i.scale.values,a=n.map((function(){return new Qi})),s=t.lastIndexOf("/"),l=null;if(s>0){var c=t.substring(0,s),u=e[c];if(!u)return void console.warn("no data for parent bone?");l=u.worldMatrix.values}for(var h=0;h<n.length;h++){var p=n[h],f=r[h],_=o[h],d=a[h];Qi.fromRTS(d,f,p,_),l&&Qi.multiply(d,l[h],d)}Object.keys(i).forEach((function(e){return delete i[e]})),i._worldMatrix={keys:0,interpolate:!1,values:a}}(t,n,a)}return a._worldMatrix}})},r=0,o=Object.keys(t);r<o.length;r++)n();return{info:{frames:i,sample:e.sample},data:t}}(t),e.pool.set(t,i)),i}},{key:"destroy",value:function(t){e.pool.delete(t)}}]),e}();function BS(e,t,i){var n=e.keys[t.keys],r=[];if(n&&1!==n.length)for(var o=t.values[0]instanceof Xi,a=0,s=0;a<i;a++){for(var l=a/e.sample;n[s]<=l;)s++;s>n.length-1?l=n[s=n.length-1]:0===s&&(s=1);var c=t.values[s-1].clone(),u=n[s]-n[s-1],h=u?fi((l-n[s-1])/u):1;o?c.slerp(t.values[s],h):c.lerp(t.values[s],h),r[a]=c}else for(var p=0;p<i;p++)r[p]=t.values[0].clone();t.values=r}DS.pool=new Map;var NS=new Qi;function LS(e,t,i){for(Qi.identity(i);e!==t;)Qi.fromRTS(NS,e.rotation,e.position,e.scale),Qi.multiply(i,NS,i),e=e.parent;return i}var zS=function(e,t,i,n){e[t+0]=US(i.m00),e[t+1]=US(i.m01),e[t+2]=US(i.m02),e[t+3]=US(i.m12),e[t+4]=US(i.m04),e[t+5]=US(i.m05),e[t+6]=US(i.m06),e[t+7]=US(i.m13),e[t+8]=US(i.m08),e[t+9]=US(i.m09),e[t+10]=US(i.m10),e[t+11]=US(i.m14)};function GS(e){return e.hasFeature(exports.GFXFeature.TEXTURE_FLOAT)?exports.GFXFormat.RGBA32F:exports.GFXFormat.RGBA8}function US(e){return e||0}new Xi,new Xi,new Mi,new Xi,new Mi;function XS(e,t){var i=4/Math.sqrt(t);return 12*Math.ceil(Math.max(480*i,e)/12)}var VS=ql([exports.GFXFilter.POINT,exports.GFXFilter.POINT,exports.GFXFilter.NONE,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP,exports.GFXAddress.CLAMP]),HS=new Mi,jS=new Mi,WS=new Mi,YS=new Mi,qS=new Qi,QS=new Qi,ZS=new ca,KS=Number.MAX_SAFE_INTEGER,JS=function(){function e(t){Z(this,e),this._device=void 0,this._pool=void 0,this._textureBuffers=new Map,this._formatSize=void 0,this._pixelsPerJoint=void 0,this._customPool=void 0,this._chunkIdxMap=new Map,this._device=t;var i=GS(this._device);this._formatSize=yr[i].size,this._pixelsPerJoint=48/this._formatSize,this._pool=new OS(t),this._pool.initialize({format:i,roundUpFn:XS}),this._customPool=new OS(t),this._customPool.initialize({format:i,roundUpFn:XS})}return J(e,[{key:"pixelsPerJoint",get:function(){return this._pixelsPerJoint}}]),J(e,[{key:"clear",value:function(){this._pool.destroy(),this._textureBuffers.clear()}},{key:"registerCustomTextureLayouts",value:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=this._customPool.createChunk(i.textureLength),r=0;r<i.contents.length;r++){var o=i.contents[r],a=o.skeleton;this._chunkIdxMap.set(a,n);for(var s=0;s<o.clips.length;s++){var l=o.clips[s];this._chunkIdxMap.set(a^l,n)}}}},{key:"getDefaultPoseTexture",value:function(e,t,i){var n=0^e.hash,r=this._textureBuffers.get(n)||null;if(r&&r.bounds.has(t.hash))return r.refCount++,r;var o=e.joints,a=e.bindposes,s=null,l=!1,c=o.length;if(r)r.refCount++;else{var u=12*c,h=this._chunkIdxMap.get(n),p=void 0!==h?this._customPool.alloc(u*Float32Array.BYTES_PER_ELEMENT,h):this._pool.alloc(u*Float32Array.BYTES_PER_ELEMENT);if(!p)return r;r={pixelOffset:p.start/this._formatSize,refCount:1,bounds:new Map,skeletonHash:e.hash,clipHash:0,readyToBeDeleted:!1,handle:p},s=new Float32Array(u),l=!0}Mi.set(WS,KS,KS,KS),Mi.set(YS,-KS,-KS,-KS);for(var f=t.getBoneSpaceBounds(e),_=0,d=0;_<c;_++,d+=12){var m=i.getChildByPath(o[_]),v=m?LS(m,i,qS):e.inverseBindposes[_],y=f[_];y&&(ca.transform(ZS,y,v),ZS.getBoundary(HS,jS),Mi.min(WS,WS,HS),Mi.max(YS,YS,jS)),l&&(m&&Qi.multiply(v,v,a[_]),zS(s,d,m?v:Qi.IDENTITY))}var g=[new ca];return r.bounds.set(t.hash,g),ca.fromPoints(g[0],WS,YS),l&&(this._pool.update(r.handle,s.buffer),this._textureBuffers.set(n,r)),r}},{key:"getSequencePoseTexture",value:function(e,t,i,n){var r=e.hash^t.hash,o=this._textureBuffers.get(r)||null;if(o&&o.bounds.has(i.hash))return o.refCount++,o;var a=e.joints,s=e.bindposes,l=DS.getOrExtract(t).info.frames,c=null,u=!1,h=a.length;if(o)o.refCount++;else{var p=12*h*l,f=this._chunkIdxMap.get(r),_=void 0!==f?this._customPool.alloc(p*Float32Array.BYTES_PER_ELEMENT,f):this._pool.alloc(p*Float32Array.BYTES_PER_ELEMENT);if(!_)return null;var d=this._createAnimInfos(e,t,n);o={pixelOffset:_.start/this._formatSize,refCount:1,bounds:new Map,skeletonHash:e.hash,clipHash:t.hash,readyToBeDeleted:!1,handle:_,animInfos:d},c=new Float32Array(p),u=!0}var m=i.getBoneSpaceBounds(e),v=[];o.bounds.set(i.hash,v);for(var y=0;y<l;y++)v.push(new ca(KS,KS,KS,-KS,-KS,-KS));for(var g=0,A=0;g<l;g++){for(var b=v[g],x=0;x<h;x++,A+=12){var T=o.animInfos[x],S=T.curveData,E=T.downstream,C=T.bindposeIdx,w=T.bindposeCorrection,k=void 0,O=!0;S&&E?k=Qi.multiply(qS,S[g],E):S?k=S[g]:E?k=E:(k=e.inverseBindposes[C],O=!1);var R=m[x];if(R){var F=w?Qi.multiply(QS,k,w):k;ca.transform(ZS,R,F),ZS.getBoundary(HS,jS),Mi.min(b.center,b.center,HS),Mi.max(b.halfExtents,b.halfExtents,jS)}u&&(O&&Qi.multiply(qS,k,s[C]),zS(c,A,O?qS:Qi.IDENTITY))}ca.fromPoints(b,b.center,b.halfExtents)}return u&&(this._pool.update(o.handle,c.buffer),this._textureBuffers.set(r,o)),o}},{key:"releaseHandle",value:function(e){if(e.refCount>0&&e.refCount--,!e.refCount&&e.readyToBeDeleted){var t=e.skeletonHash^e.clipHash;(void 0!==this._chunkIdxMap.get(t)?this._customPool:this._pool).free(e.handle),this._textureBuffers.get(t)===e&&this._textureBuffers.delete(t)}}},{key:"releaseSkeleton",value:function(e){for(var t=this._textureBuffers.values(),i=t.next();!i.done;){var n=i.value;n.skeletonHash===e.hash&&(n.readyToBeDeleted=!0,n.refCount?this._textureBuffers.delete(n.skeletonHash^n.clipHash):this.releaseHandle(n)),i=t.next()}}},{key:"releaseAnimationClip",value:function(e){for(var t=this._textureBuffers.values(),i=t.next();!i.done;){var n=i.value;n.clipHash===e.hash&&(n.readyToBeDeleted=!0,n.refCount?this._textureBuffers.delete(n.skeletonHash^n.clipHash):this.releaseHandle(n)),i=t.next()}}},{key:"_createAnimInfos",value:function(e,t,i){for(var n=[],r=e.joints,o=e.bindposes,a=r.length,s=DS.getOrExtract(t),l=0;l<a;l++){for(var c=r[l],u=s.data[c],h=i.getChildByPath(c),p=void 0,f=void 0;!u;){var _=c.lastIndexOf("/");if(c=c.substring(0,_),u=s.data[c],h?(p||(p=new Qi),Qi.fromRTS(qS,h.rotation,h.position,h.scale),Qi.multiply(p,qS,p),h=h.parent):f=c,_<0)break}var d=l,m=void 0;if(void 0!==f&&u){d=l-1;for(var v=0;v<a;v++)if(r[v]===f){d=v,m=new Qi,Qi.multiply(m,o[v],e.inverseBindposes[l]);break}}n.push({curveData:u&&u.worldMatrix.values,downstream:p,bindposeIdx:d,bindposeCorrection:m})}return n}}]),e}(),$S=function(){function e(t){Z(this,e),this._pool=new Map,this._device=void 0,this._device=t}return J(e,[{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=this._pool.get(e);if(t)return t;var i=this._device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Lc.SIZE,stride:Lc.SIZE}),n=new Float32Array([0,0,0,0]);i.update(n);var r={buffer:i,data:n,dirty:!1};return this._pool.set(e,r),r}},{key:"destroy",value:function(e){var t=this._pool.get(e);t&&(t.buffer.destroy(),this._pool.delete(e))}},{key:"switchClip",value:function(e,t){return e.data[0]=0,e.buffer.update(e.data),e.dirty=!1,e}},{key:"clear",value:function(){for(var e,t=fe(this._pool.values());!(e=t()).done;){e.value.buffer.destroy()}this._pool.clear()}}]),e}(),eE=[],tE=new Map,iE=[{name:"CC_USE_SKINNING",value:!0}];function nE(e,t){for(var i=0,n=Qi.IDENTITY;e;){if(e.stamp===t||e.stamp+1===t&&!e.node.hasChangedFlags){n=e.world,e.stamp=t;break}e.stamp=t,eE[i++]=e,e=e.parent}for(;i>0;){var r=(e=eE[--i]).node;Qi.fromRTS(e.local,r.rotation,r.position,r.scale),n=Qi.multiply(e.world,n,e.local)}return n}function rE(e,t){for(var i,n=null,r=0;e!==t;){var o=e.uuid;if(tE.has(o)){n=tE.get(o);break}n={node:e,local:new Qi,world:new Qi,stamp:-1,parent:null},tE.set(o,n),eE[r++]=n,e=e.parent,n=null}for(;r>0;)(i=eE[--r]).parent=n,n=i;return n}function oE(e){for(var t=tE.get(e.uuid)||null;t;)tE.delete(t.node.uuid),t=t.parent}function aE(e,t,i,n){for(var r=0;r<i.length;r++){for(var o=i[r],a=-1,s=0;s<o.length;s++)if(o[s]===n){a=s;break}a>=0&&(t.push(r),e.push(a))}}var sE,lE=new Mi,cE=new Mi,uE=new Mi,hE=new Mi,pE=new Qi,fE=new ca,_E=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this))).uploadAnimation=null,e._buffers=[],e._dataArray=[],e._joints=[],e._bufferIndices=null,e.type=nh.SKINNING,e}return ee(t,ch),J(t,[{key:"destroy",value:function(){if(this.bindSkeleton(),this._buffers.length){for(var e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers.length=0}ae(te(t.prototype),"destroy",this).call(this)}},{key:"bindSkeleton",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0;n<this._joints.length;n++)oE(this._joints[n].target);if(this._bufferIndices=null,this._joints.length=0,e&&t&&i){this.transform=t;var r=i.getBoneSpaceBounds(e),o=i.struct.jointMaps;this._ensureEnoughBuffers(o&&o.length||1),this._bufferIndices=i.jointBufferIndices;for(var a=0;a<e.joints.length;a++){var s=r[a],l=t.getChildByPath(e.joints[a]);if(s&&l){var c=rE(l,t),u=e.bindposes[a],h=[],p=[];o?aE(h,p,o,a):(h.push(a),p.push(0)),this._joints.push({indices:h,buffers:p,bound:s,target:l,bindpose:u,transform:c})}}}}},{key:"updateTransform",value:function(e){var t=this.transform;(t.hasChangedFlags||t._dirtyFlags)&&(t.updateWorldTransform(),this._transformUpdated=!0),Mi.set(lE,1/0,1/0,1/0),Mi.set(cE,-1/0,-1/0,-1/0);for(var i=0;i<this._joints.length;i++){var n=this._joints[i],r=n.bound,o=nE(n.transform,e);ca.transform(fE,r,o),fE.getBoundary(uE,hE),Mi.min(lE,lE,uE),Mi.max(cE,cE,hE)}this._modelBounds&&this._worldBounds&&(ca.fromPoints(this._modelBounds,lE,cE),this._modelBounds.transform(t._mat,t._pos,t._rot,t._scale,this._worldBounds))}},{key:"updateUBOs",value:function(e){ae(te(t.prototype),"updateUBOs",this).call(this,e);for(var i=0;i<this._joints.length;i++){var n=this._joints[i],r=n.indices,o=n.buffers,a=n.transform,s=n.bindpose;Qi.multiply(pE,a.world,s);for(var l=0;l<o.length;l++)zS(this._dataArray[o[l]],12*r[l],pE)}for(var c=0;c<this._buffers.length;c++)this._buffers[c].update(this._dataArray[c]);return!0}},{key:"initSubModel",value:function(e,i,n){var r=i.vertexBuffers;i.vertexBuffers=i.jointMappedBuffers,ae(te(t.prototype),"initSubModel",this).call(this,e,i,n),i.vertexBuffers=r}},{key:"createPipelineState",value:function(e,i,n){var r,o=ae(te(t.prototype),"createPipelineState",this).call(this,e,i,null!==(r=null==n?void 0:n.concat(iE))&&void 0!==r?r:iE),a=o.pipelineLayout.layouts[0],s=this._buffers[this._bufferIndices[i]];return s&&a.bindBuffer(zc.BLOCK.binding,s),o}},{key:"_ensureEnoughBuffers",value:function(e){for(var t=0;t<e;t++)this._buffers[t]||(this._buffers[t]=this._device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:zc.SIZE,stride:zc.SIZE})),this._dataArray[t]||(this._dataArray[t]=new Float32Array(zc.COUNT))}}]),t}(),dE=[{name:"CC_USE_SKINNING",value:!0},{name:"CC_USE_BAKED_ANIMATION",value:!0}],mE=function(e){function t(){var e;Z(this,t),(e=re(this,te(t).call(this))).uploadedAnim=void 0,e._jointsMedium=void 0,e._skeleton=null,e._mesh=null,e._dataPoolManager=void 0,e._instAnimInfoIdx=-1,e.type=nh.BAKED_SKINNING,e._dataPoolManager=cc.director.root.dataPoolManager;var i=new Float32Array(4),n=e._dataPoolManager.jointAnimationInfo.getData();return e._jointsMedium={buffer:null,jointTextureInfo:i,animInfo:n,texture:null,boundsInfo:null},e}return ee(t,ch),J(t,[{key:"destroy",value:function(){this.uploadedAnim=void 0,this._jointsMedium.boundsInfo=null,this._jointsMedium.buffer&&(this._jointsMedium.buffer.destroy(),this._jointsMedium.buffer=null),this._applyJointTexture(),ae(te(t.prototype),"destroy",this).call(this)}},{key:"bindSkeleton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._skeleton=e,this._mesh=i,e&&t&&i){this.transform=t;var n=this._dataPoolManager;this._jointsMedium.animInfo=n.jointAnimationInfo.getData(t.uuid),this._jointsMedium.buffer||(this._jointsMedium.buffer=this._device.createBuffer({usage:exports.GFXBufferUsageBit.UNIFORM|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:Nc.SIZE,stride:Nc.SIZE}))}}},{key:"updateTransform",value:function(e){if(ae(te(t.prototype),"updateTransform",this).call(this,e),this.uploadedAnim){var i=this._jointsMedium,n=i.animInfo,r=i.boundsInfo[n.data[0]],o=this.transform;this._worldBounds&&r&&r.transform(o._mat,o._pos,o._rot,o._scale,this._worldBounds)}}},{key:"updateUBOs",value:function(e){ae(te(t.prototype),"updateUBOs",this).call(this,e);var i=this._jointsMedium.animInfo,n=this._instAnimInfoIdx;n>=0?this.instancedAttributes.list[n].view[0]=i.data[0]:i.dirty&&(i.buffer.update(i.data),i.dirty=!1);return!0}},{key:"createBoundingShape",value:function(e,t){e&&t&&(this._worldBounds=new ca)}},{key:"uploadAnimation",value:function(e){if(this._skeleton&&this._mesh&&this.uploadedAnim!==e){this.uploadedAnim=e;var t=this._dataPoolManager,i=null;e?(i=t.jointTexturePool.getSequencePoseTexture(this._skeleton,e,this._mesh,this.transform),this._jointsMedium.boundsInfo=i&&i.bounds.get(this._mesh.hash),this._modelBounds=null):(i=t.jointTexturePool.getDefaultPoseTexture(this._skeleton,this._mesh,this.transform),this._jointsMedium.boundsInfo=null,this._modelBounds=i&&i.bounds.get(this._mesh.hash)[0]),this._applyJointTexture(i)}}},{key:"_applyJointTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._jointsMedium.texture;if(t&&t!==e&&this._dataPoolManager.jointTexturePool.releaseHandle(t),this._jointsMedium.texture=e,e){var i=this._jointsMedium,n=i.buffer,r=i.jointTextureInfo;r[0]=e.handle.texture.width,r[1]=this._skeleton.joints.length,r[2]=e.pixelOffset+.1,r[3]=1/r[0],this.updateInstancedJointTextureInfo(),n&&n.update(r);for(var o=e.handle.texView,a=this._matPSORecord.values(),s=a.next();!s.done;){for(var l=s.value,c=0;c<l.length;c++){var u=l[c].pipelineLayout.layouts[0];u.bindTextureView(Gc.binding,o)}s=a.next()}for(var h=0;h<this._implantPSOs.length;h++){var p=this._implantPSOs[h].pipelineLayout.layouts[0];p.bindTextureView(Gc.binding,o),p.update()}}}},{key:"createPipelineState",value:function(e,i,n){var r,o=ae(te(t.prototype),"createPipelineState",this).call(this,e,i,null!==(r=null==n?void 0:n.concat(dE))&&void 0!==r?r:dE),a=this._jointsMedium,s=a.buffer,l=a.texture,c=a.animInfo,u=o.pipelineLayout.layouts[0];u.bindBuffer(Nc.BLOCK.binding,s),u.bindBuffer(Lc.BLOCK.binding,c.buffer);var h=uc.getSampler(this._device,VS);return l&&(u.bindTextureView(Gc.binding,l.handle.texView),u.bindSampler(Gc.binding,h)),o}},{key:"updateInstancedAttributeList",value:function(e,i){ae(te(t.prototype),"updateInstancedAttributeList",this).call(this,e,i),this._instAnimInfoIdx=this.getInstancedAttributeIndex("a_jointAnimInfo"),this.updateInstancedJointTextureInfo()}},{key:"updateInstancedJointTextureInfo",value:function(){var e=this._jointsMedium,t=e.jointTextureInfo,i=e.animInfo,n=this._instAnimInfoIdx;if(n>=0){var r=this.instancedAttributes.list[n].view;r[0]=i.data[0],r[1]=t[1],r[2]=t[2]}}}]),t}(),vE=new Mi(0,0,-1),yE=new Mi,gE=new ca,AE=new Xi,bE=function(){function e(t){Z(this,e),this._scene=void 0,this._enabled=!1,this._normal=new Mi(0,1,0),this._distance=0,this._matLight=new Qi,this._data=Float32Array.from([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,.3]),this._globalBindings=void 0,this._record=new Map,this._pendingModels=[],this._material=void 0,this._instancingMaterial=void 0,this._scene=t,this._globalBindings=t.root.pipeline.globalBindings.get(Fc.BLOCK.name),this._material=new Xh,this._material.initialize({effectName:"pipeline/planar-shadow"}),this._instancingMaterial=new Xh,this._instancingMaterial.initialize({effectName:"pipeline/planar-shadow",defines:{USE_INSTANCING:!0}})}return J(e,[{key:"enabled",set:function(e){this._enabled=e,this._scene.mainLight&&this.updateDirLight(this._scene.mainLight)},get:function(){return this._enabled}},{key:"normal",set:function(e){Mi.copy(this._normal,e),this._scene.mainLight&&this.updateDirLight(this._scene.mainLight)},get:function(){return this._normal}},{key:"distance",set:function(e){this._distance=e,this._scene.mainLight&&this.updateDirLight(this._scene.mainLight)},get:function(){return this._distance}},{key:"shadowColor",set:function(e){on.toArray(this._data,e,Fc.SHADOW_COLOR_OFFSET),this._globalBindings.buffer.update(this.data)}},{key:"matLight",get:function(){return this._matLight}},{key:"data",get:function(){return this._data}}]),J(e,[{key:"updateSphereLight",value:function(e){e.node.getWorldPosition(yE);var t=this._normal,i=this._distance+.001,n=Mi.dot(t,yE),r=yE.x,o=yE.y,a=yE.z,s=t.x,l=t.y,c=t.z,u=this._matLight;u.m00=n-i-r*s,u.m01=-o*s,u.m02=-a*s,u.m03=-s,u.m04=-r*l,u.m05=n-i-o*l,u.m06=-a*l,u.m07=-l,u.m08=-r*c,u.m09=-o*c,u.m10=n-i-a*c,u.m11=-c,u.m12=r*i,u.m13=o*i,u.m14=a*i,u.m15=n,Qi.toArray(this.data,this._matLight),this._globalBindings.buffer.update(this.data)}},{key:"updateDirLight",value:function(e){e.node.getWorldRotation(AE),Mi.transformQuat(yE,vE,AE);var t=this._normal,i=this._distance+.001,n=1/Mi.dot(t,yE),r=yE.x*n,o=yE.y*n,a=yE.z*n,s=t.x,l=t.y,c=t.z,u=this._matLight;u.m00=1-s*r,u.m01=-s*o,u.m02=-s*a,u.m03=0,u.m04=-l*r,u.m05=1-l*o,u.m06=-l*a,u.m07=0,u.m08=-c*r,u.m09=-c*o,u.m10=1-c*a,u.m11=0,u.m12=r*i,u.m13=o*i,u.m14=a*i,u.m15=1,Qi.toArray(this.data,this._matLight,Fc.MAT_LIGHT_PLANE_PROJ_OFFSET),this._globalBindings.buffer.update(this.data)}},{key:"updateCommandBuffers",value:function(e,t){if(this._pendingModels.length=0,this._scene.mainLight)for(var i=this._scene.models,n=0;n<i.length;n++){var r=i[n];if(r.enabled&&r.node&&r.castShadow&&(!r.worldBounds||(ca.transform(gE,r.worldBounds,this._matLight),Zo.aabb_frustum(gE,e)))){var o=this._record.get(r);o&&!!o.instancedBuffer!==r.isInstancingEnabled&&(this.destroyShadowData(r),o=void 0),o||(o=this.createShadowData(r),this._record.set(r,o)),r.updateStamp!==t&&r.updateUBOs(t),this._pendingModels.push(o)}}}},{key:"recordCommandBuffer",value:function(e){var t=this._pendingModels,i=t.length,n=this._instancingMaterial.passes[0].instancedBuffer;n&&n.clear();for(var r=0;r<i;r++)for(var o=t[r],a=o.model,s=o.psos,l=o.instancedBuffer,c=0;c<s.length;c++){var u=a.getSubModel(c),h=s[c];if(l)l.merge(u,a.instancedAttributes,h);else{var p=u.inputAssembler;e.bindPipelineState(h),e.bindBindingLayout(h.pipelineLayout.layouts[0]),e.bindInputAssembler(p),e.draw(p)}}if(n&&n.pso){n.uploadBuffers(),e.bindPipelineState(n.pso),e.bindBindingLayout(n.pso.pipelineLayout.layouts[0]);for(var f=0;f<n.instances.length;++f){var _=n.instances[f];_.count&&(e.bindInputAssembler(_.ia),e.draw(_.ia))}}}},{key:"createShadowData",value:function(e){for(var t=[],i=e.isInstancingEnabled?this._instancingMaterial:this._material,n=0;n<e.subModelNum;n++){var r=e.createPipelineState(i.passes[0],n);e.insertImplantPSO(r),r.pipelineLayout.layouts[0].update(),t.push(r)}return{model:e,psos:t,instancedBuffer:i.passes[0].instancedBuffer}}},{key:"destroyShadowData",value:function(e){var t=this._record.get(e);if(t){for(var i=t.instancedBuffer?this._instancingMaterial:this._material,n=0;n<t.psos.length;n++){var r=t.psos[n];e.removeImplantPSO(r),i.passes[0].destroyPipelineState(r)}this._record.delete(e)}}},{key:"onGlobalPipelineStateChanged",value:function(){for(var e=this._record.keys(),t=e.next();!t.done;)this.destroyShadowData(t.value),t=e.next();this._record.clear()}},{key:"destroy",value:function(){this.onGlobalPipelineStateChanged(),this._material.destroy()}}]),e}();!function(e){e[e.positions=exports.GFXAttributeName.ATTR_POSITION]="positions",e[e.normals=exports.GFXAttributeName.ATTR_NORMAL]="normals",e[e.uvs=exports.GFXAttributeName.ATTR_TEX_COORD]="uvs",e[e.colors=exports.GFXAttributeName.ATTR_COLOR]="colors"}(sE||(sE={}));var xE=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_NORMAL,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RG32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA32F}],TE=new Mi;function SE(e,t,i){i=i||{};var n,r=[],o=0,a=[],s=0;if(e.positions.length>0){if(n=null,e.attributes)for(var l,c=fe(e.attributes);!(l=c()).done;){var u=l.value;if(u.name===exports.GFXAttributeName.ATTR_POSITION){n=u;break}}n||(n=xE[0]);var h=yr[n.format];r.push(n),s=Math.max(s,Math.floor(e.positions.length/h.count)),a.push({offset:o,data:e.positions,attribute:n}),o+=h.size}if(e.normals&&e.normals.length>0){if(n=null,e.attributes)for(var p,f=fe(e.attributes);!(p=f()).done;){var _=p.value;if(_.name===exports.GFXAttributeName.ATTR_NORMAL){n=_;break}}n||(n=xE[1]);var d=yr[n.format];r.push(n),s=Math.max(s,Math.floor(e.normals.length/d.count)),a.push({offset:o,data:e.normals,attribute:n}),o+=d.size}if(e.uvs&&e.uvs.length>0){if(n=null,e.attributes)for(var m,v=fe(e.attributes);!(m=v()).done;){var y=m.value;if(y.name===exports.GFXAttributeName.ATTR_TEX_COORD){n=y;break}}n||(n=xE[2]);var g=yr[n.format];r.push(n),s=Math.max(s,Math.floor(e.uvs.length/g.count)),a.push({offset:o,data:e.uvs,attribute:n}),o+=g.size}if(e.colors&&e.colors.length>0){if(n=null,e.attributes)for(var A,b=fe(e.attributes);!(A=b()).done;){var x=A.value;if(x.name===exports.GFXAttributeName.ATTR_COLOR){n=x;break}}n||(n=xE[3]);var T=yr[n.format];r.push(n),s=Math.max(s,Math.floor(e.colors.length/T.count)),a.push({offset:o,data:e.colors,attribute:n}),o+=T.size}if(e.customAttributes)for(var S,E=fe(e.customAttributes);!(S=E()).done;){var C=S.value,w=yr[C.attr.format];r.push(C.attr),s=Math.max(s,Math.floor(C.values.length/w.count)),a.push({offset:o,data:C.values,attribute:C.attr}),o+=w.size}for(var k=new rl,O=new ArrayBuffer(s*o),R=new DataView(O),F=0,I=a;F<I.length;F++){var M=I[F];tl(R,M.data,M.attribute.format,M.offset,o)}k.setNextAlignment(0);var P={attributes:r,view:{offset:k.getLength(),length:O.byteLength,count:s,stride:o}};k.addBuffer(O);var D=null,B=0;if(e.indices){var N=e.indices;B=N.length,D=new ArrayBuffer(2*B),tl(new DataView(D),N,exports.GFXFormat.R16UI)}var L={primitiveMode:e.primitiveMode||exports.GFXPrimitiveMode.TRIANGLE_LIST,vertexBundelIndices:[0]};D&&(k.setNextAlignment(2),L.indexView={offset:k.getLength(),length:D.byteLength,count:B,stride:2},k.addBuffer(D));var z=e.minPos;if(!z&&i.calculateBounds){z=Mi.set(new Mi,1/0,1/0,1/0);for(var G=0;G<s;++G)Mi.set(TE,e.positions[3*G+0],e.positions[3*G+1],e.positions[3*G+2]),Mi.min(z,z,TE)}var U=e.maxPos;if(!U&&i.calculateBounds){U=Mi.set(new Mi,-1/0,-1/0,-1/0);for(var X=0;X<s;++X)Mi.set(TE,e.positions[3*X+0],e.positions[3*X+1],e.positions[3*X+2]),Mi.max(U,U,TE)}var V={vertexBundles:[P],primitives:[L]};return z&&(V.minPosition=new Mi(z.x,z.y,z.z)),U&&(V.maxPosition=new Mi(U.x,U.y,U.z)),t||(t=new lu),t.reset({struct:V,data:new Uint8Array(k.getCombined())}),t}var EE=Object.freeze({__proto__:null,find:nA,toPPM:function(e,t,i){return"P3 ".concat(t," ").concat(i," 255\n").concat(e.filter((function(e,t){return t%4<3})).toString(),"\n")},readMesh:function(e){for(var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={positions:[]},r=new DataView(e._nativeAsset),o=e.struct,a=o.primitives[i],s=fe(a.vertexBundelIndices);!(t=s()).done;)for(var l,c=t.value,u=o.vertexBundles[c],h=u.view.offset,p=u.view,f=p.length,_=p.stride,d=fe(u.attributes);!(l=d()).done;){var m=l.value,v=sE[m.name];v&&(n[v]=(n[v]||[]).concat(il(r,m.format,h,f,_))),h+=yr[m.format].size}var y=a.indexView;return n.indices=il(r,exports.GFXFormat["R".concat(8*y.stride,"UI")],y.offset,y.length),n},createMesh:SE,readBuffer:il,writeBuffer:tl,mapBuffer:nl});function CE(e){return void 0===(e=e||{}).includeNormal&&(e.includeNormal=!0),void 0===e.includeUV&&(e.includeUV=!0),e}function wE(e){var t=(e=e||{}).widthSegments||1,i=e.heightSegments||1,n=e.lengthSegments||1,r=(e.width||1)/2,o=(e.height||1)/2,a=(e.length||1)/2,s=[Mi.set(IE,-r,-o,a),Mi.set(ME,r,-o,a),Mi.set(PE,r,o,a),Mi.set(DE,-r,o,a),Mi.set(BE,r,-o,-a),Mi.set(NE,-r,-o,-a),Mi.set(LE,-r,o,-a),Mi.set(zE,r,o,-a)],l=[[2,3,1],[4,5,7],[7,6,2],[1,0,4],[1,4,2],[5,0,6]],c=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],u=[],h=[],p=[],f=[],_=new Mi(-r,-o,-a),d=new Mi(r,o,a),m=Math.sqrt(r*r+o*o+a*a);function v(e,t,i){var n,r,o,a,_=u.length/3,d=l[e],m=c[e];for(a=0;a<=i;a++)for(o=0;o<=t;o++)if(n=o/t,r=a/i,Mi.lerp(kE,s[d[0]],s[d[1]],n),Mi.lerp(OE,s[d[0]],s[d[2]],r),Mi.subtract(RE,OE,s[d[0]]),Mi.add(FE,kE,RE),u.push(FE.x,FE.y,FE.z),h.push(m[0],m[1],m[2]),p.push(n,r),o<t&&a<i){var v=t+1,y=o+a*v,g=o+(a+1)*v,A=o+1+(a+1)*v,b=o+1+a*v;f.push(_+y,_+b,_+g),f.push(_+g,_+b,_+A)}}return v(0,t,i),v(4,n,i),v(1,t,i),v(5,n,i),v(3,t,n),v(2,t,n),{positions:u,normals:h,uvs:p,indices:f,minPos:_,maxPos:d,boundingRadius:m}}var kE=new Mi,OE=new Mi,RE=new Mi,FE=new Mi,IE=new Mi,ME=new Mi,PE=new Mi,DE=new Mi,BE=new Mi,NE=new Mi,LE=new Mi,zE=new Mi,GE=new Mi(0,0,0),UE=new Mi(0,0,0);function XE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=.5*i,o=n.radialSegments||32,a=n.heightSegments||1,s=void 0===n.capped||n.capped,l=n.arc||2*Math.PI,c=0;s||(e>0&&c++,t>0&&c++);var u=(o+1)*(a+1);s&&(u+=(o+1)*c+o*c);var h=o*a*2*3;s&&(h+=o*c*3);var p=new Array(h),f=new Array(3*u),_=new Array(3*u),d=new Array(2*u),m=Math.max(e,t),v=new Mi(-m,-r,-m),y=new Mi(m,r,m),g=Math.sqrt(m*m+r*r),A=0,b=0;return x(),s&&(t>0&&T(!1),e>0&&T(!0)),{positions:f,normals:_,uvs:d,indices:p,minPos:v,maxPos:y,boundingRadius:g};function x(){for(var n=[],s=e-t,c=s*s/i*Math.sign(s),u=0;u<=a;u++){for(var h=[],m=u/a,v=m*s+t,y=0;y<=o;++y){var g=y/o,x=g*l,T=Math.sin(x),S=Math.cos(x);f[3*A]=v*T,f[3*A+1]=m*i-r,f[3*A+2]=v*S,Mi.normalize(GE,Mi.set(UE,T,-c,S)),_[3*A]=GE.x,_[3*A+1]=GE.y,_[3*A+2]=GE.z,d[2*A]=2*(1-g)%1,d[2*A+1]=m,h.push(A),++A}n.push(h)}for(var E=0;E<a;++E)for(var C=0;C<o;++C){var w=n[E][C],k=n[E+1][C],O=n[E+1][C+1],R=n[E][C+1];p[b]=w,++b,p[b]=R,++b,p[b]=k,++b,p[b]=R,++b,p[b]=O,++b,p[b]=k,++b}}function T(i){for(var n=i?e:t,a=i?1:-1,s=A,c=1;c<=o;++c)f[3*A]=0,f[3*A+1]=r*a,f[3*A+2]=0,_[3*A]=0,_[3*A+1]=a,_[3*A+2]=0,d[2*A]=.5,d[2*A+1]=.5,++A;for(var u=A,h=0;h<=o;++h){var m=h/o*l,v=Math.cos(m),y=Math.sin(m);f[3*A]=n*y,f[3*A+1]=r*a,f[3*A+2]=n*v,_[3*A]=0,_[3*A+1]=a,_[3*A+2]=0,d[2*A]=.5-.5*y*a,d[2*A+1]=.5+.5*v,++A}for(var g=0;g<o;++g){var x=s+g,T=u+g;i?(p[b]=T+1,++b,p[b]=x,++b,p[b]=T,++b):(p[b]=x,++b,p[b]=T+1,++b,p[b]=T,++b)}}}var VE=new Mi(0,0,0),HE=new Mi(0,0,0),jE=new Mi(0,0,0),WE=new Mi(0,0,0),YE=new Mi(0,0,0),qE=new Mi(0,0,0),QE=new Mi(0,0,0);var ZE=new Mi(0,0,0),KE=new Mi(0,0,0);var JE=Object.freeze({__proto__:null,box:wE,cone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return XE(0,e,t,i)},cylinder:XE,plane:function(e){var t=function(e){return(e=CE(e)).width=e.width||10,e.length=e.length||10,e.widthSegments=e.widthSegments||10,e.lengthSegments=e.lengthSegments||10,e}(e),i=t.width,n=t.length,r=t.widthSegments,o=t.lengthSegments,a=.5*i,s=.5*n,l=[],c=[],u=[],h=new Mi(-a,0,-s),p=new Mi(a,0,s),f=Math.sqrt(i*i+n*n);Mi.set(YE,-a,0,s),Mi.set(qE,a,0,s),Mi.set(QE,-a,0,-s);for(var _=0;_<=o;_++)for(var d=0;d<=r;d++){var m=d/r,v=_/o;if(Mi.lerp(VE,YE,qE,m),Mi.lerp(HE,YE,QE,v),Mi.subtract(jE,HE,YE),Mi.add(WE,VE,jE),l.push(WE.x,WE.y,WE.z),t.includeUV&&c.push(m,v),d<r&&_<o){var y=r+1,g=d+_*y,A=d+(_+1)*y,b=d+1+(_+1)*y,x=d+1+_*y;u.push(g,x,A),u.push(x,b,A)}}var T={positions:l,indices:u,minPos:h,maxPos:p,boundingRadius:f};if(t.includeNormal){var S=(o+1)*(r+1),E=new Array(3*S);T.normals=E;for(var C=0;C<S;++C)E[3*C+0]=0,E[3*C+1]=1,E[3*C+2]=0}return t.includeUV&&(T.uvs=c),T},quad:function(e){var t=CE(e),i={positions:[-.5,-.5,0,-.5,.5,0,.5,.5,0,.5,-.5,0],indices:[0,3,1,3,2,1],minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0},boundingRadius:Math.sqrt(.5)};return!1!==t.includeNormal&&(i.normals=[0,0,1,0,0,1,0,0,1,0,0,1]),!1!==t.includeUV&&(i.uvs=[0,0,0,1,1,1,1,0]),i},sphere:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=void 0!==t.segments?t.segments:32,n=[],r=[],o=[],a=[],s=new Mi(-e,-e,-e),l=new Mi(e,e,e),c=e,u=0;u<=i;++u)for(var h=u*Math.PI/i,p=Math.sin(h),f=-Math.cos(h),_=0;_<=i;++_){var d=2*_*Math.PI/i-Math.PI/2,m=Math.sin(d),v=Math.cos(d),y=m*p,g=f,A=v*p,b=_/i,x=u/i;if(n.push(y*e,g*e,A*e),r.push(y,g,A),o.push(b,x),u<i&&_<i){var T=i+1,S=T*u+_,E=T*(u+1)+_,C=T*(u+1)+_+1,w=T*u+_+1;a.push(S,w,E),a.push(w,C,E)}}return{positions:n,indices:a,normals:r,uvs:o,minPos:s,maxPos:l,boundingRadius:c}},torus:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.radialSegments||32,r=i.tubularSegments||32,o=i.arc||2*Math.PI,a=[],s=[],l=[],c=[],u=new Mi(-e-t,-t,-e-t),h=new Mi(e+t,t,e+t),p=e+t,f=0;f<=n;f++)for(var _=0;_<=r;_++){var d=_/r,m=f/n,v=d*o,y=m*Math.PI*2,g=(e+t*Math.cos(y))*Math.sin(v),A=t*Math.sin(y),b=(e+t*Math.cos(y))*Math.cos(v),x=Math.sin(v)*Math.cos(y),T=Math.sin(y),S=Math.cos(v)*Math.cos(y);if(a.push(g,A,b),s.push(x,T,S),l.push(d,m),_<r&&f<n){var E=r+1,C=E*f+_,w=E*(f+1)+_,k=E*(f+1)+_+1,O=E*f+_+1;c.push(C,O,w),c.push(O,k,w)}}return{positions:a,normals:s,uvs:l,indices:c,minPos:u,maxPos:h,boundingRadius:p}},capsule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i-e-t,o=n.sides||32,a=n.heightSegments||32,s=t/i,l=r/i,c=e/i,u=Math.floor(a*s),h=Math.floor(a*c),p=Math.floor(a*l),f=r+t-i/2,_=t-i/2,d=t-i/2,m=n.arc||2*Math.PI,v=[],y=[],g=[],A=[],b=Math.max(e,t),x=new Mi(-b,-i/2,-b),T=new Mi(b,i/2,b),S=i/2,E=0,C=[];return k(),w(),O(),{positions:v,normals:y,uvs:g,indices:A,minPos:x,maxPos:T,boundingRadius:S};function w(){for(var i=(e-t)/r,n=0;n<=p;n++){for(var a=[],c=n/p,u=c*(e-t)+t,h=0;h<=o;++h){var f=h/o,d=c*l+s,b=f*m-m/4,x=Math.sin(b),T=Math.cos(b);v.push(u*x),v.push(c*r+_),v.push(u*T),Mi.normalize(ZE,Mi.set(KE,x,-i,T)),y.push(ZE.x),y.push(ZE.y),y.push(ZE.z),g.push(f,d),a.push(E),++E}C.push(a)}for(var S=0;S<p;++S)for(var w=0;w<o;++w){var k=C[S][w],O=C[S+1][w],R=C[S+1][w+1],F=C[S][w+1];A.push(k),A.push(F),A.push(O),A.push(F),A.push(R),A.push(O)}}function k(){for(var e=0;e<=u;++e)for(var i=e*Math.PI/u/2,n=Math.sin(i),r=-Math.cos(i),s=0;s<=o;++s){var l=2*s*Math.PI/o-Math.PI/2,c=Math.sin(l)*n,h=r,p=Math.cos(l)*n,f=s/o,_=e/a;if(v.push(c*t,h*t+d,p*t),y.push(c,h,p),g.push(f,_),e<u&&s<o){var m=o+1,b=m*e+s,x=m*(e+1)+s,T=m*(e+1)+s+1,S=m*e+s+1;A.push(b,S,x),A.push(S,T,x)}++E}}function O(){for(var t=0;t<=h;++t)for(var i=t*Math.PI/h/2+Math.PI/2,n=Math.sin(i),r=-Math.cos(i),s=0;s<=o;++s){var l=2*s*Math.PI/o-Math.PI/2,u=Math.sin(l)*n,_=r,d=Math.cos(l)*n,m=s/o,b=t/a+(1-c);if(v.push(u*e,_*e+f,d*e),y.push(u,_,d),g.push(m,b),t<h&&s<o){var x=o+1,T=x*t+s+C[p][o]+1,S=x*(t+1)+s+C[p][o]+1,E=x*(t+1)+s+1+C[p][o]+1,w=x*t+s+1+C[p][o]+1;A.push(T,w,S),A.push(w,E,S)}}}},circle:function(e){var t=function(e){return(e=CE(e)).segments=64,e}(e).segments,i=new Array(3*(t+1));i[0]=0,i[1]=0,i[2]=0;var n=new Array(1+2*t);n[0]=0;for(var r=2*Math.PI/t,o=0;o<t;++o){var a=r*o,s=Math.cos(a),l=Math.sin(a),c=3*(o+1);i[c+0]=s,i[c+1]=l,i[c+2]=0;var u=2*o;n[1+u]=o+1,n[1+(u+1)]=o+2}return t>0&&(n[n.length-1]=1),{positions:i,indices:n,minPos:{x:1,y:1,z:0},maxPos:{x:-1,y:-1,z:0},boundingRadius:1,primitiveMode:exports.GFXPrimitiveMode.TRIANGLE_FAN}},translate:function(e,t){for(var i=t.x||0,n=t.y||0,r=t.z||0,o=Math.floor(e.positions.length/3),a=0;a<o;++a){var s=3*a,l=3*a+1,c=3*a+2;e.positions[s]=e.positions[s]+i,e.positions[l]=e.positions[l]+n,e.positions[c]=e.positions[c]+r}return e.minPos&&(e.minPos.x+=i,e.minPos.y+=n,e.minPos.z+=r),e.maxPos&&(e.maxPos.x+=i,e.maxPos.y+=n,e.maxPos.z+=r),e},scale:function(e,t){for(var i=t.x||0,n=t.y||0,r=t.z||0,o=Math.floor(e.positions.length/3),a=0;a<o;++a){var s=3*a,l=3*a+1,c=3*a+2;e.positions[s]*=i,e.positions[l]*=n,e.positions[c]*=r}return e.minPos&&(e.minPos.x*=i,e.minPos.y*=n,e.minPos.z*=r),e.maxPos&&(e.maxPos.x*=i,e.maxPos.y*=n,e.maxPos.z*=r),e.boundingRadius=Math.max(Math.max(i,n),r),e},wireframed:function(e){var t=e.indices;if(!t)return e;if(e.primitiveMode&&e.primitiveMode!==exports.GFXPrimitiveMode.TRIANGLE_LIST)return e;for(var i=[[0,1],[1,2],[2,0]],n=[],r={},o=0;o<t.length;o+=3)for(var a=0;a<3;++a){var s=t[o+i[a][0]],l=t[o+i[a][1]],c=s>l?l<<16|s:s<<16|l;void 0===r[c]&&(r[c]=0,n.push(s,l))}return e.indices=n,e.primitiveMode=exports.GFXPrimitiveMode.LINE_LIST,e},wireframe:function(e){for(var t=[[0,1],[1,2],[2,0]],i=[],n={},r=0;r<e.length;r+=3)for(var o=0;o<3;++o){var a=e[r+t[o][0]],s=e[r+t[o][1]],l=a>s?s<<16|a:a<<16|s;void 0===n[l]&&(n[l]=0,i.push(a,s))}return i},invWinding:function(e){for(var t=[],i=0;i<e.length;i+=3)t.push(e[i],e[i+2],e[i+1]);return t},toWavefrontOBJ:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.indices||!e.uvs||!e.normals||void 0!==e.primitiveMode&&e.primitiveMode!==exports.GFXPrimitiveMode.TRIANGLE_LIST)return"";for(var i=e.positions,n=e.uvs,r=e.normals,o=e.indices,a=function(e){return"".concat(o[e]+1,"/").concat(o[e]+1,"/").concat(o[e]+1)},s="",l=0;l<i.length;l+=3)s+="v ".concat(i[l]*t," ").concat(i[l+1]*t," ").concat(i[l+2]*t,"\n");for(var c=0;c<n.length;c+=2)s+="vt ".concat(n[c]," ").concat(n[c+1],"\n");for(var u=0;u<r.length;u+=3)s+="vn ".concat(r[u]," ").concat(r[u+1]," ").concat(r[u+2],"\n");for(var h=0;h<o.length;h+=3)s+="f ".concat(a(h)," ").concat(a(h+1)," ").concat(a(h+2),"\n");return s},normals:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Array(2*e.length),r=0;r<e.length/3;++r){var o=3*r,a=6*r;n[a+0]=e[o+0],n[a+1]=e[o+1],n[a+2]=e[o+2],n[a+3]=e[o+0]+t[o+0]*i,n[a+4]=e[o+1]+t[o+1]*i,n[a+5]=e[o+2]+t[o+2]*i}return n},applyDefaultGeometryOptions:CE}),$E=null,eC=null,tC=function(e){function t(e){var i;if(Z(this,t),(i=re(this,te(t).call(this)))._default=Nu.get("default-cube-texture"),i._envmap=i._default,i._isRGBE=!1,i._useIBL=!1,i._globalBinding=void 0,i.scene=e,i._globalBinding=i.scene.root.pipeline.globalBindings.get(Ic.name),!eC){var n=new Xh;n.initialize({effectName:"pipeline/skybox",defines:{USE_RGBE_CUBEMAP:i._isRGBE}}),eC=new jp({parent:n})}return $E||($E=SE(wE({width:2,height:2,length:2}))),i.initSubModel(0,$E.renderingSubMeshes[0],eC),i}return ee(t,lh),J(t,[{key:"useIBL",set:function(e){this._useIBL=e,this._updatePipeline()},get:function(){return this._useIBL}},{key:"isRGBE",set:function(e){this._isRGBE=e,eC.recompileShaders({USE_RGBE_CUBEMAP:this._isRGBE}),this.setSubModelMaterial(0,eC),this._updatePipeline()},get:function(){return this._isRGBE}},{key:"envmap",set:function(e){var t=e||this._default;this._envmap=t,this.scene.ambient.groundAlbedo[3]=this._envmap.mipmapLevel,this._updateGlobalBinding()},get:function(){return this._envmap}}]),J(t,[{key:"onGlobalPipelineStateChanged",value:function(){ae(te(t.prototype),"onGlobalPipelineStateChanged",this).call(this),this._updateGlobalBinding()}},{key:"_updatePipeline",value:function(){var e=this._useIBL?this._isRGBE?2:1:0,t=this.scene.root.pipeline;(t.macros.CC_USE_IBL||0)!==e&&(t.macros.CC_USE_IBL=e,this.scene.onGlobalPipelineStateChanged())}},{key:"_updateGlobalBinding",value:function(){var e=this._envmap.getGFXTextureView(),t=uc.getSampler(this._device,this._envmap.getSamplerHash());this._globalBinding.sampler=t,this._globalBinding.textureView=e;var i=eC;i.passes[0].bindSampler(Ic.binding,t),i.passes[0].bindTextureView(Ic.binding,e);for(var n=this._matPSORecord.get(i),r=0;r<n.length;r++)n[r].pipelineLayout.layouts[0].update()}}]),t}(),iC=function(){function e(t){Z(this,e),this._root=void 0,this._name="",this._cameras=[],this._ambient=void 0,this._skybox=void 0,this._planarShadows=void 0,this._models=[],this._directionalLights=[],this._sphereLights=[],this._spotLights=[],this._mainLight=null,this._modelId=0,this._root=t,this._ambient=new Vg(this),this._skybox=new tC(this),this._planarShadows=new bE(this)}return J(e,[{key:"root",get:function(){return this._root}},{key:"name",get:function(){return this._name}},{key:"cameras",get:function(){return this._cameras}},{key:"ambient",get:function(){return this._ambient}},{key:"skybox",get:function(){return this._skybox}},{key:"planarShadows",get:function(){return this._planarShadows}},{key:"mainLight",get:function(){return this._mainLight}},{key:"sphereLights",get:function(){return this._sphereLights}},{key:"spotLights",get:function(){return this._spotLights}},{key:"models",get:function(){return this._models}},{key:"rayResultCanvas",get:function(){return pC}},{key:"rayResultModels",get:function(){return cC}},{key:"rayResultAll",get:function(){return fC}},{key:"rayResultSingleModel",get:function(){return _C}}],[{key:"registerCreateFunc",value:function(t){t._createSceneFun=function(t){return new e(t)}}}]),J(e,[{key:"initialize",value:function(e){return this._name=e.name,!0}},{key:"destroy",value:function(){this.removeCameras(),this.removeSphereLights(),this.removeSpotLights(),this.removeModels(),this._skybox.destroy(),this._planarShadows.destroy()}},{key:"addCamera",value:function(e){e.attachToScene(this),this._cameras.push(e)}},{key:"removeCamera",value:function(e){for(var t=0;t<this._cameras.length;++t)if(this._cameras[t]===e)return this._cameras.splice(t,1),void e.detachFromScene()}},{key:"removeCameras",value:function(){for(var e,t=fe(this._cameras);!(e=t()).done;){e.value.detachFromScene()}this._cameras.splice(0)}},{key:"setMainLight",value:function(e){this._mainLight=e}},{key:"unsetMainLight",value:function(e){if(this._mainLight===e){var t=this._directionalLights;t.length?(this._mainLight=t[t.length-1],this._mainLight.node&&(this._mainLight.node.hasChangedFlags|=sh.ROTATION)):this._mainLight=null}}},{key:"addDirectionalLight",value:function(e){e.attachToScene(this),this._directionalLights.push(e)}},{key:"removeDirectionalLight",value:function(e){for(var t=0;t<this._directionalLights.length;++t)if(this._directionalLights[t]===e)return e.detachFromScene(),void this._directionalLights.splice(t,1)}},{key:"addSphereLight",value:function(e){e.attachToScene(this),this._sphereLights.push(e)}},{key:"removeSphereLight",value:function(e){for(var t=0;t<this._sphereLights.length;++t)if(this._sphereLights[t]===e)return e.detachFromScene(),void this._sphereLights.splice(t,1)}},{key:"addSpotLight",value:function(e){e.attachToScene(this),this._spotLights.push(e)}},{key:"removeSpotLight",value:function(e){for(var t=0;t<this._spotLights.length;++t)if(this._spotLights[t]===e)return e.detachFromScene(),void this._spotLights.splice(t,1)}},{key:"removeSphereLights",value:function(){for(var e=0;e<this._sphereLights.length;++e)this._sphereLights[e].detachFromScene();this._sphereLights.length=0}},{key:"removeSpotLights",value:function(){for(var e=0;e<this._spotLights.length;++e)this._spotLights[e].detachFromScene();this._spotLights=[]}},{key:"addModel",value:function(e){e.attachToScene(this),this._models.push(e)}},{key:"removeModel",value:function(e){for(var t=0;t<this._models.length;++t)if(this._models[t]===e)return this._planarShadows.destroyShadowData(e),e.detachFromScene(),void this._models.splice(t,1)}},{key:"removeModels",value:function(){for(var e,t=fe(this._models);!(e=t()).done;){var i=e.value;this._planarShadows.destroyShadowData(i),i.detachFromScene()}this._models.length=0}},{key:"onGlobalPipelineStateChanged",value:function(){for(var e,t=fe(this._models);!(e=t()).done;){e.value.onGlobalPipelineStateChanged()}this._skybox.onGlobalPipelineStateChanged(),this._planarShadows.onGlobalPipelineStateChanged()}},{key:"generateModelId",value:function(){return this._modelId++}},{key:"raycastAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec.Enum.DEFAULT|Ec.Enum.UI_2D,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=this.raycastAllModels(e,t,i),r=this.raycastAllCanvas(e,t,i),o=n||r;return fC.length=0,o&&(Array.prototype.push.apply(fC,cC),Array.prototype.push.apply(fC,pC)),o}},{key:"raycastAllModels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec.Enum.DEFAULT,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;lC.reset();for(var n,r=fe(this._models);!(n=r()).done;){var o=n.value,a=o.transform;if(a&&o.enabled&&o.node.layer&t&~Ec.Enum.IGNORE_RAYCAST&&o.worldBounds){var s=Zo.ray_aabb(e,o.worldBounds);if(!(s<=0||s>=i)){if(o.type===nh.DEFAULT){Qi.invert(oC,a.getWorldMatrix(oC)),Mi.transformMat4(nC.o,e.o,oC),Mi.normalize(nC.d,Mi.transformMat4Normal(nC.d,e.d,oC)),s=1/0;for(var l=0;l<o.subModelNum;++l){var c=o.getSubModel(l).subMeshData;if(c&&c.geometricInfo){var u=c.geometricInfo,h=u.positions,p=u.indices,f=u.doubleSided;dC(h,p,c.primitiveMode,f,i),s=Math.min(s,aC*Mi.multiply(rC,nC.d,a.worldScale).length())}}}if(s<i){var _=lC.add();_.node=o.node,_.distance=s,cC[lC.length-1]=_}}}}return cC.length=lC.length,cC.length>0}},{key:"raycastSingleModel",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec.Enum.DEFAULT,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;lC.reset();var r=t,o=r.transform;if(!(o&&r.enabled&&r.node.layer&i&~Ec.Enum.IGNORE_RAYCAST&&r.worldBounds))return!1;var a=Zo.ray_aabb(e,r.worldBounds);if(a<=0||a>=n)return!1;if(r.type===nh.DEFAULT){Qi.invert(oC,o.getWorldMatrix(oC)),Mi.transformMat4(nC.o,e.o,oC),Mi.normalize(nC.d,Mi.transformMat4Normal(nC.d,e.d,oC)),a=1/0;for(var s=0;s<r.subModelNum;++s){var l=r.getSubModel(s).subMeshData;if(l&&l.geometricInfo){var c=l.geometricInfo,u=c.positions,h=c.indices,p=c.doubleSided;dC(u,h,l.primitiveMode,p,n),a=Math.min(a,aC*Mi.multiply(rC,nC.d,o.worldScale).length())}}}if(a<n){var f=lC.add();f.node=r.node,f.distance=a,_C[lC.length-1]=f}return _C.length=lC.length,_C.length>0}},{key:"raycastAllCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec.Enum.UI_2D,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;hC.reset();var n=cc.director.getScene().getComponentsInChildren(cc.CanvasComponent);if(null!=n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r].node;null!=o&&o.active&&this._raycastUI2DNodeRecursiveChildren(e,o,t,i)}return pC.length=hC.length,pC.length>0}},{key:"_raycastUI2DNode",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec.Enum.UI_2D,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=t._uiProps.uiTransformComp;if(!(null==r||t.layer&Ec.Enum.IGNORE_RAYCAST)&&t.layer&i){r.getComputeAABB(uC);var o=Zo.ray_aabb(e,uC);if(!(o<=0)&&o<n){var a=hC.add();return a.node=t,a.distance=o,a}}}},{key:"_raycastUI2DNodeRecursiveChildren",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec.Enum.UI_2D,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=this._raycastUI2DNode(e,t,i,n);null!=r&&(pC[hC.length-1]=r);for(var o,a=fe(t.children);!(o=a()).done;){var s=o.value;null!=s&&s.active&&this._raycastUI2DNodeRecursiveChildren(e,s,i,n)}}}]),e}(),nC=Cn.create(),rC=new Mi,oC=new Qi,aC=1/0,sC=In.create(),lC=new Ta((function(){return{node:null,distance:1/0}}),8),cC=[],uC=new ca,hC=new Ta((function(){return{node:null,distance:1/0}}),8),pC=[],fC=[],_C=[],dC=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(aC=r,i===exports.GFXPrimitiveMode.TRIANGLE_LIST)for(var o=t.length,a=0;a<o;a+=3){var s=3*t[a],l=3*t[a+1],c=3*t[a+2];Mi.set(sC.a,e[s],e[s+1],e[s+2]),Mi.set(sC.b,e[l],e[l+1],e[l+2]),Mi.set(sC.c,e[c],e[c+1],e[c+2]);var u=Zo.ray_triangle(nC,sC,n);u<=0||u>=aC||(aC=u)}else if(i===exports.GFXPrimitiveMode.TRIANGLE_STRIP)for(var h=t.length-2,p=0,f=0;f<h;f+=1){var _=3*t[f-p],d=3*t[f+p+1],m=3*t[f+2];Mi.set(sC.a,e[_],e[_+1],e[_+2]),Mi.set(sC.b,e[d],e[d+1],e[d+2]),Mi.set(sC.c,e[m],e[m+1],e[m+2]),p=~p;var v=Zo.ray_triangle(nC,sC,n);v<=0||v>=aC||(aC=v)}else if(i===exports.GFXPrimitiveMode.TRIANGLE_FAN){var y=t.length-1,g=3*t[0];Mi.set(sC.a,e[g],e[g+1],e[g+2]);for(var A=1;A<y;A+=1){var b=3*t[A],x=3*t[A+1];Mi.set(sC.b,e[b],e[b+1],e[b+2]),Mi.set(sC.c,e[x],e[x+1],e[x+2]);var T=Zo.ray_triangle(nC,sC,n);T<=0||T>=aC||(aC=T)}}};exports.replaceProperty(iC.prototype,"RenderScene.prototype",[{name:"raycastUI",newName:"raycastAllCanvas"},{name:"raycastUI2D",newName:"raycastAllCanvas"},{name:"raycast",newName:"raycastAllModels"},{name:"raycastModels",newName:"raycastAllModels"},{name:"raycastModel",newName:"raycastSingleModel"}]),exports.removeProperty(iC.prototype,"RenderScene.prototype",[{name:"raycastUI2DNode"},{name:"raycastUINode"}]),exports.markAsWarning(iC.prototype,"RenderScene.prototype",[{name:"raycastAll",suggest:"using intersect in geometry"},{name:"raycastAllModels",suggest:"using intersect in geometry"},{name:"raycastSingleModel",suggest:"using intersect in geometry"},{name:"raycastAllCanvas",suggest:"using intersect in geometry"},{name:"rayResultCanvas"},{name:"rayResultModels"},{name:"rayResultAll"},{name:"rayResultSingleModel"}]);var mC={};exports.removeProperty(mC,"CameraVisFlags",[{name:"GENERAL"}]),exports.replaceProperty(mC,"CameraVisFlags",[{name:"PROFILER",newName:"PROFILER",target:Ec.BitMask,targetName:"PROFILER"},{name:"GIZMOS",newName:"GIZMOS",target:Ec.BitMask,targetName:"GIZMOS"},{name:"EDITOR",newName:"EDITOR",target:Ec.BitMask,targetName:"EDITOR"},{name:"UI",newName:"UI",target:Ec.BitMask,targetName:"UI_3D"},{name:"UI2D",newName:"UI2D",target:Ec.BitMask,targetName:"UI_2D"}]),cc.CameraVisFlags=mC;var vC={};exports.removeProperty(vC,"VisibilityFlags",[{name:"GENERAL"}]),exports.replaceProperty(vC,"VisibilityFlags",[{name:"ALWALS",newName:"ALWALS",target:Ec.Enum,targetName:"ALWALS"},{name:"PROFILER",newName:"PROFILER",target:Ec.Enum,targetName:"PROFILER"},{name:"GIZMOS",newName:"GIZMOS",target:Ec.Enum,targetName:"GIZMOS"},{name:"EDITOR",newName:"EDITOR",target:Ec.Enum,targetName:"EDITOR"},{name:"UI",newName:"UI",target:Ec.Enum,targetName:"UI_3D"},{name:"UI2D",newName:"UI2D",target:Ec.Enum,targetName:"UI_2D"}]),cc.VisibilityFlags=vC;var yC,gC,AC,bC,xC,TC,SC,EC,CC,wC,kC,OC,RC,FC,IC,MC=new Mi(0,0,-1),PC=new Mi,DC=new Xi,BC=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._dir=new Mi(1,-1,-1),e._illum=Vg.SUN_ILLUM,e._type=eT.DIRECTIONAL,e}return ee(t,rT),J(t,[{key:"direction",set:function(e){this._dir=e,Mi.normalize(this._dir,this._dir)},get:function(){return this._dir}},{key:"illuminance",set:function(e){this._illum=e},get:function(){return this._illum}}]),J(t,[{key:"update",value:function(){this._node&&this._node.hasChangedFlags&&(this._dir=Mi.transformQuat(PC,MC,this._node.getWorldRotation(DC)),Mi.normalize(this._dir,this._dir))}}]),t}(),NC=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._needUpdate=!1,e._size=.15,e._range=1,e._luminance=1700/nT(e._size),e._pos=void 0,e._aabb=void 0,e._type=eT.SPHERE,e._aabb=ca.create(),e._pos=new Mi,e}return ee(t,rT),J(t,[{key:"position",get:function(){return this._pos}},{key:"size",set:function(e){this._size=e},get:function(){return this._size}},{key:"range",set:function(e){this._range=e,this._needUpdate=!0},get:function(){return this._range}},{key:"luminance",set:function(e){this._luminance=e},get:function(){return this._luminance}},{key:"aabb",get:function(){return this._aabb}}]),J(t,[{key:"update",value:function(){this._node&&(this._node.hasChangedFlags||this._needUpdate)&&(this._node.getWorldPosition(this._pos),ca.set(this._aabb,this._pos.x,this._pos.y,this._pos.z,this._range,this._range,this._range),this._needUpdate=!1)}}]),t}(),LC=new Mi(0,0,-1),zC=(new Mi,new Xi),GC=new Qi,UC=new Qi,XC=new Qi,VC=new Qi,HC=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._dir=new Mi(1,-1,-1),e._size=.15,e._range=5,e._luminance=1700/nT(e._size),e._spotAngle=Math.cos(Math.PI/6),e._pos=void 0,e._aabb=void 0,e._frustum=void 0,e._angle=0,e._needUpdate=!1,e._type=eT.SPOT,e._aabb=ca.create(),e._frustum=ma.create(),e._pos=new Mi,e}return ee(t,rT),J(t,[{key:"position",get:function(){return this._pos}},{key:"size",set:function(e){this._size=e},get:function(){return this._size}},{key:"range",set:function(e){this._range=e,this._needUpdate=!0},get:function(){return this._range}},{key:"luminance",set:function(e){this._luminance=e},get:function(){return this._luminance}},{key:"direction",get:function(){return this._dir}},{key:"spotAngle",get:function(){return this._spotAngle},set:function(e){this._angle=.5*e,this._spotAngle=Math.cos(.5*e),this._needUpdate=!0}},{key:"aabb",get:function(){return this._aabb}},{key:"frustum",get:function(){return this._frustum}}]),J(t,[{key:"update",value:function(){this._node&&(this._node.hasChangedFlags||this._needUpdate)&&(this._node.getWorldPosition(this._pos),Mi.transformQuat(this._dir,LC,this._node.getWorldRotation(zC)),Mi.normalize(this._dir,this._dir),ca.set(this._aabb,this._pos.x,this._pos.y,this._pos.z,this._range,this._range,this._range),this._node.getWorldRT(GC),Qi.invert(GC,GC),Qi.perspective(UC,this._angle,1,.001,this._range),Qi.multiply(XC,UC,GC),this._frustum.update(XC,VC),this._needUpdate=!1)}}]),t}(),jC=function e(){Z(this,e),this.material=null,this.vertexCount=0,this.indiceCount=0},WC=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).vData=null,i.uvDirty=!0,i.vertDirty=!0,i._datas=[],i._indices=[],i._pivotX=0,i._pivotY=0,i._width=0,i._height=0,i}return ee(t,jC),J(t,[{key:"updateSizeNPivot",value:function(e,t,i,n){e===this._width&&t===this._height&&i===this._pivotX&&n===this._pivotY||(this._width=e,this._height=t,this._pivotX=i,this._pivotY=n,this.vertDirty=!0)}},{key:"clear",value:function(){this._datas.length=0,this._indices.length=0,this._pivotX=0,this._pivotY=0,this._width=0,this._height=0,this.uvDirty=!0,this.vertDirty=!0,this.material=null,this.vertexCount=0,this.indiceCount=0}},{key:"dataLength",get:function(){return this._datas.length},set:function(e){var t=this._datas;if(t.length!==e){var i=t.length,n=0;for(n=e;n<i;n++)qC.free(t[n]);for(n=i;n<e;n++)t[n]=qC.alloc();t.length=e}}},{key:"datas",get:function(){return this._datas}}],[{key:"add",value:function(){return QC.add()}},{key:"remove",value:function(e){var t=QC.data.indexOf(e);-1!==t&&(QC.data[t].clear(),QC.removeAt(t))}}]),t}(),YC=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).vData=new Float32Array(2304*Float32Array.BYTES_PER_ELEMENT),i.iData=new Uint16Array(1536),i.vertexStart=0,i.indiceStart=0,i.byteStart=0,i.byteCount=0,i._formatByte=9*Float32Array.BYTES_PER_ELEMENT,i}return ee(t,jC),J(t,[{key:"request",value:function(e,t){var i=this.byteCount+e*this._formatByte,n=this.indiceCount+t;if(e+this.vertexCount>65535)return!1;var r=this.vData.byteLength,o=this.iData.length,a=this.vData.length,s=this.iData.length;if(i>r||n>o){for(;r<i||o<n;)r=4*(a*=2),o=s*=2;var l=new Float32Array(this.vData.buffer);this.vData=new Float32Array(a),this.vData.set(l,0);var c=new Uint16Array(this.iData.buffer);this.iData=new Uint16Array(s),this.iData.set(c,0)}return this.vertexCount+=e,this.indiceCount+=t,this.byteCount=i,!0}},{key:"reset",value:function(){this.vertexCount=0,this.indiceCount=0,this.byteCount=0,this.vertexStart=0,this.indiceStart=0,this.byteStart=0}}]),t}(),qC=new xa((function(){return{x:0,y:0,z:0,u:0,v:0,color:on.WHITE.clone()}}),128),QC=new Ta((function(){return new WC}),32),ZC=AS,KC=Object.freeze({__proto__:null,addStage:ZC,createIA:function(e,t){if(!t.positions)return console.error("The data must have positions field"),null;for(var i=[],n=t.positions.length/3,r=0;r<n;++r)i.push(t.positions[3*r],t.positions[3*r+1],t.positions[3*r+2]),t.normals&&i.push(t.normals[3*r],t.normals[3*r+1],t.normals[3*r+2]),t.uvs&&i.push(t.uvs[2*r],t.uvs[2*r+1]),t.colors&&i.push(t.colors[3*r],t.uvs[3*r+1],t.colors[3*r+2]);var o=[];o.push({name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F}),t.normals&&o.push({name:exports.GFXAttributeName.ATTR_NORMAL,format:exports.GFXFormat.RGB32F}),t.uvs&&o.push({name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RG32F}),t.colors&&o.push({name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGB32F});var a=e.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:4*i.length,stride:4*i.length/n});a.update(new Float32Array(i));var s=e.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:2*t.indices.length,stride:2});return s.update(new Uint16Array(t.indices)),e.createInputAssembler({attributes:o,vertexBuffers:[a],indexBuffer:s})},get RenderQueue(){return mS},get PassStage(){return vS},genHandle:zu,getBindingTypeFromHandle:Gu,getTypeFromHandle:Uu,getBindingFromHandle:Xu,getOffsetFromHandle:Vu,customizeType:Hu,type2reader:ju,type2writer:Wu,getDefaultFromType:qu,assignDefines:Qu,Pass:wh,programLib:ih,get SamplerInfoIndex(){return Xl},genSamplerHash:ql,samplerLib:uc,nearestPOT:bS,TextureBufferPool:OS,MaterialInstance:jp,PassInstance:Hp,uploadJointData:zS,MINIMUM_JOINT_TEXTURE_SIZE:480,selectJointsMediumFormat:GS,jointTextureSamplerHash:VS,JointTexturePool:JS,JointAnimationInfo:$S,getWorldMatrix:nE,getTransform:rE,deleteTransform:oE,SkinningModel:_E,BakedSkinningModel:mE,Ambient:Vg,get CameraFOVAxis(){return av},get CameraProjection(){return sv},get CameraAperture(){return lv},get CameraISO(){return cv},get CameraShutter(){return uv},SKYBOX_FLAG:bv,Camera:xv,CameraVisFlags:mC,VisibilityFlags:vC,DirectionalLight:BC,ColorTemperatureToRGB:iT,get LightType(){return eT},nt2lm:nT,Light:rT,get ModelType(){return nh},Model:lh,PlanarShadows:bE,RenderScene:iC,Skybox:tC,SphereLight:NC,SpotLight:HC,SubModel:Lu}),JC=qa("cc.UIComponent")(yC=$a(By)(yC=ts(110)(yC=is(yC=Ja(yC=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._lastParent=null,i}return ee(t,sp),J(t,[{key:"__preload",value:function(){this.node._uiProps.uiComp=this}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"onDestroy",value:function(){this.node._uiProps.uiComp===this&&(this.node._uiProps.uiComp=null)}},{key:"updateAssembler",value:function(e){}},{key:"postUpdateAssembler",value:function(e){}}]),t}())||yC)||yC)||yC)||yC)||yC;bt(exports.GFXBlendFactor),(IC=exports.InstanceMaterialType||(exports.InstanceMaterialType={}))[IC.ADDCOLOR=0]="ADDCOLOR",IC[IC.ADDCOLORANDTEXTURE=1]="ADDCOLORANDTEXTURE",IC[IC.GRAYSCALE=2]="GRAYSCALE";var $C,ew,tw,iw,nw,rw,ow,aw,sw,lw,cw,uw,hw,pw,fw,_w,dw,mw,vw,yw,gw,Aw,bw,xw,Tw,Sw,Ew,Cw,ww,kw,Ow,Rw={parent:null,owner:null,subModelIdx:0},Fw=(gC=qa("cc.UIRenderComponent"),AC=Qa({type:exports.GFXBlendFactor,displayOrder:0,tooltip:"原图混合模式"}),bC=Qa({type:exports.GFXBlendFactor,displayOrder:1,tooltip:"目标混合模式"}),xC=Qa({displayOrder:2,tooltip:"渲染颜色"}),TC=Qa({type:Xh,displayOrder:3,tooltip:"源材质",visible:!1}),gC((FC=RC=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_srcBlendFactor",CC,ne(i)),_e(i,"_dstBlendFactor",wC,ne(i)),_e(i,"_color",kC,ne(i)),_e(i,"_sharedMaterial",OC,ne(i)),i._assembler=null,i._postAssembler=null,i._renderData=null,i._renderDataFlag=!0,i._renderFlag=!0,i._delegateSrc=null,i._material=null,i._instanceMaterialType=exports.InstanceMaterialType.ADDCOLORANDTEXTURE,i._blendTemplate={blendState:{targets:[{blendSrc:exports.GFXBlendFactor.SRC_ALPHA,blendDst:exports.GFXBlendFactor.ONE_MINUS_SRC_ALPHA}]},depthStencilState:{},rasterizerState:{}},i}return ee(t,JC),J(t,[{key:"__preload",value:function(){ae(te(t.prototype),"__preload",this).call(this),this._instanceMaterial(),this._flushAssembler&&this._flushAssembler()}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this.node.on(exports.SystemEventType.ANCHOR_CHANGED,this._nodeStateChange,this),this.node.on(exports.SystemEventType.SIZE_CHANGED,this._nodeStateChange,this),this._renderFlag=this._canRender()}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this),this.node.off(exports.SystemEventType.ANCHOR_CHANGED,this._nodeStateChange,this),this.node.off(exports.SystemEventType.SIZE_CHANGED,this._nodeStateChange,this),this._renderFlag=!1}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this.destroyRenderData(),this._material&&this._material.destroy(),this._updateMaterial(null),this._renderData=null}},{key:"markForUpdateRenderData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._renderFlag=this._canRender(),e&&this._renderFlag){var t=this._renderData;t&&(t.vertDirty=!0),this._renderDataFlag=e}else e||(this._renderDataFlag=e)}},{key:"requestRenderData",value:function(){var e=WC.add();return this._renderData=e,e}},{key:"destroyRenderData",value:function(){this._renderData&&(WC.remove(this._renderData),this._renderData=null)}},{key:"updateAssembler",value:function(e){ae(te(t.prototype),"updateAssembler",this).call(this,e),this._renderFlag&&(this._checkAndUpdateRenderData(),this._render(e))}},{key:"postUpdateAssembler",value:function(e){ae(te(t.prototype),"postUpdateAssembler",this).call(this,e),this._renderFlag&&this._postRender(e)}},{key:"_render",value:function(e){}},{key:"_postRender",value:function(e){}},{key:"_checkAndUpdateRenderData",value:function(){this._renderDataFlag&&(this._assembler.updateRenderData(this),this._renderDataFlag=!1)}},{key:"_canRender",value:function(){return null!==this.material&&this.enabled&&(this._delegateSrc?this._delegateSrc.activeInHierarchy:this.enabledInHierarchy)}},{key:"_postCanRender",value:function(){}},{key:"_updateColor",value:function(){this._assembler&&this._assembler.updateColor&&this._assembler.updateColor(this)}},{key:"_updateMaterial",value:function(e){this._material=e,this._updateBlendFunc()}},{key:"_updateBlendFunc",value:function(){if(this._material){var e=this._blendTemplate.blendState.targets[0];e.blendDst===this._dstBlendFactor&&e.blendSrc===this._srcBlendFactor||(e.blendDst=this._dstBlendFactor,e.blendSrc=this._srcBlendFactor,this._blendTemplate.depthStencilState=this._material.passes[0].depthStencilState,this._blendTemplate.rasterizerState=this._material.passes[0].rasterizerState,this._material.overridePipelineStates(this._blendTemplate,0))}}},{key:"_nodeStateChange",value:function(e){this._renderData&&this.markForUpdateRenderData();for(var i,n=fe(this.node.children);!(i=n()).done;){var r=i.value.getComponent(t);r&&r.markForUpdateRenderData()}}},{key:"_instanceMaterial",value:function(){var e=null;if(Rw.owner=new Yp,this._sharedMaterial)Rw.parent=this._sharedMaterial,e=new jp(Rw);else switch(this._instanceMaterialType){case exports.InstanceMaterialType.ADDCOLOR:Rw.parent=Nu.get("ui-base-material"),e=new jp(Rw);break;case exports.InstanceMaterialType.ADDCOLORANDTEXTURE:Rw.parent=Nu.get("ui-sprite-material"),e=new jp(Rw);break;case exports.InstanceMaterialType.GRAYSCALE:Rw.parent=Nu.get("ui-sprite-gray-material"),e=new jp(Rw)}this._updateMaterial(e)}},{key:"srcBlendFactor",get:function(){return this._srcBlendFactor},set:function(e){this._srcBlendFactor!==e&&(this._srcBlendFactor=e,this._updateBlendFunc())}},{key:"dstBlendFactor",get:function(){return this._dstBlendFactor},set:function(e){this._dstBlendFactor!==e&&(this._dstBlendFactor=e,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(e){this._color!==e&&(this._color.set(e),this._updateColor(),this.markForUpdateRenderData())}},{key:"sharedMaterial",get:function(){return this._sharedMaterial},set:function(e){this._sharedMaterial!==e&&(this._sharedMaterial=e,this._instanceMaterial&&this._instanceMaterial())}},{key:"material",get:function(){return this._material||this._instanceMaterial&&this._instanceMaterial(),this._material}},{key:"renderData",get:function(){return this._renderData}},{key:"delegateSrc",set:function(e){this._delegateSrc=e}}]),t}(),RC.BlendState=exports.GFXBlendFactor,RC.Assembler=null,RC.PostAssembler=null,de((EC=FC).prototype,"srcBlendFactor",[AC],Object.getOwnPropertyDescriptor(EC.prototype,"srcBlendFactor"),EC.prototype),de(EC.prototype,"dstBlendFactor",[bC],Object.getOwnPropertyDescriptor(EC.prototype,"dstBlendFactor"),EC.prototype),de(EC.prototype,"color",[xC],Object.getOwnPropertyDescriptor(EC.prototype,"color"),EC.prototype),de(EC.prototype,"sharedMaterial",[TC],Object.getOwnPropertyDescriptor(EC.prototype,"sharedMaterial"),EC.prototype),CC=de(EC.prototype,"_srcBlendFactor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXBlendFactor.SRC_ALPHA}}),wC=de(EC.prototype,"_dstBlendFactor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.GFXBlendFactor.ONE_MINUS_SRC_ALPHA}}),kC=de(EC.prototype,"_color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),OC=de(EC.prototype,"_sharedMaterial",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),SC=EC))||SC);cc.UIRenderComponent=Fw,function(e){e[e.SIMPLE=0]="SIMPLE",e[e.SLICED=1]="SLICED",e[e.TILED=2]="TILED",e[e.FILLED=3]="FILLED"}(Cw||(Cw={})),bt(Cw),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.RADIAL=2]="RADIAL"}(ww||(ww={})),bt(ww),function(e){e[e.CUSTOM=0]="CUSTOM",e[e.TRIMMED=1]="TRIMMED",e[e.RAW=2]="RAW"}(kw||(kw={})),bt(kw),function(e){e.SPRITE_FRAME_CHANGED="spriteframe-changed"}(Ow||(Ow={}));var Iw,Mw,Pw,Dw,Bw,Nw,Lw,zw,Gw,Uw=($C=qa("cc.SpriteComponent"),ew=as("i18n:cc.SpriteComponent"),tw=ts(110),iw=es("UI/Render/Sprite"),nw=Qa({type:S_,displayOrder:4,tooltip:"图片资源所属的 Atlas 图集资源"}),rw=Qa({type:Ru,displayOrder:5,tooltip:"渲染 Sprite 使用的 SpriteFrame 图片资源"}),ow=Qa({type:Cw,displayOrder:6,tooltip:"渲染模式：\n- 普通（Simple）：修改尺寸会整体拉伸图像，适用于序列帧动画和普通图像 \n- 九宫格（Sliced）：修改尺寸时四个角的区域不会拉伸，适用于 UI 按钮和面板背景 \n- 填充（Filled）：设置一定的填充起始位置和方向，能够以一定比率剪裁显示图片"}),aw=Qa({type:ww,tooltip:"填充方向，可以选择横向（Horizontal），纵向（Vertical）和扇形（Radial）三种方向"}),sw=Qa({tooltip:"扇形填充时，指定扇形的中心点，取值范围 0 ~ 1"}),lw=Qa({range:[0,1,.1],tooltip:"填充起始位置，输入一个 0 ~ 1 之间的小数表示起始位置的百分比"}),cw=Qa({range:[0,1,.1],tooltip:"填充总量，取值范围 0 ~ 1 指定显示图像范围的百分比"}),uw=Qa({displayOrder:8,tooltip:"节点约束框内是否包括透明像素区域，勾选此项会去除节点约束框内的透明区域"}),hw=Qa({type:kw,displayOrder:7,tooltip:"指定 Sprite 所在节点的尺寸，CUSTOM 表示自定义尺寸，TRIMMED 表示取原始图片剪裁透明像素后的尺寸，RAW 表示取原始图片未剪裁的尺寸"}),$C(pw=ew(pw=tw(pw=iw((Ew=Sw=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_spriteFrame",_w,ne(i)),_e(i,"_type",dw,ne(i)),_e(i,"_fillType",mw,ne(i)),_e(i,"_sizeMode",vw,ne(i)),_e(i,"_fillCenter",yw,ne(i)),_e(i,"_fillStart",gw,ne(i)),_e(i,"_fillRange",Aw,ne(i)),_e(i,"_isTrimmedMode",bw,ne(i)),_e(i,"_useGrayscale",xw,ne(i)),_e(i,"_atlas",Tw,ne(i)),i}return ee(t,Fw),J(t,[{key:"__preload",value:function(){this._useGrayscale&&(this._instanceMaterialType=exports.InstanceMaterialType.GRAYSCALE),ae(te(t.prototype),"__preload",this)&&ae(te(t.prototype),"__preload",this).call(this),this._spriteFrame&&(this._spriteFrame.on("load",this._markForUpdateUvDirty,this),this._markForUpdateUvDirty())}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._activateMaterial()}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this.destroyRenderData(),this._spriteFrame&&this._spriteFrame.off("load")}},{key:"changeSpriteFrameFromAtlas",value:function(e){if(this._atlas){var t=this._atlas.getSpriteFrame(e);this.spriteFrame=t}else console.warn("SpriteAtlas is null.")}},{key:"_render",value:function(e){e.commitComp(this,this._spriteFrame.getGFXTextureView(),this._assembler,this._spriteFrame.texture.getGFXSampler())}},{key:"_canRender",value:function(){if(!ae(te(t.prototype),"_canRender",this).call(this))return!1;var e=this._spriteFrame;return!(!e||!e.textureLoaded())}},{key:"_flushAssembler",value:function(){var e=t.Assembler.getAssembler(this);this._assembler!==e&&(this.destroyRenderData(),this._assembler=e),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this._material,this.markForUpdateRenderData(),this._updateColor())}},{key:"_applySpriteSize",value:function(){if(this._spriteFrame){if(kw.RAW===this._sizeMode){var e=this._spriteFrame.originalSize;this.node.setContentSize(e)}else if(kw.TRIMMED===this._sizeMode){var t=this._spriteFrame.getRect();this.node.setContentSize(t.width,t.height)}this._activateMaterial()}}},{key:"_resized",value:function(){}},{key:"_activateMaterial",value:function(){var e=this._spriteFrame,t=this._material;cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS?(e&&t&&this.markForUpdateRenderData(),this._renderData&&(this._renderData.material=t)):this.markForUpdateRenderData()}},{key:"_onTextureLoaded",value:function(){this.isValid&&this._applySpriteSize()}},{key:"_applySpriteFrame",value:function(e){var t=this._spriteFrame;this._renderData&&(e&&e.off("load",this._markForUpdateUvDirty),t&&t.on("load",this._markForUpdateUvDirty,this),this._renderData.uvDirty||(this._renderData.uvDirty=!e||!t||e.uvHash!==t.uvHash),this._renderDataFlag=this._renderData.uvDirty),t&&(e&&t===e||(t.loaded?this._onTextureLoaded():t.once("load",this._onTextureLoaded,this)))}},{key:"_markForUpdateUvDirty",value:function(){this._renderData&&(this._renderData.uvDirty=!0,this._renderDataFlag=!0)}},{key:"spriteAtlas",get:function(){return this._atlas},set:function(e){this._atlas!==e&&(this._atlas=e)}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){if(this._spriteFrame!==e){var t=this._spriteFrame;this._spriteFrame=e,this.markForUpdateRenderData(!1),this._applySpriteFrame(t)}}},{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this._flushAssembler())}},{key:"fillType",get:function(){return this._fillType},set:function(e){this._fillType!==e&&(e===ww.RADIAL||this._fillType===ww.RADIAL?(this.destroyRenderData(),this._renderData=null):this._renderData&&this.markForUpdateRenderData(!0)),this._fillType=e,this._flushAssembler()}},{key:"fillCenter",get:function(){return this._fillCenter},set:function(e){this._fillCenter.x=e.x,this._fillCenter.y=e.y,this._type===Cw.FILLED&&this._renderData&&this.markForUpdateRenderData()}},{key:"fillStart",get:function(){return this._fillStart},set:function(e){this._fillStart=pi(e,-1,1),this._type===Cw.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"fillRange",get:function(){return this._fillRange},set:function(e){this._fillRange=pi(e,0,1),this._type===Cw.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"trim",get:function(){return this._isTrimmedMode},set:function(e){this._isTrimmedMode!==e&&(this._isTrimmedMode=e,this._type===Cw.SIMPLE&&this._renderData&&this.markForUpdateRenderData(!0))}},{key:"grayscale",get:function(){return this._useGrayscale},set:function(e){this._useGrayscale!==e&&(this._useGrayscale=e,this._instanceMaterialType=!0===e?exports.InstanceMaterialType.GRAYSCALE:exports.InstanceMaterialType.ADDCOLORANDTEXTURE,this._instanceMaterial())}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(e){this._sizeMode!==e&&(this._sizeMode=e,e!==kw.CUSTOM&&this._applySpriteSize())}}]),t}(),Sw.FillType=ww,Sw.Type=Cw,Sw.SizeMode=kw,Sw.EventType=Ow,de((fw=Ew).prototype,"spriteAtlas",[nw],Object.getOwnPropertyDescriptor(fw.prototype,"spriteAtlas"),fw.prototype),de(fw.prototype,"spriteFrame",[rw],Object.getOwnPropertyDescriptor(fw.prototype,"spriteFrame"),fw.prototype),de(fw.prototype,"type",[ow],Object.getOwnPropertyDescriptor(fw.prototype,"type"),fw.prototype),de(fw.prototype,"fillType",[aw],Object.getOwnPropertyDescriptor(fw.prototype,"fillType"),fw.prototype),de(fw.prototype,"fillCenter",[sw],Object.getOwnPropertyDescriptor(fw.prototype,"fillCenter"),fw.prototype),de(fw.prototype,"fillStart",[lw],Object.getOwnPropertyDescriptor(fw.prototype,"fillStart"),fw.prototype),de(fw.prototype,"fillRange",[cw],Object.getOwnPropertyDescriptor(fw.prototype,"fillRange"),fw.prototype),de(fw.prototype,"trim",[uw],Object.getOwnPropertyDescriptor(fw.prototype,"trim"),fw.prototype),de(fw.prototype,"grayscale",[Qa],Object.getOwnPropertyDescriptor(fw.prototype,"grayscale"),fw.prototype),de(fw.prototype,"sizeMode",[hw],Object.getOwnPropertyDescriptor(fw.prototype,"sizeMode"),fw.prototype),_w=de(fw.prototype,"_spriteFrame",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dw=de(fw.prototype,"_type",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Cw.SIMPLE}}),mw=de(fw.prototype,"_fillType",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ww.HORIZONTAL}}),vw=de(fw.prototype,"_sizeMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return kw.TRIMMED}}),yw=de(fw.prototype,"_fillCenter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(0,0)}}),gw=de(fw.prototype,"_fillStart",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Aw=de(fw.prototype,"_fillRange",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bw=de(fw.prototype,"_isTrimmedMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xw=de(fw.prototype,"_useGrayscale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tw=de(fw.prototype,"_atlas",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pw=fw))||pw)||pw)||pw)||pw);cc.SpriteComponent=Uw;var Xw=(Iw=qa("cc.SubContextView"),Mw=as("i18n:cc.SubContextView"),Pw=ts(110),Dw=$a(By),Bw=es("Components/SubContextView"),Nw=Qa({tooltip:"帧数"}),Iw(Lw=Mw(Lw=Pw(Lw=Dw(Lw=Bw((de((zw=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_fps",Gw,ne(e)),e._sprite=void 0,e._imageAsset=void 0,e._context=void 0,e._updatedTime=0,e._updateInterval=0,e._sprite=null,e._imageAsset=new Vl,e._context=null,e._updatedTime=performance.now(),e}return ee(t,sp),J(t,[{key:"fps",get:function(){return this._fps},set:function(e){this._fps!==e&&(this._fps=e,this._updateInterval=1/e,this._updateSubContextFrameRate())}}]),J(t,[{key:"onLoad",value:function(){if(wx&&wx.getOpenDataContext){this._updateInterval=1e3/this._fps,this._context=wx.getOpenDataContext(),this.reset();var e=this._imageAsset,t=this._context.canvas;if(e.reset(t),e._texture.create(t.width,t.height),this._sprite=this.node.getComponent(Uw),this._sprite||(this._sprite=this.node.addComponent(Uw)),this._sprite.spriteFrame)this._sprite.spriteFrame.texture=this._imageAsset._texture;else{var i=new Ru;i.texture=this._imageAsset._texture,this._sprite.spriteFrame=i}}else this.enabled=!1}},{key:"onEnable",value:function(){this._runSubContextMainLoop(),this._registerNodeEvent(),this._updateSubContextFrameRate(),this.updateSubContextViewport()}},{key:"onDisable",value:function(){this._unregisterNodeEvent(),this._stopSubContextMainLoop()}},{key:"update",value:function(e){if(void 0===e)return this._context&&this._context.postMessage({fromEngine:!0,event:"step"}),void this._updateSubContextTexture();performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())}},{key:"reset",value:function(){if(this._context){this.updateSubContextViewport();var e=this._context.canvas,t=this.node.getComponent(By);e&&(e.width=t.width,e.height=t.height)}}},{key:"updateSubContextViewport",value:function(){if(this._context){var e=this.node.getComponent(By).getBoundingBoxToWorld(),t=lS.getScaleX(),i=lS.getScaleY(),n=lS.getViewportRect();this._context.postMessage({fromEngine:!0,event:"viewport",x:e.x*t+n.x,y:e.y*i+n.y,width:e.width*t,height:e.height*i})}}},{key:"_updateSubContextTexture",value:function(){var e=this._imageAsset;if(e&&this._context&&!(e.width<=0||e.height<=0)){var t=this._context.canvas;e.reset(t),(t.width>e.width||t.height>e.height)&&this._imageAsset._texture.create(t.width,t.height),this._imageAsset._texture.uploadData(t)}}},{key:"_registerNodeEvent",value:function(){this.node.on(rg.EventType.TRANSFORM_CHANGED,this.updateSubContextViewport,this),this.node.on(rg.EventType.SIZE_CHANGED,this.updateSubContextViewport,this)}},{key:"_unregisterNodeEvent",value:function(){this.node.off(rg.EventType.TRANSFORM_CHANGED,this.updateSubContextViewport,this),this.node.off(rg.EventType.SIZE_CHANGED,this.updateSubContextViewport,this)}},{key:"_runSubContextMainLoop",value:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!0})}},{key:"_stopSubContextMainLoop",value:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!1})}},{key:"_updateSubContextFrameRate",value:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"frameRate",value:this._fps})}}]),t}()).prototype,"fps",[Nw],Object.getOwnPropertyDescriptor(zw.prototype,"fps"),zw.prototype),Gw=de(zw.prototype,"_fps",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Lw=zw))||Lw)||Lw)||Lw)||Lw)||Lw);cc.SubContextView=Xw;var Vw=function(){function e(){Z(this,e),this._id="",this._priority=0,this._executeInEditMode=!1}return J(e,[{key:"init",value:function(){}},{key:"update",value:function(e){}},{key:"postUpdate",value:function(e){}},{key:"priority",set:function(e){this._priority=e},get:function(){return this._priority}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}}],[{key:"sortByPriority",value:function(e,t){return e._priority<t._priority?1:e._priority>t.priority?-1:0}}]),e}(),Hw=new be("Scheduler"),jw=function e(t,i,n,r){Z(this,e),this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=t,this.priority=i,this.paused=n,this.markedForDeletion=r};jw.get=function(e,t,i,n){var r=jw._listEntries.pop();return r?(r.target=e,r.priority=t,r.paused=i,r.markedForDeletion=n):r=new jw(e,t,i,n),r},jw.put=function(e){jw._listEntries.length<20&&(e.target=null,jw._listEntries.push(e))},jw._listEntries=[];var Ww=function e(t,i,n,r){Z(this,e),this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=t,this.entry=i,this.target=n,this.callback=r};Ww.get=function(e,t,i,n){var r=Ww._hashUpdateEntries.pop();return r?(r.list=e,r.entry=t,r.target=i,r.callback=n):r=new Ww(e,t,i,n),r},Ww.put=function(e){Ww._hashUpdateEntries.length<20&&(e.list=e.entry=e.target=e.callback=null,Ww._hashUpdateEntries.push(e))},Ww._hashUpdateEntries=[];var Yw=function e(t,i,n,r,o,a){Z(this,e),this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=t,this.target=i,this.timerIndex=n,this.currentTimer=r,this.currentTimerSalvaged=o,this.paused=a};Yw.get=function(e,t,i,n,r,o){var a=Yw._hashTimerEntries.pop();return a?(a.timers=e,a.target=t,a.timerIndex=i,a.currentTimer=n,a.currentTimerSalvaged=r,a.paused=o):a=new Yw(e,t,i,n,r,o),a},Yw.put=function(e){Yw._hashTimerEntries.length<20&&(e.timers=e.target=e.currentTimer=null,Yw._hashTimerEntries.push(e))},Yw._hashTimerEntries=[];var qw=function(){function e(){Z(this,e),this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null,this._callback=null}return J(e,[{key:"initWithCallback",value:function(e,t,i,n,r,o){return this._lock=!1,this._scheduler=e,this._target=i,this._callback=t,this._elapsed=-1,this._interval=n,this._delay=o,this._useDelay=this._delay>0,this._repeat=r,this._runForever=this._repeat===cc.macro.REPEAT_FOREVER,!0}},{key:"getInterval",value:function(){return this._interval}},{key:"setInterval",value:function(e){this._interval=e}},{key:"update",value:function(e){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=e,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))}},{key:"getCallback",value:function(){return this._callback}},{key:"trigger",value:function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)}},{key:"cancel",value:function(){this._scheduler.unschedule(this._callback,this._target)}}]),e}();qw._timers=[],qw.get=function(){return qw._timers.pop()||new qw},qw.put=function(e){qw._timers.length<20&&!e._lock&&(e._scheduler=e._target=e._callback=null,qw._timers.push(e))};var Qw=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._timeScale=void 0,e._updatesNegList=void 0,e._updates0List=void 0,e._updatesPosList=void 0,e._hashForUpdates=void 0,e._hashForTimers=void 0,e._currentTarget=void 0,e._currentTargetSalvaged=void 0,e._updateHashLocked=void 0,e._arrayForTimers=void 0,e._timeScale=1,e._updatesNegList=[],e._updates0List=[],e._updatesPosList=[],e._hashForUpdates=Re(!0),e._hashForTimers=Re(!0),e._currentTarget=null,e._currentTargetSalvaged=!1,e._updateHashLocked=!1,e._arrayForTimers=[],e}return ee(t,Vw),J(t,null,[{key:"enableForTarget",value:function(e){var t=!1;(e.uuid||e.id)&&(t=!0),t||(e.__instanceId?cc.warnID(1513):e.id=Hw.getNewId())}}]),J(t,[{key:"setTimeScale",value:function(e){this._timeScale=e}},{key:"getTimeScale",value:function(){return this._timeScale}},{key:"update",value:function(e){var t,i,n,r,o;for(this._updateHashLocked=!0,1!==this._timeScale&&(e*=this._timeScale),t=0,n=(i=this._updatesNegList).length;t<n;t++)(r=i[t]).paused||r.markedForDeletion||r.target.update(e);for(t=0,n=(i=this._updates0List).length;t<n;t++)(r=i[t]).paused||r.markedForDeletion||r.target.update(e);for(t=0,n=(i=this._updatesPosList).length;t<n;t++)(r=i[t]).paused||r.markedForDeletion||r.target.update(e);var a=this._arrayForTimers;for(t=0;t<a.length;t++){if(o=a[t],this._currentTarget=o,this._currentTargetSalvaged=!1,!o.paused)for(o.timerIndex=0;o.timerIndex<o.timers.length;++o.timerIndex)o.currentTimer=o.timers[o.timerIndex],o.currentTimerSalvaged=!1,o.currentTimer.update(e),o.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--t)}for(t=0,i=this._updatesNegList;t<i.length;)(r=i[t]).markedForDeletion?this._removeUpdateFromHash(r):t++;for(t=0,i=this._updates0List;t<i.length;)(r=i[t]).markedForDeletion?this._removeUpdateFromHash(r):t++;for(t=0,i=this._updatesPosList;t<i.length;)(r=i[t]).markedForDeletion?this._removeUpdateFromHash(r):t++;this._updateHashLocked=!1,this._currentTarget=null}},{key:"schedule",value:function(e,t,i,n,r,o){if("function"!=typeof e){var a=e;e=t,t=a}3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(o=!!n,n=cc.macro.REPEAT_FOREVER,r=0),cc.assertID(t,1502);var s=t.uuid||t.id;if(s){var l,c,u=this._hashForTimers[s];if(u?u.paused!==o&&cc.warnID(1511):(u=Yw.get(null,t,0,null,null,o),this._arrayForTimers.push(u),this._hashForTimers[s]=u),null==u.timers)u.timers=[];else for(c=0;c<u.timers.length;++c)if((l=u.timers[c])&&e===l._callback)return cc.logID(1507,l.getInterval(),i),void(l._interval=i);(l=qw.get()).initWithCallback(this,e,t,i,n,r),u.timers.push(l),this._currentTarget===u&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}else cc.errorID(1510)}},{key:"scheduleUpdate",value:function(e,t,i){var n=e.uuid||e.id;if(n){var r=this._hashForUpdates[n];if(r&&r.entry){if(r.entry.priority===t)return r.entry.markedForDeletion=!1,void(r.entry.paused=i);if(this._updateHashLocked)return cc.logID(1506),r.entry.markedForDeletion=!1,void(r.entry.paused=i);this.unscheduleUpdate(e)}var o,a=jw.get(e,t,i,!1);0===t?(o=this._updates0List,this._appendIn(o,a)):(o=t<0?this._updatesNegList:this._updatesPosList,this._priorityIn(o,a,t)),this._hashForUpdates[n]=Ww.get(o,a,e,null)}else cc.errorID(1510)}},{key:"unschedule",value:function(e,t){if(t&&e){var i=t.uuid||t.id;if(i){var n=this._hashForTimers[i];if(n)for(var r=n.timers,o=0,a=r.length;o<a;o++){var s=r[o];if(e===s._callback)return s!==n.currentTimer||n.currentTimerSalvaged||(n.currentTimerSalvaged=!0),r.splice(o,1),qw.put(s),n.timerIndex>=o&&n.timerIndex--,void(0===r.length&&(this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)))}}else cc.errorID(1510)}}},{key:"unscheduleUpdate",value:function(e){if(e){var t=e.uuid||e.id;if(t){var i=this._hashForUpdates[t];i&&(this._updateHashLocked?i.entry.markedForDeletion=!0:this._removeUpdateFromHash(i.entry))}else cc.errorID(1510)}}},{key:"unscheduleAllForTarget",value:function(e){if(e){var t=e.uuid||e.id;if(t){var i=this._hashForTimers[t];if(i){var n=i.timers;n.indexOf(i.currentTimer)>-1&&!i.currentTimerSalvaged&&(i.currentTimerSalvaged=!0);for(var r=0,o=n.length;r<o;r++)qw.put(n[r]);n.length=0,this._currentTarget===i?this._currentTargetSalvaged=!0:this._removeHashElement(i)}this.unscheduleUpdate(e)}else cc.errorID(1510)}}},{key:"unscheduleAll",value:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)}},{key:"unscheduleAllWithMinPriority",value:function(e){var t,i,n,r=this._arrayForTimers;for(t=r.length-1;t>=0;t--)i=r[t],this.unscheduleAllForTarget(i.target);var o=0;if(e<0)for(t=0;t<this._updatesNegList.length;)o=this._updatesNegList.length,(n=this._updatesNegList[t])&&n.priority>=e&&this.unscheduleUpdate(n.target),o===this._updatesNegList.length&&t++;if(e<=0)for(t=0;t<this._updates0List.length;)o=this._updates0List.length,(n=this._updates0List[t])&&this.unscheduleUpdate(n.target),o===this._updates0List.length&&t++;for(t=0;t<this._updatesPosList.length;)o=this._updatesPosList.length,(n=this._updatesPosList[t])&&n.priority>=e&&this.unscheduleUpdate(n.target),o===this._updatesPosList.length&&t++}},{key:"isScheduled",value:function(e,t){cc.assertID(e,1508),cc.assertID(t,1509);var i=t.uuid||t.id;if(i){var n=this._hashForTimers[i];if(!n)return!1;if(null==n.timers)return!1;for(var r=n.timers,o=0;o<r.length;++o){if(e===r[o]._callback)return!0}return!1}cc.errorID(1510)}},{key:"pauseAllTargets",value:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)}},{key:"pauseAllTargetsWithMinPriority",value:function(e){var t,i,n,r,o=[],a=this._arrayForTimers;for(i=0,n=a.length;i<n;i++)(t=a[i])&&(t.paused=!0,o.push(t.target));if(e<0)for(i=0;i<this._updatesNegList.length;i++)(r=this._updatesNegList[i])&&r.priority>=e&&(r.paused=!0,o.push(r.target));if(e<=0)for(i=0;i<this._updates0List.length;i++)(r=this._updates0List[i])&&(r.paused=!0,o.push(r.target));for(i=0;i<this._updatesPosList.length;i++)(r=this._updatesPosList[i])&&r.priority>=e&&(r.paused=!0,o.push(r.target));return o}},{key:"resumeTargets",value:function(e){if(e)for(var t=0;t<e.length;t++)this.resumeTarget(e[t])}},{key:"pauseTarget",value:function(e){cc.assertID(e,1503);var t=e.uuid||e.id;if(t){var i=this._hashForTimers[t];i&&(i.paused=!0);var n=this._hashForUpdates[t];n&&(n.entry.paused=!0)}else cc.errorID(1510)}},{key:"resumeTarget",value:function(e){cc.assertID(e,1504);var t=e.uuid||e.id;if(t){var i=this._hashForTimers[t];i&&(i.paused=!1);var n=this._hashForUpdates[t];n&&(n.entry.paused=!1)}else cc.errorID(1510)}},{key:"isTargetPaused",value:function(e){cc.assertID(e,1505);var t=e.uuid||e.id;if(!t)return cc.errorID(1510),!1;var i=this._hashForTimers[t];if(i)return i.paused;var n=this._hashForUpdates[t];return!!n&&n.entry.paused}},{key:"_removeHashElement",value:function(e){var t=e.target.uuid||e.target.id;delete this._hashForTimers[t];for(var i=this._arrayForTimers,n=0,r=i.length;n<r;n++)if(i[n]===e){i.splice(n,1);break}Yw.put(e)}},{key:"_removeUpdateFromHash",value:function(e){var t=e.target.uuid||e.target.id,i=this._hashForUpdates[t];if(i){for(var n=i.list,r=i.entry,o=0,a=n.length;o<a;o++)if(n[o]===r){n.splice(o,1);break}delete this._hashForUpdates[t],jw.put(r),Ww.put(i)}}},{key:"_priorityIn",value:function(e,t,i){for(var n=0;n<e.length;n++)if(i<e[n].priority)return void e.splice(n,0,t);e.push(t)}},{key:"_appendIn",value:function(e,t){e.push(t)}}]),t}();Qw.PRIORITY_SYSTEM=1<<31,Qw.PRIORITY_NON_SYSTEM=Qw.PRIORITY_SYSTEM+1,Qw.ID="scheduler",cc.Scheduler=Qw;var Zw,Kw=function(){function e(t){Z(this,e),this.jointTexturePool=void 0,this.jointAnimationInfo=void 0,this.jointTexturePool=new JS(t),this.jointAnimationInfo=new $S(t)}return J(e,[{key:"releaseSkeleton",value:function(e){this.jointTexturePool.releaseSkeleton(e)}},{key:"releaseAnimationClip",value:function(e){this.jointTexturePool.releaseAnimationClip(e)}},{key:"clear",value:function(){this.jointTexturePool.clear(),this.jointAnimationInfo.clear()}}]),e}(),Jw=function(){function e(t){Z(this,e),this.batcher=void 0,this.vData=null,this.iData=null,this.vb=null,this.ib=null,this.ia=null,this.byteStart=0,this.byteOffset=0,this.indiceStart=0,this.indiceOffset=0,this.vertexStart=0,this.vertexOffset=0,this.lastByteOffset=1,this.dirty=!1,this._vertexFormatBytes=9*Float32Array.BYTES_PER_ELEMENT,this._initVDataCount=256*this._vertexFormatBytes,this._initIDataCount=1536,this._outofCallback=null,this.batcher=t}return J(e,[{key:"initialize",value:function(e,t){this._outofCallback=t;var i=9*Float32Array.BYTES_PER_ELEMENT;this.vb=this.vb||this.batcher.device.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:0,stride:i});var n=Uint16Array.BYTES_PER_ELEMENT;this.ib=this.ib||this.batcher.device.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:0,stride:n}),this.ia=this.ia||this.batcher.device.createInputAssembler({attributes:e,vertexBuffers:[this.vb],indexBuffer:this.ib}),this._reallocBuffer()}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;this.lastByteOffset=this.byteOffset;var i=this.byteOffset+e*this._vertexFormatBytes,n=this.indiceOffset+t;if(e+this.vertexOffset>65535)return this.batcher.autoMergeBatches(),this._outofCallback&&this._outofCallback.call(this.batcher,e,t),!1;var r=this.vData.byteLength,o=this.iData.length;if(i>r||n>o){for(;r<i||o<n;)this._initVDataCount*=2,this._initIDataCount*=2,r=4*this._initVDataCount,o=this._initIDataCount;this._reallocBuffer()}return this.vertexOffset+=e,this.indiceOffset+=t,this.byteOffset=i,this.dirty=!0,!0}},{key:"reset",value:function(){this.byteStart=0,this.byteOffset=0,this.indiceStart=0,this.indiceOffset=0,this.vertexStart=0,this.vertexOffset=0,this.lastByteOffset=0,this.dirty=!1}},{key:"destroy",value:function(){this.ib.destroy(),this.vb.destroy(),this.ia.destroy(),this.ib=null,this.vb=null,this.ia=null}},{key:"uploadData",value:function(){if(0!==this.byteOffset&&this.dirty){var e=new Float32Array(this.vData.buffer,0,this.byteOffset>>2),t=new Uint16Array(this.iData.buffer,0,this.indiceOffset);this.byteOffset>this.vb.size&&this.vb.resize(this.byteOffset),this.vb.update(e),2*this.indiceOffset>this.ib.size&&this.ib.resize(2*this.indiceOffset),this.ib.update(t)}}},{key:"_reallocBuffer",value:function(){this._reallocVData(!0),this._reallocIData(!0)}},{key:"_reallocVData",value:function(e){var t;if(this.vData&&(t=new Uint8Array(this.vData.buffer)),this.vData=new Float32Array(this._initVDataCount),t&&e)for(var i=new Uint8Array(this.vData.buffer),n=0,r=t.length;n<r;n++)i[n]=t[n]}},{key:"_reallocIData",value:function(e){var t=this.iData;if(this.iData=new Uint16Array(this._initIDataCount),t&&e)for(var i=this.iData,n=0,r=t.length;n<r;n++)i[n]=t[n]}}]),e}();Jw.OPACITY_OFFSET=8,function(e){e[e.DISABLED=0]="DISABLED",e[e.CLEAR=1]="CLEAR",e[e.ENTER_LEVEL=2]="ENTER_LEVEL",e[e.ENABLED=3]="ENABLED",e[e.EXIT_LEVEL=4]="EXIT_LEVEL"}(Zw||(Zw={}));var $w=function(){function e(){Z(this,e),this.stage=Zw.DISABLED,this._maskStack=[],this._stencilPattern={stencilTest:!0,func:exports.GFXComparisonFunc.ALWAYS,stencilMask:65535,writeMask:65535,failOp:exports.GFXStencilOp.KEEP,zFailOp:exports.GFXStencilOp.KEEP,passOp:exports.GFXStencilOp.KEEP,ref:1},this._defaultPipelineState={depthStencilState:{},rasterizerState:{},blendState:{}}}return J(e,[{key:"pushMask",value:function(e){this._maskStack.push(e)}},{key:"clear",value:function(){this.stage=Zw.CLEAR}},{key:"enterLevel",value:function(){this.stage=Zw.ENTER_LEVEL}},{key:"enableMask",value:function(){this.stage=Zw.ENABLED}},{key:"exitMask",value:function(){0!==this._maskStack.length&&(this._maskStack.pop(),0===this._maskStack.length?this.stage=Zw.DISABLED:this.stage=Zw.ENABLED)}},{key:"handleMaterial",value:function(e){var t=this._stencilPattern;if(this.stage===Zw.DISABLED)t.stencilTest=!1,t.func=exports.GFXComparisonFunc.ALWAYS,t.failOp=exports.GFXStencilOp.KEEP,t.stencilMask=t.writeMask=65535,t.ref=1;else if(t.stencilTest=!0,this.stage===Zw.ENABLED)t.func=exports.GFXComparisonFunc.EQUAL,t.failOp=exports.GFXStencilOp.KEEP,t.stencilMask=t.ref=this.getStencilRef(),t.writeMask=this.getWriteMask();else if(this.stage===Zw.CLEAR){var i=this._maskStack[this._maskStack.length-1];t.func=exports.GFXComparisonFunc.NEVER,t.failOp=i.inverted?exports.GFXStencilOp.REPLACE:exports.GFXStencilOp.ZERO,t.writeMask=t.stencilMask=t.ref=this.getWriteMask()}else if(this.stage===Zw.ENTER_LEVEL){var n=this._maskStack[this._maskStack.length-1];t.func=exports.GFXComparisonFunc.NEVER,t.failOp=n.inverted?exports.GFXStencilOp.ZERO:exports.GFXStencilOp.REPLACE,t.writeMask=t.stencilMask=t.ref=this.getWriteMask()}var r=e.passes[0];if(this._changed(r)){var o=this._stencilPattern;return this._defaultPipelineState.depthStencilState={stencilTestFront:o.stencilTest,stencilFuncFront:o.func,stencilReadMaskFront:o.stencilMask,stencilWriteMaskFront:o.writeMask,stencilFailOpFront:o.failOp,stencilZFailOpFront:o.zFailOp,stencilPassOpFront:o.passOp,stencilRefFront:o.ref,stencilTestBack:o.stencilTest,stencilFuncBack:o.func,stencilReadMaskBack:o.stencilMask,stencilWriteMaskBack:o.writeMask,stencilFailOpBack:o.failOp,stencilZFailOpBack:o.zFailOp,stencilPassOpBack:o.passOp,stencilRefBack:o.ref},this._defaultPipelineState.blendState=r.blendState,this._defaultPipelineState.rasterizerState=r.rasterizerState,e.overridePipelineStates(this._defaultPipelineState),!0}return!1}},{key:"getWriteMask",value:function(){return 1<<this._maskStack.length-1}},{key:"getExitWriteMask",value:function(){return 1<<this._maskStack.length}},{key:"getStencilRef",value:function(){for(var e=0,t=0;t<this._maskStack.length;++t)e+=1<<t;return e}},{key:"reset",value:function(){this._maskStack.length=0,this.stage=Zw.DISABLED}},{key:"_changed",value:function(e){var t=e.depthStencilState,i=this._stencilPattern;return i.stencilTest!==t.stencilTestFront||i.func!==t.stencilFuncFront||i.failOp!==t.stencilFailOpFront||i.zFailOp!==t.stencilZFailOpFront||i.passOp!==t.stencilPassOpFront||i.stencilMask!==t.stencilReadMaskFront||i.writeMask!==t.stencilWriteMaskFront||i.ref!==t.stencilRefFront}}]),e}();$w.sharedManager=null,$w.sharedManager=new $w;var ek=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._subModel=void 0,e.type=nh.UI_BATCH,e._subModel=new tk,e}return ee(t,lh),J(t,[{key:"updateTransform",value:function(){}},{key:"updateUBOs",value:function(){return!1}},{key:"directInitialize",value:function(e,t){this._subModel.directInitialize(e,t.material,t.pipelineState),this._subModels[0]=this._subModel}},{key:"destroy",value:function(){this._subModel.destroy()}}]),t}(),tk=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._psos=[],e}return ee(t,Lu),J(t,[{key:"directInitialize",value:function(e,t,i){this._inputAssembler=e,this._psos[0]=i,this.material=t}},{key:"destroy",value:function(){this.commandBuffers.length>0&&this.commandBuffers[0].destroy()}}]),t}(),ik=function(){function e(){Z(this,e),this.camera=null,this.bufferBatch=null,this.model=null,this.material=null,this.texView=null,this.sampler=null,this.firstIdx=0,this.idxCount=0,this.pipelineState=null,this.bindingLayout=null,this.useLocalData=null,this.isStatic=!1}return J(e,[{key:"destroy",value:function(e){this.pipelineState&&(e._getUIMaterial(this.material).revertPipelineState(this.pipelineState),this.pipelineState=null),this.bindingLayout&&(this.bindingLayout=null)}},{key:"clear",value:function(e){this.pipelineState&&(e._getUIMaterial(this.material).revertPipelineState(this.pipelineState),this.pipelineState=null),this.camera=null,this.bufferBatch=null,this.material=null,this.texView=null,this.sampler=null,this.firstIdx=0,this.idxCount=0,this.model=null,this.isStatic=!1}}]),e}(),nk=function(){function e(){Z(this,e),this._material=null,this._pass=null,this._psos=void 0,this._refCount=0,this._psos=null}return J(e,[{key:"material",get:function(){return this._material}},{key:"pass",get:function(){return this._pass}}]),J(e,[{key:"initialize",value:function(e){var t=this;return!!e.material&&(this._material=new Xh,this._material.copy(e.material),this._pass=e.material.passes[0],this._pass.update(),this._psos=new xa((function(){return t._pass.createPipelineState()}),1),!0)}},{key:"increase",value:function(){return this._refCount++,this._refCount}},{key:"decrease",value:function(){return this._refCount--,0===this._refCount&&this.destroy(),this._refCount}},{key:"getPipelineState",value:function(){return this._psos.alloc()}},{key:"revertPipelineState",value:function(e){this._psos.free(e)}},{key:"destroy",value:function(){var e=this;this._psos&&this._psos.clear((function(t){e._pass.destroyPipelineState(t)})),this._material&&(this._material.destroy(),this._material=null),this._refCount=0}}]),e}(),rk=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RG32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA32F}],ok=Object.freeze({__proto__:null,vfmt:rk}),ak=function(){function e(t){var i=this;Z(this,e),this.device=void 0,this._screens=[],this._bufferBatchPool=new Ta((function(){return new Jw(i)}),128),this._drawBatchPool=new xa((function(){return new ik}),128),this._cmdBuff=null,this._scene=void 0,this._attributes=[],this._meshBuffers=[],this._meshBufferUseCount=0,this._uiMaterials=new Map,this._canvasMaterials=new Map,this._batches=void 0,this._uiModelPool=null,this._modelInUse=void 0,this._emptyMaterial=new Xh,this._currMaterial=this._emptyMaterial,this._currTexView=null,this._currSampler=null,this._currCanvas=null,this._currMeshBuffer=null,this._currStaticRoot=null,this._parentOpacity=1,this._root=t,this.device=t.device,this._scene=this._root.createScene({name:"GUIScene"}),this._uiModelPool=new xa((function(){var e=cc.director.root.createModel(ek);return e.enabled=!0,e.visFlags|=Ec.Enum.UI_3D,e}),2),this._modelInUse=new Sa(10),this._batches=new Sa(64),cc.director.on(cc.Director.EVENT_BEFORE_DRAW,this.update,this)}return J(e,[{key:"renderScene",get:function(){return this._scene}},{key:"currBufferBatch",get:function(){return this._currMeshBuffer},set:function(e){e&&(this._currMeshBuffer=e)}},{key:"currStaticRoot",set:function(e){this._currStaticRoot=e}}]),J(e,[{key:"initialize",value:function(){return this._attributes=rk,this._requireBufferBatch(),this._cmdBuff=this.device.createCommandBuffer({allocator:this.device.commandAllocator,type:exports.GFXCommandBufferType.PRIMARY}),!0}},{key:"destroy",value:function(){for(var e,t=fe(this._batches.array);!(e=t()).done;){e.value.destroy(this)}for(var i,n=fe(this._meshBuffers);!(i=n()).done;){i.value.destroy()}this._meshBuffers.splice(0),this._destroyUIMaterials(),this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"getRenderSceneGetter",value:function(){return Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),"renderScene").get.bind(this)}},{key:"_getUIMaterial",value:function(e){if(this._uiMaterials.has(e.hash))return this._uiMaterials.get(e.hash);var t=new nk;return t.initialize({material:e}),this._uiMaterials.set(e.hash,t),t}},{key:"_removeUIMaterial",value:function(e){this._uiMaterials.has(e)&&0===this._uiMaterials.get(e).decrease()&&this._uiMaterials.delete(e)}},{key:"addScreen",value:function(e){for(var t=this._screens,i=0;i<t.length;i++){var n=t[i];if(n.camera){var r=n.camera.view.visibility,o=this._canvasMaterials.get(r);if(o){for(var a=o.keys(),s=a.next();!s.done;)this._removeUIMaterial(s.value),s=a.next();o.clear()}}}this._screens.push(e),this._screens.sort(this._screenSort);for(var l=0;l<t.length;l++){var c=t[l];c.camera&&(c.camera.view.visibility=Ec.BitMask.UI_2D|l+1,this._canvasMaterials.has(c.camera.view.visibility)||this._canvasMaterials.set(c.camera.view.visibility,new Map))}}},{key:"getScreen",value:function(e){for(var t=this._screens,i=0;i<t.length;++i){var n=t[i];if(n.camera&&n.camera.view.visibility===e)return n}return null}},{key:"removeScreen",value:function(e){var t=this,i=this._screens.indexOf(e);if(-1!==i){if(this._screens.splice(i,1),e.camera){for(var n=this._canvasMaterials.get(e.camera.view.visibility),r=n.keys(),o=r.next();!o.done;)this._removeUIMaterial(o.value),o=r.next();n.clear()}for(var a,s=i;s<this._screens.length;s++)(a=this._screens[s].camera)&&function(){var e=t._canvasMaterials.get(a.view.visibility);a.view.visibility=Ec.BitMask.UI_2D|s+1;var i=t._canvasMaterials.get(a.view.visibility);e.forEach((function(e,t){i.set(t,e)})),e.clear()}()}}},{key:"update",value:function(e){if(this._renderScreens(),this._batches.length>0)for(var t=this._meshBuffers,i=0;i<t.length;++i){var n=t[i];n.uploadData(),n.reset()}this.render(),this._reset()}},{key:"sortScreens",value:function(){this._screens.sort(this._screenSort)}},{key:"render",value:function(){for(var e=0,t=0;t<this._modelInUse.length;t++)this._scene.removeModel(this._modelInUse.get(t)),this._uiModelPool.free(this._modelInUse.get(t));if(this._modelInUse.clear(),this._batches.length)for(var i=0;i<this._batches.length;++i){var n=this._batches.array[i];if(n.model){if(n.camera){var r=n.camera.view.visibility;n.model.visFlags=r,n.model.node.layer=r}for(var o=0;o<n.model.subModelNum;o++)n.model.getSubModel(o).priority=e++}else{var a=n.bindingLayout;a.bindTextureView(kc.CUSTOM_SAMPLER_BINDING_START_POINT,n.texView),a.bindSampler(kc.CUSTOM_SAMPLER_BINDING_START_POINT,n.sampler),a.update();var s=n.bufferBatch.ia;s.firstIndex=n.firstIdx,s.indexCount=n.idxCount;var l=this._uiModelPool.alloc();l.directInitialize(s,n),this._scene.addModel(l),l.getSubModel(0).priority=e++,n.camera&&(l.visFlags=n.camera.view.visibility,null==this._canvasMaterials.get(n.camera.view.visibility).get(n.material.hash)&&(this._uiMaterials.get(n.material.hash).increase(),this._canvasMaterials.get(n.camera.view.visibility).set(n.material.hash,1))),this._modelInUse.push(l)}}}},{key:"commitComp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e,o=t,a=n;this._currMaterial.hash===r.material.hash&&this._currTexView===o&&this._currSampler===a||(this.autoMergeBatches(),this._currMaterial=r.material,this._currTexView=o,this._currSampler=a),i&&(i.fillBuffers(r,this),this._applyOpacity(r))}},{key:"commitModel",value:function(e,t,i){if((this._currMaterial!==this._emptyMaterial&&this.autoMergeBatches(),i)&&($w.sharedManager.handleMaterial(i)&&t))for(var n=0;n<t.subModelNum;n++)t.setSubModelMaterial(n,i);var r=this._currCanvas,o=this._drawBatchPool.alloc();o.camera=r&&r.camera,o.model=t,o.bufferBatch=null,o.material=i,o.texView=null,o.sampler=null,o.firstIdx=0,o.idxCount=0,o.pipelineState=null,o.bindingLayout=null,this._currMaterial=this._emptyMaterial,this._currTexView=null,this._currSampler=null,this._batches.push(o)}},{key:"commitStaticBatch",value:function(e){this._batches.concat(e.drawBatchList),this.finishMergeBatches()}},{key:"autoMergeBatches",value:function(){var e=this._currMaterial,t=this._currMeshBuffer,i=t.indiceStart,n=t.indiceOffset-i;if(n&&e){var r=this._currCanvas;$w.sharedManager.handleMaterial(e);var o=this._currStaticRoot?this._currStaticRoot._requireDrawBatch():this._drawBatchPool.alloc();o.camera=r&&r.camera,o.bufferBatch=t,o.material=e,o.texView=this._currTexView,o.sampler=this._currSampler,o.firstIdx=i,o.idxCount=n,o.pipelineState=this._getUIMaterial(e).getPipelineState(),o.bindingLayout=o.pipelineState.pipelineLayout.layouts[0],this._batches.push(o),t.vertexStart=t.vertexOffset,t.indiceStart=t.indiceOffset,t.byteStart=t.byteOffset}}},{key:"forceMergeBatches",value:function(e,t){this._currMaterial=e,this._currTexView=t,this.autoMergeBatches()}},{key:"finishMergeBatches",value:function(){this.autoMergeBatches(),this._currMaterial=this._emptyMaterial,this._currTexView=null}},{key:"_destroyUIMaterials",value:function(){for(var e=this._uiMaterials.values(),t=e.next();!t.done;){t.value.destroy(),t=e.next()}this._uiMaterials.clear()}},{key:"_walk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.children.length,n=this._parentOpacity;if(this._parentOpacity*=e._uiProps.opacity,this._preprocess(e),i>0&&!e._static)for(var r=e.children,o=0;o<r.length;++o){var a=r[o];this._walk(a,t)}this._postprocess(e),this._parentOpacity=n,t+=1}},{key:"_renderScreens",value:function(){for(var e=this._screens,t=0;t<e.length;++t){var i=e[t];i.enabledInHierarchy&&(this._currCanvas=i,this._recursiveScreenNode(i.node))}}},{key:"_preprocess",value:function(e){if(e._uiProps.uiTransformComp){e._uiProps.uiTransformComp._canvas=this._currCanvas;var t=e._uiProps.uiComp;t&&t.enabledInHierarchy&&t.updateAssembler(this)}}},{key:"_postprocess",value:function(e){var t=e._uiProps.uiComp;t&&t.enabledInHierarchy&&t.postUpdateAssembler(this)}},{key:"_recursiveScreenNode",value:function(e){this._walk(e),this.autoMergeBatches()}},{key:"_reset",value:function(){for(var e=0;e<this._batches.length;++e){var t=this._batches.array[e];t.isStatic||(t.clear(this),this._drawBatchPool.free(t))}this._parentOpacity=1,this._batches.clear(),this._currMaterial=this._emptyMaterial,this._currCanvas=null,this._currTexView=null,this._currSampler=null,this._meshBufferUseCount=0,this._requireBufferBatch(),$w.sharedManager.reset()}},{key:"_createMeshBuffer",value:function(){var e=this._bufferBatchPool.add();return e.initialize(this._attributes,this._requireBufferBatch.bind(this)),this._meshBuffers.push(e),e}},{key:"_requireBufferBatch",value:function(){this._meshBufferUseCount>=this._meshBuffers.length?this._currMeshBuffer=this._createMeshBuffer():this._currMeshBuffer=this._meshBuffers[this._meshBufferUseCount],this._meshBufferUseCount++,2===arguments.length&&this._currMeshBuffer.request(arguments[0],arguments[1])}},{key:"_screenSort",value:function(e,t){var i=e.priority-t.priority;return 0===i?e.node.getSiblingIndex()-t.node.getSiblingIndex():i}},{key:"_applyOpacity",value:function(e){for(var t=e.color.a/255,i=this._parentOpacity=this._parentOpacity*t,n=this._currMeshBuffer.byteOffset>>2,r=this._currMeshBuffer.vData,o=this._currMeshBuffer.lastByteOffset>>2;o<n;o+=9)r[o+Jw.OPACITY_OFFSET]=i;this._currMeshBuffer.lastByteOffset=this._currMeshBuffer.byteOffset}}]),e}(),sk=function(){function e(t){Z(this,e),this._createSceneFun=void 0,this._createViewFun=void 0,this._device=void 0,this._windows=[],this._mainWindow=null,this._curWindow=null,this._tempWindow=null,this._pipeline=null,this._ui=null,this._dataPoolMgr=void 0,this._scenes=[],this._views=[],this._modelPools=new Map,this._cameraPool=null,this._lightPools=new Map,this._time=0,this._frameTime=0,this._fpsTime=0,this._frameCount=0,this._fps=0,this._fixedFPS=0,this._fixedFPSFrameTime=0,this._device=t,this._dataPoolMgr=new Kw(t),iC.registerCreateFunc(this),tT.registerCreateFunc(this),this._cameraPool=new xa((function(){return new xv}),4)}return J(e,[{key:"device",get:function(){return this._device}},{key:"mainWindow",get:function(){return this._mainWindow}},{key:"curWindow",set:function(e){this._curWindow=e},get:function(){return this._curWindow}},{key:"tempWindow",set:function(e){this._tempWindow=e},get:function(){return this._tempWindow}},{key:"windows",get:function(){return this._windows}},{key:"pipeline",get:function(){return this._pipeline}},{key:"ui",get:function(){return this._ui}},{key:"scenes",get:function(){return this._scenes}},{key:"views",get:function(){return this._views}},{key:"cumulativeTime",get:function(){return this._time}},{key:"frameTime",get:function(){return this._frameTime}},{key:"frameCount",get:function(){return this._frameCount}},{key:"fps",get:function(){return this._fps}},{key:"fixedFPS",set:function(e){e>0?(this._fixedFPS=e,this._fixedFPSFrameTime=1e3/e):this._fixedFPSFrameTime=0},get:function(){return this._fixedFPS}},{key:"dataPoolManager",get:function(){return this._dataPoolMgr}}]),J(e,[{key:"initialize",value:function(e){var t=this;return!!this._device.mainWindow&&(this._mainWindow=this._device.mainWindow,this._curWindow=this._mainWindow,Nu.initBuiltinRes(this._device),cc.view.on("design-resolution-changed",(function(){var e=cc.game.canvas.width,i=cc.game.canvas.height;t.resize(e,i)}),this),!0)}},{key:"destroy",value:function(){this.destroyViews(),this.destroyScenes(),this._pipeline&&(this._pipeline.destroy(),this._pipeline=null),this._ui&&(this._ui.destroy(),this._ui=null),this._curWindow=null,this._mainWindow=null,this.dataPoolManager.clear()}},{key:"resize",value:function(e,t){this._device.resize(e,t),this._mainWindow.resize(e,t);for(var i,n=fe(this._windows);!(i=n()).done;){var r=i.value;r.isOffscreen||r.resize(e,t)}this._pipeline&&this._pipeline.resize(e,t);for(var o,a=fe(this._views);!(o=a()).done;){var s=o.value;s.camera.isWindowSize&&s.camera.resize(e,t)}}},{key:"setRenderPipeline",value:function(e){return this._pipeline=e,!!this._pipeline.activate(this)&&(this._ui=new ak(this),!!this._ui.initialize()||(this.destroy(),!1))}},{key:"activeWindow",value:function(e){this._curWindow=e}},{key:"resetCumulativeTime",value:function(){this._time=0}},{key:"frameMove",value:function(e){this._frameTime=e,++this._frameCount,this._time+=this._frameTime,this._fpsTime+=this._frameTime,this._fpsTime>1&&(this._fps=this._frameCount,this._frameCount=0,this._fpsTime=0);for(var t=this._views,i=0;i<t.length;i++){var n=t[i];n.isEnable&&n.window&&(n.window.isOffscreen||!n.window.isOffscreen&&n.window===this._curWindow)&&this._pipeline&&this._pipeline.render(n)}}},{key:"createWindow",value:function(e){if(this._device){var t=this._device.createWindow(e);if(t)return this._windows.push(t),t}return null}},{key:"destroyWindow",value:function(e){for(var t=0;t<this._windows.length;++t)if(this._windows[t]===e)return e.destroy(),void this._windows.splice(t,1)}},{key:"destroyWindows",value:function(){for(var e,t=fe(this._windows);!(e=t()).done;){e.value.destroy()}this._windows=[]}},{key:"createScene",value:function(e){var t=this._createSceneFun(this);return t.initialize(e),this._scenes.push(t),t}},{key:"destroyScene",value:function(e){for(var t=0;t<this._scenes.length;++t)if(this._scenes[t]===e)return e.destroy(),void this._scenes.splice(t,1)}},{key:"destroyScenes",value:function(){for(var e,t=fe(this._scenes);!(e=t()).done;){e.value.destroy()}this._scenes=[]}},{key:"createView",value:function(e){var t=this._createViewFun(this,e.camera);return t.initialize(e),this._views.push(t),this.sortViews(),t}},{key:"destroyView",value:function(e){for(var t=0;t<this._views.length;++t)if(this._views[t]===e)return this._views.splice(t,1),void e.destroy()}},{key:"destroyViews",value:function(){for(var e,t=fe(this._views);!(e=t()).done;){e.value.destroy()}this._views=[]}},{key:"createModel",value:function(e){var t=this._modelPools.get(e);return t||(this._modelPools.set(e,new xa((function(){return new e}),10)),t=this._modelPools.get(e)),t.alloc()}},{key:"destroyModel",value:function(e){var t=this._modelPools.get(e.constructor);t?(t.free(e),e.destroy(),e.scene&&e.scene.removeModel(e)):console.warn("'".concat(e.constructor.name,"'is not in the model pool and cannot be destroyed by destroyModel."))}},{key:"createCamera",value:function(){return this._cameraPool.alloc()}},{key:"destroyCamera",value:function(e){this._cameraPool.free(e),e.destroy(),e.scene&&e.scene.removeCamera(e),e.isWindowSize=!0}},{key:"createLight",value:function(e){var t=this._lightPools.get(e);return t||(this._lightPools.set(e,new xa((function(){return new e}),4)),t=this._lightPools.get(e)),t.alloc()}},{key:"destroyLight",value:function(e){var t=this._lightPools.get(e.constructor);if(e.destroy(),t&&(t.free(e),e.scene))switch(e.type){case eT.SPHERE:e.scene.removeSphereLight(e);break;case eT.SPOT:e.scene.removeSpotLight(e)}}},{key:"sortViews",value:function(){this._views.sort((function(e,t){return e.priority-t.priority}))}}]),e}(),lk=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._compScheduler=void 0,e._nodeActivator=void 0,e._invalid=void 0,e._paused=void 0,e._purgeDirectorInNextLoop=void 0,e._root=void 0,e._loadingScene=void 0,e._scene=void 0,e._totalFrames=void 0,e._lastUpdate=void 0,e._deltaTime=void 0,e._scheduler=void 0,e._systems=void 0,e._invalid=!1,e._paused=!1,e._purgeDirectorInNextLoop=!1,e._root=null,e._loadingScene="",e._scene=null,e._totalFrames=0,e._lastUpdate=0,e._deltaTime=0,e._scheduler=new Qw,e._compScheduler=new AA,e._nodeActivator=new zb,e._systems=[],cc.game.once(eS.EVENT_RENDERER_INITED,e._initOnRendererInitialized,ne(e)),e}return ee(t,xl),J(t,[{key:"calculateDeltaTime",value:function(){var e=performance.now();this._deltaTime=(e-this._lastUpdate)/1e3,this._lastUpdate=e}},{key:"convertToGL",value:function(e){var t=cc.game.container,i=cc.view,n=t.getBoundingClientRect(),r=n.left+window.pageXOffset-t.clientLeft,o=n.top+window.pageYOffset-t.clientTop,a=i._devicePixelRatio*(e.x-r),s=i._devicePixelRatio*(o+n.height-e.y);return i._isRotated?Ii(i._viewportRect.width-s,a):Ii(a,s)}},{key:"convertToUI",value:function(e){var t=cc.game.container,i=cc.view,n=t.getBoundingClientRect(),r=n.left+window.pageXOffset-t.clientLeft,o=n.top+window.pageYOffset-t.clientTop,a=Ii(0,0);return i._isRotated?(a.x=r+e.y/i._devicePixelRatio,a.y=o+n.height-(i._viewportRect.width-e.x)/i._devicePixelRatio):(a.x=r+e.x*i._devicePixelRatio,a.y=o+n.height-e.y*i._devicePixelRatio),a}},{key:"end",value:function(){this._purgeDirectorInNextLoop=!0}},{key:"getWinSize",value:function(){return tn(cc.winSize)}},{key:"getWinSizeInPixels",value:function(){return tn(cc.winSize)}},{key:"pause",value:function(){this._paused||(this._paused=!0)}},{key:"purgeCachedData",value:function(){cc.loader.releaseAll()}},{key:"purgeDirector",value:function(){this._scheduler.unscheduleAll(),this._compScheduler.unscheduleAll(),this._nodeActivator.reset(),Nv&&Nv.setEnabled(!1),cc.isValid(this._scene)&&this._scene.destroy(),this._scene=null,this.stopAnimation(),null!=this._root&&this._root.destroy(),this._root=null,cc.loader.releaseAll()}},{key:"reset",value:function(){this.purgeDirector(),this.emit(t.EVENT_RESET),Nv&&Nv.setEnabled(!0),this.startAnimation()}},{key:"runSceneImmediate",value:function(e,t,i){cc.assertID(e instanceof cc.Scene,1216);var n=cc.loader._getReferenceKey(e.uuid);cc.loader.removeItem(n),e._load();for(var r=Object.keys(cc.game._persistRootNodes).map((function(e){return cc.game._persistRootNodes[e]})),o=0;o<r.length;o++){var a=r[o];a.emit(cc.Node.SCENE_CHANGED_FOR_PERSISTS,e.renderScene);var s=e.getChildByUuid(a.uuid);if(s){var l=s.getSiblingIndex();s._destroyImmediate(),e.insertChild(a,l)}else a.parent=e}var c=this._scene;!function(e,t,i){var n=cc.loader._autoReleaseSetting,r=Re();if(t)for(var o=0;o<t.length;o++)r[t[o]]=!0;for(var a=0;a<i.length;a++)X_(i[a],r);if(e)for(var s=0;s<e.length;s++){var l=e[s];!1===n[l]||r[l]||cc.loader.release(l)}for(var c=Object.keys(n),u=0;u<c.length;u++){var h=c[u];!0!==n[h]||r[h]||cc.loader.release(h)}}(c&&c.autoReleaseAssets&&c.dependAssets,e.dependAssets,r),cc.isValid(c)&&c.destroy(),this._scene=null,ul._deferredDestroy(),t&&t(),this.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,e),this._scene=e,e._activate(),this._root&&this._root.resetCumulativeTime(),this.startAnimation(),i&&i(null,e),this.emit(cc.Director.EVENT_AFTER_SCENE_LAUNCH,e)}},{key:"runScene",value:function(e,t,i){var n=this;cc.assertID(e,1205),cc.assertID(e instanceof cc.Scene,1216),e._load(),this.once(cc.Director.EVENT_AFTER_UPDATE,(function(){n.runSceneImmediate(e,t,i)}))}},{key:"_getSceneUuid",value:function(e){var t=cc.game._sceneInfos;if("string"==typeof e){e.endsWith(".scene")||(e+=".scene"),"/"===e[0]||e.startsWith("db://")||(e="/"+e);for(var i=0;i<t.length;i++){var n=t[i];if(n.url.endsWith(e))return n}}else if("number"==typeof e){if(0<=e&&e<t.length)return t[e];cc.errorID(1206,e)}else cc.errorID(1207,e);return null}},{key:"loadScene",value:function(e,t,i){if(this._loadingScene)return cc.errorID(1208,e,this._loadingScene),!1;var n=this._getSceneUuid(e);if(n){var r=n.uuid;return this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,e),this._loadingScene=e,this._loadSceneByUuid(r,t,i),!0}return cc.errorID(1209,e),!1}},{key:"preloadScene",value:function(e,t,i){var n,r;void 0===i?(r=t,n=void 0):(r=i,n=t);var o=this._getSceneUuid(e);if(o)this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,e),cc.loader.load({uuid:o.uuid,type:"uuid"},n,(function(t,i){t&&cc.errorID(1210,e,t.message),r&&r(t,i)}));else{var a='Can not preload the scene "'+e+'" because it is not in the build settings.';r&&r(new Error(a)),cc.error("preloadScene: "+a)}}},{key:"_loadSceneByUuid",value:function(e,t,i,n){var r,o;r=t,o=i,console.time("LoadScene "+e),cc.AssetLibrary.loadAsset(e,(function(t,i){console.timeEnd("LoadScene "+e);var n=gk;if(n._loadingScene="",t)t="Failed to load scene: "+t,cc.error(t);else{if(i instanceof cc.SceneAsset){var a=i.scene;return a._id=i._uuid,a._name=i._name,void n.runSceneImmediate(a,o,r)}t="The asset "+e+" is not a scene",cc.error(t)}r&&r(t)}))}},{key:"resume",value:function(){this._paused&&(this._lastUpdate=performance.now(),this._lastUpdate||cc.logID(1200),this._paused=!1,this._deltaTime=0)}},{key:"setDepthTest",value:function(e){cc.Camera.main&&(cc.Camera.main.depth=!!e)}},{key:"setClearColor",value:function(e){cc.Camera.main&&(cc.Camera.main.backgroundColor=e)}},{key:"getRunningScene",value:function(){return this._scene}},{key:"getScene",value:function(){return this._scene}},{key:"getAnimationInterval",value:function(){return 1e3/cc.game.getFrameRate()}},{key:"setAnimationInterval",value:function(e){cc.game.setFrameRate(Math.round(1e3/e))}},{key:"getDeltaTime",value:function(){return this._deltaTime}},{key:"getCurrentTime",value:function(){return this._lastUpdate}},{key:"getTotalFrames",value:function(){return this._totalFrames}},{key:"isPaused",value:function(){return this._paused}},{key:"getScheduler",value:function(){return this._scheduler}},{key:"setScheduler",value:function(e){this._scheduler!==e&&(this.unregisterSystem(this._scheduler),this._scheduler=e,this.registerSystem(Qw.ID,e,200))}},{key:"registerSystem",value:function(e,t,i){t.id=e,t.priority=i,t.init(),this._systems.push(t),this._systems.sort(Vw.sortByPriority)}},{key:"unregisterSystem",value:function(e){tt.fastRemove(this._systems,e),this._systems.sort(Vw.sortByPriority)}},{key:"getSystem",value:function(e){return this._systems.find((function(t){return t.id===e}))}},{key:"getAnimationManager",value:function(){return this.getSystem(cc.AnimationManager.ID)}},{key:"startAnimation",value:function(){this._invalid=!1,this._lastUpdate=performance.now()}},{key:"stopAnimation",value:function(){this._invalid=!0}},{key:"mainLoop",value:function(e){if(this._purgeDirectorInNextLoop)this._purgeDirectorInNextLoop=!1,this.purgeDirector();else if(!this._invalid){this.calculateDeltaTime();var i=this._deltaTime;if(!this._paused){this.emit(t.EVENT_BEFORE_UPDATE),this._compScheduler.startPhase(),this._compScheduler.updatePhase(i);for(var n=0;n<this._systems.length;++n)this._systems[n].update(i);this._compScheduler.lateUpdatePhase(i),this.emit(t.EVENT_AFTER_UPDATE),ul._deferredDestroy();for(var r=0;r<this._systems.length;++r)this._systems[r].postUpdate(i)}this.emit(t.EVENT_BEFORE_DRAW),this._root.frameMove(this._deltaTime),this._root.device.present(),this.emit(t.EVENT_AFTER_DRAW),Nv.frameUpdateListeners(),rg.bookOfChange.clear(),this._totalFrames++}}},{key:"_initOnRendererInitialized",value:function(){this._totalFrames=0,this._lastUpdate=performance.now(),this._paused=!1,this._purgeDirectorInNextLoop=!1,Nv&&Nv.setEnabled(!0),this.registerSystem(Qw.ID,this._scheduler,200),this.emit(t.EVENT_INIT)}},{key:"_init",value:function(){cc.loader.init(this),this._root=new sk(cc.game._gfxDevice);return!!this._root.initialize({})}},{key:"root",get:function(){return this._root}}]),t}();lk.EVENT_INIT="director_init",lk.EVENT_RESET="director_reset",lk.EVENT_BEFORE_SCENE_LOADING="director_before_scene_loading",lk.EVENT_BEFORE_SCENE_LAUNCH="director_before_scene_launch",lk.EVENT_AFTER_SCENE_LAUNCH="director_after_scene_launch",lk.EVENT_BEFORE_UPDATE="director_before_update",lk.EVENT_AFTER_UPDATE="director_after_update",lk.EVENT_BEFORE_DRAW="director_before_draw",lk.EVENT_AFTER_DRAW="director_after_draw",lk.EVENT_BEFORE_PHYSICS="director_before_physics",lk.EVENT_AFTER_PHYSICS="director_after_physics",lk.instance=void 0,cc.Director=lk;var ck,uk,hk,pk,fk,_k,dk,mk,vk,yk,gk=lk.instance=cc.director=new lk,Ak=(ck=qa("cc.ClickEvent"),uk=Qa(cc.Node),ck((de((pk=function(){function e(){Z(this,e),_e(this,"target",fk,this),_e(this,"component",_k,this),_e(this,"_componentId",dk,this),_e(this,"handler",mk,this),_e(this,"customEventData",vk,this)}return J(e,[{key:"emit",value:function(e){var t=this.target;if(cc.isValid(t)){this._genCompIdIfNeeded();var i=cc.js._getClassById(this._componentId),n=t.getComponent(i);if(cc.isValid(n)){var r=n[this.handler];"function"==typeof r&&(null!=this.customEventData&&""!==this.customEventData&&(e=e.slice()).push(this.customEventData),r.apply(n,e))}}}},{key:"_compName2Id",value:function(e){var t=cc.js.getClassByName(e);return cc.js._getClassId(t)}},{key:"_compId2Name",value:function(e){var t=cc.js._getClassById(e);return cc.js.getClassName(t)}},{key:"_genCompIdIfNeeded",value:function(){this._componentId||(this._componentName=this.component,this.component="")}},{key:"_componentName",get:function(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)},set:function(e){this._componentId=this._compName2Id(e)}}],[{key:"emitEvents",value:function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var o=0,a=t.length;o<a;o++){var s=t[o];s instanceof e&&s.emit(n)}}}]),e}()).prototype,"_componentName",[Qa],Object.getOwnPropertyDescriptor(pk.prototype,"_componentName"),pk.prototype),fk=de(pk.prototype,"target",[uk],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_k=de(pk.prototype,"component",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),dk=de(pk.prototype,"_componentId",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),mk=de(pk.prototype,"handler",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vk=de(pk.prototype,"customEventData",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hk=pk))||hk);cc.Component.EventHandler=Ak;var bk=[exports.SystemEventType.TOUCH_START,exports.SystemEventType.TOUCH_END,exports.SystemEventType.TOUCH_MOVE,exports.SystemEventType.MOUSE_DOWN,exports.SystemEventType.MOUSE_MOVE,exports.SystemEventType.MOUSE_UP,exports.SystemEventType.MOUSE_ENTER,exports.SystemEventType.MOUSE_LEAVE,exports.SystemEventType.MOUSE_WHEEL];function xk(e){e.propagationStopped=!0}var Tk,Sk,Ek,Ck,wk,kk,Ok,Rk,Fk,Ik,Mk,Pk,Dk,Bk,Nk,Lk,zk,Gk,Uk,Xk,Vk,Hk,jk,Wk,Yk,qk,Qk,Zk,Kk,Jk,$k,eO,tO,iO,nO,rO,oO,aO,sO,lO,cO,uO,hO=qa("cc.BlockInputEventsComponent")(yk=as("i18n:cc.BlockInputEventsComponent")(yk=es("Components/BlockInputEvents")(yk=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,sp),J(t,[{key:"onEnable",value:function(){for(var e=0;e<bk.length;e++)this.node.on(bk[e],xk,this)}},{key:"onDisable",value:function(){for(var e=0;e<bk.length;e++)this.node.off(bk[e],xk,this)}}]),t}())||yk)||yk)||yk;cc.BlockInputEventsComponent=hO;var pO,fO,_O,dO,mO,vO,yO,gO,AO,bO,xO,TO,SO,EO,CO,wO,kO,OO,RO,FO=new Mi,IO=At(sv),MO=At(av),PO=At(lv),DO=At(uv),BO=At(cv),NO=At({SKYBOX:bv|exports.GFXClearFlag.DEPTH_STENCIL,SOLID_COLOR:exports.GFXClearFlag.ALL,DEPTH_ONLY:exports.GFXClearFlag.DEPTH_STENCIL,DONT_CLEAR:exports.GFXClearFlag.NONE});exports.CameraComponent=(Tk=qa("cc.CameraComponent"),Sk=as("i18n:cc.CameraComponent"),Ek=es("Components/Camera"),Ck=Qa({tooltip:"i18n:camera.priority",displayOrder:0}),wk=Qa({type:Ec.BitMask,tooltip:"i18n:camera.visibility",displayOrder:1}),kk=Qa({type:NO,tooltip:"i18n:camera.clear_flags",displayOrder:2}),Ok=Qa({tooltip:"i18n:camera.color",displayOrder:3}),Rk=Qa({tooltip:"i18n:camera.depth",displayOrder:4}),Fk=Qa({tooltip:"i18n:camera.stencil",displayOrder:5}),Ik=Qa({type:IO,tooltip:"i18n:camera.projection",displayOrder:6}),Mk=Qa({type:MO,tooltip:"i18n:camera.fov_axis",displayOrder:7}),Pk=Qa({tooltip:"i18n:camera.fov",displayOrder:8}),Dk=Qa({tooltip:"i18n:camera.ortho_height",displayOrder:9}),Bk=Qa({tooltip:"i18n:camera.near",displayOrder:10}),Nk=Qa({tooltip:"i18n:camera.far",displayOrder:11}),Lk=Qa({type:PO,tooltip:"i18n:camera.aperture",displayOrder:12}),zk=Qa({type:DO,tooltip:"i18n:camera.shutter",displayOrder:13}),Gk=Qa({type:BO,tooltip:"i18n:camera.ISO",displayOrder:14}),Uk=Qa({tooltip:"i18n:camera.rect",displayOrder:15}),Xk=Qa({type:xu,tooltip:"i18n:camera.target_texture",displayOrder:16}),Tk(Vk=Sk(Vk=Ek(Vk=Ja((uO=cO=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_projection",jk,ne(i)),_e(i,"_priority",Wk,ne(i)),_e(i,"_fov",Yk,ne(i)),_e(i,"_fovAxis",qk,ne(i)),_e(i,"_orthoHeight",Qk,ne(i)),_e(i,"_near",Zk,ne(i)),_e(i,"_far",Kk,ne(i)),_e(i,"_color",Jk,ne(i)),_e(i,"_depth",$k,ne(i)),_e(i,"_stencil",eO,ne(i)),_e(i,"_clearFlags",tO,ne(i)),_e(i,"_rect",iO,ne(i)),_e(i,"_aperture",nO,ne(i)),_e(i,"_shutter",rO,ne(i)),_e(i,"_iso",oO,ne(i)),_e(i,"_screenScale",aO,ne(i)),_e(i,"_visibility",sO,ne(i)),_e(i,"_targetTexture",lO,ne(i)),i._camera=null,i._inEditorMode=!1,i._flows=void 0,i}return ee(t,sp),J(t,[{key:"onLoad",value:function(){cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH,this.onSceneChanged,this),this._createCamera()}},{key:"onEnable",value:function(){this.node.hasChangedFlags|=sh.POSITION,this._camera&&this._attachToScene()}},{key:"onDisable",value:function(){this._camera&&this._detachFromScene()}},{key:"onDestroy",value:function(){this._camera&&(cc.director.root.destroyCamera(this._camera),this._camera=null),this._targetTexture&&this._targetTexture.off("resize")}},{key:"screenPointToRay",value:function(e,t,i){return i||(i=Cn.create()),this._camera&&this._camera.screenPointToRay(i,e,t),i}},{key:"worldToScreen",value:function(e,t){return t||(t=new Mi),this._camera&&this._camera.worldToScreen(t,e),t}},{key:"screenToWorld",value:function(e,t){return t||(t=this.node.getWorldPosition()),this._camera&&this._camera.screenToWorld(t,e),t}},{key:"convertToUINode",value:function(e,t,i){if(i||(i=new Mi),!this._camera)return i;this.worldToScreen(e,FO);var n=t.getComponent("cc.UITransformComponent"),r=lS.getVisibleSize(),o=FO.x-.5*this._camera.width,a=FO.y-.5*this._camera.height;return FO.x=o/cc.view.getScaleX()+.5*r.width,FO.y=a/cc.view.getScaleY()+.5*r.height,n&&n.convertToNodeSpaceAR(FO,i),i}},{key:"_createCamera",value:function(){if(this._camera=cc.director.root.createCamera(),this._camera.initialize({name:this.node.name,node:this.node,projection:this._projection,window:this._inEditorMode?cc.director.root&&cc.director.root.mainWindow:cc.director.root&&cc.director.root.tempWindow,priority:this._priority,flows:this._flows}),this._camera){this._camera.viewport=this._rect,this._camera.fovAxis=this._fovAxis,this._camera.fov=di(this._fov),this._camera.orthoHeight=this._orthoHeight,this._camera.nearClip=this._near,this._camera.farClip=this._far;var e=this._color.x,t=this._color.y,i=this._color.z,n=this._color.w;this._camera.clearColor={r:e,g:t,b:i,a:n},this._camera.clearDepth=this._depth,this._camera.clearStencil=this._stencil,this._camera.clearFlag=this._clearFlags,this._camera.visibility=this._visibility,this._camera.aperture=this._aperture,this._camera.shutter=this._shutter,this._camera.iso=this._iso}this._updateTargetTexture()}},{key:"_attachToScene",value:function(){this.node.scene&&this._camera&&(this._camera&&this._camera.scene&&this._camera.scene.removeCamera(this._camera),this._getRenderScene().addCamera(this._camera))}},{key:"_detachFromScene",value:function(){this._camera&&this._camera.scene&&this._camera.scene.removeCamera(this._camera)}},{key:"onSceneChanged",value:function(e){this._camera&&null==this._camera.scene&&this._attachToScene()}},{key:"_chechTargetTextureEvent",value:function(e){var t=this;e&&e.off("resize"),this._targetTexture&&this._targetTexture.on("resize",(function(e){t._camera&&t._camera.setFixedSize(e.width,e.height)}),this)}},{key:"_updateTargetTexture",value:function(){if(this._camera&&this._targetTexture){var e=this._targetTexture.getGFXWindow();this._camera.changeTargetWindow(e),this._camera.setFixedSize(e.width,e.height)}}},{key:"camera",get:function(){return this._camera}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e,this._camera&&(this._camera.priority=e)}},{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility=e,this._camera&&(this._camera.visibility=e)}},{key:"clearFlags",get:function(){return this._clearFlags},set:function(e){this._clearFlags=e,this._camera&&(this._camera.clearFlag=e)}},{key:"clearColor",get:function(){return this._color},set:function(e){this._color.set(e),this._camera&&(this._camera.clearColor.r=this._color.x,this._camera.clearColor.g=this._color.y,this._camera.clearColor.b=this._color.z,this._camera.clearColor.a=this._color.w)}},{key:"clearDepth",get:function(){return this._depth},set:function(e){this._depth=e,this._camera&&(this._camera.clearDepth=e)}},{key:"clearStencil",get:function(){return this._stencil},set:function(e){this._stencil=e,this._camera&&(this._camera.clearStencil=e)}},{key:"projection",get:function(){return this._projection},set:function(e){this._projection=e,this._camera&&(this._camera.projectionType=e)}},{key:"fovAxis",get:function(){return this._fovAxis},set:function(e){e!==this._fovAxis&&(this._fovAxis=e,this._camera&&(this._camera.fovAxis=e,e===av.VERTICAL?this.fov=this._fov*this._camera.aspect:this.fov=this._fov/this._camera.aspect))}},{key:"fov",get:function(){return this._fov},set:function(e){this._fov=e,this._camera&&(this._camera.fov=di(e))}},{key:"orthoHeight",get:function(){return this._orthoHeight},set:function(e){this._orthoHeight=e,this._camera&&(this._camera.orthoHeight=e)}},{key:"near",get:function(){return this._near},set:function(e){this._near=e,this._camera&&(this._camera.nearClip=e)}},{key:"far",get:function(){return this._far},set:function(e){this._far=e,this._camera&&(this._camera.farClip=e)}},{key:"aperture",get:function(){return this._aperture},set:function(e){this._aperture=e,this._camera&&(this._camera.aperture=e)}},{key:"shutter",get:function(){return this._shutter},set:function(e){this._shutter=e,this._camera&&(this._camera.shutter=e)}},{key:"iso",get:function(){return this._iso},set:function(e){this._iso=e,this._camera&&(this._camera.iso=e)}},{key:"rect",get:function(){return this._rect},set:function(e){this._rect=e,this._camera&&(this._camera.viewport=e)}},{key:"targetTexture",get:function(){return this._targetTexture},set:function(e){if(this._targetTexture!==e){var t=this._targetTexture;this._targetTexture=e,this._chechTargetTextureEvent(t),this._updateTargetTexture(),!e&&this._camera&&(this._camera.changeTargetWindow(null),this._camera.isWindowSize=!0)}}},{key:"screenScale",get:function(){return this._screenScale},set:function(e){this._screenScale=e,this._camera&&(this._camera.screenScale=e)}},{key:"inEditorMode",get:function(){return this._inEditorMode},set:function(e){this._inEditorMode=e,this._camera&&this._camera.changeTargetWindow(e?cc.director.root&&cc.director.root.mainWindow:cc.director.root&&cc.director.root.tempWindow)}},{key:"flows",set:function(e){this._camera&&(this._camera.flows=e),this._flows=e}}]),t}(),cO.ProjectionType=IO,cO.FOVAxis=MO,cO.ClearFlag=NO,cO.Aperture=PO,cO.Shutter=DO,cO.ISO=BO,jk=de((Hk=uO).prototype,"_projection",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return IO.PERSPECTIVE}}),Wk=de(Hk.prototype,"_priority",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yk=de(Hk.prototype,"_fov",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),qk=de(Hk.prototype,"_fovAxis",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return MO.VERTICAL}}),Qk=de(Hk.prototype,"_orthoHeight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Zk=de(Hk.prototype,"_near",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Kk=de(Hk.prototype,"_far",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),Jk=de(Hk.prototype,"_color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on("#333333")}}),$k=de(Hk.prototype,"_depth",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),eO=de(Hk.prototype,"_stencil",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tO=de(Hk.prototype,"_clearFlags",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return NO.SOLID_COLOR}}),iO=de(Hk.prototype,"_rect",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new nn(0,0,1,1)}}),nO=de(Hk.prototype,"_aperture",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return PO.F16_0}}),rO=de(Hk.prototype,"_shutter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return DO.D125}}),oO=de(Hk.prototype,"_iso",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return BO.ISO100}}),aO=de(Hk.prototype,"_screenScale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),sO=de(Hk.prototype,"_visibility",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Wc}}),lO=de(Hk.prototype,"_targetTexture",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(Hk.prototype,"priority",[Ck],Object.getOwnPropertyDescriptor(Hk.prototype,"priority"),Hk.prototype),de(Hk.prototype,"visibility",[wk],Object.getOwnPropertyDescriptor(Hk.prototype,"visibility"),Hk.prototype),de(Hk.prototype,"clearFlags",[kk],Object.getOwnPropertyDescriptor(Hk.prototype,"clearFlags"),Hk.prototype),de(Hk.prototype,"clearColor",[Ok],Object.getOwnPropertyDescriptor(Hk.prototype,"clearColor"),Hk.prototype),de(Hk.prototype,"clearDepth",[Rk],Object.getOwnPropertyDescriptor(Hk.prototype,"clearDepth"),Hk.prototype),de(Hk.prototype,"clearStencil",[Fk],Object.getOwnPropertyDescriptor(Hk.prototype,"clearStencil"),Hk.prototype),de(Hk.prototype,"projection",[Ik],Object.getOwnPropertyDescriptor(Hk.prototype,"projection"),Hk.prototype),de(Hk.prototype,"fovAxis",[Mk],Object.getOwnPropertyDescriptor(Hk.prototype,"fovAxis"),Hk.prototype),de(Hk.prototype,"fov",[Pk],Object.getOwnPropertyDescriptor(Hk.prototype,"fov"),Hk.prototype),de(Hk.prototype,"orthoHeight",[Dk],Object.getOwnPropertyDescriptor(Hk.prototype,"orthoHeight"),Hk.prototype),de(Hk.prototype,"near",[Bk],Object.getOwnPropertyDescriptor(Hk.prototype,"near"),Hk.prototype),de(Hk.prototype,"far",[Nk],Object.getOwnPropertyDescriptor(Hk.prototype,"far"),Hk.prototype),de(Hk.prototype,"aperture",[Lk],Object.getOwnPropertyDescriptor(Hk.prototype,"aperture"),Hk.prototype),de(Hk.prototype,"shutter",[zk],Object.getOwnPropertyDescriptor(Hk.prototype,"shutter"),Hk.prototype),de(Hk.prototype,"iso",[Gk],Object.getOwnPropertyDescriptor(Hk.prototype,"iso"),Hk.prototype),de(Hk.prototype,"rect",[Uk],Object.getOwnPropertyDescriptor(Hk.prototype,"rect"),Hk.prototype),de(Hk.prototype,"targetTexture",[Xk],Object.getOwnPropertyDescriptor(Hk.prototype,"targetTexture"),Hk.prototype),Vk=Hk))||Vk)||Vk)||Vk)||Vk),exports.CameraComponent||(exports.CameraComponent={});var LO,zO,GO,UO,XO,VO,HO,jO,WO,YO,qO,QO,ZO=new Mi,KO=At({SOLID_COLOR:exports.GFXClearFlag.ALL,DEPTH_ONLY:exports.GFXClearFlag.DEPTH_STENCIL,DONT_CLEAR:exports.GFXClearFlag.NONE}),JO=At({OVERLAY:0,INTERSPERSE:1}),$O=(pO=qa("cc.CanvasComponent"),fO=as("i18n:cc.CanvasComponent"),_O=ts(100),dO=$a(By),mO=es("UI/Canvas"),vO=Qa({type:KO,tooltip:"清理屏幕缓冲标记"}),yO=Qa({tooltip:"清理颜色缓冲区后的颜色"}),gO=Qa({type:JO,tooltip:"Canvas 渲染模式，intersperse 下可以指定 Canvas 与场景中的相机的渲染顺序，overlay 下 Canvas 会在所有场景相机渲染完成后渲染。\n注意：注意：场景里的相机（包括 Canvas 内置的相机）必须有一个的 ClearFlag 选择 SOLID_COLOR，否则在移动端可能会出现闪屏"}),AO=Qa({tooltip:"相机排序优先级。当 RenderMode 为 intersperse 时，指定与其它相机的渲染顺序，当 RenderMode 为 overlay 时，指定跟其余 Canvas 做排序使用。需要对多 Canvas 设定 priority 以免出现不同平台下的闪屏问题。"}),bO=Qa({type:xu,tooltip:"目标渲染纹理"}),xO=Qa({type:KO}),TO=Qa({type:JO}),pO(SO=fO(SO=_O(SO=dO(SO=mO(SO=Ja(SO=is((de((EO=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_priority",CO,ne(e)),_e(e,"_targetTexture",wO,ne(e)),_e(e,"_clearFlag",kO,ne(e)),_e(e,"_color",OO,ne(e)),_e(e,"_renderMode",RO,ne(e)),e._thisOnResized=void 0,e._camera=null,e._pos=new Mi,e._thisOnResized=e.alignWithScreen.bind(ne(e)),e}return ee(t,sp),J(t,[{key:"clearFlag",get:function(){return this._clearFlag},set:function(e){this._clearFlag=e,this._camera&&(this._camera.clearFlag=this._clearFlag)}},{key:"color",get:function(){return this._color},set:function(e){on.copy(this._color,e),this._camera&&(this._camera.clearColor.r=e.r/255,this._camera.clearColor.g=e.g/255,this._camera.clearColor.b=e.b/255,this._camera.clearColor.a=e.a/255)}},{key:"renderMode",get:function(){return this._renderMode},set:function(e){this._renderMode=e,this._camera&&(this._camera.priority=this._getViewPriority())}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e,this._camera&&(this._camera.priority=this._getViewPriority()),gk.root&&gk.root.ui&&gk.root.ui.sortScreens()}},{key:"targetTexture",get:function(){return this._targetTexture},set:function(e){if(this._targetTexture!==e){var t=this._targetTexture;this._targetTexture=e,this._checkTargetTextureEvent(t),this._updateTargetTexture()}}},{key:"visibility",get:function(){return this._camera?this._camera.view.visibility:-1}},{key:"camera",get:function(){return this._camera}}]),J(t,[{key:"__preload",value:function(){var e=new rg("UICamera_"+this.node.name);if(e.setPosition(0,0,1e3),this._camera=gk.root.createCamera(),this._camera.initialize({name:"ui_"+this.node.name,node:e,projection:exports.CameraComponent.ProjectionType.ORTHO,priority:this._getViewPriority(),flows:["UIFlow"]}),this._camera.fov=45,this._camera.clearFlag=this.clearFlag,this._camera.farClip=2e3,this._camera.viewport=new nn(0,0,1,1),this.color=this._color,this._targetTexture){var t=this._targetTexture.getGFXWindow();this._camera.changeTargetWindow(t)}lS.on("design-resolution-changed",this._thisOnResized),this.alignWithScreen(),gk.root.ui.addScreen(this)}},{key:"onEnable",value:function(){this._camera&&gk.root.ui.renderScene.addCamera(this._camera)}},{key:"onDisable",value:function(){this._camera&&gk.root.ui.renderScene.removeCamera(this._camera)}},{key:"onDestroy",value:function(){gk.root.ui.removeScreen(this),this._camera&&gk.root.destroyCamera(this._camera),this._targetTexture&&this._targetTexture.off("resize"),lS.off("design-resolution-changed",this._thisOnResized)}},{key:"alignWithScreen",value:function(){var e,t;this.node.getPosition(this._pos);var i=$x;e=i,t=lS.getDesignResolutionSize();var n=0,r=0;lS.getResolutionPolicy()===cc.view._rpNoBorder&&(n=.5*(t.width-i.width),r=.5*(t.height-i.height)),Mi.set(ZO,.5*i.width+n,.5*i.height+r,0),this._pos.equals(ZO)||this.node.setPosition(ZO),this.node.width!==e.width&&(this.node.width=e.width),this.node.height!==e.height&&(this.node.height=e.height),this.node.getWorldPosition(ZO);var o=this._camera;if(o){if(this._targetTexture)o.setFixedSize(i.width,i.height),o.orthoHeight=i.height/2;else{var a=tS.canvas;o.resize(a.width,a.height),o.orthoHeight=tS.canvas.height/lS.getScaleY()/2}o.node.setPosition(ZO.x,ZO.y,1e3),o.update()}}},{key:"_checkTargetTextureEvent",value:function(e){var t=this;e&&e.off("resize"),this._targetTexture&&this._targetTexture.on("resize",(function(e){t._camera&&t._camera.setFixedSize(e.width,e.height)}),this)}},{key:"_updateTargetTexture",value:function(){if(this._camera){var e=this._camera;if(this._targetTexture){var t=this._targetTexture.getGFXWindow();e.changeTargetWindow(t),e.orthoHeight=$x.height/2,e.isWindowSize=!1}else e.changeTargetWindow(),e.orthoHeight=tS.canvas.height/lS.getScaleY()/2,e.isWindowSize=!0}}},{key:"_getViewPriority",value:function(){return this._renderMode===JO.OVERLAY?this._priority|1<<30:this._priority}}]),t}()).prototype,"clearFlag",[vO],Object.getOwnPropertyDescriptor(EO.prototype,"clearFlag"),EO.prototype),de(EO.prototype,"color",[yO],Object.getOwnPropertyDescriptor(EO.prototype,"color"),EO.prototype),de(EO.prototype,"renderMode",[gO],Object.getOwnPropertyDescriptor(EO.prototype,"renderMode"),EO.prototype),de(EO.prototype,"priority",[AO],Object.getOwnPropertyDescriptor(EO.prototype,"priority"),EO.prototype),de(EO.prototype,"targetTexture",[bO],Object.getOwnPropertyDescriptor(EO.prototype,"targetTexture"),EO.prototype),CO=de(EO.prototype,"_priority",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wO=de(EO.prototype,"_targetTexture",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kO=de(EO.prototype,"_clearFlag",[xO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return KO.DONT_CLEAR}}),OO=de(EO.prototype,"_color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(0,0,0,0)}}),RO=de(EO.prototype,"_renderMode",[TO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return JO.OVERLAY}}),SO=EO))||SO)||SO)||SO)||SO)||SO)||SO)||SO);cc.CanvasComponent=$O,exports.removeProperty(JC.prototype,"UIComponent",[{name:"_visibility"},{name:"setVisibility"}]);var eR,tR,iR,nR,rR,oR,aR,sR,lR,cR,uR,hR,pR,fR,_R,dR,mR,vR,yR,gR,AR,bR,xR,TR,SR,ER,CR,wR,kR,OR,RR,FR,IR,MR,PR,DR,BR,NR,LR,zR,GR,UR,XR,VR,HR,jR,WR,YR,qR,QR,ZR,KR,JR=(LO=qa("cc.SkinningModelComponent"),zO=as("i18n:cc.SkinningModelComponent"),GO=ts(100),UO=es("Components/SkinningModel"),XO=Qa(pv),VO=Qa(rg),HO=Qa({type:pv}),jO=Qa({type:rg,tooltip:"i18n:model.skinning_root"}),LO(WO=zO(WO=GO(WO=Ja(WO=UO((qO=de((YO=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_skeleton",qO,ne(e)),_e(e,"_skinningRoot",QO,ne(e)),e._clip=null,e._modelType=mE,e}return ee(t,exports.ModelComponent),J(t,[{key:"skeleton",get:function(){return this._skeleton},set:function(e){e!==this._skeleton&&(this._skeleton=e,this._update())}},{key:"skinningRoot",get:function(){return this._skinningRoot},set:function(e){e!==this._skinningRoot&&(this._skinningRoot=e,this._updateModelType(),this._update())}},{key:"model",get:function(){return this._model}}]),J(t,[{key:"__preload",value:function(){this._updateModelType()}},{key:"uploadAnimation",value:function(e){this._clip=e,this.model&&this.model.uploadAnimation&&this.model.uploadAnimation(e)}},{key:"setUseBakedAnimation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?mE:_E;if(this._modelType!==t){this._modelType=t;var i=!!this._model;i&&(cc.director.root.destroyModel(this._model),this._model=null,this._models.length=0);var n=this._mesh?this._mesh.subMeshCount:0;if(this._modelType===_E)for(var r=null,o=0;o<n;++o){var a=this.getRenderMaterial(o);a===r?this.getMaterialInstance(o):r=a}else for(var s=0;s<n;++s){var l=this.getRenderMaterial(s);l&&l.parent&&l.parent.passes[0].instancedBuffer&&(this._materialInstances[s].destroy(),this._materialInstances[s]=null)}i&&(this._updateModels(),this._updateCastShadow(),this.enabledInHierarchy&&this._attachToScene())}}},{key:"setMaterial",value:function(e,i){ae(te(t.prototype),"setMaterial",this).call(this,e,i),this._modelType===_E&&this.getMaterialInstance(i)}},{key:"_updateModelParams",value:function(){this._update(),ae(te(t.prototype),"_updateModelParams",this).call(this)}},{key:"_updateModelType",value:function(){if(this._skinningRoot){var e=this._skinningRoot.getComponent("cc.SkeletalAnimationComponent");e&&this.setUseBakedAnimation(e.useBakedAnimation)}}},{key:"_update",value:function(){this.model&&(this.model.bindSkeleton(this._skeleton,this._skinningRoot,this._mesh),this.model.uploadAnimation&&this.model.uploadAnimation(this._clip))}}]),t}()).prototype,"_skeleton",[XO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),QO=de(YO.prototype,"_skinningRoot",[VO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(YO.prototype,"skeleton",[HO],Object.getOwnPropertyDescriptor(YO.prototype,"skeleton"),YO.prototype),de(YO.prototype,"skinningRoot",[jO],Object.getOwnPropertyDescriptor(YO.prototype,"skinningRoot"),YO.prototype),WO=YO))||WO)||WO)||WO)||WO)||WO),$R={name:exports.GFXAttributeName.ATTR_BATCH_ID,format:exports.GFXFormat.R32F,isNormalized:!1},eF={name:exports.GFXAttributeName.ATTR_BATCH_UV,format:exports.GFXFormat.RG32F,isNormalized:!1},tF=yr[$R.format].size+yr[eF.format].size,iF=(eR=qa("cc.SkinningModelUnit"),tR=Qa(lu),iR=Qa(pv),nR=Qa(Xh),rR=Qa({type:JR}),eR((sR=de((aR=function(){function e(){Z(this,e),_e(this,"mesh",sR,this),_e(this,"skeleton",lR,this),_e(this,"material",cR,this),_e(this,"_localTransform",uR,this),_e(this,"_offset",hR,this),_e(this,"_size",pR,this)}return J(e,[{key:"offset",set:function(e){Oi.copy(this._offset,e)},get:function(){return this._offset}},{key:"size",set:function(e){Oi.copy(this._size,e)},get:function(){return this._size}},{key:"copyFrom",set:function(e){e&&(this.mesh=e.mesh,this.skeleton=e.skeleton,this.material=e.getMaterial(0),e.skinningRoot&&LS(e.node,e.skinningRoot,this._localTransform))},get:function(){return null}}]),e}()).prototype,"mesh",[tR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lR=de(aR.prototype,"skeleton",[iR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cR=de(aR.prototype,"material",[nR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uR=de(aR.prototype,"_localTransform",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Qi}}),hR=de(aR.prototype,"_offset",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(0,0)}}),pR=de(aR.prototype,"_size",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(1,1)}}),de(aR.prototype,"offset",[Qa],Object.getOwnPropertyDescriptor(aR.prototype,"offset"),aR.prototype),de(aR.prototype,"size",[Qa],Object.getOwnPropertyDescriptor(aR.prototype,"size"),aR.prototype),de(aR.prototype,"copyFrom",[rR],Object.getOwnPropertyDescriptor(aR.prototype,"copyFrom"),aR.prototype),oR=aR))||oR),nF=new Qi,rF=(new Qi,new Mi),oF=(fR=qa("cc.BatchedSkinningModelComponent"),_R=as("i18n:cc.BatchedSkinningModelComponent"),dR=ts(100),mR=es("Components/BatchedSkinningModel"),vR=Qa({tooltip:"i18n:batched_skinning_model.atlas_size"}),yR=Qa({type:[Mt],tooltip:"i18n:batched_skinning_model.batchable_texture_names"}),gR=Qa({type:[iF],tooltip:"i18n:batched_skinning_model.units"}),AR=Qa({override:!0,visible:!1}),bR=Qa({override:!0,visible:!1}),fR(xR=_R(xR=dR(xR=Ja(xR=mR((SR=de((TR=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"atlasSize",SR,ne(i)),_e(i,"batchableTextureNames",ER,ne(i)),_e(i,"units",CR,ne(i)),i._textures={},i._batchMaterial=null,i}return ee(t,JR),J(t,[{key:"onLoad",value:function(){ae(te(t.prototype),"onLoad",this).call(this),this.cook()}},{key:"onDestroy",value:function(){for(var e in this._textures)this._textures[e].destroy();this._textures={},this._mesh&&(this._mesh.destroy(),this._mesh=null),ae(te(t.prototype),"onDestroy",this).call(this)}},{key:"_onMaterialModified",value:function(e,i){this.cookMaterials(),ae(te(t.prototype),"_onMaterialModified",this).call(this,e,this.getMaterialInstance(e))}},{key:"cook",value:function(){this.cookMaterials(),this.cookSkeletons(),this.cookMeshes()}},{key:"cookMaterials",value:function(){var e=this;this._batchMaterial||(this._batchMaterial=this.getMaterial(0));var t=this.getMaterialInstance(0);if(t&&this._batchMaterial&&this._batchMaterial.effectAsset){t.copy(this._batchMaterial),this.resizeAtlases();for(var i=t.effectAsset.techniques[t.technique],n=function(n){var r=i.passes[n];if(!r.properties)return"continue";var o=function(i){if(r.properties[i].type>=exports.GFXType.SAMPLER1D){var o=null;e.batchableTextureNames.find((function(e){return e===i}))?((o=e._textures[i])||(o=e.createTexture(i)),e.cookTextures(o,i,n)):e.units.some((function(e){return o=e.material&&e.material.getProperty(i,n)})),o&&t.setProperty(i,o,n)}else{for(var a=[],s=0;s<e.units.length;s++){var l=e.units[s];l.material&&a.push(l.material.getProperty(i.slice(0,-3),n))}t.setProperty(i,a,n)}};for(var a in r.properties)o(a)},r=0;r<i.passes.length;r++)n(r)}else console.warn("incomplete batch material!")}},{key:"cookSkeletons",value:function(){if(this._skinningRoot){for(var e=[],t=[],i=0;i<this.units.length;i++){var n=this.units[i];if(n&&n.skeleton){var r=n.skeleton;Qi.invert(nF,n._localTransform);for(var o=function(i){var n=r.joints[i];if(e.findIndex((function(e){return e===n}))>=0)return"continue";e.push(n),t.push(Qi.multiply(new Qi,r.bindposes[i]||Qi.IDENTITY,nF))},a=0;a<r.joints.length;a++)o(a)}}var s=Array.from(Array(e.length).keys()).sort((function(t,i){return e[t]>e[i]?1:e[t]<e[i]?-1:0})),l=new pv;l.joints=e.map((function(e,t,i){return i[s[t]]})),l.bindposes=t.map((function(e,t,i){return i[s[t]]})),this._skeleton&&this._skeleton.destroy(),this.skeleton=l}else console.warn("no skinning root specified!")}},{key:"cookMeshes",value:function(){for(var e=this,t=!1,i=0;i<this.units.length;i++){if(this.units[i].mesh){t=!0;break}}if(t&&this._skinningRoot){this._mesh?this._mesh.destroyRenderingMesh():this._mesh=new lu;for(var n=0,r=exports.GFXFormat.UNKNOWN,o=0,a=exports.GFXFormat.UNKNOWN,s=0,l=exports.GFXFormat.UNKNOWN,c=0,u=exports.GFXFormat.UNKNOWN,h=0,p=exports.GFXFormat.UNKNOWN,f=new Array(this.units.length),_=this.units.length,d=0;d<_;d++){var m=this.units[d];m&&m.skeleton&&(f[d]=m.skeleton.joints.map((function(t){return e._skeleton.joints.findIndex((function(e){return t===e}))})))}for(var v=function(t){var i=e.units[t];if(!i||!i.mesh||!i.mesh.data)return"continue";var _=e._createUnitMesh(t,i.mesh),d=new DataView(_.data.buffer);Qi.inverseTranspose(nF,i._localTransform);for(var m=i.offset,v=i.size,y=function(e){var y=_.struct.vertexBundles[e];n=y.view.offset,r=exports.GFXFormat.UNKNOWN;for(var g=0;g<y.attributes.length;g++){var A=y.attributes[g];if(A.name===exports.GFXAttributeName.ATTR_POSITION){r=A.format;break}n+=yr[A.format].size}if(r){for(var b=il(d,r,n,y.view.length,y.view.stride),x=0;x<b.length;x+=3)Mi.fromArray(rF,b,x),Mi.transformMat4(rF,rF,i._localTransform),Mi.toArray(b,rF,x);tl(d,b,r,n,y.view.stride)}o=y.view.offset,a=exports.GFXFormat.UNKNOWN;for(var T=0;T<y.attributes.length;T++){var S=y.attributes[T];if(S.name===exports.GFXAttributeName.ATTR_NORMAL){a=S.format;break}o+=yr[S.format].size}if(a){for(var E=il(d,a,o,y.view.length,y.view.stride),C=0;C<E.length;C+=3)Mi.fromArray(rF,E,C),Mi.transformMat4Normal(rF,rF,nF),Mi.toArray(E,rF,C);tl(d,E,a,o,y.view.stride)}s=y.view.offset,l=exports.GFXFormat.UNKNOWN;for(var w=0;w<y.attributes.length;w++){var k=y.attributes[w];if(k.name===exports.GFXAttributeName.ATTR_TANGENT){l=k.format;break}s+=yr[k.format].size}if(l){for(var O=il(d,l,s,y.view.length,y.view.stride),R=0;R<O.length;R+=3)Mi.fromArray(rF,O,R),Mi.transformMat4Normal(rF,rF,nF),Mi.toArray(O,rF,R);tl(d,O,l,s,y.view.stride)}c=y.view.offset,u=exports.GFXFormat.UNKNOWN;for(var F=0;F<y.attributes.length;F++){var I=y.attributes[F];if(I.name===exports.GFXAttributeName.ATTR_BATCH_UV){u=I.format;break}c+=yr[I.format].size}u&&nl(d,(function(e,t){var i,n=0===t?"x":"y";return(e=(i=e)-Math.floor(i))*v[n]+m[n]}),u,c,y.view.length,y.view.stride,d);var M=f[t];if(!M)return"continue";h=y.view.offset,p=exports.GFXFormat.UNKNOWN;for(var P=0;P<y.attributes.length;P++){var D=y.attributes[P];if(D.name===exports.GFXAttributeName.ATTR_JOINTS){p=D.format;break}h+=yr[D.format].size}p&&nl(d,(function(e){return M[e]}),p,h,y.view.length,y.view.stride,d)},g=0;g<_.struct.vertexBundles.length;g++)y(g);e._mesh.merge(_)},y=0;y<_;y++)v(y);this._onMeshChanged(this._mesh),this._updateModels()}}},{key:"cookTextures",value:function(e,t,i){for(var n=[],r=[],o=[],a=[],s=0;s<this.units.length;s++){var l=this.units[s];if(l.material){var c=l.material.getProperty(t,i);if(c&&c.image&&c.image.data){var u=new vr;u.texOffset.x=l.offset.x*this.atlasSize,u.texOffset.y=l.offset.y*this.atlasSize,u.texExtent.width=l.size.x*this.atlasSize,u.texExtent.height=l.size.y*this.atlasSize;var h=c.image.data;h instanceof HTMLCanvasElement||h instanceof HTMLImageElement?(n.push(h),r.push(u)):(o.push(h),a.push(u))}}}var p=e.getGFXTexture(),f=cc.director.root.device;o.length>0&&f.copyBuffersToTexture(o,p,a),n.length>0&&f.copyTexImagesToTexture(n,p,r)}},{key:"createTexture",value:function(e){var t=new Tc;return t.setFilters(Ml.LINEAR,Ml.LINEAR),t.setMipFilter(Ml.LINEAR),t.reset({width:this.atlasSize,height:this.atlasSize,format:Fl.RGBA8888}),t.loaded=!0,this._textures[e]=t,t}},{key:"resizeAtlases",value:function(){for(var e in this._textures){this._textures[e].reset({width:this.atlasSize,height:this.atlasSize,format:Fl.RGBA8888})}}},{key:"_createUnitMesh",value:function(e,t){for(var i=JSON.parse(JSON.stringify(t.struct)),n={},r=0;r<t.struct.primitives.length;r++){for(var o=t.struct.primitives[r],a=0,s=exports.GFXFormat.UNKNOWN,l=0;l<o.vertexBundelIndices.length;l++){var c=t.struct.vertexBundles[o.vertexBundelIndices[l]];a=c.view.offset,s=exports.GFXFormat.UNKNOWN;for(var u=0;u<c.attributes.length;u++){var h=c.attributes[u];if(h.name===exports.GFXAttributeName.ATTR_TEX_COORD){s=h.format;break}a+=yr[h.format].size}if(s)break}if(void 0===n[l]){n[l]=[s,a];var p=i.vertexBundles[l];p.attributes.push($R),p.attributes.push(eF),p.view.offset=0,p.view.length+=p.view.count*tF,p.view.stride+=tF}}for(var f=0,_=0;_<i.vertexBundles.length;_++)f+=i.vertexBundles[_].view.length;for(var d=0;d<i.primitives.length;d++){var m=i.primitives[d];m.indexView&&(m.indexView.offset=f,f+=m.indexView.length)}var v=new Uint8Array(f),y=t.data,g=new DataView(v.buffer),A=new DataView(y.buffer),b=ws.isLittleEndian;for(var x in n)for(var T=i.vertexBundles[x],S=t.struct.vertexBundles[x],E=ce(n[x],2),C=il(A,E[0],E[1],S.view.length,S.view.stride),w=S.view,k=T.view,O=w.stride,R=k.stride,F=w.offset,I=k.offset,M=0;M<k.count;M++){var P=y.subarray(F,F+O);v.set(P,I),g.setFloat32(I+O,e),g.setFloat32(I+O+4,C[2*M],b),g.setFloat32(I+O+8,C[2*M+1],b),I+=R,F+=O}for(var D=0;D<i.primitives.length;D++){var B=t.struct.primitives[D],N=i.primitives[D];if(B.indexView&&N.indexView)for(var L=B.indexView.stride,z=N.indexView.stride,G=B.indexView.offset,U=N.indexView.offset,X=0;X<N.indexView.count;X++){var V=y.subarray(G,G+L);v.set(V,U),U+=z,G+=L}}var H=new lu;return H.reset({struct:i,data:v}),H}},{key:"mesh",get:function(){return ae(te(t.prototype),"mesh",this)},set:function(e){le(te(t.prototype),"mesh",e,this,!0)}},{key:"skeleton",get:function(){return ae(te(t.prototype),"skeleton",this)},set:function(e){le(te(t.prototype),"skeleton",e,this,!0)}}]),t}()).prototype,"atlasSize",[vR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1024}}),ER=de(TR.prototype,"batchableTextureNames",[yR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),CR=de(TR.prototype,"units",[gR],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de(TR.prototype,"mesh",[AR],Object.getOwnPropertyDescriptor(TR.prototype,"mesh"),TR.prototype),de(TR.prototype,"skeleton",[bR],Object.getOwnPropertyDescriptor(TR.prototype,"skeleton"),TR.prototype),xR=TR))||xR)||xR)||xR)||xR)||xR),aF=At({LUMINOUS_POWER:0,LUMINANCE:1}),sF=qa("cc.StaticLightSettings")((OR=de((kR=function(){function e(){Z(this,e),_e(this,"_editorOnly",OR,this),_e(this,"_bakeable",RR,this),_e(this,"_castShadow",FR,this)}return J(e,[{key:"editorOnly",get:function(){return this._editorOnly},set:function(e){this._editorOnly=e}},{key:"bakeable",get:function(){return this._bakeable},set:function(e){this._bakeable=e}},{key:"castShadow",get:function(){return this._castShadow},set:function(e){this._castShadow=e}}]),e}()).prototype,"_editorOnly",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RR=de(kR.prototype,"_bakeable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),FR=de(kR.prototype,"_castShadow",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(kR.prototype,"editorOnly",[Qa],Object.getOwnPropertyDescriptor(kR.prototype,"editorOnly"),kR.prototype),de(kR.prototype,"bakeable",[Qa],Object.getOwnPropertyDescriptor(kR.prototype,"bakeable"),kR.prototype),de(kR.prototype,"castShadow",[Qa],Object.getOwnPropertyDescriptor(kR.prototype,"castShadow"),kR.prototype),wR=kR))||wR;exports.LightComponent||(exports.LightComponent={}),exports.LightComponent=(IR=qa("cc.LightComponent"),MR=Qa({tooltip:"i18n:lights.color"}),PR=Qa({tooltip:"i18n:lights.use_color_temperature"}),DR=Qa({slide:!0,range:[1e3,15e3,1],tooltip:"i18n:lights.color_temperature"}),BR=Qa({type:sF}),IR((HR=VR=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_color",zR,ne(e)),_e(e,"_useColorTemperature",GR,ne(e)),_e(e,"_colorTemperature",UR,ne(e)),_e(e,"_staticSettings",XR,ne(e)),e._type=eT.UNKNOWN,e._lightType=void 0,e._light=null,e._lightType=rT,e}return ee(t,sp),J(t,[{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._light&&(this._light.color.x=e.r/255,this._light.color.y=e.g/255,this._light.color.z=e.b/255)}},{key:"useColorTemperature",get:function(){return this._useColorTemperature},set:function(e){this._useColorTemperature=e,this._light&&(this._light.useColorTemperature=e)}},{key:"colorTemperature",get:function(){return this._colorTemperature},set:function(e){this._colorTemperature=e,this._light&&(this._light.colorTemperature=e)}},{key:"staticSettings",get:function(){return this._staticSettings},set:function(e){this._staticSettings=e}},{key:"type",get:function(){return this._type}}]),J(t,[{key:"onLoad",value:function(){this._createLight()}},{key:"onEnable",value:function(){this._attachToScene()}},{key:"onDisable",value:function(){this._detachFromScene()}},{key:"onDestroy",value:function(){this._destroyLight()}},{key:"_createLight",value:function(){this._light||(this._light=cc.director.root.createLight(this._lightType)),this.color=this._color,this.useColorTemperature=this._useColorTemperature,this.colorTemperature=this._colorTemperature,this._light.node=this.node}},{key:"_destroyLight",value:function(){this._light&&(cc.director.root.destroyLight(this),this._light=null)}},{key:"_attachToScene",value:function(){if(this._detachFromScene(),this._light&&!this._light.scene&&this.node.scene)switch(this._type){case eT.DIRECTIONAL:this._getRenderScene().addDirectionalLight(this._light),this._getRenderScene().setMainLight(this._light);break;case eT.SPHERE:this._getRenderScene().addSphereLight(this._light);break;case eT.SPOT:this._getRenderScene().addSpotLight(this._light)}}},{key:"_detachFromScene",value:function(){if(this._light&&this._light.scene)switch(this._type){case eT.DIRECTIONAL:var e=this._light.scene;e.removeDirectionalLight(this._light),e.unsetMainLight(this._light);break;case eT.SPHERE:this._light.scene.removeSphereLight(this._light);break;case eT.SPOT:this._light.scene.removeSpotLight(this._light)}}}]),t}(),VR.Type=eT,VR.PhotometricTerm=aF,zR=de((LR=HR).prototype,"_color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),GR=de(LR.prototype,"_useColorTemperature",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),UR=de(LR.prototype,"_colorTemperature",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6550}}),XR=de(LR.prototype,"_staticSettings",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new sF}}),de(LR.prototype,"color",[MR],Object.getOwnPropertyDescriptor(LR.prototype,"color"),LR.prototype),de(LR.prototype,"useColorTemperature",[PR],Object.getOwnPropertyDescriptor(LR.prototype,"useColorTemperature"),LR.prototype),de(LR.prototype,"colorTemperature",[DR],Object.getOwnPropertyDescriptor(LR.prototype,"colorTemperature"),LR.prototype),de(LR.prototype,"staticSettings",[BR],Object.getOwnPropertyDescriptor(LR.prototype,"staticSettings"),LR.prototype),NR=LR))||NR);var lF,cF,uF,hF,pF,fF,_F,dF,mF,vF,yF,gF,AF,bF,xF,TF,SF,EF,CF,wF,kF,OF,RF,FF,IF,MF,PF,DF,BF,NF,LF,zF,GF,UF,XF,VF,HF,jF,WF,YF,qF,QF,ZF,KF,JF,$F,eI=(jR=qa("cc.DirectionalLightComponent"),WR=as("i18n:cc.DirectionalLightComponent"),YR=es("Light/DirectionalLight"),qR=Qa({unit:"lx",tooltip:"i18n:lights.illuminance"}),jR(QR=WR(QR=YR(QR=Ja((KR=de((ZR=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_illuminance",KR,ne(e)),e._type=eT.DIRECTIONAL,e._light=null,e._lightType=BC,e}return ee(t,exports.LightComponent),J(t,[{key:"illuminance",get:function(){return this._illuminance},set:function(e){this._illuminance=e,this._light&&(this._light.illuminance=this._illuminance)}}]),J(t,[{key:"_createLight",value:function(){ae(te(t.prototype),"_createLight",this).call(this),this._light&&(this.illuminance=this._illuminance)}}]),t}()).prototype,"_illuminance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 65e3}}),de(ZR.prototype,"illuminance",[qR],Object.getOwnPropertyDescriptor(ZR.prototype,"illuminance"),ZR.prototype),QR=ZR))||QR)||QR)||QR)||QR),tI=(lF=qa("cc.SphereLightComponent"),cF=as("i18n:cc.SphereLightComponent"),uF=es("Light/SphereLight"),hF=Qa({unit:"lm",tooltip:"i18n:lights.luminous_power"}),pF=Qa({unit:"cd/m²",tooltip:"i18n:lights.luminance"}),fF=Qa({type:aF,tooltip:"i18n:lights.term"}),_F=Qa({tooltip:"i18n:lights.size"}),dF=Qa({tooltip:"i18n:lights.range"}),lF(mF=cF(mF=uF(mF=Ja((yF=de((vF=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_size",yF,ne(e)),_e(e,"_luminance",gF,ne(e)),_e(e,"_term",AF,ne(e)),_e(e,"_range",bF,ne(e)),e._type=eT.SPHERE,e._light=null,e._lightType=NC,e}return ee(t,exports.LightComponent),J(t,[{key:"luminousPower",get:function(){return this._luminance*nT(this._size)},set:function(e){this._luminance=e/nT(this._size),this._light&&(this._light.luminance=this._luminance)}},{key:"luminance",get:function(){return this._luminance},set:function(e){this._luminance=e,this._light&&(this._light.luminance=e)}},{key:"term",get:function(){return this._term},set:function(e){this._term=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this._light&&(this._light.size=e)}},{key:"range",get:function(){return this._range},set:function(e){this._range=e,this._light&&(this._light.range=e)}}]),J(t,[{key:"_createLight",value:function(){ae(te(t.prototype),"_createLight",this).call(this),this._light&&(this.luminance=this._luminance,this.size=this._size,this.range=this._range)}}]),t}()).prototype,"_size",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),gF=de(vF.prototype,"_luminance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1700/nT(.15)}}),AF=de(vF.prototype,"_term",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aF.LUMINOUS_POWER}}),bF=de(vF.prototype,"_range",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),de(vF.prototype,"luminousPower",[hF],Object.getOwnPropertyDescriptor(vF.prototype,"luminousPower"),vF.prototype),de(vF.prototype,"luminance",[pF],Object.getOwnPropertyDescriptor(vF.prototype,"luminance"),vF.prototype),de(vF.prototype,"term",[fF],Object.getOwnPropertyDescriptor(vF.prototype,"term"),vF.prototype),de(vF.prototype,"size",[_F],Object.getOwnPropertyDescriptor(vF.prototype,"size"),vF.prototype),de(vF.prototype,"range",[dF],Object.getOwnPropertyDescriptor(vF.prototype,"range"),vF.prototype),mF=vF))||mF)||mF)||mF)||mF),iI=(xF=qa("cc.SpotLightComponent"),TF=as("i18n:cc.SpotLightComponent"),SF=es("Light/SpotLight"),EF=Qa({unit:"lm",tooltip:"i18n:lights.luminous_power"}),CF=Qa({unit:"cd/m²",tooltip:"i18n:lights.luminance"}),wF=Qa({type:aF,tooltip:"i18n:lights.term"}),kF=Qa({tooltip:"i18n:lights.size"}),OF=Qa({tooltip:"i18n:lights.range"}),RF=Qa({slide:!0,range:[2,180,1],tooltip:"The spot light cone angle"}),xF(FF=TF(FF=SF(FF=Ja((MF=de((IF=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_size",MF,ne(e)),_e(e,"_luminance",PF,ne(e)),_e(e,"_term",DF,ne(e)),_e(e,"_range",BF,ne(e)),_e(e,"_spotAngle",NF,ne(e)),e._type=eT.SPOT,e._light=null,e._lightType=HC,e}return ee(t,exports.LightComponent),J(t,[{key:"luminousPower",get:function(){return this._luminance*nT(this._size)},set:function(e){this._luminance=e/nT(this._size),this._light&&(this._light.luminance=this._luminance)}},{key:"luminance",get:function(){return this._luminance},set:function(e){this._luminance=e,this._light&&(this._light.luminance=e)}},{key:"term",get:function(){return this._term},set:function(e){this._term=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this._light&&(this._light.size=e)}},{key:"range",get:function(){return this._range},set:function(e){this._range=e,this._light&&(this._light.range=e)}},{key:"spotAngle",get:function(){return this._spotAngle},set:function(e){this._spotAngle=e,this._light&&(this._light.spotAngle=di(e))}}]),J(t,[{key:"_createLight",value:function(){ae(te(t.prototype),"_createLight",this).call(this),this._light&&(this.luminance=this._luminance,this.size=this._size,this.range=this._range,this.spotAngle=this._spotAngle)}}]),t}()).prototype,"_size",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),PF=de(IF.prototype,"_luminance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1700/nT(.15)}}),DF=de(IF.prototype,"_term",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aF.LUMINOUS_POWER}}),BF=de(IF.prototype,"_range",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),NF=de(IF.prototype,"_spotAngle",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),de(IF.prototype,"luminousPower",[EF],Object.getOwnPropertyDescriptor(IF.prototype,"luminousPower"),IF.prototype),de(IF.prototype,"luminance",[CF],Object.getOwnPropertyDescriptor(IF.prototype,"luminance"),IF.prototype),de(IF.prototype,"term",[wF],Object.getOwnPropertyDescriptor(IF.prototype,"term"),IF.prototype),de(IF.prototype,"size",[kF],Object.getOwnPropertyDescriptor(IF.prototype,"size"),IF.prototype),de(IF.prototype,"range",[OF],Object.getOwnPropertyDescriptor(IF.prototype,"range"),IF.prototype),de(IF.prototype,"spotAngle",[RF],Object.getOwnPropertyDescriptor(IF.prototype,"spotAngle"),IF.prototype),FF=IF))||FF)||FF)||FF)||FF);exports.removeProperty(exports.ModelComponent.prototype,"ModelComponent.prototype",[{name:"enableDynamicBatching"},{name:"recieveShadows"}]),exports.replaceProperty(exports.CameraComponent,"CameraComponent",[{name:"CameraClearFlag",newName:"ClearFlag"}]),cc.CameraComponent=exports.CameraComponent,cc.RenderableComponent=Yp,cc.ModelComponent=exports.ModelComponent,cc.SkinningModelComponent=JR,cc.BatchedSkinningModelComponent=oF,cc.SkinningModelUnit=iF,cc.LightComponent=exports.LightComponent,cc.DirectionalLightComponent=eI,cc.SphereLightComponent=tI,cc.SpotLightComponent=iI,cc.utils=EE;var nI,rI,oI,aI,sI,lI,cI,uI,hI,pI=(LF=qa("cc.UICoordinateTrackerComponent"),zF=as("i18n:cc.UICoordinateTrackerComponent"),GF=es("Components/UICoordinateTracker"),UF=ts(110),XF=Qa({type:rg,tooltip:"目标对象"}),VF=Qa({type:exports.CameraComponent,tooltip:"照射相机"}),HF=Qa({tooltip:"是否是缩放映射"}),jF=Qa({tooltip:"距相机多少距离为正常显示计算大小"}),WF=Qa({type:[Ak],tooltip:"映射数据事件。回调的第一个参数是映射后的本地坐标，第二个是距相机距离比"}),LF(YF=zF(YF=GF(YF=UF((de((qF=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"syncEvents",QF,ne(i)),_e(i,"_target",ZF,ne(i)),_e(i,"_camera",KF,ne(i)),_e(i,"_useScale",JF,ne(i)),_e(i,"_distance",$F,ne(i)),i._transformPos=new Mi,i._viewPos=new Mi,i._canMove=!0,i._lastWpos=new Mi,i._lastCameraPos=new Mi,i}return ee(t,sp),J(t,[{key:"onEnable",value:function(){this._checkCanMove()}},{key:"update",value:function(){var e=this.node.worldPosition,t=this._camera;if(this._canMove&&t._camera&&(!this._lastWpos.equals(e)||!this._lastCameraPos.equals(t.node.worldPosition))&&(this._lastWpos.set(e),this._lastCameraPos.set(t.node.worldPosition),t._camera.update(),df.WorldNode3DToLocalNodeUI(t,e,this._target,this._transformPos),this._useScale&&Mi.transformMat4(this._viewPos,this.node.worldPosition,t._camera.matView),this.syncEvents.length>0)){var i=this._distance/Math.abs(this._viewPos.z);Ak.emitEvents(this.syncEvents,this._transformPos,i)}}},{key:"_checkCanMove",value:function(){this._canMove=!(!this._camera||!this._target)}},{key:"target",get:function(){return this._target},set:function(e){this._target!==e&&(this._target=e,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(e){this._camera!==e&&(this._camera=e,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(e){this._useScale!==e&&(this._useScale=e)}},{key:"distance",get:function(){return this._distance},set:function(e){this._distance!==e&&(this._distance=e)}}]),t}()).prototype,"target",[XF],Object.getOwnPropertyDescriptor(qF.prototype,"target"),qF.prototype),de(qF.prototype,"camera",[VF],Object.getOwnPropertyDescriptor(qF.prototype,"camera"),qF.prototype),de(qF.prototype,"useScale",[HF],Object.getOwnPropertyDescriptor(qF.prototype,"useScale"),qF.prototype),de(qF.prototype,"distance",[jF],Object.getOwnPropertyDescriptor(qF.prototype,"distance"),qF.prototype),QF=de(qF.prototype,"syncEvents",[WF],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ZF=de(qF.prototype,"_target",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),KF=de(qF.prototype,"_camera",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),JF=de(qF.prototype,"_useScale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$F=de(qF.prototype,"_distance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),YF=qF))||YF)||YF)||YF)||YF),fI=qa("cc.animation.UniformProxyFactory")((oI=de((rI=function(){function e(t,i){Z(this,e),_e(this,"passIndex",oI,this),_e(this,"uniformName",aI,this),_e(this,"channelIndex",sI,this),this.passIndex=i||0,this.uniformName=t||""}return J(e,[{key:"forTarget",value:function(e){var t=e.passes[this.passIndex],i=t.getHandle(this.uniformName);if(void 0===i)throw new Error('Material "'.concat(e.name,'" has no uniform "').concat(this.uniformName,'"'));var n=wh.getBindingTypeFromHandle(i);if(n===exports.GFXBindingType.UNIFORM_BUFFER){var r=void 0===this.channelIndex?i:t.getHandle(this.uniformName,this.channelIndex,exports.GFXType.FLOAT);if(void 0===r)throw new Error('Uniform "'.concat(this.uniformName," (in material ").concat(e.name,") has no channel ").concat(this.channelIndex,'"'));return function(e,t){for(var i,n=fe(e.shaderInfo.blocks);!(i=n()).done;)for(var r,o=fe(i.value.members);!(r=o()).done;){var a=r.value;if(a.name===t)return a.count>1}return!1}(t,this.uniformName)?{set:function(e){t.setUniformArray(r,e)}}:{set:function(e){t.setUniform(r,e)}}}if(n===exports.GFXBindingType.SAMPLER){var o=wh.getBindingFromHandle(i),a=t.properties[this.uniformName],s=a&&a.value?a.value+"-texture":qu(a.type),l=Nu.get(s);return l||(u("Illegal texture default value: ".concat(s,".")),l=Nu.get("default-texture")),{set:function(e){e||(e=l);var i=e.getGFXTextureView();i&&i.texture.width&&i.texture.height&&(t.bindTextureView(o,i),e instanceof pc&&t.bindSampler(o,uc.getSampler(cc.game._gfxDevice,e.getSamplerHash())))}}}throw new Error("Animations are not available for uniforms with binding type ".concat(n,"."))}}]),e}()).prototype,"passIndex",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),aI=de(rI.prototype,"uniformName",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),sI=de(rI.prototype,"channelIndex",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),nI=rI))||nI;var _I,dI,mI,vI,yI,gI=qa("cc.animation.MorphWeightsValueProxy")((uI=de((cI=function(){function e(){Z(this,e),_e(this,"subMeshIndex",uI,this)}return J(e,[{key:"forTarget",value:function(e){var t=this;return{set:function(i){e.setWeights(i,t.subMeshIndex)}}}}]),e}()).prototype,"subMeshIndex",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lI=cI))||lI,AI=qa("cc.animation.MorphWeightsAllValueProxy")(hI=function(){function e(){Z(this,e)}return J(e,[{key:"forTarget",value:function(e){return{set:function(t){for(var i,n,r=null!==(i=null===(n=e.mesh)||void 0===n?void 0:n.struct.primitives.length)&&void 0!==i?i:0,o=0;o<r;++o)e.setWeights(t,o)}}}}]),e}())||hI;function bI(e,t,i,n){var r,o,a,s,l,c=new t,u=new t,h=new t,p=qa(e)((a=de((o=function(){function e(i,n,r){Z(this,e),_e(this,"dataPoint",a,this),_e(this,"inTangent",s,this),_e(this,"outTangent",l,this),this.dataPoint=i||new t,this.inTangent=n||new t,this.outTangent=r||new t}return J(e,[{key:"lerp",value:function(e,t,r){var o=this.dataPoint,a=e.dataPoint;u=i(u,this.inTangent,r),h=i(h,e.outTangent,r);var s=t*t*t,l=t*t,p=s-2*l+t,f=-2*s+3*l,_=s-l;return c=i(c,o,2*s-3*l+1),c=n(c,c,u,p),c=n(c,c,a,f),c=n(c,c,h,_)}},{key:"getNoLerp",value:function(){return this.dataPoint}}]),e}()).prototype,"dataPoint",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),s=de(o.prototype,"inTangent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),l=de(o.prototype,"outTangent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),r=o))||r;if(t===Xi){var f=p.prototype.lerp;p.prototype.lerp=function(e,t,i){var n=f.call(this,e,t,i);return Xi.normalize(n,n),n}}return p}var xI=bI("cc.CubicSplineVec2Value",Oi,Oi.multiplyScalar,Oi.scaleAndAdd);cc.CubicSplineVec2Value=xI;var TI=bI("cc.CubicSplineVec3Value",Mi,Mi.multiplyScalar,Mi.scaleAndAdd);cc.CubicSplineVec3Value=TI;var SI=bI("cc.CubicSplineVec4Value",Ni,Ni.multiplyScalar,Ni.scaleAndAdd);cc.CubicSplineVec4Value=SI;var EI=bI("cc.CubicSplineQuatValue",Xi,Xi.multiplyScalar,Xi.scaleAndAdd);cc.CubicSplineQuatValue=EI;var CI=qa("cc.CubicSplineNumberValue")((mI=de((dI=function(){function e(t,i,n){Z(this,e),_e(this,"dataPoint",mI,this),_e(this,"inTangent",vI,this),_e(this,"outTangent",yI,this),this.dataPoint=t,this.inTangent=i,this.outTangent=n}return J(e,[{key:"lerp",value:function(e,t,i){var n=this.dataPoint,r=e.dataPoint,o=t*t*t,a=t*t;return n*(2*o-3*a+1)+this.outTangent*i*(o-2*a+t)+r*(-2*o+3*a)+e.inTangent*i*(o-a)}},{key:"getNoLerp",value:function(){return this.dataPoint}}]),e}()).prototype,"dataPoint",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vI=de(dI.prototype,"inTangent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yI=de(dI.prototype,"outTangent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_I=dI))||_I;cc.CubicSplineNumberValue=CI;var wI=Object.freeze({__proto__:null,UniformProxyFactory:fI,MorphWeightsValueProxy:gI,MorphWeightsAllValueProxy:AI,isPropertyPath:RS,isCustomPath:FS,HierarchyPath:IS,ComponentPath:MS,evaluatePath:PS,CubicSplineVec2Value:xI,CubicSplineVec3Value:TI,CubicSplineVec4Value:SI,CubicSplineQuatValue:EI,CubicSplineNumberValue:CI});function kI(e,t){for(var i=0,n=e.length-1,r=n>>>1;i<=n;r=i+n>>>1){var o=e[r];if(o>t+1e-6)n=r-1;else{if(!(o<t-1e-6))return r;i=r+1}}return~i}function OI(e,t,i,n,r){var o=1-r;return e*o*o*o+3*t*o*o*r+3*i*o*r*r+n*r*r*r}cc.bezier=OI;var RI=Math.cos,FI=Math.acos,II=Math.max,MI=2*Math.PI,PI=Math.sqrt;function DI(e){return e<0?-Math.pow(-e,1/3):Math.pow(e,1/3)}function BI(e,t){var i=function(e,t){var i,n,r,o,a=t-0,s=t-e[0],l=3*a,c=3*s,u=3*(t-e[2]),h=1/(-a+c-u+(t-1)),p=(l-6*s+u)*h,f=p*(1/3),_=(-l+c)*h,d=1/3*(3*_-p*p),m=d*(1/3),v=(2*p*p*p-9*p*_+27*(a*h))/27,y=v/2,g=y*y+m*m*m;if(g<0){var A=1/3*-d,b=PI(A*A*A),x=-v/(2*b),T=FI(x<-1?-1:x>1?1:x),S=2*DI(b);return n=S*RI(T*(1/3))-f,r=S*RI((T+MI)*(1/3))-f,o=S*RI((T+2*MI)*(1/3))-f,0<=n&&n<=1?0<=r&&r<=1?0<=o&&o<=1?II(n,r,o):II(n,r):0<=o&&o<=1?II(n,o):n:0<=r&&r<=1?0<=o&&o<=1?II(r,o):r:o}if(0===g)return r=-(i=y<0?DI(-y):-DI(y))-f,0<=(n=2*i-f)&&n<=1?0<=r&&r<=1?II(n,r):n:r;var E=PI(g);return n=(i=DI(-y+E))-DI(y+E)-f}(e,t),n=1-i;return 0*n*n*n+3*e[1]*i*n*n+3*e[3]*i*i*n+1*i*i*i}function NI(e){return e*e}function LI(e){return e*(2-e)}function zI(e){return e*e*e}function GI(e){return--e*e*e+1}function UI(e){return e*e*e*e}function XI(e){return 1- --e*e*e*e}function VI(e){return e*e*e*e*e}function HI(e){return--e*e*e*e*e+1}function jI(e){return 1-Math.cos(e*Math.PI/2)}function WI(e){return Math.sin(e*Math.PI/2)}function YI(e){return 0===e?0:Math.pow(1024,e-1)}function qI(e){return 1===e?1:1-Math.pow(2,-10*e)}function QI(e){return 1-Math.sqrt(1-e*e)}function ZI(e){return Math.sqrt(1- --e*e)}function KI(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}function JI(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}function $I(e){var t=1.70158;return e*e*((t+1)*e-t)}function eM(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}function tM(e){return 1-iM(1-e)}function iM(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}cc.bezierByTime=BI;var nM=fM(NI,LI),rM=fM(zI,GI),oM=fM(UI,XI),aM=fM(VI,HI),sM=fM(jI,WI),lM=fM(YI,qI),cM=fM(QI,ZI),uM=fM(KI,JI),hM=fM($I,eM),pM=fM(tM,iM);function fM(e,t){return function(i){return i<.5?t(2*i)/2:e(2*i-1)/2+.5}}var _M,dM,mM=Object.freeze({__proto__:null,constant:function(){return 0},linear:function(e){return e},quadIn:NI,quadOut:LI,quadInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:zI,cubicOut:GI,cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quartIn:UI,quartOut:XI,quartInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quintIn:VI,quintOut:HI,quintInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sineIn:jI,sineOut:WI,sineInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},expoIn:YI,expoOut:qI,expoInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circIn:QI,circOut:ZI,circInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:KI,elasticOut:JI,elasticInOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=n*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:$I,backOut:eM,backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:tM,bounceOut:iM,bounceInOut:function(e){return e<.5?.5*tM(2*e):.5*iM(2*e-1)+.5},smooth:function(e){return e<=0?0:e>=1?1:e*e*(3-2*e)},fade:function(e){return e<=0?0:e>=1?1:e*e*e*(e*(6*e-15)+10)},quadOutIn:nM,cubicOutIn:rM,quartOutIn:oM,quintOutIn:aM,sineOutIn:sM,expoOutIn:lM,circOutIn:cM,elasticOutIn:uM,backOutIn:hM,bounceOutIn:pM});!function(e){e[e.Loop=2]="Loop",e[e.ShouldWrap=4]="ShouldWrap",e[e.PingPong=22]="PingPong",e[e.Reverse=36]="Reverse"}(_M||(_M={})),function(e){e[e.Default=0]="Default",e[e.Normal=1]="Normal",e[e.Reverse=_M.Reverse]="Reverse",e[e.Loop=_M.Loop]="Loop",e[e.LoopReverse=_M.Loop|_M.Reverse]="LoopReverse",e[e.PingPong=_M.PingPong]="PingPong",e[e.PingPongReverse=_M.PingPong|_M.Reverse]="PingPongReverse"}(dM||(dM={})),bt(dM);var vM=function(){function e(t){Z(this,e),this.ratio=0,this.time=0,this.direction=1,this.stopped=!0,this.iterations=0,this.frameIndex=void 0,t&&this.set(t)}return J(e,[{key:"set",value:function(e){this.ratio=e.ratio,this.time=e.time,this.direction=e.direction,this.stopped=e.stopped,this.iterations=e.iterations,this.frameIndex=e.frameIndex}}]),e}();var yM=function(){function e(t){var i,n;Z(this,e),this.ratios=void 0,this._findRatio=void 0,this.ratios=t;for(var r=!0,o=1,a=t.length;o<a;o++)if(i=t[o]-t[o-1],1===o)n=i;else if(Math.abs(i-n)>1e-6){r=!1;break}this._findRatio=r?TM:kI}return J(e,[{key:"sample",value:function(e){return this._findRatio(this.ratios,e)}}]),e}();cc.RatioSampler=yM;var gM=function(){function e(t,i){Z(this,e),this.types=void 0,this.type=null,this._values=[],this._lerp=void 0,this._duration=void 0,this._array=void 0,this._duration=i,this._values=t.values;var n=function(t){return"string"==typeof t?t:Array.isArray(t)?t[0]===t[1]&&t[2]===t[3]?e.Linear:e.Bezier(t):e.Linear};if(void 0!==t.easingMethod)this.type=n(t.easingMethod);else if(Array.isArray(t.easingMethods))this.types=t.easingMethods.map(n);else if(void 0!==t.easingMethods){this.types=new Array(this._values.length).fill(null);for(var r=0,o=Object.keys(t.easingMethods);r<o.length;r++){var a=o[r];this.types[a]=n(t.easingMethods[a])}}else this.type=null;var s=t.values[0];(void 0===t.interpolate||t.interpolate)&&(this._lerp=GM(s)),void 0!==t._arrayLength&&(this._array=new Array(t._arrayLength))}return J(e,null,[{key:"Bezier",value:function(e){return e}}]),J(e,[{key:"hasLerp",value:function(){return!!this._lerp}},{key:"valueAt",value:function(e){if(void 0===this._array){var t=this._values[e];return t&&t.getNoLerp?t.getNoLerp():t}for(var i=0;i<this._array.length;++i)this._array[i]=this._values[this._array.length*e+i];return this._array}},{key:"valueBetween",value:function(e,t,i,n,r){if(this._lerp){var o=this.types?this.types[t]:this.type,a=r-i,s=(e-i)/a;if(o&&(s=xM(s,o)),void 0===this._array){var l=this._values[t],c=this._values[n];return this._lerp(l,c,s,a*this._duration)}for(var u=0;u<this._array.length;++u){var h=this._values[this._array.length*t+u],p=this._values[this._array.length*n+u];this._array[u]=this._lerp(h,p,s,a*this._duration)}return this._array}if(void 0===this._array)return this.valueAt(t);for(var f=0;f<this._array.length;++f)this._array[f]=this._values[this._array.length*t+f];return this._array}},{key:"empty",value:function(){return 0===this._values.length}},{key:"constant",value:function(){return 1===this._values.length}}]),e}();gM.Linear=null,cc.AnimCurve=gM;var AM=function(){function e(){Z(this,e),this.events=[]}return J(e,[{key:"add",value:function(e,t){this.events.push({func:e||"",params:t||[]})}}]),e}();function bM(e,t,i){var n=t.sample(i);if(n<0)if((n=~n)<=0)n=0;else{if(!(n>=t.ratios.length))return e.valueBetween(i,n-1,t.ratios[n-1],n,t.ratios[n]);n=t.ratios.length-1}return e.valueAt(n)}function xM(e,t){if("string"==typeof t){var i=mM[t];i?e=i(e):b(3906,t)}else Array.isArray(t)&&(e=BI(t,e));return e}function TM(e,t){var i=e.length-1;if(0===i)return 0;var n=e[0];if(t<n)return 0;var r=e[i];if(t>r)return i;var o=(t=(t-n)/(r-n))/(1/i),a=0|o;return o-a<1e-6?a:a+1-o<1e-6?a+1:~(a+1)}cc.sampleAnimationCurve=bM;var SM,EM,CM,wM,kM,OM,RM,FM,IM,MM,PM,DM,BM,NM,LM,zM,GM=function(){function e(e,t,i,n){return e.lerp(t,i,n)}return function(t){if(null!==t){if("number"==typeof t)return _i;if("object"===Q(t)&&t.constructor){if(t instanceof Xi)return i=new Xi,function(e,t,n,r){return Xi.slerp(i,e,t,n)};if(t instanceof xt)return function(e){var t=new e;return function(i,n,r){return e.lerp(t,i,n,r),t}}(t.constructor);if(t.constructor===Number)return _i;if("function"==typeof t.lerp)return e}var i}}}();function UM(e,t,i){var n,r=t[t.length-1];if(0!==t.length&&RS(r)&&!i){var o=PS.apply(void 0,[e].concat(ue(t.slice(0,t.length-1))));if(null===o)return null;n={isProxy:!1,object:o,property:r}}else{if(!i)return h("Empty animation curve."),null;var a=PS.apply(void 0,[e].concat(ue(t)));if(null===a)return null;n={isProxy:!0,proxy:i.forTarget(a)}}return{setValue:function(e){n.isProxy?n.proxy.set(e):n.object[n.property]=e},getValue:function(){return n.isProxy?n.proxy.get?n.proxy.get():(h("Target doesn't provide a get method."),null):n.object[n.property]}}}function XM(e,t,i){var n=UM(e,t,i);if(null===n)return null;var r=n.getValue(),o=jM(r);if(!o)return h("Value is not copyable!"),null;var a=o.createBuffer(),s=o.copy;return Object.assign(n,{peek:function(){return a},pull:function(){var e=n.getValue();s(a,e)},push:function(){n.setValue(a)}})}exports.AnimationClip=(SM=qa("cc.AnimationClip"),EM=Qa({visible:!1}),SM((zM=LM=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"sample",kM,ne(i)),_e(i,"speed",OM,ne(i)),_e(i,"wrapMode",RM,ne(i)),_e(i,"events",FM,ne(i)),_e(i,"_duration",IM,ne(i)),_e(i,"_keys",MM,ne(i)),_e(i,"_stepness",PM,ne(i)),_e(i,"_curves",DM,ne(i)),_e(i,"_commonTargets",BM,ne(i)),_e(i,"_hash",NM,ne(i)),i.frameRate=0,i._ratioSamplers=[],i._runtimeCurves=void 0,i._runtimeEvents=void 0,i._data=null,i}return ee(t,Ul),J(t,[{key:"onLoaded",value:function(){this.frameRate=this.sample,this._decodeCVTAs()}},{key:"getPropertyCurves",value:function(){return this._runtimeCurves||this._createPropertyCurves(),this._runtimeCurves}},{key:"updateEventDatas",value:function(){delete this._runtimeEvents}},{key:"getEventGroupIndexAtRatio",value:function(e){return this._runtimeEvents||this._createRuntimeEvents(),function(e,t){for(var i=0,n=e.length-1,r=n>>>1;i<=n;r=i+n>>>1){var o=e[r];if(o>t+1e-6)n=r-1;else{if(!(o<t-1e-6))return r;i=r+1}}return~i}(this._runtimeEvents.ratios,e)}},{key:"hasEvents",value:function(){return 0!==this.events.length}},{key:"destroy",value:function(){return cc.director.root.dataPoolManager.releaseAnimationClip(this),DS.destroy(this),ae(te(t.prototype),"destroy",this).call(this)}},{key:"_createPropertyCurves",value:function(){var e=this;this._ratioSamplers=this._keys.map((function(t){return new yM(t.map((function(t){return t/e._duration})))})),this._runtimeCurves=this._curves.map((function(t){return{curve:new gM(t.data,e._duration),modifiers:t.modifiers,valueAdapter:t.valueAdapter,sampler:e._ratioSamplers[t.data.keys],commonTarget:t.commonTarget}})),this._applyStepness()}},{key:"_createRuntimeEvents",value:function(){for(var e,t=this,i=[],n=[],r=function(){var r=e.value,o=r.frame/t._duration,a=i.findIndex((function(e){return e===o}));a<0&&(a=i.length,i.push(o),n.push({events:[]})),n[a].events.push({functionName:r.func,parameters:r.params})},o=fe(this.events.sort((function(e,t){return e.frame-t.frame})));!(e=o()).done;)r();this._runtimeEvents={ratios:i,eventGroups:n}}},{key:"_applyStepness",value:function(){this._runtimeCurves}},{key:"_decodeCVTAs",value:function(){var e=ArrayBuffer.isView(this._nativeAsset)?this._nativeAsset.buffer:this._nativeAsset;if(e){for(var t=this._keys,i=0;i<t.length;++i){var n=t[i];n instanceof Uf&&(t[i]=n.decompress(e))}for(var r=0;r<this._curves.length;++r){var o=this._curves[r];o.data.values instanceof Uf&&(o.data.values=o.data.values.decompress(e))}}}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"keys",get:function(){return this._keys},set:function(e){this._keys=e}},{key:"eventGroups",get:function(){return this._runtimeEvents||this._createRuntimeEvents(),this._runtimeEvents.eventGroups}},{key:"stepness",get:function(){return this._stepness},set:function(e){this._stepness=e,this._applyStepness()}},{key:"hash",get:function(){if(this._hash)return this._hash;var e=this._nativeAsset,t=new Uint8Array(ArrayBuffer.isView(e)?e.buffer:e);return this._hash=sl(t,666)}},{key:"curves",get:function(){return this._curves},set:function(e){this._curves=e,delete this._runtimeCurves}},{key:"data",get:function(){return this._data}},{key:"commonTargets",get:function(){return this._commonTargets},set:function(e){this._commonTargets=e}}],[{key:"createWithSpriteFrames",value:function(e,i){if(!Array.isArray(e))return b(3905),null;var n=new t;n.sample=i||n.sample,n.duration=e.length/n.sample;for(var r=1/n.sample,o=new Array(e.length),a=new Array(o.length),s=0;s<e.length;s++)o[s]=s*r,a[s]=e[s];return n.keys=[o],n.curves=[{modifiers:[new MS("cc.SpriteComponent"),"spriteFrame"],data:{keys:0,values:a}}],n}}]),t}(),LM.preventDeferredLoadDependents=!0,LM.WrapMode=dM,kM=de((wM=zM).prototype,"sample",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),OM=de(wM.prototype,"speed",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),RM=de(wM.prototype,"wrapMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dM.Normal}}),FM=de(wM.prototype,"events",[EM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),IM=de(wM.prototype,"_duration",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),MM=de(wM.prototype,"_keys",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),PM=de(wM.prototype,"_stepness",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),DM=de(wM.prototype,"_curves",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),BM=de(wM.prototype,"_commonTargets",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),NM=de(wM.prototype,"_hash",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),CM=wM))||CM),exports.AnimationClip||(exports.AnimationClip={}),cc.AnimationClip=exports.AnimationClip;var VM,HM,jM=((VM=new Map).set(Oi,{createBuffer:function(){return new Oi},copy:Oi.copy}),VM.set(Mi,{createBuffer:function(){return new Mi},copy:Mi.copy}),VM.set(Ni,{createBuffer:function(){return new Ni},copy:Ni.copy}),VM.set(on,{createBuffer:function(){return new on},copy:on.copy}),function(e){return VM.get(null==e?void 0:e.constructor)}),WM=function(){function e(){Z(this,e),this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}return J(e,[{key:"play",value:function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(E(3912)):(this._isPlaying=!0,this.onPlay())}},{key:"stop",value:function(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)}},{key:"pause",value:function(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())}},{key:"resume",value:function(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())}},{key:"step",value:function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()}},{key:"update",value:function(e){}},{key:"onPlay",value:function(){}},{key:"onPause",value:function(){}},{key:"onResume",value:function(){}},{key:"onStop",value:function(){}},{key:"onError",value:function(e){}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"isPaused",get:function(){return this._isPaused}},{key:"isMotionless",get:function(){return!this.isPlaying||this.isPaused}}]),e}(),YM=function(){function e(){Z(this,e),this._nodeBlendStates=new Map}return J(e,[{key:"ref",value:function(e,t){var i=this._nodeBlendStates.get(e);i||(i={properties:{}},this._nodeBlendStates.set(e,i));var n=i.properties[t];return n||(n=i.properties[t]={refCount:0,weight:0,value:qM(t)?new Mi:new Xi}),++n.refCount,n}},{key:"deRef",value:function(e,t){var i=this._nodeBlendStates.get(e);if(i){var n=i.properties[t];n&&(--n.refCount,n.refCount>0||(delete i.properties[t],function(e){return!(e.properties.position||e.properties.rotation||e.properties.eulerAngles||e.properties.scale)}(i)&&this._nodeBlendStates.delete(e)))}}},{key:"apply",value:function(){this._nodeBlendStates.forEach((function(e,t){var i,n,r,o=e.properties,a=o.position,s=o.scale,l=o.rotation,c=o.eulerAngles,u=!1;a&&0!==a.weight&&(a.weight=0,i=a.value,u=!0),s&&0!==s.weight&&(s.weight=0,n=s.value,u=!0),l&&0!==l.weight&&(l.weight=0,r=l.value,u=!0),c&&0!==c.weight&&(c.weight=0,r=c.value,u=!0),u&&t.setRTS(r,i,n)}))}}]),e}();function qM(e){return!function(e){return"rotation"===e}(e)}function QM(e,t,i){return 0===i.weight&&Mi.zero(i.value),0===t?i.value:1===t?Mi.copy(i.value,e):Mi.scaleAndAdd(i.value,i.value,e,t)}function ZM(e,t,i){if(0===i.weight&&Xi.identity(i.value),0===t)return i.value;if(1===t)return Xi.copy(i.value,e);var n=t/(i.weight+t);return Xi.slerp(i.value,i.value,e,n)}!function(e){e.PLAY="play",e.STOP="stop",e.PAUSE="pause",e.RESUME="resume",e.LASTFRAME="lastframe",e.FINISHED="finished"}(HM||(HM={})),bt(HM);var KM=function(){function e(t,i,n){Z(this,e),this.commonTargetIndex=void 0,this._curve=void 0,this._boundTarget=void 0,this._rootTargetProperty=void 0,this._curveDetail=void 0,this._curve=t.curve,this._curveDetail=t,this._boundTarget=n}return J(e,[{key:"applySample",value:function(e,t,i,n,r){var o;this._curve.empty()||(o=this._curve.hasLerp()&&i?this._curve.valueBetween(e,n.from,n.fromRatio,n.to,n.toRatio):this._curve.valueAt(t),this._setValue(o,r))}},{key:"_setValue",value:function(e,t){this._boundTarget.setValue(e)}},{key:"propertyName",get:function(){return this._rootTargetProperty||""}},{key:"curveDetail",get:function(){return this._curveDetail}}]),e}();var JM=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Z(this,t),(i=re(this,te(t).call(this))).duration=1,i.speed=1,i.time=0,i.weight=0,i.frameRate=0,i._wrapMode=dM.Normal,i._repeatCount=1,i._currentFramePlayed=!1,i._delay=0,i._delayTime=0,i._wrappedInfo=new vM,i._lastWrapInfo=null,i._lastWrapInfoEvent=null,i._process=i.process,i._target=null,i._targetNode=null,i._clip=void 0,i._name=void 0,i._lastIterations=void 0,i._samplerSharedGroups=[],i._commonTargetStatuses=[],i._curveLoaded=!1,i._ignoreIndex=-1,i._blendStateBuffer=null,i._blendStateWriters=[],i._isBlendStateWriterInitialized=!1,i._allowLastFrame=!1,i._clip=e,i._name=n||e&&e.name,i}return ee(t,WM),J(t,[{key:"clip",get:function(){return this._clip}},{key:"name",get:function(){return this._name}},{key:"length",get:function(){return this.duration}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode=e,this.time=0,e&_M.Loop?this.repeatCount=1/0:this.repeatCount=1}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(e){this._repeatCount=e;var t=this._wrapMode&_M.ShouldWrap,i=(this.wrapMode&_M.Reverse)===_M.Reverse;this._process=e!==1/0||t||i?this.process:this.simpleProcess}},{key:"delay",get:function(){return this._delay},set:function(e){this._delayTime=this._delay=e}}]),J(t,[{key:"initialize",value:function(e,t){var i,n,r=this;if(!this._curveLoaded){this._curveLoaded=!0,this._destroyBlendStateWriters(),this._samplerSharedGroups.length=0,this._blendStateBuffer=null!==(i=null===(n=cc.director.getAnimationManager())||void 0===n?void 0:n.blendState)&&void 0!==i?i:null,this._targetNode=e;var o=this._clip;this.duration=o.duration,this.speed=o.speed,this.wrapMode=o.wrapMode,this.frameRate=o.sample,(this.wrapMode&_M.Loop)===_M.Loop?this.repeatCount=1/0:this.repeatCount=1;var a=function(e,t,i,n,o){if(!function(e){var t;if(1===e.length&&"string"==typeof e[0])t=e[0];else if(e.length>1){for(var i=0;i<e.length-1;++i)if(!(e[i]instanceof IS))return!1;t=e[e.length-1]}switch(t){case"position":case"scale":case"rotation":case"eulerAngles":return!0;default:return!1}}(i)||!r._blendStateBuffer)return e(t,i,n);var a=PS.apply(void 0,[t].concat(ue(i.slice(0,i.length-1))));if(null!==a&&a instanceof rg){var s=i[i.length-1],l=function(e,t,i,n,r){var o=qM(i)?QM:ZM,a=null,s=!1,l=-1,c=!0;return{initialize:function(){a||(a=e.ref(t,i))},destroy:function(){a&&(e.deRef(t,i),a=null)},enable:function(e){c=e},forTarget:function(){return{get:function(){return t[i]},set:function(e){if(c&&a){var t=n.weight;if(r)if(1!==t||t!==l)s=!1;else if(s)return;o(e,t,a),a.weight+=t,s=!0,l=t}}}}}}(r._blendStateBuffer,a,s,r,o);return r._blendStateWriters.push(l),e(t,[],l)}return null};this._commonTargetStatuses=o.commonTargets.map((function(t,i){var n=a(XM,e,t.modifiers,t.valueAdapter,!1);return null===n?null:{target:n,changed:!1}})),t||(t=o.getPropertyCurves());for(var s=function(i){var n=t[i],o=r._samplerSharedGroups.find((function(e){return e.sampler===n.sampler}));o||(o={sampler:n.sampler,curves:[],samplerResultCache:{from:0,fromRatio:0,to:0,toRatio:0}},r._samplerSharedGroups.push(o));var s=void 0;if(void 0===n.commonTarget)s=e;else{var l=r._commonTargetStatuses[n.commonTarget];if(!l)return"continue";s=l.target.peek()}var c=a(UM,s,n.modifiers,n.valueAdapter,n.curve.constant());if(null===c);else{var u=new KM(n,s,c);u.commonTargetIndex=n.commonTarget,o.curves.push(u)}},l=0;l<t.length;++l)s(l)}}},{key:"destroy",value:function(){this._destroyBlendStateWriters()}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];cc.director.getAnimationManager().pushDelayEvent(this._emit,this,t)}},{key:"on",value:function(e,t,i){return this._target&&this._target.isValid?this._target.on(e,t,i):null}},{key:"once",value:function(e,t,i){return this._target&&this._target.isValid?this._target.once(e,t,i):null}},{key:"off",value:function(e,t,i){this._target&&this._target.isValid&&this._target.off(e,t,i)}},{key:"allowLastFrameEvent",value:function(e){this._allowLastFrame=e}},{key:"_setEventTarget",value:function(e){this._target=e}},{key:"setTime",value:function(e){this._currentFramePlayed=!1,this.time=e||0,this._lastWrapInfoEvent=null,this._ignoreIndex=-1;var t=this.getWrappedInfo(e,this._wrappedInfo),i=t.direction,n=this._clip.getEventGroupIndexAtRatio(t.ratio);n<0&&(n=~n-1,i<0&&(n+=1),this._ignoreIndex=n)}},{key:"update",value:function(e){this._delayTime>0&&(this._delayTime-=e,this._delayTime>0)||(this._currentFramePlayed?this.time+=e*this.speed:this._currentFramePlayed=!0,this._process())}},{key:"_needReverse",value:function(e){var t=this.wrapMode,i=!1;(t&_M.PingPong)===_M.PingPong&&(e-(0|e)==0&&e>0&&(e-=1),1&e&&(i=!i));return(t&_M.Reverse)===_M.Reverse&&(i=!i),i}},{key:"getWrappedInfo",value:function(e,t){t=t||new vM;var i=!1,n=this.duration,r=this.repeatCount,o=e>0?e/n:-e/n;if(o>=r){o=r,i=!0;var a=r-(0|r);0===a&&(a=1),e=a*n*(e>0?1:-1)}if(e>n){var s=e%n;e=0===s?n:s}else e<0&&0!==(e%=n)&&(e+=n);var l=!1,c=this._wrapMode&_M.ShouldWrap;c&&(l=this._needReverse(o));var u=l?-1:1;return this.speed<0&&(u*=-1),c&&l&&(e=n-e),t.ratio=e/n,t.time=e,t.direction=u,t.stopped=i,t.iterations=o,t}},{key:"sample",value:function(){var e=this.getWrappedInfo(this.time,this._wrappedInfo);return this._sampleCurves(e.ratio),this._sampleEvents(e),e}},{key:"process",value:function(){var e,t=this.sample();this._allowLastFrame&&(e=this._lastWrapInfo?this._lastWrapInfo:this._lastWrapInfo=new vM(t),this.repeatCount>1&&(0|t.iterations)>(0|e.iterations)&&this.emit(HM.LASTFRAME,this),e.set(t));t.stopped&&(this.stop(),this.emit(HM.FINISHED,this))}},{key:"simpleProcess",value:function(){var e=this.duration,t=this.time%e;t<0&&(t+=e);var i=t/e;this._sampleCurves(i),this._clip.hasEvents()&&this._sampleEvents(this.getWrappedInfo(this.time,this._wrappedInfo)),this._allowLastFrame&&(void 0===this._lastIterations&&(this._lastIterations=i),(this.time>0&&this._lastIterations>i||this.time<0&&this._lastIterations<i)&&this.emit(HM.LASTFRAME,this),this._lastIterations=i)}},{key:"cache",value:function(e){}},{key:"onPlay",value:function(){this.setTime(0),this._delayTime=this._delay,this._onReplayOrResume(),this.emit(HM.PLAY,this)}},{key:"onStop",value:function(){this.isPaused||this._onPauseOrStop();for(var e=0;e<this._blendStateWriters.length;++e)this._blendStateWriters[e].enable(!1);this.emit(HM.STOP,this)}},{key:"onResume",value:function(){this._onReplayOrResume(),this.emit(HM.RESUME,this)}},{key:"onPause",value:function(){this._onPauseOrStop(),this.emit(HM.PAUSE,this)}},{key:"_sampleCurves",value:function(e){for(var t=0;t<this._commonTargetStatuses.length;++t){var i=this._commonTargetStatuses[t];i&&(i.target.pull(),i.changed=!1)}for(var n=0,r=this._samplerSharedGroups.length;n<r;++n){var o=this._samplerSharedGroups[n],a=o.sampler,s=o.samplerResultCache,l=0,c=!1;a?(l=a.sample(e))<0&&((l=~l)<=0?l=0:l>=a.ratios.length?l=a.ratios.length-1:(c=!0,s.from=l-1,s.fromRatio=a.ratios[s.from],s.to=l,s.toRatio=a.ratios[s.to],l=s.from)):l=0;for(var u=0,h=o.curves.length;u<h;++u){var p=o.curves[u];if(p.applySample(e,l,c,s,this.weight),void 0!==p.commonTargetIndex){var f=this._commonTargetStatuses[p.commonTargetIndex];f&&(f.changed=!0)}}}for(var _=0;_<this._commonTargetStatuses.length;++_){var d=this._commonTargetStatuses[_];d&&(d.changed&&d.target.push())}}},{key:"_sampleEvents",value:function(e){var t=this._clip.eventGroups.length,i=e.direction,n=this._clip.getEventGroupIndexAtRatio(e.ratio);if(n<0&&(n=~n-1,i<0&&(n+=1)),this._ignoreIndex!==n&&(this._ignoreIndex=-1),e.frameIndex=n,!this._lastWrapInfoEvent)return this._fireEvent(n),void(this._lastWrapInfoEvent=new vM(e));var r=this.wrapMode,o=$M(e.iterations),a=this._lastWrapInfoEvent,s=$M(a.iterations),l=a.frameIndex,c=a.direction,u=-1!==s&&o!==s;if(l===n&&u&&1===t)this._fireEvent(0);else if(l!==n||u){i=c;do{if(l!==n){if(-1===i&&0===l&&n>0?((r&_M.PingPong)===_M.PingPong?i*=-1:l=t,s++):1===i&&l===t-1&&n<t-1&&((r&_M.PingPong)===_M.PingPong?i*=-1:l=-1,s++),l===n)break;if(s>o)break}l+=i,cc.director.getAnimationManager().pushDelayEvent(this._fireEvent,this,[l])}while(l!==n&&l>-1&&l<t)}this._lastWrapInfoEvent.set(e)}},{key:"_emit",value:function(e,t){this._target&&this._target.isValid&&this._target.emit(e,e,t)}},{key:"_fireEvent",value:function(e){if(this._targetNode&&this._targetNode.isValid){var t=this._clip.eventGroups;if(!(e<0||e>=t.length||this._ignoreIndex===e))for(var i,n=t[e],r=this._targetNode.components,o=fe(n.events);!(i=o()).done;)for(var a,s=i.value,l=s.functionName,c=fe(r);!(a=c()).done;){var u=a.value,h=u[l];"function"==typeof h&&h.apply(u,s.parameters)}}}},{key:"_onReplayOrResume",value:function(){if(!this._isBlendStateWriterInitialized){for(var e=0;e<this._blendStateWriters.length;++e)this._blendStateWriters[e].initialize();this._isBlendStateWriterInitialized=!0}for(var t=0;t<this._blendStateWriters.length;++t)this._blendStateWriters[t].enable(!0);cc.director.getAnimationManager().addAnimation(this)}},{key:"_onPauseOrStop",value:function(){cc.director.getAnimationManager().removeAnimation(this)}},{key:"_destroyBlendStateWriters",value:function(){for(var e=0;e<this._blendStateWriters.length;++e)this._blendStateWriters[e].destroy();this._blendStateWriters.length=0,this._isBlendStateWriterInitialized=!1}},{key:"curveLoaded",get:function(){return this._curveLoaded}}]),t}();function $M(e){return e-(0|e)==0&&(e-=1),0|e}cc.AnimationState=JM;var eP,tP,iP,nP,rP,oP,aP,sP,lP,cP,uP,hP,pP,fP,_P,dP,mP,vP,yP=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._managedStates=[],e._fadings=[],e}return ee(t,WM),J(t,[{key:"update",value:function(e){if(!this.isMotionless){for(var t=0;t<this._managedStates.length;++t){var i=this._managedStates[t].state;i&&(i.weight=0)}for(var n=1,r=this._fadings.length,o=0;o<this._fadings.length;++o){var a=this._fadings[o];a.easeTime+=e;var s=0===a.easeDuration?1:fi(a.easeTime/a.easeDuration),l=s*n;if(n*=1-s,a.target.state&&(a.target.state.weight+=l),a.easeTime>=a.easeDuration){r=o+1,a.easeTime=a.easeDuration;break}}if(r!==this._fadings.length){for(var c=r;c<this._fadings.length;++c){var u=this._fadings[c];--u.target.reference,u.target.reference<=0&&(u.target.state&&u.target.state.stop(),ye(this._managedStates,u.target))}this._fadings.splice(r)}for(var h=0;h<this._managedStates.length;++h){var p=this._managedStates[h].state;p&&p.isMotionless&&p.sample()}}}},{key:"crossFade",value:function(e,t){var i;0===this._managedStates.length&&(t=0),0===t&&this.clear();var n=this._managedStates.find((function(t){return t.state===e}));n?(null===(i=n.state)||void 0===i?void 0:i.isMotionless)&&n.state.play():(n={state:e,reference:0},e&&e.play(),this._managedStates.push(n)),++n.reference,this._fadings.unshift({easeDuration:t,easeTime:0,target:n})}},{key:"clear",value:function(){for(var e=0;e<this._managedStates.length;++e){var t=this._managedStates[e].state;t&&t.stop()}this._managedStates.length=0,this._fadings.length=0}},{key:"onPlay",value:function(){ae(te(t.prototype),"onPlay",this).call(this),cc.director.getAnimationManager().addCrossFade(this)}},{key:"onPause",value:function(){ae(te(t.prototype),"onPause",this).call(this),cc.director.getAnimationManager().removeCrossFade(this);for(var e=0;e<this._managedStates.length;++e){var i=this._managedStates[e].state;i&&i.pause()}}},{key:"onResume",value:function(){ae(te(t.prototype),"onResume",this).call(this),cc.director.getAnimationManager().addCrossFade(this);for(var e=0;e<this._managedStates.length;++e){var i=this._managedStates[e].state;i&&i.resume()}}},{key:"onStop",value:function(){ae(te(t.prototype),"onStop",this).call(this),cc.director.getAnimationManager().removeCrossFade(this),this.clear()}}]),t}();function gP(e,t){return e===t||!(!e||!t||e.name!==t.name&&e._uuid!==t._uuid)}exports.AnimationComponent=(eP=qa("cc.AnimationComponent"),tP=as("i18n:cc.AnimationComponent"),iP=ts(99),nP=es("Components/Animation"),rP=Qa({type:[exports.AnimationClip],tooltip:"此动画组件管理的动画剪辑"}),oP=Qa({type:exports.AnimationClip,tooltip:"默认动画剪辑"}),aP=Qa({tooltip:"是否在动画组件开始运行时自动播放默认动画剪辑"}),sP=Qa({type:[exports.AnimationClip]}),eP(lP=tP(lP=iP(lP=Ja(lP=nP((_P=fP=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"playOnLoad",uP,ne(i)),i._crossFade=new yP,i._nameToState=Re(!0),_e(i,"_clips",hP,ne(i)),_e(i,"_defaultClip",pP,ne(i)),i._hasBeenPlayed=!1,i}return ee(t,Al(sp)),J(t,[{key:"onLoad",value:function(){for(var e in this.clips=this._clips,this._nameToState){this._nameToState[e].initialize(this.node)}}},{key:"start",value:function(){this.playOnLoad&&!this._hasBeenPlayed&&this._defaultClip&&this.crossFade(this._defaultClip.name,0)}},{key:"onEnable",value:function(){this._crossFade.resume()}},{key:"onDisable",value:function(){this._crossFade.pause()}},{key:"onDestroy",value:function(){for(var e in this._crossFade.stop(),this._nameToState){this._nameToState[e].destroy()}this._nameToState=Re(!0)}},{key:"play",value:function(e){if(this._hasBeenPlayed=!0,!e){if(!this._defaultClip)return;e=this._defaultClip.name}this.crossFade(e,0)}},{key:"crossFade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;this._hasBeenPlayed=!0;var i=this._nameToState[e];i&&(this._crossFade.play(),this._crossFade.crossFade(i,t))}},{key:"pause",value:function(){this._crossFade.pause()}},{key:"resume",value:function(){this._crossFade.resume()}},{key:"stop",value:function(){this._crossFade.stop()}},{key:"getAnimationState",value:function(e){return this.getState(e)}},{key:"getState",value:function(e){var t=this._nameToState[e];return t&&!t.curveLoaded&&t.initialize(this.node),t||null}},{key:"createState",value:function(e,t){return t=t||e.name,this.removeState(t),this._doCreateState(e,t)}},{key:"removeState",value:function(e){var t=this._nameToState[e];t&&(t.allowLastFrameEvent(!1),t.stop(),delete this._nameToState[e])}},{key:"addClip",value:function(e,t){return ge(this._clips,e)||this._clips.push(e),this.createState(e,t)}},{key:"removeClip",value:function(e,t){var i;for(var n in this._nameToState){var r=this._nameToState[n];if(r.clip===e){i=r;break}}if(e===this._defaultClip){if(!t)return void g(3902);this._defaultClip=null}if(i&&i.isPlaying){if(!t)return void g(3903);i.stop()}this._clips=this._clips.filter((function(t){return t!==e})),i&&delete this._nameToState[i.name]}},{key:"on",value:function(e,i,n,r){var o=ae(te(t.prototype),"on",this).call(this,e,i,n,r);return e===HM.LASTFRAME&&this._syncAllowLastFrameEvent(),o}},{key:"once",value:function(e,i,n){var r=ae(te(t.prototype),"once",this).call(this,e,i,n);return e===HM.LASTFRAME&&this._syncAllowLastFrameEvent(),r}},{key:"off",value:function(e,i,n){ae(te(t.prototype),"off",this).call(this,e,i,n),e===HM.LASTFRAME&&this._syncDisallowLastFrameEvent()}},{key:"_createState",value:function(e,t){return new JM(e,t)}},{key:"_doCreateState",value:function(e,t){var i=this._createState(e,t);return i._setEventTarget(this),i.allowLastFrameEvent(this.hasEventListener(HM.LASTFRAME)),this.node&&i.initialize(this.node),this._nameToState[i.name]=i,i}},{key:"_getStateByNameOrDefaultClip",value:function(e){if(!e){if(!this._defaultClip)return null;e=this._defaultClip.name}var t=this._nameToState[e];return t||null}},{key:"_removeStateOfAutomaticClip",value:function(e){for(var t in this._nameToState){var i=this._nameToState[t];gP(e,i.clip)&&(i.stop(),delete this._nameToState[t])}}},{key:"_syncAllowLastFrameEvent",value:function(){if(this.hasEventListener(HM.LASTFRAME))for(var e in this._nameToState)this._nameToState[e].allowLastFrameEvent(!0)}},{key:"_syncDisallowLastFrameEvent",value:function(){if(!this.hasEventListener(HM.LASTFRAME))for(var e in this._nameToState)this._nameToState[e].allowLastFrameEvent(!1)}},{key:"clips",get:function(){return this._clips},set:function(e){var t=this;this._crossFade&&this._crossFade.clear();for(var i,n=fe(this._clips);!(i=n()).done;){var r=i.value;r&&this._removeStateOfAutomaticClip(r)}for(var o,a=fe(e);!(o=a()).done;){var s=o.value;s&&this.createState(s)}var l=e.find((function(e){return gP(e,t._defaultClip)}));this._defaultClip=l||null,this._clips=e}},{key:"defaultClip",get:function(){return this._defaultClip},set:function(e){(this._defaultClip=e,e)&&(this._clips.findIndex((function(t){return gP(t,e)}))>=0||(this._clips.push(e),this.createState(e)))}}]),t}(),fP.EventType=HM,de((cP=_P).prototype,"clips",[rP],Object.getOwnPropertyDescriptor(cP.prototype,"clips"),cP.prototype),de(cP.prototype,"defaultClip",[oP],Object.getOwnPropertyDescriptor(cP.prototype,"defaultClip"),cP.prototype),uP=de(cP.prototype,"playOnLoad",[aP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hP=de(cP.prototype,"_clips",[sP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pP=de(cP.prototype,"_defaultClip",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lP=cP))||lP)||lP)||lP)||lP)||lP),exports.AnimationComponent||(exports.AnimationComponent={}),cc.AnimationComponent=exports.AnimationComponent,exports.replaceProperty(exports.AnimationComponent.prototype,"AnimationComponent",[{name:"getAnimationState",newName:"getState"},{name:"addClip",newName:"createState"},{name:"removeClip",newName:"removeState",customFunction:function(){var e=arguments.length<=0?void 0:arguments[0];return exports.AnimationComponent.prototype.removeState.call(this,e.name)}}]);var AP=qa((vP=mP=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._anims=new me([]),i._delayEvents=[],i._blendStateBuffer=new YM,i._crossFades=[],i._sockets=[],i}return ee(t,Vw),J(t,[{key:"addCrossFade",value:function(e){this._crossFades.push(e)}},{key:"removeCrossFade",value:function(e){ye(this._crossFades,e)}},{key:"update",value:function(e){for(var t=this._delayEvents,i=this._crossFades,n=this._sockets,r=0,o=i.length;r<o;r++)i[r].update(e);var a=this._anims,s=a.array;for(a.i=0;a.i<s.length;++a.i){var l=s[a.i];l.isMotionless||l.update(e)}this._blendStateBuffer.apply();for(var c=cc.director.getTotalFrames(),u=0,h=n.length;u<h;u++){var p=n[u],f=p.target,_=p.transform;f.matrix=nE(_,c)}for(var d=0,m=t.length;d<m;d++){var v=t[d];v.fn.apply(v.thisArg,v.args)}t.length=0}},{key:"destruct",value:function(){}},{key:"addAnimation",value:function(e){-1===this._anims.array.indexOf(e)&&this._anims.push(e)}},{key:"removeAnimation",value:function(e){var t=this._anims.array.indexOf(e);t>=0?this._anims.fastRemoveAt(t):b(3907)}},{key:"pushDelayEvent",value:function(e,t,i){this._delayEvents.push({fn:e,thisArg:t,args:i})}},{key:"addSockets",value:function(e,t){for(var i=this,n=function(n){var r=t[n];if(i._sockets.find((function(e){return e.target===r.target})))return"continue";var o=e.getChildByPath(r.path),a=r.target&&o&&rE(o,e);a&&i._sockets.push({target:r.target,transform:a})},r=0;r<t.length;++r)n(r)}},{key:"removeSockets",value:function(e,t){for(var i=0;i<t.length;++i)for(var n=t[i],r=0;r<this._sockets.length;++r){var o=this._sockets[r];if(o.target===n.target){oE(o.transform.node),this._sockets[r]=this._sockets[this._sockets.length-1],this._sockets.length--;break}}}},{key:"blendState",get:function(){return this._blendStateBuffer}}]),t}(),mP.ID="animation",dP=vP))||dP;gk.on(lk.EVENT_INIT,(function(){var e=new AP;gk.registerSystem(AP.ID,e,Qw.PRIORITY_SYSTEM)})),cc.AnimationManager=AP;var bP,xP,TP,SP,EP,CP,wP,kP,OP,RP,FP,IP,MP,PP,DP,BP,NP,LP,zP,GP=new Qi,UP=new Qi,XP=[],VP=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Z(this,t),(i=re(this,te(t).call(this,e,n)))._frames=1,i._bakedDuration=0,i._animInfo=null,i._sockets=[],i._animInfoMgr=void 0,i._comps=[],i._parent=null,i._curvesInited=!1,i._animInfoMgr=cc.director.root.dataPoolManager.jointAnimationInfo,i}return ee(t,JM),J(t,[{key:"initialize",value:function(e){if(!this._curveLoaded){this._comps.length=0;for(var i=e.getComponentsInChildren(JR),n=0;n<i.length;++n){var r=i[n];r.skinningRoot===e&&this._comps.push(r)}this._parent=e.getComponent("cc.SkeletalAnimationComponent");var o=this._parent.useBakedAnimation;ae(te(t.prototype),"initialize",this).call(this,e,o?XP:void 0),this._curvesInited=!o;var a=DS.getOrExtract(this.clip).info;this._frames=a.frames-1,this._animInfo=this._animInfoMgr.getData(e.uuid),this._bakedDuration=this._frames/a.sample}}},{key:"onPlay",value:function(){if(ae(te(t.prototype),"onPlay",this).call(this),this._parent.useBakedAnimation){this._sampleCurves=this._sampleCurvesBaked,this.duration=this._bakedDuration,this._animInfoMgr.switchClip(this._animInfo,this._clip);for(var e=0;e<this._comps.length;++e)this._comps[e].uploadAnimation(this.clip)}else this._sampleCurves=ae(te(t.prototype),"_sampleCurves",this),this.duration=this._clip.duration,this._curvesInited||(this._curveLoaded=!1,ae(te(t.prototype),"initialize",this).call(this,this._targetNode),this._curvesInited=!0)}},{key:"rebuildSocketCurves",value:function(e){if(this._sockets.length=0,!this._targetNode)return null;for(var t=this._targetNode,i=0;i<e.length;++i){var n=e[i],r=t.getChildByPath(n.path);if(n.target){for(var o=DS.getOrExtract(this.clip),a=n.path,s=o.data[a],l=r,c=void 0;!s;){var u=a.lastIndexOf("/");if(a=a.substring(0,u),s=o.data[a],l&&(c||(c=Qi.identity(UP)),Qi.fromRTS(GP,l.rotation,l.position,l.scale),Qi.multiply(c,GP,c),l=l.parent),u<0)break}for(var h=s&&s.worldMatrix.values,p=o.info.frames,f=[],_=0;_<p;_++){var d=void 0;d=h&&c?Qi.multiply(GP,h[_],c):h?h[_]:c||Qi.IDENTITY;var m={pos:new Mi,rot:new Xi,scale:new Mi};Qi.toRTS(d,m.rot,m.pos,m.scale),f.push(m)}this._sockets.push({target:n.target,frames:f})}}}},{key:"_sampleCurvesBaked",value:function(e){var t=this._animInfo,i=e*this._frames+.5|0;if(i!==t.data[0]){t.data[0]=i,t.dirty=!0;for(var n=0;n<this._sockets.length;++n){var r=this._sockets[n],o=r.target,a=r.frames[i],s=a.pos,l=a.rot,c=a.scale;o.setRTS(l,s,c)}}}}]),t}(),HP=(bP=qa("cc.SkeletalAnimationComponent.Socket"),xP=Qa(rg),bP((EP=de((SP=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Z(this,e),_e(this,"path",EP,this),_e(this,"target",CP,this),this.path=t,this.target=i}).prototype,"path",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CP=de(SP.prototype,"target",[xP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),TP=SP))||TP),jP=new Qi,WP=new Qi;function YP(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=0;n<e.children.length;n++){var r=e.children[n];if(r){var o=t?"".concat(t,"/").concat(r.name):r.name;i.push(o),YP(r,o,i)}}return i}var qP,QP,ZP,KP,JP=(wP=qa("cc.SkeletalAnimationComponent"),kP=as("i18n:cc.SkeletalAnimationComponent"),OP=ts(99),RP=es("Components/SkeletalAnimation"),FP=Qa({type:[HP],tooltip:"i18n:animation.sockets"}),IP=Qa({tooltip:"i18n:animation.use_baked_animation"}),MP=Qa({type:[HP]}),wP(PP=kP(PP=OP(PP=Ja(PP=RP((zP=LP=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_useBakedAnimation",BP,ne(i)),_e(i,"_sockets",NP,ne(i)),i}return ee(t,exports.AnimationComponent),J(t,[{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),cc.director.root.dataPoolManager.jointAnimationInfo.destroy(this.node.uuid),cc.director.getAnimationManager().removeSockets(this.node,this._sockets)}},{key:"start",value:function(){this.sockets=this._sockets,this.useBakedAnimation=this._useBakedAnimation,ae(te(t.prototype),"start",this).call(this)}},{key:"querySockets",value:function(){var e=this._defaultClip&&Object.keys(DS.getOrExtract(this._defaultClip).data).sort().reduce((function(e,t){return t.startsWith(e[e.length-1])||e.push(t),e}),[])||[];if(!e.length)return["please specify a valid default animation clip first"];for(var t=[],i=0;i<e.length;i++){var n=e[i],r=this.node.getChildByPath(n);r&&(t.push(n),YP(r,n,t))}return t}},{key:"rebuildSocketAnimations",value:function(){for(var e,t=fe(this._sockets);!(e=t()).done;){var i=e.value,n=this.node.getChildByPath(i.path),r=i.target;n&&r&&(r.name="".concat(i.path.substring(i.path.lastIndexOf("/")+1)," Socket"),r.parent=this.node,LS(n,this.node,jP),Qi.fromRTS(WP,r.rotation,r.position,r.scale),Qi.equals(WP,jP)||(r.matrix=jP))}for(var o=0,a=Object.keys(this._nameToState);o<a.length;o++){var s=a[o];this._nameToState[s].rebuildSocketCurves(this._sockets)}}},{key:"createSocket",value:function(e){var t=this._sockets.find((function(t){return t.path===e}));if(t)return t.target;if(!this.node.getChildByPath(e))return console.warn("illegal socket path"),null;var i=new rg;return i.parent=this.node,this._sockets.push(new HP(e,i)),this.rebuildSocketAnimations(),i}},{key:"_createState",value:function(e,t){return new VP(e,t)}},{key:"_doCreateState",value:function(e,i){var n=ae(te(t.prototype),"_doCreateState",this).call(this,e,i);return n.rebuildSocketCurves(this._sockets),n}},{key:"sockets",get:function(){return this._sockets},set:function(e){if(!this._useBakedAnimation){var t=cc.director.getAnimationManager();t.removeSockets(this.node,this._sockets),t.addSockets(this.node,e)}this._sockets=e,this.rebuildSocketAnimations()}},{key:"useBakedAnimation",get:function(){return this._useBakedAnimation},set:function(e){this._useBakedAnimation=e;for(var t=this.node.getComponentsInChildren(JR),i=0;i<t.length;++i){var n=t[i];n.skinningRoot===this.node&&n.setUseBakedAnimation(this._useBakedAnimation)}this._useBakedAnimation?cc.director.getAnimationManager().removeSockets(this.node,this._sockets):cc.director.getAnimationManager().addSockets(this.node,this._sockets)}}]),t}(),LP.Socket=HP,de((DP=zP).prototype,"sockets",[FP],Object.getOwnPropertyDescriptor(DP.prototype,"sockets"),DP.prototype),de(DP.prototype,"useBakedAnimation",[IP],Object.getOwnPropertyDescriptor(DP.prototype,"useBakedAnimation"),DP.prototype),BP=de(DP.prototype,"_useBakedAnimation",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),NP=de(DP.prototype,"_sockets",[MP],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),PP=DP))||PP)||PP)||PP)||PP)||PP);cc.SkeletalAnimationComponent=JP,cc.easing=mM;var $P=qa("cc.HierachyModifier")(qP=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,IS),t}())||qP;cc.HierachyModifier=$P;var eD=qa("cc.ComponentModifier")(QP=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,MS),t}())||QP;cc.ComponentModifier=eD;var tD=qa("cc.CurveValueAdapter")(ZP=function(){function e(){Z(this,e)}return J(e,[{key:"forTarget",value:function(e){return{set:function(){}}}}]),e}())||ZP;cc.CurveValueAdapter=tD;var iD=qa("cc.UniformCurveValueAdapter")(KP=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,fI),t}())||KP;function nD(e){return"string"==typeof e}function rD(e){return"number"==typeof e}function oD(e,t){return e instanceof t}cc.UniformCurveValueAdapter=iD,cc.isPropertyModifier=nD,cc.isElementModifier=rD,cc.isCustomTargetModifier=oD;var aD,sD=function(){function e(t,i,n){Z(this,e),this._id=void 0,this._opts=void 0,this._accumStart=void 0,this._total=0,this._value=0,this._averageValue=0,this._accumValue=0,this._accumSamples=0,this._id=t,this._opts=i,this._accumStart=n}return J(e,[{key:"value",get:function(){return this._value},set:function(e){this._value=e}}]),J(e,[{key:"sample",value:function(e){this._average(this._value,e)}},{key:"human",value:function(){var e=this._opts,t=e.average,i=e.isInteger,n=t?this._averageValue:this._value;return i?Math.round(n):Math.round(100*n)/100}},{key:"alarm",value:function(){return this._opts.below&&this._value<this._opts.below||this._opts.over&&this._value>this._opts.over}},{key:"_average",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._opts.average){this._accumValue+=e,++this._accumSamples;var i=t;i-this._accumStart>=this._opts.average&&(this._averageValue=this._accumValue/this._accumSamples,this._accumValue=0,this._accumStart=i,this._accumSamples=0)}}}]),e}(),lD=qa("cc.PerfCounter")(aD=function(e){function t(e,i,n){var r;return Z(this,t),(r=re(this,te(t).call(this,e,i,n)))._time=void 0,r._time=n,r}return ee(t,sD),J(t,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._time=e}},{key:"end",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._value=e-this._time,this._average(this._value)}},{key:"tick",value:function(){this.end(),this.start()}},{key:"frame",value:function(e){var t=e,i=t-this._time;this._total++,i>(this._opts.average||1e3)&&(this._value=1e3*this._total/i,this._total=0,this._time=t,this._average(this._value))}}]),t}())||aD,cD={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,".":10},uD={frame:{desc:"Frame time (ms)",min:0,max:50,average:500},fps:{desc:"Framerate (FPS)",below:30,average:500,isInteger:!0},draws:{desc:"Draw call",isInteger:!0},instances:{desc:"Instance Count",isInteger:!0},tricount:{desc:"Triangle",isInteger:!0},logic:{desc:"Game Logic (ms)",min:0,max:50,average:500,color:"#080"},physics:{desc:"Physics (ms)",min:0,max:50,average:500},render:{desc:"Renderer (ms)",min:0,max:50,average:500,color:"#f90"},textureMemory:{desc:"GFX Texture Mem(M)"},bufferMemory:{desc:"GFX Buffer Mem(M)"}},hD=24,pD=.18,fD=8,_D=256,dD=256,mD=function(){function e(){Z(this,e),this._stats=null,this.id="__Profiler__",this._showFPS=!1,this._rootNode=null,this._device=null,this._canvas=null,this._ctx=null,this._texture=null,this._textureView=null,this._region=new vr,this._canvasArr=[],this._regionArr=[this._region],this.digitsData=null,this._canvasDone=!1,this._statsDone=!1,this._inited=!1,this._lineHeight=dD/(Object.keys(uD).length+1),this._wordHeight=0,this._eachNumWidth=0,this._totalLines=0,this.lastTime=0,this._uvOffset=[],this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._region=new vr,this._canvasArr.push(this._canvas)}return J(e,[{key:"isShowingStats",value:function(){return this._showFPS}},{key:"hideStats",value:function(){this._showFPS&&(this._rootNode&&(this._rootNode.active=!1),cc.director.off(cc.Director.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this.afterUpdate,this),cc.director.off(cc.Director.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),cc.director.off(cc.Director.EVENT_AFTER_PHYSICS,this.afterPhysics,this),cc.director.off(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),cc.director.off(cc.Director.EVENT_AFTER_DRAW,this.afterDraw,this),this._showFPS=!1)}},{key:"showStats",value:function(){this._showFPS||(this._device||(this._device=cc.director.root.device),this.generateCanvas(),this.generateStats(),cc.game.once(cc.Game.EVENT_ENGINE_INITED,this.generateNode,this),this._rootNode&&(this._rootNode.active=!0),cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,this.beforeUpdate,this),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,this.afterUpdate,this),cc.director.on(cc.Director.EVENT_BEFORE_PHYSICS,this.beforePhysics,this),cc.director.on(cc.Director.EVENT_AFTER_PHYSICS,this.afterPhysics,this),cc.director.on(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,this.afterDraw,this),this._showFPS=!0,this._canvasDone=!0,this._statsDone=!0)}},{key:"generateCanvas",value:function(){if(!this._canvasDone){var e=_D,t=dD;this._ctx&&this._canvas&&(this._canvas.width=e,this._canvas.height=t,this._canvas.style.width="".concat(this._canvas.width),this._canvas.style.height="".concat(this._canvas.height),this._ctx.font="".concat(hD,"px Arial"),this._ctx.textBaseline="top",this._ctx.fillStyle="#fff",this._texture=this._device.createTexture({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.SAMPLED,format:exports.GFXFormat.RGBA8,width:e,height:t,mipLevel:1}),this._textureView=this._device.createTextureView({texture:this._texture,type:exports.GFXTextureViewType.TV2D,format:exports.GFXFormat.RGBA8}),this._region.texExtent.width=e,this._region.texExtent.height=t)}}},{key:"generateStats",value:function(){if(!this._statsDone&&this._ctx&&this._canvas){this._stats=null;var e=performance.now();this._ctx.textAlign="left";var t=0;for(var i in uD){var n=uD[i];this._ctx.fillText(n.desc,0,t*this._lineHeight),n.counter=new lD(i,n,e),t++}this._totalLines=t,this._wordHeight=this._totalLines*this._lineHeight/this._canvas.height;var r=new Array;r[0]=0;for(var o=0;o<"0123456789. ".length;++o){var a=this._ctx.measureText("0123456789. "[o]).width;this._eachNumWidth=Math.max(this._eachNumWidth,a),r[o+1]=r[o]+a/this._canvas.width}for(var s=0;s<"0123456789. ".length;++s)this._ctx.fillText("0123456789. "[s],s*this._eachNumWidth,this._totalLines*this._lineHeight);this._eachNumWidth/=this._canvas.width;for(var l=Math.ceil(r.length/4),c=0;c<l;c++)this._uvOffset.push(new Ni(r[4*c],r[4*c+1],r[4*c+2],r[4*c+3]));this._stats=uD,this._canvasArr[0]=this._canvas,this._device.copyTexImagesToTexture(this._canvasArr,this._texture,this._regionArr)}}},{key:"generateNode",value:function(){if(!this._rootNode||!this._rootNode.isValid){this._rootNode=new rg("PROFILER_NODE"),cc.game.addPersistRootNode(this._rootNode);var e=new rg("Profiler_Camera");e.setPosition(0,0,1),e.parent=this._rootNode;var t=e.addComponent("cc.CameraComponent");t.projection=exports.CameraComponent.ProjectionType.ORTHO,t.near=0,t.far=0,t.orthoHeight=this._device.height,t.visibility=Ec.BitMask.PROFILER,t.clearFlags=exports.GFXClearFlag.NONE,t.priority=4294967295,t.flows=["UIFlow"];var i=new rg("Profiler_Root");i.parent=this._rootNode;for(var n=pD,r=n/this._totalLines,o=n/this._wordHeight,a=r/hD,s=this._eachNumWidth*this._canvas.width*a,l=[0,n,0,o,n,0,o,0,0,0,0,0],c=[0,2,1,0,3,2],u=[0,0,-1,0,1,0,-1,0,1,this._wordHeight,-1,0,0,this._wordHeight,-1,0],h=0,p=0;p<this._totalLines;p++)for(var f=0;f<fD;f++){l.push(o+f*s,n-p*r,0),l.push(o+(f+1)*s,n-p*r,0),l.push(o+(f+1)*s,n-(p+1)*r,0),l.push(o+f*s,n-(p+1)*r,0),h=4*(p*fD+f+1),c.push(0+h,2+h,1+h,0+h,3+h,2+h);var _=p*fD+f,d=Math.floor(_/4),m=_-4*d;u.push(0,this._wordHeight,d,m),u.push(this._eachNumWidth,this._wordHeight,d,m),u.push(this._eachNumWidth,1,d,m),u.push(0,1,d,m)}var v=i.addComponent("cc.ModelComponent");v.mesh=SE({positions:l,indices:c,colors:u});var y=new Xh;y.initialize({effectName:"util/profiler"}),y.setProperty("offset",new Ni(-.9,-.9,this._eachNumWidth,0));var g=y.passes[0],A=g.getBinding("mainTexture"),b=g.getBinding("digits");g.bindTextureView(A,this._textureView),this.digitsData=g.blocks[b],v.material=y,v.node.layer=Ec.Enum.PROFILER,this._inited=!0}}},{key:"beforeUpdate",value:function(){if(this._stats){var e=performance.now();this._stats.frame.counter.end(e),this._stats.frame.counter.start(e),this._stats.logic.counter.start(e)}}},{key:"afterUpdate",value:function(){if(this._stats){var e=performance.now();cc.director.isPaused()?this._stats.frame.counter.start(e):this._stats.logic.counter.end(e)}}},{key:"beforePhysics",value:function(){if(this._stats){var e=performance.now();this._stats.physics.counter.start(e)}}},{key:"afterPhysics",value:function(){if(this._stats){var e=performance.now();this._stats.physics.counter.end(e)}}},{key:"beforeDraw",value:function(){if(this._stats){var e=performance.now();this._stats.render.counter.start(e)}}},{key:"afterDraw",value:function(){if(this._stats&&this._inited){var e=performance.now();if(this._stats.fps.counter.frame(e),this._stats.render.counter.end(e),!(e-this.lastTime<500)){this.lastTime=e;var t=this._device;this._stats.draws.counter.value=t.numDrawCalls,this._stats.instances.counter.value=t.numInstances,this._stats.bufferMemory.counter.value=t.memoryStatus.bufferSize/1048576,this._stats.textureMemory.counter.value=t.memoryStatus.textureSize/1048576,this._stats.tricount.counter.value=t.numTris;var i=0,n=this.digitsData.view;for(var r in this._stats){var o=this._stats[r];o.counter.sample(e);for(var a=o.counter.human().toString(),s=fD-1;s>=0;s--){var l=i*fD+s,c=a[a.length-(fD-s)],u=cD[c];void 0===u&&(u=11),n[l]=u}i++}this.digitsData.dirty=!0}}}}]),e}(),vD=new mD;cc.profiler=vD;var yD={};function gD(e,t,i){var n=e.createShader(t);if(n){if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.error("compile shader error",n),console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}else console.error("create shader error",i)}exports.replaceProperty(yD,"vmath",[{name:"vec2",newName:"Vec2",target:fn,targetName:"math"},{name:"vec3",newName:"Vec3",target:fn,targetName:"math"},{name:"vec4",newName:"Vec4",target:fn,targetName:"math"},{name:"quat",newName:"Quat",target:fn,targetName:"math"},{name:"mat3",newName:"Mat3",target:fn,targetName:"math"},{name:"mat4",newName:"Mat4",target:fn,targetName:"math"},{name:"color4",newName:"Color",target:fn,targetName:"math"},{name:"rect",newName:"Rect",target:fn,targetName:"math"},{name:"approx",newName:"approx",target:fn,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:fn,targetName:"math"},{name:"equals",newName:"equals",target:fn,targetName:"math"},{name:"clamp",newName:"clamp",target:fn,targetName:"math"},{name:"clamp01",newName:"clamp01",target:fn,targetName:"math"},{name:"lerp",newName:"lerp",target:fn,targetName:"math"},{name:"toRadian",newName:"toRadian",target:fn,targetName:"math"},{name:"toDegree",newName:"toDegree",target:fn,targetName:"math"},{name:"random",newName:"random",target:fn,targetName:"math"},{name:"randomRange",newName:"randomRange",target:fn,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:fn,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:fn,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:fn,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:fn,targetName:"math"},{name:"repeat",newName:"repeat",target:fn,targetName:"math"},{name:"pingPong",newName:"pingPong",target:fn,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:fn,targetName:"math"}]),cc.vmath=yD,exports.replaceProperty(Qw.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:Qw,targetName:"Scheduler"}]),exports.replaceProperty(exports.CameraComponent.prototype,"CameraComponent.prototype",[{name:"color",newName:"clearColor"},{name:"depth",newName:"clearDepth"},{name:"stencil",newName:"clearStencil"}]),exports.replaceProperty(Ev.prototype,"EventTouch.prototype",[{name:"getUILocationInView",newName:"getLocationInView",target:Ev,targetName:"EventTouch"}]);var AD=function(){function e(){Z(this,e),this.logoImage=new Image,this.textImage=document.createElement("canvas"),this.vertices=new Float32Array([-1,-1,-1,1,1,-1,1,-1,-1,1,1,1]),this.texcoords=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),this.logoMat33=new Float32Array([1,0,0,0,1,0,0,0,1]),this.textMat33=new Float32Array([1,0,0,0,1,0,0,0,1]),this.callBack=null,this.cancelAnimate=!1,this.handle=-1,this.startTime=-1,this.orientation="",this.cocosPlayVersion=134,this._isStart=!1,this._directCall=!1,this._splashFinish=!1,this._loadFinish=!1}return J(e,[{key:"_tryToStart",value:function(){this._splashFinish&&this._loadFinish&&this.callBack&&(this.cancelAnimate=!0,cancelAnimationFrame(this.handle),this.destroy(),this.callBack())}},{key:"setOnFinish",value:function(t){if((!this._isStart||this._directCall)&&t)return delete e._ins,t();this.callBack=t}},{key:"main",value:function(e){var t=globalThis._CCSettings;if(t&&t.splashScreen?(this.setting=t.splashScreen,this.setting.totalTime=null!=this.setting.totalTime?this.setting.totalTime:3e3,this.setting.base64src=null!=this.setting.base64src?this.setting.base64src:"",this.setting.effect=null!=this.setting.effect?this.setting.effect:"Fade-InOut",this.setting.clearColor=null!=this.setting.clearColor?this.setting.clearColor:{r:.88,g:.88,b:.88,a:1},this.setting.displayRatio=null!=this.setting.displayRatio?this.setting.displayRatio:.4,this.setting.displayWatermark=null==this.setting.displayWatermark||this.setting.displayWatermark,this.orientation=t.orientation):this.setting={totalTime:3e3,base64src:"",effect:"Fade-InOut",clearColor:{r:.88,g:.88,b:.88,a:1},displayRatio:.4,displayWatermark:!0},null==e||""==this.setting.base64src||this.setting.totalTime<=0)return this.callBack&&this.callBack(),this.callBack=null,this.setting=null,void(this._directCall=!0);cc.view.enableRetina(!0);var i=t.designResolution;i?cc.view.setDesignResolutionSize(i.width,i.height,i.policy):cc.view.setDesignResolutionSize(960,640,4);var n=!!globalThis.WebGL2RenderingContext,r=globalThis.navigator.userAgent.toLowerCase();(-1!==r.indexOf("safari")&&-1===r.indexOf("chrome")||ws.browserType===ws.BROWSER_TYPE_UC)&&(n=!1);var o={alpha:_c.ENABLE_TRANSPARENT_CANVAS,antialias:!0,depth:!0,stencil:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1},a=null,s=null;if(n&&cc.WebGL2GFXDevice?null==(s=e.getContext("webgl2",o))&&(a=e.getContext("webgl",o)):a=e.getContext("webgl",o),null==a&&null==s)return console.error("this device does not support webgl");null!=a&&(this.gl=a),null!=s&&(this.gl=s);var l=this.textImage;l.width=330,l.height=30,l.style.width="".concat(l.width),l.style.height="".concat(l.height);var c=l.getContext("2d");c.font="".concat(18,"px Arial"),c.textBaseline="top",c.textAlign="left",c.fillStyle="`#424242`";var u="Powered by Cocos Creator 3D",h=c.measureText(u);c.fillText(u,(330-h.width)/2,6),this.logoImage.onload=this.init.bind(this),this.logoImage.src=this.setting.base64src,this._isStart=!0}},{key:"init",value:function(){this.initMatrix(),this.initProgram(),this.initBuffer(),this.initTexture(),this.initState();var e=this;this.handle=requestAnimationFrame((function t(i){e.cancelAnimate||(void 0===i&&(i=performance.now()),e.frame(i),requestAnimationFrame(t))}))}},{key:"initMatrix",value:function(){var e=this.gl.canvas.width,t=this.gl.canvas.height,i=this.setting.displayRatio,n=this.logoImage.width/2,r=this.logoImage.height/2,o=this.textImage.width/2,a=this.textImage.height/2;e<t?(r=(n=e/2*i)/(this.logoImage.width/this.logoImage.height),a=(o=e/2*.5)/(this.textImage.width/this.textImage.height)):(r=(n=t/2*i)/(this.logoImage.width/this.logoImage.height),a=(o=t/2*.5)/(this.textImage.width/this.textImage.height)),this.logoMat33[0]=n,this.logoMat33[4]=r,this.logoMat33[6]=e/2,this.logoMat33[7]=t/2,this.textMat33[0]=o,this.textMat33[4]=a,this.textMat33[6]=e/2,this.textMat33[7]=.9*t}},{key:"initProgram",value:function(){var e=this.gl;this.vertexShader=gD(e,e.VERTEX_SHADER,"precision mediump float;attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;uniform mat3 u_worldMat;varying vec2 v_texCoord;void main() {vec3 wpos = u_worldMat * vec3(a_position, 1.0);vec2 clipSpace = wpos.xy / u_resolution * 2.0 - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"),this.fragmentShader=gD(e,e.FRAGMENT_SHADER,"precision mediump float;uniform float u_alpha;uniform sampler2D u_image;varying vec2 v_texCoord;void main(){gl_FragColor = texture2D(u_image,v_texCoord);gl_FragColor.xyz *= clamp(u_alpha, 0.0, 1.0);}"),this.program=function(e,t,i){var n=e.createProgram();if(n){e.attachShader(n,t),e.attachShader(n,i),e.linkProgram(n);var r=e.getProgramParameter(n,e.LINK_STATUS);if(r)return n;console.error("link program error",r),console.log(e.getProgramInfoLog(n)),e.deleteProgram(n)}else console.error("create program error")}(e,this.vertexShader,this.fragmentShader)}},{key:"initBuffer",value:function(){var e=this.gl;e.useProgram(this.program),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),e.bufferData(e.ARRAY_BUFFER,this.texcoords,e.STATIC_DRAW);var t=e.getAttribLocation(this.program,"a_position");e.enableVertexAttribArray(t),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer);var i=2,n=e.FLOAT,r=!1,o=0,a=0;e.vertexAttribPointer(t,i,n,r,o,a);var s=e.getAttribLocation(this.program,"a_texCoord");e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer);i=2,n=e.FLOAT,r=!1,o=0,a=0;e.vertexAttribPointer(s,i,n,r,o,a)}},{key:"initTexture",value:function(){var e=this.gl;this.textureLogo=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.textureLogo),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.logoImage),this.textureText=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.textureText),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.textImage)}},{key:"initState",value:function(){var e=this.gl;e.useProgram(this.program);var t=e.getUniformLocation(this.program,"u_resolution");e.uniform2f(t,e.canvas.width,e.canvas.height),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}},{key:"frame",value:function(e){var t=this.gl,i=this.program,n=this.textureLogo,r=this.textureText,o=this.setting.clearColor,a=this.logoMat33,s=this.textMat33;this.startTime<0&&(this.startTime=e);var l=e-this.startTime,c=GI(fi(l/this.setting.totalTime));t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(o.r,o.g,o.b,o.a),t.depthMask(!0),t.clearDepth(1),t.clearStencil(0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),t.useProgram(this.program);var u=t.getUniformLocation(this.program,"u_resolution");t.uniform2f(u,t.canvas.width,t.canvas.height);var h=t.getUniformLocation(i,"u_alpha");t.uniform1f(h,c),h=t.getUniformLocation(i,"u_worldMat"),t.uniformMatrix3fv(h,!1,a),t.bindTexture(t.TEXTURE_2D,n),t.drawArrays(t.TRIANGLES,0,6),this.setting.displayWatermark&&(t.uniformMatrix3fv(h,!1,s),t.bindTexture(t.TEXTURE_2D,r),t.drawArrays(t.TRIANGLES,0,6)),l>this.setting.totalTime&&(this.splashFinish=!0)}},{key:"destroy",value:function(){delete e._ins,this.gl.deleteProgram(this.program),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.gl.deleteBuffer(this.positionBuffer),this.gl.deleteBuffer(this.texcoordBuffer),this.gl.deleteTexture(this.textureLogo),this.gl.deleteTexture(this.textureText)}},{key:"loadFinish",set:function(e){this._loadFinish=e,this._tryToStart()}},{key:"splashFinish",set:function(e){this._splashFinish=e,this._tryToStart()}}],[{key:"instance",get:function(){return null==e._ins&&(e._ins=new e),e._ins}}]),e}();AD._ins=void 0,cc.internal.SplashScreenWebgl=AD,cc.math=fn,cc.geometry=ba;var bD,xD,TD,SD,ED,CD,wD,kD,OD,RD=function(){function e(t){Z(this,e),this.poolHandlerComp=void 0,this._pool=void 0,this.poolHandlerComp=t,this._pool=[]}return J(e,[{key:"size",value:function(){return this._pool.length}},{key:"clear",value:function(){for(var e=this._pool.length,t=0;t<e;++t)this._pool[t].destroy();this._pool.length=0}},{key:"put",value:function(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent();var t=this.poolHandlerComp?e.getComponent(this.poolHandlerComp):null;t&&t.unuse&&t.unuse(),this._pool.push(e)}}},{key:"get",value:function(){var e=this._pool.length-1;if(e<0)return null;var t=this._pool[e];this._pool.length=e;var i=this.poolHandlerComp?t.getComponent(this.poolHandlerComp):null;if(i&&i.reuse){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];(n=i.reuse).apply.apply(n,[i].concat(o))}return t}}]),e}();cc.NodePool=RD,function(e){e[e.BOX=0]="BOX",e[e.SPHERE=1]="SPHERE",e[e.CYLINDER=2]="CYLINDER",e[e.CONE=3]="CONE",e[e.CAPSULE=4]="CAPSULE",e[e.TORUS=5]="TORUS",e[e.PLANE=6]="PLANE",e[e.QUAD=7]="QUAD"}(OD||(OD={})),bt(OD),exports.Primitive=(bD=qa("cc.Primitive"),xD=Qa({type:OD}),bD((kD=wD=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OD.BOX;return Z(this,t),_e(e=re(this,te(t).call(this)),"type",ED,ne(e)),_e(e,"info",CD,ne(e)),e.type=i,e}return ee(t,lu),J(t,[{key:"onLoaded",value:function(){SE(JE[OD[this.type].toLowerCase()](this.info),this)}}]),t}(),wD.PrimitiveType=OD,ED=de((SD=kD).prototype,"type",[xD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return OD.BOX}}),CD=de(SD.prototype,"info",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),TD=SD))||TD),exports.Primitive||(exports.Primitive={}),cc.Primitive=exports.Primitive,cc.renderer=KC;var FD=cc;cc.primitives=JE;var ID,MD=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuBindingLayout=null,i}return ee(t,qr),J(t,[{key:"initialize",value:function(e){this._bindingUnits=new Array(e.bindings.length);for(var t=0;t<e.bindings.length;++t){var i=e.bindings[t];this._bindingUnits[t]={binding:i.binding,type:i.bindingType,name:i.name,buffer:null,texView:null,sampler:null}}this._gpuBindingLayout={gpuBindings:new Array(e.bindings.length)};for(var n=0;n<e.bindings.length;++n){var r=e.bindings[n];this._gpuBindingLayout.gpuBindings[n]={binding:r.binding,type:r.bindingType,name:r.name,gpuBuffer:null,gpuTexView:null,gpuSampler:null}}return this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._gpuBindingLayout=null,this._status=exports.GFXStatus.UNREADY}},{key:"update",value:function(){if(this._isDirty&&this._gpuBindingLayout){for(var e=0;e<this._bindingUnits.length;++e){var t=this._bindingUnits[e];switch(t.type){case exports.GFXBindingType.UNIFORM_BUFFER:t.buffer&&(this._gpuBindingLayout.gpuBindings[e].gpuBuffer=t.buffer.gpuBuffer);break;case exports.GFXBindingType.SAMPLER:t.texView&&(this._gpuBindingLayout.gpuBindings[e].gpuTexView=t.texView.gpuTextureView),t.sampler&&(this._gpuBindingLayout.gpuBindings[e].gpuSampler=t.sampler.gpuSampler)}}this._isDirty=!1}}},{key:"gpuBindingLayout",get:function(){return this._gpuBindingLayout}}]),t}();function PD(e,t){switch(e){case exports.GFXFormat.R8:return t.UNSIGNED_BYTE;case exports.GFXFormat.R8SN:return t.BYTE;case exports.GFXFormat.R8UI:return t.UNSIGNED_BYTE;case exports.GFXFormat.R8I:return t.BYTE;case exports.GFXFormat.R16F:return ID.HALF_FLOAT_OES;case exports.GFXFormat.R16UI:return t.UNSIGNED_SHORT;case exports.GFXFormat.R16I:return t.SHORT;case exports.GFXFormat.R32F:return t.FLOAT;case exports.GFXFormat.R32UI:return t.UNSIGNED_INT;case exports.GFXFormat.R32I:return t.INT;case exports.GFXFormat.RG8:return t.UNSIGNED_BYTE;case exports.GFXFormat.RG8SN:return t.BYTE;case exports.GFXFormat.RG8UI:return t.UNSIGNED_BYTE;case exports.GFXFormat.RG8I:return t.BYTE;case exports.GFXFormat.RG16F:return ID.HALF_FLOAT_OES;case exports.GFXFormat.RG16UI:return t.UNSIGNED_SHORT;case exports.GFXFormat.RG16I:return t.SHORT;case exports.GFXFormat.RG32F:return t.FLOAT;case exports.GFXFormat.RG32UI:return t.UNSIGNED_INT;case exports.GFXFormat.RG32I:return t.INT;case exports.GFXFormat.RGB8:case exports.GFXFormat.SRGB8:return t.UNSIGNED_BYTE;case exports.GFXFormat.RGB8SN:return t.BYTE;case exports.GFXFormat.RGB8UI:return t.UNSIGNED_BYTE;case exports.GFXFormat.RGB8I:return t.BYTE;case exports.GFXFormat.RGB16F:return ID.HALF_FLOAT_OES;case exports.GFXFormat.RGB16UI:return t.UNSIGNED_SHORT;case exports.GFXFormat.RGB16I:return t.SHORT;case exports.GFXFormat.RGB32F:return t.FLOAT;case exports.GFXFormat.RGB32UI:return t.UNSIGNED_INT;case exports.GFXFormat.RGB32I:return t.INT;case exports.GFXFormat.RGBA8:case exports.GFXFormat.SRGB8_A8:return t.UNSIGNED_BYTE;case exports.GFXFormat.RGBA8SN:return t.BYTE;case exports.GFXFormat.RGBA8UI:return t.UNSIGNED_BYTE;case exports.GFXFormat.RGBA8I:return t.BYTE;case exports.GFXFormat.RGBA16F:return ID.HALF_FLOAT_OES;case exports.GFXFormat.RGBA16UI:return t.UNSIGNED_SHORT;case exports.GFXFormat.RGBA16I:return t.SHORT;case exports.GFXFormat.RGBA32F:return t.FLOAT;case exports.GFXFormat.RGBA32UI:return t.UNSIGNED_INT;case exports.GFXFormat.RGBA32I:return t.INT;case exports.GFXFormat.R5G6B5:return t.UNSIGNED_SHORT_5_6_5;case exports.GFXFormat.R11G11B10F:return t.FLOAT;case exports.GFXFormat.RGB5A1:return t.UNSIGNED_SHORT_5_5_5_1;case exports.GFXFormat.RGBA4:return t.UNSIGNED_SHORT_4_4_4_4;case exports.GFXFormat.RGB10A2:return t.UNSIGNED_BYTE;case exports.GFXFormat.RGB10A2UI:return t.UNSIGNED_INT;case exports.GFXFormat.RGB9E5:return t.UNSIGNED_BYTE;case exports.GFXFormat.D16:return t.UNSIGNED_SHORT;case exports.GFXFormat.D16S8:return ID.UNSIGNED_INT_24_8_WEBGL;case exports.GFXFormat.D24:return t.UNSIGNED_INT;case exports.GFXFormat.D24S8:return ID.UNSIGNED_INT_24_8_WEBGL;case exports.GFXFormat.D32F:return t.FLOAT;case exports.GFXFormat.D32F_S8:return ID.UNSIGNED_INT_24_8_WEBGL;case exports.GFXFormat.BC1:case exports.GFXFormat.BC1_SRGB:case exports.GFXFormat.BC2:case exports.GFXFormat.BC2_SRGB:case exports.GFXFormat.BC3:case exports.GFXFormat.BC3_SRGB:case exports.GFXFormat.BC4:return t.UNSIGNED_BYTE;case exports.GFXFormat.BC4_SNORM:return t.BYTE;case exports.GFXFormat.BC5:return t.UNSIGNED_BYTE;case exports.GFXFormat.BC5_SNORM:return t.BYTE;case exports.GFXFormat.BC6H_SF16:case exports.GFXFormat.BC6H_UF16:return t.FLOAT;case exports.GFXFormat.BC7:case exports.GFXFormat.BC7_SRGB:case exports.GFXFormat.ETC_RGB8:case exports.GFXFormat.ETC2_RGB8:case exports.GFXFormat.ETC2_SRGB8:case exports.GFXFormat.ETC2_RGB8_A1:case exports.GFXFormat.ETC2_SRGB8_A1:case exports.GFXFormat.ETC2_RGB8:case exports.GFXFormat.ETC2_SRGB8:case exports.GFXFormat.EAC_R11:return t.UNSIGNED_BYTE;case exports.GFXFormat.EAC_R11SN:return t.BYTE;case exports.GFXFormat.EAC_RG11:return t.UNSIGNED_BYTE;case exports.GFXFormat.EAC_RG11SN:return t.BYTE;case exports.GFXFormat.PVRTC_RGB2:case exports.GFXFormat.PVRTC_RGBA2:case exports.GFXFormat.PVRTC_RGB4:case exports.GFXFormat.PVRTC_RGBA4:case exports.GFXFormat.PVRTC2_2BPP:case exports.GFXFormat.PVRTC2_4BPP:default:return t.UNSIGNED_BYTE}}function DD(e,t){switch(e){case exports.GFXFormat.A8:return t.ALPHA;case exports.GFXFormat.L8:return t.LUMINANCE;case exports.GFXFormat.LA8:return t.LUMINANCE_ALPHA;case exports.GFXFormat.RGB8:case exports.GFXFormat.RGB16F:case exports.GFXFormat.RGB32F:return t.RGB;case exports.GFXFormat.RGBA8:case exports.GFXFormat.RGBA16F:case exports.GFXFormat.RGBA32F:return t.RGBA;case exports.GFXFormat.R5G6B5:return t.RGB565;case exports.GFXFormat.RGB5A1:return t.RGB5_A1;case exports.GFXFormat.RGBA4:return t.RGBA4;case exports.GFXFormat.D16:return t.DEPTH_COMPONENT;case exports.GFXFormat.D16S8:return t.DEPTH_STENCIL;case exports.GFXFormat.D24:return t.DEPTH_COMPONENT;case exports.GFXFormat.D24S8:return t.DEPTH_STENCIL;case exports.GFXFormat.D32F:return t.DEPTH_COMPONENT;case exports.GFXFormat.D32F_S8:return t.DEPTH_STENCIL;case exports.GFXFormat.BC1:return ID.COMPRESSED_RGB_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_ALPHA:return ID.COMPRESSED_RGBA_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_SRGB:return ID.COMPRESSED_SRGB_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_SRGB_ALPHA:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case exports.GFXFormat.BC2:return ID.COMPRESSED_RGBA_S3TC_DXT3_EXT;case exports.GFXFormat.BC2_SRGB:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case exports.GFXFormat.BC3:return ID.COMPRESSED_RGBA_S3TC_DXT5_EXT;case exports.GFXFormat.BC3_SRGB:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case exports.GFXFormat.ETC_RGB8:return ID.COMPRESSED_RGB_ETC1_WEBGL;case exports.GFXFormat.ETC2_RGB8:return ID.COMPRESSED_RGB8_ETC2;case exports.GFXFormat.ETC2_SRGB8:return ID.COMPRESSED_SRGB8_ETC2;case exports.GFXFormat.ETC2_RGB8_A1:return ID.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2;case exports.GFXFormat.ETC2_SRGB8_A1:return ID.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2;case exports.GFXFormat.ETC2_RGBA8:return ID.COMPRESSED_RGBA8_ETC2_EAC;case exports.GFXFormat.ETC2_SRGB8_A8:return ID.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;case exports.GFXFormat.EAC_R11:return ID.COMPRESSED_R11_EAC;case exports.GFXFormat.EAC_R11SN:return ID.COMPRESSED_SIGNED_R11_EAC;case exports.GFXFormat.EAC_RG11:return ID.COMPRESSED_RG11_EAC;case exports.GFXFormat.EAC_RG11SN:return ID.COMPRESSED_SIGNED_RG11_EAC;case exports.GFXFormat.PVRTC_RGB2:return ID.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;case exports.GFXFormat.PVRTC_RGBA2:return ID.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;case exports.GFXFormat.PVRTC_RGB4:return ID.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;case exports.GFXFormat.PVRTC_RGBA4:return ID.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;default:return console.error("Unsupported GFXFormat, convert to WebGL internal format failed."),t.RGBA}}function BD(e,t){switch(e){case exports.GFXFormat.A8:return t.ALPHA;case exports.GFXFormat.L8:return t.LUMINANCE;case exports.GFXFormat.LA8:return t.LUMINANCE_ALPHA;case exports.GFXFormat.RGB8:case exports.GFXFormat.RGB16F:case exports.GFXFormat.RGB32F:return t.RGB;case exports.GFXFormat.RGBA8:case exports.GFXFormat.RGBA16F:case exports.GFXFormat.RGBA32F:return t.RGBA;case exports.GFXFormat.R5G6B5:return t.RGB;case exports.GFXFormat.RGB5A1:case exports.GFXFormat.RGBA4:return t.RGBA;case exports.GFXFormat.D16:return t.DEPTH_COMPONENT;case exports.GFXFormat.D16S8:return t.DEPTH_STENCIL;case exports.GFXFormat.D24:return t.DEPTH_COMPONENT;case exports.GFXFormat.D24S8:return t.DEPTH_STENCIL;case exports.GFXFormat.D32F:return t.DEPTH_COMPONENT;case exports.GFXFormat.D32F_S8:return t.DEPTH_STENCIL;case exports.GFXFormat.BC1:return ID.COMPRESSED_RGB_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_ALPHA:return ID.COMPRESSED_RGBA_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_SRGB:return ID.COMPRESSED_SRGB_S3TC_DXT1_EXT;case exports.GFXFormat.BC1_SRGB_ALPHA:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case exports.GFXFormat.BC2:return ID.COMPRESSED_RGBA_S3TC_DXT3_EXT;case exports.GFXFormat.BC2_SRGB:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case exports.GFXFormat.BC3:return ID.COMPRESSED_RGBA_S3TC_DXT5_EXT;case exports.GFXFormat.BC3_SRGB:return ID.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case exports.GFXFormat.ETC_RGB8:return ID.COMPRESSED_RGB_ETC1_WEBGL;case exports.GFXFormat.ETC2_RGB8:return ID.COMPRESSED_RGB8_ETC2;case exports.GFXFormat.ETC2_SRGB8:return ID.COMPRESSED_SRGB8_ETC2;case exports.GFXFormat.ETC2_RGB8_A1:return ID.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2;case exports.GFXFormat.ETC2_SRGB8_A1:return ID.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2;case exports.GFXFormat.ETC2_RGBA8:return ID.COMPRESSED_RGBA8_ETC2_EAC;case exports.GFXFormat.ETC2_SRGB8_A8:return ID.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;case exports.GFXFormat.EAC_R11:return ID.COMPRESSED_R11_EAC;case exports.GFXFormat.EAC_R11SN:return ID.COMPRESSED_SIGNED_R11_EAC;case exports.GFXFormat.EAC_RG11:return ID.COMPRESSED_RG11_EAC;case exports.GFXFormat.EAC_RG11SN:return ID.COMPRESSED_SIGNED_RG11_EAC;case exports.GFXFormat.PVRTC_RGB2:return ID.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;case exports.GFXFormat.PVRTC_RGBA2:return ID.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;case exports.GFXFormat.PVRTC_RGB4:return ID.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;case exports.GFXFormat.PVRTC_RGBA4:return ID.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;default:return console.error("Unsupported GFXFormat, convert to WebGL format failed."),t.RGBA}}function ND(e,t){switch(e){case exports.GFXType.BOOL:return t.BOOL;case exports.GFXType.BOOL2:return t.BOOL_VEC2;case exports.GFXType.BOOL3:return t.BOOL_VEC3;case exports.GFXType.BOOL4:return t.BOOL_VEC4;case exports.GFXType.INT:return t.INT;case exports.GFXType.INT2:return t.INT_VEC2;case exports.GFXType.INT3:return t.INT_VEC3;case exports.GFXType.INT4:return t.INT_VEC4;case exports.GFXType.UINT:return t.UNSIGNED_INT;case exports.GFXType.FLOAT:return t.FLOAT;case exports.GFXType.FLOAT2:return t.FLOAT_VEC2;case exports.GFXType.FLOAT3:return t.FLOAT_VEC3;case exports.GFXType.FLOAT4:return t.FLOAT_VEC4;case exports.GFXType.MAT2:return t.FLOAT_MAT2;case exports.GFXType.MAT3:return t.FLOAT_MAT3;case exports.GFXType.MAT4:return t.FLOAT_MAT4;case exports.GFXType.SAMPLER2D:return t.SAMPLER_2D;case exports.GFXType.SAMPLER_CUBE:return t.SAMPLER_CUBE;default:return console.error("Unsupported GLType, convert to GL type failed."),exports.GFXType.UNKNOWN}}function LD(e,t){switch(e){case t.BOOL:return exports.GFXType.BOOL;case t.BOOL_VEC2:return exports.GFXType.BOOL2;case t.BOOL_VEC3:return exports.GFXType.BOOL3;case t.BOOL_VEC4:return exports.GFXType.BOOL4;case t.INT:return exports.GFXType.INT;case t.INT_VEC2:return exports.GFXType.INT2;case t.INT_VEC3:return exports.GFXType.INT3;case t.INT_VEC4:return exports.GFXType.INT4;case t.UNSIGNED_INT:return exports.GFXType.UINT;case t.FLOAT:return exports.GFXType.FLOAT;case t.FLOAT_VEC2:return exports.GFXType.FLOAT2;case t.FLOAT_VEC3:return exports.GFXType.FLOAT3;case t.FLOAT_VEC4:return exports.GFXType.FLOAT4;case t.FLOAT_MAT2:return exports.GFXType.MAT2;case t.FLOAT_MAT3:return exports.GFXType.MAT3;case t.FLOAT_MAT4:return exports.GFXType.MAT4;case t.SAMPLER_2D:return exports.GFXType.SAMPLER2D;case t.SAMPLER_CUBE:return exports.GFXType.SAMPLER_CUBE;default:return console.error("Unsupported GLType, convert to GFXType failed."),exports.GFXType.UNKNOWN}}function zD(e,t){switch(e){case t.BOOL:return 4;case t.BOOL_VEC2:return 8;case t.BOOL_VEC3:return 12;case t.BOOL_VEC4:return 16;case t.INT:return 4;case t.INT_VEC2:return 8;case t.INT_VEC3:return 12;case t.INT_VEC4:return 16;case t.UNSIGNED_INT:case t.FLOAT:return 4;case t.FLOAT_VEC2:return 8;case t.FLOAT_VEC3:return 12;case t.FLOAT_VEC4:case t.FLOAT_MAT2:return 16;case t.FLOAT_MAT3:return 36;case t.FLOAT_MAT4:return 64;case t.SAMPLER_2D:case t.SAMPLER_CUBE:return 4;default:return console.error("Unsupported GLType, get type failed."),0}}function GD(e,t){switch(e){case t.FLOAT_MAT2:return 2;case t.FLOAT_MAT3:return 3;case t.FLOAT_MAT4:return 4;default:return 1}}!function(e){e[e.RGBA16F_EXT=34842]="RGBA16F_EXT",e[e.RGB16F_EXT=34843]="RGB16F_EXT",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(ID||(ID={}));var UD,XD=[512,513,514,515,516,517,518,519],VD=[0,7680,7681,7682,7683,5386,34055,34056],HD=[32774,32778,32779,32774,32774],jD=[0,1,770,772,771,773,768,774,769,775,776,32769,32770,32771,32772];!function(e){e[e.BEGIN_RENDER_PASS=0]="BEGIN_RENDER_PASS",e[e.END_RENDER_PASS=1]="END_RENDER_PASS",e[e.BIND_STATES=2]="BIND_STATES",e[e.DRAW=3]="DRAW",e[e.UPDATE_BUFFER=4]="UPDATE_BUFFER",e[e.COPY_BUFFER_TO_TEXTURE=5]="COPY_BUFFER_TO_TEXTURE",e[e.COUNT=6]="COUNT"}(UD||(UD={}));var WD=function e(t){Z(this,e),this.cmdType=void 0,this.refCount=0,this.cmdType=t},YD=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,UD.BEGIN_RENDER_PASS))).gpuFramebuffer=null,e.renderArea={x:0,y:0,width:0,height:0},e.clearFlag=exports.GFXClearFlag.NONE,e.clearColors=[],e.clearDepth=1,e.clearStencil=0,e}return ee(t,WD),J(t,[{key:"clear",value:function(){this.gpuFramebuffer=null,this.clearColors.length=0}}]),t}(),qD=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,UD.BIND_STATES))).gpuPipelineState=null,e.gpuBindingLayout=null,e.gpuInputAssembler=null,e.viewport=null,e.scissor=null,e.lineWidth=null,e.depthBias=null,e.blendConstants=null,e.depthBounds=null,e.stencilWriteMask=null,e.stencilCompareMask=null,e}return ee(t,WD),J(t,[{key:"clear",value:function(){this.gpuPipelineState=null,this.gpuBindingLayout=null,this.gpuInputAssembler=null,this.viewport=null,this.scissor=null,this.lineWidth=null,this.depthBias=null,this.blendConstants=null,this.depthBounds=null,this.stencilWriteMask=null,this.stencilCompareMask=null}}]),t}(),QD=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,UD.DRAW))).drawInfo={vertexCount:0,firstVertex:0,indexCount:0,firstIndex:0,vertexOffset:0,instanceCount:0,firstInstance:0},e}return ee(t,WD),J(t,[{key:"clear",value:function(){}}]),t}(),ZD=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,UD.UPDATE_BUFFER))).gpuBuffer=null,e.buffer=null,e.offset=0,e.size=0,e}return ee(t,WD),J(t,[{key:"clear",value:function(){this.gpuBuffer=null,this.buffer=null}}]),t}(),KD=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,UD.COPY_BUFFER_TO_TEXTURE))).gpuBuffer=null,e.gpuTexture=null,e.dstLayout=null,e.regions=[],e}return ee(t,WD),J(t,[{key:"clear",value:function(){this.gpuBuffer=null,this.gpuTexture=null,this.dstLayout=null,this.regions.length=0}}]),t}(),JD=function(){function e(){Z(this,e),this.cmds=new Sa(1),this.beginRenderPassCmds=new Sa(1),this.bindStatesCmds=new Sa(1),this.drawCmds=new Sa(1),this.updateBufferCmds=new Sa(1),this.copyBufferToTextureCmds=new Sa(1)}return J(e,[{key:"clearCmds",value:function(e){this.beginRenderPassCmds.length&&(e.beginRenderPassCmdPool.freeCmds(this.beginRenderPassCmds),this.beginRenderPassCmds.clear()),this.bindStatesCmds.length&&(e.bindStatesCmdPool.freeCmds(this.bindStatesCmds),this.bindStatesCmds.clear()),this.drawCmds.length&&(e.drawCmdPool.freeCmds(this.drawCmds),this.drawCmds.clear()),this.updateBufferCmds.length&&(e.updateBufferCmdPool.freeCmds(this.updateBufferCmds),this.updateBufferCmds.clear()),this.copyBufferToTextureCmds.length&&(e.copyBufferToTextureCmdPool.freeCmds(this.copyBufferToTextureCmds),this.copyBufferToTextureCmds.clear()),this.cmds.clear()}}]),e}();function $D(e,t,i,n,r){if(t.usage&exports.GFXBufferUsageBit.UNIFORM)ArrayBuffer.isView(i)?t.vf32.set(i,n/Float32Array.BYTES_PER_ELEMENT):t.vf32.set(new Float32Array(i),n/Float32Array.BYTES_PER_ELEMENT);else if(t.usage&exports.GFXBufferUsageBit.INDIRECT)t.indirects=i.drawInfos;else{var o=i,a=e.gl,s=e.stateCache;switch(t.glTarget){case a.ARRAY_BUFFER:e.useVAO&&s.glVAO&&(e.OES_vertex_array_object.bindVertexArrayOES(null),s.glVAO=null),e.stateCache.glArrayBuffer!==t.glBuffer&&(a.bindBuffer(a.ARRAY_BUFFER,t.glBuffer),e.stateCache.glArrayBuffer=t.glBuffer);break;case a.ELEMENT_ARRAY_BUFFER:e.useVAO&&s.glVAO&&(e.OES_vertex_array_object.bindVertexArrayOES(null),s.glVAO=null),e.stateCache.glElementArrayBuffer!==t.glBuffer&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t.glBuffer),e.stateCache.glElementArrayBuffer=t.glBuffer);break;default:return void console.error("Unsupported GFXBufferType, update buffer failed.")}r===o.byteLength?a.bufferSubData(t.glTarget,n,o):a.bufferSubData(t.glTarget,n,o.slice(0,r))}}var eB={gpuInputAssembler:null,gpuShader:null,glPrimitive:0};function tB(e,t,i,n,r,o,a){eB.gpuInputAssembler=null,eB.gpuShader=null;var s=e.gl,l=e.stateCache,c=0;if(t){l.glFramebuffer!==t.glFramebuffer&&(s.bindFramebuffer(s.FRAMEBUFFER,t.glFramebuffer),l.glFramebuffer=t.glFramebuffer),l.viewport.left===i.x&&l.viewport.top===i.y&&l.viewport.width===i.width&&l.viewport.height===i.height||(s.viewport(i.x,i.y,i.width,i.height),l.viewport.left=i.x,l.viewport.top=i.y,l.viewport.width=i.width,l.viewport.height=i.height),l.scissorRect.x===i.x&&l.scissorRect.y===i.y&&l.scissorRect.width===i.width&&l.scissorRect.height===i.height||(s.scissor(i.x,i.y,i.width,i.height),l.scissorRect.x=i.x,l.scissorRect.y=i.y,l.scissorRect.width=i.width,l.scissorRect.height=i.height);var u=t.gpuRenderPass,h=r.length;e.WEBGL_draw_buffers||(h=1);for(var p=0;p<h;++p){var f=u.colorAttachments[p];if(f.format!==exports.GFXFormat.UNKNOWN)switch(f.loadOp){case exports.GFXLoadOp.LOAD:break;case exports.GFXLoadOp.CLEAR:if(n&exports.GFXClearFlag.COLOR){l.bs.targets[0].blendColorMask!==exports.GFXColorMask.ALL&&s.colorMask(!0,!0,!0,!0);var _=r[0];s.clearColor(_.r,_.g,_.b,_.a),c|=s.COLOR_BUFFER_BIT}break;case exports.GFXLoadOp.DISCARD:}}if(u.depthStencilAttachment&&u.depthStencilAttachment.format!==exports.GFXFormat.UNKNOWN){switch(u.depthStencilAttachment.depthLoadOp){case exports.GFXLoadOp.LOAD:break;case exports.GFXLoadOp.CLEAR:n&exports.GFXClearFlag.DEPTH&&(l.dss.depthWrite||s.depthMask(!0),s.clearDepth(o),c|=s.DEPTH_BUFFER_BIT);break;case exports.GFXLoadOp.DISCARD:}if(yr[u.depthStencilAttachment.format].hasStencil)switch(u.depthStencilAttachment.stencilLoadOp){case exports.GFXLoadOp.LOAD:break;case exports.GFXLoadOp.CLEAR:n&exports.GFXClearFlag.STENCIL&&(l.dss.stencilWriteMaskFront||s.stencilMaskSeparate(s.FRONT,65535),l.dss.stencilWriteMaskBack||s.stencilMaskSeparate(s.BACK,65535),s.clearStencil(a),c|=s.STENCIL_BUFFER_BIT);break;case exports.GFXLoadOp.DISCARD:}}if(c&&s.clear(c),c&s.COLOR_BUFFER_BIT){var d=l.bs.targets[0].blendColorMask;if(d!==exports.GFXColorMask.ALL){var m=(d&exports.GFXColorMask.R)!==exports.GFXColorMask.NONE,v=(d&exports.GFXColorMask.G)!==exports.GFXColorMask.NONE,y=(d&exports.GFXColorMask.B)!==exports.GFXColorMask.NONE,g=(d&exports.GFXColorMask.A)!==exports.GFXColorMask.NONE;s.colorMask(m,v,y,g)}}c&s.DEPTH_BUFFER_BIT&&!l.dss.depthWrite&&s.depthMask(!1),c&s.STENCIL_BUFFER_BIT&&(l.dss.stencilWriteMaskFront||s.stencilMaskSeparate(s.FRONT,0),l.dss.stencilWriteMaskBack||s.stencilMaskSeparate(s.BACK,0))}}function iB(e,t,i,n,r,o,a,s,l,c,u,p){var f,_,d,m=e.gl,v=e.stateCache,y=!1,g=null;if(t){if(eB.glPrimitive=t.glPrimitive,t.gpuShader){var A=t.gpuShader.glProgram;v.glProgram!==A&&(m.useProgram(A),v.glProgram=A,y=!0),eB.gpuShader=g=t.gpuShader}var b=t.rs;if(b){if(v.rs.cullMode!==b.cullMode){switch(b.cullMode){case exports.GFXCullMode.NONE:m.disable(m.CULL_FACE);break;case exports.GFXCullMode.FRONT:m.enable(m.CULL_FACE),m.cullFace(m.FRONT);break;case exports.GFXCullMode.BACK:m.enable(m.CULL_FACE),m.cullFace(m.BACK)}v.rs.cullMode=b.cullMode}var x=e.reverseCW?!b.isFrontFaceCCW:b.isFrontFaceCCW;v.rs.isFrontFaceCCW!==x&&(m.frontFace(x?m.CCW:m.CW),v.rs.isFrontFaceCCW=x),v.rs.depthBias===b.depthBias&&v.rs.depthBiasSlop===b.depthBiasSlop||(m.polygonOffset(b.depthBias,b.depthBiasSlop),v.rs.depthBias=b.depthBias,v.rs.depthBiasSlop=b.depthBiasSlop),v.rs.lineWidth!==b.lineWidth&&(m.lineWidth(b.lineWidth),v.rs.lineWidth=b.lineWidth)}var T=t.dss;T&&(v.dss.depthTest!==T.depthTest&&(T.depthTest?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),v.dss.depthTest=T.depthTest),v.dss.depthWrite!==T.depthWrite&&(m.depthMask(T.depthWrite),v.dss.depthWrite=T.depthWrite),v.dss.depthFunc!==T.depthFunc&&(m.depthFunc(XD[T.depthFunc]),v.dss.depthFunc=T.depthFunc),v.dss.stencilTestFront===T.stencilTestFront&&v.dss.stencilTestBack===T.stencilTestBack||(T.stencilTestFront||T.stencilTestBack?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),v.dss.stencilTestFront=T.stencilTestFront,v.dss.stencilTestBack=T.stencilTestBack),v.dss.stencilFuncFront===T.stencilFuncFront&&v.dss.stencilRefFront===T.stencilRefFront&&v.dss.stencilReadMaskFront===T.stencilReadMaskFront||(m.stencilFuncSeparate(m.FRONT,XD[T.stencilFuncFront],T.stencilRefFront,T.stencilReadMaskFront),v.dss.stencilFuncFront=T.stencilFuncFront,v.dss.stencilRefFront=T.stencilRefFront,v.dss.stencilReadMaskFront=T.stencilReadMaskFront),v.dss.stencilFailOpFront===T.stencilFailOpFront&&v.dss.stencilZFailOpFront===T.stencilZFailOpFront&&v.dss.stencilPassOpFront===T.stencilPassOpFront||(m.stencilOpSeparate(m.FRONT,VD[T.stencilFailOpFront],VD[T.stencilZFailOpFront],VD[T.stencilPassOpFront]),v.dss.stencilFailOpFront=T.stencilFailOpFront,v.dss.stencilZFailOpFront=T.stencilZFailOpFront,v.dss.stencilPassOpFront=T.stencilPassOpFront),v.dss.stencilWriteMaskFront!==T.stencilWriteMaskFront&&(m.stencilMaskSeparate(m.FRONT,T.stencilWriteMaskFront),v.dss.stencilWriteMaskFront=T.stencilWriteMaskFront),v.dss.stencilFuncBack===T.stencilFuncBack&&v.dss.stencilRefBack===T.stencilRefBack&&v.dss.stencilReadMaskBack===T.stencilReadMaskBack||(m.stencilFuncSeparate(m.BACK,XD[T.stencilFuncBack],T.stencilRefBack,T.stencilReadMaskBack),v.dss.stencilFuncBack=T.stencilFuncBack,v.dss.stencilRefBack=T.stencilRefBack,v.dss.stencilReadMaskBack=T.stencilReadMaskBack),v.dss.stencilFailOpBack===T.stencilFailOpBack&&v.dss.stencilZFailOpBack===T.stencilZFailOpBack&&v.dss.stencilPassOpBack===T.stencilPassOpBack||(m.stencilOpSeparate(m.BACK,VD[T.stencilFailOpBack],VD[T.stencilZFailOpBack],VD[T.stencilPassOpBack]),v.dss.stencilFailOpBack=T.stencilFailOpBack,v.dss.stencilZFailOpBack=T.stencilZFailOpBack,v.dss.stencilPassOpBack=T.stencilPassOpBack),v.dss.stencilWriteMaskBack!==T.stencilWriteMaskBack&&(m.stencilMaskSeparate(m.BACK,T.stencilWriteMaskBack),v.dss.stencilWriteMaskBack=T.stencilWriteMaskBack));var S=t.bs;if(S){v.bs.isA2C!==S.isA2C&&(S.isA2C?m.enable(m.SAMPLE_ALPHA_TO_COVERAGE):m.disable(m.SAMPLE_ALPHA_TO_COVERAGE),v.bs.isA2C=S.isA2C),v.bs.blendColor[0]===S.blendColor[0]&&v.bs.blendColor[1]===S.blendColor[1]&&v.bs.blendColor[2]===S.blendColor[2]&&v.bs.blendColor[3]===S.blendColor[3]||(m.blendColor(S.blendColor[0],S.blendColor[1],S.blendColor[2],S.blendColor[3]),v.bs.blendColor[0]=S.blendColor[0],v.bs.blendColor[1]=S.blendColor[1],v.bs.blendColor[2]=S.blendColor[2],v.bs.blendColor[3]=S.blendColor[3]);var E=S.targets[0],C=v.bs.targets[0];C.blend!==E.blend&&(E.blend?m.enable(m.BLEND):m.disable(m.BLEND),C.blend=E.blend),C.blendEq===E.blendEq&&C.blendAlphaEq===E.blendAlphaEq||(m.blendEquationSeparate(HD[E.blendEq],HD[E.blendAlphaEq]),C.blendEq=E.blendEq,C.blendAlphaEq=E.blendAlphaEq),C.blendSrc===E.blendSrc&&C.blendDst===E.blendDst&&C.blendSrcAlpha===E.blendSrcAlpha&&C.blendDstAlpha===E.blendDstAlpha||(m.blendFuncSeparate(jD[E.blendSrc],jD[E.blendDst],jD[E.blendSrcAlpha],jD[E.blendDstAlpha]),C.blendSrc=E.blendSrc,C.blendDst=E.blendDst,C.blendSrcAlpha=E.blendSrcAlpha,C.blendDstAlpha=E.blendDstAlpha),C.blendColorMask!==E.blendColorMask&&(m.colorMask((E.blendColorMask&exports.GFXColorMask.R)!==exports.GFXColorMask.NONE,(E.blendColorMask&exports.GFXColorMask.G)!==exports.GFXColorMask.NONE,(E.blendColorMask&exports.GFXColorMask.B)!==exports.GFXColorMask.NONE,(E.blendColorMask&exports.GFXColorMask.A)!==exports.GFXColorMask.NONE),C.blendColorMask=E.blendColorMask)}}if(i&&g)for(var w=i.gpuBindings.length,k=0;k<w;k++){var O=i.gpuBindings[k];switch(O.type){case exports.GFXBindingType.UNIFORM_BUFFER:if(O.gpuBuffer&&O.gpuBuffer.buffer){for(var R=null,F=g.glBlocks.length,I=0;I<F;I++){var M=g.glBlocks[I];if(M.binding===O.binding){R=M;break}}if(R&&O.gpuBuffer.vf32)for(var P=R.glActiveUniforms.length,D=0;D<P;D++){var B=R.glActiveUniforms[D];switch(B.glType){case m.BOOL:case m.INT:for(var N=0;N<B.array.length;++N){var L=B.begin+N;if(O.gpuBuffer.vf32[L]!==B.array[N]){for(var z=N,G=B.begin+N;z<B.array.length;++z,++G)B.array[z]=O.gpuBuffer.vf32[G];m.uniform1iv(B.glLoc,B.array);break}}break;case m.BOOL_VEC2:case m.INT_VEC2:for(var U=0;U<B.array.length;++U){var X=B.begin+U;if(O.gpuBuffer.vf32[X]!==B.array[U]){for(var V=U,H=B.begin+U;V<B.array.length;++V,++H)B.array[V]=O.gpuBuffer.vf32[H];m.uniform2iv(B.glLoc,B.array);break}}break;case m.BOOL_VEC3:case m.INT_VEC3:for(var j=0;j<B.array.length;++j){var W=B.begin+j;if(O.gpuBuffer.vf32[W]!==B.array[j]){for(var Y=j,q=B.begin+j;Y<B.array.length;++Y,++q)B.array[Y]=O.gpuBuffer.vf32[q];m.uniform3iv(B.glLoc,B.array);break}}break;case m.BOOL_VEC4:case m.INT_VEC4:for(var Q=0;Q<B.array.length;++Q){var Z=B.begin+Q;if(O.gpuBuffer.vf32[Z]!==B.array[Q]){for(var K=Q,J=B.begin+Q;K<B.array.length;++K,++J)B.array[K]=O.gpuBuffer.vf32[J];m.uniform4iv(B.glLoc,B.array);break}}break;case m.FLOAT:for(var $=0;$<B.array.length;++$){var ee=B.begin+$;if(O.gpuBuffer.vf32[ee]!==B.array[$]){for(var te=$,ie=B.begin+$;te<B.array.length;++te,++ie)B.array[te]=O.gpuBuffer.vf32[ie];m.uniform1fv(B.glLoc,B.array);break}}break;case m.FLOAT_VEC2:for(var ne=0;ne<B.array.length;++ne){var re=B.begin+ne;if(O.gpuBuffer.vf32[re]!==B.array[ne]){for(var oe=ne,ae=B.begin+ne;oe<B.array.length;++oe,++ae)B.array[oe]=O.gpuBuffer.vf32[ae];m.uniform2fv(B.glLoc,B.array);break}}break;case m.FLOAT_VEC3:for(var se=0;se<B.array.length;++se){var le=B.begin+se;if(O.gpuBuffer.vf32[le]!==B.array[se]){for(var ce=se,ue=B.begin+se;ce<B.array.length;++ce,++ue)B.array[ce]=O.gpuBuffer.vf32[ue];m.uniform3fv(B.glLoc,B.array);break}}break;case m.FLOAT_VEC4:for(var he=0;he<B.array.length;++he){var pe=B.begin+he;if(O.gpuBuffer.vf32[pe]!==B.array[he]){for(var fe=he,_e=B.begin+he;fe<B.array.length;++fe,++_e)B.array[fe]=O.gpuBuffer.vf32[_e];m.uniform4fv(B.glLoc,B.array);break}}break;case m.FLOAT_MAT2:for(var de=0;de<B.array.length;++de){var me=B.begin+de;if(O.gpuBuffer.vf32[me]!==B.array[de]){for(var ve=de,ye=B.begin+de;ve<B.array.length;++ve,++ye)B.array[ve]=O.gpuBuffer.vf32[ye];m.uniformMatrix2fv(B.glLoc,!1,B.array);break}}break;case m.FLOAT_MAT3:for(var ge=0;ge<B.array.length;++ge){var Ae=B.begin+ge;if(O.gpuBuffer.vf32[Ae]!==B.array[ge]){for(var be=ge,xe=B.begin+ge;be<B.array.length;++be,++xe)B.array[be]=O.gpuBuffer.vf32[xe];m.uniformMatrix3fv(B.glLoc,!1,B.array);break}}break;case m.FLOAT_MAT4:for(var Te=0;Te<B.array.length;++Te){var Se=B.begin+Te;if(O.gpuBuffer.vf32[Se]!==B.array[Te]){for(var Ee=Te,Ce=B.begin+Te;Ee<B.array.length;++Ee,++Ce)B.array[Ee]=O.gpuBuffer.vf32[Ce];m.uniformMatrix4fv(B.glLoc,!1,B.array);break}}}}}break;case exports.GFXBindingType.SAMPLER:if(O.gpuSampler){for(var we=null,ke=g.glSamplers.length,Oe=0;Oe<ke;Oe++){var Re=g.glSamplers[Oe];if(Re.binding===O.binding){we=Re;break}}if(we)for(var Fe=we.units.length,Ie=0;Ie<Fe;Ie++){var Me=we.units[Ie];if(O.gpuTexView&&O.gpuTexView.gpuTexture.size>0){var Pe=O.gpuTexView.gpuTexture,De=v.glTexUnits[Me];De.glTexture!==Pe.glTexture&&(v.texUnit!==Me&&(m.activeTexture(m.TEXTURE0+Me),v.texUnit=Me),Pe.glTexture?m.bindTexture(Pe.glTarget,Pe.glTexture):m.bindTexture(Pe.glTarget,e.nullTex2D.gpuTexture.glTexture),De.glTexture=Pe.glTexture);var Be=O.gpuSampler;Pe.isPowerOf2?(f=Be.glWrapS,_=Be.glWrapT):(f=m.CLAMP_TO_EDGE,_=m.CLAMP_TO_EDGE),d=Pe.isPowerOf2?Pe.mipLevel<=1&&(Be.glMinFilter===m.LINEAR_MIPMAP_NEAREST||Be.glMinFilter===m.LINEAR_MIPMAP_LINEAR)?m.LINEAR:Be.glMinFilter:Be.glMinFilter===m.LINEAR||Be.glMinFilter===m.LINEAR_MIPMAP_NEAREST||Be.glMinFilter===m.LINEAR_MIPMAP_LINEAR?m.LINEAR:m.NEAREST,Pe.glWrapS!==f&&(v.texUnit!==Me&&(m.activeTexture(m.TEXTURE0+Me),v.texUnit=Me),m.texParameteri(Pe.glTarget,m.TEXTURE_WRAP_S,f),Pe.glWrapS=f),Pe.glWrapT!==_&&(v.texUnit!==Me&&(m.activeTexture(m.TEXTURE0+Me),v.texUnit=Me),m.texParameteri(Pe.glTarget,m.TEXTURE_WRAP_T,_),Pe.glWrapT=_),Pe.glMinFilter!==d&&(v.texUnit!==Me&&(m.activeTexture(m.TEXTURE0+Me),v.texUnit=Me),m.texParameteri(Pe.glTarget,m.TEXTURE_MIN_FILTER,d),Pe.glMinFilter=d),Pe.glMagFilter!==Be.glMagFilter&&(v.texUnit!==Me&&(m.activeTexture(m.TEXTURE0+Me),v.texUnit=Me),m.texParameteri(Pe.glTarget,m.TEXTURE_MAG_FILTER,Be.glMagFilter),Pe.glMagFilter=Be.glMagFilter)}}}else h("Not found sampler on binding unit ".concat(O.binding,", name ").concat(O.name))}}if(n&&g&&(y||eB.gpuInputAssembler!==n)){eB.gpuInputAssembler=n;var Ne=e.ANGLE_instanced_arrays;if(e.useVAO){var Le=e.OES_vertex_array_object,ze=n.glVAOs.get(g.glProgram);if(!ze){var Ge;ze=Le.createVertexArrayOES(),n.glVAOs.set(g.glProgram,ze),Le.bindVertexArrayOES(ze),m.bindBuffer(m.ARRAY_BUFFER,null),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);for(var Ue=g.glInputs.length,Xe=0;Xe<Ue;Xe++){var Ve=g.glInputs[Xe];Ge=null;for(var He=n.glAttribs.length,je=0;je<He;je++){var We=n.glAttribs[je];if(We.name===Ve.name){Ge=We;break}}if(Ge){m.bindBuffer(m.ARRAY_BUFFER,Ge.glBuffer);for(var Ye=0;Ye<Ge.componentCount;++Ye){var qe=Ve.glLoc+Ye,Qe=Ge.offset+Ge.size*Ye;m.enableVertexAttribArray(qe),v.glCurrentAttribLocs[qe]=!0,m.vertexAttribPointer(qe,Ge.count,Ge.glType,Ge.isNormalized,Ge.stride,Qe),Ne&&Ne.vertexAttribDivisorANGLE(qe,Ge.isInstanced?1:0)}}}var Ze=n.gpuIndexBuffer;Ze&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Ze.glBuffer),Le.bindVertexArrayOES(null),m.bindBuffer(m.ARRAY_BUFFER,null),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null),v.glArrayBuffer=null,v.glElementArrayBuffer=null}v.glVAO!==ze&&(Le.bindVertexArrayOES(ze),v.glVAO=ze)}else{for(var Ke=0;Ke<e.maxVertexAttributes;++Ke)v.glCurrentAttribLocs[Ke]=!1;for(var Je=g.glInputs.length,$e=0;$e<Je;$e++){for(var et=g.glInputs[$e],tt=null,it=n.glAttribs.length,nt=0;nt<it;nt++){var rt=n.glAttribs[nt];if(rt.name===et.name){tt=rt;break}}if(tt){v.glArrayBuffer!==tt.glBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,tt.glBuffer),v.glArrayBuffer=tt.glBuffer);for(var ot=0;ot<tt.componentCount;++ot){var at=et.glLoc+ot,st=tt.offset+tt.size*ot;!v.glEnabledAttribLocs[at]&&at>=0&&(m.enableVertexAttribArray(at),v.glEnabledAttribLocs[at]=!0),v.glCurrentAttribLocs[at]=!0,m.vertexAttribPointer(at,tt.count,tt.glType,tt.isNormalized,tt.stride,st),Ne&&Ne.vertexAttribDivisorANGLE(at,tt.isInstanced?1:0)}}}var lt=n.gpuIndexBuffer;lt&&v.glElementArrayBuffer!==lt.glBuffer&&(m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,lt.glBuffer),v.glElementArrayBuffer=lt.glBuffer);for(var ct=0;ct<e.maxVertexAttributes;++ct)v.glEnabledAttribLocs[ct]!==v.glCurrentAttribLocs[ct]&&(m.disableVertexAttribArray(ct),v.glEnabledAttribLocs[ct]=!1)}}if(t)for(var ut=t.dynamicStates.length,ht=0;ht<ut;ht++){switch(t.dynamicStates[ht]){case exports.GFXDynamicState.VIEWPORT:r&&(v.viewport.left===r.left&&v.viewport.top===r.top&&v.viewport.width===r.width&&v.viewport.height===r.height||(m.viewport(r.left,r.top,r.width,r.height),v.viewport.left=r.left,v.viewport.top=r.top,v.viewport.width=r.width,v.viewport.height=r.height));break;case exports.GFXDynamicState.SCISSOR:o&&(v.scissorRect.x===o.x&&v.scissorRect.y===o.y&&v.scissorRect.width===o.width&&v.scissorRect.height===o.height||(m.scissor(o.x,o.y,o.width,o.height),v.scissorRect.x=o.x,v.scissorRect.y=o.y,v.scissorRect.width=o.width,v.scissorRect.height=o.height));break;case exports.GFXDynamicState.LINE_WIDTH:a&&v.rs.lineWidth!==a&&(m.lineWidth(a),v.rs.lineWidth=a);break;case exports.GFXDynamicState.DEPTH_BIAS:s&&(v.rs.depthBias===s.constantFactor&&v.rs.depthBiasSlop===s.slopeFactor||(m.polygonOffset(s.constantFactor,s.slopeFactor),v.rs.depthBias=s.constantFactor,v.rs.depthBiasSlop=s.slopeFactor));break;case exports.GFXDynamicState.BLEND_CONSTANTS:l&&(v.bs.blendColor[0]===l[0]&&v.bs.blendColor[1]===l[1]&&v.bs.blendColor[2]===l[2]&&v.bs.blendColor[3]===l[3]||(m.blendColor(l[0],l[1],l[2],l[3]),v.bs.blendColor[0]=l[0],v.bs.blendColor[1]=l[1],v.bs.blendColor[2]=l[2],v.bs.blendColor[3]=l[3]));break;case exports.GFXDynamicState.STENCIL_WRITE_MASK:if(u)switch(u.face){case exports.GFXStencilFace.FRONT:v.dss.stencilWriteMaskFront!==u.writeMask&&(m.stencilMaskSeparate(m.FRONT,u.writeMask),v.dss.stencilWriteMaskFront=u.writeMask);break;case exports.GFXStencilFace.BACK:v.dss.stencilWriteMaskBack!==u.writeMask&&(m.stencilMaskSeparate(m.BACK,u.writeMask),v.dss.stencilWriteMaskBack=u.writeMask);break;case exports.GFXStencilFace.ALL:v.dss.stencilWriteMaskFront===u.writeMask&&v.dss.stencilWriteMaskBack===u.writeMask||(m.stencilMask(u.writeMask),v.dss.stencilWriteMaskFront=u.writeMask,v.dss.stencilWriteMaskBack=u.writeMask)}break;case exports.GFXDynamicState.STENCIL_COMPARE_MASK:if(p)switch(p.face){case exports.GFXStencilFace.FRONT:v.dss.stencilRefFront===p.reference&&v.dss.stencilReadMaskFront===p.compareMask||(m.stencilFuncSeparate(m.FRONT,XD[v.dss.stencilFuncFront],p.reference,p.compareMask),v.dss.stencilRefFront=p.reference,v.dss.stencilReadMaskFront=p.compareMask);break;case exports.GFXStencilFace.BACK:v.dss.stencilRefBack===p.reference&&v.dss.stencilReadMaskBack===p.compareMask||(m.stencilFuncSeparate(m.BACK,XD[v.dss.stencilFuncBack],p.reference,p.compareMask),v.dss.stencilRefBack=p.reference,v.dss.stencilReadMaskBack=p.compareMask);break;case exports.GFXStencilFace.ALL:v.dss.stencilRefFront===p.reference&&v.dss.stencilReadMaskFront===p.compareMask&&v.dss.stencilRefBack===p.reference&&v.dss.stencilReadMaskBack===p.compareMask||(m.stencilFunc(XD[v.dss.stencilFuncBack],p.reference,p.compareMask),v.dss.stencilRefFront=p.reference,v.dss.stencilReadMaskFront=p.compareMask,v.dss.stencilRefBack=p.reference,v.dss.stencilReadMaskBack=p.compareMask)}}}}function nB(e,t){var i=e.gl,n=e.ANGLE_instanced_arrays,r=eB.gpuInputAssembler,o=eB.gpuShader,a=eB.glPrimitive;if(r&&o)if(r.gpuIndirectBuffer)for(var s=r.gpuIndirectBuffer.indirects.length,l=0;l<s;l++){var c=r.gpuIndirectBuffer.indirects[l],u=r.gpuIndexBuffer;if(c.instanceCount&&n)if(u&&c.indexCount>-1){var h=c.firstIndex*u.stride;n.drawElementsInstancedANGLE(a,c.indexCount,r.glIndexType,h,c.instanceCount)}else n.drawArraysInstancedANGLE(a,c.firstVertex,c.vertexCount,c.instanceCount);else if(u&&c.indexCount>-1){var p=c.firstIndex*u.stride;i.drawElements(a,c.indexCount,r.glIndexType,p)}else i.drawArrays(a,c.firstVertex,c.vertexCount)}else{var f=r.gpuIndexBuffer;if(t.instanceCount&&n)if(f&&t.indexCount>-1){var _=t.firstIndex*f.stride;n.drawElementsInstancedANGLE(a,t.indexCount,r.glIndexType,_,t.instanceCount)}else n.drawArraysInstancedANGLE(a,t.firstVertex,t.vertexCount,t.instanceCount);else if(f&&t.indexCount>-1){var d=t.firstIndex*f.stride;i.drawElements(a,t.indexCount,r.glIndexType,d)}else i.drawArrays(a,t.firstVertex,t.vertexCount)}}var rB=new Array(UD.COUNT);function oB(e,t){rB.fill(0);for(var i=0;i<t.cmds.length;++i){var n=t.cmds.array[i],r=rB[n]++;switch(n){case UD.BEGIN_RENDER_PASS:var o=t.beginRenderPassCmds.array[r];tB(e,o.gpuFramebuffer,o.renderArea,o.clearFlag,o.clearColors,o.clearDepth,o.clearStencil);break;case UD.BIND_STATES:var a=t.bindStatesCmds.array[r];iB(e,a.gpuPipelineState,a.gpuBindingLayout,a.gpuInputAssembler,a.viewport,a.scissor,a.lineWidth,a.depthBias,a.blendConstants,a.depthBounds,a.stencilWriteMask,a.stencilCompareMask);break;case UD.DRAW:nB(e,t.drawCmds.array[r].drawInfo);break;case UD.UPDATE_BUFFER:var s=t.updateBufferCmds.array[r];$D(e,s.gpuBuffer,s.buffer,s.offset,s.size);break;case UD.COPY_BUFFER_TO_TEXTURE:var l=t.copyBufferToTextureCmds.array[r];aB(e,[l.gpuBuffer.buffer],l.gpuTexture,l.regions)}}}function aB(e,t,i,n){var r=e.gl,o=e.stateCache.glTexUnits[e.stateCache.texUnit];o.glTexture!==i.glTexture&&(r.bindTexture(i.glTarget,i.glTexture),o.glTexture=i.glTexture);var a=0,s=0,l=1,c=1,u=0,h=yr[i.format].isCompressed;switch(i.glTarget){case r.TEXTURE_2D:for(var p=0;p<n.length;p++){var f=n[p];for(l=f.texExtent.width,c=f.texExtent.height,a=f.texSubres.baseMipLevel;a<f.texSubres.levelCount;++a){var _=t[s++];h?(i.glInternelFmt,ID.COMPRESSED_RGB_ETC1_WEBGL,r.compressedTexImage2D(r.TEXTURE_2D,a,i.glInternelFmt,l,c,0,_)):r.texSubImage2D(r.TEXTURE_2D,a,f.texOffset.x,f.texOffset.y,l,c,i.glFormat,i.glType,_),l=Math.max(1,l>>1),c=Math.max(1,l>>1)}}break;case r.TEXTURE_CUBE_MAP:for(var d=0;d<n.length;d++){var m=n[d],v=m.texSubres.baseArrayLayer+m.texSubres.layerCount;for(u=m.texSubres.baseArrayLayer;u<v;++u){l=m.texExtent.width,c=m.texExtent.height;var y=m.texSubres.baseMipLevel+m.texSubres.levelCount;for(a=m.texSubres.baseMipLevel;a<y;++a){var g=t[s++];h?(i.glInternelFmt,ID.COMPRESSED_RGB_ETC1_WEBGL,r.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+u,a,i.glInternelFmt,l,c,0,g)):r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+u,a,m.texOffset.x,m.texOffset.y,l,c,i.glFormat,i.glType,g),l=Math.max(1,l>>1),c=Math.max(1,l>>1)}}}break;default:console.error("Unsupported GL texture type, copy buffer to texture failed.")}i.flags&exports.GFXTextureFlagBit.GEN_MIPMAP&&r.generateMipmap(i.glTarget)}var sB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuBuffer=null,i._uniformBuffer=null,i}return ee(t,wr),J(t,[{key:"initialize",value:function(e){return this._usage=e.usage,this._memUsage=e.memUsage,this._size=e.size,this._stride=Math.max(e.stride||this._size,1),this._count=this._size/this._stride,this._flags=void 0!==e.flags?e.flags:exports.GFXBufferFlagBit.NONE,this._usage&exports.GFXBufferUsageBit.INDIRECT&&(this._indirectBuffer={drawInfos:[]}),this._flags&exports.GFXBufferFlagBit.BAKUP_BUFFER&&(this._bufferView=new Uint8Array(this._size),this._device.memoryStatus.bufferSize+=this._size),this._usage&exports.GFXBufferUsageBit.UNIFORM&&this._size>0&&(this._uniformBuffer=new Uint8Array(this._size)),this._gpuBuffer={usage:e.usage,memUsage:e.memUsage,size:e.size,stride:this._stride,buffer:this._bufferView,vf32:null,indirects:[],glTarget:0,glBuffer:null},e.usage&exports.GFXBufferUsageBit.INDIRECT&&(this._gpuBuffer.indirects=this._indirectBuffer.drawInfos),this._usage&exports.GFXBufferUsageBit.UNIFORM&&(this._gpuBuffer.buffer=this._uniformBuffer),function(e,t){var i=e.gl,n=e.stateCache,r=t.memUsage&exports.GFXMemoryUsageBit.HOST?i.DYNAMIC_DRAW:i.STATIC_DRAW;if(t.usage&exports.GFXBufferUsageBit.VERTEX){t.glTarget=i.ARRAY_BUFFER;var o=i.createBuffer();o&&(t.glBuffer=o,t.size>0&&(e.useVAO&&n.glVAO&&(e.OES_vertex_array_object.bindVertexArrayOES(null),n.glVAO=null),e.stateCache.glArrayBuffer!==t.glBuffer&&(i.bindBuffer(i.ARRAY_BUFFER,t.glBuffer),e.stateCache.glArrayBuffer=t.glBuffer),i.bufferData(i.ARRAY_BUFFER,t.size,r),i.bindBuffer(i.ARRAY_BUFFER,null),e.stateCache.glArrayBuffer=null))}else if(t.usage&exports.GFXBufferUsageBit.INDEX){t.glTarget=i.ELEMENT_ARRAY_BUFFER;var a=i.createBuffer();a&&(t.glBuffer=a,t.size>0&&(e.useVAO&&n.glVAO&&(e.OES_vertex_array_object.bindVertexArrayOES(null),n.glVAO=null),e.stateCache.glElementArrayBuffer!==t.glBuffer&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.glBuffer),e.stateCache.glElementArrayBuffer=t.glBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.size,r),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),e.stateCache.glElementArrayBuffer=null))}else t.usage&exports.GFXBufferUsageBit.UNIFORM?(t.glTarget=i.NONE,t.buffer&&(t.vf32=new Float32Array(t.buffer.buffer))):(t.usage&exports.GFXBufferUsageBit.INDIRECT||t.usage&exports.GFXBufferUsageBit.TRANSFER_DST||t.usage&exports.GFXBufferUsageBit.TRANSFER_SRC||console.error("Unsupported GFXBufferType, create buffer failed."),t.glTarget=i.NONE)}(this._device,this._gpuBuffer),this._device.memoryStatus.bufferSize+=this._size,this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){var e,t;this._gpuBuffer&&(e=this._device,(t=this._gpuBuffer).glBuffer&&(e.gl.deleteBuffer(t.glBuffer),t.glBuffer=null),this._device.memoryStatus.bufferSize-=this._size,this._gpuBuffer=null),this._bufferView=null,this._status=exports.GFXStatus.UNREADY}},{key:"resize",value:function(e){var t=this._size;if(t!==e){if(this._size=e,this._count=this._size/this._stride,this._bufferView){var i=this._bufferView;this._bufferView=new Uint8Array(this._size),this._bufferView.set(i),this._device.memoryStatus.bufferSize-=t,this._device.memoryStatus.bufferSize+=e}var n,r,o,a,s;this._uniformBuffer&&(this._uniformBuffer=new Uint8Array(e)),this._gpuBuffer&&(this._uniformBuffer?this._gpuBuffer.buffer=this._uniformBuffer:this._bufferView&&(this._gpuBuffer.buffer=this._bufferView),this._gpuBuffer.size=e,e>0&&(n=this._device,r=this._gpuBuffer,o=n.gl,a=n.stateCache,s=r.memUsage&exports.GFXMemoryUsageBit.HOST?o.DYNAMIC_DRAW:o.STATIC_DRAW,r.usage&exports.GFXBufferUsageBit.VERTEX?(n.useVAO&&a.glVAO&&(n.OES_vertex_array_object.bindVertexArrayOES(null),a.glVAO=null),n.stateCache.glArrayBuffer!==r.glBuffer&&o.bindBuffer(o.ARRAY_BUFFER,r.glBuffer),r.buffer?o.bufferData(o.ARRAY_BUFFER,r.buffer,s):o.bufferData(o.ARRAY_BUFFER,r.size,s),o.bindBuffer(o.ARRAY_BUFFER,null),n.stateCache.glArrayBuffer=null):r.usage&exports.GFXBufferUsageBit.INDEX?(n.useVAO&&a.glVAO&&(n.OES_vertex_array_object.bindVertexArrayOES(null),a.glVAO=null),n.stateCache.glElementArrayBuffer!==r.glBuffer&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r.glBuffer),r.buffer?o.bufferData(o.ELEMENT_ARRAY_BUFFER,r.buffer,s):o.bufferData(o.ELEMENT_ARRAY_BUFFER,r.size,s),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),n.stateCache.glElementArrayBuffer=null):r.usage&exports.GFXBufferUsageBit.UNIFORM?r.buffer&&(r.vf32=new Float32Array(r.buffer.buffer)):(r.usage&exports.GFXBufferUsageBit.INDIRECT||r.usage&exports.GFXBufferUsageBit.TRANSFER_DST||r.usage&exports.GFXBufferUsageBit.TRANSFER_SRC||console.error("Unsupported GFXBufferType, create buffer failed."),r.glTarget=o.NONE),this._device.memoryStatus.bufferSize-=t,this._device.memoryStatus.bufferSize+=e))}}},{key:"update",value:function(e,t,i){var n;if(n=void 0!==i?i:this._usage&exports.GFXBufferUsageBit.INDIRECT?0:e.byteLength,this._bufferView&&e!==this._bufferView.buffer){var r=new Uint8Array(e,0,i);this._bufferView.set(r,t)}$D(this._device,this._gpuBuffer,e,t||0,n)}},{key:"gpuBuffer",get:function(){return this._gpuBuffer}}]),t}(),lB=function(){function e(t,i){Z(this,e),this._frees=void 0,this._freeIdx=0,this._freeCmds=void 0,this._frees=new Array(i),this._freeCmds=new Sa(i);for(var n=0;n<i;++n)this._frees[n]=new t;this._freeIdx=i-1}return J(e,[{key:"alloc",value:function(e){if(this._freeIdx<0){var t=2*this._frees.length,i=this._frees;this._frees=new Array(t);for(var n=t-i.length,r=0;r<n;++r)this._frees[r]=new e;for(var o=n,a=0;o<t;++o,++a)this._frees[o]=i[a];this._freeIdx+=n}var s=this._frees[this._freeIdx];return this._frees[this._freeIdx--]=null,++s.refCount,s}},{key:"free",value:function(e){0==--e.refCount&&this._freeCmds.push(e)}},{key:"freeCmds",value:function(e){for(var t=0;t<e.length;++t)0==--e.array[t].refCount&&this._freeCmds.push(e.array[t])}},{key:"release",value:function(){for(var e=0;e<this._freeCmds.length;++e){var t=this._freeCmds.array[e];t.clear(),this._frees[++this._freeIdx]=t}this._freeCmds.clear()}}]),e}(),cB=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e))).beginRenderPassCmdPool=void 0,i.bindStatesCmdPool=void 0,i.drawCmdPool=void 0,i.updateBufferCmdPool=void 0,i.copyBufferToTextureCmdPool=void 0,i.beginRenderPassCmdPool=new lB(YD,1),i.bindStatesCmdPool=new lB(qD,1),i.drawCmdPool=new lB(QD,1),i.updateBufferCmdPool=new lB(ZD,1),i.copyBufferToTextureCmdPool=new lB(KD,1),i}return ee(t,Qr),J(t,[{key:"initialize",value:function(e){return this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._status=exports.GFXStatus.UNREADY}},{key:"clearCmds",value:function(e){e.beginRenderPassCmds.length&&(this.beginRenderPassCmdPool.freeCmds(e.beginRenderPassCmds),e.beginRenderPassCmds.clear()),e.bindStatesCmds.length&&(this.bindStatesCmdPool.freeCmds(e.bindStatesCmds),e.bindStatesCmds.clear()),e.drawCmds.length&&(this.drawCmdPool.freeCmds(e.drawCmds),e.drawCmds.clear()),e.updateBufferCmds.length&&(this.updateBufferCmdPool.freeCmds(e.updateBufferCmds),e.updateBufferCmds.clear()),e.copyBufferToTextureCmds.length&&(this.copyBufferToTextureCmdPool.freeCmds(e.copyBufferToTextureCmds),e.copyBufferToTextureCmds.clear()),e.cmds.clear()}},{key:"releaseCmds",value:function(){this.beginRenderPassCmdPool.release(),this.bindStatesCmdPool.release(),this.drawCmdPool.release(),this.updateBufferCmdPool.release(),this.copyBufferToTextureCmdPool.release()}}]),t}(),uB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).cmdPackage=new JD,i._webGLAllocator=null,i._isInRenderPass=!1,i._curGPUPipelineState=null,i._curGPUBindingLayout=null,i._curGPUInputAssembler=null,i._curViewport=null,i._curScissor=null,i._curLineWidth=null,i._curDepthBias=null,i._curBlendConstants=[],i._curDepthBounds=null,i._curStencilWriteMask=null,i._curStencilCompareMask=null,i._isStateInvalied=!1,i}return ee(t,kr),J(t,[{key:"initialize",value:function(e){return this._allocator=e.allocator,this._type=e.type,this._webGLAllocator=this._allocator,this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._webGLAllocator&&(this._webGLAllocator.clearCmds(this.cmdPackage),this._webGLAllocator=null),this._allocator=null,this._status=exports.GFXStatus.UNREADY}},{key:"begin",value:function(){this._webGLAllocator.clearCmds(this.cmdPackage),this._curGPUPipelineState=null,this._curGPUBindingLayout=null,this._curGPUInputAssembler=null,this._curViewport=null,this._curScissor=null,this._curLineWidth=null,this._curDepthBias=null,this._curBlendConstants=[],this._curDepthBounds=null,this._curStencilWriteMask=null,this._curStencilCompareMask=null,this._numDrawCalls=0,this._numInstances=0,this._numTris=0}},{key:"end",value:function(){this._isStateInvalied&&this.bindStates(),this._isInRenderPass=!1}},{key:"beginRenderPass",value:function(e,t,i,n,r,o){var a=this._webGLAllocator.beginRenderPassCmdPool.alloc(YD);a.gpuFramebuffer=e.gpuFramebuffer,a.renderArea=t,a.clearFlag=i,a.clearColors.length=n.length;for(var s=0;s<n.length;++s)a.clearColors[s]=n[s];a.clearDepth=r,a.clearStencil=o,this.cmdPackage.beginRenderPassCmds.push(a),this.cmdPackage.cmds.push(UD.BEGIN_RENDER_PASS),this._isInRenderPass=!0}},{key:"endRenderPass",value:function(){this._isInRenderPass=!1}},{key:"bindPipelineState",value:function(e){var t=e.gpuPipelineState;this._curGPUPipelineState=t,this._isStateInvalied=!0}},{key:"bindBindingLayout",value:function(e){var t=e.gpuBindingLayout;this._curGPUBindingLayout=t,this._isStateInvalied=!0}},{key:"bindInputAssembler",value:function(e){var t=e.gpuInputAssembler;this._curGPUInputAssembler=t,this._isStateInvalied=!0}},{key:"setViewport",value:function(e){this._curViewport?this._curViewport.left===e.left&&this._curViewport.top===e.top&&this._curViewport.width===e.width&&this._curViewport.height===e.height&&this._curViewport.minDepth===e.minDepth&&this._curViewport.maxDepth===e.maxDepth||(this._curViewport.left=e.left,this._curViewport.top=e.top,this._curViewport.width=e.width,this._curViewport.height=e.height,this._curViewport.minDepth=e.minDepth,this._curViewport.maxDepth=e.maxDepth,this._isStateInvalied=!0):this._curViewport={left:e.left,top:e.top,width:e.width,height:e.height,minDepth:e.minDepth,maxDepth:e.maxDepth}}},{key:"setScissor",value:function(e){this._curScissor?this._curScissor.x===e.x&&this._curScissor.y===e.y&&this._curScissor.width===e.width&&this._curScissor.height===e.height||(this._curScissor.x=e.x,this._curScissor.y=e.y,this._curScissor.width=e.width,this._curScissor.height=e.height,this._isStateInvalied=!0):this._curScissor={x:e.x,y:e.y,width:e.width,height:e.height}}},{key:"setLineWidth",value:function(e){this._curLineWidth!==e&&(this._curLineWidth=e,this._isStateInvalied=!0)}},{key:"setDepthBias",value:function(e,t,i){this._curDepthBias?this._curDepthBias.constantFactor===e&&this._curDepthBias.clamp===t&&this._curDepthBias.slopeFactor===i||(this._curDepthBias.constantFactor=e,this._curDepthBias.clamp=t,this._curDepthBias.slopeFactor=i,this._isStateInvalied=!0):(this._curDepthBias={constantFactor:e,clamp:t,slopeFactor:i},this._isStateInvalied=!0)}},{key:"setBlendConstants",value:function(e){(this._curBlendConstants||4!==e.length)&&(4!==e.length||this._curBlendConstants[0]===e[0]&&this._curBlendConstants[1]===e[1]&&this._curBlendConstants[2]===e[2]&&this._curBlendConstants[3]===e[3])||(this._curBlendConstants=[e[0],e[1],e[2],e[3]],this._isStateInvalied=!0)}},{key:"setDepthBound",value:function(e,t){this._curDepthBounds&&this._curDepthBounds.minBounds===e&&this._curDepthBounds.maxBounds===t||(this._curDepthBounds={minBounds:e,maxBounds:t},this._isStateInvalied=!0)}},{key:"setStencilWriteMask",value:function(e,t){this._curStencilWriteMask?this._curStencilWriteMask.face===e&&this._curStencilWriteMask.writeMask===t||(this._curStencilWriteMask.face=e,this._curStencilWriteMask.writeMask=t,this._isStateInvalied=!0):(this._curStencilWriteMask={face:e,writeMask:t},this._isStateInvalied=!0)}},{key:"setStencilCompareMask",value:function(e,t,i){this._curStencilCompareMask?this._curStencilCompareMask.face===e&&this._curStencilCompareMask.reference===t&&this._curStencilCompareMask.compareMask===i||(this._curStencilCompareMask.face=e,this._curStencilCompareMask.reference=t,this._curStencilCompareMask.compareMask=i,this._isStateInvalied=!0):(this._curStencilCompareMask={face:e,reference:t,compareMask:i},this._isStateInvalied=!0)}},{key:"draw",value:function(e){if(this._type===exports.GFXCommandBufferType.PRIMARY&&this._isInRenderPass||this._type===exports.GFXCommandBufferType.SECONDARY){this._isStateInvalied&&this.bindStates();var t=this._allocator.drawCmdPool.alloc(QD);t.drawInfo.vertexCount=e.vertexCount,t.drawInfo.firstVertex=e.firstVertex,t.drawInfo.indexCount=e.indexCount,t.drawInfo.firstIndex=e.firstIndex,t.drawInfo.vertexOffset=e.vertexOffset,t.drawInfo.instanceCount=e.instanceCount,t.drawInfo.firstInstance=e.firstInstance,this.cmdPackage.drawCmds.push(t),this.cmdPackage.cmds.push(UD.DRAW),++this._numDrawCalls,this._numInstances+=e.instanceCount;var i=e.indexCount||e.vertexCount;if(this._curGPUPipelineState)switch(this._curGPUPipelineState.glPrimitive){case 4:this._numTris+=i/3*Math.max(e.instanceCount,1);break;case 5:case 6:this._numTris+=(i-2)*Math.max(e.instanceCount,1)}}else console.error("Command 'draw' must be recorded inside a render pass.")}},{key:"updateBuffer",value:function(e,t,i,n){if(this._type===exports.GFXCommandBufferType.PRIMARY&&!this._isInRenderPass||this._type===exports.GFXCommandBufferType.SECONDARY){var r=e.gpuBuffer;if(r){var o=this._webGLAllocator.updateBufferCmdPool.alloc(ZD);if(o){var a;a=void 0!==n?n:e.usage&exports.GFXBufferUsageBit.INDIRECT?0:t.byteLength;var s=t;o.gpuBuffer=r,o.buffer=s,o.offset=void 0!==i?i:0,o.size=a,this.cmdPackage.updateBufferCmds.push(o),this.cmdPackage.cmds.push(UD.UPDATE_BUFFER)}}}else console.error("Command 'updateBuffer' must be recorded outside a render pass.")}},{key:"copyBufferToTexture",value:function(e,t,i,n){if(this._type===exports.GFXCommandBufferType.PRIMARY&&!this._isInRenderPass||this._type===exports.GFXCommandBufferType.SECONDARY){var r=e.gpuBuffer,o=t.gpuTexture;if(r&&o){var a=this._webGLAllocator.copyBufferToTextureCmdPool.alloc(KD);a&&(a.gpuBuffer=r,a.gpuTexture=o,a.dstLayout=i,a.regions=n,this.cmdPackage.copyBufferToTextureCmds.push(a),this.cmdPackage.cmds.push(UD.COPY_BUFFER_TO_TEXTURE))}}else console.error("Command 'copyBufferToTexture' must be recorded outside a render pass.")}},{key:"execute",value:function(e,t){for(var i=0;i<t;++i){for(var n=e[i],r=0;r<n.cmdPackage.beginRenderPassCmds.length;++r){var o=n.cmdPackage.beginRenderPassCmds.array[r];++o.refCount,this.cmdPackage.beginRenderPassCmds.push(o)}for(var a=0;a<n.cmdPackage.bindStatesCmds.length;++a){var s=n.cmdPackage.bindStatesCmds.array[a];++s.refCount,this.cmdPackage.bindStatesCmds.push(s)}for(var l=0;l<n.cmdPackage.drawCmds.length;++l){var c=n.cmdPackage.drawCmds.array[l];++c.refCount,this.cmdPackage.drawCmds.push(c)}for(var u=0;u<n.cmdPackage.updateBufferCmds.length;++u){var h=n.cmdPackage.updateBufferCmds.array[u];++h.refCount,this.cmdPackage.updateBufferCmds.push(h)}for(var p=0;p<n.cmdPackage.copyBufferToTextureCmds.length;++p){var f=n.cmdPackage.copyBufferToTextureCmds.array[p];++f.refCount,this.cmdPackage.copyBufferToTextureCmds.push(f)}this.cmdPackage.cmds.concat(n.cmdPackage.cmds.array),this._numDrawCalls+=n._numDrawCalls,this._numInstances+=n._numInstances,this._numTris+=n._numTris}}},{key:"bindStates",value:function(){var e=this._webGLAllocator.bindStatesCmdPool.alloc(qD);e&&(e.gpuPipelineState=this._curGPUPipelineState,e.gpuBindingLayout=this._curGPUBindingLayout,e.gpuInputAssembler=this._curGPUInputAssembler,e.viewport=this._curViewport,e.scissor=this._curScissor,e.lineWidth=this._curLineWidth,e.depthBias=this._curDepthBias,e.blendConstants=this._curBlendConstants,e.depthBounds=this._curDepthBounds,e.stencilWriteMask=this._curStencilWriteMask,e.stencilCompareMask=this._curStencilCompareMask,this.cmdPackage.bindStatesCmds.push(e),this.cmdPackage.cmds.push(UD.BIND_STATES),this._isStateInvalied=!1)}},{key:"webGLDevice",get:function(){return this._device}}]),t}(),hB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuFramebuffer=null,i}return ee(t,Rr),J(t,[{key:"initialize",value:function(e){if(this._renderPass=e.renderPass,this._colorViews=e.colorViews||[],this._depthStencilView=e.depthStencilView||null,this._isOffscreen=void 0===e.isOffscreen||e.isOffscreen,this._isOffscreen){var t=[];if(void 0!==e.colorViews)for(var i,n=fe(e.colorViews);!(i=n()).done;){var r=i.value;t.push(r.gpuTextureView)}var o=null;e.depthStencilView&&(o=e.depthStencilView.gpuTextureView),this._gpuFramebuffer={gpuRenderPass:e.renderPass.gpuRenderPass,gpuColorViews:t,gpuDepthStencilView:o,isOffscreen:this._isOffscreen,glFramebuffer:null},function(e,t){if(t.isOffscreen){var i=e.gl,n=[],r=i.createFramebuffer();if(r){t.glFramebuffer=r,e.stateCache.glFramebuffer!==t.glFramebuffer&&(i.bindFramebuffer(i.FRAMEBUFFER,t.glFramebuffer),e.stateCache.glFramebuffer=t.glFramebuffer);for(var o=0;o<t.gpuColorViews.length;++o){var a=t.gpuColorViews[o];a&&(a.gpuTexture.glTexture?i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+o,a.gpuTexture.glTarget,a.gpuTexture.glTexture,a.baseLevel):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+o,i.RENDERBUFFER,a.gpuTexture.glRenderbuffer),n.push(i.COLOR_ATTACHMENT0+o))}var s=t.gpuDepthStencilView;if(s){var l=yr[s.format].hasStencil?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;s.gpuTexture.glTexture?i.framebufferTexture2D(i.FRAMEBUFFER,l,s.gpuTexture.glTarget,s.gpuTexture.glTexture,s.baseLevel):i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.gpuTexture.glRenderbuffer)}e.WEBGL_draw_buffers&&e.WEBGL_draw_buffers.drawBuffersWEBGL(n);var c=i.checkFramebufferStatus(i.FRAMEBUFFER);if(c!==i.FRAMEBUFFER_COMPLETE)switch(c){case i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:console.error("glCheckFramebufferStatus() - FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:console.error("glCheckFramebufferStatus() - FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:console.error("glCheckFramebufferStatus() - FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case i.FRAMEBUFFER_UNSUPPORTED:console.error("glCheckFramebufferStatus() - FRAMEBUFFER_UNSUPPORTED")}}}}(this._device,this._gpuFramebuffer)}else this._gpuFramebuffer={gpuRenderPass:e.renderPass.gpuRenderPass,gpuColorViews:[],gpuDepthStencilView:null,isOffscreen:!1,glFramebuffer:null};return this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){var e,t;this._isOffscreen&&this._gpuFramebuffer&&(e=this._device,(t=this._gpuFramebuffer).glFramebuffer&&(e.gl.deleteFramebuffer(t.glFramebuffer),t.glFramebuffer=null)),this._gpuFramebuffer=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuFramebuffer",get:function(){return this._gpuFramebuffer}}]),t}(),pB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuInputAssembler=null,i}return ee(t,Fr),J(t,[{key:"initialize",value:function(e){if(0===e.vertexBuffers.length)return console.error("GFXInputAssemblerInfo.vertexBuffers is null."),!1;if(this._attributes=e.attributes,this._vertexBuffers=e.vertexBuffers,void 0!==e.indexBuffer)this._indexBuffer=e.indexBuffer,this._indexCount=this._indexBuffer.size/this._indexBuffer.stride;else{var t=this._vertexBuffers[0];this._vertexCount=t.size/t.stride}this._indirectBuffer=e.indirectBuffer||null;for(var i=new Array(e.vertexBuffers.length),n=0;n<e.vertexBuffers.length;++n){var r=e.vertexBuffers[n];r.gpuBuffer&&(i[n]=r.gpuBuffer)}var o=null,a=0;if(e.indexBuffer&&(o=e.indexBuffer.gpuBuffer))switch(o.stride){case 1:a=5121;break;case 2:a=5123;break;case 4:a=5125;break;default:console.error("Error index buffer stride.")}var s=null;return void 0!==e.indirectBuffer&&(s=e.indirectBuffer.gpuBuffer),this._gpuInputAssembler={attributes:e.attributes,gpuVertexBuffers:i,gpuIndexBuffer:o,gpuIndirectBuffer:s,glAttribs:[],glIndexType:a,glVAOs:new Map},function(e,t){var i=e.gl;t.glAttribs=new Array(t.attributes.length);for(var n=[0,0,0,0,0,0,0,0],r=0;r<t.attributes.length;++r){var o=t.attributes[r],a=void 0!==o.stream?o.stream:0,s=t.gpuVertexBuffers[a],l=PD(o.format,i),c=yr[o.format].size;t.glAttribs[r]={name:o.name,glBuffer:s.glBuffer,glType:l,size:c,count:yr[o.format].count,stride:s.stride,componentCount:GD(l,i),isNormalized:void 0!==o.isNormalized&&o.isNormalized,isInstanced:void 0!==o.isInstanced&&o.isInstanced,offset:n[a]},n[a]+=c}}(this._device,this._gpuInputAssembler),this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){var e=this._device;this._gpuInputAssembler&&e.useVAO&&function(e,t){for(var i=t.glVAOs.values(),n=i.next();!n.done;)e.OES_vertex_array_object.deleteVertexArrayOES(n.value),n=i.next();t.glVAOs.clear()}(e,this._gpuInputAssembler),this._gpuInputAssembler=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuInputAssembler",get:function(){return this._gpuInputAssembler}}]),t}(),fB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuPipelineLayout=null,i}return ee(t,Ir),J(t,[{key:"initialize",value:function(e){return this._layouts=e.layouts,this._pushConstantsRanges=e.pushConstantsRanges||[],this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._status=exports.GFXStatus.UNREADY}},{key:"gpuPipelineLayout",get:function(){return this._gpuPipelineLayout}}]),t}(),_B=[0,1,3,2,0,0,0,4,5,6,0,0,0,0],dB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuPipelineState=null,i}return ee(t,Lr),J(t,[{key:"initialize",value:function(e){return this._primitive=e.primitive,this._shader=e.shader,this._is=e.inputState,this._rs=e.rasterizerState,this._dss=e.depthStencilState,this._bs=e.blendState,this._dynamicStates=e.dynamicStates||[],this._hash=e.hash,this._layout=e.layout,this._renderPass=e.renderPass,this._gpuPipelineState={glPrimitive:_B[e.primitive],gpuShader:e.shader.gpuShader,rs:e.rasterizerState,dss:e.depthStencilState,bs:e.blendState,dynamicStates:void 0!==e.dynamicStates?e.dynamicStates:[],gpuLayout:e.layout.gpuPipelineLayout,gpuRenderPass:e.renderPass.gpuRenderPass},this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._gpuPipelineState=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuPipelineState",get:function(){return this._gpuPipelineState}}]),t}(),mB=[],vB=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,uB),J(t,[{key:"beginRenderPass",value:function(e,t,i,n,r,o){tB(this._device,e.gpuFramebuffer,t,i,n,r,o),this._isInRenderPass=!0}},{key:"draw",value:function(e){if(this._isInRenderPass){this._isStateInvalied&&this.bindStates(),nB(this._device,e),++this._numDrawCalls,this._numInstances+=e.instanceCount;var t=e.indexCount||e.vertexCount;if(this._curGPUPipelineState)switch(this._curGPUPipelineState.glPrimitive){case 4:this._numTris+=t/3*Math.max(e.instanceCount,1);break;case 5:case 6:this._numTris+=(t-2)*Math.max(e.instanceCount,1)}}else console.error("Command 'draw' must be recorded inside a render pass.")}},{key:"updateBuffer",value:function(e,t,i,n){if(this._isInRenderPass)console.error("Command 'updateBuffer' must be recorded outside a render pass.");else{var r,o=e.gpuBuffer;if(o)void 0===i&&(i=0),r=void 0!==n?n:e.usage&exports.GFXBufferUsageBit.INDIRECT?0:t.byteLength,$D(this._device,o,t,i,r)}}},{key:"copyBufferToTexture",value:function(e,t,i,n){if(this._isInRenderPass)console.error("Command 'copyBufferToTexture' must be recorded outside a render pass.");else{var r=e.gpuBuffer,o=t.gpuTexture;r&&o&&(mB[0]=r.buffer,aB(this._device,mB,o,n))}}},{key:"execute",value:function(e,t){for(var i=0;i<t;++i){var n=e[i];oB(this._device,n.cmdPackage),this._numDrawCalls+=n._numDrawCalls,this._numInstances+=n._numInstances,this._numTris+=n._numTris}}},{key:"bindStates",value:function(){iB(this._device,this._curGPUPipelineState,this._curGPUBindingLayout,this._curGPUInputAssembler,this._curViewport,this._curScissor,this._curLineWidth,this._curDepthBias,this._curBlendConstants,this._curDepthBounds,this._curStencilWriteMask,this._curStencilCompareMask),this._isStateInvalied=!1}}]),t}(),yB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r)))).numDrawCalls=0,i.numInstances=0,i.numTris=0,i._isAsync=!1,i}return ee(t,zr),J(t,[{key:"initialize",value:function(e){return this._type=e.type,this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._status=exports.GFXStatus.UNREADY}},{key:"submit",value:function(e,t){if(!this._isAsync)for(var i=e.length,n=0;n<i;n++){var r=e[n];this.numDrawCalls+=r.numDrawCalls,this.numInstances+=r.numInstances,this.numTris+=r.numTris}}},{key:"clear",value:function(){this.numDrawCalls=0,this.numInstances=0,this.numTris=0}}]),t}(),gB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuRenderPass=null,i}return ee(t,Gr),J(t,[{key:"initialize",value:function(e){return this._colorInfos=e.colorAttachments||[],this._depthStencilInfo=e.depthStencilAttachment||null,this._gpuRenderPass={colorAttachments:this._colorInfos,depthStencilAttachment:this._depthStencilInfo},this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._gpuRenderPass=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuRenderPass",get:function(){return this._gpuRenderPass}}]),t}(),AB=[10497,33648,33071,33071],bB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuSampler=null,i}return ee(t,Xr),J(t,[{key:"initialize",value:function(e){void 0!==e.name&&(this._state.name=e.name),void 0!==e.minFilter&&(this._state.minFilter=e.minFilter),void 0!==e.magFilter&&(this._state.magFilter=e.magFilter),void 0!==e.mipFilter&&(this._state.mipFilter=e.mipFilter),void 0!==e.addressU&&(this._state.addressU=e.addressU),void 0!==e.addressV&&(this._state.addressV=e.addressV),void 0!==e.addressW&&(this._state.addressW=e.addressW),void 0!==e.maxAnisotropy&&(this._state.maxAnisotropy=e.maxAnisotropy),void 0!==e.cmpFunc&&(this._state.cmpFunc=e.cmpFunc),void 0!==e.borderColor&&(this._state.borderColor=e.borderColor),void 0!==e.minLOD&&(this._state.minLOD=e.minLOD),void 0!==e.maxLOD&&(this._state.maxLOD=e.maxLOD),void 0!==e.mipLODBias&&(this._state.mipLODBias=e.mipLODBias);var t=0,i=0,n=this._state.minFilter,r=this._state.magFilter,o=this._state.mipFilter;t=n===exports.GFXFilter.LINEAR||n===exports.GFXFilter.ANISOTROPIC?o===exports.GFXFilter.LINEAR||o===exports.GFXFilter.ANISOTROPIC?9987:o===exports.GFXFilter.POINT?9985:9729:o===exports.GFXFilter.LINEAR||o===exports.GFXFilter.ANISOTROPIC?9986:o===exports.GFXFilter.POINT?9984:9728,i=r===exports.GFXFilter.LINEAR||r===exports.GFXFilter.ANISOTROPIC?9729:9728;var a=AB[this._state.addressU],s=AB[this._state.addressV],l=AB[this._state.addressW];return this._gpuSampler={glMinFilter:t,glMagFilter:i,glWrapS:a,glWrapT:s,glWrapR:l},this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._gpuSampler=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuSampler",get:function(){return this._gpuSampler}}]),t}(),xB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuShader=null,i}return ee(t,Vr),J(t,[{key:"initialize",value:function(e){this._name=e.name,this._stages=e.stages,void 0!==e.blocks&&(this._blocks=e.blocks),void 0!==e.samplers&&(this._samplers=e.samplers),this._gpuShader={name:e.name?e.name:"",blocks:void 0!==e.blocks?e.blocks:[],samplers:void 0!==e.samplers?e.samplers:[],gpuStages:new Array(e.stages.length),glProgram:null,glInputs:[],glUniforms:[],glBlocks:[],glSamplers:[]};for(var t=0;t<e.stages.length;++t){var i=e.stages[t];this._gpuShader.gpuStages[t]={type:i.type,source:i.source,macros:i.macros?i.macros:[],glShader:null}}return function(e,t){for(var i=e.gl,n=function(e){var n=t.gpuStages[e],r=0,o="",a=1;switch(n.type){case exports.GFXShaderType.VERTEX:o="VertexShader",r=i.VERTEX_SHADER;break;case exports.GFXShaderType.FRAGMENT:o="FragmentShader",r=i.FRAGMENT_SHADER;break;default:return console.error("Unsupported GFXShaderType."),{v:void 0}}var s=i.createShader(r);if(s&&(n.glShader=s,i.shaderSource(n.glShader,n.source),i.compileShader(n.glShader),!i.getShaderParameter(n.glShader,i.COMPILE_STATUS))){console.error(o+" in '"+t.name+"' compilation failed."),console.error("Shader source dump:",n.source.replace(/^|\n/g,(function(){return"\n".concat(a++," ")}))),console.error(i.getShaderInfoLog(n.glShader));for(var l=0;l<t.gpuStages.length;l++){var c=t.gpuStages[e];c.glShader&&(i.deleteShader(c.glShader),c.glShader=null)}return{v:void 0}}},r=0;r<t.gpuStages.length;r++){var o=n(r);if("object"===Q(o))return o.v}var a=i.createProgram();if(a){t.glProgram=a;for(var s=0;s<t.gpuStages.length;s++){var l=t.gpuStages[s];i.attachShader(t.glProgram,l.glShader)}i.linkProgram(t.glProgram);for(var c=0;c<t.gpuStages.length;c++){var u=t.gpuStages[c];u.glShader&&(i.detachShader(t.glProgram,u.glShader),i.deleteShader(u.glShader),u.glShader=null)}if(!i.getProgramParameter(t.glProgram,i.LINK_STATUS))return console.error("Failed to link shader '"+t.name+"'."),void console.error(i.getProgramInfoLog(t.glProgram));console.info("Shader '"+t.name+"' compilation succeeded.");var h=i.getProgramParameter(t.glProgram,i.ACTIVE_ATTRIBUTES);t.glInputs=new Array(h);for(var p=0;p<h;++p){var f=i.getActiveAttrib(t.glProgram,p);if(f){var _=void 0,d=f.name.indexOf("[");_=-1!==d?f.name.substr(0,d):f.name;var m=i.getAttribLocation(t.glProgram,_),v=LD(f.type,i),y=zD(f.type,i);t.glInputs[p]={binding:m,name:_,type:v,stride:y,count:f.size,size:y*f.size,glType:f.type,glLoc:m}}}if(t.blocks.length>0){t.glBlocks=new Array(t.blocks.length);for(var g=0;g<t.blocks.length;++g){var A=t.blocks[g],b={binding:A.binding,name:A.name,size:0,glUniforms:new Array(A.members.length),glActiveUniforms:[],isUniformPackage:!0};t.glBlocks[g]=b;for(var x=0;x<A.members.length;++x){var T=A.members[x],S=ND(T.type,i),E=zD(S,i),C=E*T.count,w=b.size/4,k=new Array(C/4);k.fill(0),b.glUniforms[x]={binding:-1,name:T.name,type:T.type,stride:E,count:T.count,size:C,offset:b.size,glType:S,glLoc:-1,array:k,begin:w},b.size+=C}}}if(t.samplers.length>0){t.glSamplers=new Array(t.samplers.length);for(var O=0;O<t.samplers.length;++O){var R=t.samplers[O];t.glSamplers[O]={binding:R.binding,name:R.name,type:R.type,units:[],glType:ND(R.type,i),glLoc:-1}}}for(var F=i.getProgramParameter(t.glProgram,i.ACTIVE_UNIFORMS),I=0,M=[],P=0;P<F;++P){var D=i.getActiveUniform(t.glProgram,P);if(D){var B=i.getUniformLocation(t.glProgram,D.name);if(null!==B){var N=void 0,L=D.name.indexOf("[");if(N=-1!==L?D.name.substr(0,L):D.name,D.type===i.SAMPLER_2D||D.type===i.SAMPLER_CUBE)for(var z=0;z<t.glSamplers.length;z++){var G=t.glSamplers[z];if(G.name===N){for(var U=0;U<D.size;++U)G.units.push(I+U);G.glLoc=B,I+=D.size,M.push(G);break}}else for(var X=0;X<t.glBlocks.length;X++)for(var V=t.glBlocks[X],H=0;H<V.glUniforms.length;H++){var j=V.glUniforms[H];if(j.name===N){j.glLoc=B,V.glActiveUniforms.push(j);break}}}}}if(M.length){e.stateCache.glProgram!==t.glProgram&&(i.useProgram(t.glProgram),e.stateCache.glProgram=t.glProgram);for(var W=0;W<M.length;W++){var Y=M[W];i.uniform1iv(Y.glLoc,Y.units)}}}}(this._device,this._gpuShader),this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){var e,t;this._gpuShader&&(e=this._device,(t=this._gpuShader).glProgram&&(e.gl.deleteProgram(t.glProgram),t.glProgram=null),this._gpuShader=null),this._status=exports.GFXStatus.UNREADY}},{key:"gpuShader",get:function(){return this._gpuShader}}]),t}(),TB=function e(){Z(this,e),this.glArrayBuffer=null,this.glElementArrayBuffer=null,this.glVAO=null,this.texUnit=0,this.glTexUnits=void 0,this.glRenderbuffer=null,this.glFramebuffer=null,this.viewport=void 0,this.scissorRect=void 0,this.rs=void 0,this.dss=void 0,this.bs=void 0,this.glProgram=null,this.glEnabledAttribLocs=void 0,this.glCurrentAttribLocs=void 0,this.glTexUnits=new Array(16),this.viewport={left:0,top:0,width:0,height:0,minDepth:0,maxDepth:0},this.scissorRect={x:0,y:0,width:0,height:0},this.rs=new Mr,this.dss=new Pr,this.bs=new Br,this.glEnabledAttribLocs=new Array(16),this.glCurrentAttribLocs=new Array(16),this.glEnabledAttribLocs.fill(!1),this.glCurrentAttribLocs.fill(!1);for(var t=0;t<16;++t)this.glTexUnits[t]={glTexture:null}},SB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuTexture=null,i}return ee(t,Wr),J(t,[{key:"initialize",value:function(e){var t;switch(this._type=e.type,this._usage=e.usage,this._format=e.format,this._width=e.width,this._height=e.height,void 0!==e.depth&&(this._depth=e.depth),void 0!==e.arrayLayer&&(this._arrayLayer=e.arrayLayer),void 0!==e.mipLevel&&(this._mipLevel=e.mipLevel),void 0!==e.samples&&(this._samples=e.samples),void 0!==e.flags&&(this._flags=e.flags),this._isPowerOf2=Hr(this._width)&&Hr(this._height),this._size=Ar(this._format,this.width,this.height,this.depth,this.mipLevel)*this._arrayLayer,this._flags&exports.GFXTextureFlagBit.BAKUP_BUFFER&&(this._buffer=new ArrayBuffer(this._size)),e.type){case exports.GFXTextureType.TEX1D:t=e.arrayLayer?e.arrayLayer<=1?exports.GFXTextureViewType.TV1D:exports.GFXTextureViewType.TV1D_ARRAY:exports.GFXTextureViewType.TV1D;break;case exports.GFXTextureType.TEX2D:var i=exports.GFXTextureFlagBit.NONE;e.flags&&(i=e.flags),t=e.arrayLayer?e.arrayLayer<=1?exports.GFXTextureViewType.TV2D:i&exports.GFXTextureFlagBit.CUBEMAP?exports.GFXTextureViewType.CUBE:exports.GFXTextureViewType.TV2D_ARRAY:exports.GFXTextureViewType.TV2D;break;case exports.GFXTextureType.TEX3D:t=exports.GFXTextureViewType.TV3D;break;default:t=exports.GFXTextureViewType.TV2D}return this._gpuTexture={type:this._type,viewType:t,format:this._format,usage:this._usage,width:this._width,height:this._height,depth:this._depth,size:this._size,arrayLayer:this._arrayLayer,mipLevel:this._mipLevel,samples:this._samples,flags:this._flags,isPowerOf2:this._isPowerOf2,glTarget:0,glInternelFmt:0,glFormat:0,glType:0,glUsage:0,glTexture:null,glRenderbuffer:null,glWrapS:0,glWrapT:0,glMinFilter:0,glMagFilter:0},function(e,t){var i=e.gl;t.glInternelFmt=DD(t.format,i),t.glFormat=BD(t.format,i),t.glType=PD(t.format,i);var n=t.width,r=t.height;switch(t.viewType){case exports.GFXTextureViewType.TV2D:t.viewType=exports.GFXTextureViewType.TV2D,t.glTarget=i.TEXTURE_2D;var o=Math.max(n,r);if(o>e.maxTextureSize&&b(9100,o,e.maxTextureSize),!e.WEBGL_depth_texture&&yr[t.format].hasDepth){var a=i.createRenderbuffer();a&&t.size>0&&(t.glRenderbuffer=a,e.stateCache.glRenderbuffer!==t.glRenderbuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,t.glRenderbuffer),e.stateCache.glRenderbuffer=t.glRenderbuffer),t.glInternelFmt===i.DEPTH_COMPONENT&&(t.glInternelFmt=i.DEPTH_COMPONENT16),i.renderbufferStorage(i.RENDERBUFFER,t.glInternelFmt,n,r))}else if(t.samples===exports.GFXSampleCount.X1){var s=i.createTexture();if(s&&t.size>0){t.glTexture=s;var l=e.stateCache.glTexUnits[e.stateCache.texUnit];if(l.glTexture!==t.glTexture&&(i.bindTexture(i.TEXTURE_2D,t.glTexture),l.glTexture=t.glTexture),yr[t.format].isCompressed)if(t.glInternelFmt!==ID.COMPRESSED_RGB_ETC1_WEBGL)for(var c=0;c<t.mipLevel;++c){var u=gr(t.format,n,r,1),h=new Uint8Array(u);i.compressedTexImage2D(i.TEXTURE_2D,c,t.glInternelFmt,n,r,0,h),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}else{var p=gr(t.format,2,2,1),f=new Uint8Array(p);i.compressedTexImage2D(i.TEXTURE_2D,0,t.glInternelFmt,2,2,0,f)}else for(var _=0;_<t.mipLevel;++_)i.texImage2D(i.TEXTURE_2D,_,t.glInternelFmt,n,r,0,t.glFormat,t.glType,null),n=Math.max(1,n>>1),r=Math.max(1,r>>1);t.isPowerOf2?(t.glWrapS=i.REPEAT,t.glWrapT=i.REPEAT):(t.glWrapS=i.CLAMP_TO_EDGE,t.glWrapT=i.CLAMP_TO_EDGE),t.glMinFilter=i.LINEAR,t.glMagFilter=i.LINEAR,i.texParameteri(t.glTarget,i.TEXTURE_WRAP_S,t.glWrapS),i.texParameteri(t.glTarget,i.TEXTURE_WRAP_T,t.glWrapT),i.texParameteri(t.glTarget,i.TEXTURE_MIN_FILTER,t.glMinFilter),i.texParameteri(t.glTarget,i.TEXTURE_MAG_FILTER,t.glMagFilter)}else i.deleteTexture(s)}break;case exports.GFXTextureViewType.CUBE:t.viewType=exports.GFXTextureViewType.CUBE,t.glTarget=i.TEXTURE_CUBE_MAP;var d=Math.max(n,r);d>e.maxCubeMapTextureSize&&b(9100,d,e.maxTextureSize);var m=i.createTexture();if(m&&t.size>0){t.glTexture=m;var v=e.stateCache.glTexUnits[e.stateCache.texUnit];if(v.glTexture!==t.glTexture&&(i.bindTexture(i.TEXTURE_CUBE_MAP,t.glTexture),v.glTexture=t.glTexture),yr[t.format].isCompressed)if(t.glInternelFmt!==ID.COMPRESSED_RGB_ETC1_WEBGL)for(var y=0;y<6;++y){n=t.width,r=t.height;for(var g=0;g<t.mipLevel;++g){var A=gr(t.format,n,r,1),x=new Uint8Array(A);i.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+y,g,t.glInternelFmt,n,r,0,x),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}}else for(var T=0;T<6;++T){var S=gr(t.format,2,2,1),E=new Uint8Array(S);i.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+T,0,t.glInternelFmt,2,2,0,E)}else for(var C=0;C<6;++C){n=t.width,r=t.height;for(var w=0;w<t.mipLevel;++w)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+C,w,t.glInternelFmt,n,r,0,t.glFormat,t.glType,null),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}t.isPowerOf2?(t.glWrapS=i.REPEAT,t.glWrapT=i.REPEAT):(t.glWrapS=i.CLAMP_TO_EDGE,t.glWrapT=i.CLAMP_TO_EDGE),t.glMinFilter=i.LINEAR,t.glMagFilter=i.LINEAR,i.texParameteri(t.glTarget,i.TEXTURE_WRAP_S,t.glWrapS),i.texParameteri(t.glTarget,i.TEXTURE_WRAP_T,t.glWrapT),i.texParameteri(t.glTarget,i.TEXTURE_MIN_FILTER,t.glMinFilter),i.texParameteri(t.glTarget,i.TEXTURE_MAG_FILTER,t.glMagFilter)}break;default:console.error("Unsupported GFXTextureType, create texture failed."),t.viewType=exports.GFXTextureViewType.TV2D,t.glTarget=i.TEXTURE_2D}}(this._device,this._gpuTexture),this._device.memoryStatus.textureSize+=this._size,this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){var e,t;this._gpuTexture&&(e=this._device,(t=this._gpuTexture).glTexture&&(e.gl.deleteTexture(t.glTexture),t.glTexture=null),t.glRenderbuffer&&(e.gl.deleteRenderbuffer(t.glRenderbuffer),t.glRenderbuffer=null),this._device.memoryStatus.textureSize-=this._size,this._gpuTexture=null),this._buffer=null,this._status=exports.GFXStatus.UNREADY}},{key:"resize",value:function(e,t){var i=this._size;this._width=e,this._height=t,this._size=Ar(this._format,this.width,this.height,this.depth,this.mipLevel)*this._arrayLayer,this._gpuTexture&&(this._gpuTexture.width=e,this._gpuTexture.height=t,this._gpuTexture.size=this._size,function(e,t){var i=e.gl;t.glInternelFmt=DD(t.format,i),t.glFormat=BD(t.format,i),t.glType=PD(t.format,i);var n=t.width,r=t.height;switch(t.viewType){case exports.GFXTextureViewType.TV2D:t.viewType=exports.GFXTextureViewType.TV2D,t.glTarget=i.TEXTURE_2D;var o=Math.max(n,r);if(o>e.maxTextureSize&&b(9100,o,e.maxTextureSize),t.samples===exports.GFXSampleCount.X1){var a=e.stateCache.glTexUnits[e.stateCache.texUnit];if(a.glTexture!==t.glTexture&&(i.bindTexture(i.TEXTURE_2D,t.glTexture),a.glTexture=t.glTexture),yr[t.format].isCompressed){if(t.glInternelFmt!==ID.COMPRESSED_RGB_ETC1_WEBGL)for(var s=0;s<t.mipLevel;++s){var l=gr(t.format,n,r,1),c=new Uint8Array(l);i.compressedTexImage2D(i.TEXTURE_2D,s,t.glInternelFmt,n,r,0,c),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}}else for(var u=0;u<t.mipLevel;++u)i.texImage2D(i.TEXTURE_2D,u,t.glInternelFmt,n,r,0,t.glFormat,t.glType,null),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}break;case exports.GFXTextureViewType.CUBE:t.viewType=exports.GFXTextureViewType.CUBE,t.glTarget=i.TEXTURE_CUBE_MAP;var h=Math.max(n,r);h>e.maxCubeMapTextureSize&&b(9100,h,e.maxTextureSize);var p=e.stateCache.glTexUnits[e.stateCache.texUnit];if(p.glTexture!==t.glTexture&&(i.bindTexture(i.TEXTURE_CUBE_MAP,t.glTexture),p.glTexture=t.glTexture),yr[t.format].isCompressed){if(t.glInternelFmt!==ID.COMPRESSED_RGB_ETC1_WEBGL)for(var f=0;f<6;++f){n=t.width,r=t.height;for(var _=0;_<t.mipLevel;++_){var d=gr(t.format,n,r,1),m=new Uint8Array(d);i.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+f,_,t.glInternelFmt,n,r,0,m),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}}}else for(var v=0;v<6;++v){n=t.width,r=t.height;for(var y=0;y<t.mipLevel;++y)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+v,y,t.glInternelFmt,n,r,0,t.glFormat,t.glType,null),n=Math.max(1,n>>1),r=Math.max(1,r>>1)}break;default:console.error("Unsupported GFXTextureType, create texture failed."),t.viewType=exports.GFXTextureViewType.TV2D,t.glTarget=i.TEXTURE_2D}}(this._device,this._gpuTexture),this._device.memoryStatus.textureSize-=i,this._device.memoryStatus.textureSize+=this._size)}},{key:"gpuTexture",get:function(){return this._gpuTexture}}]),t}(),EB=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._gpuTextureView=null,i}return ee(t,Yr),J(t,[{key:"initialize",value:function(e){return this._texture=e.texture,this._type=e.type,this._format=e.format,void 0!==e.baseLevel&&(this._baseLevel=e.baseLevel),void 0!==e.levelCount&&(this._levelCount=e.levelCount),void 0!==e.baseLayer&&(this._baseLayer=e.baseLayer),void 0!==e.layerCount&&(this._layerCount=e.layerCount),this._gpuTextureView={gpuTexture:e.texture.gpuTexture,type:e.type,format:e.format,baseLevel:e.baseLevel?e.baseLevel:0,levelCount:e.levelCount?e.levelCount:1},this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._gpuTextureView=null,this._texture=null,this._status=exports.GFXStatus.UNREADY}},{key:"gpuTextureView",get:function(){return this._gpuTextureView}}]),t}(),CB=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Zr),J(t,[{key:"initialize",value:function(e){void 0!==e.title&&(this._title=e.title),void 0!==e.left&&(this._left=e.left),void 0!==e.top&&(this._top=e.top),void 0!==e.isOffscreen&&(this._isOffscreen=e.isOffscreen),this._width=e.width,this._height=e.height,this._nativeWidth=this._width,this._nativeHeight=this._height,this._colorFmt=e.colorFmt,this._depthStencilFmt=e.depthStencilFmt,this._renderPass=this._device.createRenderPass({colorAttachments:[{format:this._colorFmt,loadOp:exports.GFXLoadOp.CLEAR,storeOp:exports.GFXStoreOp.STORE,sampleCount:1,beginLayout:exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL,endLayout:exports.GFXTextureLayout.PRESENT_SRC}],depthStencilAttachment:{format:this._depthStencilFmt,depthLoadOp:exports.GFXLoadOp.CLEAR,depthStoreOp:exports.GFXStoreOp.STORE,stencilLoadOp:exports.GFXLoadOp.CLEAR,stencilStoreOp:exports.GFXStoreOp.STORE,sampleCount:1,beginLayout:exports.GFXTextureLayout.DEPTH_STENCIL_ATTACHMENT_OPTIMAL,endLayout:exports.GFXTextureLayout.PRESENT_SRC}});var t=[];return this._isOffscreen&&(this._colorFmt!==exports.GFXFormat.UNKNOWN&&(this._colorTex=this._device.createTexture({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.COLOR_ATTACHMENT|exports.GFXTextureUsageBit.SAMPLED,format:this._colorFmt,width:this._width,height:this._height,depth:1,arrayLayer:1,mipLevel:1,flags:exports.GFXTextureFlagBit.NONE}),this._colorTexView=this._device.createTextureView({texture:this._colorTex,type:exports.GFXTextureViewType.TV2D,format:this._colorFmt,baseLevel:0,levelCount:1,baseLayer:0,layerCount:1}),t.push(this._colorTexView)),this._depthStencilFmt!==exports.GFXFormat.UNKNOWN&&(this._depthStencilTex=this._device.createTexture({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.DEPTH_STENCIL_ATTACHMENT,format:this._depthStencilFmt,width:this._width,height:this._height,depth:1,arrayLayer:1,mipLevel:1,flags:exports.GFXTextureFlagBit.NONE}),this._depthStencilTexView=this._device.createTextureView({texture:this._depthStencilTex,type:exports.GFXTextureViewType.TV2D,format:this._depthStencilFmt,baseLevel:0,levelCount:1,baseLayer:0,layerCount:1}))),this._framebuffer=this._device.createFramebuffer({renderPass:this._renderPass,colorViews:t,depthStencilView:this._depthStencilTexView,isOffscreen:this._isOffscreen}),this._status=exports.GFXStatus.SUCCESS,!0}},{key:"destroy",value:function(){this._depthStencilTexView&&(this._depthStencilTexView.destroy(),this._depthStencilTexView=null),this._depthStencilTex&&(this._depthStencilTex.destroy(),this._depthStencilTex=null),this._colorTexView&&(this._colorTexView.destroy(),this._colorTexView=null),this._colorTex&&(this._colorTex.destroy(),this._colorTex=null),this._framebuffer&&(this._framebuffer.destroy(),this._framebuffer=null),this._renderPass&&(this._renderPass.destroy(),this._renderPass=null),this._status=exports.GFXStatus.UNREADY}},{key:"resize",value:function(e,t){this._width=e,this._height=t,(e>this._nativeWidth||t>this._nativeHeight)&&(this._nativeWidth=e,this._nativeHeight=t,this._depthStencilTex&&(this._depthStencilTex.resize(e,t),this._depthStencilTexView.destroy(),this._depthStencilTexView.initialize({texture:this._depthStencilTex,type:exports.GFXTextureViewType.TV2D,format:this._depthStencilFmt})),this._colorTex&&(this._colorTex.resize(e,t),this._colorTexView.destroy(),this._colorTexView.initialize({texture:this._colorTex,type:exports.GFXTextureViewType.TV2D,format:this._colorFmt})),this._framebuffer&&this._framebuffer.isOffscreen&&(this._framebuffer.destroy(),this._framebuffer.initialize({renderPass:this._renderPass,colorViews:[this._colorTexView],depthStencilView:this._depthStencilTexView})))}}]),t}(),wB=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this))).stateCache=new TB,e.nullTex2D=null,e.nullTexCube=null,e._webGLRC=null,e._isAntialias=!0,e._isPremultipliedAlpha=!0,e._useVAO=!1,e._extensions=null,e._EXT_texture_filter_anisotropic=null,e._EXT_frag_depth=null,e._EXT_shader_texture_lod=null,e._EXT_sRGB=null,e._OES_vertex_array_object=null,e._EXT_color_buffer_half_float=null,e._WEBGL_color_buffer_float=null,e._WEBGL_compressed_texture_etc1=null,e._WEBGL_compressed_texture_etc=null,e._WEBGL_compressed_texture_pvrtc=null,e._WEBGL_compressed_texture_astc=null,e._WEBGL_compressed_texture_s3tc=null,e._WEBGL_compressed_texture_s3tc_srgb=null,e._WEBGL_debug_shaders=null,e._WEBGL_draw_buffers=null,e._WEBGL_lose_context=null,e._WEBGL_depth_texture=null,e._WEBGL_debug_renderer_info=null,e._OES_texture_half_float=null,e._OES_texture_half_float_linear=null,e._OES_texture_float=null,e._OES_texture_float_linear=null,e._OES_standard_derivatives=null,e._OES_element_index_uint=null,e._ANGLE_instanced_arrays=null,e}return ee(t,Or),J(t,[{key:"gl",get:function(){return this._webGLRC}},{key:"webGLQueue",get:function(){return this._queue}},{key:"isAntialias",get:function(){return this._isAntialias}},{key:"isPremultipliedAlpha",get:function(){return this._isPremultipliedAlpha}},{key:"useVAO",get:function(){return this._useVAO}},{key:"EXT_texture_filter_anisotropic",get:function(){return this._EXT_texture_filter_anisotropic}},{key:"EXT_frag_depth",get:function(){return this._EXT_frag_depth}},{key:"EXT_shader_texture_lod",get:function(){return this._EXT_shader_texture_lod}},{key:"EXT_sRGB",get:function(){return this._EXT_sRGB}},{key:"OES_vertex_array_object",get:function(){return this._OES_vertex_array_object}},{key:"WEBGL_color_buffer_float",get:function(){return this._WEBGL_color_buffer_float}},{key:"WEBGL_compressed_texture_etc1",get:function(){return this._WEBGL_compressed_texture_etc1}},{key:"WEBGL_compressed_texture_pvrtc",get:function(){return this._WEBGL_compressed_texture_pvrtc}},{key:"WEBGL_compressed_texture_astc",get:function(){return this._WEBGL_compressed_texture_astc}},{key:"WEBGL_compressed_texture_s3tc",get:function(){return this._WEBGL_compressed_texture_s3tc}},{key:"WEBGL_compressed_texture_s3tc_srgb",get:function(){return this._WEBGL_compressed_texture_s3tc_srgb}},{key:"WEBGL_debug_shaders",get:function(){return this._WEBGL_debug_shaders}},{key:"WEBGL_draw_buffers",get:function(){return this._WEBGL_draw_buffers}},{key:"WEBGL_lose_context",get:function(){return this._WEBGL_lose_context}},{key:"WEBGL_depth_texture",get:function(){return this._WEBGL_depth_texture}},{key:"WEBGL_debug_renderer_info",get:function(){return this._WEBGL_debug_renderer_info}},{key:"OES_texture_half_float",get:function(){return this._OES_texture_half_float}},{key:"OES_texture_half_float_linear",get:function(){return this._OES_texture_half_float_linear}},{key:"OES_texture_float",get:function(){return this._OES_texture_float}},{key:"OES_standard_derivatives",get:function(){return this._OES_standard_derivatives}},{key:"OES_element_index_uint",get:function(){return this._OES_element_index_uint}},{key:"ANGLE_instanced_arrays",get:function(){return this._ANGLE_instanced_arrays}}]),J(t,[{key:"initialize",value:function(e){this._canvas=e.canvasElm,this._isAntialias=void 0===e.isAntialias||e.isAntialias,this._isPremultipliedAlpha=void 0===e.isPremultipliedAlpha||e.isPremultipliedAlpha;try{var t={alpha:_c.ENABLE_TRANSPARENT_CANVAS,antialias:this._isAntialias,depth:!0,stencil:!0,premultipliedAlpha:this._isPremultipliedAlpha,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1};this._webGLRC=this._canvas.getContext("webgl",t)}catch(e){return console.error(e),!1}if(!this._webGLRC)return console.error("This device does not support WebGL."),!1;this._canvas2D=document.createElement("canvas"),console.info("WebGL device initialized."),this._gfxAPI=exports.GFXAPI.WEBGL,this._deviceName="WebGL";var i=this._webGLRC;this._WEBGL_debug_renderer_info=this.getExtension("WEBGL_debug_renderer_info"),this._WEBGL_debug_renderer_info?(this._renderer=i.getParameter(this._WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL),this._vendor=i.getParameter(this._WEBGL_debug_renderer_info.UNMASKED_VENDOR_WEBGL)):(this._renderer=i.getParameter(i.RENDERER),this._vendor=i.getParameter(i.VENDOR)),this._version=i.getParameter(i.VERSION),this._maxVertexAttributes=i.getParameter(i.MAX_VERTEX_ATTRIBS),this._maxVertexUniformVectors=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),this._maxFragmentUniformVectors=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),this._maxTextureUnits=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),this._maxVertexTextureUnits=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this._maxCubeMapTextureSize=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),this._depthBits=i.getParameter(i.DEPTH_BITS),this._stencilBits=i.getParameter(i.STENCIL_BITS),this._devicePixelRatio=e.devicePixelRatio||1,this._width=this._canvas.width,this._height=this._canvas.height,this._nativeWidth=Math.max(e.nativeWidth||this._width,0),this._nativeHeight=Math.max(e.nativeHeight||this._height,0),this._colorFmt=exports.GFXFormat.RGBA8,24===this._depthBits?8===this._stencilBits?this._depthStencilFmt=exports.GFXFormat.D24S8:this._depthStencilFmt=exports.GFXFormat.D24:8===this._stencilBits?this._depthStencilFmt=exports.GFXFormat.D16S8:this._depthStencilFmt=exports.GFXFormat.D16,this._extensions=i.getSupportedExtensions();var n="";if(this._extensions){for(var r,o=fe(this._extensions);!(r=o()).done;){n+=r.value+" "}console.debug("EXTENSIONS: "+n)}this._EXT_texture_filter_anisotropic=this.getExtension("EXT_texture_filter_anisotropic"),this._EXT_frag_depth=this.getExtension("EXT_frag_depth"),this._EXT_shader_texture_lod=this.getExtension("EXT_shader_texture_lod"),this._EXT_sRGB=this.getExtension("EXT_sRGB"),this._OES_vertex_array_object=this.getExtension("OES_vertex_array_object"),this._EXT_color_buffer_half_float=this.getExtension("EXT_color_buffer_half_float"),this._WEBGL_color_buffer_float=this.getExtension("WEBGL_color_buffer_float"),this._WEBGL_compressed_texture_etc1=this.getExtension("WEBGL_compressed_texture_etc1"),this._WEBGL_compressed_texture_etc=this.getExtension("WEBGL_compressed_texture_etc"),this._WEBGL_compressed_texture_pvrtc=this.getExtension("WEBGL_compressed_texture_pvrtc"),this._WEBGL_compressed_texture_astc=this.getExtension("WEBGL_compressed_texture_astc"),this._WEBGL_compressed_texture_s3tc=this.getExtension("WEBGL_compressed_texture_s3tc"),this._WEBGL_compressed_texture_s3tc_srgb=this.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this._WEBGL_debug_shaders=this.getExtension("WEBGL_debug_shaders"),this._WEBGL_draw_buffers=this.getExtension("WEBGL_draw_buffers"),this._WEBGL_lose_context=this.getExtension("WEBGL_lose_context"),this._WEBGL_depth_texture=this.getExtension("WEBGL_depth_texture"),this._OES_texture_half_float=this.getExtension("OES_texture_half_float"),this._OES_texture_half_float_linear=this.getExtension("OES_texture_half_float_linear"),this._OES_texture_float=this.getExtension("OES_texture_float"),this._OES_texture_float_linear=this.getExtension("OES_texture_float_linear"),this._OES_standard_derivatives=this.getExtension("OES_standard_derivatives"),this._OES_element_index_uint=this.getExtension("OES_element_index_uint"),this._ANGLE_instanced_arrays=this.getExtension("ANGLE_instanced_arrays"),ws.browserType===ws.BROWSER_TYPE_UC&&(this._ANGLE_instanced_arrays=null),this._features.fill(!1),this._WEBGL_color_buffer_float&&(this._features[exports.GFXFeature.COLOR_FLOAT]=!0),this._EXT_color_buffer_half_float&&(this._features[exports.GFXFeature.COLOR_HALF_FLOAT]=!0),this._OES_texture_float&&(this._features[exports.GFXFeature.TEXTURE_FLOAT]=!0),this._OES_texture_half_float&&(this._features[exports.GFXFeature.TEXTURE_HALF_FLOAT]=!0),this._OES_texture_float_linear&&(this._features[exports.GFXFeature.TEXTURE_FLOAT_LINEAR]=!0),this._OES_texture_half_float_linear&&(this._features[exports.GFXFeature.TEXTURE_HALF_FLOAT_LINEAR]=!0),this._WEBGL_depth_texture&&(this._features[exports.GFXFeature.FORMAT_D24S8]=!0),this._OES_element_index_uint&&(this._features[exports.GFXFeature.ELEMENT_INDEX_UINT]=!0),this._ANGLE_instanced_arrays&&(this._features[exports.GFXFeature.INSTANCED_ARRAYS]=!0);var a="";this._WEBGL_compressed_texture_etc1&&(this._features[exports.GFXFeature.FORMAT_ETC1]=!0,a+="etc1 "),this._WEBGL_compressed_texture_etc&&(this._features[exports.GFXFeature.FORMAT_ETC2]=!0,a+="etc2 "),this._WEBGL_compressed_texture_s3tc&&(this._features[exports.GFXFeature.FORMAT_DXT]=!0,a+="dxt "),this._WEBGL_compressed_texture_pvrtc&&(this._features[exports.GFXFeature.FORMAT_PVRTC]=!0,a+="pvrtc "),this._WEBGL_compressed_texture_astc&&(this._features[exports.GFXFeature.FORMAT_ASTC]=!0,a+="astc "),this._features[exports.GFXFeature.MSAA]=!1,this._OES_vertex_array_object&&(this._useVAO=!0),ws.platform===ws.WECHAT_GAME&&ws.os===ws.OS_ANDROID&&(i.detachShader=function(){}),console.info("RENDERER: "+this._renderer),console.info("VENDOR: "+this._vendor),console.info("VERSION: "+this._version),console.info("DPR: "+this._devicePixelRatio),console.info("SCREEN_SIZE: "+this._width+" x "+this._height),console.info("NATIVE_SIZE: "+this._nativeWidth+" x "+this._nativeHeight),console.info("MAX_VERTEX_UNIFORM_VECTORS: "+this._maxVertexUniformVectors),console.info("DEPTH_BITS: "+this._depthBits),console.info("STENCIL_BITS: "+this._stencilBits),this._EXT_texture_filter_anisotropic&&console.info("MAX_TEXTURE_MAX_ANISOTROPY_EXT: "+this._EXT_texture_filter_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT),console.info("USE_VAO: "+this._useVAO),console.info("COMPRESSED_FORMAT: "+a),this.initStates(i),this._queue=this.createQueue({type:exports.GFXQueueType.GRAPHICS});var s=this._webGLRC.canvas;this._mainWindow=this.createWindow({title:s.title||"",left:s.offsetLeft||0,top:s.offsetTop||0,width:this._webGLRC.drawingBufferWidth,height:this._webGLRC.drawingBufferHeight,colorFmt:this._colorFmt,depthStencilFmt:this._depthStencilFmt}),this._cmdAllocator=this.createCommandAllocator({}),this.nullTex2D=new SB(this),this.nullTex2D.initialize({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.SAMPLED,format:exports.GFXFormat.RGBA8,width:2,height:2,flags:exports.GFXTextureFlagBit.GEN_MIPMAP}),this.nullTexCube=new SB(this),this.nullTexCube.initialize({type:exports.GFXTextureType.TEX2D,usage:exports.GFXTextureUsageBit.SAMPLED,format:exports.GFXFormat.RGBA8,width:2,height:2,arrayLayer:6,flags:exports.GFXTextureFlagBit.CUBEMAP|exports.GFXTextureFlagBit.GEN_MIPMAP});var l={buffOffset:0,buffStride:0,buffTexHeight:0,texOffset:{x:0,y:0,z:0},texExtent:{width:2,height:2,depth:1},texSubres:{baseMipLevel:0,levelCount:1,baseArrayLayer:0,layerCount:1}},c=new Uint8Array(this.nullTex2D.size);return c.fill(0),this.copyBuffersToTexture([c],this.nullTex2D,[l]),l.texSubres.layerCount=6,this.copyBuffersToTexture([c,c,c,c,c,c],this.nullTexCube,[l]),!0}},{key:"destroy",value:function(){this.nullTex2D&&(this.nullTex2D.destroy(),this.nullTex2D=null),this.nullTexCube&&(this.nullTexCube.destroy(),this.nullTexCube=null),this._mainWindow&&(this._mainWindow.destroy(),this._mainWindow=null),this._cmdAllocator&&(this._cmdAllocator.destroy(),this._cmdAllocator=null),this._queue&&(this._queue.destroy(),this._queue=null),this._webGLRC=null}},{key:"resize",value:function(e,t){this._width===e&&this._height===t||(console.info("Resizing device: "+e+"x"+t),this._canvas.width=e,this._canvas.height=t,this._width=e,this._height=t)}},{key:"createBuffer",value:function(e){var t=new sB(this);return t.initialize(e),t}},{key:"createTexture",value:function(e){var t=new SB(this);return t.initialize(e),t}},{key:"createTextureView",value:function(e){var t=new EB(this);return t.initialize(e),t}},{key:"createSampler",value:function(e){var t=new bB(this);return t.initialize(e),t}},{key:"createBindingLayout",value:function(e){var t=new MD(this);return t.initialize(e),t}},{key:"createShader",value:function(e){var t=new xB(this);return t.initialize(e),t}},{key:"createInputAssembler",value:function(e){var t=new pB(this);return t.initialize(e),t}},{key:"createRenderPass",value:function(e){var t=new gB(this);return t.initialize(e),t}},{key:"createFramebuffer",value:function(e){var t=new hB(this);return t.initialize(e),t}},{key:"createPipelineLayout",value:function(e){var t=new fB(this);return t.initialize(e),t}},{key:"createPipelineState",value:function(e){var t=new dB(this);return t.initialize(e),t}},{key:"createCommandAllocator",value:function(e){var t=new cB(this);return t.initialize(e),t}},{key:"createCommandBuffer",value:function(e){var t=new(e.type===exports.GFXCommandBufferType.PRIMARY?vB:uB)(this);return t.initialize(e),t}},{key:"createQueue",value:function(e){var t=new yB(this);return t.initialize(e),t}},{key:"createWindow",value:function(e){var t=new CB(this);return t.initialize(e),t}},{key:"present",value:function(){this._cmdAllocator.releaseCmds();var e=this._queue;this._numDrawCalls=e.numDrawCalls,this._numInstances=e.numInstances,this._numTris=e.numTris,e.clear()}},{key:"copyBuffersToTexture",value:function(e,t,i){aB(this,e,t.gpuTexture,i)}},{key:"copyTexImagesToTexture",value:function(e,t,i){!function(e,t,i,n){var r=e.gl,o=e.stateCache.glTexUnits[e.stateCache.texUnit];o.glTexture!==i.glTexture&&(r.bindTexture(i.glTarget,i.glTexture),o.glTexture=i.glTexture);var a=0,s=0,l=0;switch(i.glTarget){case r.TEXTURE_2D:for(var c=0;c<n.length;c++){var u=n[c];for(a=u.texSubres.baseMipLevel;a<u.texSubres.levelCount;++a)r.texSubImage2D(r.TEXTURE_2D,a,u.texOffset.x,u.texOffset.y,i.glFormat,i.glType,t[s++])}break;case r.TEXTURE_CUBE_MAP:for(var h=0;h<n.length;h++){var p=n[h],f=p.texSubres.baseArrayLayer+p.texSubres.layerCount;for(l=p.texSubres.baseArrayLayer;l<f;++l){var _=p.texSubres.baseMipLevel+p.texSubres.levelCount;for(a=p.texSubres.baseMipLevel;a<_;++a)r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,a,p.texOffset.x,p.texOffset.y,i.glFormat,i.glType,t[s++])}}break;default:console.error("Unsupported GL texture type, copy buffer to texture failed.")}i.flags&exports.GFXTextureFlagBit.GEN_MIPMAP&&i.isPowerOf2&&r.generateMipmap(i.glTarget)}(this,e,t.gpuTexture,i)}},{key:"copyFramebufferToBuffer",value:function(e,t,i){var n=this._webGLRC,r=e.gpuFramebuffer,o=r.gpuColorViews[0].format,a=BD(o,n),s=PD(o,n),l=Tr(yr[o]),c=this.stateCache.glFramebuffer;this.stateCache.glFramebuffer!==r.glFramebuffer&&(n.bindFramebuffer(n.FRAMEBUFFER,r.glFramebuffer),this.stateCache.glFramebuffer=r.glFramebuffer);for(var u,h=new l(t),p=fe(i);!(u=p()).done;){var f=u.value,_=f.buffOffset+f.buffTexHeight*f.buffStride,d=f.texExtent.width,m=f.texExtent.height,v=gr(o,d,m,1),y=h.subarray(_,_+v);n.readPixels(f.texOffset.x,f.texOffset.y,d,m,a,s,y)}this.stateCache.glFramebuffer!==c&&(n.bindFramebuffer(n.FRAMEBUFFER,c),this.stateCache.glFramebuffer=c)}},{key:"blitFramebuffer",value:function(e,t,i,n,r){}},{key:"getExtension",value:function(e){for(var t=["","WEBKIT_","MOZ_"],i=0;i<t.length;++i){var n=this._webGLRC.getExtension(t[i]+e);if(n)return n}return null}},{key:"initStates",value:function(e){e.activeTexture(e.TEXTURE0),e.pixelStorei(e.PACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.disable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),e.frontFace(e.CCW),e.disable(e.POLYGON_OFFSET_FILL),e.polygonOffset(0,0),e.enable(e.DEPTH_TEST),e.depthMask(!0),e.depthFunc(e.LESS),e.depthRange(0,1),e.stencilFuncSeparate(e.FRONT,e.ALWAYS,1,65535),e.stencilOpSeparate(e.FRONT,e.KEEP,e.KEEP,e.KEEP),e.stencilMaskSeparate(e.FRONT,65535),e.stencilFuncSeparate(e.BACK,e.ALWAYS,1,65535),e.stencilOpSeparate(e.BACK,e.KEEP,e.KEEP,e.KEEP),e.stencilMaskSeparate(e.BACK,65535),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.disable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.blendColor(0,0,0,0)}}]),t}();cc.WebGLGFXDevice=wB;var kB,OB,RB,FB,IB,MB,PB,DB,BB,NB,LB,zB,GB,UB,XB,VB,HB,jB,WB,YB,qB,QB,ZB,KB,JB,$B,eN,tN,iN,nN,rN,oN,aN,sN,lN,cN,uN,hN=new Mi,pN=new Qi;function fN(e,t,i,n){var r=i.datas,o=t.currBufferBatch,a=o.byteOffset>>2,s=i.vertexCount,l=o.indiceOffset,c=o.vertexOffset;o.request(s,i.indiceCount)||(o=t.currBufferBatch,s=0,l=0,c=0);var u=o.vData,h=o.iData;e.getWorldMatrix(pN);for(var p=0;p<s;p++){var f=r[p];Mi.set(hN,f.x,f.y,0),Mi.transformMat4(hN,hN,pN),u[a++]=hN.x,u[a++]=hN.y,u[a++]=hN.z,u[a++]=f.u,u[a++]=f.v,on.toArray(u,n,a),a+=4}for(var _=0,d=s/4;_<d;_++){var m=c+4*_;h[l++]=m,h[l++]=m+1,h[l++]=m+2,h[l++]=m+1,h[l++]=m+3,h[l++]=m+2}}var _N,dN,mN,vN=new on;!function(e){e[e.NONE=0]="NONE",e[e.COLOR=1]="COLOR",e[e.SPRITE=2]="SPRITE",e[e.SCALE=3]="SCALE"}(_N||(_N={})),bt(_N),function(e){e.NORMAL="normal",e.HOVER="hover",e.PRESSED="pressed",e.DISABLED="disabled"}(dN||(dN={})),(mN||(mN={})).CLICK="click";var yN=(kB=qa("cc.ButtonComponent"),OB=as("i18n:cc.ButtonComponent"),RB=ts(110),FB=es("UI/Button"),IB=$a(By),MB=Qa({type:rg,displayOrder:0,tooltip:"指定 Button 背景节点，Button 状态改变时会修改此节点的 Color 或 Sprite 属性"}),PB=Qa({displayOrder:1,tooltip:"按钮是否可交互，这一项未选中时，按钮处在禁用状态"}),DB=Qa({type:_N,displayOrder:2,tooltip:"按钮状态变化时的过渡类型"}),BB=Qa({tooltip:"普通状态的按钮背景颜色"}),NB=Qa({tooltip:"按下状态的按钮背景颜色"}),LB=Qa({tooltip:"悬停状态的按钮背景颜色"}),zB=Qa({tooltip:"禁用状态的按钮背景颜色"}),GB=Qa({min:0,max:10,tooltip:"按钮颜色变化或者缩放变化的过渡时间"}),UB=Qa({tooltip:"当用户点击按钮后，按钮会缩放到一个值，这个值等于 Button 原始 scale * zoomScale。"}),XB=Qa({type:Ru,tooltip:"普通状态的按钮背景图资源"}),VB=Qa({type:Ru,tooltip:"按下状态的按钮背景图资源"}),HB=Qa({type:Ru,tooltip:"悬停状态的按钮背景图资源"}),jB=Qa({type:Ru,tooltip:"禁用状态的按钮背景图资源"}),WB=Qa({type:[Ak],displayOrder:20,tooltip:"按钮点击事件的列表。先将数量改为1或更多，就可以为每个点击事件设置接受者和处理方法"}),kB(YB=OB(YB=RB(YB=FB(YB=IB((uN=cN=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"clickEvents",QB,ne(i)),_e(i,"_interactable",ZB,ne(i)),_e(i,"_transition",KB,ne(i)),_e(i,"_normalColor",JB,ne(i)),_e(i,"_hoverColor",$B,ne(i)),_e(i,"_pressColor",eN,ne(i)),_e(i,"_disabledColor",tN,ne(i)),_e(i,"_normalSprite",iN,ne(i)),_e(i,"_hoverSprite",nN,ne(i)),_e(i,"_pressedSprite",rN,ne(i)),_e(i,"_disabledSprite",oN,ne(i)),_e(i,"_duration",aN,ne(i)),_e(i,"_zoomScale",sN,ne(i)),_e(i,"_target",lN,ne(i)),i._pressed=!1,i._hovered=!1,i._fromColor=new on,i._toColor=new on,i._time=0,i._transitionFinished=!0,i._fromScale=new Mi,i._toScale=new Mi,i._originalScale=new Mi,i._sprite=null,i._targetScale=new Mi,i}return ee(t,sp),J(t,[{key:"__preload",value:function(){this.target||(this.target=this.node);var e=this.node.getComponent(Uw);e&&(this._normalSprite=e.spriteFrame),this._applyTarget(),this._updateState()}},{key:"onEnable",value:function(){this._registerEvent()}},{key:"onDisable",value:function(){this._resetState(),this.node.off(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.off(exports.SystemEventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this),this.node.off(exports.SystemEventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(exports.SystemEventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(exports.SystemEventType.MOUSE_LEAVE,this._onMouseMoveOut,this)}},{key:"update",value:function(e){var t=this._target?this._target:this.node;if(!this._transitionFinished&&(this._transition===_N.COLOR||this._transition===_N.SCALE)){this._time+=e;var i=1;this._duration>0&&(i=this._time/this._duration),i>=1&&(i=1,this._transitionFinished=!0);var n=t.getComponent(Fw);n&&(this._transition===_N.COLOR?(on.lerp(vN,this._fromColor,this._toColor,i),n.color=vN):this.transition===_N.SCALE&&(t.getScale(this._targetScale),this._targetScale.x=_i(this._fromScale.x,this._toScale.x,i),this._targetScale.y=_i(this._fromScale.y,this._toScale.y,i),t.setScale(this._targetScale)))}}},{key:"_resizeNodeToTargetNode",value:function(){}},{key:"_resetState",value:function(){this._pressed=!1,this._hovered=!1;var e=this._target;if(e){var t=e.getComponent(Fw);if(t){var i=this._transition;i===_N.COLOR&&this._interactable?t.color=this._normalColor:i===_N.SCALE&&e.setScale(this._originalScale),this._transitionFinished=!0}}}},{key:"_registerEvent",value:function(){this.node.on(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.on(exports.SystemEventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this),this.node.on(exports.SystemEventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(exports.SystemEventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(exports.SystemEventType.MOUSE_LEAVE,this._onMouseMoveOut,this)}},{key:"_getTargetSprite",value:function(e){var t=null;return e&&(t=e.getComponent(Uw)),t}},{key:"_applyTarget",value:function(){this._sprite=this._getTargetSprite(this._target),this._target&&Mi.copy(this._originalScale,this._target.getScale())}},{key:"_onTouchBegan",value:function(e){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),e&&(e.propagationStopped=!0))}},{key:"_onTouchMove",value:function(e){if(this._interactable&&this.enabledInHierarchy&&this._pressed){if(!e)return!1;var t=e.touch;if(!t)return!1;var i,n=this.node._uiProps.uiTransformComp.isHit(t.getUILocation());if(this._transition===_N.SCALE&&this._target)n?(Mi.copy(this._fromScale,this._originalScale),Mi.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this._target&&this._target.setScale(this._originalScale));else i=n?dN.PRESSED:dN.NORMAL,this._applyTransition(i);e&&(e.propagationStopped=!0)}}},{key:"_onTouchEnded",value:function(e){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(Ak.emitEvents(this.clickEvents,e),this.node.emit(mN.CLICK,this)),this._pressed=!1,this._updateState(),e&&(e.propagationStopped=!0))}},{key:"_onTouchCancel",value:function(e){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())}},{key:"_onMouseMoveIn",value:function(e){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==_N.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))}},{key:"_onMouseMoveOut",value:function(e){this._hovered&&(this._hovered=!1,this._updateState())}},{key:"_updateState",value:function(){var e=this._getButtonState();this._applyTransition(e)}},{key:"_getButtonState",value:function(){var e=dN.NORMAL;return this._interactable?this._pressed?e=dN.PRESSED:this._hovered&&(e=dN.HOVER):e=dN.DISABLED,e.toString()}},{key:"_updateColorTransition",value:function(e){var t=this[e+"Color"],i=this._target;if(i){var n=i.getComponent(Fw);n&&(e===dN.DISABLED?n.color=t:(this._fromColor=n.color.clone(),this._toColor=t,this._time=0,this._transitionFinished=!1))}}},{key:"_updateSpriteTransition",value:function(e){var t=this[e+"Sprite"];this._sprite&&t&&(this._sprite.spriteFrame=t)}},{key:"_updateScaleTransition",value:function(e){this._interactable&&(e===dN.PRESSED?this._zoomUp():this._zoomBack())}},{key:"_zoomUp",value:function(){Mi.copy(this._fromScale,this._originalScale),Mi.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1}},{key:"_zoomBack",value:function(){this._target&&(Mi.copy(this._fromScale,this._target.getScale()),Mi.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)}},{key:"_applyTransition",value:function(e){var t=this._transition;t===_N.COLOR?this._updateColorTransition(e):t===_N.SPRITE?this._updateSpriteTransition(e):t===_N.SCALE&&this._updateScaleTransition(e)}},{key:"target",get:function(){return this._target},set:function(e){this._target!==e&&(this._target=e,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(e){this._interactable=e,this._updateState(),this._interactable||this._resetState()}},{key:"_resizeToTarget",set:function(e){e&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(e){this._transition!==e&&(this._transition=e)}},{key:"normalColor",get:function(){return this._normalColor},set:function(e){this._normalColor!==e&&(this._normalColor.set(e),this._updateState())}},{key:"pressedColor",get:function(){return this._pressColor},set:function(e){this._pressColor!==e&&this._pressColor.set(e)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(e){this._hoverColor!==e&&this._hoverColor.set(e)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(e){this._disabledColor!==e&&(this._disabledColor.set(e),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration!==e&&(this._duration=e)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(e){this._zoomScale!==e&&(this._zoomScale=e)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(e){if(this._normalSprite!==e){this._normalSprite=e;var t=this.node.getComponent(Uw);t&&(t.spriteFrame=e),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(e){this._pressedSprite!==e&&(this._pressedSprite=e,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(e){this._hoverSprite!==e&&(this._hoverSprite=e,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(e){this._disabledSprite!==e&&(this._disabledSprite=e,this._updateState())}}]),t}(),cN.Transition=_N,cN.EventType=mN,de((qB=uN).prototype,"target",[MB],Object.getOwnPropertyDescriptor(qB.prototype,"target"),qB.prototype),de(qB.prototype,"interactable",[PB],Object.getOwnPropertyDescriptor(qB.prototype,"interactable"),qB.prototype),de(qB.prototype,"transition",[DB],Object.getOwnPropertyDescriptor(qB.prototype,"transition"),qB.prototype),de(qB.prototype,"normalColor",[BB],Object.getOwnPropertyDescriptor(qB.prototype,"normalColor"),qB.prototype),de(qB.prototype,"pressedColor",[NB],Object.getOwnPropertyDescriptor(qB.prototype,"pressedColor"),qB.prototype),de(qB.prototype,"hoverColor",[LB],Object.getOwnPropertyDescriptor(qB.prototype,"hoverColor"),qB.prototype),de(qB.prototype,"disabledColor",[zB],Object.getOwnPropertyDescriptor(qB.prototype,"disabledColor"),qB.prototype),de(qB.prototype,"duration",[GB],Object.getOwnPropertyDescriptor(qB.prototype,"duration"),qB.prototype),de(qB.prototype,"zoomScale",[UB],Object.getOwnPropertyDescriptor(qB.prototype,"zoomScale"),qB.prototype),de(qB.prototype,"normalSprite",[XB],Object.getOwnPropertyDescriptor(qB.prototype,"normalSprite"),qB.prototype),de(qB.prototype,"pressedSprite",[VB],Object.getOwnPropertyDescriptor(qB.prototype,"pressedSprite"),qB.prototype),de(qB.prototype,"hoverSprite",[HB],Object.getOwnPropertyDescriptor(qB.prototype,"hoverSprite"),qB.prototype),de(qB.prototype,"disabledSprite",[jB],Object.getOwnPropertyDescriptor(qB.prototype,"disabledSprite"),qB.prototype),QB=de(qB.prototype,"clickEvents",[WB],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ZB=de(qB.prototype,"_interactable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),KB=de(qB.prototype,"_transition",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _N.NONE}}),JB=de(qB.prototype,"_normalColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(214,214,214,255)}}),$B=de(qB.prototype,"_hoverColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(211,211,211,255)}}),eN=de(qB.prototype,"_pressColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),tN=de(qB.prototype,"_disabledColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(124,124,124,255)}}),iN=de(qB.prototype,"_normalSprite",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nN=de(qB.prototype,"_hoverSprite",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rN=de(qB.prototype,"_pressedSprite",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oN=de(qB.prototype,"_disabledSprite",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),aN=de(qB.prototype,"_duration",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),sN=de(qB.prototype,"_zoomScale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),lN=de(qB.prototype,"_target",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),YB=qB))||YB)||YB)||YB)||YB)||YB);cc.ButtonComponent=yN;var gN,AN,bN,xN,TN,SN,EN,CN,wN,kN,ON,RN,FN,IN,MN,PN,DN,BN,NN,LN,zN,GN,UN,XN,VN,HN,jN,WN,YN,qN,QN,ZN,KN,JN,$N,eL,tL,iL,nL,rL,oL,aL=function(){function e(){Z(this,e),this.pool=[]}return J(e,[{key:"get",value:function(){var e=this.pool.pop();if(!e){var t=document.createElement("canvas"),i=t.getContext("2d");e={canvas:t,context:i}}return e}},{key:"put",value:function(e){this.pool.length>=32||this.pool.push(e)}}]),e}();(rL=exports.HorizontalTextAlignment||(exports.HorizontalTextAlignment={}))[rL.LEFT=0]="LEFT",rL[rL.CENTER=1]="CENTER",rL[rL.RIGHT=2]="RIGHT",bt(exports.HorizontalTextAlignment),function(e){e[e.TOP=0]="TOP",e[e.CENTER=1]="CENTER",e[e.BOTTOM=2]="BOTTOM"}(exports.VerticalTextAlignment||(exports.VerticalTextAlignment={})),bt(exports.VerticalTextAlignment),function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.SHRINK=2]="SHRINK",e[e.RESIZE_HEIGHT=3]="RESIZE_HEIGHT"}(exports.Overflow||(exports.Overflow={})),bt(exports.Overflow),function(e){e[e.NONE=0]="NONE",e[e.BITMAP=1]="BITMAP",e[e.CHAR=2]="CHAR"}(oL||(oL={})),bt(oL);var sL=(gN=qa("cc.LabelComponent"),AN=as("i18n:cc.LabelComponent"),bN=ts(110),xN=es("UI/Render/Label"),TN=Qa({displayOrder:4,multiline:!0,tooltip:"Label 显示的文本内容字符串"}),SN=Qa({type:exports.HorizontalTextAlignment,displayOrder:5,tooltip:"文字水平对齐模式"}),EN=Qa({type:exports.VerticalTextAlignment,displayOrder:6,tooltip:"文字垂直对齐模式"}),CN=Qa({readonly:!0,displayName:"Actual Font Size",visible:!1}),wN=Qa({displayOrder:7,tooltip:"文字尺寸，以 point 为单位"}),kN=Qa({displayOrder:8,tooltip:"文字字体名字"}),ON=Qa({displayOrder:8,tooltip:"文字行高，以 point 为单位"}),RN=Qa({type:exports.Overflow,displayOrder:9,tooltip:"文字排版模式，包括以下三种：\n 1. CLAMP: 节点约束框之外的文字会被截断 \n 2. SHRINK: 自动根据节点约束框缩小文字\n 3. RESIZE_HEIGHT: 根据文本内容自动更新节点的 height 属性."}),FN=Qa({displayOrder:10,tooltip:"自动换行"}),IN=Qa({type:Ld,displayOrder:11,tooltip:"Label 使用的字体资源"}),MN=Qa({displayOrder:12,tooltip:"是否使用系统默认字体"}),PN=Qa({type:oL,displayOrder:13,tooltip:"文本缓存模式，包括以下三种：\n 1. NONE: 不做任何缓存，文本内容进行一次绘制 \n 2. BITMAP: 将文本作为静态图像加入动态图集进行批次合并，但是不能频繁动态修改文本内容 \n 3. CHAR: 将文本拆分为字符并且把字符纹理缓存到一张字符图集中进行复用，适用于字符内容重复并且频繁更新的文本内容"}),DN=Qa({displayOrder:15,tooltip:"字体加粗"}),BN=Qa({displayOrder:16,tooltip:"字体倾斜"}),NN=Qa({displayOrder:17,tooltip:"字体加下划线"}),gN(LN=AN(LN=bN(LN=xN((nL=iL=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_useOriginalSize",GN,ne(e)),_e(e,"_string",UN,ne(e)),_e(e,"_horizontalAlign",XN,ne(e)),_e(e,"_verticalAlign",VN,ne(e)),_e(e,"_actualFontSize",HN,ne(e)),_e(e,"_fontSize",jN,ne(e)),_e(e,"_fontFamily",WN,ne(e)),_e(e,"_lineHeight",YN,ne(e)),_e(e,"_overflow",qN,ne(e)),_e(e,"_enableWrapText",QN,ne(e)),_e(e,"_font",ZN,ne(e)),_e(e,"_isSystemFontUsed",KN,ne(e)),e._spacingX=0,_e(e,"_isItalic",JN,ne(e)),_e(e,"_isBold",$N,ne(e)),_e(e,"_isUnderline",eL,ne(e)),_e(e,"_cacheMode",tL,ne(e)),e._N$file=null,e._texture=null,e._ttfSpriteFrame=null,e._userDefinedFont=null,e._assemblerData=null,e._fontAtlas=null,e._letterTexture=null,e._ttfSpriteFrame=null,e}return ee(t,Fw),J(t,[{key:"string",get:function(){return this._string},set:function(e){e=e.toString(),this._string!==e&&(this._string=e,this.updateRenderData())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(e){this._horizontalAlign!==e&&(this._horizontalAlign=e,this.updateRenderData())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(e){this._verticalAlign!==e&&(this._verticalAlign=e,this.updateRenderData())}},{key:"actualFontSize",get:function(){return this._actualFontSize},set:function(e){this._actualFontSize=e}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.updateRenderData())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.updateRenderData())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.updateRenderData())}},{key:"overflow",get:function(){return this._overflow},set:function(e){this._overflow!==e&&(this._overflow=e,this.updateRenderData())}},{key:"enableWrapText",get:function(){return this._enableWrapText},set:function(e){this._enableWrapText!==e&&(this._enableWrapText=e,this.updateRenderData())}},{key:"font",get:function(){return this._font},set:function(e){this._font!==e&&(this._isSystemFontUsed=!e,this._font=e,"string"==typeof e&&g(4e3),this._renderData&&(this.destroyRenderData(),this._renderData=null),this._fontAtlas=null,this.updateRenderData(!0))}},{key:"useSystemFont",get:function(){return this._isSystemFontUsed},set:function(e){this._isSystemFontUsed!==e&&(this.destroyRenderData(),this._renderData=null,this._isSystemFontUsed=!!e,e&&(this.font=null,this._flushAssembler(),this.updateRenderData()))}},{key:"cacheMode",get:function(){return this._cacheMode},set:function(e){this._cacheMode!==e&&(this._cacheMode===oL.CHAR&&(this._ttfSpriteFrame=null),this._cacheMode=e,this.updateRenderData(!0))}},{key:"spriteFrame",get:function(){return this._texture}},{key:"isBold",get:function(){return this._isBold},set:function(e){this._isBold!==e&&(this._isBold=e,this.updateRenderData())}},{key:"isItalic",get:function(){return this._isItalic},set:function(e){this._isItalic!==e&&(this._isItalic=e,this.updateRenderData())}},{key:"isUnderline",get:function(){return this._isUnderline},set:function(e){this._isUnderline!==e&&(this._isUnderline=e,this.updateRenderData())}},{key:"assemblerData",get:function(){return this._assemblerData}},{key:"fontAtlas",get:function(){return this._fontAtlas},set:function(e){this._fontAtlas=e}},{key:"spacingX",get:function(){return this._spacingX},set:function(e){this._spacingX!==e&&(this._spacingX=e,this.updateRenderData())}},{key:"_bmFontOriginalSize",get:function(){return this._font instanceof Qd?this._font.fontSize:-1}}]),J(t,[{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._font||this._isSystemFontUsed||(this.useSystemFont=!0),this._isSystemFontUsed&&!this._fontFamily&&(this.fontFamily="Arial"),this.updateRenderData(!0)}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this)}},{key:"onDestroy",value:function(){if(this._assembler&&this._assembler.resetAssemblerData&&this._assembler.resetAssemblerData(this._assemblerData),this._assemblerData=null,this._ttfSpriteFrame){var e=this._ttfSpriteFrame.texture;if(e){var i=e;i.image&&i.image.destroy(),e.destroy()}this._ttfSpriteFrame=null}this._letterTexture=null,ae(te(t.prototype),"onDestroy",this).call(this)}},{key:"updateRenderData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.markForUpdateRenderData(),e&&(this._flushAssembler(),this._applyFontTexture())}},{key:"_render",value:function(e){e.commitComp(this,this._texture.getGFXTextureView(),this._assembler,this._texture.getGFXSampler())}},{key:"_updateColor",value:function(){this._font instanceof Qd?ae(te(t.prototype),"_updateColor",this).call(this):this.updateRenderData(!1)}},{key:"_canRender",value:function(){if(!ae(te(t.prototype),"_canRender",this).call(this)||!this._string)return!1;var e=this._font;if(e&&e instanceof Qd){var i=e.spriteFrame;if(!i||!i.textureLoaded())return!1}return!0}},{key:"_flushAssembler",value:function(){var e=t.Assembler.getAssembler(this);this._assembler!==e&&(this.destroyRenderData(),this._assembler=e),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this._material)}},{key:"_flushMaterial",value:function(){this._updateMaterial(this._material)}},{key:"_applyFontTexture",value:function(){var e=this,t=this._font;if(t instanceof Qd){var i=t.spriteFrame,n=function(){e._texture=i,e._flushMaterial(),e._assembler&&e._assembler.updateRenderData(e)};i&&(i.loaded||i.textureLoaded?n():i.once("load",n,this))}else{if(this.cacheMode===oL.CHAR&&ws.browserType!==ws.BROWSER_TYPE_WECHAT_GAME_SUB)this._letterTexture=this._assembler.getAssemblerData(),this._texture=this._letterTexture;else if(!this._ttfSpriteFrame){this._ttfSpriteFrame=new Ru,this._assemblerData=this._assembler.getAssemblerData();var r=new Vl(this._assemblerData.canvas)._texture;this._ttfSpriteFrame.texture=r}this.cacheMode!==oL.CHAR&&(this._texture=this._ttfSpriteFrame),this._flushMaterial(),this._assembler&&this._assembler.updateRenderData(this)}}}]),t}(),iL.HorizontalAlign=exports.HorizontalTextAlignment,iL.VerticalAlign=exports.VerticalTextAlignment,iL.Overflow=exports.Overflow,iL.CacheMode=oL,iL._canvasPool=new aL,de((zN=nL).prototype,"string",[TN],Object.getOwnPropertyDescriptor(zN.prototype,"string"),zN.prototype),de(zN.prototype,"horizontalAlign",[SN],Object.getOwnPropertyDescriptor(zN.prototype,"horizontalAlign"),zN.prototype),de(zN.prototype,"verticalAlign",[EN],Object.getOwnPropertyDescriptor(zN.prototype,"verticalAlign"),zN.prototype),de(zN.prototype,"actualFontSize",[CN],Object.getOwnPropertyDescriptor(zN.prototype,"actualFontSize"),zN.prototype),de(zN.prototype,"fontSize",[wN],Object.getOwnPropertyDescriptor(zN.prototype,"fontSize"),zN.prototype),de(zN.prototype,"fontFamily",[kN],Object.getOwnPropertyDescriptor(zN.prototype,"fontFamily"),zN.prototype),de(zN.prototype,"lineHeight",[ON],Object.getOwnPropertyDescriptor(zN.prototype,"lineHeight"),zN.prototype),de(zN.prototype,"overflow",[RN],Object.getOwnPropertyDescriptor(zN.prototype,"overflow"),zN.prototype),de(zN.prototype,"enableWrapText",[FN],Object.getOwnPropertyDescriptor(zN.prototype,"enableWrapText"),zN.prototype),de(zN.prototype,"font",[IN],Object.getOwnPropertyDescriptor(zN.prototype,"font"),zN.prototype),de(zN.prototype,"useSystemFont",[MN],Object.getOwnPropertyDescriptor(zN.prototype,"useSystemFont"),zN.prototype),de(zN.prototype,"cacheMode",[PN],Object.getOwnPropertyDescriptor(zN.prototype,"cacheMode"),zN.prototype),de(zN.prototype,"isBold",[DN],Object.getOwnPropertyDescriptor(zN.prototype,"isBold"),zN.prototype),de(zN.prototype,"isItalic",[BN],Object.getOwnPropertyDescriptor(zN.prototype,"isItalic"),zN.prototype),de(zN.prototype,"isUnderline",[NN],Object.getOwnPropertyDescriptor(zN.prototype,"isUnderline"),zN.prototype),GN=de(zN.prototype,"_useOriginalSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),UN=de(zN.prototype,"_string",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"label"}}),XN=de(zN.prototype,"_horizontalAlign",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.HorizontalTextAlignment.CENTER}}),VN=de(zN.prototype,"_verticalAlign",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.VerticalTextAlignment.CENTER}}),HN=de(zN.prototype,"_actualFontSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jN=de(zN.prototype,"_fontSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),WN=de(zN.prototype,"_fontFamily",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),YN=de(zN.prototype,"_lineHeight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),qN=de(zN.prototype,"_overflow",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.Overflow.NONE}}),QN=de(zN.prototype,"_enableWrapText",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ZN=de(zN.prototype,"_font",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),KN=de(zN.prototype,"_isSystemFontUsed",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),JN=de(zN.prototype,"_isItalic",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$N=de(zN.prototype,"_isBold",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eL=de(zN.prototype,"_isUnderline",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tL=de(zN.prototype,"_cacheMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oL.NONE}}),LN=zN))||LN)||LN)||LN)||LN);cc.LabelComponent=sL;var lL,cL,uL,hL=function(){function e(){Z(this,e)}return J(e,null,[{key:"add",value:function(e){var t=this._tabIndexList;-1===t.indexOf(e)&&t.push(e)}},{key:"remove",value:function(e){var t=this._tabIndexList,i=t.indexOf(e);-1!==i&&t.splice(i,1)}},{key:"resort",value:function(){this._tabIndexList.sort((function(e,t){return e._delegate.tabIndex-t._delegate.tabIndex}))}},{key:"next",value:function(e){var t=this._tabIndexList,i=t.indexOf(e);if(e.setFocus(!1),-1!==i){var n=t[i+1];n&&n._delegate.tabIndex>=0&&n.setFocus(!0)}}}]),e}();hL._tabIndexList=[],function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DONE=1]="DONE",e[e.SEND=2]="SEND",e[e.SEARCH=3]="SEARCH",e[e.GO=4]="GO",e[e.NEXT=5]="NEXT"}(lL||(lL={})),At(lL),function(e){e[e.ANY=0]="ANY",e[e.EMAIL_ADDR=1]="EMAIL_ADDR",e[e.NUMERIC=2]="NUMERIC",e[e.PHONE_NUMBER=3]="PHONE_NUMBER",e[e.URL=4]="URL",e[e.DECIMAL=5]="DECIMAL",e[e.SINGLE_LINE=6]="SINGLE_LINE"}(cL||(cL={})),At(cL),function(e){e[e.PASSWORD=0]="PASSWORD",e[e.SENSITIVE=1]="SENSITIVE",e[e.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",e[e.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",e[e.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",e[e.DEFAULT=5]="DEFAULT"}(uL||(uL={})),At(uL);var pL=function(){function e(){Z(this,e),this._editing=!1,this._delegate=null}return J(e,[{key:"init",value:function(e){}},{key:"onEnable",value:function(){}},{key:"update",value:function(){}},{key:"onDisable",value:function(){this._editing&&this.endEditing()}},{key:"clear",value:function(){this._delegate=null}},{key:"setTabIndex",value:function(e){}},{key:"setSize",value:function(e,t){}},{key:"setFocus",value:function(e){e?this.beginEditing():this.endEditing()}},{key:"isFocused",value:function(){return this._editing}},{key:"beginEditing",value:function(){}},{key:"endEditing",value:function(){}}]),e}(),fL=new Qi,_L=new Qi,dL=new Mi,mL=null,vL=0,yL={zoomInvalid:!1};ws.OS_ANDROID!==ws.os||ws.browserType!==ws.BROWSER_TYPE_SOUGOU&&ws.browserType!==ws.BROWSER_TYPE_360||(yL.zoomInvalid=!0);var gL,AL,bL,xL,TL,SL,EL,CL,wL,kL,OL,RL,FL,IL,ML,PL,DL,BL,NL,LL,zL,GL,UL,XL,VL,HL,jL,WL,YL,qL,QL,ZL,KL,JL,$L,ez,tz,iz,nz,rz,oz,az,sz,lz=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._delegate=null,i._inputMode=cL.ANY,i._inputFlag=uL.DEFAULT,i._returnType=lL.DEFAULT,i._maxLength=50,i._placeholderText="",i._alwaysOnTop=!1,i._size=new en,i._node=null,i._editing=!1,i.__eventListeners={},i.__fullscreen=!1,i.__autoResize=!1,i.__rotateScreen=!1,i.__orientationChanged=void 0,i._edTxt=null,i._textColor=on.WHITE.clone(),i._edFontSize=14,i._isTextArea=!1,i._textLabelFont=null,i._textLabelFontSize=null,i._textLabelFontColor=null,i._textLabelAlign=null,i._placeholderLabelFont=null,i._placeholderLabelFontSize=null,i._placeholderLabelFontColor=null,i._placeholderLabelAlign=null,i._placeholderLineHeight=null,i._placeholderStyleSheet=null,i._domId="EditBoxId_".concat(++vL),i}return ee(t,pL),J(t,[{key:"init",value:function(e){e&&(this._delegate=e,e.inputMode===cL.ANY?this._createTextArea():this._createInput(),hL.add(this),this.setTabIndex(e.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),this.__fullscreen=lS.isAutoFullScreenEnabled(),this.__autoResize=lS._resizeWithBrowserSize)}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){this._editing&&this._edTxt&&this._edTxt.blur()}},{key:"clear",value:function(){this._removeEventListeners(),this._removeDomFromGameContainer(),hL.remove(this),mL===this&&(mL=null),this._delegate=null}},{key:"update",value:function(){this._updateMatrix()}},{key:"setTabIndex",value:function(e){this._edTxt.tabIndex=e,hL.resort()}},{key:"setSize",value:function(e,t){var i=this._edTxt;i&&(i.style.width=e+"px",i.style.height=t+"px")}},{key:"setFocus",value:function(e){e?this.beginEditing():this._edTxt.blur()}},{key:"isFocused",value:function(){return this._editing}},{key:"beginEditing",value:function(){mL&&mL!==this&&mL.setFocus(!1),this._editing=!0,mL=this,this._showDom(),this._edTxt&&this._delegate&&(this._edTxt.focus(),this._delegate._editBoxEditingDidBegan())}},{key:"endEditing",value:function(){}},{key:"_createInput",value:function(){this._isTextArea=!1,this._edTxt=document.createElement("input")}},{key:"_createTextArea",value:function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")}},{key:"_addDomToGameContainer",value:function(){tS.container&&this._edTxt&&(tS.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))}},{key:"_removeDomFromGameContainer",value:function(){pt(tS.container,this._edTxt)&&this._edTxt&&tS.container.removeChild(this._edTxt),pt(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),delete this._edTxt,delete this._placeholderStyleSheet}},{key:"_showDom",value:function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),ws.isMobile&&this._showDomOnMobile()}},{key:"_hideDom",value:function(){var e=this._edTxt;e&&this._delegate&&(e.style.display="none",this._delegate._showLabels()),ws.isMobile&&this._hideDomOnMobile()}},{key:"_showDomOnMobile",value:function(){ws.os===ws.OS_ANDROID&&(this.__fullscreen&&(lS.enableAutoFullScreen(!1),dS.exitFullScreen()),this.__autoResize&&lS.resizeWithBrowserSize(!1),this._adjustWindowScroll())}},{key:"_hideDomOnMobile",value:function(){var e=this;ws.os===ws.OS_ANDROID&&setTimeout((function(){mL||(e.__fullscreen&&lS.enableAutoFullScreen(!0),e.__autoResize&&lS.resizeWithBrowserSize(!0))}),400),this._scrollBackWindow()}},{key:"_adjustWindowScroll",value:function(){var e=this;setTimeout((function(){window.scrollY<40&&e._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)}},{key:"_scrollBackWindow",value:function(){setTimeout((function(){ws.browserType!==ws.BROWSER_TYPE_WECHAT||ws.os!==ws.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)}},{key:"_updateMatrix",value:function(){if(this._edTxt){var e=this._delegate.node,t=lS.getScaleX(),i=lS.getScaleY(),n=lS.getViewportRect(),r=lS.getDevicePixelRatio();e.getWorldMatrix(fL);var o=e._uiProps.uiTransformComp;if(o&&Mi.set(dL,-o.anchorX*o.width,-o.anchorY*o.height,dL.z),Qi.transform(fL,fL,dL),!e._uiProps.uiTransformComp)return!1;var a=gk.root.ui.getScreen(e._uiProps.uiTransformComp.visibility);if(a){a.node.getWorldRT(_L);var s=_L.m12,l=_L.m13,c=$x.center;_L.m12=c.x-(_L.m00*s+_L.m04*l),_L.m13=c.y-(_L.m01*s+_L.m05*l),Qi.multiply(_L,_L,fL),t/=r,i/=r;var u=tS.container,h=_L.m00*t,p=fL.m01,f=fL.m04,_=_L.m05*i,d=parseInt(u&&u.style.paddingLeft||"0");d+=n.x/r;var m=parseInt(u&&u.style.paddingBottom||"0");m+=n.y/r;var v=_L.m12*t+d,y=_L.m13*i+m;yL.zoomInvalid&&(this.setSize(this._size.width*h,this._size.height*_),h=1,_=1);var g="matrix("+h+","+-p+","+-f+","+_+","+v+","+-y+")";this._edTxt.style.transform=g,this._edTxt.style["-webkit-transform"]=g,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},{key:"_updateInputType",value:function(){var e=this._delegate,t=e.inputMode,i=e.inputFlag,n=e.returnType,r=this._edTxt;if(this._inputMode!==t||this._inputFlag!==i||this._returnType!==n){if(this._inputMode=t,this._inputFlag=i,this._returnType=n,this._isTextArea){var o="none";return i===uL.INITIAL_CAPS_ALL_CHARACTERS?o="uppercase":i===uL.INITIAL_CAPS_WORD&&(o="capitalize"),void(r.style.textTransform=o)}if(r=r,i!==uL.PASSWORD){var a=r.type;t===cL.EMAIL_ADDR?a="email":t===cL.NUMERIC||t===cL.DECIMAL?a="number":t===cL.PHONE_NUMBER?(a="number",r.pattern="[0-9]*"):t===cL.URL?a="url":(a="text",n===lL.SEARCH&&(a="search")),r.type=a;var s="none";i===uL.INITIAL_CAPS_ALL_CHARACTERS?s="uppercase":i===uL.INITIAL_CAPS_WORD&&(s="capitalize"),r.style.textTransform=s}else r.type="password"}}},{key:"_updateMaxLength",value:function(){var e=this._delegate.maxLength;e<0&&(e=65535),this._edTxt.maxLength=e}},{key:"_initStyleSheet",value:function(){if(this._edTxt){var e=this._edTxt;e.style.fontSize=this._edFontSize+"px",e.style.color="#000000",e.style.border="0px",e.style.background="transparent",e.style.width="100%",e.style.height="100%",e.style.outline="medium",e.style.padding="0",e.style.textTransform="uppercase",e.style.display="none",e.style.position="absolute",e.style.bottom="0px",e.style.left="2px",e.className="cocosEditBox",e.style.fontFamily="Arial",e.id=this._domId,this._isTextArea?(e.style.resize="none",e.style.overflowY="scroll"):((e=e).type="text",e.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}}},{key:"_updateStyleSheet",value:function(){var e=this._delegate,t=this._edTxt;t&&e&&(t.value=e.string,t.placeholder=e.placeholder,this._updateTextLabel(e.textLabel),this._updatePlaceholderLabel(e.placeholderLabel))}},{key:"_updateTextLabel",value:function(e){if(e){var t=e.font;if(t=!t||t instanceof Qd?e.fontFamily:t._fontFamily,(this._textLabelFont!==t||this._textLabelFontSize!==e.fontSize||this._textLabelFontColor!==e.fontColor||this._textLabelAlign!==e.horizontalAlign)&&(this._textLabelFont=t,this._textLabelFontSize=e.fontSize,this._textLabelFontColor=e.fontColor,this._textLabelAlign=e.horizontalAlign,this._edTxt)){var i=this._edTxt;switch(i.style.fontSize="".concat(e.fontSize,"px"),i.style.color=e.color.toCSS("rgba"),i.style.fontFamily=t,e.horizontalAlign){case sL.HorizontalAlign.LEFT:i.style.textAlign="left";break;case sL.HorizontalAlign.CENTER:i.style.textAlign="center";break;case sL.HorizontalAlign.RIGHT:i.style.textAlign="right"}}}}},{key:"_updatePlaceholderLabel",value:function(e){if(e){var t=e.font;if(t=!t||t instanceof Qd?e.fontFamily:e.font._fontFamily,this._placeholderLabelFont!==t||this._placeholderLabelFontSize!==e.fontSize||this._placeholderLabelFontColor!==e.fontColor||this._placeholderLabelAlign!==e.horizontalAlign||this._placeholderLineHeight!==e.fontSize){this._placeholderLabelFont=t,this._placeholderLabelFontSize=e.fontSize,this._placeholderLabelFontColor=e.fontColor,this._placeholderLabelAlign=e.horizontalAlign,this._placeholderLineHeight=e.fontSize;var i=this._placeholderStyleSheet,n=e.fontSize,r=e.color.toCSS("rgba"),o=e.fontSize,a="";switch(e.horizontalAlign){case sL.HorizontalAlign.LEFT:a="left";break;case sL.HorizontalAlign.CENTER:a="center";break;case sL.HorizontalAlign.RIGHT:a="right"}i.innerHTML="\n            #".concat(this._domId,"::-webkit-input-placeholder {\n                text-transform: initial;\n                font-family: ").concat(t,";\n                font-size: ").concat(n,"px;\n                color: ").concat(r,";\n                line-height: ").concat(o,"px;\n                text-align: ").concat(a,";\n            }\n            #").concat(this._domId,"::-moz-placeholder {\n                text-transform: initial;\n                font-family: ").concat(t,";\n                font-size: ").concat(n,"px;\n                color: ").concat(r,";\n                line-height: ").concat(o,"px;\n                text-align: ").concat(a,";\n            }\n            #").concat(this._domId,":-ms-input-placeholder {\n                text-transform: initial;\n                font-family: ").concat(t,";\n                font-size: ").concat(n,"px;\n                color: ").concat(r,";\n                line-height: ").concat(o,"px;\n                text-align: ").concat(a,";\n            }\n        ")}}}},{key:"_registerEventListeners",value:function(){if(this._edTxt){var e=this,t=this._edTxt,i=!1,n=this.__eventListeners;n.compositionStart=function(){i=!0},n.compositionEnd=function(){i=!1,e._delegate._editBoxTextChanged(t.value)},n.onInput=function(){i||e._delegate._editBoxTextChanged(t.value)},n.onClick=function(){e._editing&&ws.isMobile&&e._adjustWindowScroll()},n.onKeydown=function(i){i.keyCode===_c.KEY.enter?(i.propagationStopped=!0,e._delegate._editBoxEditingReturn(),e._isTextArea||t.blur()):i.keyCode===_c.KEY.tab&&(i.propagationStopped=!0,i.preventDefault(),hL.next(e))},n.onBlur=function(){e._editing=!1,mL=null,e._hideDom(),e._delegate._editBoxEditingDidEnded()},t.addEventListener("compositionstart",n.compositionStart),t.addEventListener("compositionend",n.compositionEnd),t.addEventListener("input",n.onInput),t.addEventListener("keydown",n.onKeydown),t.addEventListener("blur",n.onBlur),t.addEventListener("touchstart",n.onClick)}}},{key:"_removeEventListeners",value:function(){if(this._edTxt){var e=this._edTxt,t=this.__eventListeners;e.removeEventListener("compositionstart",t.compositionStart),e.removeEventListener("compositionend",t.compositionEnd),e.removeEventListener("input",t.onInput),e.removeEventListener("keydown",t.onKeydown),e.removeEventListener("blur",t.onBlur),e.removeEventListener("touchstart",t.onClick),t.compositionStart=null,t.compositionEnd=null,t.onInput=null,t.onKeydown=null,t.onBlur=null,t.onClick=null}}}]),t}();function cz(e){return e.replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}))}function uz(e){return e.charAt(0).toUpperCase()+e.slice(1)}!function(e){e.EDITING_DID_BEGAN="editing-did-began",e.EDITING_DID_ENDED="editing-did-ended",e.TEXT_CHANGED="text-changed",e.EDITING_RETURN="editing-return"}(sz||(sz={}));var hz,pz,fz,_z,dz,mz,vz,yz,gz,Az,bz,xz,Tz,Sz,Ez,Cz,wz,kz,Oz,Rz,Fz,Iz,Mz,Pz,Dz,Bz,Nz,Lz,zz,Gz,Uz,Xz,Vz,Hz,jz,Wz,Yz,qz=(gL=qa("cc.EditBoxComponent"),AL=as("i18n:cc.EditBoxComponent"),bL=ts(100),xL=es("UI/EditBox"),TL=Qa({tooltip:"输入框的初始输入内容，如果为空则会显示占位符的文本",displayOrder:1}),SL=Qa({tooltip:"输入框文本的字体大小",displayOrder:2}),EL=Qa({type:on,tooltip:"输入框文本的颜色",displayOrder:3}),CL=Qa({type:uL,tooltip:"指定输入标志位，可以指定输入方式为密码或者单词首字母大写",displayOrder:4}),wL=Qa({type:cL,tooltip:"指定输入模式: ANY 表示多行输入，其它都是单行输入，移动平台上还可以指定键盘样式",displayOrder:5}),kL=Qa({type:lL,tooltip:"指定移动设备上面回车按钮的样式",displayOrder:6}),OL=Qa({tooltip:"输入框最大允许输入的字符个数",displayOrder:7}),RL=Qa({tooltip:"输入框文本的行高",displayOrder:8}),FL=Qa({type:Ru,tooltip:"输入框的背景图片",displayOrder:10}),IL=Qa({tooltip:"输入框输入文本节点上挂载的 Label 组件对象",type:sL,displayOrder:11}),ML=Qa({tooltip:"输入框占位符节点上挂载的 Label 组件对象",type:sL,displayOrder:12}),PL=Qa({tooltip:"输入框占位符的文本内容",displayOrder:13}),DL=Qa({tooltip:"输入框占位符的字体大小",displayOrder:14}),BL=Qa({tooltip:"输入框占位符的字体颜色",displayOrder:15}),NL=Qa({tooltip:"输入框总是可见，并且永远在游戏视图的上面（这个属性只有在 Web 上面修改有意义）",displayOrder:21}),LL=Qa({tooltip:"修改 DOM 输入元素的 tabIndex（这个属性只有在 Web 上面修改有意义）",displayOrder:22}),zL=Qa({type:[Ak],tooltip:"该事件在用户点击输入框获取焦点的时候被触发",displayOrder:31}),GL=Qa({type:[Ak],tooltip:"编辑文本输入框时触发的事件回调",displayOrder:32}),UL=Qa({type:[Ak],tooltip:"在单行模式下面，一般是在用户按下回车或者点击屏幕输入框以外的地方调用该函数。 如果是多行输入，一般是在用户点击屏幕输入框以外的地方调用该函数",displayOrder:33}),XL=Qa({type:[Ak],tooltip:"该事件在用户按下回车键的时候被触发, 如果是单行输入框，按回车键还会使输入框失去焦点",displayOrder:34}),gL(VL=AL(VL=bL(VL=xL(VL=Ja((az=oz=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"editingDidBegan",jL,ne(i)),_e(i,"textChanged",WL,ne(i)),_e(i,"editingDidEnded",YL,ne(i)),_e(i,"editingReturn",qL,ne(i)),i._impl=null,i._background=null,_e(i,"_textLabel",QL,ne(i)),_e(i,"_placeholderLabel",ZL,ne(i)),_e(i,"_returnType",KL,ne(i)),_e(i,"_useOriginalSize",JL,ne(i)),_e(i,"_string",$L,ne(i)),_e(i,"_tabIndex",ez,ne(i)),_e(i,"_backgroundImage",tz,ne(i)),_e(i,"_inputFlag",iz,ne(i)),_e(i,"_inputMode",nz,ne(i)),_e(i,"_maxLength",rz,ne(i)),i._isLabelVisible=!1,i}return ee(t,sp),J(t,[{key:"__preload",value:function(){this._init()}},{key:"onEnable",value:function(){this._registerEvent(),this._impl&&this._impl.onEnable()}},{key:"update",value:function(){this._impl&&this._impl.update()}},{key:"onDisable",value:function(){this._unregisterEvent(),this._impl&&this._impl.onDisable()}},{key:"onDestroy",value:function(){this._impl&&this._impl.clear()}},{key:"setFocus",value:function(){this._impl&&this._impl.setFocus(!0)}},{key:"focus",value:function(){this._impl&&this._impl.setFocus(!0)}},{key:"blur",value:function(){this._impl&&this._impl.setFocus(!1)}},{key:"isFocused",value:function(){return!!this._impl&&this._impl.isFocused()}},{key:"_editBoxEditingDidBegan",value:function(){Ak.emitEvents(this.editingDidBegan,this),this.node.emit(sz.EDITING_DID_BEGAN,this)}},{key:"_editBoxEditingDidEnded",value:function(){Ak.emitEvents(this.editingDidEnded,this),this.node.emit(sz.EDITING_DID_ENDED,this)}},{key:"_editBoxTextChanged",value:function(e){e=this._updateLabelStringStyle(e,!0),this.string=e,Ak.emitEvents(this.textChanged,e,this),this.node.emit(sz.TEXT_CHANGED,this)}},{key:"_editBoxEditingReturn",value:function(){Ak.emitEvents(this.editingReturn,this),this.node.emit(sz.EDITING_RETURN,this)}},{key:"_showLabels",value:function(){this._isLabelVisible=!0,this._updateLabels()}},{key:"_hideLabels",value:function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)}},{key:"_onTouchBegan",value:function(e){e.propagationStopped=!0}},{key:"_onTouchCancel",value:function(e){e.propagationStopped=!0}},{key:"_onTouchEnded",value:function(e){this._impl&&this._impl.beginEditing(),e.propagationStopped=!0}},{key:"_init",value:function(){this._createBackgroundSprite(),this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(exports.SystemEventType.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new t._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()}},{key:"_createBackgroundSprite",value:function(){this._background||(this._background=this.node.getComponent(Uw),this._background||(this._background=this.node.addComponent(Uw))),this._background.type=Uw.Type.SLICED,this._background.spriteFrame=this._backgroundImage}},{key:"_updateTextLabel",value:function(){var e=this._textLabel;if(!e){var t=this.node.getChildByName("TEXT_LABEL");t||(t=new rg("TEXT_LABEL")),(e=t.getComponent(sL))||(e=t.addComponent(sL)),t.parent=this.node,this._textLabel=e}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),e.overflow=sL.Overflow.CLAMP,this._inputMode===cL.ANY?(e.verticalAlign=exports.VerticalTextAlignment.TOP,e.enableWrapText=!0):(e.verticalAlign=exports.VerticalTextAlignment.CENTER,e.enableWrapText=!1),e.string=this._updateLabelStringStyle(this._string)}},{key:"_updatePlaceholderLabel",value:function(){var e=this._placeholderLabel;if(!e){var t=this.node.getChildByName("PLACEHOLDER_LABEL");t||(t=new rg("PLACEHOLDER_LABEL")),(e=t.getComponent(sL))||(e=t.addComponent(sL)),t.parent=this.node,this._placeholderLabel=e}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),e.overflow=sL.Overflow.CLAMP,this._inputMode===cL.ANY?(e.verticalAlign=exports.VerticalTextAlignment.TOP,e.enableWrapText=!0):(e.verticalAlign=exports.VerticalTextAlignment.CENTER,e.enableWrapText=!1),e.string=this.placeholder}},{key:"_syncSize",value:function(){var e=this.node.getContentSize();this._background&&(this._background.node._uiProps.uiTransformComp.anchorPoint=this.node._uiProps.uiTransformComp.anchorPoint,this._background.node.setContentSize(e)),this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)}},{key:"_updateLabels",value:function(){if(this._isLabelVisible){var e=this._string;this._textLabel&&(this._textLabel.node.active=""!==e),this._placeholderLabel&&(this._placeholderLabel.node.active=""===e)}}},{key:"_updateString",value:function(e){var t=this._textLabel;if(t){var i=e;i&&(i=this._updateLabelStringStyle(i)),t.string=i,this._updateLabels()}}},{key:"_updateLabelStringStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._inputFlag;if(t||i!==uL.PASSWORD)i===uL.INITIAL_CAPS_ALL_CHARACTERS?e=e.toUpperCase():i===uL.INITIAL_CAPS_WORD?e=cz(e):i===uL.INITIAL_CAPS_SENTENCE&&(e=uz(e));else{for(var n="",r=e.length,o=0;o<r;++o)n+="●";e=n}return e}},{key:"_registerEvent",value:function(){this.node.on(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.on(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_unregisterEvent",value:function(){this.node.off(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.off(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_updateLabelPosition",value:function(e){var t=this.node,i=-t.anchorX*t.width,n=-t.anchorY*t.height,r=this._placeholderLabel,o=this._textLabel;o&&(o.node.setContentSize(e.width-2,e.height),o.node.position=new Mi(i+2,n+e.height,o.node.position.z),o.verticalAlign=this._inputMode===cL.ANY?exports.VerticalTextAlignment.TOP:exports.VerticalTextAlignment.CENTER,o.enableWrapText=this._inputMode===cL.ANY),r&&(r.node.setContentSize(e.width-2,e.height),r.lineHeight=e.height,r.node.position=new Mi(i+2,n+e.height,r.node.position.z),r.verticalAlign=this._inputMode===cL.ANY?exports.VerticalTextAlignment.TOP:exports.VerticalTextAlignment.CENTER,r.enableWrapText=this._inputMode===cL.ANY)}},{key:"_resizeChildNodes",value:function(){var e=this._textLabel&&this._textLabel.node;e&&(e.position=new Mi(-this.node.width/2,this.node.height/2,e.position.z),e.width=this.node.width,e.height=this.node.height);var t=this._placeholderLabel&&this._placeholderLabel.node;t&&(t.position=new Mi(-this.node.width/2,this.node.height/2,t.position.z),t.width=this.node.width,t.height=this.node.height);var i=this._background&&this._background.node;i&&(i.width=this.node.width,i.height=this.node.height)}},{key:"string",get:function(){return this._string},set:function(e){this._maxLength>=0&&e.length>=this._maxLength&&(e=e.slice(0,this._maxLength)),this._string=e,this._updateString(e)}},{key:"fontSize",get:function(){return this._textLabel?this._textLabel.fontSize:20},set:function(e){this._textLabel&&(this._textLabel.fontSize=e)}},{key:"fontColor",get:function(){return this._textLabel?this._textLabel.color:on.WHITE.clone()},set:function(e){this._textLabel&&(this._textLabel.color=e)}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(e){this._inputFlag=e,this._updateString(this._string)}},{key:"inputMode",get:function(){return this._inputMode},set:function(e){this._inputMode!==e&&(this._inputMode=e,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(e){this._returnType=e}},{key:"maxLength",get:function(){return this._maxLength},set:function(e){this._maxLength=e}},{key:"lineHeight",get:function(){return this._textLabel?this._textLabel.lineHeight:40},set:function(e){this._textLabel&&(this._textLabel.lineHeight=e)}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(e){this._backgroundImage!==e&&(this._backgroundImage=e,this._createBackgroundSprite())}},{key:"textLabel",get:function(){return this._textLabel},set:function(e){this._textLabel!==e&&(this._textLabel=e,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(e){this._placeholderLabel!==e&&(this._placeholderLabel=e,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(e){this._placeholderLabel&&(this._placeholderLabel.string=e)}},{key:"placeholderFontSize",get:function(){return this._placeholderLabel?this._placeholderLabel.fontSize:20},set:function(e){this._placeholderLabel&&(this._placeholderLabel.fontSize=e)}},{key:"placeholderFontColor",get:function(){return this._placeholderLabel?this._placeholderLabel.color:on.GRAY.clone()},set:function(e){this._placeholderLabel&&(this._placeholderLabel.color=e)}},{key:"stayOnTop",get:function(){},set:function(e){console.warn("stayOnTop is removed.")}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(e){this._tabIndex!==e&&(this._tabIndex=e,this._impl&&this._impl.setTabIndex(e))}}]),t}(),oz._EditBoxImpl=pL,oz.KeyboardReturnType=lL,oz.InputFlag=uL,oz.InputMode=cL,oz.EventType=sz,de((HL=az).prototype,"string",[TL],Object.getOwnPropertyDescriptor(HL.prototype,"string"),HL.prototype),de(HL.prototype,"fontSize",[SL],Object.getOwnPropertyDescriptor(HL.prototype,"fontSize"),HL.prototype),de(HL.prototype,"fontColor",[EL],Object.getOwnPropertyDescriptor(HL.prototype,"fontColor"),HL.prototype),de(HL.prototype,"inputFlag",[CL],Object.getOwnPropertyDescriptor(HL.prototype,"inputFlag"),HL.prototype),de(HL.prototype,"inputMode",[wL],Object.getOwnPropertyDescriptor(HL.prototype,"inputMode"),HL.prototype),de(HL.prototype,"returnType",[kL],Object.getOwnPropertyDescriptor(HL.prototype,"returnType"),HL.prototype),de(HL.prototype,"maxLength",[OL],Object.getOwnPropertyDescriptor(HL.prototype,"maxLength"),HL.prototype),de(HL.prototype,"lineHeight",[RL],Object.getOwnPropertyDescriptor(HL.prototype,"lineHeight"),HL.prototype),de(HL.prototype,"backgroundImage",[FL],Object.getOwnPropertyDescriptor(HL.prototype,"backgroundImage"),HL.prototype),de(HL.prototype,"textLabel",[IL],Object.getOwnPropertyDescriptor(HL.prototype,"textLabel"),HL.prototype),de(HL.prototype,"placeholderLabel",[ML],Object.getOwnPropertyDescriptor(HL.prototype,"placeholderLabel"),HL.prototype),de(HL.prototype,"placeholder",[PL],Object.getOwnPropertyDescriptor(HL.prototype,"placeholder"),HL.prototype),de(HL.prototype,"placeholderFontSize",[DL],Object.getOwnPropertyDescriptor(HL.prototype,"placeholderFontSize"),HL.prototype),de(HL.prototype,"placeholderFontColor",[BL],Object.getOwnPropertyDescriptor(HL.prototype,"placeholderFontColor"),HL.prototype),de(HL.prototype,"stayOnTop",[NL],Object.getOwnPropertyDescriptor(HL.prototype,"stayOnTop"),HL.prototype),de(HL.prototype,"tabIndex",[LL],Object.getOwnPropertyDescriptor(HL.prototype,"tabIndex"),HL.prototype),jL=de(HL.prototype,"editingDidBegan",[zL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),WL=de(HL.prototype,"textChanged",[GL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),YL=de(HL.prototype,"editingDidEnded",[UL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qL=de(HL.prototype,"editingReturn",[XL],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),QL=de(HL.prototype,"_textLabel",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ZL=de(HL.prototype,"_placeholderLabel",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),KL=de(HL.prototype,"_returnType",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lL.DEFAULT}}),JL=de(HL.prototype,"_useOriginalSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$L=de(HL.prototype,"_string",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ez=de(HL.prototype,"_tabIndex",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tz=de(HL.prototype,"_backgroundImage",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),iz=de(HL.prototype,"_inputFlag",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return uL.DEFAULT}}),nz=de(HL.prototype,"_inputMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cL.ANY}}),rz=de(HL.prototype,"_maxLength",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),VL=HL))||VL)||VL)||VL)||VL)||VL);ws.isBrowser&&(qz._EditBoxImpl=lz),cc.EditBoxComponent=qz;var Qz,Zz,Kz,Jz,$z,eG=exports.SystemEventType;!function(e){e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.GRID=3]="GRID"}(Qz||(Qz={})),bt(Qz),function(e){e[e.NONE=0]="NONE",e[e.CONTAINER=1]="CONTAINER",e[e.CHILDREN=2]="CHILDREN"}(Zz||(Zz={})),bt(Zz),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(Kz||(Kz={})),bt(Kz),function(e){e[e.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",e[e.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(Jz||(Jz={})),bt(Jz),function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}($z||($z={})),bt($z);var tG,iG,nG,rG,oG,aG,sG,lG,cG,uG,hG,pG,fG,_G,dG,mG,vG,yG,gG,AG,bG,xG,TG,SG=new Mi,EG=new Mi,CG=(hz=qa("cc.LayoutComponent"),pz=as("i18n:cc.LayoutComponent"),fz=ts(110),_z=es("UI/Layout"),dz=$a(By),mz=Qa({type:Qz,tooltip:"自动布局模式，包括：\n 1. NONE，不会对子节点进行自动布局 \n 2. HORIZONTAL，横向自动排布子物体 \n 3. VERTICAL，垂直自动排布子物体\n 4. GRID, 采用网格方式对子物体自动进行布局"}),vz=Qa({type:Zz,tooltip:"缩放模式，包括：\n 1. NONE，不会对子节点和容器进行大小缩放 \n 2. CONTAINER, 对容器的大小进行缩放 \n 3. CHILDREN, 对子节点的大小进行缩放"}),yz=Qa({tooltip:"每个格子的大小，只有布局类型为 GRID 的时候才有效"}),gz=Qa({type:Kz,tooltip:"起始轴方向类型，可进行水平和垂直布局排列，只有布局类型为 GRID 的时候才有效"}),Az=Qa({tooltip:"容器内左边距，只会在一个布局方向上生效"}),bz=Qa({tooltip:"容器内右边距，只会在一个布局方向上生效"}),xz=Qa({tooltip:"容器内上边距，只会在一个布局方向上生效"}),Tz=Qa({tooltip:"容器内下边距，只会在一个布局方向上生效"}),Sz=Qa({tooltip:"子节点之间的水平间距"}),Ez=Qa({tooltip:"子节点之间的垂直间距"}),Cz=Qa({type:Jz,tooltip:"垂直排列子节点的方向"}),wz=Qa({type:$z,tooltip:"水平排列子节点的方向"}),kz=Qa({tooltip:"容器内边距，该属性会在四个布局方向上生效"}),Oz=Qa({tooltip:"子节点缩放比例是否影响布局"}),hz(Rz=pz(Rz=fz(Rz=_z(Rz=dz(Rz=Ja((Yz=Wz=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_resizeMode",Iz,ne(i)),_e(i,"_N$layoutType",Mz,ne(i)),_e(i,"_N$padding",Pz,ne(i)),_e(i,"_cellSize",Dz,ne(i)),_e(i,"_startAxis",Bz,ne(i)),_e(i,"_paddingLeft",Nz,ne(i)),_e(i,"_paddingRight",Lz,ne(i)),_e(i,"_paddingTop",zz,ne(i)),_e(i,"_paddingBottom",Gz,ne(i)),_e(i,"_spacingX",Uz,ne(i)),_e(i,"_spacingY",Xz,ne(i)),_e(i,"_verticalDirection",Vz,ne(i)),_e(i,"_horizontalDirection",Hz,ne(i)),_e(i,"_affectedByScale",jz,ne(i)),i._layoutSize=new en(300,200),i._layoutDirty=!0,i._isAlign=!1,i}return ee(t,sp),J(t,[{key:"updateLayout",value:function(){this._layoutDirty&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)}},{key:"onEnable",value:function(){this._addEventListeners(),this.node.getContentSize().equals(new en)&&this.node.setContentSize(this._layoutSize),0!==this._N$padding&&this._migratePaddingData(),this._doLayoutDirty()}},{key:"onDisable",value:function(){this._removeEventListeners()}},{key:"_migratePaddingData",value:function(){this._paddingLeft=this._N$padding,this._paddingRight=this._N$padding,this._paddingTop=this._N$padding,this._paddingBottom=this._N$padding,this._N$padding=0}},{key:"_addEventListeners",value:function(){gk.on(lk.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(eG.SIZE_CHANGED,this._resized,this),this.node.on(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(eG.CHILD_ADDED,this._childAdded,this),this.node.on(eG.CHILD_REMOVED,this._childRemoved,this),this._addChildrenEventListeners()}},{key:"_removeEventListeners",value:function(){gk.off(lk.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(eG.SIZE_CHANGED,this._resized,this),this.node.off(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(eG.CHILD_ADDED,this._childAdded,this),this.node.off(eG.CHILD_REMOVED,this._childRemoved,this),this._removeChildrenEventListeners()}},{key:"_addChildrenEventListeners",value:function(){for(var e,t=fe(this.node.children);!(e=t()).done;){var i=e.value;i.on(eG.TRANSFORM_CHANGED,this._doScaleDirty,this),i.on(eG.SIZE_CHANGED,this._doLayoutDirty,this),i.on(eG.TRANSFORM_CHANGED,this._transformDirty,this),i.on(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on("active-in-hierarchy-changed",this._doLayoutDirty,this)}}},{key:"_removeChildrenEventListeners",value:function(){for(var e,t=fe(this.node.children);!(e=t()).done;){var i=e.value;i.off(eG.TRANSFORM_CHANGED,this._doScaleDirty,this),i.off(eG.SIZE_CHANGED,this._doLayoutDirty,this),i.off(eG.TRANSFORM_CHANGED,this._transformDirty,this),i.off(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off("active-in-hierarchy-changed",this._doLayoutDirty,this)}}},{key:"_childAdded",value:function(e){e.on(eG.TRANSFORM_CHANGED,this._doScaleDirty,this),e.on(eG.SIZE_CHANGED,this._doLayoutDirty,this),e.on(eG.TRANSFORM_CHANGED,this._transformDirty,this),e.on(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),e.on("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()}},{key:"_childRemoved",value:function(e){e.off(eG.TRANSFORM_CHANGED,this._doScaleDirty,this),e.off(eG.SIZE_CHANGED,this._doLayoutDirty,this),e.off(eG.TRANSFORM_CHANGED,this._transformDirty,this),e.off(eG.ANCHOR_CHANGED,this._doLayoutDirty,this),e.off("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()}},{key:"_resized",value:function(){this._layoutSize=this.node.getContentSize(),this._doLayoutDirty()}},{key:"_doLayoutHorizontally",value:function(e,t,i,n){var r=this.node.getAnchorPoint(),o=this.node.children,a=1,s=this._paddingLeft,l=-r.x*e;this._horizontalDirection===$z.RIGHT_TO_LEFT&&(a=-1,l=(1-r.x)*e,s=this._paddingRight);for(var c,u=l+a*s-a*this._spacingX,h=0,p=0,f=0,_=0,d=0,m=0,v=0,y=fe(o);!(c=y()).done;){c.value.activeInHierarchy&&v++}var g=this._cellSize.width;this._N$layoutType!==Qz.GRID&&this._resizeMode===Zz.CHILDREN&&(g=(e-(this._paddingLeft+this._paddingRight)-(v-1)*this._spacingX)/v);for(var A,b=fe(o);!(A=b()).done;){var x=A.value;if(x.activeInHierarchy){x.getScale(EG);var T=this._getUsedScaleValue(EG.x),S=this._getUsedScaleValue(EG.y);this._resizeMode===Zz.CHILDREN&&(x.width=g/T,this._N$layoutType===Qz.GRID&&(x.height=this._cellSize.height/S));var E=x.anchorX,C=x.width*T,w=x.height*S;f>p&&(p=f),w>=p&&(f=p,p=w,m=x.getAnchorPoint().y),this._horizontalDirection===$z.RIGHT_TO_LEFT&&(E=1-x.anchorX),u=u+a*E*C+a*this._spacingX;var k=a*(1-E)*C;if(t){var O=u+k+a*(a>0?this._paddingRight:this._paddingLeft),R=!1;this._horizontalDirection===$z.LEFT_TO_RIGHT&&O>(1-r.x)*e&&(R=!0);var F=!1;this._horizontalDirection===$z.RIGHT_TO_LEFT&&O<-r.x*e&&(F=!0),(R||F)&&(w>=p?(0===f&&(f=p),h+=f,f=p):(h+=p,f=w,p=0),u=l+a*(s+E*C),_++)}var I=i(x,h,_);e>=C+this._paddingLeft+this._paddingRight&&n&&(x.getPosition(SG),x.setPosition(u,I,SG.z));var M=1,P=void 0,D=0===p?w:p;this._verticalDirection===Jz.TOP_TO_BOTTOM?(d=d||this.node.getContentSize().height,(P=I+(M=-1)*(D*m+this._paddingBottom))<d&&(d=P)):(d=d||-this.node.getContentSize().height,(P=I+M*(D*m+this._paddingTop))>d&&(d=P)),u+=k}}return d}},{key:"_doLayoutVertically",value:function(e,t,i,n){var r=this.node.getAnchorPoint(),o=this.node.children,a=1,s=this._paddingBottom,l=-r.y*e;this._verticalDirection===Jz.TOP_TO_BOTTOM&&(a=-1,l=(1-r.y)*e,s=this._paddingTop);for(var c,u=l+a*s-a*this._spacingY,h=0,p=0,f=0,_=0,d=0,m=0,v=0,y=fe(o);!(c=y()).done;){c.value.activeInHierarchy&&v++}var g=this._cellSize.height;this._N$layoutType!==Qz.GRID&&this._resizeMode===Zz.CHILDREN&&(g=(e-(this._paddingTop+this._paddingBottom)-(v-1)*this._spacingY)/v);for(var A,b=fe(o);!(A=b()).done;){var x=A.value;if(x){var T=x.getScale(),S=this._getUsedScaleValue(T.x),E=this._getUsedScaleValue(T.y);if(x.activeInHierarchy){this._resizeMode===Zz.CHILDREN&&(x.height=g/E,this._N$layoutType===Qz.GRID&&(x.width=this._cellSize.width/S));var C=x.anchorY,w=x.width*S,k=x.height*E;f>p&&(p=f),w>=p&&(f=p,p=w,m=x.getAnchorPoint().x),this._verticalDirection===Jz.TOP_TO_BOTTOM&&(C=1-x.anchorY),u=u+a*C*k+a*this._spacingY;var O=a*(1-C)*k;if(t){var R=u+O+a*(a>0?this._paddingTop:this._paddingBottom),F=!1;this._verticalDirection===Jz.BOTTOM_TO_TOP&&R>(1-r.y)*e&&(F=!0);var I=!1;this._verticalDirection===Jz.TOP_TO_BOTTOM&&R<-r.y*e&&(I=!0),(F||I)&&(w>=p?(0===f&&(f=p),h+=f,f=p):(h+=p,f=w,p=0),u=l+a*(s+C*k),_++)}var M=i(x,h,_);e>=k+(this._paddingTop+this._paddingBottom)&&n&&(x.getPosition(SG),x.setPosition(M,u,SG.z));var P=1,D=void 0,B=0===p?w:p;this._horizontalDirection===$z.RIGHT_TO_LEFT?(P=-1,d=d||this.node.getContentSize().width,(D=M+P*(B*m+this._paddingLeft))<d&&(d=D)):(d=d||-this.node.getContentSize().width,(D=M+P*(B*m+this._paddingRight))>d&&(d=D)),u+=O}}}return d}},{key:"_doLayoutBasic",value:function(){for(var e,t=null,i=fe(this.node.children);!(e=i()).done;){var n=e.value,r=n.getComponent(By);r&&(n.activeInHierarchy&&(t?nn.union(t,t,r.getBoundingBoxToWorld()):t=r.getBoundingBoxToWorld()))}if(t){var o=this.node.parent.getComponent(By);if(!o)return;Mi.set(SG,t.x,t.y,0);var a=new Mi;o.convertToNodeSpaceAR(SG,a),Mi.set(a,a.x-this._paddingLeft,a.y-this._paddingBottom,a.z),Mi.set(SG,t.x+t.width,t.y+t.height,0);var s=new Mi;o.convertToNodeSpaceAR(SG,s),Mi.set(s,s.x+this._paddingRight,s.y+this._paddingTop,s.z);var l=cc.size(parseFloat((s.x-a.x).toFixed(2)),parseFloat((s.y-a.y).toFixed(2)));if(this.node.getPosition(SG),0!==l.width){var c=(SG.x-a.x)/l.width;this.node.anchorX=parseFloat(c.toFixed(2))}if(0!==l.height){var u=(SG.y-a.y)/l.height;this.node.anchorY=parseFloat(u.toFixed(2))}this.node.setContentSize(l)}}},{key:"_doLayoutGridAxisHorizontal",value:function(e,t){var i=this,n=t.width,r=1,o=-e.y*t.height,a=this._paddingBottom;this._verticalDirection===Jz.TOP_TO_BOTTOM&&(r=-1,o=(1-e.y)*t.height,a=this._paddingTop);var s=this,l=function(e,t,n){return o+r*(t+e.anchorY*e.height*s._getUsedScaleValue(e.getScale().y)+a+n*i._spacingY)},c=0;if(this._resizeMode===Zz.CONTAINER){var u=this._doLayoutHorizontally(n,!0,l,!1);(c=o-u)<0&&(c*=-1),o=-e.y*c,this._verticalDirection===Jz.TOP_TO_BOTTOM&&(r=-1,o=(1-e.y)*c)}this._doLayoutHorizontally(n,!0,l,!0),this._resizeMode===Zz.CONTAINER&&this.node.setContentSize(n,c)}},{key:"_doLayoutGridAxisVertical",value:function(e,t){var i=this,n=t.height,r=1,o=-e.x*t.width,a=this._paddingLeft;this._horizontalDirection===$z.RIGHT_TO_LEFT&&(r=-1,o=(1-e.x)*t.width,a=this._paddingRight);var s=this,l=function(e,t,n){return o+r*(t+e.anchorX*e.width*s._getUsedScaleValue(e.getScale().x)+a+n*i._spacingX)},c=0;if(this._resizeMode===Zz.CONTAINER){var u=this._doLayoutVertically(n,!0,l,!1);(c=o-u)<0&&(c*=-1),o=-e.x*c,this._horizontalDirection===$z.RIGHT_TO_LEFT&&(r=-1,o=(1-e.x)*c)}this._doLayoutVertically(n,!0,l,!0),this._resizeMode===Zz.CONTAINER&&this.node.setContentSize(c,n)}},{key:"_doLayoutGrid",value:function(){var e=this.node.getAnchorPoint(),t=this.node.getContentSize();this.startAxis===Kz.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,t):this.startAxis===Kz.VERTICAL&&this._doLayoutGridAxisVertical(e,t)}},{key:"_getHorizontalBaseWidth",value:function(e){var t=0,i=0;if(this._resizeMode===Zz.CONTAINER){for(var n,r=fe(e);!(n=r()).done;){var o=n.value;o.getScale(EG),o.activeInHierarchy&&(i++,t+=o.width*this._getUsedScaleValue(EG.x))}t+=(i-1)*this._spacingX+this._paddingLeft+this._paddingRight}else t=this.node.getContentSize().width;return t}},{key:"_getVerticalBaseHeight",value:function(e){var t=0,i=0;if(this._resizeMode===Zz.CONTAINER){for(var n,r=fe(e);!(n=r()).done;){var o=n.value;o.getScale(EG),o.activeInHierarchy&&(i++,t+=o.height*this._getUsedScaleValue(EG.y))}t+=(i-1)*this._spacingY+this._paddingBottom+this._paddingTop}else t=this.node.getContentSize().height;return t}},{key:"_doLayout",value:function(){var e=this;if(this._N$layoutType===Qz.HORIZONTAL){var t=this._getHorizontalBaseWidth(this.node.children);this._doLayoutHorizontally(t,!1,(function(t){return(e._isAlign?Mi.ZERO:t.position).y}),!0),this._isAlign=!1,this.node.width=t}else if(this._N$layoutType===Qz.VERTICAL){var i=this._getVerticalBaseHeight(this.node.children);this._doLayoutVertically(i,!1,(function(t){return(e._isAlign?Mi.ZERO:t.position).x}),!0),this._isAlign=!1,this.node.height=i}else this._N$layoutType===Qz.NONE?this._resizeMode===Zz.CONTAINER&&this._doLayoutBasic():this._N$layoutType===Qz.GRID&&this._doLayoutGrid()}},{key:"_getUsedScaleValue",value:function(e){return this._affectedByScale?Math.abs(e):1}},{key:"_transformDirty",value:function(e){e&sh.POSITION&&this._doLayoutDirty()}},{key:"_doLayoutDirty",value:function(){this._layoutDirty=!0}},{key:"_doScaleDirty",value:function(e){e&sh.SCALE&&(this._layoutDirty=this._layoutDirty||this._affectedByScale)}},{key:"type",get:function(){return this._N$layoutType},set:function(e){this._N$layoutType=e,this._isAlign=!0,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(e){this._N$layoutType===Qz.NONE&&e===Zz.CHILDREN||(this._resizeMode=e,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(e){this._cellSize!==e&&(this._cellSize.set(e),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(e){this._startAxis!==e&&(this._startAxis=e,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(e){this._paddingLeft!==e&&(this._paddingLeft=e,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(e){this._paddingRight!==e&&(this._paddingRight=e,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(e){this._paddingTop!==e&&(this._paddingTop=e,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(e){this._paddingBottom!==e&&(this._paddingBottom=e,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(e){this._spacingX!==e&&(this._spacingX=e,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(e){this._spacingY!==e&&(this._spacingY=e,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(e){this._verticalDirection!==e&&(this._verticalDirection=e,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(e){this._horizontalDirection!==e&&(this._horizontalDirection=e,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(e){this._N$padding=e,this._migratePaddingData(),this._doLayoutDirty()}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(e){this._affectedByScale=e,this._doLayoutDirty()}}]),t}(),Wz.Type=Qz,Wz.VerticalDirection=Jz,Wz.HorizontalDirection=$z,Wz.ResizeMode=Zz,Wz.AxisDirection=Kz,de((Fz=Yz).prototype,"type",[mz],Object.getOwnPropertyDescriptor(Fz.prototype,"type"),Fz.prototype),de(Fz.prototype,"resizeMode",[vz],Object.getOwnPropertyDescriptor(Fz.prototype,"resizeMode"),Fz.prototype),de(Fz.prototype,"cellSize",[yz],Object.getOwnPropertyDescriptor(Fz.prototype,"cellSize"),Fz.prototype),de(Fz.prototype,"startAxis",[gz],Object.getOwnPropertyDescriptor(Fz.prototype,"startAxis"),Fz.prototype),de(Fz.prototype,"paddingLeft",[Az],Object.getOwnPropertyDescriptor(Fz.prototype,"paddingLeft"),Fz.prototype),de(Fz.prototype,"paddingRight",[bz],Object.getOwnPropertyDescriptor(Fz.prototype,"paddingRight"),Fz.prototype),de(Fz.prototype,"paddingTop",[xz],Object.getOwnPropertyDescriptor(Fz.prototype,"paddingTop"),Fz.prototype),de(Fz.prototype,"paddingBottom",[Tz],Object.getOwnPropertyDescriptor(Fz.prototype,"paddingBottom"),Fz.prototype),de(Fz.prototype,"spacingX",[Sz],Object.getOwnPropertyDescriptor(Fz.prototype,"spacingX"),Fz.prototype),de(Fz.prototype,"spacingY",[Ez],Object.getOwnPropertyDescriptor(Fz.prototype,"spacingY"),Fz.prototype),de(Fz.prototype,"verticalDirection",[Cz],Object.getOwnPropertyDescriptor(Fz.prototype,"verticalDirection"),Fz.prototype),de(Fz.prototype,"horizontalDirection",[wz],Object.getOwnPropertyDescriptor(Fz.prototype,"horizontalDirection"),Fz.prototype),de(Fz.prototype,"padding",[kz],Object.getOwnPropertyDescriptor(Fz.prototype,"padding"),Fz.prototype),de(Fz.prototype,"affectedByScale",[Oz],Object.getOwnPropertyDescriptor(Fz.prototype,"affectedByScale"),Fz.prototype),Iz=de(Fz.prototype,"_resizeMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zz.NONE}}),Mz=de(Fz.prototype,"_N$layoutType",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qz.NONE}}),Pz=de(Fz.prototype,"_N$padding",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dz=de(Fz.prototype,"_cellSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new en(40,40)}}),Bz=de(Fz.prototype,"_startAxis",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Kz.HORIZONTAL}}),Nz=de(Fz.prototype,"_paddingLeft",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Lz=de(Fz.prototype,"_paddingRight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zz=de(Fz.prototype,"_paddingTop",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gz=de(Fz.prototype,"_paddingBottom",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uz=de(Fz.prototype,"_spacingX",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xz=de(Fz.prototype,"_spacingY",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vz=de(Fz.prototype,"_verticalDirection",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Jz.TOP_TO_BOTTOM}}),Hz=de(Fz.prototype,"_horizontalDirection",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $z.LEFT_TO_RIGHT}}),jz=de(Fz.prototype,"_affectedByScale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rz=Fz))||Rz)||Rz)||Rz)||Rz)||Rz)||Rz);cc.LayoutComponent=CG,function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE"}(tG||(tG={})),bt(tG),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER"}(iG||(iG={})),bt(iG),function(e){e[e.PT_CORNER=1]="PT_CORNER",e[e.PT_LEFT=2]="PT_LEFT",e[e.PT_BEVEL=4]="PT_BEVEL",e[e.PT_INNERBEVEL=8]="PT_INNERBEVEL"}(nG||(nG={})),bt(nG);var wG,kG,OG,RG,FG,IG,MG,PG,DG,BG,NG,LG,zG,GG,UG,XG,VG={parent:null,owner:null,subModelIdx:0},HG=(rG=qa("cc.GraphicsComponent"),oG=as("i18n:cc.GraphicsComponent"),aG=ts(110),sG=es("UI/Render/Graphics"),lG=Qa({type:iG,tooltip:"两条线相交时，所创建的拐角类型"}),cG=Qa({type:tG,tooltip:"线条的结束端点样式"}),uG=Qa({tooltip:"笔触的颜色"}),hG=Qa({tooltip:"填充绘画的颜色"}),pG=Qa({tooltip:"最大斜接长度"}),fG=Qa({override:!0,visible:!1}),rG(_G=oG(_G=aG(_G=sG((TG=xG=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this))).impl=null,e.model=null,_e(e,"_lineWidth",mG,ne(e)),_e(e,"_strokeColor",vG,ne(e)),_e(e,"_lineJoin",yG,ne(e)),_e(e,"_lineCap",gG,ne(e)),_e(e,"_fillColor",AG,ne(e)),_e(e,"_miterLimit",bG,ne(e)),e._instanceMaterialType=exports.InstanceMaterialType.ADDCOLOR,e}return ee(t,Fw),J(t,[{key:"lineWidth",get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this.impl&&(this.impl.lineWidth=e)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin=e,this.impl&&(this.impl.lineJoin=e)}},{key:"lineCap",get:function(){return this._lineCap},set:function(e){this._lineCap=e,this.impl&&(this.impl.lineCap=e)}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(e){this.impl&&(this._strokeColor.set(e),this.impl.strokeColor=this._strokeColor)}},{key:"fillColor",get:function(){return this._fillColor},set:function(e){this.impl&&(this._fillColor.set(e),this.impl.fillColor=this._fillColor)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit=e}},{key:"color",get:function(){return this._color},set:function(e){this._color!==e&&(this._color.set(e),this._updateColor(),this.markForUpdateRenderData())}}]),J(t,[{key:"onRestore",value:function(){this.impl||this._flushAssembler()}},{key:"__preload",value:function(){ae(te(t.prototype),"__preload",this)&&ae(te(t.prototype),"__preload",this).call(this),this.impl=this._assembler&&this._assembler.createImpl(this)}},{key:"onLoad",value:function(){this._sceneGetter=gk.root.ui.getRenderSceneGetter(),this.model||(this.model=gk.root.createModel(lh))}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._activateMaterial()}},{key:"onDisable",value:function(){this._detachFromScene()}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this._sceneGetter=null,this.model&&(this.model.destroy(),gk.root.destroyModel(this.model),this.model=null),this.impl&&(this.impl.clear(),this.impl=null)}},{key:"_activateMaterial",value:function(){this._material&&this._updateMaterial(this._material)}},{key:"moveTo",value:function(e,t){this.impl&&this.impl.moveTo(e,t)}},{key:"lineTo",value:function(e,t){this.impl&&this.impl.lineTo(e,t)}},{key:"bezierCurveTo",value:function(e,t,i,n,r,o){this.impl&&this.impl.bezierCurveTo(e,t,i,n,r,o)}},{key:"quadraticCurveTo",value:function(e,t,i,n){this.impl&&this.impl.quadraticCurveTo(e,t,i,n)}},{key:"arc",value:function(e,t,i,n,r,o){this.impl&&this.impl.arc(e,t,i,n,r,o)}},{key:"ellipse",value:function(e,t,i,n){this.impl&&this.impl.ellipse(e,t,i,n)}},{key:"circle",value:function(e,t,i){this.impl&&this.impl.circle(e,t,i)}},{key:"rect",value:function(e,t,i,n){this.impl&&this.impl.rect(e,t,i,n)}},{key:"roundRect",value:function(e,t,i,n,r){this.impl&&this.impl.roundRect(e,t,i,n,r)}},{key:"fillRect",value:function(e,t,i,n){this.rect(e,t,i,n),this.fill()}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.impl&&(this.impl.clear(e),this._detachFromScene(),this.model&&this.model.destroy(),this.markForUpdateRenderData())}},{key:"close",value:function(){this.impl&&this.impl.close()}},{key:"stroke",value:function(){this._assembler.stroke(this),this._attachToScene()}},{key:"fill",value:function(){this._assembler.fill(this),this._attachToScene()}},{key:"helpInstanceMaterial",value:function(){var e=null;VG.owner=new Yp,this._sharedMaterial?(VG.parent=this._sharedMaterial,e=new jp(VG)):(VG.parent=Nu.get("ui-base-material"),(e=new jp(VG)).recompileShaders({USE_LOCAL:!0})),this._updateMaterial(e),this.impl||(this._flushAssembler(),this.impl=this._assembler&&this._assembler.createImpl(this))}},{key:"_render",value:function(e){e.commitModel(this,this.model,this._material)}},{key:"_instanceMaterial",value:function(){this.helpInstanceMaterial()}},{key:"_flushAssembler",value:function(){var e=t.Assembler.getAssembler(this);this._assembler!==e&&(this._assembler=e)}},{key:"_canRender",value:function(){return!!ae(te(t.prototype),"_canRender",this).call(this)&&(!!this.model&&this.model.inited)}},{key:"_attachToScene",value:function(){var e=gk.root.ui.renderScene;this.model&&this.model.scene!==e&&(null!==this.model.scene&&this._detachFromScene(),e.addModel(this.model))}},{key:"_detachFromScene",value:function(){this.model&&this.model.scene&&(this.model.scene.removeModel(this.model),this.model.scene=null)}}]),t}(),xG.LineJoin=iG,xG.LineCap=tG,de((dG=TG).prototype,"lineWidth",[Qa],Object.getOwnPropertyDescriptor(dG.prototype,"lineWidth"),dG.prototype),de(dG.prototype,"lineJoin",[lG],Object.getOwnPropertyDescriptor(dG.prototype,"lineJoin"),dG.prototype),de(dG.prototype,"lineCap",[cG],Object.getOwnPropertyDescriptor(dG.prototype,"lineCap"),dG.prototype),de(dG.prototype,"strokeColor",[uG],Object.getOwnPropertyDescriptor(dG.prototype,"strokeColor"),dG.prototype),de(dG.prototype,"fillColor",[hG],Object.getOwnPropertyDescriptor(dG.prototype,"fillColor"),dG.prototype),de(dG.prototype,"miterLimit",[pG],Object.getOwnPropertyDescriptor(dG.prototype,"miterLimit"),dG.prototype),de(dG.prototype,"color",[fG],Object.getOwnPropertyDescriptor(dG.prototype,"color"),dG.prototype),mG=de(dG.prototype,"_lineWidth",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),vG=de(dG.prototype,"_strokeColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.BLACK.clone()}}),yG=de(dG.prototype,"_lineJoin",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return iG.MITER}}),gG=de(dG.prototype,"_lineCap",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return tG.BUTT}}),AG=de(dG.prototype,"_fillColor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),bG=de(dG.prototype,"_miterLimit",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),_G=dG))||_G)||_G)||_G)||_G);cc.GraphicsComponent=HG;var jG,WG=new Qi,YG=new Oi,qG=new Qi,QG=[];!function(e){e[e.RECT=0]="RECT",e[e.ELLIPSE=1]="ELLIPSE",e[e.GRAPHICS_STENCIL=2]="GRAPHICS_STENCIL"}(jG||(jG={})),bt(jG);var ZG,KG,JG,$G,eU,tU,iU,nU,rU,oU,aU,sU,lU,cU,uU,hU,pU,fU,_U,dU=(wG=qa("cc.MaskComponent"),kG=as("i18n:cc.MaskComponent"),OG=ts(110),RG=es("UI/Render/Mask"),FG=Qa({type:jG,displayOrder:4,tooltip:"遮罩类型"}),IG=Qa({tooltip:"反向遮罩"}),MG=Qa({visible:!1,override:!0}),PG=Qa({visible:!1,override:!0}),DG=Qa({visible:!1,override:!0}),wG(BG=kG(BG=OG(BG=RG((XG=UG=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_type",LG,ne(e)),_e(e,"_inverted",zG,ne(e)),_e(e,"_segments",GG,ne(e)),e._graphics=null,e._clearGraphics=null,e._instanceMaterialType=exports.InstanceMaterialType.ADDCOLOR,e}return ee(t,Fw),J(t,[{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this._updateGraphics(),this._renderData&&(this.destroyRenderData(),this._renderData=null))}},{key:"inverted",get:function(){return this._inverted},set:function(e){cc.game.renderType!==eS.RENDER_TYPE_CANVAS?this._inverted=e:cc.warnID(4202)}},{key:"segments",get:function(){return this._segments},set:function(e){this._segments!==e&&(this._segments=pi(e,3,1e4),this._updateGraphics())}},{key:"graphics",get:function(){return this._graphics}},{key:"clearGraphics",get:function(){return this._clearGraphics}},{key:"dstBlendFactor",get:function(){return this._dstBlendFactor},set:function(e){this._dstBlendFactor!==e&&(this._dstBlendFactor=e,this._updateBlendFunc())}},{key:"srcBlendFactor",get:function(){return this._srcBlendFactor},set:function(e){this._srcBlendFactor!==e&&(this._srcBlendFactor=e,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(e){this._color!==e&&(this._color.set(e),this.markForUpdateRenderData())}}]),J(t,[{key:"onLoad",value:function(){this._createGraphics(),this._clearGraphics&&this._clearGraphics.onLoad(),this._graphics&&this._graphics.onLoad()}},{key:"onRestore",value:function(){this._createGraphics(),this._updateGraphics()}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._enableGraphics(),lS.on("design-resolution-changed",this._updateClearGraphics,this)}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this),this._disableGraphics(),lS.off("design-resolution-changed",this._updateClearGraphics)}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this._removeGraphics()}},{key:"isHit",value:function(e){var t=this.node,i=t.getContentSize(),n=i.width,r=i.height,o=YG;this.node.getWorldMatrix(WG),Qi.invert(qG,WG),Oi.transformMat4(o,e,qG);var a=t.getAnchorPoint();o.x+=a.x*n,o.y+=a.y*r;var s=!1;if(this.type===jG.RECT||this.type===jG.GRAPHICS_STENCIL)s=o.x>=0&&o.y>=0&&o.x<=n&&o.y<=r;else if(this.type===jG.ELLIPSE){var l=n/2,c=r/2,u=o.x-.5*n,h=o.y-.5*r;s=u*u/(l*l)+h*h/(c*c)<1}return this._inverted&&(s=!s),s}},{key:"_render",value:function(e){e.commitComp(this,null,this._assembler)}},{key:"_postRender",value:function(e){this._postAssembler&&e.commitComp(this,null,this._postAssembler)}},{key:"_nodeStateChange",value:function(e){ae(te(t.prototype),"_nodeStateChange",this).call(this,e),this._updateGraphics()}},{key:"_resolutionChanged",value:function(){this._updateClearGraphics()}},{key:"_canRender",value:function(){return!!ae(te(t.prototype),"_canRender",this).call(this)&&(null!==this._clearGraphics&&null!==this._graphics)}},{key:"_flushAssembler",value:function(){var e=t.Assembler.getAssembler(this),i=t.PostAssembler.getAssembler(this);this._assembler!==e&&(this.destroyRenderData(),this._assembler=e),this._postAssembler!==i&&(this._postAssembler=i),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.sharedMaterial,this.markForUpdateRenderData())}},{key:"_createGraphics",value:function(){if(!this._clearGraphics){var e=new rg("clear-graphics"),t=this._clearGraphics=e.addComponent(HG);t.delegateSrc=this.node,t.helpInstanceMaterial(),t.lineWidth=0;var i=on.WHITE.clone();i.a=0,t.fillColor=i}if(!this._graphics){var n=this._graphics=new HG;n.node=this.node,n.node.getWorldMatrix(),n.helpInstanceMaterial(),n.lineWidth=0;var r=on.WHITE.clone();r.a=0,n.fillColor=r}}},{key:"_updateClearGraphics",value:function(){if(this._clearGraphics){var e=$x;this._clearGraphics.node.setWorldPosition(e.width/2,e.height/2,0),this._clearGraphics.clear(),this._clearGraphics.rect(-e.width/2,-e.height/2,e.width,e.height),this._clearGraphics.fill()}}},{key:"_updateGraphics",value:function(){if(this._graphics){var e=this.node,t=this._graphics;t.clear();var i=e.getContentSize(),n=i.width,r=i.height,o=e.getAnchorPoint(),a=-n*o.x,s=-r*o.y;if(this._type===jG.RECT)t.rect(a,s,n,r);else if(this._type===jG.ELLIPSE){for(var l=function(e,t,i){QG.length=0;for(var n=2*Math.PI/i,r=0;r<i;++r)QG.push(new Mi(t.x*Math.cos(n*r)+e.x,t.y*Math.sin(n*r)+e.y,0));return QG}(new Mi(a+n/2,s+r/2,0),new Mi(n/2,r/2,0),this._segments),c=0;c<l.length;++c){var u=l[c];0===c?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y)}t.close()}t.fill()}}},{key:"_enableGraphics",value:function(){this._clearGraphics&&(this._clearGraphics.onEnable(),this._updateClearGraphics()),this._graphics&&(this._graphics.onEnable(),this._updateGraphics())}},{key:"_disableGraphics",value:function(){this._graphics&&this._graphics.onDisable(),this._clearGraphics&&this._clearGraphics.onDisable()}},{key:"_removeGraphics",value:function(){this._graphics&&this._graphics.destroy(),this._clearGraphics&&this._clearGraphics.destroy()}}]),t}(),UG.Type=jG,de((NG=XG).prototype,"type",[FG],Object.getOwnPropertyDescriptor(NG.prototype,"type"),NG.prototype),de(NG.prototype,"inverted",[IG],Object.getOwnPropertyDescriptor(NG.prototype,"inverted"),NG.prototype),de(NG.prototype,"segments",[Qa],Object.getOwnPropertyDescriptor(NG.prototype,"segments"),NG.prototype),de(NG.prototype,"dstBlendFactor",[MG],Object.getOwnPropertyDescriptor(NG.prototype,"dstBlendFactor"),NG.prototype),de(NG.prototype,"srcBlendFactor",[PG],Object.getOwnPropertyDescriptor(NG.prototype,"srcBlendFactor"),NG.prototype),de(NG.prototype,"color",[DG],Object.getOwnPropertyDescriptor(NG.prototype,"color"),NG.prototype),LG=de(NG.prototype,"_type",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jG.RECT}}),zG=de(NG.prototype,"_inverted",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GG=de(NG.prototype,"_segments",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 64}}),BG=NG))||BG)||BG)||BG)||BG);cc.MaskComponent=dU,function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.FILLED=2]="FILLED"}(_U||(_U={})),At(_U);var mU,vU,yU,gU,AU,bU,xU,TU,SU,EU,CU=(ZG=qa("cc.ProgressBarComponent"),KG=as("i18n:cc.ProgressBarComponent"),JG=ts(110),$G=es("UI/ProgressBar"),eU=Qa({type:Uw,tooltip:"进度条显示用的 Sprite 节点，可以动态改变尺寸"}),tU=Qa({type:_U,tooltip:"进度条显示模式，目前支持水平和垂直两种"}),iU=Qa({tooltip:"进度条在 progress 为 1 时的最大长度"}),nU=Qa({range:[0,1,.1],slide:!0,tooltip:"当前进度指示，范围从 0 到 1"}),rU=Qa({tooltip:"是否反向驱动进度条"}),ZG(oU=KG(oU=JG(oU=$G((fU=pU=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_barSprite",sU,ne(i)),_e(i,"_mode",lU,ne(i)),_e(i,"_totalLength",cU,ne(i)),_e(i,"_progress",uU,ne(i)),_e(i,"_reverse",hU,ne(i)),i}return ee(t,sp),J(t,[{key:"_initBarSprite",value:function(){if(this._barSprite){var e=this._barSprite.node;if(!e)return;var t=this.node.getContentSize(),i=this.node.getAnchorPoint(),n=e.getContentSize();if(this._barSprite.fillType===Uw.FillType.RADIAL&&(this._mode=_U.FILLED),this._mode===_U.HORIZONTAL?this.totalLength=n.width:this._mode===_U.VERTICAL?this.totalLength=n.height:this.totalLength=this._barSprite.fillRange,e.parent===this.node){var r=-t.width*i.x;e.setPosition(r,0,0)}}}},{key:"_updateBarStatus",value:function(){if(this._barSprite){var e=this._barSprite.node;if(!e)return;var t=e.getAnchorPoint(),i=e.getContentSize(),n=e.getPosition(),r=new Oi(0,.5),o=fi(this._progress),a=this._totalLength*o,s=i,l=0,c=0;switch(this._mode){case _U.HORIZONTAL:this._reverse&&(r=new Oi(1,.5)),s=new en(a,i.height),l=this._totalLength,c=i.height;break;case _U.VERTICAL:r=this._reverse?new Oi(.5,1):new Oi(.5,0),s=new en(i.width,a),l=i.width,c=this._totalLength}if(this._mode===_U.FILLED)this._barSprite.type!==Uw.Type.FILLED?u("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(a*=-1),this._barSprite.fillRange=a);else if(this._barSprite.type!==Uw.Type.FILLED){var h=r.x-t.x,p=r.y-t.y,f=new Mi(l*h,c*p,0);e.setPosition(n.x+f.x,n.y+f.y,n.z),e.setAnchorPoint(r),e.setContentSize(s)}else u("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}}},{key:"barSprite",get:function(){return this._barSprite},set:function(e){this._barSprite!==e&&(this._barSprite=e,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(e){if(this._mode!==e&&(this._mode=e,this._barSprite)){var t=this._barSprite.node;if(!t)return;var i=t.getContentSize();this._mode===_U.HORIZONTAL?this.totalLength=i.width:this._mode===_U.VERTICAL?this.totalLength=i.height:this._mode===_U.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(e){this._mode===_U.FILLED&&(e=fi(e)),this._totalLength=e,this._updateBarStatus()}},{key:"progress",get:function(){return this._progress},set:function(e){this._progress!==e&&(this._progress=e,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(e){this._reverse!==e&&(this._reverse=e,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),t}(),pU.Mode=_U,de((aU=fU).prototype,"barSprite",[eU],Object.getOwnPropertyDescriptor(aU.prototype,"barSprite"),aU.prototype),de(aU.prototype,"mode",[tU],Object.getOwnPropertyDescriptor(aU.prototype,"mode"),aU.prototype),de(aU.prototype,"totalLength",[iU],Object.getOwnPropertyDescriptor(aU.prototype,"totalLength"),aU.prototype),de(aU.prototype,"progress",[nU],Object.getOwnPropertyDescriptor(aU.prototype,"progress"),aU.prototype),de(aU.prototype,"reverse",[rU],Object.getOwnPropertyDescriptor(aU.prototype,"reverse"),aU.prototype),sU=de(aU.prototype,"_barSprite",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lU=de(aU.prototype,"_mode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _U.HORIZONTAL}}),cU=de(aU.prototype,"_totalLength",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),uU=de(aU.prototype,"_progress",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),hU=de(aU.prototype,"_reverse",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oU=aU))||oU)||oU)||oU)||oU);cc.ProgressBarComponent=CU;var wU,kU,OU,RU,FU,IU,MU,PU,DU,BU,NU,LU,zU,GU,UU,XU,VU,HU,jU,WU,YU,qU,QU,ZU,KU=(mU=qa("cc.LabelOutlineComponent"),vU=as("i18n:cc.LabelOutlineComponent"),yU=ts(110),gU=es("UI/LabelOutline"),AU=Qa({tooltip:"描边的颜色"}),bU=Qa({tooltip:"描边的宽度"}),mU(xU=vU(xU=yU(xU=gU((SU=de((TU=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_color",SU,ne(i)),_e(i,"_width",EU,ne(i)),i}return ee(t,sp),J(t,[{key:"_updateRenderData",value:function(){var e=this.node.getComponent(sL);e&&e.updateRenderData(!0)}},{key:"color",get:function(){return this._color},set:function(e){this._color!==e&&(this._color.set(e),this._updateRenderData())}},{key:"width",get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._updateRenderData())}}]),t}()).prototype,"_color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new on(255,255,255,255)}}),EU=de(TU.prototype,"_width",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),de(TU.prototype,"color",[AU],Object.getOwnPropertyDescriptor(TU.prototype,"color"),TU.prototype),de(TU.prototype,"width",[bU],Object.getOwnPropertyDescriptor(TU.prototype,"width"),TU.prototype),xU=TU))||xU)||xU)||xU)||xU);cc.LabelOutlineComponent=KU;var JU=new Na,$U=new et((function(e){return!!cc.isValid(e.node)&&!e.node.getComponent(KU)}),20);$U.get=function(e,t){var i=this._get();i||(i={node:new oA("RICHTEXT_CHILD"),comp:null,lineCount:0,styleIndex:0,clickHandler:""});var n=i.node;n||(n=new oA("RICHTEXT_CHILD"));var r=n.getComponent(sL);return r||(r=n.addComponent(sL)),r=r,n.setPosition(0,0,0),n.setAnchorPoint(.5,.5),n.setContentSize(128,128),"string"!=typeof e&&(e=""+e),t.font instanceof Ld?r.font=t.font:r.fontFamily="Arial",r.string=e,r.horizontalAlign=exports.HorizontalTextAlignment.LEFT,r.verticalAlign=exports.VerticalTextAlignment.TOP,r.fontSize=t.fontSize||40,r.overflow=0,r.enableWrapText=!0,r.lineHeight=40,r.isBold=!1,r.isItalic=!1,r.isUnderline=!1,{node:n,comp:r,lineCount:0,clickHandler:"",styleIndex:0}};var eX,tX,iX,nX,rX,oX,aX,sX,lX,cX,uX,hX,pX,fX,_X,dX,mX,vX=(wU=qa("cc.RichTextComponent"),kU=as("i18n:cc.RichTextComponent"),OU=ts(110),RU=es("UI/Render/RichText"),FU=Qa({multiline:!0,tooltip:"富文本显示的文本内容"}),IU=Qa({type:exports.HorizontalTextAlignment,tooltip:"文本内容的水平对齐方式"}),MU=Qa({tooltip:"富文本字体大小"}),PU=Qa({type:Ld,tooltip:"富文本定制字体"}),DU=Qa({tooltip:"富文本的最大宽度"}),BU=Qa({tooltip:"富文本行高"}),NU=Qa({type:S_,tooltip:"对于 img 标签里面的 src 属性名称，都需要在 imageAtlas 里面找到一个有效的 spriteFrame，否则 img tag 会判定为无效"}),LU=Qa({tooltip:"选中此选项后，RichText 将阻止节点边界框中的所有输入事件（鼠标和触摸），从而防止输入事件穿透到底层节点"}),wU(zU=kU(zU=OU(zU=RU(zU=Ja((ZU=QU=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_lineHeight",UU,ne(e)),_e(e,"_string",XU,ne(e)),_e(e,"_horizontalAlign",VU,ne(e)),_e(e,"_fontSize",HU,ne(e)),_e(e,"_maxWidth",jU,ne(e)),_e(e,"_font",WU,ne(e)),_e(e,"_imageAtlas",YU,ne(e)),_e(e,"_handleTouchEvent",qU,ne(e)),e._textArray=[],e._labelSegments=[],e._labelSegmentsCache=[],e._linesWidth=[],e._lineCount=1,e._labelWidth=0,e._labelHeight=0,e._layoutDirty=!0,e._lineOffsetX=0,e._updateRichTextStatus=void 0,e._updateRichTextStatus=e._updateRichText,e}return ee(t,JC),J(t,[{key:"string",get:function(){return this._string},set:function(e){this._string!==e&&(this._string=e,this._updateRichTextStatus())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(e){this.horizontalAlign!==e&&(this._horizontalAlign=e,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"font",get:function(){return this._font},set:function(e){this._font!==e&&(e instanceof Qd?console.warn("RichText only accepts TTF fonts, but you are trying to use a bitmap font."):(this._font=e,this._layoutDirty=!0,this._font&&this._onTTFLoaded(),this._updateRichTextStatus()))}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"imageAtlas",get:function(){return this._imageAtlas},set:function(e){this._imageAtlas!==e&&(this._imageAtlas=e,this._layoutDirty=!0,this._updateRichTextStatus())}},{key:"handleTouchEvent",get:function(){return this._handleTouchEvent},set:function(e){this._handleTouchEvent!==e&&(this._handleTouchEvent=e,this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners()))}}]),J(t,[{key:"onEnable",value:function(){this.handleTouchEvent&&this._addEventListeners(),this._updateRichText(),this._activateChildren(!0)}},{key:"onDisable",value:function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)}},{key:"start",value:function(){this._onTTFLoaded(),this.node.on(rg.EventType.ANCHOR_CHANGED,this._anchorChanged,this)}},{key:"onRestore",value:function(){}},{key:"onDestroy",value:function(){for(var e,t=fe(this._labelSegments);!(e=t()).done;){var i=e.value;i.node.removeFromParent(),$U.put(i)}this.node.off(rg.EventType.ANCHOR_CHANGED,this._anchorChanged)}},{key:"_addEventListeners",value:function(){this.node.on(rg.EventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_removeEventListeners",value:function(){this.node.off(rg.EventType.TOUCH_END,this._onTouchEnded,this)}},{key:"_updateLabelSegmentTextAttributes",value:function(){var e=this;this._labelSegments.forEach((function(t){e._applyTextAttribute(t)}))}},{key:"_createFontLabel",value:function(e){return $U.get(e,this)}},{key:"_onTTFLoaded",value:function(){if(this._font instanceof Yd)if(this._font._nativeAsset)this._layoutDirty=!0,this._updateRichText();else{var e=this;Km.load(this._font.nativeUrl,(function(t,i){e._layoutDirty=!0,e._updateRichText()}))}else this._layoutDirty=!0,this._updateRichText()}},{key:"_measureText",value:function(e,t){var i=this,n=function(t){var n;return 0===i._labelSegmentsCache.length?(n=i._createFontLabel(t),i._labelSegmentsCache.push(n)):(n=i._labelSegmentsCache[0]).node.getComponent(sL).string=t,n.styleIndex=e,i._applyTextAttribute(n),n.node.getContentSize().width};return t?n(t):n}},{key:"_onTouchEnded",value:function(e){for(var t,i=this,n=this.node.getComponents(JC),r=this,o=function(){var o=t.value,a=o.clickHandler;a&&i._containsTouchLocation(o,e.touch.getUILocation())&&(n.forEach((function(t){var i=t[a];t.enabledInHierarchy&&i&&i.call(r,e)})),e.propagationStopped=!0)},a=fe(this._labelSegments);!(t=a()).done;)o()}},{key:"_containsTouchLocation",value:function(e,t){var i=e.node.getComponent(By);return!!i&&i.getBoundingBoxToWorld().contains(t)}},{key:"_resetState",value:function(){for(var e=this,t=this.node.children,i=function(i){var n=t[i];if(("RICHTEXT_CHILD"===n.name||"RICHTEXT_Image_CHILD"===n.name)&&(n.parent===e.node?n.parent=null:t.splice(i,1),"RICHTEXT_CHILD"===n.name)){var r=e._labelSegments.findIndex((function(e){return e.node===n}));-1!==r&&$U.put(e._labelSegments[r])}},n=t.length-1;n>=0;n--)i(n);this._labelSegments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0}},{key:"_activateChildren",value:function(e){for(var t=this.node.children.length-1;t>=0;t--){var i=this.node.children[t];"RICHTEXT_CHILD"!==i.name&&"RICHTEXT_Image_CHILD"!==i.name||(i.active=e)}}},{key:"_addLabelSegment",value:function(e,t){var i;if(0===this._labelSegmentsCache.length)i=this._createFontLabel(e);else{var n=(i=this._labelSegmentsCache.pop()).node.getComponent(sL);n&&(n.string=e)}return i.styleIndex=t,i.lineCount=this._lineCount,i.node.setAnchorPoint(0,0),this._applyTextAttribute(i),this.node.addChild(i.node),this._labelSegments.push(i),i}},{key:"_updateRichTextWithMaxWidth",value:function(e,t,i){var n=t;if(this._lineOffsetX>0&&n+this._lineOffsetX>this.maxWidth)for(var r=0;this._lineOffsetX<=this.maxWidth;){var o=this._getFirstWordLen(e,r,e.length),a=e.substr(r,o),s=this._measureText(i,a);if(!(this._lineOffsetX+s<=this.maxWidth)){if(r>0){var l=e.substr(0,r);this._addLabelSegment(l,i),e=e.substr(r,e.length),n=this._measureText(i,e)}this._updateLineInfo();break}this._lineOffsetX+=s,r+=o}if(n>this.maxWidth)for(var c=Pa(e,n,this.maxWidth,this._measureText(i)),u=0;u<c.length;++u){var h=c[u],p=this._addLabelSegment(h,i).node.getContentSize();this._lineOffsetX+=p.width,c.length>1&&u<c.length-1&&this._updateLineInfo()}else this._lineOffsetX+=n,this._addLabelSegment(e,i)}},{key:"_isLastComponentCR",value:function(e){return e.length-1===e.lastIndexOf("\n")}},{key:"_updateLineInfo",value:function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++}},{key:"_needsUpdateTextLayout",value:function(e){if(this._layoutDirty||!this._textArray||!e)return!0;if(this._textArray.length!==e.length)return!0;for(var t=0;t<this._textArray.length;t++){var i=this._textArray[t],n=e[t];if(i.text!==n.text)return!0;if(i.style){if(n.style){if(!!n.style.outline!=!!i.style.outline)return!0;if(i.style.size!==n.style.size||i.style.italic!==n.style.italic||i.style.isImage!==n.style.isImage)return!0;if(i.style.isImage===n.style.isImage&&i.style.src!==n.style.src)return!0}else if(i.style.size||i.style.italic||i.style.isImage||i.style.outline)return!0}else if(n.style&&(n.style.size||n.style.italic||n.style.isImage||n.style.outline))return!0}return!1}},{key:"_addRichTextImageElement",value:function(e){if(e.style){var t=e.style.src,i=this._imageAtlas&&t&&this._imageAtlas.getSpriteFrame(t);if(i){var n=new oA("RICHTEXT_Image_CHILD"),r=n.addComponent(Uw);n.setAnchorPoint(0,0),r.type=Uw.Type.SLICED,r.sizeMode=Uw.SizeMode.CUSTOM,this.node.addChild(n);var o={node:n,comp:r,lineCount:0,clickHandler:"",styleIndex:0};this._labelSegments.push(o);var a=i.getRect(),s=1,l=a.width,c=a.height,u=e.style.imageWidth,h=e.style.imageHeight;if(void 0!==h&&h>0&&h<this.lineHeight?(l*=s=h/c,c*=s):(l*=s=this.lineHeight/c,c*=s),void 0!==u&&u>0&&(l=u),this.maxWidth>0?(this._lineOffsetX+l>this.maxWidth&&this._updateLineInfo(),this._lineOffsetX+=l):(this._lineOffsetX+=l,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),r.spriteFrame=i,n.setContentSize(l,c),o.lineCount=this._lineCount,e.style.event){var p="click";e.style.event[p]&&(o.clickHandler=e.style.event[p])}}else g(4400)}}},{key:"_updateRichText",value:function(){if(this.enabled){var e=JU.parse(this._string);if(!this._needsUpdateTextLayout(e))return this._textArray=e.slice(),void this._updateLabelSegmentTextAttributes();this._textArray=e.slice(),this._resetState();for(var t,i=!1,n=0;n<this._textArray.length;++n){var r=this._textArray[n],o=r.text;if(void 0!==o){if(""===o){if(r.style&&r.style.isNewLine){this._updateLineInfo();continue}if(r.style&&r.style.isImage&&this.imageAtlas){this._addRichTextImageElement(r);continue}}for(var a=o.split("\n"),s=0;s<a.length;++s){var l=a[s];if(""!==l)if(i=!1,this.maxWidth>0){var c=this._measureText(n,l);this._updateRichTextWithMaxWidth(l,c,n),a.length>1&&s<a.length-1&&this._updateLineInfo()}else t=this._addLabelSegment(l,n).node.getContentSize(),this._lineOffsetX+=t.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX),a.length>1&&s<a.length-1&&this._updateLineInfo();else{if(this._isLastComponentCR(o)&&s===a.length-1)continue;this._updateLineInfo(),i=!0}}}}i||this._linesWidth.push(this._lineOffsetX),this.maxWidth>0&&(this._labelWidth=this.maxWidth),this._labelHeight=(this._lineCount+.26)*this.lineHeight,this.node.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}}},{key:"_getFirstWordLen",value:function(e,t,i){var n=e.charAt(t);if(Fa(n)||Ia(n))return 1;for(var r=1,o=t+1;o<i&&(!Ia(n=e.charAt(o))&&!Fa(n));++o)r++;return r}},{key:"_updateRichTextPosition",value:function(){for(var e,t=0,i=1,n=this._lineCount,r=fe(this._labelSegments);!(e=r()).done;){var o=e.value,a=o.lineCount;a>i&&(t=0,i=a);var s=this.node.anchorX,l=this._labelWidth*(.5*this.horizontalAlign-s);switch(this.horizontalAlign){case exports.HorizontalTextAlignment.LEFT:break;case exports.HorizontalTextAlignment.CENTER:l-=this._linesWidth[a-1]/2;break;case exports.HorizontalTextAlignment.RIGHT:l-=this._linesWidth[a-1]}var c=o.node.position,u=this.node.anchorY;o.node.setPosition(t+l,this.lineHeight*(n-a)-this._labelHeight*u,c.z),a===i&&(t+=o.node.width)}}},{key:"_convertLiteralColorValue",value:function(e){var t=e.toUpperCase();return on[t]?on[t]:(new on).fromHEX(e)}},{key:"_applyTextAttribute",value:function(e){var t=e.node.getComponent(sL);if(t){var i,n=e.styleIndex;t.lineHeight=this.lineHeight,t.horizontalAlign=exports.HorizontalTextAlignment.LEFT,t.verticalAlign=exports.VerticalTextAlignment.CENTER,this._textArray[n]&&(i=this._textArray[n].style);var r=e.node.getComponent(sL);if(r&&(i&&i.color?r.color=this._convertLiteralColorValue(i.color):r.color=this._convertLiteralColorValue("white")),t.isBold=!(!i||!i.bold),t.isItalic=!(!i||!i.italic),t.isUnderline=!(!i||!i.underline),i&&i.outline){var o=e.node.getComponent(KU);o||(o=e.node.addComponent(KU)),o.color=this._convertLiteralColorValue(i.outline.color),o.width=i.outline.width}if(i&&i.size?t.fontSize=i.size:t.fontSize=this._fontSize,t.updateRenderData(!0),i&&i.event){var a="click";i.event[a]&&(e.clickHandler=i.event[a])}}}},{key:"_anchorChanged",value:function(){this._updateRichTextPosition()}}]),t}(),QU.HorizontalAlign=exports.HorizontalTextAlignment,QU.VerticalAlign=exports.VerticalTextAlignment,de((GU=ZU).prototype,"string",[FU],Object.getOwnPropertyDescriptor(GU.prototype,"string"),GU.prototype),de(GU.prototype,"horizontalAlign",[IU],Object.getOwnPropertyDescriptor(GU.prototype,"horizontalAlign"),GU.prototype),de(GU.prototype,"fontSize",[MU],Object.getOwnPropertyDescriptor(GU.prototype,"fontSize"),GU.prototype),de(GU.prototype,"font",[PU],Object.getOwnPropertyDescriptor(GU.prototype,"font"),GU.prototype),de(GU.prototype,"maxWidth",[DU],Object.getOwnPropertyDescriptor(GU.prototype,"maxWidth"),GU.prototype),de(GU.prototype,"lineHeight",[BU],Object.getOwnPropertyDescriptor(GU.prototype,"lineHeight"),GU.prototype),de(GU.prototype,"imageAtlas",[NU],Object.getOwnPropertyDescriptor(GU.prototype,"imageAtlas"),GU.prototype),de(GU.prototype,"handleTouchEvent",[LU],Object.getOwnPropertyDescriptor(GU.prototype,"handleTouchEvent"),GU.prototype),UU=de(GU.prototype,"_lineHeight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),XU=de(GU.prototype,"_string",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"<color=#00ff00>Rich</c><color=#0fffff>Text</color>"}}),VU=de(GU.prototype,"_horizontalAlign",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.HorizontalTextAlignment.LEFT}}),HU=de(GU.prototype,"_fontSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),jU=de(GU.prototype,"_maxWidth",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),WU=de(GU.prototype,"_font",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),YU=de(GU.prototype,"_imageAtlas",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qU=de(GU.prototype,"_handleTouchEvent",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zU=GU))||zU)||zU)||zU)||zU)||zU);cc.RichTextComponent=vX;var yX,gX=new Mi,AX=new Mi,bX=new Mi,xX=(new en,new Oi,new Oi),TX=new on;!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(yX||(yX={})),bt(yX);var SX,EX=(eX=qa("cc.ScrollBarComponent"),tX=as("i18n:cc.ScrollBarComponent"),iX=ts(110),nX=es("UI/ScrollBar"),rX=Qa({type:Uw,tooltip:"作为当前滚动区域位置显示的滑块 Sprite",displayOrder:0}),oX=Qa({type:yX,tooltip:"ScrollBar 的滚动方向",displayOrder:1}),aX=Qa({tooltip:"是否在没有滚动动作时自动隐藏 ScrollBar",displayOrder:2}),sX=Qa({tooltip:"没有滚动动作后经过多久会自动隐藏。\n注意：只要当 “enableAutoHide” 为 true 时，才有效。",displayOrder:3}),eX(lX=tX(lX=iX(lX=nX((mX=dX=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_scrollView",uX,ne(i)),_e(i,"_handle",hX,ne(i)),_e(i,"_direction",pX,ne(i)),_e(i,"_enableAutoHide",fX,ne(i)),_e(i,"_autoHideTime",_X,ne(i)),i._touching=!1,i._opacity=255,i._autoHideRemainingTime=0,i}return ee(t,sp),J(t,[{key:"hide",value:function(){this._autoHideRemainingTime=0,this._setOpacity(0)}},{key:"show",value:function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)}},{key:"onScroll",value:function(e){if(this._scrollView){var t=this._scrollView.content;if(t){var i=t.getContentSize(),n=this._scrollView.node.getContentSize(),r=this.node.getContentSize();if(!this._conditionalDisableScrollBar(i,n)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var o=0,a=0,s=0,l=0,c=0;this._direction===yX.HORIZONTAL?(o=i.width,a=n.width,c=r.width,s=e.x,l=-this._convertToScrollViewSpace(t).x):this._direction===yX.VERTICAL&&(o=i.height,a=n.height,c=r.height,s=e.y,l=-this._convertToScrollViewSpace(t).y);var u=this._calculateLength(o,a,c,s),h=this._calculatePosition(o,a,c,l,s,u);this._updateLength(u),this._updateHandlerPosition(h)}}}}},{key:"setScrollView",value:function(e){this._scrollView=e}},{key:"onTouchBegan",value:function(){this._enableAutoHide&&(this._touching=!0)}},{key:"onTouchEnded",value:function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var e=this._scrollView.content;if(e){var t=e.getContentSize(),i=this._scrollView.node.getContentSize();if(this._conditionalDisableScrollBar(t,i))return}}this._autoHideRemainingTime=this._autoHideTime}}},{key:"onEnable",value:function(){var e=this.node.getComponent(Uw);e&&(this._opacity=e.color.a)}},{key:"start",value:function(){this._enableAutoHide&&this._setOpacity(0)}},{key:"update",value:function(e){this._processAutoHide(e)}},{key:"_convertToScrollViewSpace",value:function(e){if(!this._scrollView)return gX;var t=this._scrollView.node._uiProps.uiTransformComp,i=e._uiProps.uiTransformComp;if(!t||!i)return gX;AX.set(-e.anchorX*e.width,-e.anchorY*e.height,0),i.convertToWorldSpaceAR(AX,bX);var n=t.convertToNodeSpaceAR(bX);return n.x+=t.anchorX*t.width,n.y+=t.anchorY*t.height,n}},{key:"_setOpacity",value:function(e){if(this._handle){var t=this.node.getComponent(Uw);t&&(TX.set(t.color),TX.a=e,t.color=TX),(t=this._handle.getComponent(Uw))&&(TX.set(t.color),TX.a=e,t.color=TX)}}},{key:"_updateHandlerPosition",value:function(e){if(this._handle){var t=this._fixupHandlerPosition();this._handle.node.setPosition(e.x+t.x,e.y+t.y,t.z)}}},{key:"_fixupHandlerPosition",value:function(){var e=this.node.getContentSize(),t=this.node.getAnchorPoint(),i=this.handle.node.getContentSize(),n=this.handle.node.parent;Mi.set(AX,-e.width*t.x,-e.height*t.y,0);var r=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(AX,bX),o=new Mi;return n._uiProps.uiTransformComp.convertToNodeSpaceAR(r,o),this.direction===yX.HORIZONTAL?o=new Mi(o.x,o.y+(e.height-i.height)/2,0):this.direction===yX.VERTICAL&&(o=new Mi(o.x+(e.width-i.width)/2,o.y,0)),this.handle.node.setPosition(o),o}},{key:"_conditionalDisableScrollBar",value:function(e,t){return e.width<=t.width&&this._direction===yX.HORIZONTAL||e.height<=t.height&&this._direction===yX.VERTICAL}},{key:"_calculateLength",value:function(e,t,i,n){var r=e;return n&&(r+=20*(n>0?n:-n)),i*(t/r)}},{key:"_calculatePosition",value:function(e,t,i,n,r,o){var a=e-t;r&&(a+=Math.abs(r));var s=0;a&&(s=fi(s=n/a));var l=(i-o)*s;return this._direction===yX.VERTICAL?new Mi(0,l,0):new Mi(l,0,0)}},{key:"_updateLength",value:function(e){if(this._handle){var t=this._handle.node,i=t.getContentSize(),n=t.getAnchorPoint();n.x===xX.x&&n.y===xX.y||t.setAnchorPoint(xX),this._direction===yX.HORIZONTAL?t.setContentSize(e,i.height):t.setContentSize(i.width,e)}}},{key:"_processAutoHide",value:function(e){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=e,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var t=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(t)}}},{key:"handle",get:function(){return this._handle},set:function(e){this._handle!==e&&(this._handle=e,this.onScroll(new Mi(0,0,0)))}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this.onScroll(new Mi))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(e){this._enableAutoHide!==e&&(this._enableAutoHide=e,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(e){this._autoHideTime!==e&&(this._autoHideTime=e)}}]),t}(),dX.Direction=yX,de((cX=mX).prototype,"handle",[rX],Object.getOwnPropertyDescriptor(cX.prototype,"handle"),cX.prototype),de(cX.prototype,"direction",[oX],Object.getOwnPropertyDescriptor(cX.prototype,"direction"),cX.prototype),de(cX.prototype,"enableAutoHide",[aX],Object.getOwnPropertyDescriptor(cX.prototype,"enableAutoHide"),cX.prototype),de(cX.prototype,"autoHideTime",[sX],Object.getOwnPropertyDescriptor(cX.prototype,"autoHideTime"),cX.prototype),uX=de(cX.prototype,"_scrollView",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hX=de(cX.prototype,"_handle",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pX=de(cX.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yX.HORIZONTAL}}),fX=de(cX.prototype,"_enableAutoHide",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_X=de(cX.prototype,"_autoHideTime",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lX=cX))||lX)||lX)||lX)||lX);cc.ScrollBarComponent=EX;var CX,wX,kX,OX,RX,FX,IX,MX,PX,DX,BX,NX,LX,zX,GX,UX,XX,VX,HX,jX,WX,YX,qX,QX,ZX,KX,JX,$X,eV,tV,iV=qa("cc.ViewGroupComponent")(SX=ts(110)(SX=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,sp),t}())||SX)||SX;cc.ViewGroupComponent=iV;var nV,rV=new Mi,oV=new Mi,aV=new Mi,sV=new Oi,lV=new Oi,cV=function(){return(new Date).getMilliseconds()},uV={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(e){e.SCROLL_TO_TOP="scroll-to-top",e.SCROLL_TO_BOTTOM="scroll-to-bottom",e.SCROLL_TO_LEFT="scroll-to-left",e.SCROLL_TO_RIGHT="scroll-to-right",e.SCROLL_BEGAN="scroll-began",e.SCROLL_ENDED="scroll-ended",e.BOUNCE_TOP="bounce-top",e.BOUNCE_BOTTOM="bounce-bottom",e.BOUNCE_LEFT="bounce-left",e.BOUNCE_RIGHT="bounce-right",e.SCROLLING="scrolling",e.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",e.TOUCH_UP="touch-up"}(nV||(nV={}));var hV,pV,fV,_V,dV,mV,vV,yV,gV,AV,bV,xV,TV,SV,EV,CV,wV=(CX=qa("cc.ScrollViewComponent"),wX=as("i18n:cc.ScrollViewComponent"),kX=ts(110),OX=es("UI/ScrollView"),RX=Qa({range:[0,10],tooltip:"回弹持续的时间，0 表示将立即反弹",displayOrder:0}),FX=Qa({range:[0,1,.1],tooltip:"开启惯性后，在用户停止触摸后滚动多快停止，0 表示永不停止，1 表示立刻停止",displayOrder:1}),IX=Qa({tooltip:"是否允许滚动内容超过边界，并在停止触摸后回弹",displayOrder:2}),MX=Qa({tooltip:"是否开启滚动惯性",displayOrder:3}),PX=Qa({type:rg,tooltip:"可滚动展示内容的节点",displayOrder:4}),DX=Qa({tooltip:"是否开启水平滚动",displayOrder:5}),BX=Qa({type:EX,tooltip:"水平滚动的 ScrollBar",displayOrder:6}),NX=Qa({tooltip:"是否开启垂直滚动",displayOrder:7}),LX=Qa({type:EX,tooltip:"垂直滚动的 ScrollBar",displayOrder:8}),zX=Qa({tooltip:"滚动行为是否会取消子节点上注册的触摸事件",displayOrder:9}),GX=Qa({type:[Ak],tooltip:"滚动视图的事件回调函数",displayOrder:10}),CX(UX=wX(UX=kX(UX=OX((tV=eV=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"bounceDuration",VX,ne(i)),_e(i,"brake",HX,ne(i)),_e(i,"elastic",jX,ne(i)),_e(i,"inertia",WX,ne(i)),_e(i,"horizontal",YX,ne(i)),_e(i,"vertical",qX,ne(i)),_e(i,"cancelInnerEvents",QX,ne(i)),_e(i,"scrollEvents",ZX,ne(i)),i._autoScrolling=!1,i._scrolling=!1,_e(i,"_content",KX,ne(i)),_e(i,"_horizontalScrollBar",JX,ne(i)),_e(i,"_verticalScrollBar",$X,ne(i)),i._topBoundary=0,i._bottomBoundary=0,i._leftBoundary=0,i._rightBoundary=0,i._touchMoveDisplacements=[],i._touchMoveTimeDeltas=[],i._touchMovePreviousTimestamp=0,i._touchMoved=!1,i._autoScrollAttenuate=!1,i._autoScrollStartPosition=new Mi,i._autoScrollTargetDelta=new Mi,i._autoScrollTotalTime=0,i._autoScrollAccumulatedTime=0,i._autoScrollCurrentlyOutOfBoundary=!1,i._autoScrollBraking=!1,i._autoScrollBrakingStartPosition=new Mi,i._outOfBoundaryAmount=new Mi,i._outOfBoundaryAmountDirty=!0,i._stopMouseWheel=!1,i._mouseWheelEventElapsedTime=0,i._isScrollEndedWithThresholdEventFired=!1,i._scrollEventEmitMask=0,i._isBouncing=!1,i._contentPos=new Mi,i._deltaPos=new Mi,i}return ee(t,iV),J(t,[{key:"scrollToBottom",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(0,0),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i,!0)}},{key:"scrollToTop",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(0,1),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToLeft",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(0,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToRight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(1,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToTopLeft",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(0,1),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToTopRight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(1,1),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToBottomLeft",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(0,0),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToBottomRight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._calculateMovePercentDelta({anchor:new Oi(1,0),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(i,e,!1!==t):this._moveContent(i)}},{key:"scrollToOffset",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getMaxScrollOffset(),r=new Oi(0,0);0===n.x?r.x=0:r.x=e.x/n.x,0===n.y?r.y=1:r.y=(n.y-e.y)/n.y,this.scrollTo(r,t,i)}},{key:"getScrollOffset",value:function(){var e=this._getContentTopBoundary()-this._topBoundary,t=this._getContentLeftBoundary()-this._leftBoundary;return new Mi(t,e,0)}},{key:"getMaxScrollOffset",value:function(){var e=this.node._uiProps.uiTransformComp.contentSize,t=this._content._uiProps.uiTransformComp.contentSize,i=t.width-e.width,n=t.height-e.height;return new Mi(i=i>=0?i:0,n=n>=0?n:0,0)}},{key:"scrollToPercentHorizontal",value:function(e,t,i){var n=this._calculateMovePercentDelta({anchor:new Oi(e,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(n,t,!1!==i):this._moveContent(n)}},{key:"scrollTo",value:function(e,t,i){var n=this._calculateMovePercentDelta({anchor:new Oi(e),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(n,t,i):this._moveContent(n)}},{key:"scrollToPercentVertical",value:function(e,t,i){var n=this._calculateMovePercentDelta({anchor:new Oi(0,e),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(n,t,i):this._moveContent(n)}},{key:"stopAutoScroll",value:function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime}},{key:"setContentPosition",value:function(e){var t=this.getContentPosition();Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4||(this._content.setPosition(e),this._outOfBoundaryAmountDirty=!0)}},{key:"getContentPosition",value:function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):rV}},{key:"isScrolling",value:function(){return this._scrolling}},{key:"isAutoScrolling",value:function(){return this._autoScrolling}},{key:"getScrollEndedEventTiming",value:function(){return 1e-4}},{key:"start",value:function(){this._calculateBoundary(),this._content&&gk.once(lk.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)}},{key:"onEnable",value:function(){this._registerEvent(),this.content&&(this.content.on(rg.EventType.SIZE_CHANGED,this._calculateBoundary,this),this.content.on(rg.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.on(rg.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.on(rg.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._showScrollBar()}},{key:"update",value:function(e){this._autoScrolling&&this._processAutoScrolling(e)}},{key:"onDisable",value:function(){this._unregisterEvent(),this.content&&(this.content.off(rg.EventType.SIZE_CHANGED,this._calculateBoundary,this),this.content.off(rg.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.off(rg.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.off(rg.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()}},{key:"_registerEvent",value:function(){this.node.on(rg.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(rg.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(rg.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(rg.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(rg.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)}},{key:"_unregisterEvent",value:function(){this.node.off(rg.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(rg.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(rg.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(rg.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(rg.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)}},{key:"_onMouseWheel",value:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var i=new Mi,n=e.getScrollY();this.vertical?i.set(0,-.1*n,0):this.horizontal&&i.set(-.1*n,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(e)}}},{key:"_onTouchBegan",value:function(e,t){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(e,t)||(this._content&&this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)))}},{key:"_onTouchMoved",value:function(e,t){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(e,t)){var i=e.touch;if(this._content&&this._handleMoveLogic(i),this.cancelInnerEvents){var n=i.getUILocation(sV);if(n.subtract(i.getUIStartLocation(lV)),n.length()>7&&!this._touchMoved&&e.target!==this.node){var r=new Ev(e.getTouches(),e.bubbles);r.type=rg.EventType.TOUCH_CANCEL,r.touch=e.touch,r.simulate=!0,e.target.dispatchEvent(r),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}},{key:"_onTouchEnded",value:function(e,t){if(this.enabledInHierarchy&&this._content&&e&&!this._hasNestedViewGroup(e,t)){this._dispatchEvent(nV.TOUCH_UP);var i=e.touch;this._content&&this._handleReleaseLogic(i),this._touchMoved?e.propagationStopped=!0:this._stopPropagationIfTargetIsMe(e)}}},{key:"_onTouchCancelled",value:function(e,t){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(e,t)){if(e&&!e.simulate){var i=e.touch;this._content&&this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(e)}}},{key:"_calculateBoundary",value:function(){if(this.content){var e=this.content.getComponent(CG);e&&e.enabledInHierarchy&&e.updateLayout();var t=this.view._uiProps.uiTransformComp.contentSize,i=t.width*this.view.anchorX,n=t.height*this.view.anchorY;this._leftBoundary=-i,this._bottomBoundary=-n,this._rightBoundary=this._leftBoundary+t.width,this._topBoundary=this._bottomBoundary+t.height,this._moveContentToTopLeft(t)}}},{key:"_hasNestedViewGroup",value:function(e,t){if(e&&e.eventPhase===ll.CAPTURING_PHASE){if(t)for(var i,n=fe(t);!(i=n()).done;){var r=i.value;if(this.node===r)return!(!e.target||!e.target.getComponent(iV));if(r.getComponent(iV))return!0}return!1}}},{key:"_startInertiaScroll",value:function(e){var t=new Mi(e);t.multiplyScalar(.7),this._startAttenuatingAutoScroll(t,e)}},{key:"_calculateAttenuatedFactor",value:function(e){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*e+e*e*8e-9))}},{key:"_startAttenuatingAutoScroll",value:function(e,t){var i=this._calculateAutoScrollTimeByInitialSpeed(t.length()),n=new Mi(e);n.normalize();var r=this._content._uiProps.uiTransformComp.contentSize,o=this.node._uiProps.uiTransformComp.contentSize,a=r.width-o.width,s=r.height-o.height,l=this._calculateAttenuatedFactor(a),c=this._calculateAttenuatedFactor(s);n.x=n.x*a*(1-this.brake)*l,n.y=n.y*s*c*(1-this.brake),n.z=0;var u=e.length(),h=n.length()/u;if(n.add(e),this.brake>0&&h>7){h=Math.sqrt(h);var p=new Mi(e);p.multiplyScalar(h),n.set(p),n.add(e)}this.brake>0&&h>3&&(i*=h=3),0===this.brake&&h>1&&(i*=h),this._startAutoScroll(n,i,!0)}},{key:"_calculateAutoScrollTimeByInitialSpeed",value:function(e){return Math.sqrt(Math.sqrt(e/5))}},{key:"_startAutoScroll",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._flattenVectorByDirection(e);this._autoScrolling=!0,this._autoScrollTargetDelta=n,this._autoScrollAttenuate=i,Mi.copy(this._autoScrollStartPosition,this.getContentPosition()),this._autoScrollTotalTime=t,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=new Mi;var r=this._getHowMuchOutOfBoundary();r.equals(rV,1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)}},{key:"_calculateTouchMoveVelocity",value:function(){var e=0;if((e=this._touchMoveTimeDeltas.reduce((function(e,t){return e+t}),e))<=0||e>=.5)return new Mi;var t=new Mi;return t=this._touchMoveDisplacements.reduce((function(e,t){return e.add(t),e}),t),new Mi(t.x*(1-this.brake)/e,t.y*(1-this.brake)/e,0)}},{key:"_flattenVectorByDirection",value:function(e){var t=e;return t.x=this.horizontal?t.x:0,t.y=this.vertical?t.y:0,t}},{key:"_moveContent",value:function(e,t){var i=this._flattenVectorByDirection(e);oV.set(this.getContentPosition()),oV.add(i),oV.set(1e-4*Math.floor(1e4*oV.x),1e-4*Math.floor(1e4*oV.y),oV.z),this.setContentPosition(oV);var n=this._getHowMuchOutOfBoundary();this._updateScrollBar(n),this.elastic&&t&&this._startBounceBackIfNeeded()}},{key:"_getContentLeftBoundary",value:function(){return this.getContentPosition().x-this._content.anchorX*this._content.width}},{key:"_getContentRightBoundary",value:function(){return this._getContentLeftBoundary()+this._content.width}},{key:"_getContentTopBoundary",value:function(){return this._getContentBottomBoundary()+this._content.height}},{key:"_getContentBottomBoundary",value:function(){return this.getContentPosition().y-this._content.anchorY*this._content.height}},{key:"_getHowMuchOutOfBoundary",value:function(e){if((e=e||new Mi).equals(rV,1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var t=new Mi;return this._getContentLeftBoundary()+e.x>this._leftBoundary?t.x=this._leftBoundary-(this._getContentLeftBoundary()+e.x):this._getContentRightBoundary()+e.x<this._rightBoundary&&(t.x=this._rightBoundary-(this._getContentRightBoundary()+e.x)),this._getContentTopBoundary()+e.y<this._topBoundary?t.y=this._topBoundary-(this._getContentTopBoundary()+e.y):this._getContentBottomBoundary()+e.y>this._bottomBoundary&&(t.y=this._bottomBoundary-(this._getContentBottomBoundary()+e.y)),e.equals(rV,1e-4)&&(this._outOfBoundaryAmount=t,this._outOfBoundaryAmountDirty=!1),t=this._clampDelta(t)}},{key:"_updateScrollBar",value:function(e){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(e),this.verticalScrollBar&&this.verticalScrollBar.onScroll(e)}},{key:"_onScrollBarTouchBegan",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()}},{key:"_onScrollBarTouchEnded",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()}},{key:"_dispatchEvent",value:function(e){if(e===nV.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(e===nV.SCROLL_TO_TOP||e===nV.SCROLL_TO_BOTTOM||e===nV.SCROLL_TO_LEFT||e===nV.SCROLL_TO_RIGHT){var t=1<<uV[e];if(this._scrollEventEmitMask&t)return;this._scrollEventEmitMask|=t}Ak.emitEvents(this.scrollEvents,this,uV[e]),this.node.emit(e,this)}},{key:"_adjustContentOutOfBoundary",value:function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var e=this._getHowMuchOutOfBoundary();oV.set(this.getContentPosition()),oV.add(e),this._content&&(this._content.setPosition(oV),this._updateScrollBar(rV))}}},{key:"_hideScrollBar",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()}},{key:"_showScrollBar",value:function(){this._horizontalScrollBar&&this._horizontalScrollBar.show(),this._verticalScrollBar&&this._verticalScrollBar.show()}},{key:"_stopPropagationIfTargetIsMe",value:function(e){e.eventPhase===ll.AT_TARGET&&e.target===this.node&&(e.propagationStopped=!0)}},{key:"_processDeltaMove",value:function(e){this._scrollChildren(e),this._gatherTouchMove(e)}},{key:"_handleMoveLogic",value:function(e){this._deltaPos.set(this._getLocalAxisAlignDelta(e)),this._processDeltaMove(this._deltaPos)}},{key:"_handleReleaseLogic",value:function(e){this._deltaPos.set(this._getLocalAxisAlignDelta(e)),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(nV.SCROLL_ENDED))}},{key:"_getLocalAxisAlignDelta",value:function(e){var t=this.node._uiProps.uiTransformComp,i=new Mi;return t&&(e.getUILocation(sV),e.getUIPreviousLocation(lV),oV.set(sV.x,sV.y,0),aV.set(lV.x,lV.y,0),t.convertToNodeSpaceAR(oV,oV),t.convertToNodeSpaceAR(aV,aV),Mi.subtract(i,oV,aV)),i}},{key:"_scrollChildren",value:function(e){var t,i,n=e=this._clampDelta(e);this.elastic&&(t=this._getHowMuchOutOfBoundary(),n.x*=0===t.x?1:.5,n.y*=0===t.y?1:.5),this.elastic||(t=this._getHowMuchOutOfBoundary(n),n.add(t));var r=this._content.position;if(n.y>0)r.y-this._content.anchorY*this._content.height+n.y>=this._bottomBoundary&&(i=nV.SCROLL_TO_BOTTOM);else if(n.y<0){r.y-this._content.anchorY*this._content.height+this._content.height+n.y<=this._topBoundary&&(i=nV.SCROLL_TO_TOP)}else if(n.x<0){r.x-this._content.anchorX*this._content.width+this._content.width+n.x<=this._rightBoundary&&(i=nV.SCROLL_TO_RIGHT)}else if(n.x>0){r.x-this._content.anchorX*this._content.width+n.x>=this._leftBoundary&&(i=nV.SCROLL_TO_LEFT)}this._moveContent(n,!1),0===n.x&&0===n.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent(nV.SCROLL_BEGAN)),this._dispatchEvent(nV.SCROLLING)),i&&i.length>0&&this._dispatchEvent(i)}},{key:"_handlePressLogic",value:function(){this._autoScrolling&&this._dispatchEvent(nV.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=cV(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()}},{key:"_clampDelta",value:function(e){var t=this._content._uiProps.uiTransformComp.contentSize,i=this.node._uiProps.uiTransformComp.contentSize;return t.width<i.width&&(e.x=0),t.height<i.height&&(e.y=0),e}},{key:"_gatherTouchMove",value:function(e){var t=e.clone();for(this._clampDelta(t);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(t);var i=cV();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i}},{key:"_startBounceBackIfNeeded",value:function(){if(!this.elastic)return!1;var e=this._getHowMuchOutOfBoundary();if((e=this._clampDelta(e)).equals(rV,1e-4))return!1;var t=Math.max(this.bounceDuration,0);return this._startAutoScroll(e,t,!0),this._isBouncing||(e.y>0&&this._dispatchEvent(nV.BOUNCE_TOP),e.y<0&&this._dispatchEvent(nV.BOUNCE_BOTTOM),e.x>0&&this._dispatchEvent(nV.BOUNCE_RIGHT),e.x<0&&this._dispatchEvent(nV.BOUNCE_LEFT),this._isBouncing=!0),!0}},{key:"_processInertiaScroll",value:function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var e=this._calculateTouchMoveVelocity();!e.equals(oV,1e-4)&&this.brake<1&&this._startInertiaScroll(e)}this._onScrollBarTouchEnded()}},{key:"_isOutOfBoundary",value:function(){return!this._getHowMuchOutOfBoundary().equals(rV,1e-4)}},{key:"_isNecessaryAutoScrollBrake",value:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1}},{key:"_processAutoScrolling",value:function(e){var t=this._isNecessaryAutoScrollBrake(),i=t?.05:1;this._autoScrollAccumulatedTime+=e*(1/i);var n,r=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(n=r,r=(n-=1)*n*n*n*n+1);var o=new Mi(this._autoScrollTargetDelta);o.multiplyScalar(r);var a=new Mi(this._autoScrollStartPosition);a.add(o);var s=Math.abs(r-1)<=1e-4;if(Math.abs(r-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(nV.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var l=new Mi(a);l.subtract(this._autoScrollBrakingStartPosition),t&&l.multiplyScalar(i),a.set(this._autoScrollBrakingStartPosition),a.add(l)}else{var c=new Mi(a);c.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(c);u.equals(rV,1e-4)||(a.add(u),s=!0)}s&&(this._autoScrolling=!1);var h=new Mi(a);h.subtract(this.getContentPosition()),this._moveContent(this._clampDelta(h),s),this._dispatchEvent(nV.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(nV.SCROLL_ENDED))}},{key:"_checkMouseWheel",value:function(e){if(!this._getHowMuchOutOfBoundary().equals(rV,1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=e,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1)}},{key:"_calculateMovePercentDelta",value:function(e){var t=e.anchor,i=e.applyToHorizontal,n=e.applyToVertical;this._calculateBoundary(),t.clampf(new Oi(0,0),new Oi(1,1));var r=this.node._uiProps.uiTransformComp.contentSize,o=this._content._uiProps.uiTransformComp.contentSize,a=this._getContentBottomBoundary()-this._bottomBoundary;a=-a;var s=this._getContentLeftBoundary()-this._leftBoundary;s=-s;var l=new Mi,c=0;return i&&(c=o.width-r.width,l.x=s-c*t.x),n&&(c=o.height-r.height,l.y=a-c*t.y),l}},{key:"_moveContentToTopLeft",value:function(e){var t=this._content._uiProps.uiTransformComp.contentSize,i=this._getContentBottomBoundary()-this._bottomBoundary;i=-i;var n=new Mi,r=0,o=this._getContentLeftBoundary()-this._leftBoundary;o=-o,t.height<e.height?(r=t.height-e.height,n.y=i-r,this.verticalScrollBar&&this.verticalScrollBar.hide()):this.verticalScrollBar&&this.verticalScrollBar.show(),t.width<e.width?(r=t.width-e.width,n.x=o,this._horizontalScrollBar&&this._horizontalScrollBar.hide()):this._horizontalScrollBar&&this._horizontalScrollBar.show(),this._moveContent(n),this._adjustContentOutOfBoundary()}},{key:"_scaleChanged",value:function(e){e===sh.SCALE&&this._calculateBoundary()}},{key:"content",get:function(){return this._content},set:function(e){this._content!==e&&(this._content=e,this._calculateBoundary())}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(e){this._horizontalScrollBar!==e&&(this._horizontalScrollBar=e,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(rV)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(e){this._verticalScrollBar!==e&&(this._verticalScrollBar=e,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(rV)))}},{key:"view",get:function(){return this._content?this._content.parent:null}}]),t}(),eV.EventType=nV,VX=de((XX=tV).prototype,"bounceDuration",[RX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),HX=de(XX.prototype,"brake",[FX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),jX=de(XX.prototype,"elastic",[IX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),WX=de(XX.prototype,"inertia",[MX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),de(XX.prototype,"content",[PX],Object.getOwnPropertyDescriptor(XX.prototype,"content"),XX.prototype),YX=de(XX.prototype,"horizontal",[DX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),de(XX.prototype,"horizontalScrollBar",[BX],Object.getOwnPropertyDescriptor(XX.prototype,"horizontalScrollBar"),XX.prototype),qX=de(XX.prototype,"vertical",[NX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),de(XX.prototype,"verticalScrollBar",[LX],Object.getOwnPropertyDescriptor(XX.prototype,"verticalScrollBar"),XX.prototype),QX=de(XX.prototype,"cancelInnerEvents",[zX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ZX=de(XX.prototype,"scrollEvents",[GX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),KX=de(XX.prototype,"_content",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),JX=de(XX.prototype,"_horizontalScrollBar",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$X=de(XX.prototype,"_verticalScrollBar",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),UX=XX))||UX)||UX)||UX)||UX);cc.ScrollViewComponent=wV;var kV,OV=new Mi;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(kV||(kV={})),bt(kV);var RV,FV,IV,MV,PV,DV,BV,NV,LV,zV,GV=(hV=qa("cc.SliderComponent"),pV=as("i18n:cc.SliderComponent"),fV=ts(110),_V=es("UI/Slider"),dV=Qa({type:Uw,tooltip:"滑块按钮部件"}),mV=Qa({type:kV,tooltip:"滑动方向"}),vV=Qa({slide:!0,range:[0,1,.01],tooltip:"当前进度值，该数值的区间是 0 - 1 之间。"}),yV=Qa({type:Ak,tooltip:"滑动器组件事件回调函数"}),hV(gV=pV(gV=fV(gV=_V((CV=EV=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"slideEvents",bV,ne(i)),_e(i,"_handle",xV,ne(i)),_e(i,"_direction",TV,ne(i)),_e(i,"_progress",SV,ne(i)),i._offset=new Mi,i._dragging=!1,i._touchHandle=!1,i._handlelocalPos=new Mi,i._touchPos=new Mi,i}return ee(t,sp),J(t,[{key:"__preload",value:function(){this._updateHandlePosition()}},{key:"onEnable",value:function(){this._updateHandlePosition(),this.node.on(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.on(exports.SystemEventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this),this.node.on(exports.SystemEventType.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.on(exports.SystemEventType.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(exports.SystemEventType.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this))}},{key:"onDisable",value:function(){this.node.off(exports.SystemEventType.TOUCH_START,this._onTouchBegan,this),this.node.off(exports.SystemEventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this),this.node.off(exports.SystemEventType.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.off(exports.SystemEventType.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(exports.SystemEventType.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(exports.SystemEventType.TOUCH_END,this._onTouchEnded,this))}},{key:"_onHandleDragStart",value:function(e){if(e&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var t=e.touch.getUILocation();Mi.set(this._touchPos,t.x,t.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),e.propagationStopped=!0}}},{key:"_onTouchBegan",value:function(e){this._handle&&e&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(e.touch),e.propagationStopped=!0)}},{key:"_onTouchMoved",value:function(e){this._dragging&&e&&(this._handleSliderLogic(e.touch),e.propagationStopped=!0)}},{key:"_onTouchEnded",value:function(e){this._dragging=!1,this._touchHandle=!1,this._offset=new Mi,e&&(e.propagationStopped=!0)}},{key:"_onTouchCancelled",value:function(e){this._dragging=!1,e&&(e.propagationStopped=!0)}},{key:"_handleSliderLogic",value:function(e){this._updateProgress(e),this._emitSlideEvent()}},{key:"_emitSlideEvent",value:function(){Ak.emitEvents(this.slideEvents,this),this.node.emit("slide",this)}},{key:"_updateProgress",value:function(e){if(this._handle&&e){var t=e.getUILocation();Mi.set(this._touchPos,t.x,t.y,0);var i=this.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,OV);this.direction===kV.Horizontal?this.progress=fi(.5+(i.x-this._offset.x)/this.node.width):this.progress=fi(.5+(i.y-this._offset.y)/this.node.height)}}},{key:"_updateHandlePosition",value:function(){this._handle&&(this._handlelocalPos.set(this._handle.node.getPosition()),this._direction===kV.Horizontal?this._handlelocalPos.x=-this.node.width*this.node.anchorX+this.progress*this.node.width:this._handlelocalPos.y=-this.node.height*this.node.anchorY+this.progress*this.node.height,this._handle.node.setPosition(this._handlelocalPos))}},{key:"_changeLayout",value:function(){var e=this.node.getContentSize();if(this.node.setContentSize(e.height,e.width),this._handle){var t=this._handle.node.position;this._direction===kV.Horizontal?this._handle.node.setPosition(t.x,0,t.z):this._handle.node.setPosition(0,t.y,t.z),this._updateHandlePosition()}}},{key:"handle",get:function(){return this._handle},set:function(e){this._handle!==e&&(this._handle=e)}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(e){this._progress!==e&&(this._progress=e,this._updateHandlePosition())}}]),t}(),EV.Direction=kV,de((AV=CV).prototype,"handle",[dV],Object.getOwnPropertyDescriptor(AV.prototype,"handle"),AV.prototype),de(AV.prototype,"direction",[mV],Object.getOwnPropertyDescriptor(AV.prototype,"direction"),AV.prototype),de(AV.prototype,"progress",[vV],Object.getOwnPropertyDescriptor(AV.prototype,"progress"),AV.prototype),bV=de(AV.prototype,"slideEvents",[yV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xV=de(AV.prototype,"_handle",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),TV=de(AV.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return kV.Horizontal}}),SV=de(AV.prototype,"_progress",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),gV=AV))||gV)||gV)||gV)||gV);cc.SliderComponent=GV;var UV,XV,VV,HV,jV,WV,YV,qV,QV,ZV,KV,JV,$V,eH,tH,iH,nH,rH,oH=(RV=qa("cc.ToggleContainerComponent"),FV=as("i18n:cc.ToggleContainerComponent"),IV=ts(110),MV=es("UI/ToggleContainer"),PV=Qa({type:[Ak],tooltip:"选中事件。列表类型，默认为空，用户添加的每一个事件由节点引用，组件名称和一个响应函数组成。"}),DV=Qa({tooltip:"如果这个设置为 true， 那么 toggle 按钮在被点击的时候可以反复地被选中和未选中。"}),RV(BV=FV(BV=IV(BV=MV(BV=Ja((LV=de((NV=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"checkEvents",LV,ne(i)),_e(i,"_allowSwitchOff",zV,ne(i)),i._toggleItems=[],i}return ee(t,sp),J(t,[{key:"start",value:function(){this._makeAtLeastOneToggleChecked()}},{key:"updateToggles",value:function(e){this.enabledInHierarchy&&e.isChecked&&(this.toggleItems.forEach((function(t){t!==e&&t.isChecked&&t.enabled&&(t.isChecked=!1)})),this.checkEvents&&Ak.emitEvents(this.checkEvents,e))}},{key:"addToggle",value:function(e){-1===this._toggleItems.indexOf(e)&&this._toggleItems.push(e),this._allowOnlyOneToggleChecked()}},{key:"removeToggle",value:function(e){var t=this._toggleItems.indexOf(e);t>-1&&this._toggleItems.splice(t,1),this._makeAtLeastOneToggleChecked()}},{key:"_allowOnlyOneToggleChecked",value:function(){var e=!1;return this._toggleItems.forEach((function(t){e&&t.enabled&&(t.isChecked=!1),t.isChecked&&t.enabled&&(e=!0)})),e}},{key:"_makeAtLeastOneToggleChecked",value:function(){this._allowOnlyOneToggleChecked()||this._allowSwitchOff||this._toggleItems.length>0&&(this._toggleItems[0].isChecked=!0)}},{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(e){this._allowSwitchOff=e}},{key:"toggleItems",get:function(){return this._toggleItems}}]),t}()).prototype,"checkEvents",[PV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zV=de(NV.prototype,"_allowSwitchOff",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(NV.prototype,"allowSwitchOff",[DV],Object.getOwnPropertyDescriptor(NV.prototype,"allowSwitchOff"),NV.prototype),BV=NV))||BV)||BV)||BV)||BV)||BV);function aH(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(t))}cc.ToggleContainerComponent=oH,(rH||(rH={})).TOGGLE="toggle";var sH,lH=(UV=qa("cc.ToggleComponent"),XV=as("i18n:cc.ToggleComponent"),VV=ts(110),HV=es("UI/Toggle"),jV=$a(By),WV=Qa({tooltip:"如果这个设置为 true，则 check mark 组件会处于 enabled 状态，否则处于 disabled 状态。",displayOrder:2}),YV=Qa({type:Uw,tooltip:"Toggle 处于选中状态时显示的精灵图片",displayOrder:3}),qV=Qa({type:oH,tooltip:"Toggle 所属的 ToggleGroup，这个属性是可选的。如果这个属性为 null，则 Toggle 是一个 CheckBox，否则，Toggle 是一个 RadioButton。",displayOrder:4}),QV=Qa({type:[Ak],tooltip:"列表类型，默认为空，用户添加的每一个事件由节点引用，组件名称和一个响应函数组成"}),UV(ZV=XV(ZV=VV(ZV=HV(ZV=jV((nH=iH=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"checkEvents",JV,ne(i)),_e(i,"_isChecked",$V,ne(i)),_e(i,"_toggleGroup",eH,ne(i)),_e(i,"_checkMark",tH,ne(i)),i}return ee(t,yN),J(t,[{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._registerToggleEvent(),this._toggleGroup&&this._toggleGroup.enabled&&this._toggleGroup.addToggle(this)}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this),this._unregisterToggleEvent(),this._toggleGroup&&this._toggleGroup.enabled&&this._toggleGroup.removeToggle(this)}},{key:"toggle",value:function(){var e=this.toggleGroup||this._toggleContainer;e&&e.enabled&&this.isChecked&&!e.allowSwitchOff||(this.isChecked=!this.isChecked,e&&e.enabled&&e.updateToggles(this),this._emitToggleEvents())}},{key:"check",value:function(){var e=this.toggleGroup||this._toggleContainer;e&&e.enabled&&this.isChecked&&!e.allowSwitchOff||(this.isChecked=!0,e&&e.enabled&&e.updateToggles(this),this._emitToggleEvents())}},{key:"uncheck",value:function(){var e=this.toggleGroup||this._toggleContainer;e&&e.enabled&&this.isChecked&&!e.allowSwitchOff||(this.isChecked=!1,this._emitToggleEvents())}},{key:"_updateCheckMark",value:function(){this._checkMark&&(this._checkMark.node.active=!!this.isChecked)}},{key:"_registerToggleEvent",value:function(){this.node.on(t.EventType.CLICK,this.toggle,this)}},{key:"_unregisterToggleEvent",value:function(){this.node.off(t.EventType.CLICK,this.toggle,this)}},{key:"_emitToggleEvents",value:function(){this.node.emit(t.EventType.TOGGLE,this),this.checkEvents&&Ak.emitEvents(this.checkEvents,this)}},{key:"isChecked",get:function(){return this._isChecked},set:function(e){this._isChecked!==e&&(this._isChecked=e,this._updateCheckMark())}},{key:"checkMark",get:function(){return this._checkMark},set:function(e){this._checkMark!==e&&(this._checkMark=e)}},{key:"toggleGroup",get:function(){return this._toggleGroup},set:function(e){this._toggleGroup!==e&&(this._toggleGroup&&this._toggleGroup.removeToggle(this),this._toggleGroup=e,this._toggleGroup&&this._toggleGroup.enabled&&this._toggleGroup.addToggle(this))}},{key:"_resizeToTarget",set:function(e){e&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){this.node.parent;return null}}]),t}(),iH.EventType=aH(rH,mN),de((KV=nH).prototype,"isChecked",[WV],Object.getOwnPropertyDescriptor(KV.prototype,"isChecked"),KV.prototype),de(KV.prototype,"checkMark",[YV],Object.getOwnPropertyDescriptor(KV.prototype,"checkMark"),KV.prototype),de(KV.prototype,"toggleGroup",[qV],Object.getOwnPropertyDescriptor(KV.prototype,"toggleGroup"),KV.prototype),JV=de(KV.prototype,"checkEvents",[QV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$V=de(KV.prototype,"_isChecked",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),eH=de(KV.prototype,"_toggleGroup",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tH=de(KV.prototype,"_checkMark",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ZV=KV))||ZV)||ZV)||ZV)||ZV)||ZV);cc.ToggleComponent=lH;var cH,uH,hH,pH=qa("cc.UIModelComponent")(sH=as("i18n:cc.UIModelComponent")(sH=ts(110)(sH=es("UI/Model")(sH=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._models=null,i._modelComponent=null,i}return ee(t,JC),J(t,[{key:"onLoad",value:function(){this.node._uiProps.uiTransformComp||this.node.addComponent("cc.UITransformComponent"),this._modelComponent=this.getComponent("cc.RenderableComponent"),this._modelComponent?(this._modelComponent._sceneGetter=gk.root.ui.getRenderSceneGetter(),this._models=this._modelComponent._collectModels()):console.warn("node '".concat(this.node&&this.node.name,"' doesn't have any renderable component"))}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this._modelComponent&&this._modelComponent._attachToScene()}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this),this._modelComponent&&this._modelComponent._detachFromScene()}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this._modelComponent=this.getComponent("cc.RenderableComponent"),this._modelComponent&&(this._modelComponent._sceneGetter=null,cc.isValid(this._modelComponent,!0)&&this._modelComponent._attachToScene(),this._models=null)}},{key:"updateAssembler",value:function(e){if(this._models){for(var t,i=fe(this._models);!(t=i()).done;){var n=t.value;e.commitModel.call(e,this,n,this._modelComponent.material)}return!0}return!1}},{key:"update",value:function(){this._fitUIRenderQueue()}},{key:"_fitUIRenderQueue",value:function(){if(this._modelComponent){for(var e=this._modelComponent.sharedMaterials.length,t=0;t<e;t++){var i=this._modelComponent.getMaterialInstance(t);if(null!=i)for(var n=i.passes,r=i.effectAsset,o=i.technique,a=n.length,s=0;s<a;s++){if(!n[s].blendState.targets[0].blend)n[s].blendState.targets[0].blend=!0,n[s].overridePipelineStates(r.techniques[o].passes[s],{blendState:n[s].blendState})}}for(var l=0;l<e;l++){var c=this._modelComponent.getMaterialInstance(l);if(null!=c)for(var u,h=fe(c.passes);!(u=h()).done;){u.value._priority=wc.MAX-11}}}}},{key:"modelComponent",get:function(){return this._modelComponent}}]),t}())||sH)||sH)||sH)||sH;cc.UIModelComponent=pH;var fH,_H=new Qi;!function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED",e[e.ERROR=2]="ERROR",e[e.JS_EVALUATED=3]="JS_EVALUATED"}(fH||(fH={}));var dH={devicePixelRatio:!1,enableDiv:!1};ws.os===ws.OS_IOS&&(dH.enableDiv=!0),ws.isMobile?ws.browserType===ws.BROWSER_TYPE_FIREFOX&&(dH.enableBG=!0):ws.browserType===ws.BROWSER_TYPE_IE&&(dH.closeHistory=!0);var mH,vH,yH,gH,AH,bH,xH,TH,SH,EH,CH,wH,kH=qa("cc.WebviewImpl")((hH=uH=function(){function e(){Z(this,e),this._EventList=new Map,this._visible=!1,this._div=null,this._iframe=null,this._forceUpdate=!0,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this._eventListeners={load:function(){},error:function(){}}}return J(e,[{key:"createDomElementIfNeeded",value:function(e,t){this._div?this._updateSize(e,t):this._createNativeControl(e,t)}},{key:"removeDom",value:function(){var e=this._div;e&&(pt(cc.game.container,e)&&cc.game.container.removeChild(e),this._div=null);var t=this._iframe;if(t){var i=this._eventListeners;t.removeEventListener("load",i.load),t.removeEventListener("error",i.error),i.load=null,i.error=null,this._iframe=null}}},{key:"loadURL",value:function(t){var i=this._iframe;if(i){i.src=t;var n=this;i.addEventListener("load",(function e(){n._updateVisibility(),i.removeEventListener("load",e)})),this._dispatchEvent(e.EventType.LOADING)}}},{key:"stopLoading",value:function(){v(7800)}},{key:"reload",value:function(){var e=this._iframe;if(e){var t=e.contentWindow;t&&t.location&&t.location.reload()}}},{key:"canGoBack",value:function(){return v(7801),!0}},{key:"canGoForward",value:function(){return v(7802),!0}},{key:"goBack",value:function(){try{if(e.Polyfill.closeHistory)return v(7803);var t=this._iframe;if(t){var i=t.contentWindow;i&&i.location&&i.history.back.call(i)}}catch(e){c(e)}}},{key:"goForward",value:function(){try{if(e.Polyfill.closeHistory)return v(7804);var t=this._iframe;if(t){var i=t.contentWindow;i&&i.location&&i.history.forward.call(i)}}catch(e){c(e)}}},{key:"evaluateJS",value:function(e){var t=this._iframe;if(t)t.contentWindow}},{key:"setScalesPageToFit",value:function(){v(7805)}},{key:"setEventListener",value:function(e,t){this._EventList[e]=t}},{key:"removeEventListener",value:function(e){this._EventList[e]=null}},{key:"_dispatchEvent",value:function(e){var t=this._EventList[e];t&&this._iframe&&t.call(this,this,this._iframe.src)}},{key:"destroy",value:function(){this.removeDom()}},{key:"setVisible",value:function(e){this._visible!==e&&(this._visible=!!e,this._updateVisibility())}},{key:"updateMatrix",value:function(e){if(this._div&&this._visible){e.getWorldMatrix(_H);var t=e.getContentSize();if(this._forceUpdate||this._m00!==_H.m00||this._m01!==_H.m01||this._m04!==_H.m04||this._m05!==_H.m05||this._m12!==_H.m12||this._m13!==_H.m13||this._w!==t.width||this._h!==t.height){this._m00=_H.m00,this._m01=_H.m01,this._m04=_H.m04,this._m05=_H.m05,this._m12=_H.m12,this._m13=_H.m13,this._w=t.width,this._h=t.height;var i=lS.getScaleX(),n=lS.getScaleY(),r=lS.getDevicePixelRatio();i/=r,n/=r;var o=cc.game.container,a=_H.m00*i,s=_H.m01,l=_H.m04,c=_H.m05*n,u=o&&o.style.paddingLeft?parseInt(o.style.paddingLeft):0,h=o&&o.style.paddingBottom?parseInt(o.style.paddingBottom):0;this._updateSize(this._w,this._h);var p=this._div.clientWidth*i,f=this._div.clientHeight*n,_=e.getAnchorPoint(),d=p*_H.m00*_.x,m=f*_H.m05*_.y,v="matrix("+a+","+-s+","+-l+","+c+","+(_H.m12*i-d+u)+","+-(_H.m13*n-m+h)+")";this._div.style.transform=v,this._div.style["-webkit-transform"]=v,this._div.style["transform-origin"]="0px 100% 0px",this._div.style["-webkit-transform-origin"]="0px 100% 0px";var y=e.getComponent(Fw);y&&this._setOpacity(y.color.a)}}}},{key:"setOnJSCallback",value:function(e){}},{key:"setJavascriptInterfaceScheme",value:function(e){}},{key:"loadData",value:function(e,t,i,n){}},{key:"loadHTMLString",value:function(e,t){}},{key:"_updateVisibility",value:function(){if(this._div){var e=this._div;this._visible?e.style.visibility="visible":e.style.visibility="hidden",this._forceUpdate=!0}}},{key:"_updateSize",value:function(e,t){var i=this._div;i&&(i.style.width=e+"px",i.style.height=t+"px")}},{key:"_initEvent",value:function(){var t=this._iframe;if(t){var i=this._eventListeners,n=this;i.load=function(){n._dispatchEvent(e.EventType.LOADED)},i.error=function(){n._dispatchEvent(e.EventType.ERROR)},t.addEventListener("load",i.load),t.addEventListener("error",i.error)}}},{key:"_initStyle",value:function(){if(this._div){var e=this._div;e.style.position="absolute",e.style.bottom="0px",e.style.left="0px"}}},{key:"_setOpacity",value:function(e){var t=this._iframe;t&&t.style&&(t.style.opacity=(e/255).toString())}},{key:"_createDom",value:function(t,i){e.Polyfill.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._div.appendChild(this._iframe),this._iframe.style.width="100%",this._iframe.style.height="100%"):this._div=this._iframe=document.createElement("iframe"),e.Polyfill.enableBG&&(this._div.style.background="#FFF"),this._div.style.background="#FFF",this._div.style.height=i+"px",this._div.style.width=t+"px",this._div.style.overflow="scroll",this._iframe.style.border="none",cc.game.container.appendChild(this._div),this._updateVisibility()}},{key:"_createNativeControl",value:function(e,t){this._createDom(e,t),this._initStyle(),this._initEvent()}}]),e}(),uH.Polyfill=dH,uH.EventType=fH,cH=hH))||cH,OH=fH;function RH(){}var FH,IH,MH,PH,DH,BH,NH,LH,zH,GH,UH,XH,VH,HH,jH,WH,YH,qH,QH,ZH,KH,JH,$H,ej,tj,ij,nj,rj,oj,aj,sj,lj,cj,uj,hj,pj,fj,_j,dj=(mH=qa("cc.WebviewComponent"),vH=as("i18n:cc.WebviewComponent"),yH=es("UI/WebView"),gH=ts(100),AH=Qa({tooltip:"指定 WebView 加载的网址，它应该是一个 http 或者 https 开头的字符串"}),bH=Qa({type:Ak,tooltip:"WebView 的回调事件，当网页加载过程中，加载完成后或者加载出错时都会回调此函数"}),mH(xH=vH(xH=yH(xH=gH((wH=CH=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"webviewEvents",SH,ne(e)),_e(e,"_url",EH,ne(e)),e._impl=null,e._impl=new kH,e}return ee(t,JC),J(t,[{key:"url",get:function(){return this._url},set:function(e){this._url=e;var t=this._impl;t&&t.loadURL(e)}}]),J(t,[{key:"onRestore",value:function(){this._impl||(this._impl=new kH)}},{key:"onEnable",value:function(){if(this._impl){var e=this._impl;e.createDomElementIfNeeded(this.node.width,this.node.height),e.loadURL(this._url),e.setVisible(!0),e.setEventListener(OH.LOADED,this._onWebViewLoaded.bind(this)),e.setEventListener(OH.LOADING,this._onWebViewLoading.bind(this)),e.setEventListener(OH.ERROR,this._onWebViewLoadError.bind(this))}}},{key:"onDisable",value:function(){if(this._impl){var e=this._impl;e.setVisible(!1),e.setEventListener(OH.LOADED,RH),e.setEventListener(OH.LOADING,RH),e.setEventListener(OH.ERROR,RH)}}},{key:"onDestroy",value:function(){this._impl&&(this._impl.destroy(),this._impl=null)}},{key:"update",value:function(e){this._impl&&this._impl.updateMatrix(this.node)}},{key:"setJavascriptInterfaceScheme",value:function(e){this._impl&&this._impl.setJavascriptInterfaceScheme(e)}},{key:"setOnJSCallback",value:function(e){this._impl&&this._impl.setOnJSCallback(e)}},{key:"evaluateJS",value:function(e){this._impl&&this._impl.evaluateJS(e)}},{key:"_onWebViewLoaded",value:function(){Ak.emitEvents(this.webviewEvents,this,OH.LOADED),this.node.emit("loaded",this)}},{key:"_onWebViewLoading",value:function(){return Ak.emitEvents(this.webviewEvents,this,OH.LOADING),this.node.emit("loading",this),!0}},{key:"_onWebViewLoadError",value:function(){Ak.emitEvents(this.webviewEvents,this,OH.ERROR),this.node.emit("error",this)}}]),t}(),CH.EventType=OH,de((TH=wH).prototype,"url",[AH],Object.getOwnPropertyDescriptor(TH.prototype,"url"),TH.prototype),SH=de(TH.prototype,"webviewEvents",[bH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),EH=de(TH.prototype,"_url",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),xH=TH))||xH)||xH)||xH)||xH);cc.WebviewComponent=dj;var mj,vj,yj=new Mi;function gj(e){return e instanceof iA?$x:e.getContentSize()}function Aj(e,t,i,n){for(var r=e.parent?e.parent.getScale():yj,o=r.x,a=r.y,s=0,l=0,c=e.parent;;){if(!c)return i.x=i.y=0,void(n.x=n.y=1);var u=c.getPosition();if(s+=u.x,l+=u.y,(c=c.parent)===t)break;var h=(r=c?c.getScale():yj).x,p=r.y;s*=h,l*=p,o*=h,a*=p}n.x=0!==o?1/o:1,n.y=0!==a?1/a:1,i.x=-s,i.y=-l}!function(e){e[e.ONCE=0]="ONCE",e[e.ALWAYS=1]="ALWAYS",e[e.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(mj||(mj={})),bt(mj),function(e){e[e.TOP=1]="TOP",e[e.MID=2]="MID",e[e.BOT=4]="BOT",e[e.LEFT=8]="LEFT",e[e.CENTER=16]="CENTER",e[e.RIGHT=32]="RIGHT",e[e.HORIZONTAL=56]="HORIZONTAL",e[e.VERTICAL=7]="VERTICAL"}(vj||(vj={}));var bj,xj=vj.TOP|vj.BOT,Tj=vj.LEFT|vj.RIGHT;exports.WidgetComponent=(FH=qa("cc.WidgetComponent"),IH=as("i18n:cc.WidgetComponent"),MH=ts(110),PH=es("UI/Widget"),DH=$a(By),BH=Qa({type:rg,tooltip:"对齐目标"}),NH=Qa({tooltip:"是否对齐上边"}),LH=Qa({tooltip:"是否对齐下边"}),zH=Qa({tooltip:"是否对齐左边"}),GH=Qa({tooltip:"是否对齐右边"}),UH=Qa({tooltip:"是否垂直方向对齐中点，开启此项会将垂直方向其他对齐选项取消"}),XH=Qa({tooltip:"是否水平方向对齐中点，开启此选项会将水平方向其他对齐选项取消"}),VH=Qa({visible:!1}),HH=Qa({visible:!1}),jH=Qa({type:mj,tooltip:"指定 widget 的对齐方式，用于决定运行时 widget 应何时更新"}),WH=Qa({editorOnly:!0}),FH(YH=IH(YH=MH(YH=PH(YH=DH(YH=Ja((_j=fj=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._lastPos=new Mi,i._lastSize=new en,i._dirty=!0,_e(i,"_alignFlags",QH,ne(i)),_e(i,"_target",ZH,ne(i)),_e(i,"_left",KH,ne(i)),_e(i,"_right",JH,ne(i)),_e(i,"_top",$H,ne(i)),_e(i,"_bottom",ej,ne(i)),_e(i,"_horizontalCenter",tj,ne(i)),_e(i,"_verticalCenter",ij,ne(i)),_e(i,"_isAbsLeft",nj,ne(i)),_e(i,"_isAbsRight",rj,ne(i)),_e(i,"_isAbsTop",oj,ne(i)),_e(i,"_isAbsBottom",aj,ne(i)),_e(i,"_isAbsHorizontalCenter",sj,ne(i)),_e(i,"_isAbsVerticalCenter",lj,ne(i)),_e(i,"_originalWidth",cj,ne(i)),_e(i,"_originalHeight",uj,ne(i)),_e(i,"_alignMode",hj,ne(i)),_e(i,"_lockFlags",pj,ne(i)),i}return ee(t,sp),J(t,[{key:"updateAlignment",value:function(){cc._widgetManager.updateAlignment(this.node)}},{key:"_validateTargetInDEV",value:function(){}},{key:"setDirty",value:function(){this._recursiveDirty()}},{key:"onEnable",value:function(){this.node.getPosition(this._lastPos),this.node.getContentSize(this._lastSize),cc._widgetManager.add(this),this._registerEvent(),this._registerTargetEvents()}},{key:"onDisable",value:function(){cc._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()}},{key:"onDestroy",value:function(){this._removeParentEvent()}},{key:"_adjustWidgetToAllowMovingInEditor",value:function(e){if(e&sh.POSITION&&!cc._widgetManager.isAligning){var t=this.node.getPosition(),i=this._lastPos,n=new Mi(t);n.subtract(i);var r=this.node.parent,o=new Mi(1,1,1);if(this.target&&(r=this.target,Aj(this.node,r,new Mi,o)),r){var a=gj(r),s=new Mi;0!==a.width&&0!==a.height&&Mi.set(s,n.x/a.width,n.y/a.height,s.z),this.isAlignTop&&(this._top-=(this._isAbsTop?n.y:s.y)*o.y),this.isAlignBottom&&(this._bottom+=(this._isAbsBottom?n.y:s.y)*o.y),this.isAlignLeft&&(this._left+=(this._isAbsLeft?n.x:s.x)*o.x),this.isAlignRight&&(this._right-=(this._isAbsRight?n.x:s.x)*o.x),this.isAlignHorizontalCenter&&(this._horizontalCenter+=(this._isAbsHorizontalCenter?n.x:s.x)*o.x),this.isAlignVerticalCenter&&(this._verticalCenter+=(this._isAbsVerticalCenter?n.y:s.y)*o.y),this._recursiveDirty()}}}},{key:"_adjustWidgetToAllowResizingInEditor",value:function(){if(!cc._widgetManager.isAligning){this.setDirty();var e=this.node.getContentSize(),t=this._lastSize,i=new Mi(e.width-t.width,e.height-t.height,0),n=this.node.parent,r=new Mi(1,1,1);if(this.target&&(n=this.target,Aj(this.node,n,new Mi,r)),n){var o=gj(n),a=new Mi;0!==o.width&&0!==o.height&&Mi.set(a,i.x/o.width,i.y/o.height,a.z);var s=this.node.getAnchorPoint();this.isAlignTop&&(this._top-=(this._isAbsTop?i.y:a.y)*(1-s.y)*r.y),this.isAlignBottom&&(this._bottom-=(this._isAbsBottom?i.y:a.y)*s.y*r.y),this.isAlignLeft&&(this._left-=(this._isAbsLeft?i.x:a.x)*s.x*r.x),this.isAlignRight&&(this._right-=(this._isAbsRight?i.x:a.x)*(1-s.x)*r.x),this._recursiveDirty()}}}},{key:"_adjustWidgetToAnchorChanged",value:function(){this.setDirty()}},{key:"_adjustTargetToParentChanged",value:function(e){e&&this._unregisterOldParentEvents(e),this.node.getParent()&&this._registerTargetEvents()}},{key:"_registerEvent",value:function(){this.node.on(exports.SystemEventType.TRANSFORM_CHANGED,this._adjustWidgetToAllowMovingInEditor,this),this.node.on(exports.SystemEventType.SIZE_CHANGED,this._adjustWidgetToAllowResizingInEditor,this),this.node.on(exports.SystemEventType.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(exports.SystemEventType.PARENT_CHANGED,this._adjustTargetToParentChanged,this)}},{key:"_unregisterEvent",value:function(){this.node.off(exports.SystemEventType.TRANSFORM_CHANGED,this._adjustWidgetToAllowMovingInEditor,this),this.node.off(exports.SystemEventType.SIZE_CHANGED,this._adjustWidgetToAllowResizingInEditor,this),this.node.off(exports.SystemEventType.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)}},{key:"_removeParentEvent",value:function(){this.node.off(exports.SystemEventType.PARENT_CHANGED,this._adjustTargetToParentChanged,this)}},{key:"_autoChangedValue",value:function(e,t){if((this._alignFlags&e)>0&&this.node.parent&&this.node.parent._uiProps.uiTransformComp){var i=this.node.parent.getContentSize();this.isAlignLeft&&e===vj.LEFT?this._left=t?this._left*i.width:this._left/i.width:this.isAlignRight&&e===vj.RIGHT?this._right=t?this._right*i.width:this._right/i.width:this.isAlignHorizontalCenter&&e===vj.CENTER?this._horizontalCenter=t?this._horizontalCenter*i.width:this._horizontalCenter/i.width:this.isAlignTop&&e===vj.TOP?this._top=t?this._top*i.height:this._top/i.height:this.isAlignBottom&&e===vj.BOT?this._bottom=t?this._bottom*i.height:this._bottom/i.height:this.isAbsoluteVerticalCenter&&e===vj.MID&&(this._verticalCenter=this._verticalCenter/i.height),this._recursiveDirty()}}},{key:"_registerTargetEvents",value:function(){var e=this._target||this.node.parent;e&&(e.getComponent(By)?(e.on(exports.SystemEventType.TRANSFORM_CHANGED,this._targetChangedOperation,this),e.on(exports.SystemEventType.SIZE_CHANGED,this._targetChangedOperation,this)):cc.warnID(6501,this.node.name))}},{key:"_unregisterTargetEvents",value:function(){var e=this._target||this.node.parent;e&&(e.off(exports.SystemEventType.TRANSFORM_CHANGED,this._targetChangedOperation,this),e.off(exports.SystemEventType.SIZE_CHANGED,this._targetChangedOperation,this))}},{key:"_unregisterOldParentEvents",value:function(e){var t=this._target||e;t&&(t.off(exports.SystemEventType.TRANSFORM_CHANGED,this._targetChangedOperation,this),t.off(exports.SystemEventType.SIZE_CHANGED,this._targetChangedOperation,this))}},{key:"_targetChangedOperation",value:function(){this._recursiveDirty()}},{key:"_setAlign",value:function(e,t){if(t!==(this._alignFlags&e)>0){var i=(e&Tj)>0;t?(this._alignFlags|=e,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=this.node.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=this.node.height))):(i?this.isStretchWidth&&(this.node.width=this._originalWidth):this.isStretchHeight&&(this.node.height=this._originalHeight),this._alignFlags&=~e)}}},{key:"_recursiveDirty",value:function(){this._dirty||(this._dirty=!0)}},{key:"target",get:function(){return this._target},set:function(e){this._target!==e&&(this._unregisterTargetEvents(),this._target=e,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&vj.TOP)>0},set:function(e){this._setAlign(vj.TOP,e),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&vj.BOT)>0},set:function(e){this._setAlign(vj.BOT,e),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&vj.LEFT)>0},set:function(e){this._setAlign(vj.LEFT,e),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&vj.RIGHT)>0},set:function(e){this._setAlign(vj.RIGHT,e),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&vj.MID)>0},set:function(e){e?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=vj.MID):this._alignFlags&=~vj.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&vj.CENTER)>0},set:function(e){e?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=vj.CENTER):this._alignFlags&=~vj.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&Tj)===Tj}},{key:"isStretchHeight",get:function(){return(this._alignFlags&xj)===xj}},{key:"top",get:function(){return this._top},set:function(e){this._top=e,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(e){this._top=this._isAbsTop?e:e/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(e){this._bottom=this._isAbsBottom?e:e/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(e){this._left=e,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(e){this._left=this._isAbsLeft?e:e/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(e){this._right=e,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(e){this._right=this._isAbsRight?e:e/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(e){this._horizontalCenter=e,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(e){this._horizontalCenter=this._isAbsHorizontalCenter?e:e/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(e){this._verticalCenter=e,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(e){this._verticalCenter=this._isAbsVerticalCenter?e:e/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(e){this._isAbsTop!==e&&(this._isAbsTop=e,this._autoChangedValue(vj.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(e){this._isAbsBottom!==e&&(this._isAbsBottom=e,this._autoChangedValue(vj.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(e){this._isAbsLeft!==e&&(this._isAbsLeft=e,this._autoChangedValue(vj.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(e){this._isAbsRight!==e&&(this._isAbsRight=e,this._autoChangedValue(vj.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(e){this._isAbsHorizontalCenter!==e&&(this._isAbsHorizontalCenter=e,this._autoChangedValue(vj.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(e){this._isAbsVerticalCenter!==e&&(this._isAbsVerticalCenter=e,this._autoChangedValue(vj.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(e){this._alignMode=e,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(e){this._alignFlags!==e&&(this._alignFlags=e,this._recursiveDirty())}}]),t}(),fj.AlignMode=mj,de((qH=_j).prototype,"target",[BH],Object.getOwnPropertyDescriptor(qH.prototype,"target"),qH.prototype),de(qH.prototype,"isAlignTop",[NH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignTop"),qH.prototype),de(qH.prototype,"isAlignBottom",[LH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignBottom"),qH.prototype),de(qH.prototype,"isAlignLeft",[zH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignLeft"),qH.prototype),de(qH.prototype,"isAlignRight",[GH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignRight"),qH.prototype),de(qH.prototype,"isAlignVerticalCenter",[UH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignVerticalCenter"),qH.prototype),de(qH.prototype,"isAlignHorizontalCenter",[XH],Object.getOwnPropertyDescriptor(qH.prototype,"isAlignHorizontalCenter"),qH.prototype),de(qH.prototype,"isStretchWidth",[VH],Object.getOwnPropertyDescriptor(qH.prototype,"isStretchWidth"),qH.prototype),de(qH.prototype,"isStretchHeight",[HH],Object.getOwnPropertyDescriptor(qH.prototype,"isStretchHeight"),qH.prototype),de(qH.prototype,"editorTop",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorTop"),qH.prototype),de(qH.prototype,"editorBottom",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorBottom"),qH.prototype),de(qH.prototype,"editorLeft",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorLeft"),qH.prototype),de(qH.prototype,"editorRight",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorRight"),qH.prototype),de(qH.prototype,"editorHorizontalCenter",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorHorizontalCenter"),qH.prototype),de(qH.prototype,"editorVerticalCenter",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"editorVerticalCenter"),qH.prototype),de(qH.prototype,"isAbsoluteTop",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteTop"),qH.prototype),de(qH.prototype,"isAbsoluteBottom",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteBottom"),qH.prototype),de(qH.prototype,"isAbsoluteLeft",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteLeft"),qH.prototype),de(qH.prototype,"isAbsoluteRight",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteRight"),qH.prototype),de(qH.prototype,"isAbsoluteHorizontalCenter",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteHorizontalCenter"),qH.prototype),de(qH.prototype,"isAbsoluteVerticalCenter",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"isAbsoluteVerticalCenter"),qH.prototype),de(qH.prototype,"alignMode",[jH],Object.getOwnPropertyDescriptor(qH.prototype,"alignMode"),qH.prototype),de(qH.prototype,"alignFlags",[Qa],Object.getOwnPropertyDescriptor(qH.prototype,"alignFlags"),qH.prototype),QH=de(qH.prototype,"_alignFlags",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ZH=de(qH.prototype,"_target",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),KH=de(qH.prototype,"_left",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),JH=de(qH.prototype,"_right",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$H=de(qH.prototype,"_top",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ej=de(qH.prototype,"_bottom",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tj=de(qH.prototype,"_horizontalCenter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ij=de(qH.prototype,"_verticalCenter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nj=de(qH.prototype,"_isAbsLeft",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rj=de(qH.prototype,"_isAbsRight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oj=de(qH.prototype,"_isAbsTop",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),aj=de(qH.prototype,"_isAbsBottom",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sj=de(qH.prototype,"_isAbsHorizontalCenter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lj=de(qH.prototype,"_isAbsVerticalCenter",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cj=de(qH.prototype,"_originalWidth",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),uj=de(qH.prototype,"_originalHeight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hj=de(qH.prototype,"_alignMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mj.ON_WINDOW_RESIZE}}),pj=de(qH.prototype,"_lockFlags",[WH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),YH=qH))||YH)||YH)||YH)||YH)||YH)||YH),exports.WidgetComponent||(exports.WidgetComponent={}),cc.WidgetComponent=exports.WidgetComponent,cc.internal.computeInverseTransForTarget=Aj,cc.internal.getReadonlyNodeSize=gj;var Sj,Ej,Cj,wj,kj,Oj,Rj,Fj,Ij,Mj,Pj,Dj,Bj,Nj,Lj,zj,Gj=qa("cc.UIReorderComponent")(bj=as("i18n:cc.UIReorderComponent")(bj=es("UI/Reorder")(bj=ts(110)(bj=is(bj=Ja(bj=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,JC),t}())||bj)||bj)||bj)||bj)||bj)||bj;cc.UIReorderComponent=Gj;var Uj,Xj=new on;!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(Uj||(Uj={})),bt(Uj);var Vj,Hj,jj,Wj,Yj,qj,Qj,Zj,Kj,Jj,$j,eW,tW,iW,nW,rW,oW,aW,sW,lW,cW,uW,hW,pW,fW,_W,dW,mW,vW,yW,gW,AW,bW,xW=(Sj=qa("cc.PageViewIndicatorComponent"),Ej=as("i18n:cc.PageViewIndicatorComponent"),Cj=ts(110),wj=es("UI/PageViewIndicator"),kj=Qa({type:Ru,tooltip:"每个页面标记显示的图片"}),Oj=Qa({type:Uj,tooltip:"页面标记摆放方向"}),Rj=Qa({type:en,tooltip:"每个页面标记的大小"}),Fj=Qa({tooltip:"每个页面标记之间的边距"}),Sj(Ij=Ej(Ij=Cj(Ij=wj((zj=Lj=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"spacing",Pj,ne(i)),_e(i,"_spriteFrame",Dj,ne(i)),_e(i,"_direction",Bj,ne(i)),_e(i,"_cellSize",Nj,ne(i)),i._layout=null,i._pageView=null,i._indicators=[],i}return ee(t,sp),J(t,[{key:"onLoad",value:function(){this._updateLayout()}},{key:"setPageView",value:function(e){this._pageView=e,this._refresh()}},{key:"_updateLayout",value:function(){this._layout=this.getComponent(CG),this._layout||(this._layout=this.addComponent(CG));var e=this._layout;this.direction===Uj.HORIZONTAL?(e.type=CG.Type.HORIZONTAL,e.spacingX=this.spacing):this.direction===Uj.VERTICAL&&(e.type=CG.Type.VERTICAL,e.spacingY=this.spacing),e.resizeMode=CG.ResizeMode.CONTAINER}},{key:"_createIndicator",value:function(){var e=new rg;return e.addComponent(Uw).spriteFrame=this.spriteFrame,e.parent=this.node,e.width=this.cellSize.width,e.height=this.cellSize.height,e}},{key:"_changedState",value:function(){var e=this._indicators;if(0!==e.length&&this._pageView){var t=this._pageView.curPageIdx;if(!(t>=e.length)){for(var i=0;i<e.length;++i){var n=e[i];if(n._uiProps.uiComp){var r=n._uiProps.uiComp;Xj.set(r.color),Xj.a=127.5,r.color=Xj}}if(e[t]._uiProps.uiComp){var o=e[t]._uiProps.uiComp;Xj.set(o.color),Xj.a=255,o.color=Xj}}}}},{key:"_refresh",value:function(){if(this._pageView){var e=this._indicators,t=this._pageView.getPages();if(t.length!==e.length){var i=0;if(t.length>e.length)for(i=0;i<t.length;++i)e[i]||(e[i]=this._createIndicator());else for(i=e.length-t.length;i>0;--i){var n=e[i-1];this.node.removeChild(n),e.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){this._spriteFrame!==e&&(this._spriteFrame=e)}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e)}},{key:"cellSize",get:function(){return this._cellSize},set:function(e){this._cellSize!==e&&(this._cellSize=e)}}]),t}(),Lj.Direction=Uj,de((Mj=zj).prototype,"spriteFrame",[kj],Object.getOwnPropertyDescriptor(Mj.prototype,"spriteFrame"),Mj.prototype),de(Mj.prototype,"direction",[Oj],Object.getOwnPropertyDescriptor(Mj.prototype,"direction"),Mj.prototype),de(Mj.prototype,"cellSize",[Rj],Object.getOwnPropertyDescriptor(Mj.prototype,"cellSize"),Mj.prototype),Pj=de(Mj.prototype,"spacing",[Fj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dj=de(Mj.prototype,"_spriteFrame",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bj=de(Mj.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Uj.HORIZONTAL}}),Nj=de(Mj.prototype,"_cellSize",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new en(20,20)}}),Ij=Mj))||Ij)||Ij)||Ij)||Ij);cc.PageViewIndicatorComponent=xW;var TW,SW,EW,CW=new Oi;!function(e){e[e.Unified=0]="Unified",e[e.Free=1]="Free"}(TW||(TW={})),bt(TW),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(SW||(SW={})),bt(SW),(EW||(EW={})).PAGE_TURNING="page-turning";var wW,kW,OW,RW,FW,IW,MW,PW,DW,BW,NW=(Vj=qa("cc.PageViewComponent"),Hj=as("i18n:cc.PageViewComponent"),jj=ts(110),Wj=es("UI/PageView"),Yj=Qa({type:TW,tooltip:"页面视图中每个页面大小类型"}),qj=Qa({type:SW,tooltip:"页面视图滚动类型"}),Qj=Qa({slide:!0,range:[0,1,.01],tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原"}),Zj=Qa({slide:!0,range:[0,1,.01],tooltip:"设置 PageView PageTurning 事件的发送时机"}),Kj=Qa({type:xW,tooltip:"页面视图指示器组件"}),Jj=Qa({tooltip:"快速滑动翻页临界值\n当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值\n该值与此临界值相比较，如果大于临界值，则进行自动翻页"}),$j=Qa({type:EX,visible:!1,override:!0}),eW=Qa({type:EX,visible:!1,override:!0}),tW=Qa({visible:!1,override:!0}),iW=Qa({visible:!1,override:!0}),nW=Qa({visible:!1,override:!0}),rW=Qa({visible:!1,override:!0,type:[Ak]}),oW=Qa({type:[Ak],tooltip:"滚动视图的事件回调函数"}),Vj(aW=Hj(aW=jj(aW=Wj((bW=AW=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"autoPageTurningThreshold",lW,ne(i)),_e(i,"horizontal",cW,ne(i)),_e(i,"vertical",uW,ne(i)),_e(i,"cancelInnerEvents",hW,ne(i)),_e(i,"scrollEvents",pW,ne(i)),_e(i,"pageTurningSpeed",fW,ne(i)),_e(i,"pageEvents",_W,ne(i)),_e(i,"_sizeMode",dW,ne(i)),_e(i,"_direction",mW,ne(i)),_e(i,"_scrollThreshold",vW,ne(i)),_e(i,"_pageTurningEventTiming",yW,ne(i)),_e(i,"_indicator",gW,ne(i)),i._curPageIdx=0,i._lastPageIdx=0,i._pages=[],i._initContentPos=new Mi,i._scrollCenterOffsetX=[],i._scrollCenterOffsetY=[],i._touchBeganPosition=new Mi,i._touchEndPosition=new Mi,i}return ee(t,wV),J(t,[{key:"__preload",value:function(){this.node.on(exports.SystemEventType.SIZE_CHANGED,this._updateAllPagesSize,this)}},{key:"onEnable",value:function(){ae(te(t.prototype),"onEnable",this).call(this),this.node.on(t.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)}},{key:"onDisable",value:function(){ae(te(t.prototype),"onDisable",this).call(this),this.node.off(t.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)}},{key:"onLoad",value:function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)}},{key:"onDestroy",value:function(){this.node.off(exports.SystemEventType.SIZE_CHANGED,this._updateAllPagesSize,this)}},{key:"getCurrentPageIndex",value:function(){return this._curPageIdx}},{key:"setCurrentPageIndex",value:function(e){this.scrollToPage(e,1)}},{key:"getPages",value:function(){return this._pages}},{key:"addPage",value:function(e){e&&-1===this._pages.indexOf(e)&&this.content&&(this.content.addChild(e),this._pages.push(e),this._updatePageView())}},{key:"insertPage",value:function(e,t){t<0||!e||-1!==this._pages.indexOf(e)||!this.content||(t>=this._pages.length?this.addPage(e):(this._pages.splice(t,0,e),this.content.insertChild(e,t),this._updatePageView()))}},{key:"removePage",value:function(e){if(e&&this.content){var t=this._pages.indexOf(e);-1!==t?this.removePageAtIndex(t):g(4300,e.name)}}},{key:"removePageAtIndex",value:function(e){var t=this._pages;if(!(e<0||e>=t.length)){var i=t[e];i&&this.content&&(this.content.removeChild(i),t.splice(e,1),this._updatePageView())}}},{key:"removeAllPages",value:function(){if(this.content){for(var e=this._pages,t=0,i=e.length;t<i;t++)this.content.removeChild(e[t]);this._pages.length=0,this._updatePageView()}}},{key:"scrollToPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;e<0||e>=this._pages.length||(this._curPageIdx=e,this.scrollToOffset(this._moveOffsetValue(e),t,!0),this.indicator&&this.indicator._changedState())}},{key:"getScrollEndedEventTiming",value:function(){return this.pageTurningEventTiming}},{key:"_updatePageView",value:function(){var e=this.content.getComponent(CG);e&&e.enabled&&e.updateLayout();var t=this._pages.length;this._curPageIdx>=t&&(this._curPageIdx=0===t?0:t-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,n=0;n<t;++n){var r=this._pages[n].position;this.direction===SW.Horizontal?this._scrollCenterOffsetX[n]=Math.abs(i.x+r.x):this._scrollCenterOffsetY[n]=Math.abs(i.y+r.y)}this.indicator&&this.indicator._refresh()}},{key:"_updateAllPagesSize",value:function(){if(this.content&&this.view&&this._sizeMode===TW.Unified)for(var e=this._pages,t=this.view.getContentSize(),i=0,n=e.length;i<n;i++)e[i].setContentSize(t)}},{key:"_handleReleaseLogic",value:function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(t.EventType.SCROLL_ENDED))}},{key:"_onTouchBegan",value:function(e,i){e.touch.getUILocation(CW),Mi.set(this._touchBeganPosition,CW.x,CW.y,0),ae(te(t.prototype),"_onTouchBegan",this).call(this,e,i)}},{key:"_onTouchMoved",value:function(e,i){ae(te(t.prototype),"_onTouchMoved",this).call(this,e,i)}},{key:"_onTouchEnded",value:function(e,i){e.touch.getUILocation(CW),Mi.set(this._touchEndPosition,CW.x,CW.y,0),ae(te(t.prototype),"_onTouchEnded",this).call(this,e,i)}},{key:"_onTouchCancelled",value:function(e,i){e.touch.getUILocation(CW),Mi.set(this._touchEndPosition,CW.x,CW.y,0),ae(te(t.prototype),"_onTouchCancelled",this).call(this,e,i)}},{key:"_onMouseWheel",value:function(){}},{key:"_syncScrollDirection",value:function(){this.horizontal=this.direction===SW.Horizontal,this.vertical=this.direction===SW.Vertical}},{key:"_syncSizeMode",value:function(){var e=this.view;if(this.content&&e){var t=this.content.getComponent(CG);if(t){if(this._sizeMode===TW.Free&&this._pages.length>0){var i=this._pages[this._pages.length-1];this.direction===SW.Horizontal?(t.paddingLeft=(e.width-this._pages[0].width)/2,t.paddingRight=(e.width-i.width)/2):this.direction===SW.Vertical&&(t.paddingTop=(e.height-this._pages[0].height)/2,t.paddingBottom=(e.height-i.height)/2)}t.updateLayout()}}}},{key:"_initPages",value:function(){if(this.content){this._initContentPos=this.content.position;for(var e=this.content.children,t=0;t<e.length;++t){var i=e[t];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}}},{key:"_dispatchPageTurningEvent",value:function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,Ak.emitEvents(this.pageEvents,this),this.node.emit(EW.PAGE_TURNING,this))}},{key:"_isQuicklyScrollable",value:function(e){if(this.direction===SW.Horizontal){if(Math.abs(e.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===SW.Vertical&&Math.abs(e.y)>this.autoPageTurningThreshold)return!0;return!1}},{key:"_moveOffsetValue",value:function(e){var t=new Mi;if(this._sizeMode===TW.Free)this.direction===SW.Horizontal?t.x=this._scrollCenterOffsetX[e]:this.direction===SW.Vertical&&(t.y=this._scrollCenterOffsetY[e]);else{var i=this.view;if(!i)return t;this.direction===SW.Horizontal?t.x=e*i.width:this.direction===SW.Vertical&&(t.y=e*i.height)}return t}},{key:"_getDragDirection",value:function(e){return this._direction===SW.Horizontal?0===e.x?0:e.x>0?1:-1:0===e.y?0:e.y<0?1:-1}},{key:"_isScrollable",value:function(e,t,i){if(this._sizeMode===TW.Free){var n=0,r=0;if(this.direction===SW.Horizontal)return n=this._scrollCenterOffsetX[t],r=this._scrollCenterOffsetX[i],Math.abs(e.x)>=Math.abs(n-r)*this.scrollThreshold;if(this.direction===SW.Vertical)return n=this._scrollCenterOffsetY[t],r=this._scrollCenterOffsetY[i],Math.abs(e.y)>=Math.abs(n-r)*this.scrollThreshold}else{var o=this.view;if(!o)return;if(this.direction===SW.Horizontal)return Math.abs(e.x)>=o.width*this.scrollThreshold;if(this.direction===SW.Vertical)return Math.abs(e.y)>=o.height*this.scrollThreshold}}},{key:"_autoScrollToPage",value:function(){var e=this._startBounceBackIfNeeded(),t=new Mi;if(Mi.subtract(t,this._touchBeganPosition,this._touchEndPosition),e){var i=this._getDragDirection(t);if(0===i)return;this._curPageIdx=i>0?this._pages.length-1:0,this.indicator&&this.indicator._changedState()}else{var n=this._curPageIdx,r=n+this._getDragDirection(t),o=this.pageTurningSpeed*Math.abs(n-r);if(r<this._pages.length){if(this._isScrollable(t,n,r))return void this.scrollToPage(r,o);var a=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(a))return void this.scrollToPage(r,o)}this.scrollToPage(n,o)}}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(e){this._sizeMode!==e&&(this._sizeMode=e,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(e){this._scrollThreshold!==e&&(this._scrollThreshold=e)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(e){this._pageTurningEventTiming!==e&&(this._pageTurningEventTiming=e)}},{key:"indicator",get:function(){return this._indicator},set:function(e){this._indicator!==e&&(this._indicator=e,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return ae(te(t.prototype),"verticalScrollBar",this)},set:function(e){le(te(t.prototype),"verticalScrollBar",e,this,!0)}},{key:"horizontalScrollBar",get:function(){return ae(te(t.prototype),"horizontalScrollBar",this)},set:function(e){le(te(t.prototype),"horizontalScrollBar",e,this,!0)}}]),t}(),AW.SizeMode=TW,AW.Direction=SW,AW.EventType=aH(EW,nV),de((sW=bW).prototype,"sizeMode",[Yj],Object.getOwnPropertyDescriptor(sW.prototype,"sizeMode"),sW.prototype),de(sW.prototype,"direction",[qj],Object.getOwnPropertyDescriptor(sW.prototype,"direction"),sW.prototype),de(sW.prototype,"scrollThreshold",[Qj],Object.getOwnPropertyDescriptor(sW.prototype,"scrollThreshold"),sW.prototype),de(sW.prototype,"pageTurningEventTiming",[Zj],Object.getOwnPropertyDescriptor(sW.prototype,"pageTurningEventTiming"),sW.prototype),de(sW.prototype,"indicator",[Kj],Object.getOwnPropertyDescriptor(sW.prototype,"indicator"),sW.prototype),lW=de(sW.prototype,"autoPageTurningThreshold",[Jj],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),de(sW.prototype,"verticalScrollBar",[$j],Object.getOwnPropertyDescriptor(sW.prototype,"verticalScrollBar"),sW.prototype),de(sW.prototype,"horizontalScrollBar",[eW],Object.getOwnPropertyDescriptor(sW.prototype,"horizontalScrollBar"),sW.prototype),cW=de(sW.prototype,"horizontal",[tW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uW=de(sW.prototype,"vertical",[iW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hW=de(sW.prototype,"cancelInnerEvents",[nW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),pW=de(sW.prototype,"scrollEvents",[rW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fW=de(sW.prototype,"pageTurningSpeed",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_W=de(sW.prototype,"pageEvents",[oW],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dW=de(sW.prototype,"_sizeMode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return TW.Unified}}),mW=de(sW.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return SW.Horizontal}}),vW=de(sW.prototype,"_scrollThreshold",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),yW=de(sW.prototype,"_pageTurningEventTiming",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),gW=de(sW.prototype,"_indicator",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),aW=sW))||aW)||aW)||aW)||aW);cc.PageViewComponent=NW;var LW,zW,GW,UW=(wW=qa("cc.UIStaticBatchComponent"),kW=as("i18n:cc.UIStaticBatchComponent"),OW=es("UI/Render/UIStaticBatch"),RW=ts(110),FW=Qa({visible:!1,override:!0}),IW=Qa({visible:!1,override:!0}),MW=Qa({visible:!1,override:!0}),PW=Qa({type:Xh,displayOrder:3,visible:!1,override:!0}),wW(DW=kW(DW=OW(DW=RW((de((BW=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._init=!1,i._meshBuffer=null,i._dirty=!0,i._lastMeshBuffer=null,i._uiDrawBatchList=[],i}return ee(t,Fw),J(t,[{key:"onLoad",value:function(){var e=this._getUI();if(e){var t=rk,i=new Jw(e);i.initialize(t,this._arrivalMaxBuffer),this._meshBuffer=i}}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this._clearData(),this._meshBuffer&&(this._meshBuffer.destroy(),this._meshBuffer=null)}},{key:"updateAssembler",value:function(e){this._dirty&&(e.finishMergeBatches(),this._lastMeshBuffer=e.currBufferBatch,e.currBufferBatch=this._meshBuffer,e.currStaticRoot=this),this._init&&(e.finishMergeBatches(),e.commitStaticBatch(this))}},{key:"postUpdateAssembler",value:function(e){this._dirty&&(e.finishMergeBatches(),e.currBufferBatch=this._lastMeshBuffer,e.currStaticRoot=null,this._dirty=!1,this._init=!0,this.node._static=!0,this._meshBuffer.uploadData())}},{key:"markAsDirty",value:function(){this._getUI()&&(this.node._static=!1,this._dirty=!0,this._init=!1,this._clearData())}},{key:"_requireDrawBatch",value:function(){var e=new ik;return e.isStatic=!0,this._uiDrawBatchList.push(e),e}},{key:"_clearData",value:function(){if(this._meshBuffer){this._meshBuffer.reset();for(var e=this._getUI(),t=0;t<this._uiDrawBatchList.length;t++){this._uiDrawBatchList[t].destroy(e)}}this._uiDrawBatchList.length=0,this._init=!1}},{key:"_getUI",value:function(){return gk.root&&gk.root.ui?gk.root.ui:(g(9301),null)}},{key:"_arrivalMaxBuffer",value:function(){g(9300)}},{key:"dstBlendFactor",get:function(){return this._dstBlendFactor},set:function(e){this._dstBlendFactor!==e&&(this._dstBlendFactor=e,this._updateBlendFunc())}},{key:"srcBlendFactor",get:function(){return this._srcBlendFactor},set:function(e){this._srcBlendFactor!==e&&(this._srcBlendFactor=e,this._updateBlendFunc())}},{key:"color",get:function(){return this._color},set:function(e){this._color!==e&&(this._color.set(e),this._updateColor(),this.markForUpdateRenderData())}},{key:"sharedMaterial",get:function(){return this._sharedMaterial},set:function(e){this._sharedMaterial!==e&&(this._sharedMaterial=e,this._instanceMaterial&&this._instanceMaterial())}},{key:"drawBatchList",get:function(){return this._uiDrawBatchList}}]),t}()).prototype,"dstBlendFactor",[FW],Object.getOwnPropertyDescriptor(BW.prototype,"dstBlendFactor"),BW.prototype),de(BW.prototype,"srcBlendFactor",[IW],Object.getOwnPropertyDescriptor(BW.prototype,"srcBlendFactor"),BW.prototype),de(BW.prototype,"color",[MW],Object.getOwnPropertyDescriptor(BW.prototype,"color"),BW.prototype),de(BW.prototype,"sharedMaterial",[PW],Object.getOwnPropertyDescriptor(BW.prototype,"sharedMaterial"),BW.prototype),DW=BW))||DW)||DW)||DW)||DW),XW=qa("cc.UIOpacityComponent")(LW=as("i18n:cc.UIOpacityComponent")(LW=ts(110)(LW=es("UI/UIOpacity")(LW=Ja((de((zW=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_opacity",GW,ne(i)),i}return ee(t,sp),J(t,[{key:"onEnable",value:function(){this.node._uiProps.opacity=this._opacity/255}},{key:"onDisable",value:function(){this.node._uiProps.opacity=1}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this.node._uiProps.opacity=e/255)}}]),t}()).prototype,"opacity",[Qa],Object.getOwnPropertyDescriptor(zW.prototype,"opacity"),zW.prototype),GW=de(zW.prototype,"_opacity",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),LW=zW))||LW)||LW)||LW)||LW)||LW,VW=new Mi,HW=new Oi,jW=new Mi,WW=new Mi(1,1,1);function YW(e,t){var i,n=t.target,r=jW,o=WW;if(n?Aj(e,i=n,r,o):i=e.parent,i.getComponent(By)){var a=gj(i),s=i instanceof iA,l=s?HW:i.getAnchorPoint(),c=s;e.getPosition(VW);var u=VW.x,h=VW.y,p=e.getAnchorPoint(),f=e.getScale();if(t.alignFlags&vj.HORIZONTAL){var _=0,d=0,m=a.width;c?(_=$x.left.x,d=$x.right.x):d=(_=-l.x*m)+m,_+=t.isAbsoluteLeft?t.left:t.left*m,d-=t.isAbsoluteRight?t.right:t.right*m,n&&(_+=r.x,_*=o.x,d+=r.x,d*=o.x);var v=0,y=p.x,g=f.x;if(g<0&&(y=1-y,g=-g),t.isStretchWidth)v=d-_,0!==g&&(e.width=v/g),u=_+y*v;else if(v=e.width*g,t.isAlignHorizontalCenter){var A=t.isAbsoluteHorizontalCenter?t.horizontalCenter:t.horizontalCenter*m,b=(.5-l.x)*a.width;n&&(A*=o.x,b+=r.x,b*=o.x),u=b+(y-.5)*v+A}else u=t.isAlignLeft?_+y*v:d+(y-1)*v;t._lastSize.width=v}if(t.alignFlags&vj.VERTICAL){var x=0,T=0,S=a.height;c?(T=$x.bottom.y,x=$x.top.y):x=(T=-l.y*S)+S,T+=t.isAbsoluteBottom?t.bottom:t.bottom*S,x-=t.isAbsoluteTop?t.top:t.top*S,n&&(T+=r.y,T*=o.y,x+=r.y,x*=o.y);var E=0,C=p.y,w=f.y;if(w<0&&(C=1-C,w=-w),t.isStretchHeight)E=x-T,0!==w&&(e.height=E/w),h=T+C*E;else if(E=e.height*w,t.isAlignVerticalCenter){var k=t.isAbsoluteVerticalCenter?t.verticalCenter:t.verticalCenter*S,O=(.5-l.y)*a.height;n&&(k*=o.y,O+=r.y,O*=o.y),h=O+(C-.5)*E+k}else h=t.isAlignBottom?T+C*E:x+(C-1)*E;t._lastSize.height=E}e.setPosition(u,h,VW.z),Mi.set(t._lastPos,u,h,VW.z)}}function qW(){var e=gk.getScene();if(e){if(KW.isAligning=!0,KW._nodesOrderDirty)QW.length=0,function e(t){var i=t.getComponent(exports.WidgetComponent);if(i)if(YW(t,i),i.alignMode!==mj.ALWAYS)i.enabled=!1;else{if(!cc.isValid(t,!0))return;QW.push(i)}for(var n,r=fe(t.children);!(n=r()).done;){var o=n.value;o.active&&e(o)}}(e),KW._nodesOrderDirty=!1;else{var t=null,i=KW._activeWidgetsIterator;for(i.i=0;i.i<QW.length;++i.i)(t=QW[i.i])._dirty&&(YW(t.node,t),t._dirty=!1)}KW.isAligning=!1}}var QW=[];var ZW=[],KW=cc._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new tt.MutableForwardIterator(QW),animationState:null,init:function(e){e.on(lk.EVENT_AFTER_UPDATE,qW),ws.isMobile?window.addEventListener("resize",this.onResized.bind(this)):rS.instance.on("design-resolution-changed",this.onResized,this)},add:function(e){this._nodesOrderDirty=!0;var t=gk.root.ui.getScreen(e.node._uiProps.uiTransformComp.visibility);t&&-1===ZW.indexOf(t)&&(ZW.push(t),t.node.on("design-resolution-changed",this.onResized,this))},remove:function(e){this._activeWidgetsIterator.remove(e)},onResized:function(){var e=gk.getScene();e&&this.refreshWidgetOnResized(e)},refreshWidgetOnResized:function(e){if(rg.isNode(e)){var t=e.getComponent(exports.WidgetComponent);t&&t.alignMode===mj.ON_WINDOW_RESIZE&&(t.enabled=!0)}for(var i,n=fe(e.children);!(i=n()).done;){var r=i.value;this.refreshWidgetOnResized(r)}},updateOffsetsToStayPut:function(e,t){function i(e,t){return Math.abs(e-t)>1e-10?t:e}var n=e.node,r=n.parent;if(r){var o=new Mi,a=new Mi(1,1,1);if(e.target&&Aj(n,r=e.target,o,a),!t)return;if(!r.getComponent(By))return void cc.warnID(6501,e.node.name);var s=r.getAnchorPoint(),l=gj(r),c=n.getAnchorPoint(),u=n.getPosition(),h=vj,p=n.getScale(),f=0;if(t&h.LEFT){var _=-s.x*l.width;_+=o.x,_*=a.x,f=u.x-c.x*n.width*p.x-_,e.isAbsoluteLeft||(f/=l.width),f/=a.x,e.left=i(e.left,f)}if(t&h.RIGHT){var d=(1-s.x)*l.width;d+=o.x,f=(d*=a.x)-(u.x+(1-c.x)*n.width*p.x),e.isAbsoluteRight||(f/=l.width),f/=a.x,e.right=i(e.right,f)}if(t&h.TOP){var m=(1-s.y)*l.height;m+=o.y,f=(m*=a.y)-(u.y+(1-c.y)*n.height*p.y),e.isAbsoluteTop||(f/=l.height),f/=a.y,e.top=i(e.top,f)}if(t&h.BOT){var v=-s.y*l.height;v+=o.y,v*=a.y,f=u.y-c.y*n.height*p.y-v,e.isAbsoluteBottom||(f/=l.height),f/=a.y,e.bottom=i(e.bottom,f)}}},updateAlignment:function e(t){var i=t.parent;i&&rg.isNode(i)&&e(i);var n=t.getComponent(exports.WidgetComponent);n&&i&&YW(t,n)},AlignMode:mj,AlignFlags:vj};gk.on(lk.EVENT_INIT,(function(){KW.init(gk)}));var JW=function e(t,i,n){Z(this,e),this.i=void 0,this.x=void 0,this.y=void 0,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=t,this.x=i,this.y=n};function $W(e,t,i,n,r){var o=0,a=null;if(r===function(e,t,i,n){for(var r=0,o=t,a=i-n;o<i;o+=n)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,i,n)>0)for(o=t;o<i;o+=n)a=yY(o,e[o],e[o+1],a);else for(o=i-n;o>=t;o-=n)a=yY(o,e[o],e[o+1],a);return a&&_Y(a,a.next)&&(gY(a),a=a.next),a}function eY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return e;t||(t=e);var i=e,n=!1;do{if(n=!1,i.steiner||!_Y(i,i.next)&&0!==fY(i.prev,i,i.next))i=i.next;else{if(gY(i),(i=t=i.prev)===i.next)return null;n=!0}}while(n||i!==t);return t}function tY(e,t,i,n,r,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(e){!a&&o&&lY(e,n,r,o);for(var s=e,l=null,c=null;e.prev!==e.next;)if(l=e.prev,c=e.next,o?nY(e,n,r,o):iY(e))t.push(l.i/i),t.push(e.i/i),t.push(c.i/i),gY(e),e=c.next,s=c.next;else if((e=c)===s){a?1===a?tY(e=rY(e,t,i),t,i,n,r,o,2):2===a&&oY(e,t,i,n,r,o):tY(eY(e),t,i,n,r,o,1);break}}}function iY(e){var t=e.prev,i=e,n=e.next;if(fY(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(hY(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&fY(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function nY(e,t,i,n){var r=e.prev,o=e,a=e.next;if(fY(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=cY(s,l,t,i,n),p=cY(c,u,t,i,n),f=e.nextZ;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&hY(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fY(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&hY(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fY(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function rY(e,t,i){var n=e;do{var r=n.prev,o=n.next.next;!_Y(r,o)&&dY(r,n,n.next,o)&&mY(r,o)&&mY(o,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(o.i/i),gY(n),gY(n.next),n=e=o),n=n.next}while(n!==e);return n}function oY(e,t,i,n,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&pY(a,s)){var l=vY(a,s);return a=eY(a,a.next),l=eY(l,l.next),tY(a,t,i,n,r,o),void tY(l,t,i,n,r,o)}s=s.next}a=a.next}while(a!==e)}function aY(e,t){return e.x-t.x}function sY(e,t){if(t=function(e,t){var i=t,n=e.x,r=e.y,o=-1/0,a=null;do{if(r<=i.y&&r>=i.next.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>o){if(o=s,s===n){if(r===i.y)return i;if(r===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(n===o)return a.prev;var l,c=a,u=a.x,h=a.y,p=1/0;i=a.next;for(;i!==c;)n>=i.x&&i.x>=u&&hY(r<h?n:o,r,u,h,r<h?o:n,r,i.x,i.y)&&((l=Math.abs(r-i.y)/(n-i.x))<p||l===p&&i.x>a.x)&&mY(i,e)&&(a=i,p=l),i=i.next;return a}(e,t)){var i=vY(t,e);eY(i,i.next)}}function lY(e,t,i,n){var r=e;do{null===r.z&&(r.z=cY(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t=0,i=null,n=null,r=null,o=null,a=0,s=0,l=0,c=1;do{for(i=e,e=null,o=null,a=0;i;){for(a++,n=i,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0===s?(r=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,s--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}function cY(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function uY(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function hY(e,t,i,n,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(i-a)*(t-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function pY(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&dY(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&mY(e,t)&&mY(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)}function fY(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function _Y(e,t){return e.x===t.x&&e.y===t.y}function dY(e,t,i,n){return!!(_Y(e,t)&&_Y(i,n)||_Y(e,n)&&_Y(i,t))||fY(e,t,i)>0!=fY(e,t,n)>0&&fY(i,n,e)>0!=fY(i,n,t)>0}function mY(e,t){return fY(e.prev,e,e.next)<0?fY(e,t,e.next)>=0&&fY(e,e.prev,t)>=0:fY(e,t,e.prev)<0||fY(e,e.next,t)<0}function vY(e,t){var i=new JW(e.i,e.x,e.y),n=new JW(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function yY(e,t,i,n){var r=new JW(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function gY(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function AY(e,t,i){i=i||3;var n=t?t.length:0,r=n?t[0]*i:e.length,o=$W(e,0,r,i,!0),a=[];if(!o)return a;var s=0,l=0,c=0,u=0,h=0,p=0,f=0;if(n&&(o=function(e,t,i,n){var r,o=[],a=0,s=null;for(a=0,r=t.length;a<r;a++)(s=$W(e,t[a]*n,a<r-1?t[a+1]*n:e.length,n,!1))&&(s===s.next&&(s.steiner=!0),o.push(uY(s)));if(o.sort(aY),!i)return i;for(a=0;a<o.length;a++)sY(o[a],i),i=eY(i,i.next);return i}(e,t,o,i)),e.length>80*i){s=c=e[0],l=u=e[1];for(var _=i;_<r;_+=i)(h=e[_])<s&&(s=h),(p=e[_+1])<l&&(l=p),h>c&&(c=h),p>u&&(u=p);f=Math.max(c-s,u-l)}return tY(o,a,i,s,l,f),a}var bY=Math.PI,xY=Math.min,TY=Math.max,SY=Math.cos,EY=Math.sin,CY=Math.abs,wY=Math.sign,kY=.5522847493;function OY(e,t,i,n,r){e.moveTo(t-n,i),e.bezierCurveTo(t-n,i+r*kY,t-n*kY,i+r,t,i+r),e.bezierCurveTo(t+n*kY,i+r,t+n,i+r*kY,t+n,i),e.bezierCurveTo(t+n,i-r*kY,t+n*kY,i-r,t,i-r),e.bezierCurveTo(t-n*kY,i-r,t-n,i-r*kY,t-n,i),e.close()}for(var RY=function(e){function t(e,i){var n;return Z(this,t),(n=re(this,te(t).call(this,e,i))).dx=0,n.dy=0,n.dmx=0,n.dmy=0,n.flags=0,n.len=0,n.reset(),n}return ee(t,Oi),J(t,[{key:"reset",value:function(){this.dx=0,this.dy=0,this.dmx=0,this.dmy=0,this.flags=0,this.len=0}}]),t}(),FY=function(){function e(){Z(this,e),this.closed=!1,this.nbevel=0,this.complex=!0,this.points=[],this.reset()}return J(e,[{key:"reset",value:function(){this.closed=!1,this.nbevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}}]),e}(),IY=function(){function e(){Z(this,e),this.dataOffset=0,this.updatePathOffset=!1,this.pathLength=0,this.pathOffset=0,this.paths=[],this.tessTol=.25,this.distTol=.01,this.fillColor=on.WHITE.clone(),this.lineCap=tG.BUTT,this.strokeColor=on.BLACK.clone(),this.lineJoin=iG.MITER,this.lineWidth=0,this.pointsOffset=0,this._commandx=0,this._commandy=0,this._points=[],this._renderDatasPool=new Ta((function(){return new YC}),16),this._renderDatas=[],this._curPath=null}return J(e,[{key:"moveTo",value:function(e,t){this.updatePathOffset&&(this.pathOffset=this.pathLength,this.updatePathOffset=!1),this._addPath(),this.addPoint(e,t,nG.PT_CORNER),this._commandx=e,this._commandy=t}},{key:"lineTo",value:function(e,t){this.addPoint(e,t,nG.PT_CORNER),this._commandx=e,this._commandy=t}},{key:"bezierCurveTo",value:function(e,t,i,n,r,o){var a=this._curPath,s=a.points[a.points.length-1];s&&(s.x!==e||s.y!==t||i!==r||n!==o?(!function e(t,i,n,r,o,a,s,l,c,u,h){var p,f,_,d,m,v,y,g,A,b,x,T,S,E,C,w;u>10||(m=.5*(a+l),v=.5*(s+c),y=.5*((p=.5*(i+r))+(_=.5*(r+a))),g=.5*((f=.5*(n+o))+(d=.5*(o+s))),((C=CY((r-l)*(E=c-n)-(o-c)*(S=l-i)))+(w=CY((a-l)*E-(s-c)*S)))*(C+w)<t.tessTol*(S*S+E*E)?t.addPoint(l,c,0===h?h|nG.PT_BEVEL:h):(e(t,i,n,p,f,y,g,x=.5*(y+(A=.5*(_+m))),T=.5*(g+(b=.5*(d+v))),u+1,0),e(t,x,T,A,b,m,v,l,c,u+1,h)))}(this,s.x,s.y,e,t,i,n,r,o,0,nG.PT_CORNER),this._commandx=r,this._commandy=o):this.lineTo(r,o))}},{key:"quadraticCurveTo",value:function(e,t,i,n){var r=this._commandx,o=this._commandy;this.bezierCurveTo(r+2/3*(e-r),o+2/3*(t-o),i+2/3*(e-i),n+2/3*(t-n),i,n)}},{key:"arc",value:function(e,t,i,n,r,o){!function(e,t,i,n,r,o,a){var s,l,c=0,u=0,h=0,p=0,f=0,_=0,d=0,m=0,v=0,y=0,g=0,A=0,b=0,x=0;if(u=o-r,a=a||!1)if(CY(u)>=2*bY)u=2*bY;else for(;u<0;)u+=2*bY;else if(CY(u)>=2*bY)u=2*-bY;else for(;u>0;)u-=2*bY;for(l=0|TY(1,xY(CY(u)/(.5*bY)+.5,5)),h=CY(4/3*(1-SY(s=u/l/2))/EY(s)),a||(h=-h),x=0;x<=l;x++)_=t+(p=SY(c=r+u*(x/l)))*n,d=i+(f=EY(c))*n,m=-f*n*h,v=p*n*h,0===x?e.moveTo(_,d):e.bezierCurveTo(y+A,g+b,_-m,d-v,_,d),y=_,g=d,A=m,b=v}(this,e,t,i,n,r,o)}},{key:"ellipse",value:function(e,t,i,n){OY(this,e,t,i,n),this._curPath.complex=!1}},{key:"circle",value:function(e,t,i){OY(this,e,t,i,i),this._curPath.complex=!1}},{key:"rect",value:function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.close(),this._curPath.complex=!1}},{key:"roundRect",value:function(e,t,i,n,r){!function(e,t,i,n,r,o){if(o<.1)e.rect(t,i,n,r);else{var a=xY(o,.5*CY(n))*wY(n),s=xY(o,.5*CY(r))*wY(r);e.moveTo(t,i+s),e.lineTo(t,i+r-s),e.bezierCurveTo(t,i+r-s*(1-kY),t+a*(1-kY),i+r,t+a,i+r),e.lineTo(t+n-a,i+r),e.bezierCurveTo(t+n-a*(1-kY),i+r,t+n,i+r-s*(1-kY),t+n,i+r-s),e.lineTo(t+n,i+s),e.bezierCurveTo(t+n,i+s*(1-kY),t+n-a*(1-kY),i,t+n-a,i),e.lineTo(t+a,i),e.bezierCurveTo(t+a*(1-kY),i,t,i+s*(1-kY),t,i+s),e.close()}}(this,e,t,i,n,r),this._curPath.complex=!1}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pathLength=0,this.pathOffset=0,this.pointsOffset=0,this.dataOffset=0,this._curPath=null,this.paths.length=0,this._points.length=0;for(var t=this._renderDatas,i=0,n=t.length;i<n;i++){var r=t[i];r&&r.reset()}this._renderDatas.length=0,e&&this._renderDatasPool.reset()}},{key:"close",value:function(){this._curPath.closed=!0}},{key:"requestRenderData",value:function(){var e=this._renderDatasPool.add();return this._renderDatas.push(e),e}},{key:"getRenderDatas",value:function(){return 0===this._renderDatas.length&&this.requestRenderData(),this._renderDatas}},{key:"addPoint",value:function(e,t,i){var n=this._curPath;if(n){var r=this._points,o=n.points,a=r[this.pointsOffset++];a?(a.x=e,a.y=t):(a=new RY(e,t),r.push(a)),a.flags=i,o.push(a)}}},{key:"_addPath",value:function(){var e=this.pathLength,t=this.paths[e];return t?t.reset():(t=new FY,this.paths.push(t)),this.pathLength++,this._curPath=t,t}}]),e}(),MY=Math.PI,PY=Math.min,DY=Math.max,BY=Math.ceil,NY=Math.acos,LY=Math.cos,zY=Math.sin,GY=Math.atan2,UY=rk,XY=[],VY=[],HY=[],jY=[],WY=null,YY=null,qY=new on,QY=[],ZY=0;ZY<4;ZY++)QY.push(new Mi);function KY(e,t,i){return e<t?t:e>i?i:e}var JY={useModel:!0,createImpl:function(e){return new IY},updateRenderData:function(e){for(var t=e.impl?e.impl.getRenderDatas():[],i=0,n=t.length;i<n;i++)t[i].material=e.material},fillBuffers:function(e,t){},renderIA:function(e,t){},getRenderData:function(e,t){if(!YY)return null;var i=YY.getRenderDatas(),n=i[YY.dataOffset];if(!n)return null;var r=n,o=r?r.vertexCount+t:0;return(o>65535||3*o>131070)&&(++YY.dataOffset,YY.dataOffset<i.length?n=i[YY.dataOffset]:(n=YY.requestRenderData(),i[YY.dataOffset]=n),n.material=e.material,r=n),r&&r.vertexCount<o&&r.request(t,3*t),n},stroke:function(e){on.copy(qY,e.strokeColor),e.impl&&(this._flattenPaths(e.impl),this._expandStroke(e),e.impl.updatePathOffset=!0,this.end(e))},fill:function(e){on.copy(qY,e.fillColor),this._expandFill(e),e.impl&&(e.impl.updatePathOffset=!0),this.end(e)},end:function(e){e.model&&e.model.inited&&e.model.destroy();var t=e.impl,i=exports.GFXPrimitiveMode.TRIANGLE_LIST,n=t&&t.getRenderDatas();if(n){var r=0;XY.length=0,VY.length=0,HY.length=0,jY.length=0;for(var o,a=fe(n);!(o=a()).done;){var s=o.value,l=s.byteCount>>2,c=s.vData;for(r=0;r<l;)XY.push(c[r++]),XY.push(c[r++]),XY.push(c[r++]),VY.push(c[r++]),VY.push(c[r++]),HY.push(c[r++]),HY.push(c[r++]),HY.push(c[r++]),HY.push(c[r++]);l=s.indiceCount;var u=s.iData;for(r=0;r<l;)jY.push(u[r++])}var h=SE({primitiveMode:i,positions:XY,uvs:VY,colors:HY,attributes:UY,indices:jY},void 0,{calculateBounds:!1});e.model.initialize(e.node),e.model.initSubModel(0,h.renderingSubMeshes[0],e.material),e.markForUpdateRenderData()}},_expandStroke:function(e){var t=.5*e.lineWidth,i=e.lineCap,n=e.lineJoin,r=e.miterLimit;if(YY=e.impl){var o=function(e,t,i){var n=2*NY(e/(e+i));return DY(2,BY(t/n))}(t,MY,YY.tessTol);this._calculateJoins(YY,t,n,r);for(var a=YY.paths,s=0,l=YY.pathOffset,c=YY.pathLength;l<c;l++){var u=a[l],h=u.points.length;n===iG.ROUND?s+=2*(h+u.nbevel*(o+2)+1):s+=2*(h+5*u.nbevel+1),u.closed||(i===tG.ROUND?s+=2*(2*o+2):s+=12)}var p=WY=this.getRenderData(e,s);if(p){for(var f=p.vData,_=p.iData,d=YY.pathOffset,m=YY.pathLength;d<m;d++){var v=a[d],y=v.points,g=y.length,A=p.vertexStart,b=void 0,x=void 0,T=0,S=0,E=v.closed;if(E?(b=y[g-1],x=y[0],T=0,S=g):(b=y[0],x=y[1],T=1,S=g-1),!E){var C=new RY(x.x,x.y);C.subtract(b),C.normalize();var w=C.x,k=C.y;i===tG.BUTT?this._buttCap(b,w,k,t,0):i===tG.SQUARE?this._buttCap(b,w,k,t,t):i===tG.ROUND&&this._roundCapStart(b,w,k,t,o)}for(var O=T;O<S;++O)n===iG.ROUND?this._roundJoin(b,x,t,t,o):0!=(x.flags&(nG.PT_BEVEL|nG.PT_INNERBEVEL))?this._bevelJoin(b,x,t,t):(this._vset(x.x+x.dmx*t,x.y+x.dmy*t),this._vset(x.x-x.dmx*t,x.y-x.dmy*t)),b=x,x=y[O+1];if(E){var R=9*A,F=f.slice(R,R+9);f.set(F,9*p.vertexStart),R+=9,p.vertexStart++,F=f.slice(R,R+9),f.set(F,9*p.vertexStart),p.vertexStart++}else{var I=new RY(x.x,x.y);I.subtract(b),I.normalize();var M=I.x,P=I.y;i===tG.BUTT?this._buttCap(x,M,P,t,0):i===tG.SQUARE?this._buttCap(x,M,P,t,t):i===tG.ROUND&&this._roundCapEnd(x,M,P,t,o)}for(var D=p.indiceStart,B=A+2,N=p.vertexStart;B<N;B++)_[D++]=B-2,_[D++]=B-1,_[D++]=B;if(p.indiceStart=D,D!==p.indiceCount){var L=new Array(p.indiceCount-D);p.iData.set(L,D)}}WY=null,YY=null}}},_expandFill:function(e){if(YY=e.impl){for(var t=YY.paths,i=0,n=YY.pathOffset,r=YY.pathLength;n<r;n++){i+=t[n].points.length}var o=WY=this.getRenderData(e,i);if(o){for(var a=o,s=a.vData,l=a.iData,c=YY.pathOffset,u=YY.pathLength;c<u;c++){var h=t[c],p=h.points,f=p.length;if(0!==f){for(var _=o.vertexStart,d=0;d<f;++d)this._vset(p[d].x,p[d].y);var m=o.indiceStart;if(h.complex){for(var v=[],y=_,g=o.vertexStart;y<g;y++){var A=9*y;v.push(s[A++]),v.push(s[A++]),v.push(s[A++])}var b=AY(v,null,3);if(!b||0===b.length)continue;for(var x=0,T=b.length;x<T;x++)l[m++]=b[x]+_}else for(var S=_,E=_+2,C=a.vertexStart;E<C;E++)l[m++]=S,l[m++]=E-1,l[m++]=E;if(a.indiceStart=m,m!==a.indiceCount){var w=new Array(a.indiceCount-m);a.iData.set(w,m)}}}WY=null,YY=null}}},_calculateJoins:function(e,t,i,n){var r=0;t>0&&(r=1/t);for(var o=e.paths,a=e.pathOffset,s=e.pathLength;a<s;a++){var l=o[a],c=l.points,u=c.length,h=c[u-1],p=c[0];l.nbevel=0;for(var f=0;f<u;f++){var _,d,m=h.dy,v=-h.dx,y=p.dy,g=-p.dx;if(p.dmx=.5*(m+y),p.dmy=.5*(v+g),(_=p.dmx*p.dmx+p.dmy*p.dmy)>1e-6){var A=1/_;A>600&&(A=600),p.dmx*=A,p.dmy*=A}p.dx*h.dy-h.dx*p.dy>0&&(p.flags|=nG.PT_LEFT),_*(d=DY(11,PY(h.len,p.len)*r))*d<1&&(p.flags|=nG.PT_INNERBEVEL),p.flags&nG.PT_CORNER&&(_*n*n<1||i===iG.BEVEL||i===iG.ROUND)&&(p.flags|=nG.PT_BEVEL),0!=(p.flags&(nG.PT_BEVEL|nG.PT_INNERBEVEL))&&l.nbevel++,h=p,p=c[f+1]}}},_flattenPaths:function(e){for(var t=e.paths,i=e.pathOffset,n=e.pathLength;i<n;i++){var r=t[i],o=r.points,a=o[o.length-1],s=o[0];a.equals(s)&&(r.closed=!0,o.pop(),a=o[o.length-1]);for(var l=0,c=o.length;l<c;l++){var u=new RY(s.x,s.y);u.subtract(a),a.len=u.length(),(u.x||u.y)&&u.normalize(),a.dx=u.x,a.dy=u.y,a=s,s=o[l+1]}}},_chooseBevel:function(e,t,i,n){var r=i.x,o=i.y,a=0,s=0,l=0,c=0;return 0!==e?(a=r+t.dy*n,s=o-t.dx*n,l=r+i.dy*n,c=o-i.dx*n):(a=l=r+i.dmx*n,s=c=o+i.dmy*n),[a,s,l,c]},_buttCap:function(e,t,i,n,r){var o=e.x-t*r,a=e.y-i*r,s=i,l=-t;this._vset(o+s*n,a+l*n),this._vset(o-s*n,a-l*n)},_roundCapStart:function(e,t,i,n,r){for(var o=e.x,a=e.y,s=i,l=-t,c=0;c<r;c++){var u=c/(r-1)*MY,h=LY(u)*n,p=zY(u)*n;this._vset(o-s*h-t*p,a-l*h-i*p),this._vset(o,a)}this._vset(o+s*n,a+l*n),this._vset(o-s*n,a-l*n)},_roundCapEnd:function(e,t,i,n,r){var o=e.x,a=e.y,s=i,l=-t;this._vset(o+s*n,a+l*n),this._vset(o-s*n,a-l*n);for(var c=0;c<r;c++){var u=c/(r-1)*MY,h=LY(u)*n,p=zY(u)*n;this._vset(o,a),this._vset(o-s*h+t*p,a-l*h+i*p)}},_roundJoin:function(e,t,i,n,r){var o=e.dy,a=-e.dx,s=t.dy,l=-t.dx,c=t.x,u=t.y;if(0!=(t.flags&nG.PT_LEFT)){var h=this._chooseBevel(t.flags&nG.PT_INNERBEVEL,e,t,i),p=h[0],f=h[1],_=h[2],d=h[3],m=GY(-a,-o),v=GY(-l,-s);v>m&&(v-=2*MY),this._vset(p,f),this._vset(c-o*n,t.y-a*n);for(var y=KY(BY((m-v)/MY)*r,2,r),g=0;g<y;g++){var A=m+g/(y-1)*(v-m),b=c+LY(A)*n,x=u+zY(A)*n;this._vset(c,u),this._vset(b,x)}this._vset(_,d),this._vset(c-s*n,u-l*n)}else{var T=this._chooseBevel(t.flags&nG.PT_INNERBEVEL,e,t,-n),S=T[0],E=T[1],C=T[2],w=T[3],k=GY(a,o),O=GY(l,s);O<k&&(O+=2*MY),this._vset(c+o*n,u+a*n,0),this._vset(S,E,0);for(var R=KY(BY((O-k)/MY)*r,2,r),F=0;F<R;F++){var I=k+F/(R-1)*(O-k),M=c+LY(I)*i,P=u+zY(I)*i;this._vset(M,P,0),this._vset(c,u,0)}this._vset(c+s*n,u+l*n),this._vset(C,w)}},_bevelJoin:function(e,t,i,n){var r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=e.dy,f=-e.dx,_=t.dy,d=-t.dx;if(t.flags&nG.PT_LEFT){var m=this._chooseBevel(t.flags&nG.PT_INNERBEVEL,e,t,i);l=m[0],c=m[1],u=m[2],h=m[3],this._vset(l,c,0),this._vset(t.x-p*n,t.y-f*n,0),this._vset(u,h,0),this._vset(t.x-_*n,t.y-d*n,0)}else{var v=this._chooseBevel(t.flags&nG.PT_INNERBEVEL,e,t,-n);r=v[0],o=v[1],a=v[2],s=v[3],this._vset(t.x+p*i,t.y+f*i,0),this._vset(r,o),this._vset(t.x+_*i,t.y+d*i,0),this._vset(a,s)}},_vset:function(e,t){if(WY){var i=WY,n=9*i.vertexStart,r=i.vData;r[n++]=e,r[n++]=t,r[n++]=0,r[n++]=1,r[n++]=1,on.toArray(r,qY,n),i.vertexStart++}}},$Y={getAssembler:function(e){return JY}};HG.Assembler=$Y;var eq=function e(){Z(this,e),this.u=0,this.v=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.validDefinition=!1,this.xAdvance=0},tq=function(){function e(){Z(this,e),this._letterDefinitions={}}return J(e,[{key:"addLetterDefinitions",value:function(e,t){this._letterDefinitions[e]=t}},{key:"cloneLetterDefinition",value:function(){for(var e={},t=0,i=Object.keys(this._letterDefinitions);t<i.length;t++){var n=i[t],r=new eq;Ue(r,this._letterDefinitions[n]),e[n]=r}return e}},{key:"assignLetterDefinitions",value:function(e){for(var t=0,i=Object.keys(this._letterDefinitions);t<i.length;t++){var n=i[t],r=e[n];Ue(this._letterDefinitions[n],r)}}},{key:"scaleFontLetterDefinition",value:function(e){for(var t=0,i=Object.keys(this._letterDefinitions);t<i.length;t++){var n=i[t],r=this._letterDefinitions[n];r.width*=e,r.height*=e,r.offsetX*=e,r.offsetY*=e,r.xAdvance*=e}}},{key:"getLetterDefinitionForChar",value:function(e){return this._letterDefinitions[e.charCodeAt(0)]}},{key:"letterDefinitions",get:function(){return this._letterDefinitions}}]),e}();cc.FontAtlas=tq;var iq=function e(){Z(this,e),this.char="",this.valid=!0,this.positionX=0,this.positionY=0,this.lineIndex=0},nq=new nn,rq=null,oq=[],aq=[],sq=[],lq=[],cq=new en,uq=null,hq=null,pq=0,fq=0,_q=0,dq=0,mq=0,vq=1,yq=null,gq="",Aq=0,bq=0,xq=new en,Tq=0,Sq=0,Eq=0,Cq=0,wq=0,kq=!1,Oq=0,Rq=0,Fq=0,Iq={createData:function(e){return e.requestRenderData()},fillBuffers:function(e,t){fN(e.node,t,e.renderData,e.color)},appendQuad:function(e,t,i,n,r,o,a){var s=e.renderData;if(s){var l=s.dataLength;s.dataLength+=4,s.vertexCount=s.dataLength,s.indiceCount=s.dataLength/2*3;var c=s.datas,u=t.width,h=t.height,p=i.width,f=i.height,_=0,d=0,m=0,v=0;n?(_=i.x/u,v=(i.x+f)/u,d=(i.y+p)/h,m=i.y/h,c[l].u=_,c[l].v=m,c[l+1].u=_,c[l+1].v=d,c[l+2].u=v,c[l+2].v=m,c[l+3].u=v,c[l+3].v=d):(_=i.x/u,v=(i.x+p)/u,d=(i.y+f)/h,m=i.y/h,c[l].u=_,c[l].v=d,c[l+1].u=v,c[l+1].v=d,c[l+2].u=_,c[l+2].v=m,c[l+3].u=v,c[l+3].v=m),c[l].x=r,c[l].y=o-f*a,c[l+1].x=r+p*a,c[l+1].y=o-f*a,c[l+2].x=r,c[l+2].y=o,c[l+3].x=r+p*a,c[l+3].y=o}}};Ge(Iq,{updateRenderData:function(e){e.renderData&&e.renderData.vertDirty&&rq!==e&&(rq=e,this._updateProperties(),this._updateContent(),rq.actualFontSize=Aq,rq.node.setContentSize(xq),rq.renderData.vertDirty=rq.renderData.uvDirty=!1,rq=null,this._resetProperties())},_updateFontScale:function(){vq=Aq/bq},_updateProperties:function(){if(rq){var e=rq.font;if(e){if(yq=e.spriteFrame,hq=e.fntConfig,!(uq=rq.fontAtlas)){uq=new tq;for(var t=hq.fontDefDictionary,i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=new eq,a=t[r].rect;o.offsetX=t[r].xOffset,o.offsetY=t[r].yOffset,o.width=a.width,o.height=a.height,o.u=a.x,o.v=a.y,o.textureID=0,o.validDefinition=!0,o.xAdvance=t[r].xAdvance,uq.addLetterDefinitions(r,o)}rq.fontAtlas=uq}gq=rq.string.toString(),Aq=rq.fontSize,bq=hq.fontSize;var s=rq.node.getContentSize();xq.width=s.width,xq.height=s.height,Tq=rq.horizontalAlign,Sq=rq.verticalAlign,Eq=rq.spacingX,wq=rq.overflow,Cq=rq.lineHeight,kq=wq!==exports.Overflow.NONE&&(wq===exports.Overflow.RESIZE_HEIGHT||rq.enableWrapText),this._setupBMFontOverflowMetrics()}}},_resetProperties:function(){uq=null,hq=null,yq=null},_updateContent:function(){this._updateFontScale(),this._computeHorizontalKerningForText(),this._alignText()},_computeHorizontalKerningForText:function(){for(var e=gq,t=e.length,i=hq.kerningDict,n=oq,r=-1,o=0;o<t;++o){var a=e.charCodeAt(o),s=i[r<<16|65535&a]||0;n[o]=o<t-1?s:0,r=a}},_multilineTextWrap:function(e){var t=gq.length,i=0,n=0,r=0,o=0,a=0,s=0,l=0,c=null,u=new Oi;this._updateFontScale();for(var h=uq.letterDefinitions,p=0;p<t;){var f=gq.charAt(p);if("\n"!==f){for(var _=e(gq,p,t),d=s,m=l,v=a,y=n,g=!1,A=0;A<_;++A){var b=p+A;if("\r"!==(f=gq.charAt(b)))if(c=uq&&uq.getLetterDefinitionForChar(f)){var x=y+c.offsetX*vq;if(kq&&Fq>0&&n>0&&x+c.width*vq>Fq&&!Ia(f)){sq.push(a),a=0,i++,n=0,r-=Cq*vq+0,g=!0;break}u.x=x,u.y=r-c.offsetY*vq,this._recordLetterInfo(h,u,f,b,i),b+1<oq.length&&b<t-1&&(y+=oq[b+1]),y+=c.xAdvance*vq+Eq,v=u.x+c.width*vq,d<u.y&&(d=u.y),m>u.y-c.height*vq&&(m=u.y-c.height*vq)}else this._recordPlaceholderInfo(b,f),console.log("Can't find letter definition in texture atlas "+hq.atlasName+" for letter:"+f);else this._recordPlaceholderInfo(b,f)}g||(n=y,s<d&&(s=d),l>m&&(l=m),o<(a=v)&&(o=a),p+=_)}else sq.push(a),a=0,i++,n=0,r-=Cq*vq+0,this._recordPlaceholderInfo(p,f),p++}return sq.push(a),fq=(pq=i+1)*Cq*vq,pq>1&&(fq+=0*(pq-1)),xq.width=Oq,xq.height=Rq,Oq<=0&&(xq.width=parseFloat(o.toFixed(2))),Rq<=0&&(xq.height=parseFloat(fq.toFixed(2))),dq=xq.height,mq=0,s>0&&(dq=xq.height+s),l<-fq&&(mq=fq+l),!0},_getFirstCharLen:function(){return 1},_getFirstWordLen:function(e,t,i){var n=e.charAt(t);if(Fa(n)||"\n"===n||Ia(n))return 1;var r=1,o=uq&&uq.getLetterDefinitionForChar(n);if(!o)return r;for(var a=o.xAdvance*vq+Eq,s=t+1;s<i&&(n=e.charAt(s),o=uq&&uq.getLetterDefinitionForChar(n));++s){if(a+o.offsetX*vq+o.width*vq>Fq&&!Ia(n)&&Fq>0)return r;if(a+=o.xAdvance*vq+Eq,"\n"===n||Ia(n)||Fa(n))break;r++}return r},_multilineTextWrapByWord:function(){return this._multilineTextWrap(this._getFirstWordLen)},_multilineTextWrapByChar:function(){return this._multilineTextWrap(this._getFirstCharLen)},_recordPlaceholderInfo:function(e,t){if(e>=aq.length){var i=new iq;aq.push(i)}aq[e].char=t,aq[e].valid=!1},_recordLetterInfo:function(e,t,i,n,r){if(n>=aq.length){var o=new iq;aq.push(o)}var a=i.charCodeAt(0);aq[n].lineIndex=r,aq[n].char=i,aq[n].valid=e[a].validDefinition,aq[n].positionX=t.x,aq[n].positionY=t.y},_alignText:function(){fq=0,sq.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),wq===exports.Overflow.SHRINK&&Aq>0&&this._isVerticalClamp()&&this._shrinkLabelToContentSize(this._isVerticalClamp),this._updateQuads()||wq===exports.Overflow.SHRINK&&this._shrinkLabelToContentSize(this._isHorizontalClamp)},_scaleFontSizeDown:function(e){var t=!0;e||(e=.1,t=!1),Aq=e,t&&this._updateContent()},_shrinkLabelToContentSize:function(e){for(var t=Aq,i=Cq,n=uq,r=0,o=n?n.cloneLetterDefinition():{},a=!0;e();){var s=t-++r;if(a=!1,s<=0)break;var l=s/t;n&&(n.assignLetterDefinitions(o),n.scaleFontLetterDefinition(l)),Cq=i*l,this._multilineTextWrapByWord(),this._computeAlignmentOffset()}Cq=i,n&&n.assignLetterDefinitions(o),a||t-r>=0&&this._scaleFontSizeDown(t-r)},_isVerticalClamp:function(){return fq>xq.height},_isHorizontalClamp:function(){if(uq){for(var e=!1,t=0,i=gq.length;t<i;++t){var n=aq[t];if(n.valid){var r=uq.getLetterDefinitionForChar(n.char);if(!r)continue;var o=n.positionX+r.width/2*vq,a=n.lineIndex;if(Oq>0)if(kq){if(sq[a]>xq.width&&(o>xq.width||o<0)){e=!0;break}}else if(o>xq.width){e=!0;break}}}return e}},_isHorizontalClamped:function(e,t){var i=sq[t],n=e>xq.width||e<0;return kq?i>xq.width&&n:n},_updateQuads:function(){if(!rq)return!1;var e=uq?uq.letterDefinitions:{},t=yq,i=rq.node,n=rq.renderData;n.dataLength=n.vertexCount=n.indiceCount=0;for(var r=i.getAnchorPoint(),o=xq,a=r.x*o.width,s=r.y*o.height,l=!0,c=0,u=gq.length;c<u;++c){var h=aq[c];if(h.valid){var p=e[h.char.charCodeAt(0)];if(p){nq.height=p.height,nq.width=p.width,nq.x=p.u,nq.y=p.v;var f=h.positionY+_q;if(Rq>0){if(f>dq){var _=f-dq;nq.y+=_,nq.height-=_,f-=_}f-p.height*vq<mq&&(nq.height=f<mq?0:f-mq)}var d=h.lineIndex,m=h.positionX+p.width/2*vq+lq[d];if(Oq>0&&this._isHorizontalClamped(m,d))if(wq===exports.Overflow.CLAMP)nq.width=0;else if(wq===exports.Overflow.SHRINK){if(xq.width>p.width){l=!1;break}nq.width=0}if(yq&&nq.height>0&&nq.width>0){var v=yq.isRotated(),y=yq.getOriginalSize(),g=yq.getRect(),A=yq.getOffset(),b=A.x+(y.width-g.width)/2,x=A.y-(y.height-g.height)/2;if(v){var T=nq.x;nq.x=g.x+g.height-nq.y-nq.height-x,nq.y=T+g.y-b,nq.y<0&&(nq.height=nq.height+x)}else nq.x+=g.x-b,nq.y+=g.y+x;var S=h.positionX+lq[h.lineIndex];this.appendQuad(rq,t,nq,v,S-a,f-s,vq)}}else console.warn("Can't find letter in this bitmap-font")}}return l},appendQuad:function(e,t,i,n,r,o,a){},_computeAlignmentOffset:function(){switch(lq.length=0,Tq){case exports.HorizontalTextAlignment.LEFT:for(var e=0;e<pq;++e)lq.push(0);break;case exports.HorizontalTextAlignment.CENTER:for(var t=0,i=sq.length;t<i;t++)lq.push((xq.width-sq[t])/2);break;case exports.HorizontalTextAlignment.RIGHT:for(var n=0,r=sq.length;n<r;n++)lq.push(xq.width-sq[n])}switch(Sq){case exports.VerticalTextAlignment.TOP:_q=xq.height;break;case exports.VerticalTextAlignment.CENTER:_q=(xq.height+fq)/2;break;case exports.VerticalTextAlignment.BOTTOM:_q=fq}},_setupBMFontOverflowMetrics:function(){var e=xq.width,t=xq.height;wq===exports.Overflow.RESIZE_HEIGHT&&(t=0),wq===exports.Overflow.NONE&&(e=0,t=0),Oq=e,Rq=t,cq.width=e,cq.height=t,Fq=e}});var Mq=sL.Overflow,Pq=on.WHITE.clone(),Dq=sL.HorizontalAlign,Bq=sL.VerticalAlign,Nq=function e(){Z(this,e),this.char="",this.valid=!0,this.x=0,this.y=0,this.line=0,this.hash=""},Lq=function e(){Z(this,e),this.u=0,this.v=0,this.w=0,this.h=0,this.texture=null,this.offsetX=0,this.offsetY=0,this.valid=!1,this.xAdvance=0},zq=function(){function e(t,i){Z(this,e),this.image=null,this.labelInfo=void 0,this.char=void 0,this.data=null,this.canvas=null,this.context=null,this.width=0,this.height=0,this.hash=void 0,this.char=t,this.labelInfo=i,this.hash=t.charCodeAt(0)+i.hash}return J(e,[{key:"updateRenderData",value:function(){this._updateProperties(),this._updateTexture()}},{key:"destroy",value:function(){this.image=null}},{key:"_updateProperties",value:function(){if(this.data=sL._canvasPool.get(),this.canvas=this.data.canvas,this.context=this.data.context,this.context){this.context.font=this.labelInfo.fontDesc;var e=Ma(this.context,this.char);this.width=parseFloat(e.toFixed(2)),this.height=this.labelInfo.fontSize}this.canvas.width!==this.width&&(this.canvas.width=this.width),this.canvas.height!==this.height&&(this.canvas.height=this.height),this.image||(this.image=new Vl),this.image.reset(this.canvas)}},{key:"_updateTexture",value:function(){if(this.context&&this.canvas){var e=this.context,t=this.labelInfo,i=this.canvas.width,n=this.canvas.height;e.textAlign="center",e.textBaseline="middle",e.clearRect(0,0,i,n),e.fillStyle="rgba(255, 255, 255, 0.005)",e.fillRect(0,0,i,n),e.font=t.fontDesc;var r=i/2,o=n/2,a=t.color;if(e.lineJoin="round",e.fillStyle="rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ",1,")"),t.isOutlined){var s=t.out||Pq;e.strokeStyle="rgba(".concat(s.r,", ").concat(s.g,", ").concat(s.b,", ").concat(s.a/255,")"),e.lineWidth=2*t.margin,e.strokeText(this.char,r,o)}e.fillText(this.char,r,o)}}}]),e}(),Gq=function(e){function t(){return Z(this,t),re(this,te(t).apply(this,arguments))}return ee(t,Tc),J(t,[{key:"initWithSize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fl.RGBA8888;this.reset({width:e,height:t,format:i}),this.loaded=!0,this.emit("load")}},{key:"drawTextureAt",value:function(e,t,i){var n=this.getGFXTexture();if(e&&n){var r=this._getGFXDevice();if(r){var o={buffOffset:0,buffStride:0,buffTexHeight:0,texOffset:{x:t,y:i,z:0},texExtent:{width:e.width,height:e.height,depth:1},texSubres:{baseMipLevel:0,levelCount:1,baseArrayLayer:0,layerCount:1}};r.copyTexImagesToTexture([e.data],n,[o])}else console.warn("Unable to get device")}}}]),t}(),Uq=function(){function e(t,i){Z(this,e),this.texture=void 0,this._x=2,this._y=2,this._nextY=2,this._width=0,this._height=0,this._letterDefinitions=new Map,this._dirty=!1,this.texture=new Gq,this.texture.initWithSize(t,i),this._width=t,this._height=i,gk.on(lk.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}return J(e,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),J(e,[{key:"insertLetterTexture",value:function(e){var t=e.image,i=gk.root.device;if(!t||!this.texture||!i)return null;var n=t.width,r=t.height;if(this._x+n+2>this._width&&(this._x=2,this._y=this._nextY),this._y+r>this._nextY&&(this._nextY=this._y+r+2),this._nextY>this._height)return null;this.texture.drawTextureAt(t,this._x,this._y),this._dirty=!0;var o=new Lq;return o.u=this._x,o.v=this._y,o.texture=this.texture,o.valid=!0,o.w=e.width,o.h=e.height,o.xAdvance=e.width,this._x+=n+2,this._letterDefinitions.set(e.hash,o),o}},{key:"update",value:function(){this._dirty&&(this._dirty=!1)}},{key:"reset",value:function(){this._x=2,this._y=2,this._nextY=2,this._letterDefinitions.clear()}},{key:"destroy",value:function(){this.reset(),this.texture&&this.texture.destroy()}},{key:"beforeSceneLoad",value:function(){this.destroy();var e=new Gq;e.initWithSize(this._width,this._height),this.texture=e}},{key:"getLetter",value:function(e){return this._letterDefinitions.get(e)}},{key:"addLetterDefinitions",value:function(e,t){this._letterDefinitions[e]=t}},{key:"cloneLetterDefinition",value:function(){for(var e={},t=0,i=Object.keys(this._letterDefinitions);t<i.length;t++){var n=i[t],r=new Lq;Ue(r,this._letterDefinitions[n]),e[n]=r}return e}},{key:"assignLetterDefinitions",value:function(e){var t=this;e.forEach((function(e,i){Ue(t._letterDefinitions[i],e)}))}},{key:"scaleFontLetterDefinition",value:function(e){for(var t=0,i=Object.keys(this._letterDefinitions);t<i.length;t++){var n=i[t],r=this._letterDefinitions[n];r.w*=e,r.h*=e,r.offsetX*=e,r.offsetY*=e,r.xAdvance*=e}}},{key:"getLetterDefinitionForChar",value:function(e,t){var i=e.charCodeAt(0)+t.hash,n=this._letterDefinitions.get(i);if(!n){var r=new zq(e,t);r.updateRenderData(),n=this.insertLetterTexture(r),r.destroy()}return n}}]),e}(),Xq=new nn,Vq=null,Hq=[],jq=[],Wq=[],Yq=[],qq=new en,Qq=null,Zq=0,Kq=0,Jq=0,$q=0,eQ=0,tQ=1,iQ="",nQ=0,rQ=0,oQ=new en,aQ=0,sQ=0,lQ=0,cQ=0,uQ=0,hQ=!1,pQ=0,fQ=0,_Q=0,dQ="",mQ=!1,vQ={fontSize:0,lineHeight:0,hash:"",fontFamily:"",fontDesc:"Arial",hAlign:0,vAlign:0,color:Pq,isOutlined:!1,out:Pq,margin:0},yQ={getAssemblerData:function(){return Qq||(Qq=new Uq(1024,1024)),Qq.texture},updateRenderData:function(e){e.renderData&&e.renderData.vertDirty&&Vq!==e&&(Vq=e,this._updateFontFamily(e),vQ.fontFamily=dQ,this._updateProperties(),vQ.fontDesc=this._getFontDesc(),this._updateContent(),Vq.actualFontSize=nQ,Vq.node.setContentSize(oQ),Vq.renderData.vertDirty=Vq.renderData.uvDirty=!1,Vq=null,this._resetProperties())},_updateFontScale:function(){tQ=nQ/rQ},_updateProperties:function(){if(Vq){iQ=Vq.string.toString(),nQ=Vq.fontSize,rQ=nQ;var e=Vq.node.getContentSize();oQ.width=e.width,oQ.height=e.height,aQ=Vq.horizontalAlign,sQ=Vq.verticalAlign,lQ=Vq.spacingX,uQ=Vq.overflow,cQ=Vq.lineHeight,mQ=Vq.isBold,hQ=uQ!==Mq.NONE&&(uQ===Mq.RESIZE_HEIGHT||Vq.enableWrapText);var t=Vq.getComponent(KU);t&&t.enabled?(vQ.isOutlined=!0,vQ.margin=t.width,vQ.out=t.color,vQ.out.a=t.color.a*Vq.color.a/255):(vQ.isOutlined=!1,vQ.margin=0),vQ.lineHeight=cQ,vQ.fontSize=nQ,vQ.fontFamily=dQ,vQ.color=Vq.color,vQ.hash=this._computeHash(vQ),this._setupBMFontOverflowMetrics()}},_updateFontFamily:function(e){e.useSystemFont?dQ=e.fontFamily:e.font?e.font._nativeAsset?dQ=e.font._nativeAsset:(dQ=Km.getRes(e.font.nativeUrl)||"")||Km.load(e.font.nativeUrl,(function(t,i){dQ=i||"Arial",e.font&&(e.font._nativeAsset=i),e.updateRenderData(!0)})):dQ="Arial"},_computeHash:function(e){var t=e.color.toHEX("#rrggbb"),i="";return e.isOutlined&&(i=e.out.toHEX("#rrggbb")),""+e.fontSize+e.fontFamily+t+i},_getFontDesc:function(){var e=nQ.toString()+"px ";return e+=dQ,mQ&&(e="bold "+e),e},_resetProperties:function(){},_updateContent:function(){this._updateFontScale(),this._alignText()},_computeHorizontalKerningForText:function(){},_multilineTextWrap:function(e){var t=iQ.length,i=0,n=0,r=0,o=0,a=0,s=0,l=0,c=null,u=new Oi(0,0);this._updateFontScale();for(var h=0;h<t;){var p=iQ.charAt(h);if("\n"!==p){for(var f=e(iQ,h,t),_=s,d=l,m=a,v=n,y=!1,g=0;g<f;++g){var A=h+g;if("\r"!==(p=iQ.charAt(A)))if(c=Qq&&Qq.getLetterDefinitionForChar(p,vQ)){var b=v+c.offsetX*tQ;if(hQ&&_Q>0&&n>0&&b+c.w*tQ>_Q&&!Ia(p)){Wq.push(a),a=0,i++,n=0,r-=cQ*tQ+0,y=!0;break}u.x=b,u.y=r-c.offsetY*tQ,this._recordLetterInfo(u,p,A,i),A+1<Hq.length&&A<t-1&&(v+=Hq[A+1]),v+=c.xAdvance*tQ+lQ,m=u.x+c.w*tQ,_<u.y&&(_=u.y),d>u.y-c.h*tQ&&(d=u.y-c.h*tQ)}else this._recordPlaceholderInfo(A,p);else this._recordPlaceholderInfo(A,p)}y||(n=v,s<_&&(s=_),l>d&&(l=d),o<(a=m)&&(o=a),h+=f)}else Wq.push(a),a=0,i++,n=0,r-=cQ*tQ+0,this._recordPlaceholderInfo(h,p),h++}return Wq.push(a),Kq=(Zq=i+1)*cQ*tQ,Zq>1&&(Kq+=0*(Zq-1)),oQ.width=pQ,oQ.height=fQ,pQ<=0&&(oQ.width=parseFloat(o.toFixed(2))),fQ<=0&&(oQ.height=parseFloat(Kq.toFixed(2))),$q=oQ.height,eQ=0,s>0&&($q=oQ.height+s),l<-Kq&&(eQ=Kq+l),!0},_getFirstCharLen:function(){return 1},_getFirstWordLen:function(e,t,i){var n=e.charAt(t);if(Fa(n)||"\n"===n||Ia(n))return 1;if(Qq){var r=1,o=Qq.getLetterDefinitionForChar(n,vQ);if(!o)return r;for(var a=o.xAdvance*tQ+lQ,s=t+1;s<i&&(n=e.charAt(s),o=Qq.getLetterDefinitionForChar(n,vQ));++s){if(a+o.offsetX*tQ+o.w*tQ>_Q&&!Ia(n)&&_Q>0)return r;if(a+=o.xAdvance*tQ+lQ,"\n"===n||Ia(n)||Fa(n))break;r++}return r}},_multilineTextWrapByWord:function(){return this._multilineTextWrap(this._getFirstWordLen)},_multilineTextWrapByChar:function(){return this._multilineTextWrap(this._getFirstCharLen)},_recordPlaceholderInfo:function(e,t){if(e>=jq.length){var i=new Nq;jq.push(i)}jq[e].char=t,jq[e].hash=t.charCodeAt(0)+vQ.hash,jq[e].valid=!1},_recordLetterInfo:function(e,t,i,n){if(i>=jq.length){var r=new Nq;jq.push(r)}var o=t.charCodeAt(0)+vQ.hash;jq[i].line=n,jq[i].char=t,jq[i].hash=o;var a=Qq&&Qq.getLetter(o);jq[i].valid=!!a&&!!a.valid,jq[i].x=e.x,jq[i].y=e.y},_alignText:function(){Kq=0,Wq.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),this._updateQuads()},_scaleFontSizeDown:function(e){var t=!0;e||(e=.1,t=!1),nQ=e,t&&this._updateContent()},_isVerticalClamp:function(){return Kq>oQ.height},_isHorizontalClamp:function(){for(var e=!1,t=0,i=iQ.length;t<i;++t){var n=jq[t];if(n.valid){var r=Qq.getLetter(n.hash);if(!r)continue;var o=n.x+r.w*tQ,a=n.line;if(pQ>0)if(hQ){if(Wq[a]>oQ.width&&(o>oQ.width||o<0)){e=!0;break}}else if(o>oQ.width){e=!0;break}}}return e},_isHorizontalClamped:function(e,t){var i=Wq[t],n=e>oQ.width||e<0;return hQ?i>oQ.width&&n:n},_updateQuads:function(){if(Vq&&Qq){var e=Qq.texture,t=Vq.node,i=Vq.renderData;i.dataLength=i.vertexCount=i.indiceCount=0;for(var n=oQ,r=t.getAnchorPoint(),o=r.x*n.width,a=r.y*n.height,s=!0,l=0,c=iQ.length;l<c;++l){var u=jq[l];if(u.valid){var h=Qq.getLetter(u.hash);if(h){Xq.height=h.h,Xq.width=h.w,Xq.x=h.u,Xq.y=h.v;var p=u.y+Jq;if(fQ>0){if(p>$q){var f=p-$q;Xq.y+=f,Xq.height-=f,p-=f}p-h.h*tQ<eQ&&(Xq.height=p<eQ?0:p-eQ)}var _=u.line,d=u.x+h.w/2*tQ+Yq[_];if(pQ>0&&this._isHorizontalClamped(d,_))if(uQ===Mq.CLAMP)Xq.width=0;else if(uQ===Mq.SHRINK){if(oQ.width>h.w){s=!1;break}Xq.width=0}if(Xq.height>0&&Xq.width>0){var m=u.x+Yq[u.line];this.appendQuad(Vq,e,Xq,!1,m-o,p-a,tQ)}}}}return s}},appendQuad:function(e,t,i,n,r,o,a){},_computeAlignmentOffset:function(){switch(Yq.length=0,aQ){case Dq.LEFT:for(var e=0;e<Zq;++e)Yq.push(0);break;case Dq.CENTER:for(var t=0,i=Wq.length;t<i;t++)Yq.push((oQ.width-Wq[t])/2);break;case Dq.RIGHT:for(var n=0,r=Wq.length;n<r;n++)Yq.push(oQ.width-Wq[n])}switch(sQ){case Bq.TOP:Jq=oQ.height;break;case Bq.CENTER:Jq=(oQ.height+Kq)/2-(cQ-nQ)/2;break;case Bq.BOTTOM:Jq=(oQ.height+Kq)/2-(cQ-nQ)}},_setupBMFontOverflowMetrics:function(){var e=oQ.width,t=oQ.height;uQ===Mq.RESIZE_HEIGHT&&(t=0),uQ===Mq.NONE&&(e=0,t=0),pQ=e,fQ=t,qq.width=e,qq.height=t,_Q=e}},gQ=new on(255,255,255,255),AQ={createData:function(e){return e.requestRenderData()},fillBuffers:function(e,t){if(e.renderData){var i=e.node;gQ.a=e.color.a,fN(i,t,e.renderData,gQ)}},appendQuad:Iq.appendQuad};Ge(AQ,yQ);var bQ=sL.Overflow,xQ=on.WHITE.clone(),TQ=He(KU,sp),SQ=null,EQ=null,CQ=null,wQ="",kQ="",OQ=0,RQ=0,FQ=[],IQ=new en,MQ=0,PQ=0,DQ=0,BQ=new on,NQ="",LQ=bQ.NONE,zQ=!1,GQ=!1,UQ=new on,XQ=0,VQ=0,HQ=!1,jQ=!1,WQ=!1,YQ={getAssemblerData:function(){var e=sL._canvasPool.get();return e.canvas.width=e.canvas.height=1,e},resetAssemblerData:function(e){e&&sL._canvasPool.put(e)},updateRenderData:function(e){e.renderData&&e.renderData.vertDirty&&(this._updateFontFamly(e),this._updateProperties(e),this._calculateLabelFont(),this._calculateSplitedStrings(),this._updateLabelDimensions(),this._calculateTextBaseline(),this._updateTexture(),e.actualFontSize=OQ,e.node.setContentSize(IQ),this.updateVerts(e),e.markForUpdateRenderData(!1),SQ=null,EQ=null,CQ=null)},updateVerts:function(e){},_updateFontFamly:function(e){e.useSystemFont?NQ=e.fontFamily:e.font?e.font._nativeAsset?NQ=e.font._nativeAsset:Km.load(e.font.nativeUrl,(function(t,i){NQ=i||"Arial",e.updateRenderData(!0)})):NQ="Arial"},_updateProperties:function(e){var t=e.assemblerData;if(t){SQ=t.context,EQ=t.canvas,CQ=e.spriteFrame,kQ=e.string.toString(),OQ=e.fontSize,RQ=OQ,LQ=e.overflow,IQ.width=e.node.width,IQ.height=e.node.height,MQ=e.lineHeight,PQ=e.horizontalAlign,DQ=e.verticalAlign,BQ=e.color,HQ=e.isBold,jQ=e.isItalic,WQ=e.isUnderline,zQ=LQ!==bQ.NONE&&(LQ===bQ.RESIZE_HEIGHT||e.enableWrapText);var i=TQ&&e.getComponent(KU);i&&i.enabled?(GQ=!0,VQ=XQ=i.width,UQ.set(i.color),UQ.a=UQ.a*e.color.a/255):(GQ=!1,VQ=0)}},_calculateFillTextStartPosition:function(){var e,t,i=this._getLineHeight(),n=FQ.length;return e=PQ===exports.HorizontalTextAlignment.RIGHT?IQ.width-VQ:PQ===exports.HorizontalTextAlignment.CENTER?IQ.width/2:0+VQ,DQ===exports.VerticalTextAlignment.TOP?(t=.13*OQ,t=0):t=DQ===exports.VerticalTextAlignment.CENTER?IQ.height/2-i*(n-1)/2:IQ.height-i*(n-1),new Oi(e,t)},_updateTexture:function(){if(SQ&&EQ){SQ.clearRect(0,0,EQ.width,EQ.height),SQ.font=wQ;var e,t=this._calculateFillTextStartPosition(),i=this._getLineHeight();SQ.lineJoin="round",SQ.fillStyle="rgba(".concat(BQ.r,", ").concat(BQ.g,", ").concat(BQ.b,", ").concat(BQ.a/255,")");for(var n=0;n<FQ.length;++n){if(GQ){var r=UQ||xQ;SQ.strokeStyle="rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a/255,")"),SQ.lineWidth=2*XQ,SQ.strokeText(FQ[n],t.x,t.y+n*i)}SQ.fillText(FQ[n],t.x,t.y+n*i),WQ&&(e=this._calculateUnderlineStartPosition(),SQ.save(),SQ.beginPath(),SQ.lineWidth=OQ/8,SQ.strokeStyle="rgba(".concat(BQ.r,", ").concat(BQ.g,", ").concat(BQ.b,", ").concat(BQ.a/255,")"),SQ.moveTo(e.x,e.y+n*i-1),SQ.lineTo(e.x+EQ.width,e.y+n*i-1),SQ.stroke(),SQ.restore())}if(CQ){var o;o=CQ instanceof Ru?CQ.texture:CQ;var a=0===EQ.width||0===EQ.height;o.reset({width:EQ.width,height:EQ.height,mipmapLevel:a?0:1}),a||o.uploadData(EQ)}}},_calculateUnderlineStartPosition:function(){var e,t,i=this._getLineHeight(),n=FQ.length;return e=0+VQ,t=DQ===exports.VerticalTextAlignment.TOP?OQ:DQ===exports.VerticalTextAlignment.CENTER?IQ.height/2-i*(n-1)/2+OQ/2:IQ.height-i*(n-1),new Oi(e,t)},_updateLabelDimensions:function(){if(SQ){var e=kQ.split("\n");if(LQ===bQ.RESIZE_HEIGHT)IQ.height=(FQ.length+.26)*this._getLineHeight();else if(LQ===bQ.NONE){FQ=e;for(var t,i=0,n=0,r=fe(e);!(t=r()).done;){var o=t.value,a=Ma(SQ,o);i=i>a?i:a}n=(FQ.length+.26)*this._getLineHeight(),IQ.width=parseFloat(i.toFixed(2))+2*VQ,IQ.height=parseFloat(n.toFixed(2)),jQ&&(IQ.width+=RQ*Math.tan(.20943951))}EQ&&(EQ.width=IQ.width,EQ.height=IQ.height)}},_calculateTextBaseline:function(){var e,t;e=PQ===exports.HorizontalTextAlignment.RIGHT?"right":PQ===exports.HorizontalTextAlignment.CENTER?"center":"left",t=DQ===exports.VerticalTextAlignment.TOP?"top":DQ===exports.VerticalTextAlignment.CENTER?"middle":"bottom",SQ&&(SQ.textAlign=e,SQ.textBaseline=t)},_calculateSplitedStrings:function(){if(SQ){var e=kQ.split("\n");if(zQ){FQ=[];for(var t,i=IQ.width-2*VQ,n=fe(e);!(t=n()).done;){var r=t.value,o=Pa(r,Ma(SQ,r),i,this._measureText(SQ));FQ=FQ.concat(o)}}else FQ=e}},_getFontDesc:function(){var e=OQ.toString()+"px ";return e+=NQ,HQ&&(e="bold "+e),jQ&&(e="italic "+e),e},_getLineHeight:function(){var e=MQ;return 0|(e=0===e?OQ:e*OQ/RQ)},_calculateParagraphLength:function(e,t){for(var i,n=[],r=fe(e);!(i=r()).done;){var o=Ma(t,i.value);n.push(o)}return n},_measureText:function(e){return function(t){return Ma(e,t)}},_calculateLabelFont:function(){if(SQ&&(wQ=this._getFontDesc(),SQ.font=wQ,LQ===bQ.SHRINK)){var e=kQ.split("\n"),t=this._calculateParagraphLength(e,SQ);FQ=e;var i=0,n=0,r=0;if(zQ){var o=IQ.width-2*VQ,a=IQ.height-2*VQ;if(o<0||a<0)return wQ=this._getFontDesc(),void(SQ.font=wQ);n=a+1,r=o+1;for(var s=OQ+1,l=[],c=!0,u=0|s;n>a||r>o;){if(c?s=u/2|0:u=s=u-1,s<=0){v(4003);break}for(OQ=s,wQ=this._getFontDesc(),SQ.font=wQ,FQ=[],n=0,i=0;i<e.length;++i){var h=0,p=Ma(SQ,e[i]);for(l=Pa(e[i],p,o,this._measureText(SQ));h<l.length;){r=Ma(SQ,l[h]),n+=this._getLineHeight(),++h}FQ=FQ.concat(l)}c&&(n>a?u=0|s:(c=!1,n=a+1))}}else{for(n=e.length*this._getLineHeight(),i=0;i<e.length;++i)r<t[i]&&(r=t[i]);var f=(IQ.width-2*VQ)/r,_=IQ.height/n;OQ=RQ*Math.min(1,f,_)|0,wQ=this._getFontDesc(),SQ.font=wQ}}}},qQ=on.WHITE.clone(),QQ={createData:function(e){var t=e.requestRenderData();t.dataLength=4,t.vertexCount=4,t.indiceCount=6;var i=t.vData=new Float32Array(36);i[3]=i[21]=i[22]=i[31]=0,i[4]=i[12]=i[13]=i[30]=1;for(var n=5,r=0;r<4;r++)on.toArray(i,qQ,n),n+=9;return t},fillBuffers:function(e,t){var i=e.renderData,n=i.datas,r=e.node,o=t.currBufferBatch,a=o.byteOffset>>2,s=o.indiceOffset,l=o.vertexOffset;o.request()||(o=t.currBufferBatch,s=0,l=0);var c=o.vData,u=o.iData,h=i.vData,p=n[0],f=n[3];r.updateWorldTransform();var _=r._pos,d=r._rot,m=r._scale,v=p.x*m.x,y=f.x*m.x,g=p.y*m.y,A=f.y*m.y,b=d.x,x=d.y,T=d.z,S=d.w,E=b*x,C=T*S,w=b*b-x*x,k=S*S-T*T,O=k+w,R=2*(E-C),F=k-w,I=2*(E+C),M=_.x,P=_.y;h[0]=O*v+R*g+M,h[1]=F*g+I*v+P,h[9]=O*y+R*g+M,h[10]=F*g+I*y+P,h[18]=O*v+R*A+M,h[19]=F*A+I*v+P,h[27]=O*y+R*A+M,h[28]=F*A+I*y+P,c.set(h,a),u[s++]=l,u[s++]=l+1,u[s++]=l+2,u[s++]=l+2,u[s++]=l+1,u[s++]=l+3},updateVerts:function(e){var t=e.renderData;if(t){var i=e.node,n=i.width,r=i.height,o=i.anchorX*n,a=i.anchorY*r,s=t.datas;s[0].x=-o,s[0].y=-a,s[3].x=n-o,s[3].y=r-a}}};Ge(QQ,YQ);var ZQ={getAssembler:function(e){var t=QQ;return e.font instanceof Qd?t=Iq:e.cacheMode===sL.CacheMode.CHAR&&(ws.browserType===ws.BROWSER_TYPE_WECHAT_GAME_SUB?u("sorry, subdomain does not support CHAR mode currently!"):t=AQ),t}};sL.Assembler=ZQ;var KQ=$w.sharedManager,JQ={createData:function(e){var t=e.requestRenderData();return t.dataLength=4,t.vertexCount=4,t.indiceCount=6,t},updateRenderData:function(e){var t=e.renderData;t&&t.vertDirty&&this.updateVerts&&this.updateVerts(e)},updateVerts:function(e){var t=e.renderData;if(t){var i,n,r,o,a=e.node,s=t.datas,l=a.width,c=a.height,u=a.anchorX*l,h=a.anchorY*c;i=-u,n=-h,r=l-u,o=c-h,s[0].x=i,s[0].y=n,s[3].x=r,s[3].y=o,t.vertDirty=!1}},fillBuffers:function(e,t){KQ.pushMask(e),KQ.clear(),e.clearGraphics.updateAssembler(t),KQ.enterLevel(),e.graphics.updateAssembler(t),KQ.enableMask()}},$Q={fillBuffers:function(e,t){KQ.exitMask()}},eZ={getAssembler:function(){return JQ}},tZ={getAssembler:function(){return $Q}};dU.Assembler=eZ,dU.PostAssembler=tZ;var iZ=Uw.FillType,nZ=new Qi,rZ={useModel:!1,updateRenderData:function(e){var t=e.spriteFrame,i=e.renderData;if(i&&t){var n=i.uvDirty,r=i.vertDirty;if(!n&&!r)return;var o=e.fillStart,a=e.fillRange;a<0&&(o+=a,a=-a),a=(a=(a=o+a)>1?1:a)<0?0:a;var s=(o=(o=o>1?1:o)<0?0:o)+(a=(a-=o)<0?0:a);s=s>1?1:s,n&&this.updateUVs(e,o,s),r&&(this.updateVerts&&this.updateVerts(e,o,s),this.updateWorldVerts(e))}},updateUVs:function(e,t,i){var n=e.spriteFrame,r=e.renderData,o=r.datas,a=n.width,s=n.height,l=n.getRect(),c=0,u=0,h=0,p=0,f=0,_=0,d=0,m=0,v=0,y=0;switch(n.isRotated()?(c=l.x/a,u=(l.y+l.width)/s,h=f=c,d=v=(l.x+l.height)/a,_=y=u,p=m=l.y/s):(c=l.x/a,u=(l.y+l.height)/s,h=d=c,f=v=(l.x+l.width)/a,p=_=u,m=y=l.y/s),e.fillType){case iZ.HORIZONTAL:o[0].u=h+(f-h)*t,o[0].v=p+(_-p)*t,o[1].u=h+(f-h)*i,o[1].v=p+(_-p)*i,o[2].u=d+(v-d)*t,o[2].v=m+(y-m)*t,o[3].u=d+(v-d)*i,o[3].v=m+(y-m)*i;break;case iZ.VERTICAL:o[0].u=h+(d-h)*t,o[0].v=p+(m-p)*t,o[1].u=f+(v-f)*t,o[1].v=_+(y-_)*t,o[2].u=h+(d-h)*i,o[2].v=p+(m-p)*i,o[3].u=f+(v-f)*i,o[3].v=_+(y-_)*i;break;default:b(2626)}r.uvDirty=!1},updateVerts:function(e,t,i){var n=e.renderData,r=n.datas,o=e.node,a=o.width,s=o.height,l=o.anchorX*a,c=o.anchorY*s,u=-l,h=-c,p=a-l,f=s-c,_=0;switch(e.fillType){case iZ.HORIZONTAL:_=u+(p-u)*i,u=u+(p-u)*t,p=_;break;case iZ.VERTICAL:_=h+(f-h)*i,h=h+(f-h)*t,f=_;break;default:b(2626)}r[4].x=u,r[4].y=h,r[5].x=p,r[5].y=h,r[6].x=u,r[6].y=f,r[7].x=p,r[7].y=f,n.vertDirty=!1},createData:function(e){var t=e.requestRenderData();t.dataLength=8,t.vertexCount=4,t.indiceCount=6;for(var i,n=fe(t.datas);!(i=n()).done;){i.value.z=0}return t},updateWorldVerts:function(e){var t=e.node,i=e.renderData.datas;t.getWorldMatrix(nZ);for(var n=0;n<4;n++){var r=i[n+4],o=i[n];Mi.transformMat4(o,r,nZ)}},fillBuffers:function(e,t){e.node.hasChangedFlags&&this.updateWorldVerts(e);e.node;!function(e,t,i,n){var r=i.datas,o=t.currBufferBatch,a=o.byteOffset>>2,s=i.vertexCount,l=o.indiceOffset,c=o.vertexOffset;o.request(s,i.indiceCount)||(o=t.currBufferBatch,s=0,l=0,c=0);for(var u=o.vData,h=0;h<s;h++){var p=r[h];u[a++]=p.x,u[a++]=p.y,u[a++]=p.z,u[a++]=p.u,u[a++]=p.v,on.toArray(u,n,a),a+=4}var f=o.iData;f[l++]=c,f[l++]=c+1,f[l++]=c+2,f[l++]=c+1,f[l++]=c+3,f[l++]=c+2}(0,t,e.renderData,e.color)}},oZ=2*Math.PI,aZ=[new Oi,new Oi,new Oi,new Oi],sZ=new Array(4),lZ=new Array(8),cZ=[new Oi,new Oi,new Oi,new Oi],uZ=[new Oi,new Oi,new Oi,new Oi],hZ=new Oi,pZ=[new Oi,new Oi,new Oi,new Oi];function fZ(e,t,i,n,r,o,a){var s=Math.sin(o);s=Math.abs(s)>1e-6?s:0;var l=Math.cos(o),c=0,u=0;if(0!==(l=Math.abs(l)>1e-6?l:0)){if(c=s/l,(e-r.x)*l>0){var h=r.y+c*(e-r.x);a[0].x=e,a[0].y=h}if((t-r.x)*l>0){var p=r.y+c*(t-r.x);a[2].x=t,a[2].y=p}}if(0!==s){if(u=l/s,(n-r.y)*s>0){var f=r.x+u*(n-r.y);a[3].x=f,a[3].y=n}if((i-r.y)*s>0){var _=r.x+u*(i-r.y);a[1].x=_,a[1].y=i}}}function _Z(e,t){var i=t.x-e.x,n=t.y-e.y;if(0===i&&0===n)return 0;if(0===i)return n>0?.5*Math.PI:1.5*Math.PI;var r=Math.atan(n/i);return i<0&&(r+=Math.PI),r}function dZ(e,t,i,n,r){var o=sZ,a=o[0],s=o[1],l=o[2],c=o[3];e[t].x=i.x,e[t].y=i.y,e[t+1].x=n.x,e[t+1].y=n.y,e[t+2].x=r.x,e[t+2].y=r.y;mZ((i.x-a)/(l-a),(i.y-s)/(c-s),e,t),mZ((n.x-a)/(l-a),(n.y-s)/(c-s),e,t+1),mZ((r.x-a)/(l-a),(r.y-s)/(c-s),e,t+2)}function mZ(e,t,i,n){var r=lZ,o=r[0]+(r[2]-r[0])*e,a=r[4]+(r[6]-r[4])*e,s=r[1]+(r[3]-r[1])*e,l=r[5]+(r[7]-r[5])*e,c=i[n];c.u=o+(a-o)*t,c.v=s+(l-s)*t}for(var vZ={useModel:!1,createData:function(e){return e.requestRenderData()},updateRenderData:function(e){var t=e.spriteFrame,i=e.renderData;if(i&&t&&(i.vertDirty||i.uvDirty)){var n=i.datas,r=e.fillStart,o=e.fillRange;for(o<0&&(r+=o,o=-o);r>=1;)r-=1;for(;r<0;)r+=1;var a=(r*=oZ)+(o*=oZ);!function(e){var t=e.node,i=t.width,n=t.height,r=t.anchorX*i,o=t.anchorY*n,a=-r,s=-o,l=i-r,c=n-o,u=sZ;u[0]=a,u[1]=s,u[2]=l,u[3]=c;var h=e.fillCenter,p=hZ.x=Math.min(Math.max(0,h.x),1)*(l-a)+a,f=hZ.y=Math.min(Math.max(0,h.y),1)*(c-s)+s;aZ[0].x=aZ[3].x=a,aZ[1].x=aZ[2].x=l,aZ[0].y=aZ[1].y=s,aZ[2].y=aZ[3].y=c;for(var _,d=fe(pZ);!(_=d()).done;){var m=_.value;Oi.set(m,0,0)}p!==u[0]&&Oi.set(pZ[0],3,0),p!==u[2]&&Oi.set(pZ[2],1,2),f!==u[1]&&Oi.set(pZ[1],0,1),f!==u[3]&&Oi.set(pZ[3],2,3)}(e),function(e){var t=e.width,i=e.height,n=e.getRect(),r=0,o=0,a=0,s=0,l=lZ;e.isRotated()?(r=n.x/t,o=(n.x+n.height)/t,a=n.y/i,s=(n.y+n.width)/i,l[0]=l[2]=r,l[4]=l[6]=o,l[3]=l[7]=s,l[1]=l[5]=a):(r=n.x/t,o=(n.x+n.width)/t,a=n.y/i,s=(n.y+n.height)/i,l[0]=l[4]=r,l[2]=l[6]=o,l[1]=l[3]=s,l[5]=l[7]=a)}(t),fZ(sZ[0],sZ[2],sZ[1],sZ[3],hZ,r,cZ),fZ(sZ[0],sZ[2],sZ[1],sZ[3],hZ,r+o,uZ);for(var s=0,l=0;l<4;++l){var c=pZ[l];if(c)if(o>=oZ)i.dataLength=s+3,dZ(n,s,hZ,aZ[c.x],aZ[c.y]),s+=3;else{var u=_Z(hZ,aZ[c.x]),h=_Z(hZ,aZ[c.y]);h<u&&(h+=oZ),u-=oZ,h-=oZ;for(var p=0;p<3;++p)u>=a||(u>=r?(i.dataLength=s+3,dZ(n,s,hZ,aZ[c.x],h>=a?uZ[l]:aZ[c.y]),s+=3):h<=r||(h<=a?(i.dataLength=s+3,dZ(n,s,hZ,cZ[l],aZ[c.y]),s+=3):(i.dataLength=s+3,dZ(n,s,hZ,cZ[l],uZ[l]),s+=3))),u+=oZ,h+=oZ}}i.indiceCount=i.vertexCount=s,i.vertDirty=i.uvDirty=!1}},fillBuffers:function(e,t){!function(e,t,i,n){var r=i.datas,o=t.currBufferBatch,a=o.byteOffset>>2,s=i.vertexCount,l=o.indiceOffset,c=o.vertexOffset;o.request(s,i.indiceCount)||(o=t.currBufferBatch,s=0,l=0,c=0);var u=o.vData;e.getWorldMatrix(pN);for(var h=0;h<s;h++){var p=r[h];Mi.set(hN,p.x,p.y,0),Mi.transformMat4(hN,hN,pN),u[a++]=hN.x,u[a++]=hN.y,u[a++]=hN.z,u[a++]=p.u,u[a++]=p.v,on.toArray(u,n,a),a+=4}for(var f=o.iData,_=0;_<i.dataLength;_++)f[l+_]=c+_}(e.node,t,e.renderData,e.color)}},yZ=[],gZ=0;gZ<4;gZ++)yZ.push(new Mi);for(var AZ={createData:function(e){var t=e.requestRenderData();return t.dataLength=4,t.vertexCount=4,t.indiceCount=6,t.vData=new Float32Array(36),t},updateRenderData:function(e){var t=e.spriteFrame,i=e.renderData;i&&t&&(i.vertDirty&&this.updateVerts(e),i.uvDirty&&this.updateUvs(e))},fillBuffers:function(e,t){if(null!==e){var i=e.renderData.datas,n=e.node,r=t.currBufferBatch,o=r.byteOffset>>2,a=r.indiceOffset,s=r.vertexOffset;r.request()||(r=t.currBufferBatch,o=0,a=0,s=0);var l=r.vData,c=r.iData,u=e.renderData.vData,h=i[0],p=i[3],f=n.worldMatrix,_=f.m00,d=f.m01,m=f.m04,v=f.m05,y=f.m12,g=f.m13,A=h.x,b=p.x,x=h.y,T=p.y,S=_*A,E=_*b,C=d*A,w=d*b,k=m*x,O=m*T,R=v*x,F=v*T;u[0]=S+k+y,u[1]=C+R+g,u[9]=E+k+y,u[10]=w+R+g,u[18]=S+O+y,u[19]=C+F+g,u[27]=E+O+y,u[28]=w+F+g,l.set(u,o),c[a++]=s,c[a++]=s+1,c[a++]=s+2,c[a++]=s+2,c[a++]=s+1,c[a++]=s+3}},updateVerts:function(e){var t=e.renderData;if(t){var i=e.node,n=t.datas,r=i.width,o=i.height,a=i.anchorX*r,s=i.anchorY*o,l=0,c=0,u=0,h=0;if(e.trim)l=-a,c=-s,u=r-a,h=o-s;else{var p=e.spriteFrame,f=p.getOriginalSize(),_=p.getRect(),d=f.width,m=f.height,v=_.width,y=_.height,g=p.getOffset(),A=r/d,b=o/m,x=g.x+(d-v)/2,T=g.x-(d-v)/2;l=x*A-a,c=(g.y+(m-y)/2)*b-s,u=r+T*A-a,h=o+(g.y-(m-y)/2)*b-s}n[0].x=l,n[0].y=c,n[0].z=0,n[3].x=u,n[3].y=h,n[3].z=0,t.vertDirty=!1}},updateUvs:function(e){var t=e.renderData,i=t.vData,n=e.spriteFrame.uv;i[3]=n[0],i[4]=n[1],i[12]=n[2],i[13]=n[3],i[21]=n[4],i[22]=n[5],i[30]=n[6],i[31]=n[7],t.uvDirty=!1},updateColor:function(e){for(var t=e.renderData.vData,i=5,n=e.color,r=n.r/255,o=n.g/255,a=n.b/255,s=n.a/255,l=0;l<4;l++)t[i]=r,t[i+1]=o,t[i+2]=a,t[i+3]=s,i+=9}},bZ=new Mi,xZ=new Qi,TZ={useModel:!1,createData:function(e){var t=e.requestRenderData();return t.dataLength=20,t.vertexCount=16,t.indiceCount=54,t},updateRenderData:function(e){var t=e.spriteFrame,i=e.renderData;i&&t&&(i.vertDirty&&(this.updateVerts(e),this.updateWorldVerts(e)))},updateVerts:function(e){var t=e.renderData,i=t.datas,n=e.node,r=n.width,o=n.height,a=n.anchorX*r,s=n.anchorY*o,l=e.spriteFrame,c=l.insetLeft,u=l.insetRight,h=l.insetTop,p=l.insetBottom,f=r-c-u,_=o-h-p,d=r/(c+u),m=o/(h+p);d=isNaN(d)||d>1?1:d,m=isNaN(m)||m>1?1:m,f=f<0?0:f,_=_<0?0:_,i[0].x=-a,i[0].y=-s,i[1].x=c*d-a,i[1].y=p*m-s,i[2].x=i[1].x+f,i[2].y=i[1].y+_,i[3].x=r-a,i[3].y=o-s,t.vertDirty=!1},fillBuffers:function(e,t){e.node.hasChangedFlags&&this.updateWorldVerts(e);var i=t.currBufferBatch,n=e.renderData,r=n.datas,o=i.byteOffset>>2,a=n.vertexCount,s=i.indiceOffset,l=i.vertexOffset,c=e.spriteFrame.uvSliced;i.request(a,n.indiceCount)||(i=t.currBufferBatch,o=0,s=0,l=0);for(var u=i.vData,h=i.iData,p=4;p<20;++p){var f=r[p],_=c[p-4];u[o++]=f.x,u[o++]=f.y,u[o++]=f.z,u[o++]=_.u,u[o++]=_.v,on.toArray(u,e.color,o),o+=4}for(var d=0;d<3;++d)for(var m=0;m<3;++m){var v=l+4*d+m;h[s++]=v,h[s++]=v+1,h[s++]=v+4,h[s++]=v+1,h[s++]=v+5,h[s++]=v+4}},updateWorldVerts:function(e){var t=e.node,i=e.renderData.datas;t.getWorldMatrix(xZ);for(var n=0;n<4;++n)for(var r=i[n],o=0;o<4;++o){var a=i[o],s=i[4+4*n+o];Mi.set(bZ,a.x,r.y,0),Mi.transformMat4(s,bZ,xZ)}}},SZ=[],EZ=0;EZ<4;EZ++)SZ.push(new Mi);var CZ,wZ,kZ,OZ,RZ,FZ,IZ,MZ,PZ,DZ,BZ,NZ,LZ,zZ,GZ={useModel:!1,createData:function(e){return e.requestRenderData()},updateRenderData:function(e){var t=e.renderData,i=e.spriteFrame;if(i&&t&&(t.uvDirty||t.vertDirty)){var n=e.node,r=Math.abs(n.width),o=Math.abs(n.height),a=n.anchorX*r,s=n.anchorY*o,l=i.getRect(),c=l.width,u=l.height,h=r/c,p=o/u,f=Math.ceil(p),_=Math.ceil(h),d=t.datas;t.dataLength=Math.max(8,f+1,_+1);for(var m=0;m<=_;++m)d[m].x=Math.min(c*m,r)-a;for(var v=0;v<=f;++v)d[v].y=Math.min(u*v,o)-s;t.vertexCount=f*_*4,t.indiceCount=f*_*6,t.uvDirty=!1,t.vertDirty=!1}},fillBuffers:function(e,t){var i=e.node,n=e.renderData,r=t.currBufferBatch,o=r.indiceOffset,a=r.byteOffset>>2,s=r.vertexOffset,l=n.vertexCount,c=n.indiceCount,u=r.vData,h=r.iData;r.request(l,c)||(r=t.currBufferBatch,a=0,o=0,s=0);var p=e.spriteFrame,f=p.isRotated(),_=p.uv,d=p.getRect(),m=Math.abs(i.width),v=Math.abs(i.height),y=m/d.width,g=v/d.height,A=Math.ceil(g),b=Math.ceil(y),x=i.worldMatrix;this.fillVertices(u,a,x,A,b,n.datas);for(var T=0,S=0,E=0,C=A;E<C;++E){S=Math.min(1,g-E);for(var w=0,k=b;w<k;++w){T=Math.min(1,y-w);var O=a+3,R=O+1;f?(u[O]=_[0],u[R]=_[1],u[O+9]=_[0],u[R+9]=_[1]+(_[7]-_[1])*T,u[O+18]=_[0]+(_[6]-_[0])*S,u[R+18]=_[1],u[O+27]=u[O+18],u[R+27]=u[R+9]):(u[O]=_[0],u[R]=_[1],u[O+9]=_[0]+(_[6]-_[0])*T,u[R+9]=_[1],u[O+18]=_[0],u[R+18]=_[1]+(_[7]-_[1])*S,u[O+27]=u[O+9],u[R+27]=u[R+18]),on.toArray(u,e.color,R+1),on.toArray(u,e.color,R+9+1),on.toArray(u,e.color,R+18+1),on.toArray(u,e.color,R+27+1),a+=36}}for(var F=0;F<c;F+=6)h[o++]=s,h[o++]=s+1,h[o++]=s+2,h[o++]=s+1,h[o++]=s+3,h[o++]=s+2,s+=4},fillVertices:function(e,t,i,n,r,o){for(var a=0,s=0,l=0,c=0,u=0,h=n;u<h;++u){l=o[u].y,c=o[u+1].y;for(var p=0,f=r;p<f;++p){a=o[p].x,s=o[p+1].x,Mi.set(SZ[0],a,l,0),Mi.set(SZ[1],s,l,0),Mi.set(SZ[2],a,c,0),Mi.set(SZ[3],s,c,0);for(var _=0;_<4;_++){var d=SZ[_];Mi.transformMat4(d,d,i);var m=9*_;e[t+m]=d.x,e[t+m+1]=d.y,e[t+m+2]=d.z}t+=36}}}},UZ=Uw.Type,XZ=Uw.FillType,VZ={getAssembler:function(e){var t=AZ,i=e;switch(i.type){case UZ.SLICED:t=TZ;break;case UZ.TILED:t=GZ;break;case UZ.FILLED:t=i.fillType===XZ.RADIAL?vZ:rZ}return t}};Uw.Assembler=VZ,cc.UI={MeshBuffer:Jw,UIVertexFormat:ok,barFilled:rZ,radialFilled:vZ,simple:AZ,sliced:TZ,ttf:QQ,bmfont:Iq,letter:AQ,mask:JQ,maskEnd:$Q,graphics:JY,spriteAssembler:VZ,graphicsAssembler:$Y,labelAssembler:ZQ};var HZ,jZ,WZ,YZ,qZ,QZ,ZZ,KZ,JZ,$Z,eK,tK,iK,nK,rK,oK,aK,sK,lK,cK,uK,hK,pK,fK,_K,dK,mK,vK,yK,gK,AK,bK,xK=(CZ=qa("cc.BillboardComponent"),wZ=as("i18n:cc.BillboardComponent"),kZ=es("Components/Billboard"),OZ=Qa({type:Tc}),RZ=Qa({type:Tc,tooltip:"billboard显示的贴图"}),FZ=Qa({tooltip:"billboard的高度"}),IZ=Qa({tooltip:"billboard的宽度"}),MZ=Qa({tooltip:"billboard绕中心点旋转的角度"}),CZ(PZ=wZ(PZ=kZ(PZ=Ja((BZ=de((DZ=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_texture",BZ,ne(e)),_e(e,"_height",NZ,ne(e)),_e(e,"_width",LZ,ne(e)),_e(e,"_rotation",zZ,ne(e)),e._model=null,e._mesh=null,e._material=null,e._uniform=new Ni(1,1,0,0),e}return ee(t,sp),J(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._material&&this._material.setProperty("mainTexture",e)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._material&&(this._uniform.y=e,this._material.setProperty("cc_size_rotation",this._uniform))}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._material&&(this._uniform.x=e,this._material.setProperty("cc_size_rotation",this._uniform))}},{key:"rotation",get:function(){return Math.round(100*mi(this._rotation))/100},set:function(e){this._rotation=di(e),this._material&&(this._uniform.z=this._rotation,this._material.setProperty("cc_size_rotation",this._uniform))}}]),J(t,[{key:"onLoad",value:function(){this.createModel()}},{key:"onEnable",value:function(){this.attachToScene(),this._model.enabled=!0,this.width=this._width,this.height=this._height,this.rotation=this.rotation,this.texture=this.texture}},{key:"onDisable",value:function(){this.detachFromScene()}},{key:"attachToScene",value:function(){this._model&&this.node&&this.node.scene&&(this._model.scene&&this.detachFromScene(),this._getRenderScene().addModel(this._model))}},{key:"detachFromScene",value:function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)}},{key:"createModel",value:function(){this._mesh=SE({primitiveMode:exports.GFXPrimitiveMode.TRIANGLE_LIST,positions:[0,0,0,0,0,0,0,0,0,0,0,0],uvs:[0,0,1,0,0,1,1,1],colors:[on.WHITE.r,on.WHITE.g,on.WHITE.b,on.WHITE.a,on.WHITE.r,on.WHITE.g,on.WHITE.b,on.WHITE.a,on.WHITE.r,on.WHITE.g,on.WHITE.b,on.WHITE.a,on.WHITE.r,on.WHITE.g,on.WHITE.b,on.WHITE.a],attributes:[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RG32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8UI,isNormalized:!0}],indices:[0,1,2,1,2,3]},void 0,{calculateBounds:!1}),this._model=cc.director.root.createModel(lh,this.node),this._model.initialize(this.node),null==this._material&&(this._material=new Xh,this._material.copy(Nu.get("default-billboard-material"))),this._model.initSubModel(0,this._mesh.renderingSubMeshes[0],this._material)}}]),t}()).prototype,"_texture",[OZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(DZ.prototype,"texture",[RZ],Object.getOwnPropertyDescriptor(DZ.prototype,"texture"),DZ.prototype),NZ=de(DZ.prototype,"_height",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de(DZ.prototype,"height",[FZ],Object.getOwnPropertyDescriptor(DZ.prototype,"height"),DZ.prototype),LZ=de(DZ.prototype,"_width",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de(DZ.prototype,"width",[IZ],Object.getOwnPropertyDescriptor(DZ.prototype,"width"),DZ.prototype),zZ=de(DZ.prototype,"_rotation",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de(DZ.prototype,"rotation",[MZ],Object.getOwnPropertyDescriptor(DZ.prototype,"rotation"),DZ.prototype),PZ=DZ))||PZ)||PZ)||PZ)||PZ),TK=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGBA32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD1,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8,isNormalized:!0}],SK=new Mi,EK=new Mi,CK=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._capacity=void 0,e._vertSize=0,e._vBuffer=null,e._vertAttrsFloatCount=0,e._vdataF32=null,e._vdataUint32=null,e._iaInfo=void 0,e._iaInfoBuffer=void 0,e._subMeshData=null,e._vertCount=0,e._indexCount=0,e.type=nh.LINE,e._capacity=100,e._iaInfo={drawInfos:[{vertexCount:0,firstVertex:0,indexCount:0,firstIndex:0,vertexOffset:0,instanceCount:0,firstInstance:0}]},e._iaInfoBuffer=e._device.createBuffer({usage:exports.GFXBufferUsageBit.INDIRECT,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:56,stride:1}),e}return ee(t,lh),J(t,[{key:"setCapacity",value:function(e){this._capacity=e,this.createBuffer()}},{key:"createBuffer",value:function(){this._vertSize=0;for(var e,t=fe(TK);!(e=t()).done;){var i=e.value;i.offset=this._vertSize,this._vertSize+=yr[i.format].size}this._vertAttrsFloatCount=this._vertSize/4,this._vBuffer=this._createSubMeshData(),this._vdataF32=new Float32Array(this._vBuffer),this._vdataUint32=new Uint32Array(this._vBuffer)}},{key:"_createSubMeshData",value:function(){this._subMeshData&&this.destroySubMeshData(),this._vertCount=2,this._indexCount=6;var e=this._device.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:this._vertSize*this._capacity*this._vertCount,stride:this._vertSize}),t=new ArrayBuffer(this._vertSize*this._capacity*this._vertCount);e.update(t);for(var i=new Uint16Array((this._capacity-1)*this._indexCount),n=0,r=0;r<this._capacity-1;++r){var o=2*r;i[n++]=o,i[n++]=o+1,i[n++]=o+2,i[n++]=o+3,i[n++]=o+2,i[n++]=o+1}var a=this._device.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:(this._capacity-1)*this._indexCount*Uint16Array.BYTES_PER_ELEMENT,stride:Uint16Array.BYTES_PER_ELEMENT});return a.update(i),this._iaInfo.drawInfos[0].vertexCount=this._capacity*this._vertCount,this._iaInfo.drawInfos[0].indexCount=(this._capacity-1)*this._indexCount,this._iaInfoBuffer.update(this._iaInfo),this._subMeshData=new ou([e],TK,exports.GFXPrimitiveMode.TRIANGLE_LIST),this._subMeshData.indexBuffer=a,this._subMeshData.indirectBuffer=this._iaInfoBuffer,this.setSubModelMesh(0,this._subMeshData),t}},{key:"addLineVertexData",value:function(e,t,i){if(e.length>1){var n=0;Mi.subtract(SK,e[1],e[0]),this._vdataF32[n++]=e[0].x,this._vdataF32[n++]=e[0].y,this._vdataF32[n++]=e[0].z,this._vdataF32[n++]=0,this._vdataF32[n++]=t.evaluate(0,1),this._vdataF32[n++]=0,this._vdataF32[n++]=0,this._vdataF32[n++]=SK.x,this._vdataF32[n++]=SK.y,this._vdataF32[n++]=SK.z,this._vdataUint32[n++]=i.evaluate(0,1)._val,this._vdataF32[n++]=e[0].x,this._vdataF32[n++]=e[0].y,this._vdataF32[n++]=e[0].z,this._vdataF32[n++]=1,this._vdataF32[n++]=t.evaluate(0,1),this._vdataF32[n++]=0,this._vdataF32[n++]=1,this._vdataF32[n++]=SK.x,this._vdataF32[n++]=SK.y,this._vdataF32[n++]=SK.z,this._vdataUint32[n++]=i.evaluate(0,1)._val;for(var r=1;r<e.length-1;r++){Mi.subtract(SK,e[r-1],e[r]),Mi.subtract(EK,e[r+1],e[r]),Mi.subtract(EK,EK,SK);var o=r/e.length;this._vdataF32[n++]=e[r].x,this._vdataF32[n++]=e[r].y,this._vdataF32[n++]=e[r].z,this._vdataF32[n++]=0,this._vdataF32[n++]=t.evaluate(o,1),this._vdataF32[n++]=o,this._vdataF32[n++]=0,this._vdataF32[n++]=EK.x,this._vdataF32[n++]=EK.y,this._vdataF32[n++]=EK.z,this._vdataUint32[n++]=i.evaluate(o,1)._val,this._vdataF32[n++]=e[r].x,this._vdataF32[n++]=e[r].y,this._vdataF32[n++]=e[r].z,this._vdataF32[n++]=1,this._vdataF32[n++]=t.evaluate(o,1),this._vdataF32[n++]=o,this._vdataF32[n++]=1,this._vdataF32[n++]=EK.x,this._vdataF32[n++]=EK.y,this._vdataF32[n++]=EK.z,this._vdataUint32[n++]=i.evaluate(o,1)._val}Mi.subtract(SK,e[e.length-1],e[e.length-2]),this._vdataF32[n++]=e[e.length-1].x,this._vdataF32[n++]=e[e.length-1].y,this._vdataF32[n++]=e[e.length-1].z,this._vdataF32[n++]=0,this._vdataF32[n++]=t.evaluate(1,1),this._vdataF32[n++]=1,this._vdataF32[n++]=0,this._vdataF32[n++]=SK.x,this._vdataF32[n++]=SK.y,this._vdataF32[n++]=SK.z,this._vdataUint32[n++]=i.evaluate(1,1)._val,this._vdataF32[n++]=e[e.length-1].x,this._vdataF32[n++]=e[e.length-1].y,this._vdataF32[n++]=e[e.length-1].z,this._vdataF32[n++]=1,this._vdataF32[n++]=t.evaluate(1,1),this._vdataF32[n++]=1,this._vdataF32[n++]=1,this._vdataF32[n++]=SK.x,this._vdataF32[n++]=SK.y,this._vdataF32[n++]=SK.z,this._vdataUint32[n++]=i.evaluate(1,1)._val}this.updateIA(Math.max(0,e.length-1))}},{key:"updateIA",value:function(e){var t=this.getSubModel(0).inputAssembler;t.vertexBuffers[0].update(this._vdataF32),t.indexCount=this._indexCount*e,this._iaInfo.drawInfos[0]=t,this._iaInfoBuffer.update(this._iaInfo)}},{key:"destroySubMeshData",value:function(){this._subMeshData&&(this._subMeshData.destroy(),this._subMeshData=null)}}]),t}(),wK=At({Constant:0,Curve:1,TwoCurves:2,TwoConstants:3}),kK=(HZ=qa("cc.CurveRange"),jZ=Qa({type:wK}),WZ=Qa({type:Aa}),YZ=Qa({type:Aa}),qZ=Qa({type:Aa}),HZ((aK=oK=function(){function e(){Z(this,e),_e(this,"mode",KZ,this),_e(this,"curve",JZ,this),_e(this,"curveMin",$Z,this),_e(this,"curveMax",eK,this),_e(this,"constant",tK,this),_e(this,"constantMin",iK,this),_e(this,"constantMax",nK,this),_e(this,"multiplier",rK,this)}return J(e,[{key:"evaluate",value:function(e,t){switch(this.mode){case wK.Constant:return this.constant;case wK.Curve:return this.curve.evaluate(e)*this.multiplier;case wK.TwoCurves:return _i(this.curveMin.evaluate(e),this.curveMax.evaluate(e),t)*this.multiplier;case wK.TwoConstants:return _i(this.constantMin,this.constantMax,t)}}},{key:"getMax",value:function(){switch(this.mode){case wK.Constant:return this.constant;case wK.Curve:return this.multiplier;case wK.TwoConstants:return this.constantMax;case wK.TwoCurves:return this.multiplier}return 0}},{key:"_onBeforeSerialize",value:function(e){return(!1)[this.mode]}}]),e}(),oK.Mode=wK,KZ=de((ZZ=aK).prototype,"mode",[jZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wK.Constant}}),JZ=de(ZZ.prototype,"curve",[WZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Aa}}),$Z=de(ZZ.prototype,"curveMin",[YZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Aa}}),eK=de(ZZ.prototype,"curveMax",[qZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Aa}}),tK=de(ZZ.prototype,"constant",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),iK=de(ZZ.prototype,"constantMin",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nK=de(ZZ.prototype,"constantMax",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rK=de(ZZ.prototype,"multiplier",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),QZ=ZZ))||QZ);function OK(e,t,i){switch(e.mode){case wK.Constant:return e.constant;case wK.Curve:return e.curve.evaluate(t)*e.multiplier;case wK.TwoCurves:return 0===i?e.curveMin.evaluate(t)*e.multiplier:e.curveMax.evaluate(t)*e.multiplier;case wK.TwoConstants:return 0===i?e.constantMin:e.constantMax;default:return 0}}function RK(e){switch(e.mode){case wK.TwoConstants:case wK.TwoCurves:return 2;default:return 1}}function FK(e,t,i){var n=new Vl({width:t,height:i,_data:e,_compressed:!1,format:Fl.RGBA32F}),r=new Tc;return r.setFilters(Ml.NEAREST,Ml.NEAREST),r.setMipFilter(Ml.NONE),r.setWrapMode(Il.CLAMP_TO_EDGE,Il.CLAMP_TO_EDGE,Il.CLAMP_TO_EDGE),r.image=n,r}function IK(e,t,i,n,r){for(var o=Math.max(RK(t),RK(i),RK(n)),a=new Float32Array(e*o*4),s=[t,i,n],l=1/(e-1),c=0;c<o;c++)for(var u=0;u<3;u++)for(var h=s[u],p=0,f=0,_=0;_<e;_++){var d=OK(h,l*_,c);f=r?d:(p+=d)/(_+1),a[4*_+u]=f}return FK(a,e,o)}var MK,PK,DK,BK,NK,LK,zK,GK,UK,XK,VK,HK,jK,WK,YK,qK,QK,ZK,KK,JK,$K,eJ,tJ,iJ,nJ,rJ,oJ,aJ,sJ,lJ,cJ,uJ,hJ,pJ,fJ,_J,dJ,mJ,vJ,yJ,gJ=At({Blend:0,Fixed:1}),AJ=(qa("cc.ColorKey")((cK=de((lK=function e(){Z(this,e),_e(this,"color",cK,this),_e(this,"time",uK,this)}).prototype,"color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),uK=de(lK.prototype,"time",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sK=lK)),qa("cc.AlphaKey")((fK=de((pK=function e(){Z(this,e),_e(this,"alpha",fK,this),_e(this,"time",_K,this)}).prototype,"alpha",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_K=de(pK.prototype,"time",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hK=pK)),qa("cc.Gradient")((bK=AK=function(){function e(){Z(this,e),_e(this,"colorKeys",vK,this),_e(this,"alphaKeys",yK,this),_e(this,"mode",gK,this),this._color=void 0,this._color=on.WHITE.clone()}return J(e,[{key:"setKeys",value:function(e,t){this.colorKeys=e,this.alphaKeys=t}},{key:"sortKeys",value:function(){this.colorKeys.length>1&&this.colorKeys.sort((function(e,t){return e.time-t.time})),this.alphaKeys.length>1&&this.alphaKeys.sort((function(e,t){return e.time-t.time}))}},{key:"evaluate",value:function(e){return this.getRGB(e),this._color._set_a_unsafe(this.getAlpha(e)),this._color}},{key:"randomColor",value:function(){var e=this.colorKeys[Math.trunc(Math.random()*this.colorKeys.length)],t=this.alphaKeys[Math.trunc(Math.random()*this.alphaKeys.length)];return this._color.set(e.color),this._color._set_a_unsafe(t.alpha),this._color}},{key:"getRGB",value:function(e){if(!(this.colorKeys.length>1))return 1===this.colorKeys.length?(this._color.set(this.colorKeys[0].color),this._color):(this._color.set(on.WHITE),this._color);e=Si(e,1);for(var t=1;t<this.colorKeys.length;++t){var i=this.colorKeys[t-1].time,n=this.colorKeys[t].time;if(e>=i&&e<n){if(this.mode===gJ.Fixed)return this.colorKeys[t].color;var r=(e-i)/(n-i);return on.lerp(this._color,this.colorKeys[t-1].color,this.colorKeys[t].color,r),this._color}}var o=this.colorKeys.length-1;e<this.colorKeys[0].time?on.lerp(this._color,on.BLACK,this.colorKeys[0].color,e/this.colorKeys[0].time):e>this.colorKeys[o].time&&on.lerp(this._color,this.colorKeys[o].color,on.BLACK,(e-this.colorKeys[o].time)/(1-this.colorKeys[o].time))}},{key:"getAlpha",value:function(e){if(!(this.alphaKeys.length>1))return 1===this.alphaKeys.length?this.alphaKeys[0].alpha:255;e=Si(e,1);for(var t=1;t<this.alphaKeys.length;++t){var i=this.alphaKeys[t-1].time,n=this.alphaKeys[t].time;if(e>=i&&e<n){if(this.mode===gJ.Fixed)return this.alphaKeys[t].alpha;var r=(e-i)/(n-i);return _i(this.alphaKeys[t-1].alpha,this.alphaKeys[t].alpha,r)}}var o=this.alphaKeys.length-1;return e<this.alphaKeys[0].time?_i(255,this.alphaKeys[0].alpha,e/this.alphaKeys[0].time):e>this.alphaKeys[o].time?_i(this.alphaKeys[o].alpha,255,(e-this.alphaKeys[o].time)/(1-this.alphaKeys[o].time)):void 0}}]),e}(),AK.Mode=gJ,vK=de((mK=bK).prototype,"colorKeys",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),yK=de(mK.prototype,"alphaKeys",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),gK=de(mK.prototype,"mode",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return gJ.Blend}}),dK=mK))||dK),bJ=At({Color:0,Gradient:1,TwoColors:2,TwoGradients:3,RandomColor:4}),xJ=(MK=qa("cc.GradientRange"),PK=Qa({type:bJ}),DK=Qa({type:AJ}),BK=Qa({type:AJ}),NK=Qa({type:AJ}),LK=Qa({type:bJ}),MK((QK=qK=function(){function e(){Z(this,e),_e(this,"color",UK,this),_e(this,"colorMin",XK,this),_e(this,"colorMax",VK,this),_e(this,"gradient",HK,this),_e(this,"gradientMin",jK,this),_e(this,"gradientMax",WK,this),_e(this,"_mode",YK,this),this._color=on.WHITE.clone()}return J(e,[{key:"evaluate",value:function(e,t){switch(this._mode){case bJ.Color:return this.color;case bJ.TwoColors:return on.lerp(this._color,this.colorMin,this.colorMax,t),this._color;case bJ.RandomColor:return this.gradient.randomColor();case bJ.Gradient:return this.gradient.evaluate(e);case bJ.TwoGradients:return on.lerp(this._color,this.gradientMin.evaluate(e),this.gradientMax.evaluate(e),t),this._color;default:return this.color}}},{key:"_onBeforeSerialize",value:function(e){return(!1)[this._mode]}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e}}]),e}(),qK.Mode=bJ,de((GK=QK).prototype,"mode",[PK],Object.getOwnPropertyDescriptor(GK.prototype,"mode"),GK.prototype),UK=de(GK.prototype,"color",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),XK=de(GK.prototype,"colorMin",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),VK=de(GK.prototype,"colorMax",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return on.WHITE.clone()}}),HK=de(GK.prototype,"gradient",[DK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new AJ}}),jK=de(GK.prototype,"gradientMin",[BK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new AJ}}),WK=de(GK.prototype,"gradientMax",[NK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new AJ}}),YK=de(GK.prototype,"_mode",[LK],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bJ.Color}}),zK=GK))||zK);function TJ(e,t,i){switch(e.mode){case bJ.Color:return e.color;case bJ.TwoColors:return 0===i?e.colorMin:e.colorMax;case bJ.RandomColor:return e.gradient.randomColor();case bJ.Gradient:return e.gradient.evaluate(t);case bJ.TwoGradients:return 0===i?e.gradientMin.evaluate(t):e.gradientMax.evaluate(t);default:return e.color}}function SJ(e,t){for(var i=function(e){switch(e.mode){case bJ.TwoColors:case bJ.TwoGradients:return 2;default:return 1}}(t),n=new Uint8Array(e*i*4),r=1/(e-1),o=0,a=0;a<i;a++)for(var s=0;s<e;s++){var l=TJ(t,r*s,a);n[o]=l.r,n[o+1]=l.g,n[o+2]=l.b,n[o+3]=l.a,o+=4}var c=new Tc;return c.create(e,i,Fl.RGBA8888),c.setFilters(Ml.LINEAR,Ml.LINEAR),c.setWrapMode(Il.CLAMP_TO_EDGE,Il.CLAMP_TO_EDGE),c.uploadData(n),c}var EJ,CJ,wJ,kJ,OJ,RJ,FJ,IJ,MJ,PJ,DJ,BJ,NJ,LJ,zJ,GJ,UJ,XJ,VJ,HJ,jJ={CC_USE_WORLD_SPACE:!1},WJ=(ZK=qa("cc.LineComponent"),KK=as("i18n:cc.LineComponent"),JK=es("Components/Line"),$K=Qa({type:Tc}),eJ=Qa({type:Tc,displayOrder:0,tooltip:"线段中显示的贴图"}),tJ=Qa({displayOrder:1,tooltip:"线段中各个点的坐标采用哪个坐标系，勾选使用世界坐标系，不选使用本地坐标系"}),iJ=Qa({type:[Mi]}),nJ=Qa({type:[Mi],displayOrder:2,tooltip:"每个线段端点的坐标"}),rJ=Qa({type:kK}),oJ=Qa({type:kK,displayOrder:3,tooltip:"线段宽度，如果采用曲线，则表示沿着线段方向上的曲线变化"}),aJ=Qa({type:Oi,displayOrder:4,tooltip:"贴图平铺次数"}),sJ=Qa({type:Oi,displayOrder:5,tooltip:"贴图坐标的偏移"}),lJ=Qa({type:xJ}),cJ=Qa({type:xJ,displayOrder:6,tooltip:"线段颜色，如果采用渐变色，则表示沿着线段方向上的颜色渐变"}),ZK(uJ=KK(uJ=JK(uJ=Ja((pJ=de((hJ=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_texture",pJ,ne(e)),e._material=null,_e(e,"_worldSpace",fJ,ne(e)),_e(e,"_positions",_J,ne(e)),_e(e,"_width",dJ,ne(e)),_e(e,"_tile",mJ,ne(e)),_e(e,"_offset",vJ,ne(e)),_e(e,"_color",yJ,ne(e)),e._model=null,e._tile_offset=new Ni,e}return ee(t,sp),J(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._material&&this._material.setProperty("mainTexture",e)}},{key:"worldSpace",get:function(){return this._worldSpace},set:function(e){this._worldSpace=e,this._material&&(jJ.CC_USE_WORLD_SPACE=this.worldSpace,this._material.recompileShaders(jJ),this._model&&this._model.setSubModelMaterial(0,this._material))}},{key:"positions",get:function(){return this._positions},set:function(e){this._positions=e,this._model&&this._model.addLineVertexData(this._positions,this._width,this._color)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._model&&this._model.addLineVertexData(this._positions,this._width,this._color)}},{key:"tile",get:function(){return this._tile},set:function(e){this._tile.set(e),this._material&&(this._tile_offset.x=this._tile.x,this._tile_offset.y=this._tile.y,this._material.setProperty("mainTiling_Offset",this._tile_offset))}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset.set(e),this._material&&(this._tile_offset.z=this._offset.x,this._tile_offset.w=this._offset.y,this._material.setProperty("mainTiling_Offset",this._tile_offset))}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._model&&this._model.addLineVertexData(this._positions,this._width,this._color)}}]),J(t,[{key:"onLoad",value:function(){this._model=cc.director.root.createModel(CK),this._model.initialize(this.node),this._model.setCapacity(100),null==this._material&&(this._material=new Xh,this._material.copy(Nu.get("default-trail-material")),jJ.CC_USE_WORLD_SPACE=this.worldSpace,this._material.recompileShaders(jJ)),this._model.setSubModelMaterial(0,this._material)}},{key:"onEnable",value:function(){this._model&&(this.attachToScene(),this.texture=this.texture,this.tile=this._tile,this.offset=this._offset,this._model.addLineVertexData(this._positions,this._width,this._color))}},{key:"onDisable",value:function(){this._model&&this.detachFromScene()}},{key:"attachToScene",value:function(){this._model&&this.node&&this.node.scene&&(this._model.scene&&this.detachFromScene(),this._getRenderScene().addModel(this._model))}},{key:"detachFromScene",value:function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)}}]),t}()).prototype,"_texture",[$K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(hJ.prototype,"texture",[eJ],Object.getOwnPropertyDescriptor(hJ.prototype,"texture"),hJ.prototype),fJ=de(hJ.prototype,"_worldSpace",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(hJ.prototype,"worldSpace",[tJ],Object.getOwnPropertyDescriptor(hJ.prototype,"worldSpace"),hJ.prototype),_J=de(hJ.prototype,"_positions",[iJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de(hJ.prototype,"positions",[nJ],Object.getOwnPropertyDescriptor(hJ.prototype,"positions"),hJ.prototype),dJ=de(hJ.prototype,"_width",[rJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),de(hJ.prototype,"width",[oJ],Object.getOwnPropertyDescriptor(hJ.prototype,"width"),hJ.prototype),mJ=de(hJ.prototype,"_tile",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(1,1)}}),de(hJ.prototype,"tile",[aJ],Object.getOwnPropertyDescriptor(hJ.prototype,"tile"),hJ.prototype),vJ=de(hJ.prototype,"_offset",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Oi(0,0)}}),de(hJ.prototype,"offset",[sJ],Object.getOwnPropertyDescriptor(hJ.prototype,"offset"),hJ.prototype),yJ=de(hJ.prototype,"_color",[lJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xJ}}),de(hJ.prototype,"color",[cJ],Object.getOwnPropertyDescriptor(hJ.prototype,"color"),hJ.prototype),uJ=hJ))||uJ)||uJ)||uJ)||uJ),YJ=function e(t){Z(this,e),this.particleSystem=void 0,this.position=void 0,this.velocity=void 0,this.animatedVelocity=void 0,this.ultimateVelocity=void 0,this.angularVelocity=void 0,this.axisOfRotation=void 0,this.rotation=void 0,this.startSize=void 0,this.size=void 0,this.startColor=void 0,this.color=void 0,this.randomSeed=void 0,this.remainingLifetime=void 0,this.startLifetime=void 0,this.emitAccumulator0=void 0,this.emitAccumulator1=void 0,this.frameIndex=void 0,this.startRow=void 0,this.particleSystem=t,this.position=new Mi(0,0,0),this.velocity=new Mi(0,0,0),this.animatedVelocity=new Mi(0,0,0),this.ultimateVelocity=new Mi(0,0,0),this.angularVelocity=new Mi(0,0,0),this.axisOfRotation=new Mi(0,0,0),this.rotation=new Mi(0,0,0),this.startSize=new Mi(0,0,0),this.size=new Mi(0,0,0),this.startColor=on.WHITE.clone(),this.color=on.WHITE.clone(),this.randomSeed=0,this.remainingLifetime=0,this.startLifetime=0,this.emitAccumulator0=0,this.emitAccumulator1=0,this.frameIndex=0,this.startRow=0},qJ="colorModule",QJ="forceModule",ZJ="limitModule",KJ="rotationModule",JJ="sizeModule",$J="velocityModule",e$="textureModule",t$=["sizeModule","colorModule","forceModule","velocityModule","limitModule","rotationModule","textureModule"],i$=["_colorOverLifetimeModule","_shapeModule","_sizeOvertimeModule","_velocityOvertimeModule","_forceOvertimeModule","_limitVelocityOvertimeModule","_rotationOvertimeModule","_textureAnimationModule","_trailModule"],n$=function(){function e(){Z(this,e),this.target=null,this.needUpdate=!1,this.needAnimate=!0,this.name=void 0}return J(e,[{key:"bindTarget",value:function(e){this.target=e}},{key:"update",value:function(e,t){}}]),e}(),r$=At({World:0,Local:1,Custom:2}),o$=At({Billboard:0,StrecthedBillboard:1,HorizontalBillboard:2,VerticalBillboard:3,Mesh:4}),a$=At({Box:0,Circle:1,Cone:2,Sphere:3,Hemisphere:4}),s$=At({Base:0,Edge:1,Shell:2,Volume:3}),l$=At({Random:0,Loop:1,PingPong:2}),c$=At({Particles:0}),u$=At({Stretch:0}),h$=23541,p$=39825,f$=90794,_$=212165,d$=125292,m$=197866,v$=156497,y$=984136,g$=91041,A$=(EJ=qa("cc.ColorOvertimeModule"),CJ=Qa({displayOrder:0}),wJ=Qa({type:xJ,displayOrder:1}),EJ((RJ=de((OJ=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_enable",RJ,ne(i)),_e(i,"color",FJ,ne(i)),i.name=qJ,i}return ee(t,n$),J(t,[{key:"animate",value:function(e){e.color.set(e.startColor),e.color.multiply(this.color.evaluate(1-e.remainingLifetime/e.startLifetime,Ai(e.randomSeed+g$)))}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(OJ.prototype,"enable",[CJ],Object.getOwnPropertyDescriptor(OJ.prototype,"enable"),OJ.prototype),FJ=de(OJ.prototype,"color",[wJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xJ}}),kJ=OJ))||kJ),b$=new Mi(0,0,-1);function x$(e,t,i,n){return t!==e?(e===r$.World||Qi.invert(i,i),Qi.getRotation(n,i),!0):(Xi.set(n,0,0,0,1),!1)}function T$(e,t){Oi.set(e,Math.cos(t),Math.sin(t))}function S$(e){var t=yi(-1,1),i=yi(0,2*Math.PI),n=Math.sqrt(1-t*t),r=n*Math.cos(i),o=n*Math.sin(i);Mi.set(e,r,o,t)}function E$(e,t,i){S$(e),Mi.multiplyScalar(e,e,t+(i-t)*vi())}function C$(e,t,i,n){T$(e,n),e.z=0,Mi.multiplyScalar(e,e,t+(i-t)*vi())}function w$(e){for(var t=0;t<e.length;t++){var i=t+gi(0,e.length-t),n=e[i];e[i]=e[t],e[t]=n}}function k$(){var e=yi(-1,1);return 0===e&&e++,H(e)}var O$,R$,F$,I$,M$,P$,D$,B$,N$,L$,z$,G$,U$,X$,V$,H$,j$,W$,Y$,q$,Q$,Z$,K$,J$,$$,e2,t2,i2,n2,r2,o2,a2,s2=_$,l2=new Mi,c2=(IJ=qa("cc.ForceOvertimeModule"),MJ=Qa({displayOrder:0}),PJ=Qa({type:kK,range:[-1,1],displayOrder:2,tooltip:"X 轴方向上的加速度分量"}),DJ=Qa({type:kK,range:[-1,1],displayOrder:3,tooltip:"Y 轴方向上的加速度分量"}),BJ=Qa({type:kK,range:[-1,1],displayOrder:4,tooltip:"Z 轴方向上的加速度分量"}),NJ=Qa({type:r$,displayOrder:1,tooltip:"加速度计算时采用的坐标"}),IJ((GJ=de((zJ=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_enable",GJ,ne(e)),_e(e,"x",UJ,ne(e)),_e(e,"y",XJ,ne(e)),_e(e,"z",VJ,ne(e)),_e(e,"space",HJ,ne(e)),e.randomized=!1,e.rotation=void 0,e.needTransform=void 0,e.name=QJ,e.rotation=new Xi,e.needTransform=!1,e.needUpdate=!0,e}return ee(t,n$),J(t,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}}]),J(t,[{key:"update",value:function(e,t){this.needTransform=x$(e,this.space,t,this.rotation)}},{key:"animate",value:function(e,t){var i=1-e.remainingLifetime/e.startLifetime,n=Mi.set(l2,this.x.evaluate(i,Ai(e.randomSeed+s2)),this.y.evaluate(i,Ai(e.randomSeed+s2)),this.z.evaluate(i,Ai(e.randomSeed+s2)));this.needTransform&&Mi.transformQuat(n,n,this.rotation),Mi.scaleAndAdd(e.velocity,e.velocity,n,t),Mi.copy(e.ultimateVelocity,e.velocity)}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(zJ.prototype,"enable",[MJ],Object.getOwnPropertyDescriptor(zJ.prototype,"enable"),zJ.prototype),UJ=de(zJ.prototype,"x",[PJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),XJ=de(zJ.prototype,"y",[DJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),VJ=de(zJ.prototype,"z",[BJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),HJ=de(zJ.prototype,"space",[NJ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.Local}}),LJ=zJ))||LJ),u2=h$,h2=new Mi,p2=new Mi,f2=(O$=qa("cc.LimitVelocityOvertimeModule"),R$=Qa({displayOrder:0}),F$=Qa({type:kK,range:[-1,1],displayOrder:4,tooltip:"X 轴方向上的速度下限"}),I$=Qa({type:kK,range:[-1,1],displayOrder:5,tooltip:"Y 轴方向上的速度下限"}),M$=Qa({type:kK,range:[-1,1],displayOrder:6,tooltip:"Z 轴方向上的速度下限"}),P$=Qa({type:kK,range:[-1,1],displayOrder:3,tooltip:"速度下限"}),D$=Qa({displayOrder:7,tooltip:"当前速度与速度下限的插值"}),B$=Qa({displayOrder:2,tooltip:"是否三个轴分开限制"}),N$=Qa({type:r$,displayOrder:1,tooltip:"计算速度下限时采用的坐标系"}),O$((G$=de((z$=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_enable",G$,ne(e)),_e(e,"limitX",U$,ne(e)),_e(e,"limitY",X$,ne(e)),_e(e,"limitZ",V$,ne(e)),_e(e,"limit",H$,ne(e)),_e(e,"dampen",j$,ne(e)),_e(e,"separateAxes",W$,ne(e)),_e(e,"space",Y$,ne(e)),e.drag=null,e.multiplyDragByParticleSize=!1,e.multiplyDragByParticleVelocity=!1,e.name=ZJ,e.rotation=void 0,e.needTransform=void 0,e.rotation=new Xi,e.needTransform=!1,e.needUpdate=!0,e}return ee(t,n$),J(t,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}}]),J(t,[{key:"update",value:function(e,t){this.needTransform=x$(e,this.space,t,this.rotation)}},{key:"animate",value:function(e,t){var i=1-e.remainingLifetime/e.startLifetime,n=h2;this.separateAxes?(Mi.set(p2,this.limitX.evaluate(i,Ai(e.randomSeed+u2)),this.limitY.evaluate(i,Ai(e.randomSeed+u2)),this.limitZ.evaluate(i,Ai(e.randomSeed+u2))),this.needTransform&&Mi.transformQuat(p2,p2,this.rotation),Mi.set(n,_2(e.ultimateVelocity.x,p2.x,this.dampen),_2(e.ultimateVelocity.y,p2.y,this.dampen),_2(e.ultimateVelocity.z,p2.z,this.dampen))):(Mi.normalize(n,e.ultimateVelocity),Mi.multiplyScalar(n,n,_2(e.ultimateVelocity.length(),this.limit.evaluate(i,Ai(e.randomSeed+u2)),this.dampen))),Mi.copy(e.ultimateVelocity,n)}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(z$.prototype,"enable",[R$],Object.getOwnPropertyDescriptor(z$.prototype,"enable"),z$.prototype),U$=de(z$.prototype,"limitX",[F$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),X$=de(z$.prototype,"limitY",[I$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),V$=de(z$.prototype,"limitZ",[M$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),H$=de(z$.prototype,"limit",[P$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),j$=de(z$.prototype,"dampen",[D$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),W$=de(z$.prototype,"separateAxes",[B$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y$=de(z$.prototype,"space",[N$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.Local}}),L$=z$))||L$);function _2(e,t,i){var n=Math.sign(e),r=Math.abs(e);return r>t&&(r=_i(r,t,i)),r*n}var d2,m2,v2,y2,g2,A2,b2,x2,T2,S2,E2,C2,w2,k2,O2,R2,F2,I2,M2,P2,D2,B2,N2,L2,z2,G2,U2,X2,V2,H2,j2,W2,Y2,q2,Q2,Z2,K2,J2,$2,e0,t0,i0,n0,r0,o0,a0,s0,l0,c0,u0,h0,p0,f0,_0,d0,m0,v0,y0,g0,A0,b0,x0,T0,S0,E0,C0,w0,k0,O0,R0,F0,I0,M0,P0,D0,B0,N0,L0,z0,G0,U0,X0,V0,H0,j0,W0,Y0,q0,Q0,Z0,K0,J0,$0,e1,t1,i1,n1,r1,o1,a1,s1,l1,c1,u1,h1,p1,f1,_1,d1,m1=d$,v1=(q$=qa("cc.RotationOvertimeModule"),Q$=Qa({displayOrder:0}),Z$=Qa({displayOrder:1,tooltip:"是否三个轴分开设定旋转（暂不支持）"}),K$=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:2,tooltip:"绕 X 轴设定旋转"}),J$=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:3,tooltip:"绕 Y 轴设定旋转"}),$$=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:4,tooltip:"绕 Z 轴设定旋转"}),q$((i2=de((t2=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_enable",i2,ne(i)),_e(i,"_separateAxes",n2,ne(i)),_e(i,"x",r2,ne(i)),_e(i,"y",o2,ne(i)),_e(i,"z",a2,ne(i)),i.name=KJ,i}return ee(t,n$),J(t,[{key:"animate",value:function(e,t){var i=1-e.remainingLifetime/e.startLifetime;if(this._separateAxes){var n=Ai(e.randomSeed+m1);e.rotation.x+=this.x.evaluate(i,n)*t,e.rotation.y+=this.y.evaluate(i,n)*t,e.rotation.z+=this.z.evaluate(i,n)*t}else e.rotation.z+=this.z.evaluate(i,Ai(e.randomSeed+m1))*t}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}},{key:"separateAxes",get:function(){return this._separateAxes},set:function(e){this._separateAxes=e}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(t2.prototype,"enable",[Q$],Object.getOwnPropertyDescriptor(t2.prototype,"enable"),t2.prototype),n2=de(t2.prototype,"_separateAxes",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(t2.prototype,"separateAxes",[Z$],Object.getOwnPropertyDescriptor(t2.prototype,"separateAxes"),t2.prototype),r2=de(t2.prototype,"x",[K$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),o2=de(t2.prototype,"y",[J$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),a2=de(t2.prototype,"z",[$$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),e2=t2))||e2),y1=p$,g1=(d2=qa("cc.SizeOvertimeModule"),m2=Qa({displayOrder:0}),v2=Qa({displayOrder:1,tooltip:"决定是否在每个轴上独立控制粒子大小"}),y2=Qa({type:kK,displayOrder:2,tooltip:"定义一条曲线来决定粒子在其生命周期中的大小变化"}),g2=Qa({type:kK,displayOrder:3,tooltip:"定义一条曲线来决定粒子在其生命周期中 X 轴方向上的大小变化"}),A2=Qa({type:kK,displayOrder:4,tooltip:"定义一条曲线来决定粒子在其生命周期中 Y 轴方向上的大小变化"}),b2=Qa({type:kK,displayOrder:5,tooltip:"定义一条曲线来决定粒子在其生命周期中 Z 轴方向上的大小变化"}),d2((S2=de((T2=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_enable",S2,ne(i)),_e(i,"separateAxes",E2,ne(i)),_e(i,"size",C2,ne(i)),_e(i,"x",w2,ne(i)),_e(i,"y",k2,ne(i)),_e(i,"z",O2,ne(i)),i.name=JJ,i}return ee(t,n$),J(t,[{key:"animate",value:function(e,t){if(this.separateAxes){var i=1-e.remainingLifetime/e.startLifetime,n=Ai(e.randomSeed+y1);e.size.x=e.startSize.x*this.x.evaluate(i,n),e.size.y=e.startSize.y*this.y.evaluate(i,n),e.size.z=e.startSize.z*this.z.evaluate(i,n)}else Mi.multiplyScalar(e.size,e.startSize,this.size.evaluate(1-e.remainingLifetime/e.startLifetime,Ai(e.randomSeed+y1)))}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(T2.prototype,"enable",[m2],Object.getOwnPropertyDescriptor(T2.prototype,"enable"),T2.prototype),E2=de(T2.prototype,"separateAxes",[v2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C2=de(T2.prototype,"size",[y2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),w2=de(T2.prototype,"x",[g2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),k2=de(T2.prototype,"y",[A2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),O2=de(T2.prototype,"z",[b2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),x2=T2))||x2),A1=f$,b1=At({Grid:0}),x1=At({WholeSheet:0,SingleRow:1}),T1=(R2=qa("cc.TextureAnimationModule"),F2=Qa({formerlySerializedAs:"numTilesX"}),I2=Qa({formerlySerializedAs:"numTilesY"}),M2=Qa({displayOrder:0}),P2=Qa({type:b1}),D2=Qa({type:b1,displayOrder:1,tooltip:"设定粒子贴图动画的类型（暂只支持 Grid 模式）"}),B2=Qa({displayOrder:2,tooltip:"X 方向动画帧数"}),N2=Qa({displayOrder:3,tooltip:"Y 方向动画帧数"}),L2=Qa({type:x1,displayOrder:4,tooltip:"动画播放方式"}),z2=Qa({type:kK,displayOrder:7,tooltip:"一个周期内动画播放的帧与时间变化曲线"}),G2=Qa({type:kK,displayOrder:8,tooltip:"从第几帧开始播放，时间为整个粒子系统的生命周期"}),U2=Qa({displayOrder:9,tooltip:"一个生命周期内播放循环的次数"}),X2=Qa({displayOrder:5,tooltip:"随机从动画贴图中选择一行以生成动画。\n此选项仅在动画播放方式为 SingleRow 时生效"}),V2=Qa({displayOrder:6,tooltip:"从动画贴图中选择特定行以生成动画。\n此选项仅在动画播放方式为 SingleRow 时且禁用 randomRow 时可用"}),R2((W2=de((j2=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_enable",W2,ne(i)),_e(i,"_numTilesX",Y2,ne(i)),_e(i,"_numTilesY",q2,ne(i)),_e(i,"_mode",Q2,ne(i)),_e(i,"animation",Z2,ne(i)),_e(i,"frameOverTime",K2,ne(i)),_e(i,"startFrame",J2,ne(i)),_e(i,"cycleCount",$2,ne(i)),_e(i,"_flipU",e0,ne(i)),_e(i,"_flipV",t0,ne(i)),_e(i,"_uvChannelMask",i0,ne(i)),_e(i,"randomRow",n0,ne(i)),_e(i,"rowIndex",r0,ne(i)),i.name=e$,i}return ee(t,n$),J(t,[{key:"init",value:function(e){e.startRow=Math.floor(Math.random()*this.numTilesY)}},{key:"animate",value:function(e,t){var i=1-e.remainingLifetime/e.startLifetime,n=this.startFrame.evaluate(i,Ai(e.randomSeed+A1))/(this.numTilesX*this.numTilesY);if(this.animation===x1.WholeSheet)e.frameIndex=Si(this.cycleCount*(this.frameOverTime.evaluate(i,Ai(e.randomSeed+A1))+n),1);else if(this.animation===x1.SingleRow){var r=1/this.numTilesY;if(this.randomRow){var o=Si(this.cycleCount*(this.frameOverTime.evaluate(i,Ai(e.randomSeed+A1))+n),1),a=e.startRow*r,s=a+r;e.frameIndex=_i(a,s,o)}else{var l=this.rowIndex*r,c=l+r;e.frameIndex=_i(l,c,Si(this.cycleCount*(this.frameOverTime.evaluate(i,Ai(e.randomSeed+A1))+n),1))}}}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&(this.target.updateMaterialParams(),this.target.enableModule(this.name,e,this)))}},{key:"mode",get:function(){return this._mode},set:function(e){e===b1.Grid||console.error("particle texture animation's sprites is not supported!")}},{key:"numTilesX",get:function(){return this._numTilesX},set:function(e){this._numTilesX!==e&&(this._numTilesX=e,this.target.updateMaterialParams())}},{key:"numTilesY",get:function(){return this._numTilesY},set:function(e){this._numTilesY!==e&&(this._numTilesY=e,this.target.updateMaterialParams())}},{key:"flipU",get:function(){return this._flipU},set:function(e){console.error("particle texture animation's flipU is not supported!")}},{key:"flipV",get:function(){return this._flipV},set:function(e){console.error("particle texture animation's flipV is not supported!")}},{key:"uvChannelMask",get:function(){return this._uvChannelMask},set:function(e){console.error("particle texture animation's uvChannelMask is not supported!")}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y2=de(j2.prototype,"_numTilesX",[F2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q2=de(j2.prototype,"_numTilesY",[I2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de(j2.prototype,"enable",[M2],Object.getOwnPropertyDescriptor(j2.prototype,"enable"),j2.prototype),Q2=de(j2.prototype,"_mode",[P2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b1.Grid}}),de(j2.prototype,"mode",[D2],Object.getOwnPropertyDescriptor(j2.prototype,"mode"),j2.prototype),de(j2.prototype,"numTilesX",[B2],Object.getOwnPropertyDescriptor(j2.prototype,"numTilesX"),j2.prototype),de(j2.prototype,"numTilesY",[N2],Object.getOwnPropertyDescriptor(j2.prototype,"numTilesY"),j2.prototype),Z2=de(j2.prototype,"animation",[L2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x1.WholeSheet}}),K2=de(j2.prototype,"frameOverTime",[z2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),J2=de(j2.prototype,"startFrame",[G2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),$2=de(j2.prototype,"cycleCount",[U2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e0=de(j2.prototype,"_flipU",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t0=de(j2.prototype,"_flipV",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i0=de(j2.prototype,"_uvChannelMask",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),n0=de(j2.prototype,"randomRow",[X2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r0=de(j2.prototype,"rowIndex",[V2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H2=j2))||H2),S1=m$,E1=v$,C1=y$,w1=new Mi,k1=(o0=qa("cc.VelocityOvertimeModule"),a0=Qa({displayOrder:0}),s0=Qa({type:kK,range:[-1,1],displayOrder:2,tooltip:"X 轴方向上的速度分量"}),l0=Qa({type:kK,range:[-1,1],displayOrder:3,tooltip:"Y 轴方向上的速度分量"}),c0=Qa({type:kK,range:[-1,1],displayOrder:4,tooltip:"Z 轴方向上的速度分量"}),u0=Qa({type:kK,range:[-1,1],displayOrder:5,tooltip:"速度修正系数（只支持 CPU 粒子）"}),h0=Qa({type:r$,displayOrder:1,tooltip:"速度计算时采用的坐标系"}),o0((_0=de((f0=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_enable",_0,ne(e)),_e(e,"x",d0,ne(e)),_e(e,"y",m0,ne(e)),_e(e,"z",v0,ne(e)),_e(e,"speedModifier",y0,ne(e)),_e(e,"space",g0,ne(e)),e.rotation=void 0,e.needTransform=void 0,e.name=$J,e.rotation=new Xi,e.speedModifier.constant=1,e.needTransform=!1,e.needUpdate=!0,e}return ee(t,n$),J(t,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this.target&&this.target.enableModule(this.name,e,this))}}]),J(t,[{key:"update",value:function(e,t){this.needTransform=x$(e,this.space,t,this.rotation)}},{key:"animate",value:function(e,t){var i=1-e.remainingLifetime/e.startLifetime,n=Mi.set(w1,this.x.evaluate(i,Ai(e.randomSeed^S1)),this.y.evaluate(i,Ai(e.randomSeed^E1)),this.z.evaluate(i,Ai(e.randomSeed^C1)));this.needTransform&&Mi.transformQuat(n,n,this.rotation),Mi.add(e.animatedVelocity,e.animatedVelocity,n),Mi.add(e.ultimateVelocity,e.velocity,e.animatedVelocity),Mi.multiplyScalar(e.ultimateVelocity,e.ultimateVelocity,this.speedModifier.evaluate(1-e.remainingLifetime/e.startLifetime,Ai(e.randomSeed+S1)))}}]),t}()).prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(f0.prototype,"enable",[a0],Object.getOwnPropertyDescriptor(f0.prototype,"enable"),f0.prototype),d0=de(f0.prototype,"x",[s0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),m0=de(f0.prototype,"y",[l0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),v0=de(f0.prototype,"z",[c0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),y0=de(f0.prototype,"speedModifier",[u0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),g0=de(f0.prototype,"space",[h0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.Local}}),p0=f0))||p0),O1=(A0=qa("cc.Burst"),b0=Qa({type:kK}),A0((S0=de((T0=function(){function e(){Z(this,e),_e(this,"_time",S0,this),_e(this,"_repeatCount",E0,this),_e(this,"repeatInterval",C0,this),_e(this,"count",w0,this),this._remainingCount=void 0,this._curTime=void 0,this._remainingCount=0,this._curTime=0}return J(e,[{key:"time",get:function(){return this._time},set:function(e){this._time=e,this._curTime=e}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(e){this._repeatCount=e,this._remainingCount=e}}]),J(e,[{key:"update",value:function(e,t){if(0===this._remainingCount&&(this._remainingCount=this._repeatCount,this._curTime=this._time),this._remainingCount>0){var i=Si(e._time-e.startDelay.evaluate(0,1),e.duration)-t;i=i>0?i:0;var n=Si(e.time-e.startDelay.evaluate(0,1),e.duration);this._curTime>=i&&this._curTime<n&&(e.emit(this.count.evaluate(this._curTime/e.duration,1),t-(n-this._curTime)),this._curTime+=this.repeatInterval,--this._remainingCount)}}},{key:"getMaxCount",value:function(e){return this.count.getMax()*Math.min(Math.ceil(e.duration/this.repeatInterval),this.repeatCount)}}]),e}()).prototype,"_time",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de(T0.prototype,"time",[Qa],Object.getOwnPropertyDescriptor(T0.prototype,"time"),T0.prototype),E0=de(T0.prototype,"_repeatCount",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),de(T0.prototype,"repeatCount",[Qa],Object.getOwnPropertyDescriptor(T0.prototype,"repeatCount"),T0.prototype),C0=de(T0.prototype,"repeatInterval",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w0=de(T0.prototype,"count",[b0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),x0=T0))||x0),R1=new Mi(0,0,0),F1=new Array,I1=new Mi(.5,.5,.5),M1=(k0=qa("cc.ShapeModule"),O0=Qa({displayOrder:13,tooltip:"粒子发射器位置"}),R0=Qa({displayOrder:14,tooltip:"粒子发射器旋转角度"}),F0=Qa({displayOrder:15,tooltip:"粒子发射器缩放比例"}),I0=Qa({displayOrder:6,tooltip:"粒子发射器在一个扇形范围内发射"}),M0=Qa({displayOrder:5,tooltip:"圆锥的轴与母线的夹角\n决定圆锥发射器的开合程度"}),P0=Qa({displayOrder:0}),D0=Qa({type:a$,displayOrder:1,formerlySerializedAs:"shapeType"}),B0=Qa({type:a$,tooltip:"粒子发射器类型"}),N0=Qa({type:s$,displayOrder:2,tooltip:"粒子从发射器哪个部位发射"}),L0=Qa({displayOrder:16,tooltip:"根据粒子的初始方向决定粒子的移动方向"}),z0=Qa({displayOrder:17,tooltip:"粒子生成方向随机设定"}),G0=Qa({displayOrder:18,tooltip:"表示当前发射方向与当前位置到结点中心连线方向的插值"}),U0=Qa({displayOrder:19,tooltip:"粒子生成位置随机设定（设定此值为非 0 会使粒子生成位置超出生成器大小范围）"}),X0=Qa({displayOrder:3,tooltip:"粒子发射器半径"}),V0=Qa({displayOrder:4,tooltip:"粒子发射器发射位置（对 Box 类型的发射器无效）:\n - 0 表示从表面发射；\n - 1 表示从中心发射；\n - 0 ~ 1 之间表示在中心到表面之间发射。"}),H0=Qa({type:l$,displayOrder:7,tooltip:"粒子在扇形范围内的发射方式"}),j0=Qa({displayOrder:9,tooltip:"控制可能产生粒子的弧周围的离散间隔"}),W0=Qa({type:kK,displayOrder:10,tooltip:"粒子沿圆周发射的速度"}),Y0=Qa({displayOrder:11,tooltip:"圆锥顶部截面距离底部的轴长\n决定圆锥发射器的高度"}),q0=Qa({displayOrder:12,tooltip:"粒子发射器发射位置（针对 Box 类型的粒子发射器）"}),k0((de((Z0=function(){function e(){Z(this,e),_e(this,"_enable",K0,this),_e(this,"_shapeType",J0,this),_e(this,"emitFrom",$0,this),_e(this,"alignToDirection",e1,this),_e(this,"randomDirectionAmount",t1,this),_e(this,"sphericalDirectionAmount",i1,this),_e(this,"randomPositionAmount",n1,this),_e(this,"radius",r1,this),_e(this,"radiusThickness",o1,this),_e(this,"arcMode",a1,this),_e(this,"arcSpread",s1,this),_e(this,"arcSpeed",l1,this),_e(this,"length",c1,this),_e(this,"boxThickness",u1,this),_e(this,"_position",h1,this),_e(this,"_rotation",p1,this),_e(this,"_scale",f1,this),_e(this,"_arc",_1,this),_e(this,"_angle",d1,this),this.mat=void 0,this.quat=void 0,this.particleSystem=void 0,this.lastTime=void 0,this.totalAngle=void 0,this.mat=new Qi,this.quat=new Xi,this.particleSystem=null,this.lastTime=0,this.totalAngle=0}return J(e,[{key:"position",get:function(){return this._position},set:function(e){this._position=e,this.constructMat()}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.constructMat()}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e,this.constructMat()}},{key:"arc",get:function(){return mi(this._arc)},set:function(e){this._arc=di(e)}},{key:"angle",get:function(){return Math.round(100*mi(this._angle))/100},set:function(e){this._angle=di(e)}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable=e}},{key:"shapeType",get:function(){return this._shapeType},set:function(e){switch(this._shapeType=e,this._shapeType){case a$.Box:this.emitFrom===s$.Base&&(this.emitFrom=s$.Volume);break;case a$.Cone:this.emitFrom===s$.Edge&&(this.emitFrom=s$.Base);break;case a$.Sphere:case a$.Hemisphere:this.emitFrom!==s$.Base&&this.emitFrom!==s$.Edge||(this.emitFrom=s$.Volume)}}}]),J(e,[{key:"onInit",value:function(e){this.particleSystem=e,this.constructMat(),this.lastTime=this.particleSystem._time}},{key:"emit",value:function(e){switch(this.shapeType){case a$.Box:!function(e,t,i,n){switch(e){case s$.Volume:r=i,o=I1,Mi.set(r,yi(-o.x,o.x),yi(-o.y,o.y),yi(-o.z,o.z));break;case s$.Shell:F1.splice(0,F1.length),F1.push(yi(-.5,.5)),F1.push(yi(-.5,.5)),F1.push(.5*k$()),w$(F1),P1(F1,t),Mi.set(i,F1[0],F1[1],F1[2]);break;case s$.Edge:F1.splice(0,F1.length),F1.push(yi(-.5,.5)),F1.push(.5*k$()),F1.push(.5*k$()),w$(F1),P1(F1,t),Mi.set(i,F1[0],F1[1],F1[2]);break;default:console.warn(e+" is not supported for box emitter.")}var r,o;Mi.copy(n,b$)}(this.emitFrom,this.boxThickness,e.position,e.velocity);break;case a$.Circle:!function(e,t,i,n,r){C$(n,e*(1-t),e,i),Mi.normalize(r,n)}(this.radius,this.radiusThickness,this.generateArcAngle(),e.position,e.velocity);break;case a$.Cone:!function(e,t,i,n,r,o,a,s){switch(e){case s$.Base:C$(a,t*(1-i),t,n),Oi.multiplyScalar(s,a,Math.sin(r)),s.z=-Math.cos(r)*t,Mi.normalize(s,s),a.z=0;break;case s$.Shell:T$(a,n),Oi.multiplyScalar(s,a,Math.sin(r)),s.z=-Math.cos(r),Mi.normalize(s,s),Oi.multiplyScalar(a,a,t),a.z=0;break;case s$.Volume:C$(a,t*(1-i),t,n),Oi.multiplyScalar(s,a,Math.sin(r)),s.z=-Math.cos(r)*t,Mi.normalize(s,s),a.z=0,Mi.add(a,a,Mi.multiplyScalar(R1,s,o*vi()/-s.z));break;default:console.warn(e+" is not supported for cone emitter.")}}(this.emitFrom,this.radius,this.radiusThickness,this.generateArcAngle(),this._angle,this.length,e.position,e.velocity);break;case a$.Sphere:!function(e,t,i,n,r){switch(e){case s$.Volume:E$(n,t*(1-i),t),Mi.normalize(r,n);break;case s$.Shell:S$(n),Mi.multiplyScalar(n,n,t),Mi.normalize(r,n);break;default:console.warn(e+" is not supported for sphere emitter.")}}(this.emitFrom,this.radius,this.radiusThickness,e.position,e.velocity);break;case a$.Hemisphere:!function(e,t,i,n,r){switch(e){case s$.Volume:E$(n,t*(1-i),t),n.z>0&&(n.z*=-1),Mi.normalize(r,n);break;case s$.Shell:S$(n),Mi.multiplyScalar(n,n,t),n.z>0&&(n.z*=-1),Mi.normalize(r,n);break;default:console.warn(e+" is not supported for hemisphere emitter.")}}(this.emitFrom,this.radius,this.radiusThickness,e.position,e.velocity);break;default:console.warn(this.shapeType+" shapeType is not supported by ShapeModule.")}if(this.randomPositionAmount>0&&(e.position.x+=yi(-this.randomPositionAmount,this.randomPositionAmount),e.position.y+=yi(-this.randomPositionAmount,this.randomPositionAmount),e.position.z+=yi(-this.randomPositionAmount,this.randomPositionAmount)),Mi.transformQuat(e.velocity,e.velocity,this.quat),Mi.transformMat4(e.position,e.position,this.mat),this.sphericalDirectionAmount>0){var t=Mi.normalize(R1,e.position);Mi.lerp(e.velocity,e.velocity,t,this.sphericalDirectionAmount)}this.lastTime=this.particleSystem._time}},{key:"constructMat",value:function(){Xi.fromEuler(this.quat,this._rotation.x,this._rotation.y,this._rotation.z),Qi.fromRTS(this.mat,this.quat,this._position,this._scale)}},{key:"generateArcAngle",value:function(){if(this.arcMode===l$.Random)return yi(0,this._arc);var e=this.totalAngle+2*Math.PI*this.arcSpeed.evaluate(this.particleSystem._time,1)*(this.particleSystem._time-this.lastTime);switch(this.totalAngle=e,0!==this.arcSpread&&(e=Math.floor(e/(this._arc*this.arcSpread))*this._arc*this.arcSpread),this.arcMode){case l$.Loop:return Si(e,this._arc);case l$.PingPong:return Ei(e,this._arc)}}}]),e}()).prototype,"position",[O0],Object.getOwnPropertyDescriptor(Z0.prototype,"position"),Z0.prototype),de(Z0.prototype,"rotation",[R0],Object.getOwnPropertyDescriptor(Z0.prototype,"rotation"),Z0.prototype),de(Z0.prototype,"scale",[F0],Object.getOwnPropertyDescriptor(Z0.prototype,"scale"),Z0.prototype),de(Z0.prototype,"arc",[I0],Object.getOwnPropertyDescriptor(Z0.prototype,"arc"),Z0.prototype),de(Z0.prototype,"angle",[M0],Object.getOwnPropertyDescriptor(Z0.prototype,"angle"),Z0.prototype),K0=de(Z0.prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(Z0.prototype,"enable",[P0],Object.getOwnPropertyDescriptor(Z0.prototype,"enable"),Z0.prototype),J0=de(Z0.prototype,"_shapeType",[D0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a$.Cone}}),de(Z0.prototype,"shapeType",[B0],Object.getOwnPropertyDescriptor(Z0.prototype,"shapeType"),Z0.prototype),$0=de(Z0.prototype,"emitFrom",[N0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s$.Volume}}),e1=de(Z0.prototype,"alignToDirection",[L0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t1=de(Z0.prototype,"randomDirectionAmount",[z0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i1=de(Z0.prototype,"sphericalDirectionAmount",[G0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n1=de(Z0.prototype,"randomPositionAmount",[U0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r1=de(Z0.prototype,"radius",[X0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),o1=de(Z0.prototype,"radiusThickness",[V0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),a1=de(Z0.prototype,"arcMode",[H0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l$.Random}}),s1=de(Z0.prototype,"arcSpread",[j0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l1=de(Z0.prototype,"arcSpeed",[W0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),c1=de(Z0.prototype,"length",[Y0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u1=de(Z0.prototype,"boxThickness",[q0],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(0,0,0)}}),h1=de(Z0.prototype,"_position",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(0,0,0)}}),p1=de(Z0.prototype,"_rotation",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(0,0,0)}}),f1=de(Z0.prototype,"_scale",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(1,1,1)}}),_1=de(Z0.prototype,"_arc",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return di(360)}}),d1=de(Z0.prototype,"_angle",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return di(25)}}),Q0=Z0))||Q0);function P1(e,t){t.x>0&&(e[0]+=.5*yi(-t.x,t.x),e[0]=pi(e[0],-.5,.5)),t.y>0&&(e[1]+=.5*yi(-t.y,t.y),e[1]=pi(e[1],-.5,.5)),t.z>0&&(e[2]+=.5*yi(-t.z,t.z),e[2]=pi(e[2],-.5,.5))}var D1,B1,N1,L1,z1,G1,U1,X1,V1,H1,j1,W1,Y1,q1,Q1,Z1,K1,J1,$1,e4,t4=[0,0,1,0,0,1,1,1],i4=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._capacity=void 0,e._vertAttrs=void 0,e._vertSize=void 0,e._vBuffer=void 0,e._vertAttrsFloatCount=void 0,e._vdataF32=void 0,e._vdataUint32=void 0,e._iaInfo=void 0,e._iaInfoBuffer=void 0,e._subMeshData=void 0,e._mesh=void 0,e._vertCount=0,e._indexCount=0,e._startTimeOffset=0,e._lifeTimeOffset=0,e.type=nh.PARTICLE_BATCH,e._capacity=0,e._vertAttrs=null,e._vertSize=0,e._vBuffer=null,e._vertAttrsFloatCount=0,e._vdataF32=null,e._vdataUint32=null,e._iaInfo={drawInfos:[{vertexCount:0,firstVertex:0,indexCount:0,firstIndex:0,vertexOffset:0,instanceCount:0,firstInstance:0}]},e._iaInfoBuffer=e._device.createBuffer({usage:exports.GFXBufferUsageBit.INDIRECT,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:56,stride:1}),e._subMeshData=null,e._mesh=null,e}return ee(t,lh),J(t,[{key:"setCapacity",value:function(e){var t=this._capacity!==e;this._capacity=e,this._inited&&t&&this._recreateBuffer()}},{key:"setVertexAttributes",value:function(e,t){if(this._mesh!==e||this._vertAttrs!==t){this._mesh=e,this._vertAttrs=t,this._vertSize=0;for(var i,n=fe(this._vertAttrs);!(i=n()).done;){var r=i.value;r.offset=this._vertSize,this._vertSize+=yr[r.format].size}this._vertAttrsFloatCount=this._vertSize/4,this._vBuffer=this._createSubMeshData(),this._vdataF32=new Float32Array(this._vBuffer),this._vdataUint32=new Uint32Array(this._vBuffer),this._inited=!0}}},{key:"_createSubMeshData",value:function(){this.destroySubMeshData(),this._vertCount=4,this._indexCount=6,this._mesh&&(this._vertCount=this._mesh.struct.vertexBundles[this._mesh.struct.primitives[0].vertexBundelIndices[0]].view.count,this._indexCount=this._mesh.struct.primitives[0].indexView.count);var e=this._device.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:this._vertSize*this._capacity*this._vertCount,stride:this._vertSize}),t=new ArrayBuffer(this._vertSize*this._capacity*this._vertCount);if(this._mesh){var i=this._vertAttrs.findIndex((function(e){return e.name===exports.GFXAttributeName.ATTR_TEX_COORD3})),n=this._vertAttrs[i++].offset;if(this._mesh.copyAttribute(0,exports.GFXAttributeName.ATTR_POSITION,t,this._vertSize,n),n=this._vertAttrs[i++].offset,this._mesh.copyAttribute(0,exports.GFXAttributeName.ATTR_NORMAL,t,this._vertSize,n),n=this._vertAttrs[this._vertAttrs.findIndex((function(e){return e.name===exports.GFXAttributeName.ATTR_TEX_COORD}))].offset,this._mesh.copyAttribute(0,exports.GFXAttributeName.ATTR_TEX_COORD,t,this._vertSize,n),n=this._vertAttrs[i++].offset,!this._mesh.copyAttribute(0,exports.GFXAttributeName.ATTR_COLOR,t,this._vertSize,n))for(var r=new Uint32Array(t),o=0;o<this._vertCount;++o)r[o*this._vertAttrsFloatCount+n/4]=on.WHITE._val;for(var a=new Float32Array(t),s=1;s<this._capacity;s++)a.copyWithin(s*this._vertSize*this._vertCount/4,0,this._vertSize*this._vertCount/4)}e.update(t);var l=new Uint16Array(this._capacity*this._indexCount);if(this._mesh){this._mesh.copyIndices(0,l);for(var c=1;c<this._capacity;c++)for(var u=0;u<this._indexCount;u++)l[c*this._indexCount+u]=l[u]+c*this._vertCount}else for(var h=0,p=0;p<this._capacity;++p){var f=4*p;l[h++]=f,l[h++]=f+1,l[h++]=f+2,l[h++]=f+3,l[h++]=f+2,l[h++]=f+1}var _=this._device.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:this._capacity*this._indexCount*Uint16Array.BYTES_PER_ELEMENT,stride:Uint16Array.BYTES_PER_ELEMENT});return _.update(l),this._iaInfo.drawInfos[0].vertexCount=this._capacity*this._vertCount,this._iaInfo.drawInfos[0].indexCount=this._capacity*this._indexCount,this._iaInfoBuffer.status===exports.GFXStatus.UNREADY&&this._iaInfoBuffer.initialize({usage:exports.GFXBufferUsageBit.INDIRECT,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:56,stride:1}),this._iaInfoBuffer.update(this._iaInfo),this._subMeshData=new ou([e],this._vertAttrs,exports.GFXPrimitiveMode.TRIANGLE_LIST),this._subMeshData.indexBuffer=_,this._subMeshData.indirectBuffer=this._iaInfoBuffer,this.setSubModelMesh(0,this._subMeshData),t}},{key:"setSubModelMaterial",value:function(e,i){this.initLocalBindings(i),ae(te(t.prototype),"setSubModelMaterial",this).call(this,e,i)}},{key:"addParticleVertexData",value:function(e,t){if(this._mesh)for(var i=0;i<this._vertCount;i++){var n=(e*this._vertCount+i)*this._vertAttrsFloatCount;this._vdataF32[n++]=t[0].x,this._vdataF32[n++]=t[0].y,this._vdataF32[n++]=t[0].z,n+=2,this._vdataF32[n++]=t[1].z,this._vdataF32[n++]=t[2].x,this._vdataF32[n++]=t[2].y,this._vdataF32[n++]=t[2].z,this._vdataF32[n++]=t[3].x,this._vdataF32[n++]=t[3].y,this._vdataF32[n++]=t[3].z,this._vdataUint32[n++]=t[4]}else{var r=e*this._vertAttrsFloatCount;this._vdataF32[r++]=t[0].x,this._vdataF32[r++]=t[0].y,this._vdataF32[r++]=t[0].z,this._vdataF32[r++]=t[1].x,this._vdataF32[r++]=t[1].y,this._vdataF32[r++]=t[1].z,this._vdataF32[r++]=t[2].x,this._vdataF32[r++]=t[2].y,this._vdataF32[r++]=t[2].z,this._vdataF32[r++]=t[3].x,this._vdataF32[r++]=t[3].y,this._vdataF32[r++]=t[3].z,this._vdataUint32[r++]=t[4],t[5]&&(this._vdataF32[r++]=t[5].x,this._vdataF32[r++]=t[5].y,this._vdataF32[r++]=t[5].z)}}},{key:"addGPUParticleVertexData",value:function(e,t,i){for(var n=t*this._vertAttrsFloatCount*this._vertCount,r=0;r<this._vertCount;r++){var o=n;this._vdataF32[o++]=e.position.x,this._vdataF32[o++]=e.position.y,this._vdataF32[o++]=e.position.z,this._vdataF32[o++]=i,this._vdataF32[o++]=e.startSize.x,this._vdataF32[o++]=e.startSize.y,this._vdataF32[o++]=e.startSize.z,this._vdataF32[o++]=t4[2*r],this._vdataF32[o++]=e.rotation.x,this._vdataF32[o++]=e.rotation.y,this._vdataF32[o++]=e.rotation.z,this._vdataF32[o++]=t4[2*r+1],this._vdataF32[o++]=e.startColor.r/255,this._vdataF32[o++]=e.startColor.g/255,this._vdataF32[o++]=e.startColor.b/255,this._vdataF32[o++]=e.startColor.a/255,this._vdataF32[o++]=e.velocity.x,this._vdataF32[o++]=e.velocity.y,this._vdataF32[o++]=e.velocity.z,this._vdataF32[o++]=e.startLifetime,this._vdataF32[o++]=e.randomSeed,n+=this._vertAttrsFloatCount}}},{key:"updateGPUParticles",value:function(e,t,i){for(var n=this._vertAttrsFloatCount*this._vertCount,r=0,o=0,a=0,s=0;s<e;++s)r=s*n,o=this._vdataF32[r+this._startTimeOffset],this._vdataF32[r+this._lifeTimeOffset]-(t-o)<i&&(a=--e*n,this._vdataF32.copyWithin(r,a,a+n),s--);return e}},{key:"constructAttributeIndex",value:function(){if(this._vertAttrs){var e=this._vertAttrs.findIndex((function(e){return"a_position_starttime"===e.name})),t=this._vertAttrs[e].offset;this._startTimeOffset=t/4+3,e=this._vertAttrs.findIndex((function(e){return"a_dir_life"===e.name})),t=this._vertAttrs[e].offset,this._lifeTimeOffset=t/4+3}}},{key:"updateIA",value:function(e){var t=this.getSubModel(0).inputAssembler;t.vertexBuffers[0].update(this._vdataF32),t.indexCount=this._indexCount*e,this._iaInfo.drawInfos[0]=t,this._iaInfoBuffer.update(this._iaInfo)}},{key:"clear",value:function(){this.getSubModel(0).inputAssembler.indexCount=0}},{key:"destroy",value:function(){ae(te(t.prototype),"destroy",this).call(this),this._vBuffer=null,this._vdataF32=null,this.destroySubMeshData(),this._iaInfoBuffer.destroy()}},{key:"_recreateBuffer",value:function(){this._vBuffer=this._createSubMeshData(),this.getSubModel(0).updateCommandBuffer(),this._vdataF32=new Float32Array(this._vBuffer),this._vdataUint32=new Uint32Array(this._vBuffer)}},{key:"destroySubMeshData",value:function(){this._subMeshData&&(this._subMeshData.destroy(),this._subMeshData=null)}}]),t}(),n4=function(){function e(t){Z(this,e),this._particleSystem=null,this._model=null,this._renderInfo=null,this._vertAttrs=[],this._renderInfo=t}return J(e,[{key:"onInit",value:function(e){this._particleSystem=e}},{key:"onEnable",value:function(){this._particleSystem&&(this.attachToScene(),this._model.initialize(this._particleSystem.node),this._model.enabled=this._particleSystem.enabledInHierarchy)}},{key:"onDisable",value:function(){this.detachFromScene()}},{key:"onDestroy",value:function(){this._model&&(cc.director.root.destroyModel(this._model),this._model=null)}},{key:"attachToScene",value:function(){this._model&&(this._model.scene&&this.detachFromScene(),this._particleSystem._getRenderScene().addModel(this._model))}},{key:"detachFromScene",value:function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)}},{key:"setVertexAttributes",value:function(){this._model&&this._model.setVertexAttributes(this._renderInfo.renderMode===o$.Mesh?this._renderInfo.mesh:null,this._vertAttrs)}},{key:"_updateModel",value:function(){this._model||(this._model=cc.director.root.createModel(i4),this._model.setCapacity(this._particleSystem.capacity),this._model.visFlags=this._particleSystem.visibility),this._model.setVertexAttributes(this._renderInfo.renderMode===o$.Mesh?this._renderInfo.mesh:null,this._vertAttrs)}},{key:"updateTrailMaterial",value:function(){}},{key:"getDefaultTrailMaterial",value:function(){return null}}]),e}(),r4=new Mi,o4=new Qi,a4=["_colorOverLifetimeModule","_sizeOvertimeModule","_velocityOvertimeModule","_forceOvertimeModule","_limitVelocityOvertimeModule","_rotationOvertimeModule","_textureAnimationModule"],s4=[0,0,1,0,0,1,1,1],l4=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD1,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD2,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8,isNormalized:!0}],c4=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD1,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD2,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8,isNormalized:!0},{name:exports.GFXAttributeName.ATTR_COLOR1,format:exports.GFXFormat.RGB32F}],u4=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD1,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD2,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8,isNormalized:!0},{name:exports.GFXAttributeName.ATTR_TEX_COORD3,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_NORMAL,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR1,format:exports.GFXFormat.RGBA8,isNormalized:!0}],h4={parent:null,owner:null,subModelIdx:0},p4=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e)))._defines=void 0,i._trailDefines=void 0,i._frameTile_velLenScale=void 0,i._defaultMat=null,i._node_scale=void 0,i._attrs=void 0,i._particles=null,i._defaultTrailMat=null,i._updateList=new Map,i._animateList=new Map,i._runAnimateList=new Array,i._fillDataFunc=null,i._uScaleHandle=0,i._uLenHandle=0,i._model=null,i._frameTile_velLenScale=new Ni(1,1,0,0),i._node_scale=new Ni,i._attrs=new Array(5),i._defines={CC_USE_WORLD_SPACE:!0,CC_USE_BILLBOARD:!0,CC_USE_STRETCHED_BILLBOARD:!1,CC_USE_HORIZONTAL_BILLBOARD:!1,CC_USE_VERTICAL_BILLBOARD:!1},i._trailDefines={CC_USE_WORLD_SPACE:!0},i}return ee(t,n4),J(t,[{key:"onInit",value:function(e){var i=this;ae(te(t.prototype),"onInit",this).call(this,e),this._particles=new Ta((function(){return new YJ(i)}),16),this._setVertexAttrib(),this._updateModel(),this._setFillFunc(),this._initModuleList(),this.updateMaterialParams(),this.updateTrailMaterial()}},{key:"clear",value:function(){this._particles.reset(),this._particleSystem._trailModule&&this._particleSystem._trailModule.clear(),this.updateRenderData()}},{key:"updateRenderMode",value:function(){this._setVertexAttrib(),this._updateModel(),this._setFillFunc(),this.updateMaterialParams()}},{key:"getFreeParticle",value:function(){return this._particles.length>=this._particleSystem.capacity?null:this._particles.add()}},{key:"getDefaultTrailMaterial",value:function(){return this._defaultTrailMat}},{key:"setNewParticle",value:function(e){}},{key:"_initModuleList",value:function(){var e=this;a4.forEach((function(t){var i=e._particleSystem[t];i&&i.enable&&(i.needUpdate&&(e._updateList[i.name]=i),i.needAnimate&&(e._animateList[i.name]=i))})),this._runAnimateList.length=0;for(var t=0,i=t$.length;t<i;t++){var n=this._animateList[t$[t]];n&&this._runAnimateList.push(n)}}},{key:"enableModule",value:function(e,t,i){t?(i.needUpdate&&(this._updateList[i.name]=i),i.needAnimate&&(this._animateList[i.name]=i)):(delete this._animateList[e],delete this._updateList[e]),this._runAnimateList.length=0;for(var n=0,r=t$.length;n<r;n++){var o=this._animateList[t$[n]];o&&this._runAnimateList.push(o)}}},{key:"updateParticles",value:function(e){var t=this,i=this._particleSystem;if(!i)return this._particles.length;switch(i.node.getWorldMatrix(o4),i.scaleSpace){case r$.Local:i.node.getScale(this._node_scale);break;case r$.World:i.node.getWorldScale(this._node_scale)}(i.getMaterialInstance(0)||this._defaultMat).passes[0].setUniform(this._uScaleHandle,this._node_scale),this._updateList.forEach((function(e,t){e.update(i._simulationSpace,o4)}));var n=i._trailModule,r=n&&n.enable;r&&n.update();for(var o=function(o){var s=t._particles.data[o];if(s.remainingLifetime-=e,Mi.set(s.animatedVelocity,0,0,0),s.remainingLifetime<0)return r&&n.removeParticle(s),t._particles.removeAt(o),--o,a=o,"continue";s.velocity.y-=9.8*i.gravityModifier.evaluate(1-s.remainingLifetime/s.startLifetime,Ai(s.randomSeed))*e,Mi.copy(s.ultimateVelocity,s.velocity),t._runAnimateList.forEach((function(t){t.animate(s,e)})),Mi.scaleAndAdd(s.position,s.position,s.ultimateVelocity,e),r&&n.animate(s,e),a=o},a=0;a<this._particles.length;++a)o(a);return this._particles.length}},{key:"updateRenderData",value:function(){for(var e=0,t=0;t<this._particles.length;++t){var i=this._particles.data[t],n=0,r=this._particleSystem._textureAnimationModule;r&&r.enable&&(n=i.frameIndex),e=4*t,this._fillDataFunc(i,e,n)}this._model.updateIA(this._particles.length)}},{key:"getParticleCount",value:function(){return this._particles.length}},{key:"onMaterialModified",value:function(e,t){0===e?(this._updateModel(),this.updateMaterialParams()):this.updateTrailMaterial()}},{key:"onRebuildPSO",value:function(e,t){this._model&&0===e&&this._model.setSubModelMaterial(0,t);var i=this._particleSystem._trailModule;i&&i._trailModel&&1===e&&i._trailModel.setSubModelMaterial(0,t)}},{key:"_setFillFunc",value:function(){this._renderInfo.renderMode===o$.Mesh?this._fillDataFunc=this._fillMeshData:this._renderInfo.renderMode===o$.StrecthedBillboard?this._fillDataFunc=this._fillStrecthedData:this._fillDataFunc=this._fillNormalData}},{key:"_fillMeshData",value:function(e,t,i){var n=t/4,r=0;this._attrs[r++]=e.position,r4.z=i,this._attrs[r++]=r4,this._attrs[r++]=e.size,this._attrs[r++]=e.rotation,this._attrs[r++]=e.color._val,this._model.addParticleVertexData(n,this._attrs)}},{key:"_fillStrecthedData",value:function(e,t,i){for(var n=0,r=0;r<4;++r)n=0,this._attrs[n++]=e.position,r4.x=s4[2*r],r4.y=s4[2*r+1],r4.z=i,this._attrs[n++]=r4,this._attrs[n++]=e.size,this._attrs[n++]=e.rotation,this._attrs[n++]=e.color._val,this._attrs[n++]=e.ultimateVelocity,this._attrs[n++]=e.ultimateVelocity,this._model.addParticleVertexData(t++,this._attrs)}},{key:"_fillNormalData",value:function(e,t,i){for(var n=0,r=0;r<4;++r)n=0,this._attrs[n++]=e.position,r4.x=s4[2*r],r4.y=s4[2*r+1],r4.z=i,this._attrs[n++]=r4,this._attrs[n++]=e.size,this._attrs[n++]=e.rotation,this._attrs[n++]=e.color._val,this._attrs[n++]=null,this._model.addParticleVertexData(t++,this._attrs)}},{key:"_setVertexAttrib",value:function(){switch(this._renderInfo.renderMode){case o$.StrecthedBillboard:this._vertAttrs=c4.slice();break;case o$.Mesh:this._vertAttrs=u4.slice();break;default:this._vertAttrs=l4.slice()}}},{key:"updateMaterialParams",value:function(){if(this._particleSystem){var e=this._particleSystem,t=e.sharedMaterial;if(null!=t){var i=t._effectAsset._name;this._renderInfo.mainTexture=t.getProperty("mainTexture",0),-1!==i.indexOf("particle")&&-1===i.indexOf("particle-gpu")||e.setMaterial(null,0)}null==e.sharedMaterial&&null==this._defaultMat&&(h4.parent=Nu.get("default-particle-material"),h4.owner=this._particleSystem,h4.subModelIdx=0,this._defaultMat=new jp(h4),null!==this._renderInfo.mainTexture&&this._defaultMat.setProperty("mainTexture",this._renderInfo.mainTexture));var n=e.getMaterialInstance(0)||this._defaultMat;e._simulationSpace===r$.World?this._defines.CC_USE_WORLD_SPACE=!0:this._defines.CC_USE_WORLD_SPACE=!1;var r=n.passes[0];this._uScaleHandle=r.getHandle("scale"),this._uLenHandle=r.getHandle("frameTile_velLenScale");var o=this._renderInfo.renderMode,a=this._frameTile_velLenScale;o===o$.Billboard?this._defines.CC_RENDER_MODE=0:o===o$.StrecthedBillboard?(this._defines.CC_RENDER_MODE=1,a.z=this._renderInfo.velocityScale,a.w=this._renderInfo.lengthScale):o===o$.HorizontalBillboard?this._defines.CC_RENDER_MODE=2:o===o$.VerticalBillboard?this._defines.CC_RENDER_MODE=3:o===o$.Mesh?this._defines.CC_RENDER_MODE=4:console.warn("particle system renderMode ".concat(o," not support."));var s=e._textureAnimationModule;s&&s.enable?(Oi.set(a,s.numTilesX,s.numTilesY),r.setUniform(this._uLenHandle,a)):r.setUniform(this._uLenHandle,a),n.recompileShaders(this._defines),this._model&&this._model.setSubModelMaterial(0,n)}}},{key:"updateTrailMaterial",value:function(){if(this._particleSystem){var e=this._particleSystem,t=e._trailModule;if(t&&t.enable){e.simulationSpace===r$.World||t.space===r$.World?this._trailDefines.CC_USE_WORLD_SPACE=!0:this._trailDefines.CC_USE_WORLD_SPACE=!1;var i=e.getMaterialInstance(1);null===i&&null===this._defaultTrailMat&&(h4.parent=Nu.get("default-trail-material"),h4.owner=this._particleSystem,h4.subModelIdx=1,this._defaultTrailMat=new jp(h4)),(i=i||this._defaultTrailMat).recompileShaders(this._trailDefines),t._updateMaterial()}}}}]),t}(),f4=new Qi,_4=new Ni,d4=new Xi,m4="a_position_starttime",v4="a_size_uv",y4="a_rotation_uv",g4="a_color",A4="a_dir_life",b4="a_rndSeed",x4=[{name:m4,format:exports.GFXFormat.RGBA32F},{name:v4,format:exports.GFXFormat.RGBA32F},{name:y4,format:exports.GFXFormat.RGBA32F},{name:g4,format:exports.GFXFormat.RGBA32F},{name:A4,format:exports.GFXFormat.RGBA32F},{name:b4,format:exports.GFXFormat.R32F}],T4=[{name:m4,format:exports.GFXFormat.RGBA32F},{name:v4,format:exports.GFXFormat.RGBA32F},{name:y4,format:exports.GFXFormat.RGBA32F},{name:g4,format:exports.GFXFormat.RGBA32F},{name:A4,format:exports.GFXFormat.RGBA32F},{name:b4,format:exports.GFXFormat.R32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD3,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_NORMAL,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR1,format:exports.GFXFormat.RGBA8,isNormalized:!0}],S4={parent:null,owner:null,subModelIdx:0},E4=function(e){function t(e){var i;return Z(this,t),(i=re(this,te(t).call(this,e)))._defines=void 0,i._frameTile_velLenScale=void 0,i._node_scale=void 0,i._vertAttrs=[],i._defaultMat=null,i._particleNum=0,i._tempParticle=null,i._colorTexture=null,i._forceTexture=null,i._velocityTexture=null,i._rotationTexture=null,i._sizeTexture=null,i._animTexture=null,i._uTimeHandle=0,i._uRotHandle=0,i._frameTile_velLenScale=new Ni(1,1,0,0),i._node_scale=new Ni,i._defines={CC_USE_WORLD_SPACE:!0,CC_USE_BILLBOARD:!0,CC_USE_STRETCHED_BILLBOARD:!1,CC_USE_HORIZONTAL_BILLBOARD:!1,CC_USE_VERTICAL_BILLBOARD:!1,COLOR_OVER_TIME_MODULE_ENABLE:!1},i._tempParticle=new YJ(null),i._particleNum=0,i}return ee(t,n4),J(t,[{key:"onInit",value:function(e){ae(te(t.prototype),"onInit",this).call(this,e),this._setVertexAttrib(),this._updateModel(),this._model.constructAttributeIndex(),this.updateMaterialParams()}},{key:"updateRenderMode",value:function(){this._setVertexAttrib(),this._updateModel(),this.updateMaterialParams()}},{key:"clear",value:function(){this._particleNum=0,this.updateRenderData()}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),this._forceTexture&&this._forceTexture.destroy(),this._velocityTexture&&this._velocityTexture.destroy(),this._colorTexture&&this._colorTexture.destroy(),this._sizeTexture&&this._sizeTexture.destroy(),this._rotationTexture&&this._rotationTexture.destroy(),this._animTexture&&this._animTexture.destroy()}},{key:"enableModule",value:function(e,t,i){var n=this._particleSystem.getMaterialInstance(0)||this._defaultMat;n&&(this.initShaderUniform(n),n.recompileShaders(this._defines),this._model&&this._model.setSubModelMaterial(0,n))}},{key:"getFreeParticle",value:function(){return this._particleNum>=this._particleSystem._capacity?null:this._tempParticle}},{key:"setNewParticle",value:function(e){this._model.addGPUParticleVertexData(e,this._particleNum,this._particleSystem._time),this._particleNum++}},{key:"updateParticles",value:function(e){return this._particleNum=this._model.updateGPUParticles(this._particleNum,this._particleSystem._time,e),this.updateShaderUniform(e),this._particleNum}},{key:"updateRenderData",value:function(){this._model.updateIA(this._particleNum)}},{key:"updateShaderUniform",value:function(e){var t=this._particleSystem.getMaterialInstance(0)||this._defaultMat;if(t){var i=t.passes[0];_4.x=this._particleSystem._time,_4.y=e,i.setUniform(this._uTimeHandle,_4),this._particleSystem.node.getWorldRotation(d4),i.setUniform(this._uRotHandle,d4)}}},{key:"initShaderUniform",value:function(e){var t=e.passes[0];this._uTimeHandle=t.getHandle("u_timeDelta"),this._uRotHandle=t.getHandle("u_worldRot"),t.setUniform(t.getHandle("scale"),this._node_scale),t.setUniform(t.getHandle("frameTile_velLenScale"),this._frameTile_velLenScale),_4.x=32,_4.y=1/32,t.setUniform(t.getHandle("u_sampleInfo"),_4);var i=!1,n=this._particleSystem._forceOvertimeModule;if(i=n&&n.enable,this._defines.FORCE_OVER_TIME_MODULE_ENABLE=i,i){this._forceTexture&&this._forceTexture.destroy(),this._forceTexture=IK(32,n.x,n.y,n.z);var r=t.getHandle("force_over_time_tex0"),o=wh.getBindingFromHandle(r);t.bindSampler(o,this._forceTexture.getGFXSampler()),t.bindTextureView(o,this._forceTexture.getGFXTextureView());var a=t.getHandle("u_force_space");t.setUniform(a,n.space);var s=t.getHandle("u_force_mode");t.setUniform(s,this._forceTexture.height)}var l=this._particleSystem._velocityOvertimeModule;if(i=l&&l.enable,this._defines.VELOCITY_OVER_TIME_MODULE_ENABLE=i,i){this._velocityTexture&&this._velocityTexture.destroy(),this._velocityTexture=function(e,t,i,n,r,o){for(var a=Math.max(RK(t),RK(i),RK(n),RK(r)),s=new Float32Array(e*a*4),l=[t,i,n,r],c=1/(e-1),u=0;u<a;u++)for(var h=0;h<4;h++)for(var p=l[h],f=0,_=0,d=0;d<e;d++){var m=OK(p,c*d,u);_=o?m:(f+=m)/(d+1),s[4*d+h]=_}return FK(s,e,a)}(32,l.x,l.y,l.z,l.speedModifier);var c=t.getHandle("velocity_over_time_tex0"),u=wh.getBindingFromHandle(c);t.bindSampler(u,this._velocityTexture.getGFXSampler()),t.bindTextureView(u,this._velocityTexture.getGFXTextureView());var h=t.getHandle("u_velocity_space");t.setUniform(h,l.space);var p=t.getHandle("u_velocity_mode");t.setUniform(p,this._velocityTexture.height)}var f=this._particleSystem._colorOverLifetimeModule;if(i=f&&f.enable,this._defines.COLOR_OVER_TIME_MODULE_ENABLE=i,i){this._colorTexture&&this._colorTexture.destroy(),this._colorTexture=SJ(32,f.color);var _=t.getHandle("color_over_time_tex0"),d=wh.getBindingFromHandle(_);t.bindSampler(d,this._colorTexture.getGFXSampler()),t.bindTextureView(d,this._colorTexture.getGFXTextureView());var m=t.getHandle("u_color_mode");t.setUniform(m,this._colorTexture.height)}var v=this._particleSystem._rotationOvertimeModule;if(i=v&&v.enable,this._defines.ROTATION_OVER_TIME_MODULE_ENABLE=i,i){this._rotationTexture&&this._rotationTexture.destroy(),v.separateAxes?this._rotationTexture=IK(32,v.x,v.y,v.z):this._rotationTexture=function(e,t,i){for(var n=RK(t),r=new Float32Array(e*n*4),o=1/(e-1),a=0,s=0;s<n;s++)for(var l=0;l<e;l++){var c=OK(t,o*l,s);r[a+2]=c,a+=4}return FK(r,e,n)}(32,v.z);var y=t.getHandle("rotation_over_time_tex0"),g=wh.getBindingFromHandle(y);t.bindSampler(g,this._rotationTexture.getGFXSampler()),t.bindTextureView(g,this._rotationTexture.getGFXTextureView());var A=t.getHandle("u_rotation_mode");t.setUniform(A,this._rotationTexture.height)}var b=this._particleSystem._sizeOvertimeModule;if(i=b&&b.enable,this._defines.SIZE_OVER_TIME_MODULE_ENABLE=i,i){this._sizeTexture&&this._sizeTexture.destroy(),b.separateAxes?this._sizeTexture=IK(32,b.x,b.y,b.z,!0):this._sizeTexture=function(e,t,i){for(var n=RK(t),r=new Float32Array(e*n*4),o=1/(e-1),a=0,s=0,l=0,c=0;c<n;c++){a=0;for(var u=0;u<e;u++){var h=OK(t,o*u,c);s=i?h:(a+=h)/(u+1),r[l]=s,r[l+1]=s,r[l+2]=s,l+=4}}return FK(r,e,n)}(32,b.size,!0);var x=t.getHandle("size_over_time_tex0"),T=wh.getBindingFromHandle(x);t.bindSampler(T,this._sizeTexture.getGFXSampler()),t.bindTextureView(T,this._sizeTexture.getGFXTextureView());var S=t.getHandle("u_size_mode");t.setUniform(S,this._sizeTexture.height)}var E=this._particleSystem._textureAnimationModule;if(i=E&&E.enable,this._defines.TEXTURE_ANIMATION_MODULE_ENABLE=i,i){this._animTexture&&this._animTexture.destroy(),this._animTexture=function(e,t,i,n){for(var r=Math.max(RK(t),RK(i)),o=new Float32Array(e*r*4),a=[t,i],s=1/(e-1),l=0;l<r;l++)for(var c=0;c<2;c++)for(var u=a[c],h=0,p=0,f=0;f<e;f++){var _=OK(u,s*f,l);p=n?_:(h+=_)/(f+1),o[4*f+c]=p}return FK(o,e,r)}(32,E.startFrame,E.frameOverTime);var C=t.getHandle("texture_animation_tex0"),w=wh.getBindingFromHandle(C);t.bindSampler(w,this._animTexture.getGFXSampler()),t.bindTextureView(w,this._animTexture.getGFXTextureView());var k=t.getHandle("u_anim_info");_4.x=this._animTexture.height,_4.y=E.numTilesX*E.numTilesY,_4.z=E.cycleCount,t.setUniform(k,_4)}}},{key:"getParticleCount",value:function(){return this._particleNum}},{key:"onMaterialModified",value:function(e,t){this._updateModel(),this.updateMaterialParams()}},{key:"onRebuildPSO",value:function(e,t){this._model&&0===e&&this._model.setSubModelMaterial(0,t)}},{key:"_setVertexAttrib",value:function(){switch(this._renderInfo.renderMode){case o$.StrecthedBillboard:this._vertAttrs=x4.slice();break;case o$.Mesh:this._vertAttrs=T4.slice();break;default:this._vertAttrs=x4.slice()}}},{key:"updateMaterialParams",value:function(){if(this._particleSystem){var e=this._particleSystem,t=e.sharedMaterial;if(null!==t){var i=t._effectAsset._name;this._renderInfo.mainTexture=t.getProperty("mainTexture",0),-1===i.indexOf("particle-gpu")&&(this._renderInfo.mainTexture=t.getProperty("mainTexture",0),this._particleSystem.setMaterial(null,0))}null==t&&null==this._defaultMat&&(S4.parent=Nu.get("default-particle-gpu-material"),S4.owner=e,S4.subModelIdx=0,this._defaultMat=new jp(S4),null!==this._renderInfo.mainTexture&&this._defaultMat.setProperty("mainTexture",this._renderInfo.mainTexture));var n=e.getMaterialInstance(0)||this._defaultMat;switch(e.node.getWorldMatrix(f4),e.scaleSpace){case r$.Local:e.node.getScale(this._node_scale);break;case r$.World:e.node.getWorldScale(this._node_scale)}e._simulationSpace===r$.World?this._defines.CC_USE_WORLD_SPACE=!0:this._defines.CC_USE_WORLD_SPACE=!1;var r=this._renderInfo.renderMode;r===o$.Billboard?this._defines.CC_RENDER_MODE=0:r===o$.StrecthedBillboard?(this._defines.CC_RENDER_MODE=1,this._frameTile_velLenScale.z=this._renderInfo.velocityScale,this._frameTile_velLenScale.w=this._renderInfo.lengthScale):r===o$.HorizontalBillboard?this._defines.CC_RENDER_MODE=2:r===o$.VerticalBillboard?this._defines.CC_RENDER_MODE=3:r===o$.Mesh?this._defines.CC_RENDER_MODE=4:console.warn("particle system renderMode ".concat(r," not support."));var o=e._textureAnimationModule;o&&o.enable&&Oi.set(this._frameTile_velLenScale,o.numTilesX,o.numTilesY),this.initShaderUniform(n),n.recompileShaders(this._defines),this._model&&this._model.setSubModelMaterial(0,n)}}}]),t}();function C4(){var e=gk.root.device;return!!(e.maxVertexTextureUnits>=8&&e.hasFeature(exports.GFXFeature.TEXTURE_FLOAT))||(cc.warn("Maybe the device has restrictions on vertex textures or does not support float textures."),!1)}var w4,k4,O4,R4,F4,I4,M4,P4,D4,B4,N4,L4,z4,G4,U4,X4,V4,H4,j4,W4,Y4,q4,Q4,Z4,K4,J4,$4,e6,t6,i6,n6,r6,o6,a6,s6,l6,c6,u6,h6,p6,f6,_6,d6,m6,v6,y6,g6,A6,b6,x6,T6,S6,E6,C6,w6,k6,O6,R6,F6,I6,M6,P6,D6,B6,N6,L6,z6,G6,U6,X6,V6,H6,j6,W6,Y6,q6,Q6,Z6,K6,J6,$6,e8,t8,i8,n8,r8,o8,a8,s8,l8,c8,u8,h8,p8,f8,_8,d8,m8,v8,y8,g8,A8,b8,x8,T8,S8,E8,C8,w8,k8,O8,R8,F8,I8,M8,P8=(D1=qa("cc.ParticleSystemRenderer"),B1=Qa({type:o$,displayOrder:0,tooltip:"设定粒子生成模式"}),N1=Qa({displayOrder:1,tooltip:"在粒子生成方式为 StrecthedBillboard 时,对粒子在运动方向上按速度大小进行拉伸"}),L1=Qa({displayOrder:2,tooltip:"在粒子生成方式为 StrecthedBillboard 时,对粒子在运动方向上按粒子大小进行拉伸"}),z1=Qa({type:o$,displayOrder:3}),G1=Qa({displayOrder:4}),U1=Qa({displayOrder:5}),X1=Qa({displayOrder:6}),V1=Qa({type:lu,displayOrder:7,tooltip:"粒子发射的模型"}),H1=Qa({type:Xh,displayOrder:8,tooltip:"粒子使用的材质"}),j1=Qa({type:Xh,displayOrder:9,tooltip:"拖尾使用的材质"}),W1=Qa({displayOrder:10,tooltip:"是否启用GPU粒子"}),D1((de((q1=function(){function e(){Z(this,e),_e(this,"_renderMode",Q1,this),_e(this,"_velocityScale",Z1,this),_e(this,"_lengthScale",K1,this),_e(this,"_mesh",J1,this),_e(this,"_mainTexture",$1,this),_e(this,"_useGPU",e4,this),this._particleSystem=null}return J(e,[{key:"onInit",value:function(e){this._particleSystem=e;var t=this._useGPU&&C4();this._particleSystem.processor=t?new E4(this):new p4(this),this._particleSystem.processor.onInit(e)}},{key:"_switchProcessor",value:function(){this._particleSystem.processor&&(this._particleSystem.processor.detachFromScene(),this._particleSystem.processor.clear(),this._particleSystem.processor=null),this._particleSystem.processor=this._useGPU?new E4(this):new p4(this),this._particleSystem.processor.onInit(this._particleSystem),this._particleSystem.processor.onEnable(),this._particleSystem.bindModule()}},{key:"renderMode",get:function(){return this._renderMode},set:function(e){this._renderMode!==e&&(this._renderMode=e,this._particleSystem.processor.updateRenderMode())}},{key:"velocityScale",get:function(){return this._velocityScale},set:function(e){this._velocityScale=e,this._particleSystem.processor.updateMaterialParams()}},{key:"lengthScale",get:function(){return this._lengthScale},set:function(e){this._lengthScale=e,this._particleSystem.processor.updateMaterialParams()}},{key:"mesh",get:function(){return this._mesh},set:function(e){this._mesh=e,this._particleSystem.processor.setVertexAttributes()}},{key:"particleMaterial",get:function(){return this._particleSystem?this._particleSystem.getMaterial(0):null},set:function(e){this._particleSystem.setMaterial(e,0)}},{key:"trailMaterial",get:function(){return this._particleSystem?this._particleSystem.getMaterial(1):null},set:function(e){this._particleSystem.setMaterial(e,1)}},{key:"mainTexture",get:function(){return this._mainTexture},set:function(e){this._mainTexture=e}},{key:"useGPU",get:function(){return this._useGPU},set:function(e){this._useGPU!==e&&(C4()?this._useGPU=e:this._useGPU=!1,this._switchProcessor())}}]),e}()).prototype,"renderMode",[B1],Object.getOwnPropertyDescriptor(q1.prototype,"renderMode"),q1.prototype),de(q1.prototype,"velocityScale",[N1],Object.getOwnPropertyDescriptor(q1.prototype,"velocityScale"),q1.prototype),de(q1.prototype,"lengthScale",[L1],Object.getOwnPropertyDescriptor(q1.prototype,"lengthScale"),q1.prototype),Q1=de(q1.prototype,"_renderMode",[z1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o$.Billboard}}),Z1=de(q1.prototype,"_velocityScale",[G1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),K1=de(q1.prototype,"_lengthScale",[U1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J1=de(q1.prototype,"_mesh",[X1],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(q1.prototype,"mesh",[V1],Object.getOwnPropertyDescriptor(q1.prototype,"mesh"),q1.prototype),de(q1.prototype,"particleMaterial",[H1],Object.getOwnPropertyDescriptor(q1.prototype,"particleMaterial"),q1.prototype),de(q1.prototype,"trailMaterial",[j1],Object.getOwnPropertyDescriptor(q1.prototype,"trailMaterial"),q1.prototype),$1=de(q1.prototype,"_mainTexture",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e4=de(q1.prototype,"_useGPU",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de(q1.prototype,"useGPU",[W1],Object.getOwnPropertyDescriptor(q1.prototype,"useGPU"),q1.prototype),Y1=q1))||Y1),D8=Math.cos(di(100)),B8={position:new Mi,velocity:new Mi},N8=new Xi,L8=new Qi,z8=new Mi,G8=new Mi,U8=new on,X8=function(){function e(t){for(Z(this,e),this.start=void 0,this.end=void 0,this.trailElements=void 0,this.start=-1,this.end=-1,this.trailElements=[];t--;)this.trailElements.push({position:new Mi,lifetime:0,width:0,velocity:new Mi,direction:0,color:new on})}return J(e,[{key:"getElement",value:function(e){return-1===this.start?null:(e<0&&(e=(e+this.trailElements.length)%this.trailElements.length),e>=this.trailElements.length&&(e%=this.trailElements.length),this.trailElements[e])}},{key:"addElement",value:function(){if(0===this.trailElements.length)return null;if(-1===this.start)return this.start=0,this.end=1,this.trailElements[0];this.start===this.end&&(this.trailElements.splice(this.end,0,{position:new Mi,lifetime:0,width:0,velocity:new Mi,direction:0,color:new on}),this.start++,this.start%=this.trailElements.length);var e=this.end++;return this.end%=this.trailElements.length,this.trailElements[e]}},{key:"iterateElement",value:function(e,t,i,n){for(var r=this.start>=this.end?this.end+this.trailElements.length:this.end,o=this.start;o<r;o++)t(e,this.trailElements[o%this.trailElements.length],i,n)&&(this.start++,this.start%=this.trailElements.length);this.start===r&&(this.start=-1,this.end=-1)}},{key:"count",value:function(){return this.start<this.end?this.end-this.start:this.trailElements.length+this.end-this.start}},{key:"clear",value:function(){this.start=-1,this.end=-1}}]),e}(),V8=(w4=qa("cc.TrailModule"),k4=Qa({displayOrder:0}),O4=Qa({type:c$,displayOrder:1,tooltip:"Particle在每个粒子的运动轨迹上形成拖尾效果"}),R4=Qa({type:kK,displayOrder:3,tooltip:"拖尾的生命周期"}),F4=Qa({displayOrder:5,tooltip:"粒子每生成一个拖尾节点所运行的最短距离"}),I4=Qa({type:r$,displayOrder:6,tooltip:"拖尾所在的坐标系，World在世界坐标系中运行，Local在本地坐标系中运行"}),M4=Qa({displayOrder:7,tooltip:"拖尾是否跟随粒子一起消失",visible:!1}),P4=Qa({type:u$,displayOrder:8,tooltip:"贴图在拖尾上的展开形式，Stretch贴图覆盖在整条拖尾上，Repeat贴图覆盖在一段拖尾上"}),D4=Qa({displayOrder:9,tooltip:"拖尾宽度继承自粒子大小"}),B4=Qa({type:kK,displayOrder:10,tooltip:"拖尾宽度，如果继承自粒子则是粒子大小的比例"}),N4=Qa({displayOrder:11,tooltip:"拖尾颜色是否继承自粒子"}),L4=Qa({type:xJ,displayOrder:12,tooltip:"拖尾颜色随拖尾自身长度的颜色渐变"}),z4=Qa({type:xJ,displayOrder:13,tooltip:"拖尾颜色随时间的颜色渐变"}),G4=Qa({type:r$}),w4((de((X4=function(){function e(){Z(this,e),_e(this,"_enable",V4,this),_e(this,"mode",H4,this),_e(this,"lifeTime",j4,this),_e(this,"_minParticleDistance",W4,this),_e(this,"existWithParticles",Y4,this),_e(this,"textureMode",q4,this),_e(this,"widthFromParticle",Q4,this),_e(this,"widthRatio",Z4,this),_e(this,"colorFromParticle",K4,this),_e(this,"colorOverTrail",J4,this),_e(this,"colorOvertime",$4,this),_e(this,"_space",e6,this),_e(this,"_particleSystem",t6,this),this._minSquaredDistance=0,this._vertSize=void 0,this._trailNum=0,this._trailLifetime=0,this.vbOffset=0,this.ibOffset=0,this._trailSegments=null,this._particleTrail=void 0,this._trailModel=null,this._iaInfo=void 0,this._iaInfoBuffer=null,this._subMeshData=null,this._vertAttrs=void 0,this._vbF32=null,this._vbUint32=null,this._iBuffer=null,this._needTransform=!1,this._defaultMat=null,this._iaInfo={drawInfos:[{vertexCount:0,firstVertex:0,indexCount:0,firstIndex:0,vertexOffset:0,instanceCount:0,firstInstance:0}]},this._vertAttrs=[{name:exports.GFXAttributeName.ATTR_POSITION,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD,format:exports.GFXFormat.RGBA32F},{name:exports.GFXAttributeName.ATTR_TEX_COORD1,format:exports.GFXFormat.RGB32F},{name:exports.GFXAttributeName.ATTR_COLOR,format:exports.GFXFormat.RGBA8,isNormalized:!0}],this._vertSize=0;for(var t,i=fe(this._vertAttrs);!(t=i()).done;){var n=t.value;this._vertSize+=yr[n.format].size}this._particleTrail=new Map}return J(e,[{key:"enable",get:function(){return this._enable},set:function(e){e===this._enable&&this._trailModel||(e&&!this._trailModel&&this._createModel(),e&&!this._enable&&(this._enable=e,this._particleSystem.processor.updateTrailMaterial()),this._enable=e,this._trailModel&&(this._trailModel.enabled=e),e?this.onEnable():this.onDisable())}},{key:"minParticleDistance",get:function(){return this._minParticleDistance},set:function(e){this._minParticleDistance=e,this._minSquaredDistance=e*e}},{key:"space",get:function(){return this._space},set:function(e){this._space=e,this._particleSystem&&this._particleSystem.processor.updateTrailMaterial()}}]),J(e,[{key:"onInit",value:function(e){this._particleSystem=e,this.minParticleDistance=this._minParticleDistance;for(var t,i=0,n=fe(this._particleSystem.bursts);!(t=n()).done;){i+=t.value.getMaxCount(this._particleSystem)}this._trailNum=Math.ceil(this._particleSystem.startLifetime.getMax()*this.lifeTime.getMax()*60*(this._particleSystem.rateOverTime.getMax()*this._particleSystem.duration+i)),this._trailSegments=new xa((function(){return new X8(10)}),Math.ceil(this._particleSystem.rateOverTime.getMax()*this._particleSystem.duration)),this._enable&&(this.enable=this._enable,this._updateMaterial())}},{key:"onEnable",value:function(){this._attachToScene()}},{key:"onDisable",value:function(){this._particleTrail.clear(),this._detachFromScene()}},{key:"_attachToScene",value:function(){this._trailModel&&(this._trailModel.scene&&this._detachFromScene(),this._particleSystem._getRenderScene().addModel(this._trailModel))}},{key:"_detachFromScene",value:function(){this._trailModel&&this._trailModel.scene&&this._trailModel.scene.removeModel(this._trailModel)}},{key:"destroy",value:function(){this.destroySubMeshData(),this._trailModel&&(cc.director.root.destroyModel(this._trailModel),this._trailModel=null),this._trailSegments&&(this._trailSegments.clear((function(e){e.trailElements.length=0})),this._trailSegments=null)}},{key:"clear",value:function(){if(this.enable){for(var e=this._particleTrail.values(),t=e.next();!t.done;)t.value.clear(),t=e.next();this._particleTrail.clear(),this.updateRenderData()}}},{key:"_updateMaterial",value:function(){if(this._particleSystem&&this._trailModel){var e=this._particleSystem.getMaterialInstance(1);e?this._trailModel.setSubModelMaterial(0,e):this._trailModel.setSubModelMaterial(0,this._particleSystem.processor._defaultTrailMat)}}},{key:"update",value:function(){this._trailLifetime=this.lifeTime.evaluate(this._particleSystem._time,1),this.space===r$.World&&this._particleSystem._simulationSpace===r$.Local?(this._needTransform=!0,this._particleSystem.node.getWorldMatrix(L8),this._particleSystem.node.getWorldRotation(N8)):this._needTransform=!1}},{key:"animate",value:function(e,t){if(this._trailSegments){var i=this._particleTrail.get(e);if(!i)return i=this._trailSegments.alloc(),void this._particleTrail.set(e,i);var n=i.getElement(i.end-1);if(this._needTransform?Mi.transformMat4(z8,e.position,L8):Mi.copy(z8,e.position),!(n&&(i.iterateElement(this,this._updateTrailElement,e,t),Mi.squaredDistance(n.position,z8)<this._minSquaredDistance))&&(n=i.addElement())){Mi.copy(n.position,z8),n.lifetime=0,this.widthFromParticle?n.width=e.size.x*this.widthRatio.evaluate(0,1):n.width=this.widthRatio.evaluate(0,1);var r=i.count();if(2===r){var o=i.getElement(i.end-2);Mi.subtract(o.velocity,n.position,o.position)}else if(r>2){var a=i.getElement(i.end-2),s=i.getElement(i.end-3);Mi.subtract(z8,s.position,a.position),Mi.subtract(G8,n.position,a.position),Mi.subtract(a.velocity,G8,z8),Mi.equals(Mi.ZERO,a.velocity)&&Mi.copy(a.velocity,z8),Mi.normalize(a.velocity,a.velocity),this._checkDirectionReverse(a,s)}this.colorFromParticle?n.color.set(e.color):n.color.set(this.colorOvertime.evaluate(0,1))}}}},{key:"removeParticle",value:function(e){var t=this._particleTrail.get(e);t&&this._trailSegments&&(t.clear(),this._trailSegments.free(t),this._particleTrail.delete(e))}},{key:"updateRenderData",value:function(){this.vbOffset=0,this.ibOffset=0;for(var e,t=fe(this._particleTrail.keys());!(e=t()).done;){var i=e.value,n=this._particleTrail.get(i);if(-1!==n.start){var r=4*this.vbOffset/this._vertSize,o=n.start>=n.end?n.end+n.trailElements.length:n.end,a=o-n.start,s=1/a,l=n.trailElements[n.start];this._fillVertexBuffer(l,this.colorOverTrail.evaluate(1,1),r,1,0,4);for(var c=n.start+1;c<o;c++){var u=n.trailElements[c%n.trailElements.length],h=c-n.start;this._fillVertexBuffer(u,this.colorOverTrail.evaluate(1-h/a,1),r,1-h*s,h,5)}if(this._needTransform?Mi.transformMat4(B8.position,i.position,L8):Mi.copy(B8.position,i.position),1===a||2===a){var p=n.getElement(n.end-1);Mi.subtract(p.velocity,B8.position,p.position),this._vbF32[this.vbOffset-this._vertSize/4-4]=p.velocity.x,this._vbF32[this.vbOffset-this._vertSize/4-3]=p.velocity.y,this._vbF32[this.vbOffset-this._vertSize/4-2]=p.velocity.z,this._vbF32[this.vbOffset-4]=p.velocity.x,this._vbF32[this.vbOffset-3]=p.velocity.y,this._vbF32[this.vbOffset-2]=p.velocity.z,Mi.subtract(B8.velocity,B8.position,p.position),this._checkDirectionReverse(B8,p)}else if(a>2){var f=n.getElement(n.end-1),_=n.getElement(n.end-2);Mi.subtract(z8,_.position,f.position),Mi.subtract(G8,B8.position,f.position),Mi.normalize(z8,z8),Mi.normalize(G8,G8),Mi.subtract(f.velocity,G8,z8),Mi.normalize(f.velocity,f.velocity),this._checkDirectionReverse(f,_),this.vbOffset-=this._vertSize/4*2,this.ibOffset-=6,this._fillVertexBuffer(f,this.colorOverTrail.evaluate(s,1),r,s,a-1,5),Mi.subtract(B8.velocity,B8.position,f.position),Mi.normalize(B8.velocity,B8.velocity),this._checkDirectionReverse(B8,f)}this.widthFromParticle?B8.width=i.size.x*this.widthRatio.evaluate(0,1):B8.width=this.widthRatio.evaluate(0,1),B8.color=i.color,Mi.equals(B8.velocity,Mi.ZERO)?this.ibOffset-=3:this._fillVertexBuffer(B8,this.colorOverTrail.evaluate(0,1),r,0,a,1)}}this.updateIA(this.ibOffset)}},{key:"updateIA",value:function(e){if(this._trailModel&&this._trailModel.subModelNum>0){var t=this._trailModel.getSubModel(0);t.inputAssembler.vertexBuffers[0].update(this._vbF32),t.inputAssembler.indexBuffer.update(this._iBuffer),t.inputAssembler.indexCount=e,this._iaInfo.drawInfos[0]=t.inputAssembler,this._iaInfoBuffer.update(this._iaInfo)}}},{key:"_createModel",value:function(){if(!this._trailModel){var e=gk.root.device,t=e.createBuffer({usage:exports.GFXBufferUsageBit.VERTEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:this._vertSize*(this._trailNum+1)*2,stride:this._vertSize}),i=new ArrayBuffer(this._vertSize*(this._trailNum+1)*2);this._vbF32=new Float32Array(i),this._vbUint32=new Uint32Array(i),t.update(i);var n=e.createBuffer({usage:exports.GFXBufferUsageBit.INDEX|exports.GFXBufferUsageBit.TRANSFER_DST,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:6*this._trailNum*Uint16Array.BYTES_PER_ELEMENT,stride:Uint16Array.BYTES_PER_ELEMENT});this._iBuffer=new Uint16Array(6*this._trailNum),n.update(this._iBuffer),this._iaInfoBuffer=e.createBuffer({usage:exports.GFXBufferUsageBit.INDIRECT,memUsage:exports.GFXMemoryUsageBit.HOST|exports.GFXMemoryUsageBit.DEVICE,size:56,stride:1}),this._iaInfo.drawInfos[0].vertexCount=2*(this._trailNum+1),this._iaInfo.drawInfos[0].indexCount=6*this._trailNum,this._iaInfoBuffer.update(this._iaInfo),this._subMeshData=new ou([t],this._vertAttrs,exports.GFXPrimitiveMode.TRIANGLE_LIST),this._subMeshData.indexBuffer=n,this._subMeshData.indirectBuffer=this._iaInfoBuffer,this._trailModel=cc.director.root.createModel(lh),this._trailModel.initialize(this._particleSystem.node),this._trailModel.visFlags=this._particleSystem.visibility,this._trailModel.setSubModelMesh(0,this._subMeshData),this._trailModel.enabled=!0}}},{key:"_updateTrailElement",value:function(e,t,i,n){return t.lifetime+=n,e.colorFromParticle?(t.color.set(i.color),t.color.multiply(e.colorOvertime.evaluate(1-i.remainingLifetime/i.startLifetime,1))):t.color.set(e.colorOvertime.evaluate(1-i.remainingLifetime/i.startLifetime,1)),e.widthFromParticle?t.width=i.size.x*e.widthRatio.evaluate(t.lifetime/e._trailLifetime,1):t.width=e.widthRatio.evaluate(t.lifetime/e._trailLifetime,1),t.lifetime>e._trailLifetime}},{key:"_fillVertexBuffer",value:function(e,t,i,n,r,o){this._vbF32[this.vbOffset++]=e.position.x,this._vbF32[this.vbOffset++]=e.position.y,this._vbF32[this.vbOffset++]=e.position.z,this._vbF32[this.vbOffset++]=e.direction,this._vbF32[this.vbOffset++]=e.width,this._vbF32[this.vbOffset++]=n,this._vbF32[this.vbOffset++]=0,this._vbF32[this.vbOffset++]=e.velocity.x,this._vbF32[this.vbOffset++]=e.velocity.y,this._vbF32[this.vbOffset++]=e.velocity.z,U8.set(e.color),U8.multiply(t),this._vbUint32[this.vbOffset++]=U8._val,this._vbF32[this.vbOffset++]=e.position.x,this._vbF32[this.vbOffset++]=e.position.y,this._vbF32[this.vbOffset++]=e.position.z,this._vbF32[this.vbOffset++]=1-e.direction,this._vbF32[this.vbOffset++]=e.width,this._vbF32[this.vbOffset++]=n,this._vbF32[this.vbOffset++]=1,this._vbF32[this.vbOffset++]=e.velocity.x,this._vbF32[this.vbOffset++]=e.velocity.y,this._vbF32[this.vbOffset++]=e.velocity.z,this._vbUint32[this.vbOffset++]=U8._val,1&o&&(this._iBuffer[this.ibOffset++]=i+2*r,this._iBuffer[this.ibOffset++]=i+2*r-1,this._iBuffer[this.ibOffset++]=i+2*r+1),4&o&&(this._iBuffer[this.ibOffset++]=i+2*r,this._iBuffer[this.ibOffset++]=i+2*r+1,this._iBuffer[this.ibOffset++]=i+2*r+2)}},{key:"_checkDirectionReverse",value:function(e,t){Mi.dot(e.velocity,t.velocity)<D8?e.direction=1-t.direction:e.direction=t.direction}},{key:"destroySubMeshData",value:function(){this._subMeshData&&(this._subMeshData.destroy(),this._subMeshData=null)}}]),e}()).prototype,"enable",[k4],Object.getOwnPropertyDescriptor(X4.prototype,"enable"),X4.prototype),V4=de(X4.prototype,"_enable",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H4=de(X4.prototype,"mode",[O4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c$.Particles}}),j4=de(X4.prototype,"lifeTime",[R4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),W4=de(X4.prototype,"_minParticleDistance",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),de(X4.prototype,"minParticleDistance",[F4],Object.getOwnPropertyDescriptor(X4.prototype,"minParticleDistance"),X4.prototype),de(X4.prototype,"space",[I4],Object.getOwnPropertyDescriptor(X4.prototype,"space"),X4.prototype),Y4=de(X4.prototype,"existWithParticles",[M4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q4=de(X4.prototype,"textureMode",[P4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u$.Stretch}}),Q4=de(X4.prototype,"widthFromParticle",[D4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z4=de(X4.prototype,"widthRatio",[B4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),K4=de(X4.prototype,"colorFromParticle",[N4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J4=de(X4.prototype,"colorOverTrail",[L4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xJ}}),$4=de(X4.prototype,"colorOvertime",[z4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xJ}}),e6=de(X4.prototype,"_space",[G4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.World}}),t6=de(X4.prototype,"_particleSystem",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U4=X4))||U4),H8=new Qi,j8=new Xi,W8=(i6=qa("cc.ParticleSystemComponent"),n6=as("i18n:cc.ParticleSystemComponent"),r6=es("Components/ParticleSystem"),o6=ts(99),a6=Qa({displayOrder:1,tooltip:"粒子系统能生成的最大粒子数量"}),s6=Qa({type:xJ,displayOrder:8,tooltip:"粒子初始颜色"}),l6=Qa({type:r$,displayOrder:9,tooltip:"选择缩放坐标系"}),c6=Qa({displayOrder:10,tooltip:"粒子初始大小"}),u6=Qa({type:kK,displayOrder:10,formerlySerializedAs:"startSize",tooltip:"粒子初始大小"}),h6=Qa({type:kK,displayOrder:10,tooltip:"粒子初始大小"}),p6=Qa({type:kK,displayOrder:10,tooltip:"粒子初始大小"}),f6=Qa({type:kK,range:[-1,1],displayOrder:11,tooltip:"粒子初始速度"}),_6=Qa({displayOrder:12,tooltip:"粒子初始旋转角度"}),d6=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:12,tooltip:"粒子初始旋转角度"}),m6=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:12,tooltip:"粒子初始旋转角度"}),v6=Qa({type:kK,range:[-1,1],radian:!0,displayOrder:12,formerlySerializedAs:"startRotation",tooltip:"粒子初始旋转角度"}),y6=Qa({type:kK,displayOrder:6,tooltip:"粒子系统开始运行后，延迟粒子发射的时间"}),g6=Qa({type:kK,displayOrder:7,tooltip:"粒子生命周期"}),A6=Qa({displayOrder:0,tooltip:"粒子系统运行时间"}),b6=Qa({displayOrder:2,tooltip:"粒子系统是否循环播放"}),x6=Qa({displayOrder:3,tooltip:"选中之后，粒子系统会以已播放完一轮之后的状态开始播放（仅当循环播放启用时有效）"}),T6=Qa({type:r$,displayOrder:4,tooltip:"控制粒子坐标计算所在的坐标系"}),S6=Qa({displayOrder:5,tooltip:"控制整个粒子系统的更新速度"}),E6=Qa({displayOrder:2,tooltip:"粒子系统加载后是否自动开始播放"}),C6=Qa({type:kK,range:[-1,1],displayOrder:13,tooltip:"粒子受重力影响的重力系数"}),w6=Qa({type:kK,displayOrder:14,tooltip:"每秒发射的粒子数"}),k6=Qa({type:kK,displayOrder:15,tooltip:"每移动单位距离发射的粒子数"}),O6=Qa({type:[O1],displayOrder:16,tooltip:"在某个时间点发射给定数量的粒子"}),R6=Qa({type:Xh,displayName:"Materials",visible:!1,override:!0}),F6=Qa({type:A$}),I6=Qa({type:A$,displayOrder:23,tooltip:"颜色模块"}),M6=Qa({type:M1}),P6=Qa({type:M1,displayOrder:17,tooltip:"发射器模块"}),D6=Qa({type:g1}),B6=Qa({type:g1,displayOrder:21,tooltip:"大小模块"}),N6=Qa({type:k1}),L6=Qa({type:k1,displayOrder:18,tooltip:"速度模块"}),z6=Qa({type:c2}),G6=Qa({type:c2,displayOrder:19,tooltip:"加速度模块"}),U6=Qa({type:f2}),X6=Qa({type:f2,displayOrder:20,tooltip:"限速模块"}),V6=Qa({type:v1}),H6=Qa({type:v1,displayOrder:22,tooltip:"旋转模块"}),j6=Qa({type:T1}),W6=Qa({type:T1,displayOrder:24,tooltip:"贴图动画模块"}),Y6=Qa({type:V8}),q6=Qa({type:V8,displayOrder:25,tooltip:"拖尾模块"}),Q6=Qa({type:P8,displayOrder:26,tooltip:"渲染模块"}),Z6=Qa({displayOrder:27,tooltip:"是否剔除非 enable 的模块数据"}),i6(K6=n6(K6=r6(K6=o6(K6=Ja((de((J6=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"startColor",$6,ne(e)),_e(e,"scaleSpace",e8,ne(e)),_e(e,"startSize3D",t8,ne(e)),_e(e,"startSizeX",i8,ne(e)),_e(e,"startSizeY",n8,ne(e)),_e(e,"startSizeZ",r8,ne(e)),_e(e,"startSpeed",o8,ne(e)),_e(e,"startRotation3D",a8,ne(e)),_e(e,"startRotationX",s8,ne(e)),_e(e,"startRotationY",l8,ne(e)),_e(e,"startRotationZ",c8,ne(e)),_e(e,"startDelay",u8,ne(e)),_e(e,"startLifetime",h8,ne(e)),_e(e,"duration",p8,ne(e)),_e(e,"loop",f8,ne(e)),_e(e,"simulationSpeed",_8,ne(e)),_e(e,"playOnAwake",d8,ne(e)),_e(e,"gravityModifier",m8,ne(e)),_e(e,"rateOverTime",v8,ne(e)),_e(e,"rateOverDistance",y8,ne(e)),_e(e,"bursts",g8,ne(e)),_e(e,"_colorOverLifetimeModule",A8,ne(e)),_e(e,"_shapeModule",b8,ne(e)),_e(e,"_sizeOvertimeModule",x8,ne(e)),_e(e,"_velocityOvertimeModule",T8,ne(e)),_e(e,"_forceOvertimeModule",S8,ne(e)),_e(e,"_limitVelocityOvertimeModule",E8,ne(e)),_e(e,"_rotationOvertimeModule",C8,ne(e)),_e(e,"_textureAnimationModule",w8,ne(e)),_e(e,"_trailModule",k8,ne(e)),_e(e,"renderer",O8,ne(e)),_e(e,"enableCulling",R8,ne(e)),e._isPlaying=void 0,e._isPaused=void 0,e._isStopped=void 0,e._isEmitting=void 0,e._time=void 0,e._emitRateTimeCounter=void 0,e._emitRateDistanceCounter=void 0,e._oldWPos=void 0,e._curWPos=void 0,e._customData1=void 0,e._customData2=void 0,e._subEmitters=void 0,_e(e,"_prewarm",F8,ne(e)),_e(e,"_capacity",I8,ne(e)),_e(e,"_simulationSpace",M8,ne(e)),e.processor=null,e.rateOverTime.constant=10,e.startLifetime.constant=5,e.startSizeX.constant=1,e.startSpeed.constant=5,e._isPlaying=!1,e._isPaused=!1,e._isStopped=!0,e._isEmitting=!1,e._time=0,e._emitRateTimeCounter=0,e._emitRateDistanceCounter=0,e._oldWPos=new Mi,e._curWPos=new Mi,e._customData1=new Oi,e._customData2=new Oi,e._subEmitters=[],e}return ee(t,Yp),J(t,[{key:"capacity",get:function(){return this._capacity},set:function(e){this._capacity=Math.floor(e),this.processor&&this.processor._model&&this.processor._model.setCapacity(this._capacity)}},{key:"prewarm",get:function(){return this._prewarm},set:function(e){!0===e&&this.loop,this._prewarm=e}},{key:"simulationSpace",get:function(){return this._simulationSpace},set:function(e){e!==this._simulationSpace&&(this._simulationSpace=e,this.processor&&(this.processor.updateMaterialParams(),this.processor.updateTrailMaterial()))}},{key:"sharedMaterials",get:function(){return ae(te(t.prototype),"sharedMaterials",this)},set:function(e){le(te(t.prototype),"sharedMaterials",e,this,!0)}},{key:"colorOverLifetimeModule",get:function(){return this._colorOverLifetimeModule},set:function(e){e&&(this._colorOverLifetimeModule=e)}},{key:"shapeModule",get:function(){return this._shapeModule},set:function(e){e&&(this._shapeModule=e)}},{key:"sizeOvertimeModule",get:function(){return this._sizeOvertimeModule},set:function(e){e&&(this._sizeOvertimeModule=e)}},{key:"velocityOvertimeModule",get:function(){return this._velocityOvertimeModule},set:function(e){e&&(this._velocityOvertimeModule=e)}},{key:"forceOvertimeModule",get:function(){return this._forceOvertimeModule},set:function(e){e&&(this._forceOvertimeModule=e)}},{key:"limitVelocityOvertimeModule",get:function(){return this._limitVelocityOvertimeModule},set:function(e){e&&(this._limitVelocityOvertimeModule=e)}},{key:"rotationOvertimeModule",get:function(){return this._rotationOvertimeModule},set:function(e){e&&(this._rotationOvertimeModule=e)}},{key:"textureAnimationModule",get:function(){return this._textureAnimationModule},set:function(e){e&&(this._textureAnimationModule=e)}},{key:"trailModule",get:function(){return this._trailModule},set:function(e){e&&(this._trailModule=e)}}]),J(t,[{key:"onLoad",value:function(){this.renderer.onInit(this),this._shapeModule&&this._shapeModule.onInit(this),this._trailModule&&this._trailModule.onInit(this),this.bindModule(),this._resetPosition()}},{key:"_onMaterialModified",value:function(e,t){this.processor.onMaterialModified(e,t)}},{key:"_onRebuildPSO",value:function(e,t){this.processor.onRebuildPSO(e,t)}},{key:"_collectModels",value:function(){return this._models.length=0,this._models.push(this.processor._model),this._trailModule&&this._trailModule.enable&&this._trailModule._trailModel&&this._models.push(this._trailModule._trailModel),this._models}},{key:"_attachToScene",value:function(){this.processor.attachToScene(),this._trailModule&&this._trailModule.enable&&this._trailModule._attachToScene()}},{key:"_detachFromScene",value:function(){this.processor.detachFromScene(),this._trailModule&&this._trailModule.enable&&this._trailModule._detachFromScene()}},{key:"bindModule",value:function(){this._colorOverLifetimeModule&&this._colorOverLifetimeModule.bindTarget(this.processor),this._sizeOvertimeModule&&this._sizeOvertimeModule.bindTarget(this.processor),this._rotationOvertimeModule&&this._rotationOvertimeModule.bindTarget(this.processor),this._forceOvertimeModule&&this._forceOvertimeModule.bindTarget(this.processor),this._limitVelocityOvertimeModule&&this._limitVelocityOvertimeModule.bindTarget(this.processor),this._velocityOvertimeModule&&this._velocityOvertimeModule.bindTarget(this.processor),this._textureAnimationModule&&this._textureAnimationModule.bindTarget(this.processor)}},{key:"play",value:function(){this._isPaused&&(this._isPaused=!1),this._isStopped&&(this._isStopped=!1),this._isPlaying=!0,this._isEmitting=!0,this._resetPosition(),this._prewarm&&this._prewarmSystem()}},{key:"pause",value:function(){this._isStopped?console.warn("pause(): particle system is already stopped."):(this._isPlaying&&(this._isPlaying=!1),this._isPaused=!0)}},{key:"stop",value:function(){(this._isPlaying||this._isPaused)&&this.clear(),this._isPlaying&&(this._isPlaying=!1),this._isPaused&&(this._isPaused=!1),this._time=0,this._emitRateTimeCounter=0,this._emitRateDistanceCounter=0,this._isStopped=!0}},{key:"clear",value:function(){this.enabledInHierarchy&&(this.processor.clear(),this._trailModule&&this._trailModule.clear())}},{key:"getParticleCount",value:function(){return this.processor.getParticleCount()}},{key:"setCustomData1",value:function(e,t){Oi.set(this._customData1,e,t)}},{key:"setCustomData2",value:function(e,t){Oi.set(this._customData2,e,t)}},{key:"onDestroy",value:function(){this.processor.onDestroy(),this._trailModule&&this._trailModule.destroy()}},{key:"onEnable",value:function(){this.playOnAwake&&this.play(),this.processor.onEnable(),this._trailModule&&this._trailModule.onEnable()}},{key:"onDisable",value:function(){this.processor.onDisable(),this._trailModule&&this._trailModule.onDisable()}},{key:"update",value:function(e){var t=e*this.simulationSpeed;this._isPlaying&&(this._time+=t,this._emit(t),0!==this.processor.updateParticles(t)||this._isEmitting||this.stop(),this.processor.updateRenderData(),this._trailModule&&this._trailModule.enable&&this._trailModule.updateRenderData())}},{key:"_onVisibilityChange",value:function(e){this.processor._model&&(this.processor._model.visFlags=e)}},{key:"emit",value:function(e,t){var i=this._time/this.duration;this._simulationSpace===r$.World&&(this.node.getWorldMatrix(H8),this.node.getWorldRotation(j8));for(var n=0;n<e;++n){var r=this.processor.getFreeParticle();if(null===r)return;var o=Ai(gi(0,2147483647));this._shapeModule&&this._shapeModule.enable?this._shapeModule.emit(r):(Mi.set(r.position,0,0,0),Mi.copy(r.velocity,b$)),this._textureAnimationModule&&this._textureAnimationModule.enable&&this._textureAnimationModule.init(r),Mi.multiplyScalar(r.velocity,r.velocity,this.startSpeed.evaluate(i,o)),this._simulationSpace===r$.World&&(Mi.transformMat4(r.position,r.position,H8),Mi.transformQuat(r.velocity,r.velocity,j8)),Mi.copy(r.ultimateVelocity,r.velocity),this.startRotation3D?Mi.set(r.rotation,this.startRotationX.evaluate(i,o),this.startRotationY.evaluate(i,o),this.startRotationZ.evaluate(i,o)):Mi.set(r.rotation,0,0,this.startRotationZ.evaluate(i,o)),this.startSize3D?Mi.set(r.startSize,this.startSizeX.evaluate(i,o),this.startSizeY.evaluate(i,o),this.startSizeZ.evaluate(i,o)):(Mi.set(r.startSize,this.startSizeX.evaluate(i,o),1,1),r.startSize.y=r.startSize.x),Mi.copy(r.size,r.startSize),r.startColor.set(this.startColor.evaluate(i,o)),r.color.set(r.startColor),r.startLifetime=this.startLifetime.evaluate(i,o)+t,r.remainingLifetime=r.startLifetime,r.randomSeed=gi(0,233280),this.processor.setNewParticle(r)}}},{key:"_prewarmSystem",value:function(){this.startDelay.mode=wK.Constant,this.startDelay.constant=0;for(var e=this.duration/1,t=0;t<e;++t)this._time+=1,this._emit(1),this.processor.updateParticles(1)}},{key:"_emit",value:function(e){var t=this.startDelay.evaluate(0,1);if(this._time>t){if(this._time>this.duration+t&&!this.loop)return void(this._isEmitting=!1);if(this._emitRateTimeCounter+=this.rateOverTime.evaluate(this._time/this.duration,1)*e,this._emitRateTimeCounter>1&&this._isEmitting){var i=Math.floor(this._emitRateTimeCounter);this._emitRateTimeCounter-=i,this.emit(i,e)}this.node.getWorldPosition(this._curWPos);var n=Mi.distance(this._curWPos,this._oldWPos);if(Mi.copy(this._oldWPos,this._curWPos),this._emitRateDistanceCounter+=n*this.rateOverDistance.evaluate(this._time/this.duration,1),this._emitRateDistanceCounter>1&&this._isEmitting){var r=Math.floor(this._emitRateDistanceCounter);this._emitRateDistanceCounter-=r,this.emit(r,e)}for(var o,a=fe(this.bursts);!(o=a()).done;){o.value.update(this,e)}}}},{key:"_resetPosition",value:function(){this.node.getWorldPosition(this._oldWPos),Mi.copy(this._curWPos,this._oldWPos)}},{key:"addSubEmitter",value:function(e){this._subEmitters.push(e)}},{key:"removeSubEmitter",value:function(e){this._subEmitters.splice(this._subEmitters.indexOf(e),1)}},{key:"addBurst",value:function(e){this.bursts.push(e)}},{key:"removeBurst",value:function(e){this.bursts.splice(this.bursts.indexOf(e),1)}},{key:"_onBeforeSerialize",value:function(e){var t=this;return this.enableCulling?e.filter((function(e){return!i$.includes(e)||t[e].enable})):e}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"isPaused",get:function(){return this._isPaused}},{key:"isStopped",get:function(){return this._isStopped}},{key:"isEmitting",get:function(){return this._isEmitting}},{key:"time",get:function(){return this._time}}]),t}()).prototype,"capacity",[a6],Object.getOwnPropertyDescriptor(J6.prototype,"capacity"),J6.prototype),$6=de(J6.prototype,"startColor",[s6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xJ}}),e8=de(J6.prototype,"scaleSpace",[l6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.Local}}),t8=de(J6.prototype,"startSize3D",[c6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i8=de(J6.prototype,"startSizeX",[u6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),n8=de(J6.prototype,"startSizeY",[h6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),r8=de(J6.prototype,"startSizeZ",[p6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),o8=de(J6.prototype,"startSpeed",[f6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),a8=de(J6.prototype,"startRotation3D",[_6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s8=de(J6.prototype,"startRotationX",[d6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),l8=de(J6.prototype,"startRotationY",[m6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),c8=de(J6.prototype,"startRotationZ",[v6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),u8=de(J6.prototype,"startDelay",[y6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),h8=de(J6.prototype,"startLifetime",[g6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),p8=de(J6.prototype,"duration",[A6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),f8=de(J6.prototype,"loop",[b6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),de(J6.prototype,"prewarm",[x6],Object.getOwnPropertyDescriptor(J6.prototype,"prewarm"),J6.prototype),de(J6.prototype,"simulationSpace",[T6],Object.getOwnPropertyDescriptor(J6.prototype,"simulationSpace"),J6.prototype),_8=de(J6.prototype,"simulationSpeed",[S6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d8=de(J6.prototype,"playOnAwake",[E6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m8=de(J6.prototype,"gravityModifier",[C6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),v8=de(J6.prototype,"rateOverTime",[w6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),y8=de(J6.prototype,"rateOverDistance",[k6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new kK}}),g8=de(J6.prototype,"bursts",[O6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),de(J6.prototype,"sharedMaterials",[R6],Object.getOwnPropertyDescriptor(J6.prototype,"sharedMaterials"),J6.prototype),A8=de(J6.prototype,"_colorOverLifetimeModule",[F6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"colorOverLifetimeModule",[I6],Object.getOwnPropertyDescriptor(J6.prototype,"colorOverLifetimeModule"),J6.prototype),b8=de(J6.prototype,"_shapeModule",[M6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"shapeModule",[P6],Object.getOwnPropertyDescriptor(J6.prototype,"shapeModule"),J6.prototype),x8=de(J6.prototype,"_sizeOvertimeModule",[D6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"sizeOvertimeModule",[B6],Object.getOwnPropertyDescriptor(J6.prototype,"sizeOvertimeModule"),J6.prototype),T8=de(J6.prototype,"_velocityOvertimeModule",[N6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"velocityOvertimeModule",[L6],Object.getOwnPropertyDescriptor(J6.prototype,"velocityOvertimeModule"),J6.prototype),S8=de(J6.prototype,"_forceOvertimeModule",[z6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"forceOvertimeModule",[G6],Object.getOwnPropertyDescriptor(J6.prototype,"forceOvertimeModule"),J6.prototype),E8=de(J6.prototype,"_limitVelocityOvertimeModule",[U6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"limitVelocityOvertimeModule",[X6],Object.getOwnPropertyDescriptor(J6.prototype,"limitVelocityOvertimeModule"),J6.prototype),C8=de(J6.prototype,"_rotationOvertimeModule",[V6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"rotationOvertimeModule",[H6],Object.getOwnPropertyDescriptor(J6.prototype,"rotationOvertimeModule"),J6.prototype),w8=de(J6.prototype,"_textureAnimationModule",[j6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"textureAnimationModule",[W6],Object.getOwnPropertyDescriptor(J6.prototype,"textureAnimationModule"),J6.prototype),k8=de(J6.prototype,"_trailModule",[Y6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de(J6.prototype,"trailModule",[q6],Object.getOwnPropertyDescriptor(J6.prototype,"trailModule"),J6.prototype),O8=de(J6.prototype,"renderer",[Q6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P8}}),R8=de(J6.prototype,"enableCulling",[Z6],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F8=de(J6.prototype,"_prewarm",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I8=de(J6.prototype,"_capacity",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),M8=de(J6.prototype,"_simulationSpace",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r$.Local}}),K6=J6))||K6)||K6)||K6)||K6)||K6),Y8=function(){function e(){Z(this,e)}return J(e,null,[{key:"instantiate",value:function(e){return this.registeredSceneEvent||(gk.on(lk.EVENT_BEFORE_SCENE_LAUNCH,this.onSceneUnload,this),this.registeredSceneEvent=!0),this.particleSystemPool.has(e._uuid)||this.particleSystemPool.set(e._uuid,new xa((function(){return Bf(e)||new rg}),1)),this.particleSystemPool.get(e._uuid).alloc()}},{key:"destroy",value:function(e){this.particleSystemPool.has(e._prefab.asset._uuid)&&(this.stop(e),this.particleSystemPool.get(e._prefab.asset._uuid).free(e))}},{key:"play",value:function(e){for(var t,i=fe(e.getComponentsInChildren(W8));!(t=i()).done;){t.value.play()}}},{key:"stop",value:function(e){for(var t,i=fe(e.getComponentsInChildren(W8));!(t=i()).done;){t.value.stop()}}},{key:"onSceneUnload",value:function(){this.particleSystemPool.forEach((function(e){e.clear((function(e){e.destroy()}))})),this.particleSystemPool.clear()}}]),e}();Y8.particleSystemPool=new Map,Y8.registeredSceneEvent=!1,exports.removeProperty(O1.prototype,"Burst.prototype",[{name:"minCount"},{name:"maxCount"}]),cc.ParticleSystemComponent=W8,cc.BillboardComponent=xK,cc.LineComponent=WJ,cc.ParticleUtils=Y8;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var q8,Q8,Z8,K8,J8,$8,e5,t5,i5,n5,r5,o5,a5,s5=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var i,n;e.exports=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,i=function(e){var t;e=e||{},t||(t=void 0!==e?e:{});var i,r,o,a,s,l={};for(i in t)t.hasOwnProperty(i)&&(l[i]=t[i]);r="object"==typeof window,o="function"==typeof importScripts,a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!r&&!o,s=!r&&!a&&!o;var c,u,h="";a?(h=__dirname+"/",c=function(e,t){return(e=Y(e))?t?e:e.toString():console.error("node_modules missing, please file a issue at https://github.com/cocos-creator/ammo.js")},u=function(e){return(e=c(e,!0)).buffer||(e=new Uint8Array(e)),b(e.buffer),e},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),process.on("unhandledRejection",L),t.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(c=function(e){var t=Y(e);return t?j(t):read(e)}),u=function(e){var t;return(t=Y(e))?t:"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(b("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(r||o)&&(o?h=self.location.href:document.currentScript&&(h=document.currentScript.src),n&&(h=n),h=0!==h.indexOf("blob:")?h.substr(0,h.lastIndexOf("/")+1):"",c=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){if(e=Y(e))return j(e);throw t}},o&&(u=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=Y(e))return e;throw t}}));var p,f=t.print||console.log.bind(console),_=t.printErr||console.warn.bind(console);for(i in l)l.hasOwnProperty(i)&&(t[i]=l[i]);function d(){return{exports:function(e,t,i){var n=new ArrayBuffer(8),r=new Int32Array(n),o=new Float32Array(n),a=new Float64Array(n);function s(e){return r[e]}function l(e,t){r[e]=t}function c(){return a[0]}function u(e){a[0]=e}function h(e){o[0]=e}function p(){return o[0]}var f=function(e){var t=new Uint8Array(e);return function(e,i){var n,r;if("undefined"==typeof Buffer)for(n=atob(i),r=0;r<n.length;r++)t[e+r]=n.charCodeAt(r);else for(n=Buffer.from(i,"base64"),r=0;r<n.length;r++)t[e+r]=n[r]}}(t.buffer);return f(1028,"SAQAAAEAAAACAAAAAwAAAAQAAAAyMGJ0RGVmYXVsdE1vdGlvblN0YXRlADEzYnRNb3Rpb25TdGF0ZQAAaEYAAC8EAACQRgAAGAQAAEAEAAAAAAAAQAQAAAUAAAAGAAAABwAAAAcAAAAAAAAA5AQAAAgAAAAJAAAACgAAAAsAAABOMTZidENvbGxpc2lvbldvcmxkMjRBbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2tFAE4xNmJ0Q29sbGlzaW9uV29ybGQxN1JheVJlc3VsdENhbGxiYWNrRQAAaEYAALMEAACQRgAAhAQAANwEAAAAAAAA3AQAAAwAAAANAAAACgAAAAcAAAAAAAAAUAUAAA4AAAAPAAAACgAAABAAAABOMTZidENvbGxpc2lvbldvcmxkMjRDbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2tFAACQRgAAIAUAANwEAAAAAAAApAUAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAABidFJpZ2lkQm9keUZsb2F0RGF0YQAxMWJ0UmlnaWRCb2R5AACQRgAAlQUAAIQKAAAAAAAABAgAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACQAAAAlAAAAJgAAACcAAAAoAAAAKQAAACoAAAArAAAALAAAAC0AAAAuAAAALwAAADAAAAAxAAAAMgAAADMAAAA0AAAANQAAADYAAAA3AAAAOAAAADkAAAA6AAAAOwAAADwAAAA9AAAAPgAAAD8AAABAAAAAQQAAAEIAAABDAAAARAAAAEUAAABGAAAAZGVidWdEcmF3V29ybGQAaW50ZXJuYWxTaW5nbGVTdGVwU2ltdWxhdGlvbgB1cGRhdGVBY3Rpb25zAHVwZGF0ZUFjdGl2YXRpb25TdGF0ZQBzb2x2ZUNvbnN0cmFpbnRzAGNhbGN1bGF0ZVNpbXVsYXRpb25Jc2xhbmRzAHByZWRpY3RpdmUgY29udmV4U3dlZXBUZXN0AHJlbGVhc2UgcHJlZGljdGl2ZSBjb250YWN0IG1hbmlmb2xkcwBjcmVhdGVQcmVkaWN0aXZlQ29udGFjdHMAQ0NEIG1vdGlvbiBjbGFtcGluZwBpbnRlZ3JhdGVUcmFuc2Zvcm1zAGFwcGx5IHNwZWN1bGF0aXZlIGNvbnRhY3QgcmVzdGl0dXRpb24AcHJlZGljdFVuY29uc3RyYWludE1vdGlvbgBidER5bmFtaWNzV29ybGRGbG9hdERhdGEAMjNidERpc2NyZXRlRHluYW1pY3NXb3JsZAAxNWJ0RHluYW1pY3NXb3JsZAAAAJBGAADkBwAAtBkAAJBGAADKBwAA+AcAAAAAAAB4CAAARwAAAEgAAABJAAAAMjdJbnBsYWNlU29sdmVySXNsYW5kQ2FsbGJhY2sATjI1YnRTaW11bGF0aW9uSXNsYW5kTWFuYWdlcjE0SXNsYW5kQ2FsbGJhY2tFAGhGAABCCAAAkEYAACQIAABwCAAAAAAAADQJAABKAAAASwAAAEwAAABNAAAAMzRidENsb3Nlc3ROb3RNZUNvbnZleFJlc3VsdENhbGxiYWNrAE4xNmJ0Q29sbGlzaW9uV29ybGQyN0Nsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFja0UATjE2YnRDb2xsaXNpb25Xb3JsZDIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFAAAAaEYAAPMIAACQRgAAwQgAACAJAACQRgAAnAgAACgJAAAAAAAAKAkAAEoAAABOAAAATwAAAFAAAAAAAAAAJAoAAFQAAABVAAAAVgAAAFcAAABYAAAAWQAAAFoAAABbAAAAXAAAAF0AAABeAAAAXwAAAGAAAABzb2x2ZUdyb3VwQ2FjaGVGcmllbmRseVNldHVwAHNvbHZlR3JvdXBDYWNoZUZyaWVuZGx5SXRlcmF0aW9ucwBzb2x2ZUdyb3VwADM1YnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIAMThidENvbnN0cmFpbnRTb2x2ZXIAAAAAaEYAAAQKAACQRgAA3gkAABwKAAAAAAAAhAoAAGEAAABiAAAAEwAAABQAAABjAAAAZAAAAGUAAABidENvbGxpc2lvbk9iamVjdEZsb2F0RGF0YQAxN2J0Q29sbGlzaW9uT2JqZWN0AABoRgAAbwoAAAAAAADsCgAAZwAAAGgAAABpAAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAB1AAAAdgAAADIxYnRDb2xsaXNpb25EaXNwYXRjaGVyAJBGAADUCgAAYDcAAAAAAABECwAAdwAAAHgAAAB5AAAAMjNidENvbGxpc2lvblBhaXJDYWxsYmFjawAxN2J0T3ZlcmxhcENhbGxiYWNrAAAAaEYAACYLAACQRgAADAsAADwLAAABAAAAAgAAAAAAAAABAAAAAgAAAAAAAAABAAAAAgAAAAAAAAACAAAAAAAAAAEAAAAAAAAA4AsAAHwAAAB9AAAAfgAAADMwYnRHamtFcGFQZW5ldHJhdGlvbkRlcHRoU29sdmVyADMwYnRDb252ZXhQZW5ldHJhdGlvbkRlcHRoU29sdmVyAAAAaEYAALULAACQRgAAlAsAANgLAAAAAAAARAwAAH8AAACAAAAAgQAAADE3YnRHamtQYWlyRGV0ZWN0b3IAMzZidERpc2NyZXRlQ29sbGlzaW9uRGV0ZWN0b3JJbnRlcmZhY2UAAGhGAAAUDAAAkEYAAAAMAAA8DAAAAAAAAIgMAAB8AAAAggAAAIMAAAAzM2J0TWlua293c2tpUGVuZXRyYXRpb25EZXB0aFNvbHZlcgCQRgAAZAwAANgLAAAAAAAAlA0AAIQAAACFAAAAhgAAAIcAAACIAAAAWk4zM2J0TWlua293c2tpUGVuZXRyYXRpb25EZXB0aFNvbHZlcjEyY2FsY1BlbkRlcHRoRVIyMmJ0Vm9yb25vaVNpbXBsZXhTb2x2ZXJQSzEzYnRDb252ZXhTaGFwZVM0X1JLMTFidFRyYW5zZm9ybVM3X1I5YnRWZWN0b3IzUzlfUzlfUDEyYnRJRGVidWdEcmF3RTIwYnRJbnRlcm1lZGlhdGVSZXN1bHQATjM2YnREaXNjcmV0ZUNvbGxpc2lvbkRldGVjdG9ySW50ZXJmYWNlNlJlc3VsdEUAAGhGAABbDQAAkEYAALAMAACMDQAAAAAAAPANAACJAAAAigAAAIsAAACMAAAAjQAAADE2YnRFbXB0eUFsZ29yaXRobQAyMGJ0Q29sbGlzaW9uQWxnb3JpdGhtAAAAaEYAAM8NAACQRgAAvA0AAOgNAAAAAAAAPA4AAI4AAACPAAAABwAAAAcAAAAHAAAAMzBidEFjdGl2YXRpbmdDb2xsaXNpb25BbGdvcml0aG0AAAAAkEYAABgOAADoDQAAAAAAAIgOAACQAAAAkQAAAJIAAACTAAAAlAAAADMyYnRTcGhlcmVTcGhlcmVDb2xsaXNpb25BbGdvcml0aG0AAJBGAABkDgAAPA4AAAAAAAD8DgAAlQAAAJYAAACXAAAAmAAAAJkAAACaAAAAMzFidERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uADI0YnRDb2xsaXNpb25Db25maWd1cmF0aW9uAAAAAGhGAADWDgAAkEYAALQOAAD0DgAAAAAAAHgPAACbAAAAnAAAAJ0AAABOMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFADMwYnRDb2xsaXNpb25BbGdvcml0aG1DcmVhdGVGdW5jAABoRgAATg8AAJBGAAAcDwAAcA8AAAAAAADUDwAAmwAAAJ4AAACfAAAATjMzYnRDb252ZXhDb25jYXZlQ29sbGlzaW9uQWxnb3JpdGhtMTdTd2FwcGVkQ3JlYXRlRnVuY0UAAAAAkEYAAJgPAABwDwAAAAAAACQQAACbAAAAoAAAAKEAAABOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAACQRgAA9A8AAHAPAAAAAAAAfBAAAJsAAACiAAAAowAAAE4zNmJ0Q29tcG91bmRDb21wb3VuZENvbGxpc2lvbkFsZ29yaXRobTEwQ3JlYXRlRnVuY0UAAAAAkEYAAEQQAABwDwAAAAAAANAQAACbAAAApAAAAKUAAABOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTdTd2FwcGVkQ3JlYXRlRnVuY0UAkEYAAJwQAABwDwAAAAAAABQRAACbAAAApgAAAKcAAABOMTZidEVtcHR5QWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAACQRgAA8BAAAHAPAAAAAAAAaBEAAJsAAACoAAAAqQAAAE4zMmJ0U3BoZXJlU3BoZXJlQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAACQRgAANBEAAHAPAAAAAAAAvBEAAJsAAACqAAAAqwAAAE4zNGJ0U3BoZXJlVHJpYW5nbGVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFAACQRgAAiBEAAHAPAAAAAAAACBIAAJsAAACsAAAArQAAAE4yNmJ0Qm94Qm94Q29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAkEYAANwRAABwDwAAAAAAAFgSAACbAAAArgAAAK8AAABOMzFidENvbnZleFBsYW5lQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQCQRgAAKBIAAHAPAAAAAAAAxBIAALAAAACxAAAAsgAAALMAAABpc2xhbmRVbmlvbkZpbmRBbmRRdWlja1NvcnQAcHJvY2Vzc0lzbGFuZHMAMjVidFNpbXVsYXRpb25Jc2xhbmRNYW5hZ2VyAABoRgAApxIAAAAAAAAMEwAAtAAAALUAAAC2AAAAtwAAALgAAAAzMWJ0Q29udmV4UGxhbmVDb2xsaXNpb25BbGdvcml0aG0AAACQRgAA6BIAAOgNAAAxMmJ0Q29udmV4Q2FzdAAAaEYAABgTAAAAAAAAYBMAALkAAAC6AAAAuwAAADIyYnRTdWJzaW1wbGV4Q29udmV4Q2FzdAAAAACQRgAARBMAACgTAAAAAAAAIBQAALwAAAC9AAAAvgAAAL8AAADAAAAAAAAAAEgUAADBAAAAwgAAAMMAAABidENvbnZleFRyaWFuZ2xlQ2FsbGJhY2s6OnByb2Nlc3NUcmlhbmdsZQBidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG06OnByb2Nlc3NDb2xsaXNpb24AMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0AAACQRgAA+hMAADwOAAAyNGJ0Q29udmV4VHJpYW5nbGVDYWxsYmFjawAAkEYAACwUAAA4LQAAAAAAAPAUAADEAAAAxQAAAMYAAADHAAAAyAAAAMkAAADKAAAAywAAAMwAAADNAAAAzgAAAM8AAADQAAAA0QAAANIAAADTAAAA1AAAANUAAADWAAAA1wAAANgAAADZAAAA2gAAANsAAADcAAAA3QAAAN4AAADfAAAA4AAAAOEAAADiAAAA4wAAADE1YnRUcmlhbmdsZVNoYXBlAAAAkEYAANwUAABsKwAAVHJpYW5nbGUAYnRDb252ZXhJbnRlcm5hbFNoYXBlRGF0YQAAAAAAANQVAADkAAAA5QAAAOYAAABaTjMzYnRDb252ZXhDb25jYXZlQ29sbGlzaW9uQWxnb3JpdGhtMjFjYWxjdWxhdGVUaW1lT2ZJbXBhY3RFUDE3YnRDb2xsaXNpb25PYmplY3RTMV9SSzE2YnREaXNwYXRjaGVySW5mb1AxNmJ0TWFuaWZvbGRSZXN1bHRFMzFMb2NhbFRyaWFuZ2xlU3BoZXJlQ2FzdENhbGxiYWNrAAAAkEYAADQVAAA4LQAAcHJvY2Vzc1RyaWFuZ2xlAAAAAAAsFgAA5wAAAOgAAADpAAAA6gAAAOsAAABOMTJidENvbnZleENhc3QxMENhc3RSZXN1bHRFAAAAAGhGAAAMFgAAAAAAAFwWAAB/AAAA7AAAAO0AAAAxNmJ0Qm94Qm94RGV0ZWN0b3IAAJBGAABIFgAAPAwAAAAAAACkFgAA7gAAAO8AAADwAAAA8QAAAPIAAAAyNmJ0Qm94Qm94Q29sbGlzaW9uQWxnb3JpdGhtAAAAAJBGAACEFgAAPA4AAAAAAADgFgAAhAAAAPMAAAD0AAAA9QAAAPYAAAAxNmJ0TWFuaWZvbGRSZXN1bHQAAJBGAADMFgAAjA0AAAAAAAAUFwAAuQAAAPcAAAD4AAAAMTVidEdqa0NvbnZleENhc3QAAACQRgAAABcAACgTAAAAAAAAUBcAAIQAAAD5AAAA+gAAAPsAAAD8AAAAMTZidFBvaW50Q29sbGVjdG9yAACQRgAAPBcAAIwNAAAAAAAAkBcAALkAAAD9AAAA/gAAADI3YnRDb250aW51b3VzQ29udmV4Q29sbGlzaW9uAAAAkEYAAHAXAAAoEwAAAAAAAOgXAADkAAAA/wAAAAABAAAHAAAAAAAAABQYAADkAAAAAQEAAAIBAAAHAAAAMjVidFRyaWFuZ2xlUmF5Y2FzdENhbGxiYWNrAJBGAADMFwAAOC0AADI4YnRUcmlhbmdsZUNvbnZleGNhc3RDYWxsYmFjawAAkEYAAPQXAAA4LQAAAAAAALQZAAADAQAABAEAABoAAAAbAAAAHAAAAB0AAAAFAQAAHwAAACAAAAAGAQAABwEAACMAAAAIAQAAT3ZlcmZsb3cgaW4gQUFCQiwgb2JqZWN0IHJlbW92ZWQgZnJvbSBzaW11bGF0aW9uAElmIHlvdSBjYW4gcmVwcm9kdWNlIHRoaXMsIHBsZWFzZSBlbWFpbCBidWdzQGNvbnRpbnVvdXNwaHlzaWNzLmNvbQoAUGxlYXNlIGluY2x1ZGUgYWJvdmUgaW5mb3JtYXRpb24sIHlvdXIgUGxhdGZvcm0sIHZlcnNpb24gb2YgT1MuCgBUaGFua3MuCgB1cGRhdGVBYWJicwBjYWxjdWxhdGVPdmVybGFwcGluZ1BhaXJzAHBlcmZvcm1EaXNjcmV0ZUNvbGxpc2lvbkRldGVjdGlvbgBkaXNwYXRjaEFsbENvbGxpc2lvblBhaXJzAGNvbnZleFN3ZWVwQ29tcG91bmQAY29udmV4U3dlZXBUZXN0ADE2YnRDb2xsaXNpb25Xb3JsZABoRgAAoRkAAAAAAABoGgAA5AAAAAkBAAAAAQAACgEAAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUUyOUJyaWRnZVRyaWFuZ2xlUmF5Y2FzdENhbGxiYWNrAACQRgAA1BkAAOgXAAAAAAAAJBsAAOQAAAALAQAAAAEAAAwBAABaTjE2YnRDb2xsaXNpb25Xb3JsZDIxcmF5VGVzdFNpbmdsZUludGVybmFsRVJLMTFidFRyYW5zZm9ybVMyX1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMTdSYXlSZXN1bHRDYWxsYmFja0VFMjlCcmlkZ2VUcmlhbmdsZVJheWNhc3RDYWxsYmFja18wAAAAAJBGAACMGgAA6BcAAAAAAADwGwAADQEAAA4BAAAPAQAAEAEAABEBAAASAQAAEwEAAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUU5UmF5VGVzdGVyAE42YnREYnZ0OElDb2xsaWRlRQAAAABoRgAA0hsAAJBGAABUGwAA6BsAAAAAAACcHAAADAAAABQBAAAVAQAAFgEAAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUUxNUxvY2FsSW5mb0FkZGVyMgAAAACQRgAAFBwAANwEAAAAAAAAcB0AAOQAAAAXAQAAAgEAABgBAABaTjE2YnRDb2xsaXNpb25Xb3JsZDI1b2JqZWN0UXVlcnlTaW5nbGVJbnRlcm5hbEVQSzEzYnRDb252ZXhTaGFwZVJLMTFidFRyYW5zZm9ybVM1X1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMjBDb252ZXhSZXN1bHRDYWxsYmFja0VmRTMyQnJpZGdlVHJpYW5nbGVDb252ZXhjYXN0Q2FsbGJhY2sAAJBGAADAHAAAFBgAAAAAAABIHgAA5AAAABkBAAACAQAAGgEAAFpOMTZidENvbGxpc2lvbldvcmxkMjVvYmplY3RRdWVyeVNpbmdsZUludGVybmFsRVBLMTNidENvbnZleFNoYXBlUksxMWJ0VHJhbnNmb3JtUzVfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18yMENvbnZleFJlc3VsdENhbGxiYWNrRWZFMzJCcmlkZ2VUcmlhbmdsZUNvbnZleGNhc3RDYWxsYmFja18wAAAAAJBGAACUHQAAFBgAAAAAAAAgHwAADQEAABsBAAAPAQAAHAEAABEBAAASAQAAEwEAAFpOMTZidENvbGxpc2lvbldvcmxkMjVvYmplY3RRdWVyeVNpbmdsZUludGVybmFsRVBLMTNidENvbnZleFNoYXBlUksxMWJ0VHJhbnNmb3JtUzVfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18yMENvbnZleFJlc3VsdENhbGxiYWNrRWZFMjJidENvbXBvdW5kTGVhZkNhbGxiYWNrAAAAAJBGAAB4HgAA6BsAAAAAAAAkIAAASgAAAB0BAAAeAQAAHwEAAFpaTjE2YnRDb2xsaXNpb25Xb3JsZDI1b2JqZWN0UXVlcnlTaW5nbGVJbnRlcm5hbEVQSzEzYnRDb252ZXhTaGFwZVJLMTFidFRyYW5zZm9ybVM1X1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMjBDb252ZXhSZXN1bHRDYWxsYmFja0VmRU4yMmJ0Q29tcG91bmRMZWFmQ2FsbGJhY2sxMlByb2Nlc3NDaGlsZEVpUzVfUEsxNmJ0Q29sbGlzaW9uU2hhcGVFMTRMb2NhbEluZm9BZGRlcgAAkEYAAEQfAAAgCQAAAAAAAKQgAAAgAQAAIQEAACIBAAAxOWJ0U2luZ2xlUmF5Q2FsbGJhY2sAMjNidEJyb2FkcGhhc2VSYXlDYWxsYmFjawAyNGJ0QnJvYWRwaGFzZUFhYmJDYWxsYmFjawAAaEYAAHQgAACQRgAAWiAAAJAgAACQRgAARCAAAJggAAAAAAAA3CAAACABAAAjAQAAJAEAADIxYnRTaW5nbGVTd2VlcENhbGxiYWNrAJBGAADEIAAAmCAAAAAAAAAoIQAAJQEAACYBAAAnAQAAKAEAAPz///8oIQAAKQEAACoBAAArAQAAMTdEZWJ1Z0RyYXdjYWxsYmFjawDsRgAAFCEAAAAAAAACAAAAOC0AAAIAAABkLQAAAgQAAAAAAAB4IQAAfwAAACwBAAAtAQAAMjJTcGhlcmVUcmlhbmdsZURldGVjdG9yAAAAAJBGAABcIQAAPAwAAAAAAADIIQAALgEAAC8BAAAwAQAAMQEAADIBAAAzNGJ0U3BoZXJlVHJpYW5nbGVDb2xsaXNpb25BbGdvcml0aG0AAAAAkEYAAKAhAAA8DgAAAAAAACwiAAAzAQAANAEAADUBAAAAAAAAVCIAADYBAAA3AQAAOAEAADkBAAA6AQAATjIzYnRDb252ZXhDb252ZXhBbGdvcml0aG0xMENyZWF0ZUZ1bmNFAJBGAAAEIgAAcA8AADIzYnRDb252ZXhDb252ZXhBbGdvcml0aG0AAACQRgAAOCIAADwOAAAAAAAABCMAAIQAAAA7AQAAPAEAAD0BAAA+AQAAWk4yM2J0Q29udmV4Q29udmV4QWxnb3JpdGhtMTZwcm9jZXNzQ29sbGlzaW9uRVBLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJTMl9SSzE2YnREaXNwYXRjaGVySW5mb1AxNmJ0TWFuaWZvbGRSZXN1bHRFMTNidER1bW15UmVzdWx0AAAAAJBGAAB8IgAAjA0AAAAAAAC8IwAAhAAAAD8BAABAAQAAQQEAAEIBAABaTjIzYnRDb252ZXhDb252ZXhBbGdvcml0aG0xNnByb2Nlc3NDb2xsaXNpb25FUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclMyX1JLMTZidERpc3BhdGNoZXJJbmZvUDE2YnRNYW5pZm9sZFJlc3VsdEUyMWJ0V2l0aG91dE1hcmdpblJlc3VsdAAAAACQRgAALCMAAIwNAAAAAAAAACQAAIQAAABDAQAA9AAAAPUAAABEAQAAMjRidFBlcnR1cmJlZENvbnRhY3RSZXN1bHQAAJBGAADkIwAA4BYAAAAAAABIJAAARQEAAEYBAABHAQAASAEAAEkBAAAyOGJ0Q29tcG91bmRDb2xsaXNpb25BbGdvcml0aG0AAJBGAAAoJAAAPA4AAAAAAACUJAAADQEAAEoBAAAPAQAASwEAABEBAAASAQAAEwEAADIyYnRDb21wb3VuZExlYWZDYWxsYmFjawAAAACQRgAAeCQAAOgbAAAAAAAA2CQAAEwBAABNAQAATgEAAE8BAABQAQAAMjNidEhhc2hlZFNpbXBsZVBhaXJDYWNoZQAAAGhGAAC8JAAAAAAAACQlAABRAQAAUgEAAFMBAABUAQAAVQEAADM2YnRDb21wb3VuZENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtAACQRgAA/CQAAEgkAAAAAAAAeCUAAA0BAABWAQAAVwEAAFgBAAARAQAAEgEAABMBAAAzMGJ0Q29tcG91bmRDb21wb3VuZExlYWZDYWxsYmFjawAAAACQRgAAVCUAAOgbAABidENvbXBvdW5kQ29tcG91bmRMZWFmQ2FsbGJhY2s6OlByb2Nlc3MAAAAAADwmAABZAQAAWgEAAFsBAADHAAAAyAAAAMkAAABcAQAAXQEAAF4BAABfAQAAzgAAAGABAABhAQAAYgEAAGMBAADTAAAAZAEAAGUBAABidENvbXBvdW5kU2hhcGVDaGlsZERhdGEAYnRDb21wb3VuZFNoYXBlRGF0YQAxNWJ0Q29tcG91bmRTaGFwZQAAkEYAACkmAAAQLAAAQ29tcG91bmQ="),f(9816,"fCYAAGYBAABnAQAAMThidENvbnZleFBvbHloZWRyb24AAAAAaEYAAGQmAAAAAAAA+CYAAGgBAABpAQAAagEAAMcAAADIAAAAyQAAAMoAAADLAAAAawEAAGwBAADOAAAAbQEAAG4BAADRAAAA0gAAANMAAABvAQAAcAEAANYAAABxAQAA2AAAAHIBAABzAQAAMTNidFNwaGVyZVNoYXBlAJBGAADoJgAAFC0AAFNQSEVSRQAAAAAAAJwnAAB0AQAAdQEAAHYBAADHAAAAyAAAAMkAAAB3AQAAeAEAAHkBAAB6AQAAzgAAAHsBAAB8AQAAfQEAAH4BAADTAAAAfwEAAIABAACBAQAAggEAAIMBAABidFRyaWFuZ2xlTWVzaFNoYXBlRGF0YQAyMmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUAAAAAkEYAAIAnAADwKQAAAAAAAEQoAACEAQAAhQEAAIYBAABaTjIyYnRCdmhUcmlhbmdsZU1lc2hTaGFwZTE0cGVyZm9ybVJheWNhc3RFUDE4YnRUcmlhbmdsZUNhbGxiYWNrUks5YnRWZWN0b3IzUzRfRTIxTXlOb2RlT3ZlcmxhcENhbGxiYWNrADIxYnROb2RlT3ZlcmxhcENhbGxiYWNrAGhGAAAkKAAAkEYAALwnAAA8KAAAAAAAANgoAACEAQAAhwEAAIgBAABaTjIyYnRCdmhUcmlhbmdsZU1lc2hTaGFwZTE3cGVyZm9ybUNvbnZleGNhc3RFUDE4YnRUcmlhbmdsZUNhbGxiYWNrUks5YnRWZWN0b3IzUzRfUzRfUzRfRTIxTXlOb2RlT3ZlcmxhcENhbGxiYWNrAAAAAJBGAABkKAAAPCgAAAAAAABoKQAAhAEAAIkBAACKAQAAWk5LMjJidEJ2aFRyaWFuZ2xlTWVzaFNoYXBlMTlwcm9jZXNzQWxsVHJpYW5nbGVzRVAxOGJ0VHJpYW5nbGVDYWxsYmFja1JLOWJ0VmVjdG9yM1M0X0UyMU15Tm9kZU92ZXJsYXBDYWxsYmFjawAAAJBGAAD4KAAAPCgAAEJWSFRSSUFOR0xFTUVTSAAAAAAA8CkAAIsBAACMAQAAdgEAAMcAAADIAAAAyQAAAI0BAAB4AQAAeQEAAI4BAADOAAAAewEAAHwBAACPAQAAkAEAANMAAACRAQAAgAEAAIEBAAAxOWJ0VHJpYW5nbGVNZXNoU2hhcGUAAACQRgAA2CkAAHAuAAAAAAAAeCoAAJIBAACTAQAAlAEAAFpOSzE5YnRUcmlhbmdsZU1lc2hTaGFwZTE5cHJvY2Vzc0FsbFRyaWFuZ2xlc0VQMThidFRyaWFuZ2xlQ2FsbGJhY2tSSzlidFZlY3RvcjNTNF9FMTZGaWx0ZXJlZENhbGxiYWNrAAAAkEYAABAqAABkLQAAAAAAALAqAADkAAAAlQEAAJYBAAAyMVN1cHBvcnRWZXJ0ZXhDYWxsYmFjawCQRgAAmCoAADgtAABUUklBTkdMRU1FU0g="),f(10960,"bCsAAMQAAACXAQAAmAEAAMcAAADIAAAAyQAAAMoAAADLAAAAmQEAAAcAAADOAAAAzwAAANAAAADRAAAA0gAAANMAAADUAAAAmgEAANYAAACbAQAA2AAAAHIBAABzAQAA2wAAAAcAAAAHAAAABwAAAAcAAAAHAAAABwAAAAcAAAAyM2J0UG9seWhlZHJhbENvbnZleFNoYXBlAAAAkEYAAFArAAAULQAAAAAAANQrAACcAQAAnQEAAJ4BAADHAAAAyAAAAMkAAACfAQAAoAEAAKEBAACiAQAAzgAAAHsBAAB8AQAAjwEAAJABAADTAAAAowEAADEyYnRFbXB0eVNoYXBlAACQRgAAxCsAAHAuAABFbXB0eQBidENvbGxpc2lvblNoYXBlRGF0YQAxNmJ0Q29sbGlzaW9uU2hhcGUAAABoRgAA+ysAAAAAAACMLAAAaAEAAKQBAAAHAAAAxwAAAMgAAADJAAAABwAAAAcAAAAHAAAABwAAAM4AAAAHAAAABwAAAI8BAACQAQAA0wAAAAcAAAAHAAAA1gAAAAcAAAAHAAAABwAAAAcAAAAxM2J0Q29udmV4U2hhcGUAkEYAAHwsAAAQLAAAAAAAABQtAABoAQAApQEAAJgBAADHAAAAyAAAAMkAAADKAAAAywAAAAcAAAAHAAAAzgAAAM8AAADQAAAA0QAAANIAAADTAAAA1AAAAAcAAADWAAAABwAAANgAAAByAQAAcwEAADIxYnRDb252ZXhJbnRlcm5hbFNoYXBlAJBGAAD8LAAAjCwAADE4YnRUcmlhbmdsZUNhbGxiYWNrAAAAAGhGAAAgLQAAMzFidEludGVybmFsVHJpYW5nbGVJbmRleENhbGxiYWNrAAAAaEYAAEAtAAAAAAAA5C0AAGgBAACmAQAApwEAAMcAAADIAAAAyQAAAKgBAADLAAAAqQEAAKoBAACrAQAArAEAANAAAACtAQAArgEAANMAAADUAAAArwEAANYAAACwAQAA2AAAAHIBAABzAQAAMTRidENhcHN1bGVTaGFwZQAAAACQRgAA0C0AABQtAABDYXBzdWxlU2hhcGUAYnRDYXBzdWxlU2hhcGVEYXRhAAAAAABwLgAAsQEAALIBAAAHAAAAxwAAAMgAAADJAAAABwAAAAcAAAAHAAAABwAAAM4AAAB7AQAAfAEAAI8BAACQAQAA0wAAAAcAAAAxNGJ0Q29uY2F2ZVNoYXBlAAAAAJBGAABcLgAAECwAAAAAAAAULwAAxAAAALMBAAC0AQAAxwAAAMgAAADJAAAAtQEAAMsAAAC2AQAAtwEAAM4AAAC4AQAA0AAAANEAAADSAAAA0wAAALkBAAC6AQAA1gAAALsBAADYAAAAvAEAAL0BAADbAAAAvgEAAL8BAADAAQAAwQEAAMIBAADDAQAAxAEAAMUBAAAxMGJ0Qm94U2hhcGUAAAAAkEYAAAQvAABsKwAAQm94AAAAgD8AAIC/"),f(12102,"gD8AAIC/"),f(12134,"gD8AAIC/"),f(12148,"AQAAAAIAAAAAAAAAAQAAAAIAAAADAAAABAAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAMAAAAEAAAABQAAAAYAAAAHAAAABQAAAAYAAAAHAAAABwAAAAAAAAAIMAAAxgEAAMcBAADIAQAAyQEAAMoBAADLAQAAzAEAAM0BAAAxNGJ0T3B0aW1pemVkQnZoAAAAAJBGAAD0LwAA+DcAAAAAAACMMAAAkgEAAM4BAADPAQAAWk4xNGJ0T3B0aW1pemVkQnZoNWJ1aWxkRVAyM2J0U3RyaWRpbmdNZXNoSW50ZXJmYWNlYlJLOWJ0VmVjdG9yM1M0X0UyOVF1YW50aXplZE5vZGVUcmlhbmdsZUNhbGxiYWNrAJBGAAAoMAAAZC0AAAAAAAAIMQAAkgEAANABAADRAQAAWk4xNGJ0T3B0aW1pemVkQnZoNWJ1aWxkRVAyM2J0U3RyaWRpbmdNZXNoSW50ZXJmYWNlYlJLOWJ0VmVjdG9yM1M0X0UyME5vZGVUcmlhbmdsZUNhbGxiYWNrAACQRgAArDAAAGQtAAAAAAAAgDEAANIBAADTAQAA1AEAAMcAAADIAAAAyQAAANUBAADWAQAA1wEAANgBAADOAAAAewEAAHwBAACPAQAAkAEAANMAAADZAQAA2gEAADI1YnRIZWlnaHRmaWVsZFRlcnJhaW5TaGFwZQCQRgAAZDEAAHAuAABIRUlHSFRGSUVMRAAAAAAAFDIAAGgBAADbAQAA3AEAAMcAAADIAAAAyQAAAN0BAADLAAAA3gEAAN8BAADgAQAA4QEAANAAAADiAQAA4wEAANMAAADkAQAA5QEAANYAAADmAQAA2AAAAHIBAABzAQAA5wEAADE1YnRDeWxpbmRlclNoYXBlAAAAkEYAAAAyAAAULQAAQ3lsaW5kZXJZAGJ0Q3lsaW5kZXJTaGFwZURhdGEAYnRJbnRJbmRleERhdGEAYnRTaG9ydEludEluZGV4VHJpcGxldERhdGEAYnRDaGFySW5kZXhUcmlwbGV0RGF0YQBidFZlY3RvcjNGbG9hdERhdGEAYnRWZWN0b3IzRG91YmxlRGF0YQBidE1lc2hQYXJ0RGF0YQBidFN0cmlkaW5nTWVzaEludGVyZmFjZURhdGEAMjNidFN0cmlkaW5nTWVzaEludGVyZmFjZQAAaEYAANEyAAAAAAAAWDMAAOgBAADpAQAA6gEAAOsBAADsAQAA7QEAAO4BAADvAQAA8AEAAPEBAADyAQAA8wEAAPQBAAD1AQAA9gEAADI2YnRUcmlhbmdsZUluZGV4VmVydGV4QXJyYXkAAAAAkEYAADgzAADsMgAAAAAAALwzAAD3AQAA+AEAAOoBAADrAQAA7AEAAO0BAADuAQAA7wEAAPkBAAD6AQAA8gEAAPMBAAD0AQAA9QEAAPYBAAAxNGJ0VHJpYW5nbGVNZXNoAAAAAJBGAACoMwAAWDMAAAAAAAC4NAAA+wEAAPwBAAD9AQAA/gEAAP8BAAAAAgAAAQIAAAICAAADAgAABAIAAAUCAAAGAgAABwIAAAgCAAAJAgAACgIAAAsCAABidEhhc2hlZE92ZXJsYXBwaW5nUGFpckNhY2hlOjpwcm9jZXNzQWxsT3ZlcmxhcHBpbmdQYWlycwAyOGJ0SGFzaGVkT3ZlcmxhcHBpbmdQYWlyQ2FjaGUAMjJidE92ZXJsYXBwaW5nUGFpckNhY2hlADI1YnRPdmVybGFwcGluZ1BhaXJDYWxsYmFjawAAAABoRgAAhTQAAJBGAABsNAAApDQAAJBGAABNNAAArDQAAAAAAABINQAAdwAAAAwCAAANAgAAWk4yOGJ0SGFzaGVkT3ZlcmxhcHBpbmdQYWlyQ2FjaGUxOWNsZWFuUHJveHlGcm9tUGFpcnNFUDE3YnRCcm9hZHBoYXNlUHJveHlQMTJidERpc3BhdGNoZXJFMTdDbGVhblBhaXJDYWxsYmFjawAAAJBGAADYNAAAPAsAAAAAAADsNQAAdwAAAA4CAAAPAgAAWk4yOGJ0SGFzaGVkT3ZlcmxhcHBpbmdQYWlyQ2FjaGUzN3JlbW92ZU92ZXJsYXBwaW5nUGFpcnNDb250YWluaW5nUHJveHlFUDE3YnRCcm9hZHBoYXNlUHJveHlQMTJidERpc3BhdGNoZXJFMThSZW1vdmVQYWlyQ2FsbGJhY2sAAAAAkEYAAGg1AAA8CwAAAAAAAGw2AAAQAgAAEQIAABICAAATAgAAFAIAABUCAAAWAgAAFwIAABgCAAAZAgAAGgIAABsCAAAcAgAAHQIAADE2YnREYnZ0QnJvYWRwaGFzZQAyMWJ0QnJvYWRwaGFzZUludGVyZmFjZQAAaEYAAEs2AACQRgAAODYAAGQ2AAAAAAAAtDYAAA0BAAAeAgAAHwIAACACAAARAQAAEgEAABMBAAAxOGJ0RGJ2dFRyZWVDb2xsaWRlcgAAAACQRgAAnDYAAOgbAAAAAAAA/DYAAA0BAAAhAgAADwEAACICAAARAQAAEgEAABMBAAAxOUJyb2FkcGhhc2VSYXlUZXN0ZXIAAACQRgAA5DYAAOgbAAAAAAAARDcAAA0BAAAjAgAADwEAACQCAAARAQAAEgEAABMBAAAyMEJyb2FkcGhhc2VBYWJiVGVzdGVyAACQRgAALDcAAOgbAAAxMmJ0RGlzcGF0Y2hlcgAAaEYAAFA3AAAAAAAA+DcAACUCAAAmAgAAyAEAAMkBAADKAQAAywEAAMwBAABidE9wdGltaXplZEJ2aE5vZGVEYXRhAGJ0UXVhbnRpemVkQnZoTm9kZURhdGEAYnRCdmhTdWJ0cmVlSW5mb0RhdGEAYnRRdWFudGl6ZWRCdmhGbG9hdERhdGEAMTRidFF1YW50aXplZEJ2aABoRgAA5zcAAAAAAADoDQAAiQAAACcCAAAHAAAABwAAAAcAAABSb290AC0rICAgMFgweAAobnVsbCk="),f(14400,"EQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),f(14432,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),f(14481,"Cw=="),f(14490,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),f(14539,"DA=="),f(14551,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),f(14597,"Dg=="),f(14609,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),f(14655,"EA=="),f(14667,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),f(14722,"EgAAABISEgAAAAAAAAk="),f(14771,"Cw=="),f(14783,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),f(14829,"DA=="),f(14841,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),f(14928,"AwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),f(17715,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT9gSAAAUHVyZSB2aXJ0dWFsIGZ1bmN0aW9uIGNhbGxlZCEAU3Q5dHlwZV9pbmZvAABoRgAA6kUAAE4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9FAAAAAJBGAAAARgAA+EUAAE4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRQAAAJBGAAAwRgAAJEYAAAAAAABURgAANQIAADYCAAA3AgAAOAIAADkCAAA6AgAAOwIAADwCAAAAAAAA2EYAADUCAAA9AgAANwIAADgCAAA5AgAAPgIAAD8CAABAAgAATjEwX19jeHhhYml2MTIwX19zaV9jbGFzc190eXBlX2luZm9FAAAAAJBGAACwRgAAVEYAAAAAAAA0RwAANQIAAEECAAA3AgAAOAIAADkCAABCAgAAQwIAAEQCAABOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9FAAAAkEYAAAxHAABURg=="),f(18243,"QArXozwBAAAAbxKDOgEAAAAqAgAAKwIAACwCAAAtAgAALgIAAC8C"),f(18472,"eFc="),f(18528,"BQ=="),f(18540,"MgI="),f(18564,"MwIAADQCAACYVw=="),f(18588,"Ag=="),f(18603,"//////8="),function(e,t,n){t.memory;var o=i,a=new e.Int8Array(n),f=new e.Int16Array(n),_=new e.Int32Array(n),d=new e.Uint8Array(n),m=new e.Uint16Array(n),v=new e.Uint32Array(n),y=new e.Float32Array(n),g=new e.Float64Array(n),A=e.Math.imul,b=e.Math.fround,x=e.Math.abs,T=e.Math.clz32,S=e.Math.min,E=e.Math.max,C=e.Math.floor,w=(e.Math.ceil,e.Math.sqrt),k=t.abort,O=(e.NaN,e.Infinity,t.a),R=t.b,F=t.c,I=t.d,M=t.e,P=t.f,D=t.g,B=5265824,N=0;function L(e,t,i){var n,r,s=0,l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0,y=0;if(B=r=B-16|0,o[_[4565]](4732),(0|(s=_[e+28>>2]))<=-1)for(_[e+32>>2]<=-1&&((l=_[e+36>>2])&&(d[e+40|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+36>>2]=0),_[e+32>>2]=0,_[e+36>>2]=0,a[e+40|0]=1);_[_[e+36>>2]+(s<<2)>>2]=0,c=(l=s+1|0)>>>0>=s>>>0,s=l,c;);if(_[e+28>>2]=0,function(e){var t,i,n=0,r=0,o=0,a=0,s=0,l=0;if(B=i=B-16|0,!((0|(t=_[e+4>>2]))<=0)){for(a=_[e+12>>2];;){if(l=s=(r<<3)+a|0,n=r,o=_[s>>2],(0|n)!=(0|o))for(;n=(o<<3)+a|0,_[l>>2]=_[n>>2],n=_[n>>2],o=_[(l=(n<<3)+a|0)>>2],(0|n)!=(0|o););if(_[s>>2]=n,(0|t)==(0|(r=r+1|0)))break}(0|t)<2||function e(t,i,n,r){for(var o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0;;){for(h=n,s=_[t+12>>2],p=_[s+((n+r|0)/2<<3)>>2],l=n,o=r;;)if(l=(n=l)+1|0,!(_[(a=(n<<3)+s|0)>>2]<(0|p))){for(c=o;c=(o=c)+-1|0,_[(u=(f=o<<3)+s|0)>>2]>(0|p););if((0|n)<=(0|o)&&(n=_[a>>2],o=_[a+4>>2],s=_[u+4>>2],_[a>>2]=_[u>>2],_[a+4>>2]=s,a=_[t+12>>2]+f|0,_[a>>2]=n,_[a+4>>2]=o,o=c,n=l),!((0|n)<=(0|o)))break;s=_[t+12>>2],l=n}if((0|o)>(0|h)&&e(t,i,h,o),!((0|n)<(0|r)))break}}(e,i+8|0,0,t+-1|0)}B=i+16|0}(e+4|0),(0|(n=_[e+8>>2]))>=1)for(c=0;;){for(p=_[e+16>>2],v=_[p+((l=c)<<3)>>2];f=c,(0|v)==_[((c=c+1|0)<<3)+p>>2]&&(0|c)<(0|n););e:if(!(h=(0|l)>(0|f))){for(m=_[i+16>>2],y=1,s=l;u=_[(_[4+((s<<3)+p|0)>>2]<<2)+m>>2],(0|v)==_[u+208>>2]&&(y&=4!=(0|(u=_[u+220>>2]))&1!=(0|u)),u=(0|s)<(0|f),s=s+1|0,u;);if(!y){if(h)break e;for(;;){if(s=_[_[i+16>>2]+(_[4+((l<<3)+p|0)>>2]<<2)>>2],(0|v)!=_[s+208>>2]|2!=_[s+220>>2]||(4!=(-2&_[s+220>>2])&&(_[s+220>>2]=3),_[s+224>>2]=0),(0|l)>=(0|f))break e;l=l+1|0,p=_[e+16>>2]}}if(!h)for(;;){if(s=_[_[i+16>>2]+(_[4+((l<<3)+p|0)>>2]<<2)>>2],(0|v)==_[s+208>>2]&&4!=(-2&_[s+220>>2])&&(_[s+220>>2]=2),(0|l)>=(0|f))break e;l=l+1|0,p=_[e+16>>2]}}if(!((0|c)<(0|n)))break}if((0|(f=0|o[_[_[t>>2]+36>>2]](t)))>=1)for(c=0;;){if(u=0|o[_[_[t>>2]+40>>2]](t,c),s=_[u+840>>2],l=_[u+836>>2],(!(!s|2==_[s+220>>2])||2!=_[l+220>>2]&&l)&&(!(2&(i=_[l+204>>2]))|4&i|2==_[l+220>>2]||pr(s,0),!(2&(i=_[s+204>>2]))|4&i|2==_[s+220>>2]||pr(l,0),d[e+64|0]&&o[_[_[t>>2]+28>>2]](t,l,s))){if((0|(i=_[e+28>>2]))==_[e+32>>2]&&!((0|i)>=(0|(h=i?i<<1:1)))){if(s=0,m=0,h&&(_[5585]=_[5585]+1,m=0|o[_[4567]](h<<2,16),i=_[e+28>>2]),(0|i)>=1)for(;_[(l=s<<2)+m>>2]=_[l+_[e+36>>2]>>2],(0|(s=s+1|0))!=(0|i););(l=_[e+36>>2])&&(d[e+40|0]&&(l&&(_[5586]=_[5586]+1,o[_[4568]](l)),i=_[e+28>>2]),_[e+36>>2]=0),_[e+36>>2]=m,a[e+40|0]=1,_[e+32>>2]=h}_[_[e+36>>2]+(i<<2)>>2]=u,_[e+28>>2]=i+1}if((0|f)==(0|(c=c+1|0)))break}o[_[4566]](),B=r+16|0}function z(e,t,i){var n,r=0,o=b(0),s=0,l=b(0),c=0,u=0,h=b(0),p=0,f=b(0),m=0,g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=0,O=0,R=b(0),F=b(0);B=n=B-16|0;e:{if(c=_[t+372>>2],!(v[c+32>>2]<2)&&function e(t){var i,n=0,r=0,o=0,a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=b(0),d=b(0),m=0,v=b(0),g=b(0);B=i=B-48|0;t:{i:{r=_[t+372>>2];n:if(!((n=_[r+32>>2]+-1|0)>>>0>3)){switch(n-1|0){default:for(o=_[t+364>>2],n=1;;){if(_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,_[(i+32|0)+(a<<2)>>2]=1065353216,_[16+(h=(n<<2)+r|0)>>2]=0,o=o+-1|0,_[t+364>>2]=o,o=_[348+((o<<2)+t|0)>>2],_[h>>2]=o,_[r+32>>2]=n+1,an(t,i+32|0,o),e(t))break i;if(r=_[t+372>>2],n=_[r+32>>2]+-1|0,_[r+32>>2]=n,o=_[t+364>>2],n=_[r+(n<<2)>>2],_[348+((o<<2)+t|0)>>2]=n,r=_[t+372>>2],_[i+28>>2]=0,y[i+24>>2]=-y[i+40>>2],y[i+20>>2]=-y[i+36>>2],y[i+16>>2]=-y[i+32>>2],h=_[r+32>>2],_[16+(m=r+(h<<2)|0)>>2]=0,_[t+364>>2]=o,_[m>>2]=n,_[r+32>>2]=h+1,an(t,i+16|0,n),e(t))break i;if(r=_[t+372>>2],n=_[r+32>>2]+-1|0,_[r+32>>2]=n,r=_[r+(n<<2)>>2],n=_[t+364>>2],o=n+1|0,_[t+364>>2]=o,_[348+((n<<2)+t|0)>>2]=r,3==(0|(a=a+1|0)))break n;r=_[t+372>>2],n=_[r+32>>2]}case 0:for(n=_[r+4>>2],r=_[r>>2],s=b(y[n+24>>2]-y[r+24>>2]),c=b(y[n+20>>2]-y[r+20>>2]),l=b(y[n+16>>2]-y[r+16>>2]),r=0;;){if(_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,_[(i+32|0)+(r<<2)>>2]=1065353216,_[i+28>>2]=0,u=y[i+32>>2],p=y[i+40>>2],f=b(b(s*u)-b(l*p)),y[i+20>>2]=f,d=y[i+36>>2],p=b(b(c*p)-b(s*d)),y[i+16>>2]=p,u=b(b(l*d)-b(c*u)),y[i+24>>2]=u,b(b(u*u)+b(b(p*p)+b(f*f)))>b(0)){if(n=_[t+372>>2],o=_[n+32>>2],_[16+(a=(o<<2)+n|0)>>2]=0,h=_[t+364>>2]+-1|0,_[t+364>>2]=h,m=a,a=_[348+((h<<2)+t|0)>>2],_[m>>2]=a,_[n+32>>2]=o+1,an(t,i+16|0,a),e(t))break i;if(n=_[t+372>>2],o=_[n+32>>2]+-1|0,_[n+32>>2]=o,a=_[t+364>>2],o=_[n+(o<<2)>>2],_[348+((a<<2)+t|0)>>2]=o,n=_[t+372>>2],_[i+12>>2]=0,y[i+8>>2]=-y[i+24>>2],y[i+4>>2]=-y[i+20>>2],y[i>>2]=-y[i+16>>2],h=_[n+32>>2],_[16+(m=n+(h<<2)|0)>>2]=0,_[t+364>>2]=a,_[m>>2]=o,_[n+32>>2]=h+1,an(t,i,o),e(t))break i;n=_[t+372>>2],o=_[n+32>>2]+-1|0,_[n+32>>2]=o,n=_[n+(o<<2)>>2],o=_[t+364>>2],_[t+364>>2]=o+1,_[348+((o<<2)+t|0)>>2]=n}if(3==(0|(r=r+1|0)))break}break n;case 1:if(n=_[r+4>>2],f=y[n+20>>2],o=_[r+8>>2],p=y[o+24>>2],a=_[r>>2],s=y[a+24>>2],u=y[n+24>>2],d=y[o+20>>2],c=y[a+20>>2],v=y[o+16>>2],l=y[a+16>>2],g=y[n+16>>2],_[i+44>>2]=0,f=b(f-c),p=b(p-s),u=b(u-s),d=b(d-c),s=b(b(f*p)-b(u*d)),y[i+32>>2]=s,c=u,u=b(v-l),l=b(g-l),c=b(b(c*u)-b(l*p)),y[i+36>>2]=c,l=b(b(l*d)-b(f*u)),y[i+40>>2]=l,!(b(b(l*l)+b(b(s*s)+b(c*c)))>b(0)))break n;if(_[r+28>>2]=0,n=_[t+364>>2]+-1|0,_[t+364>>2]=n,n=_[348+((n<<2)+t|0)>>2],_[r+32>>2]=4,_[r+12>>2]=n,an(t,i+32|0,n),e(t))break i;if(r=_[t+372>>2],n=_[r+32>>2]+-1|0,_[r+32>>2]=n,o=_[t+364>>2],n=_[r+(n<<2)>>2],_[348+((o<<2)+t|0)>>2]=n,r=_[t+372>>2],_[i+28>>2]=0,y[i+24>>2]=-y[i+40>>2],y[i+20>>2]=-y[i+36>>2],y[i+16>>2]=-y[i+32>>2],a=_[r+32>>2],_[16+(h=r+(a<<2)|0)>>2]=0,_[t+364>>2]=o,_[h>>2]=n,_[r+32>>2]=a+1,an(t,i+16|0,n),n=1,e(t))break t;r=_[t+372>>2],n=_[r+32>>2]+-1|0,_[r+32>>2]=n,r=_[r+(n<<2)>>2],n=_[t+364>>2],_[t+364>>2]=n+1,_[348+((n<<2)+t|0)>>2]=r,n=0;break t;case 2:}if(t=_[r>>2],o=_[r+12>>2],s=y[o+16>>2],f=b(y[t+16>>2]-s),a=_[r+4>>2],c=y[o+20>>2],p=b(y[a+20>>2]-c),r=_[r+8>>2],l=y[o+24>>2],u=b(y[r+24>>2]-l),d=b(y[t+20>>2]-c),v=b(y[a+24>>2]-l),g=b(y[r+16>>2]-s),l=b(y[t+24>>2]-l),s=b(y[a+16>>2]-s),c=b(y[r+20>>2]-c),s=b(b(b(b(f*p)*u)+b(b(b(b(b(d*v)*g)+b(b(l*s)*c))-b(b(f*v)*c))-b(b(d*s)*u)))-b(b(l*p)*g)),n=1,s!=b(0)&s==s)break t}n=0;break t}n=1}return B=i+48|0,n}(t)){if(r=_[e+18496>>2]){for(p=_[e+18508>>2],u=_[e+18500>>2];(s=_[r+48>>2])&&(_[s+44>>2]=_[r+44>>2]),(s=_[r+44>>2])&&(_[s+48>>2]=_[r+48>>2]),_[e+18496>>2]==(0|r)&&(_[e+18496>>2]=_[r+48>>2]),_[r+44>>2]=0,_[r+48>>2]=_[e+18504>>2],(s=_[e+18504>>2])&&(_[s+44>>2]=r),u=u+-1|0,_[e+18504>>2]=r,p=p+1|0,r=_[e+18496>>2];);_[e+18508>>2]=p,_[e+18500>>2]=u}if(_[e+18492>>2]=0,_[e>>2]=0,s=_[c>>2],u=_[c+12>>2],l=y[u+16>>2],C=b(y[s+16>>2]-l),r=_[c+4>>2],S=y[u+20>>2],h=b(y[r+20>>2]-S),m=_[c+8>>2],o=y[u+24>>2],E=b(y[m+24>>2]-o),g=b(y[s+20>>2]-S),A=b(y[r+24>>2]-o),x=b(y[m+16>>2]-l),f=b(y[s+24>>2]-o),l=b(y[r+16>>2]-l),o=b(y[m+20>>2]-S),b(b(b(b(C*h)*E)+b(b(b(b(b(g*A)*x)+b(b(f*l)*o))-b(b(C*A)*o))-b(b(g*l)*E)))-b(b(f*h)*x))<b(0)?(_[c+4>>2]=s,_[c>>2]=r,u=_[c+16>>2],_[c+16>>2]=_[c+20>>2],_[c+20>>2]=u,u=s):(u=r,r=s),k=zn(e,r,u,m,1),m=zn(e,_[c+4>>2],_[c>>2],_[c+12>>2],1),u=zn(e,_[c+8>>2],_[c+4>>2],_[c+12>>2],1),s=zn(e,_[c>>2],_[c+8>>2],_[c+12>>2],1),4==_[e+18500>>2]){if(r=_[e+18496>>2],h=y[r+16>>2],p=_[r+48>>2]){for(h=b(h*h);o=y[p+16>>2],r=(i=(o=b(o*o))<h)?p:r,h=i?o:h,p=_[p+48>>2];);h=y[r+16>>2]}for(i=_[r+28>>2],O=_[r+24>>2],c=_[r+20>>2],o=y[r+12>>2],E=y[r+8>>2],f=y[r+4>>2],l=y[r>>2],_[k+32>>2]=m,a[k+52|0]=0,_[m+32>>2]=k,a[m+52|0]=0,_[k+36>>2]=u,a[k+53|0]=0,_[u+32>>2]=k,a[u+52|0]=1,_[k+40>>2]=s,a[k+54|0]=0,_[s+32>>2]=k,a[s+52|0]=2,_[m+36>>2]=s,a[m+53|0]=2,_[s+40>>2]=m,a[s+54|0]=1,_[m+40>>2]=u,a[m+54|0]=1,_[u+36>>2]=m,a[u+53|0]=258,a[u+54|0]=1,_[u+40>>2]=s,_[s+36>>2]=u,a[s+53|0]=2,_[e>>2]=0,u=0;;){t:{i:{if(!((s=_[e+18492>>2])>>>0<=127)){_[e>>2]=6;break t}if(p=0,_[n+8>>2]=0,_[n>>2]=0,_[n+4>>2]=0,_[e+18492>>2]=s+1,u=u+1|0,a[r+55|0]=u,an(t,r,m=60+(s=(s<<5)+e|0)|0),!(b(b(b(b(y[r>>2]*y[s+76>>2])+b(y[r+4>>2]*y[s+80>>2]))+b(y[r+8>>2]*y[s+84>>2]))-y[r+16>>2])>b(9999999747378752e-20))){_[e>>2]=7;break t}for(;;){if(!(s=oo(e,u,m,_[32+((p<<2)+r|0)>>2],d[52+(r+p|0)|0],n)))break i;if(!((p=p+1|0)>>>0<3))break}}if(s&v[n+8>>2]>2){if(s=_[n>>2],i=_[n+4>>2],_[s+36>>2]=i,a[s+53|0]=2,_[i+40>>2]=s,a[i+54|0]=1,(i=_[r+48>>2])&&(_[i+44>>2]=_[r+44>>2]),(i=_[r+44>>2])&&(_[i+48>>2]=_[r+48>>2]),_[e+18496>>2]==(0|r)&&(_[e+18496>>2]=_[r+48>>2]),_[e+18500>>2]=_[e+18500>>2]+-1,_[r+44>>2]=0,_[r+48>>2]=_[e+18504>>2],(i=_[e+18504>>2])&&(_[i+44>>2]=r),_[e+18504>>2]=r,_[e+18508>>2]=_[e+18508>>2]+1,r=_[e+18496>>2],h=y[r+16>>2],p=_[r+48>>2]){for(h=b(h*h);o=y[p+16>>2],r=(i=(o=b(o*o))<h)?p:r,h=i?o:h,p=_[p+48>>2];);h=y[r+16>>2]}if(i=_[r+28>>2],O=_[r+24>>2],c=_[r+20>>2],o=y[r+12>>2],E=y[r+8>>2],f=y[r+4>>2],l=y[r>>2],255!=(0|u))continue}else _[e>>2]=4}break}y[e+56>>2]=h,y[e+40>>2]=l,_[e+4>>2]=c,y[e+52>>2]=o,y[e+48>>2]=E,y[e+44>>2]=f,_[e+36>>2]=3,_[e+12>>2]=i,_[e+8>>2]=O,R=b(l*h),g=b(y[O+16>>2]-R),S=b(f*h),A=b(y[i+20>>2]-S),l=b(y[O+20>>2]-S),x=b(y[i+16>>2]-R),o=b(b(g*A)-b(l*x)),F=b(o*o),C=b(E*h),f=b(y[i+24>>2]-C),T=b(l*f),l=b(y[O+24>>2]-C),o=b(T-b(l*A)),T=b(o*o),o=b(b(l*x)-b(g*f)),h=b(w(b(F+b(T+b(o*o))))),y[e+20>>2]=h,g=b(y[i+16>>2]-R),A=b(y[c+20>>2]-S),l=b(y[i+20>>2]-S),x=b(y[c+16>>2]-R),o=b(b(g*A)-b(l*x)),F=b(o*o),f=b(y[c+24>>2]-C),T=b(l*f),l=b(y[i+24>>2]-C),o=b(T-b(l*A)),T=b(o*o),o=b(b(l*x)-b(g*f)),E=b(w(b(F+b(T+b(o*o))))),y[e+24>>2]=E,g=b(y[c+16>>2]-R),A=b(y[O+20>>2]-S),l=b(y[c+20>>2]-S),x=b(y[O+16>>2]-R),o=b(b(g*A)-b(l*x)),F=b(o*o),f=b(y[O+24>>2]-C),T=b(l*f),l=b(y[c+24>>2]-C),o=b(T-b(l*A)),T=b(o*o),o=b(b(l*x)-b(g*f)),o=b(w(b(F+b(T+b(o*o))))),l=b(o+b(h+E)),y[e+28>>2]=o/l,y[e+24>>2]=E/l,y[e+20>>2]=h/l,e=_[e>>2];break e}}_[e>>2]=8,g=y[i>>2],A=y[i+4>>2],o=y[i+8>>2],_[e+52>>2]=0,x=b(-o),y[e+48>>2]=x,f=b(-A),y[e+44>>2]=f,l=b(-g),y[e+40>>2]=l,(o=b(w(b(b(b(g*g)+b(A*A))+b(o*o)))))>b(0)?(o=b(b(1)/o),y[e+48>>2]=o*x,y[e+44>>2]=o*f,y[e+40>>2]=o*l):(_[e+48>>2]=0,_[e+40>>2]=1065353216,_[e+44>>2]=0),_[e+52>>2]=0,_[e+56>>2]=0,_[e+36>>2]=1,t=_[c>>2],_[e+20>>2]=1065353216,_[e+4>>2]=t,e=8}return B=n+16|0,e}function G(e,t,i,n,r,o){var a,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=0,x=0,T=0,S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=0,I=b(0),M=b(0),P=b(0),D=b(0),N=0;if(B=a=B-96|0,_[a+92>>2]=n,_[a+88>>2]=i,_[a+84>>2]=t,_[a+80>>2]=e,s=y[n>>2],c=y[e>>2],l=y[n+4>>2],S=y[e+4>>2],p=y[n+8>>2],E=y[e+8>>2],_[a+44>>2]=0,f=b(E-p),y[a+40>>2]=f,d=b(S-l),y[a+36>>2]=d,v=b(c-s),y[a+32>>2]=v,C=y[t>>2],w=y[t+4>>2],I=y[t+8>>2],_[a+60>>2]=0,m=b(I-p),y[a+56>>2]=m,k=b(w-l),y[a+52>>2]=k,O=b(C-s),y[a+48>>2]=O,M=y[i>>2],P=y[i+4>>2],D=y[i+8>>2],_[a+76>>2]=0,R=b(D-p),y[a+72>>2]=R,g=b(P-l),y[a+68>>2]=g,u=b(M-s),y[a+64>>2]=u,h=b(-1),!((m=b(b(b(b(v*k)*R)+b(b(b(b(b(d*m)*u)+b(b(f*O)*g))-b(b(v*m)*g))-b(b(d*O)*R)))-b(b(f*k)*u)))==b(0)|m!=m)&&(k=b(S-w),O=b(C-M),C=b(c-C),w=b(w-P),g=b(E*b(b(k*O)-b(C*w))),u=c,c=b(E-I),E=b(I-D),b(m*b(g+b(b(u*b(b(c*w)-b(k*E)))+b(S*b(b(C*E)-b(c*O))))))<=b(0))){for(_[a+24>>2]=0,_[a+16>>2]=0,_[a+20>>2]=0,_[a+12>>2]=0;x=_[2908+(A=F<<2)>>2],c=y[8+(T=(a+32|0)+(x<<4)|0)>>2],S=y[T+4>>2],u=b(b(b(d*c)-b(f*S))*s),s=y[T>>2],b(m*b(b(u+b(l*b(b(f*s)-b(c*v))))+b(b(b(S*v)-b(d*s))*p)))>b(0)&&(T=x<<2,(s=De(_[A+(a+80|0)>>2],_[T+(a+80|0)>>2],n,a+16|0,a+12|0))<h^1&&!(h<b(0))||(N=1<<x,x=_[a+12>>2],_[o>>2]=((N&x<<30>>31)+(x<<1&8)|0)+(0-(1&x)&1<<F),_[r+A>>2]=_[a+16>>2],_[r+T>>2]=_[a+20>>2],_[(_[T+2908>>2]<<2)+r>>2]=0,_[r+12>>2]=_[a+24>>2],h=s)),3!=(0|(F=F+1|0));)v=y[(A=(a+32|0)+(F<<4)|0)>>2],f=y[A+8>>2],d=y[A+4>>2],p=y[n+8>>2],l=y[n+4>>2],s=y[n>>2];h<b(0)&&(_[o>>2]=15,h=y[i+4>>2],s=y[t+8>>2],l=y[n>>2],p=y[i+8>>2],f=y[t>>2],d=y[n+4>>2],g=b(b(b(h*s)*l)+b(b(p*f)*d)),u=s,s=y[i>>2],c=b(h*f),h=y[n+8>>2],c=b(b(g-b(d*b(u*s)))-b(c*h)),u=h,h=y[t+4>>2],h=b(b(b(c+b(u*b(s*h)))-b(l*b(p*h)))/m),y[r>>2]=h,s=y[e+4>>2],l=y[i+8>>2],p=y[n>>2],f=y[e+8>>2],d=y[i>>2],v=y[n+4>>2],g=b(b(b(s*l)*p)+b(b(f*d)*v)),u=l,l=y[e>>2],c=b(s*d),s=y[n+8>>2],c=b(b(g-b(v*b(u*l)))-b(c*s)),u=s,s=y[i+4>>2],s=b(b(b(c+b(u*b(l*s)))-b(p*b(f*s)))/m),y[r+4>>2]=s,l=y[t+4>>2],p=y[e+8>>2],f=y[n>>2],d=y[t+8>>2],v=y[e>>2],c=y[n+4>>2],R=b(b(b(l*p)*f)+b(b(d*v)*c)),u=p,p=y[t>>2],g=b(l*v),l=y[n+8>>2],c=b(b(R-b(c*b(u*p)))-b(g*l)),u=l,l=y[e+4>>2],m=b(b(b(c+b(u*b(p*l)))-b(f*b(d*l)))/m),y[r+8>>2]=m,y[r+12>>2]=b(1)-b(b(h+s)+m),h=b(0))}return B=a+96|0,h}function U(e,t,i){var n,r=0,o=b(0),a=b(0),s=b(0);B=n=B-80|0,_[e+240>>2]&&(y[e+176>>2]=y[e+64>>2]+y[e+176>>2],y[e+192>>2]=y[e+80>>2]+y[e+192>>2],y[e+180>>2]=y[e+68>>2]+y[e+180>>2],y[e+184>>2]=y[e+72>>2]+y[e+184>>2],y[e+196>>2]=y[e+84>>2]+y[e+196>>2],y[e+200>>2]=y[e+88>>2]+y[e+200>>2],(y[e+144>>2]!=b(0)|y[e+148>>2]!=b(0)|y[e+152>>2]!=b(0)|y[e+160>>2]!=b(0)||y[e+164>>2]!=b(0)||y[e+168>>2]!=b(0))&&(o=y[e+164>>2],a=y[e+168>>2],s=y[e+160>>2],_[n+12>>2]=0,y[n>>2]=s*i,y[n+8>>2]=a*i,y[n+4>>2]=o*i,Tn(e,e+144|0,n,t,n+16|0),r=_[n+28>>2],_[e+8>>2]=_[n+24>>2],_[e+12>>2]=r,r=_[n+20>>2],_[e>>2]=_[n+16>>2],_[e+4>>2]=r,r=_[n+44>>2],_[e+24>>2]=_[n+40>>2],_[e+28>>2]=r,r=_[n+36>>2],_[e+16>>2]=_[n+32>>2],_[e+20>>2]=r,r=_[n+52>>2],_[e+32>>2]=_[n+48>>2],_[e+36>>2]=r,r=_[n+60>>2],_[e+40>>2]=_[n+56>>2],_[e+44>>2]=r,r=_[n+68>>2],_[e+48>>2]=_[n+64>>2],_[e+52>>2]=r,r=_[n+76>>2],_[e+56>>2]=_[n+72>>2],_[e+60>>2]=r)),B=n+80|0}function X(e,t,i){var n,r,s,l,c,u=b(0),h=b(0),p=b(0),f=0,m=b(0),v=0,g=b(0),T=b(0),S=0,E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=0,I=b(0),M=b(0),P=b(0),D=0,N=b(0),L=0,z=0,G=b(0),U=b(0),X=b(0),j=b(0),W=b(0),Y=b(0),q=0,Q=0,Z=0,K=b(0),J=0,$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=0,ae=0;if(B=n=B-80|0,r=_[t+840>>2],l=fn(e,s=_[t+836>>2],y[i+12>>2]),c=fn(e,r,y[i+12>>2]),S=(v=_[e+16>>2])+A(l,244)|0,u=y[S+128>>2],p=b(u*u),u=y[S+132>>2],p=b(p+b(u*u)),u=y[S+136>>2],!(b(p+b(u*u))<b(14210854715202004e-30)&&(S=v+A(c,244)|0,u=y[S+128>>2],p=b(u*u),u=y[S+132>>2],p=b(p+b(u*u)),u=y[S+136>>2],b(p+b(u*u))<b(14210854715202004e-30))||(0|(F=_[t+844>>2]))<1))for(oe=L=v+A(c,244)|0,ae=z=v+A(l,244)|0;;){if(f=A(J,208)+t|0,y[f+84>>2]<=y[t+852>>2]){if(Q=f+4|0,F=S=_[e+28>>2],(0|S)==_[e+32>>2]&&(F=S,!((0|S)>=(0|(D=S?S<<1:1))))){if(F=0,v=S,q=0,D&&(_[5585]=_[5585]+1,q=0|o[_[4567]](A(D,152),16),v=_[e+28>>2]),(0|v)>=1)for(;Xi((Z=A(F,152))+q|0,_[e+36>>2]+Z|0,152),(0|v)!=(0|(F=F+1|0)););(v=_[e+36>>2])&&(d[e+40|0]&&v&&(_[5586]=_[5586]+1,o[_[4568]](v)),_[e+36>>2]=0),_[e+36>>2]=q,a[e+40|0]=1,_[e+32>>2]=D,F=_[e+28>>2]}_[e+28>>2]=F+1,q=_[e+36>>2]+A(S,152)|0,_[q+148>>2]=c,_[q+144>>2]=l,_[q+132>>2]=Q,G=y[f+52>>2],R=y[f+56>>2],g=y[f+60>>2],m=y[s+52>>2],h=y[s+56>>2],u=y[s+60>>2],_[n+76>>2]=0,N=b(g-u),y[n+72>>2]=N,C=b(R-h),y[n+68>>2]=C,T=b(G-m),y[n+64>>2]=T,G=y[f+36>>2],R=y[f+40>>2],g=y[f+44>>2],m=y[r+52>>2],h=y[r+56>>2],u=y[r+60>>2],_[n+60>>2]=0,p=b(g-u),y[n+56>>2]=p,R=b(R-h),y[n+52>>2]=R,g=b(G-m),y[n+48>>2]=g,$=b(0),ee=b(0),te=b(0),ie=b(0),_[z+240>>2]&&(m=b(y[z+192>>2]+y[z+224>>2]),h=b(y[z+196>>2]+y[z+228>>2]),ie=b(b(y[z+184>>2]+y[z+216>>2])+b(b(C*m)-b(T*h))),u=b(y[z+200>>2]+y[ae+232>>2]),te=b(b(y[z+180>>2]+y[z+212>>2])+b(b(T*u)-b(N*m))),ee=b(b(y[z+176>>2]+y[z+208>>2])+b(b(N*h)-b(C*u)))),ne=b(0),re=b(0),_[L+240>>2]&&(m=b(y[L+192>>2]+y[L+224>>2]),h=b(y[L+196>>2]+y[L+228>>2]),re=b(b(y[L+184>>2]+y[L+216>>2])+b(b(R*m)-b(g*h))),u=b(y[L+200>>2]+y[oe+232>>2]),ne=b(b(y[L+180>>2]+y[L+212>>2])+b(b(g*u)-b(p*m))),$=b(b(y[L+176>>2]+y[L+208>>2])+b(b(p*h)-b(R*u)))),G=y[f+76>>2],R=y[(Z=f+68|0)>>2],g=y[f+72>>2],H(e,q,l,c,Q,i,n+44|0,n- -64|0,n+48|0),_[q+140>>2]=_[e+68>>2],y[f+92>>2]>b(0)&&(so(e,Z,l,c,S,y[f+96>>2]),p=y[f+76>>2],b(x(p))>b(.7071067690849304)?(u=y[f+72>>2],_[n+24>>2]=0,O=u,u=b(b(p*p)+b(u*u)),h=b(b(1)/b(w(u))),I=b(O*h),y[n+32>>2]=I,E=b(h*b(-p)),y[n+28>>2]=E,M=b(u*h),y[n+8>>2]=M,u=y[Z>>2],P=b(I*b(-u)),y[n+12>>2]=P,k=b(0),O=b(u*E)):(u=y[Z>>2],m=y[f+72>>2],_[n+32>>2]=0,O=u,u=b(b(u*u)+b(m*m)),h=b(b(1)/b(w(u))),E=b(O*h),y[n+28>>2]=E,k=b(h*b(-m)),y[n+24>>2]=k,P=b(p*k),y[n+12>>2]=P,M=b(E*b(-p)),y[n+8>>2]=M,I=b(0),O=b(u*h)),u=b(b(1)/b(w(b(b(b(k*k)+b(E*E))+b(I*I))))),I=b(I*u),y[n+32>>2]=I,E=b(E*u),y[n+28>>2]=E,k=b(k*u),y[n+24>>2]=k,u=b(b(1)/b(w(b(b(O*O)+b(b(M*M)+b(P*P)))))),O=b(O*u),y[n+16>>2]=O,P=b(P*u),y[n+12>>2]=P,M=b(M*u),y[n+8>>2]=M,(F=2&_[s+180>>2])&&(m=y[s+172>>2],U=y[s+44>>2],X=y[s+12>>2],j=y[s+28>>2],h=y[s+164>>2],p=y[s+36>>2],W=y[s+4>>2],Y=y[s+20>>2],u=y[s+168>>2],N=y[s+40>>2],C=y[s+8>>2],T=y[s+24>>2],_[n+36>>2]=0,K=p,p=b(h*b(b(b(k*W)+b(E*Y))+b(I*p))),h=b(u*b(b(b(k*C)+b(E*T))+b(I*N))),u=b(m*b(b(b(k*X)+b(E*j))+b(I*U))),I=b(b(b(K*p)+b(N*h))+b(U*u)),y[n+32>>2]=I,E=b(b(b(Y*p)+b(T*h))+b(j*u)),y[n+28>>2]=E,k=b(b(b(W*p)+b(C*h))+b(X*u)),y[n+24>>2]=k),(v=2&_[r+180>>2])&&(m=y[r+172>>2],U=y[r+44>>2],X=y[r+12>>2],j=y[r+28>>2],h=y[r+164>>2],p=y[r+36>>2],W=y[r+4>>2],Y=y[r+20>>2],u=y[r+168>>2],N=y[r+40>>2],C=y[r+8>>2],T=y[r+24>>2],_[n+36>>2]=0,K=p,p=b(h*b(b(b(W*k)+b(Y*E))+b(p*I))),h=b(u*b(b(b(k*C)+b(E*T))+b(I*N))),u=b(m*b(b(b(k*X)+b(E*j))+b(I*U))),I=b(b(b(K*p)+b(N*h))+b(U*u)),y[n+32>>2]=I,E=b(b(b(Y*p)+b(T*h))+b(j*u)),y[n+28>>2]=E,k=b(b(b(W*p)+b(C*h))+b(X*u)),y[n+24>>2]=k),F&&(m=y[s+172>>2],U=y[s+44>>2],X=y[s+12>>2],j=y[s+28>>2],h=y[s+164>>2],p=y[s+36>>2],W=y[s+4>>2],Y=y[s+20>>2],u=y[s+168>>2],N=y[s+40>>2],C=y[s+8>>2],T=y[s+24>>2],_[n+20>>2]=0,K=p,p=b(h*b(b(b(M*W)+b(P*Y))+b(O*p))),h=b(u*b(b(b(M*C)+b(P*T))+b(O*N))),u=b(m*b(b(b(M*X)+b(P*j))+b(O*U))),O=b(b(b(K*p)+b(N*h))+b(U*u)),y[n+16>>2]=O,P=b(b(b(Y*p)+b(T*h))+b(j*u)),y[n+12>>2]=P,M=b(b(b(W*p)+b(C*h))+b(X*u)),y[n+8>>2]=M),v&&(m=y[r+172>>2],U=y[r+44>>2],X=y[r+12>>2],j=y[r+28>>2],h=y[r+164>>2],p=y[r+36>>2],W=y[r+4>>2],Y=y[r+20>>2],u=y[r+168>>2],N=y[r+40>>2],C=y[r+8>>2],T=y[r+24>>2],_[n+20>>2]=0,K=p,p=b(h*b(b(b(W*M)+b(Y*P))+b(p*O))),h=b(u*b(b(b(M*C)+b(P*T))+b(O*N))),u=b(m*b(b(b(M*X)+b(P*j))+b(O*U))),O=b(b(b(K*p)+b(N*h))+b(U*u)),y[n+16>>2]=O,P=b(b(b(Y*p)+b(T*h))+b(j*u)),y[n+12>>2]=P,M=b(b(b(W*p)+b(C*h))+b(X*u)),y[n+8>>2]=M),+b(w(b(b(b(k*k)+b(E*E))+b(I*I))))>.001&&so(e,n+24|0,l,c,S,y[f+92>>2]),+b(w(b(b(b(M*M)+b(P*P))+b(O*O))))>.001&&so(e,n+8|0,l,c,S,y[f+92>>2]));e:if(1&a[f+132|0]&&32&d[i+72|0])xn(e,f+172|0,l,c,S,Q,n- -64|0,n+48|0,u=y[n+44>>2],i,y[f+148>>2],y[f+164>>2]),16&d[i+72|0]&&xn(e,f+188|0,l,c,S,Q,n- -64|0,n+48|0,u,i,y[f+152>>2],y[f+164>>2]);else{if(p=y[Z>>2],C=y[f+72>>2],T=y[f+76>>2],_[f+184>>2]=0,m=b(ee-$),h=b(te-ne),u=b(ie-re),G=b(b(b(m*R)+b(h*g))+b(u*G)),R=b(u-b(T*G)),y[f+180>>2]=R,g=b(h-b(G*C)),y[f+176>>2]=g,D=f+172|0,h=b(m-b(G*p)),y[D>>2]=h,!(64&d[i+72|0])&&(u=b(b(b(h*h)+b(g*g))+b(R*R)))>b(1.1920928955078125e-7)){if(u=b(b(1)/b(w(u))),y[D>>2]=h*u,y[f+176>>2]=g*u,y[f+180>>2]=R*u,un(s,D),un(r,D),xn(e,D,l,c,S,Q,n- -64|0,n+48|0,u=y[n+44>>2],i,b(0),b(0)),!(16&d[i+72|0]))break e;T=y[f+176>>2],p=y[f+72>>2],G=y[Z>>2],m=y[f+180>>2],R=y[D>>2],h=y[f+76>>2],_[f+200>>2]=0,g=b(b(T*h)-b(m*p)),m=b(b(m*G)-b(h*R)),h=b(b(p*R)-b(T*G)),R=b(b(1)/b(w(b(b(b(g*g)+b(m*m))+b(h*h))))),y[f+196>>2]=h*R,y[f+192>>2]=m*R,y[(v=f+188|0)>>2]=g*R,un(s,v),un(r,v),xn(e,v,l,c,S,Q,n- -64|0,n+48|0,u,i,b(0),b(0));break e}if(v=F=f+188|0,b(x(T))>b(.7071067690849304)?(_[D>>2]=0,m=b(b(C*C)+b(T*T)),g=b(b(1)/b(w(m))),h=b(g*b(-T)),y[f+176>>2]=h,u=b(C*g),y[f+180>>2]=u,E=b(p*h),k=b(u*b(-p)),p=b(m*g)):(m=b(b(p*p)+b(C*C)),g=b(b(1)/b(w(m))),h=b(g*b(-C)),y[D>>2]=h,u=b(p*g),y[f+176>>2]=u,_[f+180>>2]=0,E=b(m*g),k=b(T*h),p=b(u*b(-T))),y[v>>2]=p,y[f+196>>2]=E,y[f+192>>2]=k,un(s,D),un(r,D),xn(e,D,l,c,S,Q,n- -64|0,n+48|0,u=y[n+44>>2],i,b(0),b(0)),16&(v=_[i+72>>2])&&(un(s,F),un(r,F),xn(e,F,l,c,S,Q,n- -64|0,n+48|0,u,i,b(0),b(0)),v=_[i+72>>2]),80!=(80&v))break e;_[f+132>>2]=1|_[f+132>>2]}V(e,q,l,c,Q,i),F=_[t+844>>2]}if(!((0|(J=J+1|0))<(0|F)))break}B=n+80|0}function V(e,t,i,n,r,o){var a,s,l,c,u,h,p,f=b(0),d=b(0),m=b(0),v=b(0),g=0,x=b(0),T=b(0),S=b(0),E=b(0),C=b(0);l=_[e+16>>2],a=_[240+(l+A(n,244)|0)>>2],s=_[240+(A(i,244)+l|0)>>2],c=_[e+76>>2],u=_[t+140>>2];e:if(p=4&(h=_[o+72>>2])){if(t=A(u,152)+c|0,f=b(y[r+136>>2]*y[o+68>>2]),y[t+100>>2]=f,s&&(m=y[s+416>>2],v=y[t+24>>2],x=y[s+412>>2],T=y[t+20>>2],e=A(i,244)+l|0,d=y[s+404>>2],y[e+64>>2]=b(b(f*b(b(d*y[t+16>>2])*y[s+408>>2]))*y[e+112>>2])+y[e+64>>2],y[e+68>>2]=b(b(f*b(x*b(d*T)))*y[e+116>>2])+y[e+68>>2],y[e+72>>2]=b(b(f*b(m*b(d*v)))*y[e+120>>2])+y[e+72>>2],d=y[t+72>>2],m=y[t+68>>2],y[e+80>>2]=b(b(f*y[e+96>>2])*y[t+64>>2])+y[e+80>>2],v=y[e+104>>2],y[e+84>>2]=b(m*b(f*y[e+100>>2]))+y[e+84>>2],y[e+88>>2]=b(d*b(f*v))+y[e+88>>2]),!a)break e;g=A(u,152)+c|0,m=y[g+88>>2],v=y[g+84>>2],x=y[g+80>>2],T=y[a+416>>2],S=y[g+56>>2],E=y[a+412>>2],C=y[g+52>>2],e=A(n,244)+l|0,d=y[a+404>>2],f=y[t+100>>2],y[e+64>>2]=y[e+64>>2]+b(b(b(b(d*y[g+48>>2])*y[a+408>>2])*f)*y[e+112>>2]),y[e+68>>2]=y[e+68>>2]+b(b(f*b(E*b(d*C)))*y[e+116>>2]),y[e+72>>2]=y[e+72>>2]+b(b(f*b(T*b(d*S)))*y[e+120>>2]),y[e+80>>2]=y[e+80>>2]+b(x*b(f*y[e+96>>2])),d=y[e+104>>2],y[e+84>>2]=y[e+84>>2]+b(v*b(f*y[e+100>>2])),y[e+88>>2]=y[e+88>>2]+b(m*b(d*f))}else _[100+(A(u,152)+c|0)>>2]=0;e:if(16&h){if(g=u+1|0,p){if(t=A(g,152)+c|0,f=b(y[r+140>>2]*y[o+68>>2]),y[t+100>>2]=f,s&&(m=y[t+24>>2],v=y[t+20>>2],e=A(i,244)+l|0,d=y[s+404>>2],y[e+64>>2]=b(b(f*b(d*y[t+16>>2]))*y[e+112>>2])+y[e+64>>2],y[e+68>>2]=b(b(f*b(d*v))*y[e+116>>2])+y[e+68>>2],y[e+72>>2]=b(b(f*b(d*m))*y[e+120>>2])+y[e+72>>2],d=y[t+72>>2],m=y[t+68>>2],y[e+80>>2]=b(b(f*y[e+96>>2])*y[t+64>>2])+y[e+80>>2],v=y[e+104>>2],y[e+84>>2]=b(m*b(f*y[e+100>>2]))+y[e+84>>2],y[e+88>>2]=b(d*b(f*v))+y[e+88>>2]),!a)break e;return i=A(g,152)+c|0,m=y[i+88>>2],v=y[i+84>>2],x=y[i+56>>2],T=y[i+52>>2],S=y[i+48>>2],d=y[a+404>>2],e=A(n,244)+l|0,f=y[t+100>>2],y[e+80>>2]=y[e+80>>2]+b(y[i+80>>2]*b(y[e+96>>2]*f)),y[e+64>>2]=y[e+64>>2]+b(b(f*b(d*S))*y[e+112>>2]),y[e+68>>2]=y[e+68>>2]+b(b(f*b(d*T))*y[e+116>>2]),y[e+72>>2]=y[e+72>>2]+b(b(f*b(d*x))*y[e+120>>2]),d=y[e+104>>2],y[e+84>>2]=y[e+84>>2]+b(v*b(f*y[e+100>>2])),void(y[e+88>>2]=y[e+88>>2]+b(m*b(d*f)))}_[100+(A(g,152)+c|0)>>2]=0}}function H(e,t,i,n,r,o,a,s,l){var c,u,h,p,f,m=b(0),v=b(0),g=b(0),T=b(0),S=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),B=b(0),N=b(0),L=b(0),z=b(0);p=(h=_[e+16>>2])+A(n,244)|0,c=_[p+240>>2],f=A(i,244)+h|0,u=_[f+240>>2],_[a>>2]=_[o+28>>2],M=y[o+12>>2],L=y[o+36>>2],C=y[o+40>>2];e:if(6&(e=_[r+128>>2])){if(C=2&e?y[r+152>>2]:C,!(4&e))break e;L=y[r+156>>2]}else 8&e&&(v=b(M*y[r+152>>2]),m=b(E(b(v+y[r+156>>2]),b(1.1920928955078125e-7))),L=b(v/m),C=b(b(1)/m));m=y[r+68>>2],v=y[s>>2],T=y[s+4>>2],S=y[r+64>>2],w=b(b(m*v)-b(T*S)),g=y[s+8>>2],F=b(g*S),S=y[r+72>>2],R=b(F-b(S*v)),P=b(b(T*S)-b(g*m)),v=b(0),T=b(0),u&&(I=b(b(b(b(P*y[u+356>>2])+b(R*y[u+360>>2]))+b(w*y[u+364>>2]))*y[u+612>>2]),T=b(b(b(b(P*y[u+340>>2])+b(R*y[u+344>>2]))+b(w*y[u+348>>2]))*y[u+608>>2]),v=b(b(b(b(P*y[u+324>>2])+b(R*y[u+328>>2]))+b(w*y[u+332>>2]))*y[u+604>>2])),y[t+64>>2]=v,_[t+76>>2]=0,y[t+72>>2]=I,y[t+68>>2]=T,m=y[r+68>>2],S=y[l>>2],g=y[l+4>>2],k=y[r+64>>2],D=b(b(m*S)-b(g*k)),F=y[l+8>>2],B=b(F*k),k=y[r+72>>2],N=b(B-b(k*S)),k=b(b(g*k)-b(F*m)),S=b(0),g=b(0),c&&(m=b(-N),g=b(b(b(b(y[c+360>>2]*m)-b(k*y[c+356>>2]))-b(D*y[c+364>>2]))*y[c+612>>2]),O=b(b(b(b(y[c+328>>2]*m)-b(k*y[c+324>>2]))-b(D*y[c+332>>2]))*y[c+604>>2]),S=b(b(b(b(y[c+344>>2]*m)-b(k*y[c+340>>2]))-b(D*y[c+348>>2]))*y[c+608>>2])),y[t+80>>2]=O,_[t+92>>2]=0,y[t+88>>2]=g,y[t+84>>2]=S,m=b(0),u&&(m=y[s+8>>2],F=y[s+4>>2],z=b(b(b(T*m)-b(I*F))*y[r+64>>2]),B=I,I=y[s>>2],m=b(y[u+404>>2]+b(b(z+b(b(b(B*I)-b(m*v))*y[r+68>>2]))+b(b(b(F*v)-b(T*I))*y[r+72>>2])))),e=t,z=y[a>>2],I=b(b(1)/M),T=F=b(I*C),c?(v=y[l+4>>2],M=y[l+8>>2],C=b(b(b(g*v)-b(S*M))*y[r+64>>2]),B=g,g=y[l>>2],g=b(y[c+404>>2]+b(b(C+b(b(b(O*M)-b(B*g))*y[r+68>>2]))+b(b(b(S*g)-b(O*v))*y[r+72>>2])))):g=b(0),y[e+108>>2]=z/b(T+b(m+g)),u?(a=_[4+(e=r- -64|0)>>2],_[t+16>>2]=_[e>>2],_[t+20>>2]=a,a=_[e+12>>2],_[t+24>>2]=_[e+8>>2],_[t+28>>2]=a,_[t+12>>2]=0,y[t+8>>2]=w,y[t+4>>2]=R,y[t>>2]=P):(_[t>>2]=0,_[t+4>>2]=0,_[t+24>>2]=0,_[t+28>>2]=0,_[t+16>>2]=0,_[t+20>>2]=0,_[t+8>>2]=0,_[t+12>>2]=0),c?(m=y[r+64>>2],v=y[r+68>>2],T=y[r+72>>2],_[t+60>>2]=0,_[t+44>>2]=0,y[t+40>>2]=-D,y[t+36>>2]=-N,y[t+32>>2]=-k,y[t+56>>2]=-T,y[t+52>>2]=-v,y[t+48>>2]=-m):(_[t+32>>2]=0,_[t+36>>2]=0,_[t+56>>2]=0,_[t+60>>2]=0,_[t+48>>2]=0,_[t+52>>2]=0,_[t+40>>2]=0,_[t+44>>2]=0),N=y[o+64>>2],B=y[r+80>>2],O=b(0),v=b(0),T=b(0),S=b(0),u&&(m=y[s+4>>2],v=y[u+388>>2],g=y[u+392>>2],T=y[s>>2],S=b(b(b(m*v)-b(g*T))+y[u+380>>2]),C=y[u+396>>2],w=y[s+8>>2],T=b(y[u+376>>2]+b(b(C*T)-b(w*v))),v=b(b(b(g*w)-b(C*m))+y[u+372>>2])),g=b(0),w=b(0),c&&(m=y[l+4>>2],g=y[c+388>>2],C=y[c+392>>2],O=y[l>>2],w=b(b(b(m*g)-b(C*O))+y[c+380>>2]),R=y[c+396>>2],k=b(R*O),O=y[l+8>>2],g=b(y[c+376>>2]+b(k-b(O*g))),O=b(b(b(C*O)-b(R*m))+y[c+372>>2])),m=y[r+72>>2],C=y[r+64>>2],R=y[r+68>>2],_[t+104>>2]=_[r+84>>2],m=b(b(b(C*b(v-O))+b(R*b(T-g)))+b(m*b(S-w))),O=b(x(m))<y[o+96>>2]?b(0):b(y[r+96>>2]*b(-m));e:if(4&d[o+72|0]){if(m=b(y[r+132>>2]*y[o+68>>2]),y[t+100>>2]=m,!u|!_[f+240>>2]||(v=y[u+416>>2],T=y[t+24>>2],S=y[u+412>>2],g=y[t+20>>2],e=A(i,244)+h|0,y[e+64>>2]=b(y[e+112>>2]*b(m*b(b(y[t+16>>2]*y[e+128>>2])*y[u+408>>2])))+y[e+64>>2],y[e+68>>2]=b(b(m*b(S*b(g*y[e+132>>2])))*y[e+116>>2])+y[e+68>>2],y[e+72>>2]=b(b(m*b(v*b(T*y[e+136>>2])))*y[e+120>>2])+y[e+72>>2],v=y[t+72>>2],T=y[t+68>>2],y[e+80>>2]=b(b(m*y[e+96>>2])*y[t+64>>2])+y[e+80>>2],S=y[e+104>>2],y[e+84>>2]=b(T*b(m*y[e+100>>2]))+y[e+84>>2],y[e+88>>2]=b(v*b(m*S))+y[e+88>>2]),!c|!_[p+240>>2])break e;v=y[c+416>>2],T=y[t+56>>2],S=y[c+412>>2],g=y[t+52>>2],C=y[t+88>>2],w=y[t+84>>2],R=y[t+80>>2],e=A(n,244)+h|0,m=b(-y[t+100>>2]),y[e+64>>2]=y[e+64>>2]-b(y[e+112>>2]*b(b(b(y[e+128>>2]*y[t+48>>2])*y[c+408>>2])*m)),y[e+68>>2]=y[e+68>>2]-b(b(b(S*b(g*y[e+132>>2]))*m)*y[e+116>>2]),y[e+72>>2]=y[e+72>>2]-b(b(b(v*b(T*y[e+136>>2]))*m)*y[e+120>>2]),y[e+80>>2]=y[e+80>>2]-b(R*b(y[e+96>>2]*m)),v=y[e+104>>2],y[e+84>>2]=y[e+84>>2]-b(w*b(y[e+100>>2]*m)),y[e+88>>2]=y[e+88>>2]-b(C*b(v*m))}else _[t+100>>2]=0;_[t+96>>2]=0,T=b(0),S=b(0),g=b(0),w=b(0),R=b(0),P=b(0),D=b(0),_[f+240>>2]&&(e=A(i,244)+h|0,R=y[e+232>>2],P=y[e+228>>2],D=y[e+224>>2],g=y[e+212>>2],w=y[e+208>>2],S=y[e+216>>2]),v=b(0),k=b(0),C=b(0),M=b(0),m=b(0),_[p+240>>2]&&(e=A(n,244)+h|0,C=y[e+232>>2],M=y[e+228>>2],k=y[e+216>>2],T=y[e+208>>2],v=y[e+212>>2],m=y[e+224>>2]),e=A(i,244)+h|0,g=b(b(b(b(b(w+y[e+176>>2])*y[t+16>>2])+b(b(g+y[e+180>>2])*y[t+20>>2]))+b(b(S+y[e+184>>2])*y[t+24>>2]))+b(b(b(b(D+y[e+192>>2])*y[t>>2])+b(b(P+y[e+196>>2])*y[t+4>>2]))+b(b(R+y[e+200>>2])*y[t+8>>2]))),e=A(n,244)+h|0,v=b((O<=b(0)?b(0):O)-b(g+b(b(b(b(b(T+y[e+176>>2])*y[t+48>>2])+b(b(v+y[e+180>>2])*y[t+52>>2]))+b(b(k+y[e+184>>2])*y[t+56>>2]))+b(b(b(b(m+y[e+192>>2])*y[t+32>>2])+b(b(M+y[e+196>>2])*y[t+36>>2]))+b(b(C+y[e+200>>2])*y[t+40>>2]))))),T=b(0),(m=b(B+N))>b(0)?v=b(v-b(I*m)):T=b(I*b(L*b(-m))),S=y[t+108>>2],v=b(v*S),T=b(T*S),e=t,m>y[o+56>>2]^1&&_[o+52>>2]||(v=b(T+v),T=b(0)),y[e+128>>2]=T,y[t+112>>2]=v,_[t+120>>2]=0,_[t+124>>2]=1343554297,y[t+116>>2]=F*S}function j(e,t,i,n){var r;!function(e,t,i){_[e>>2]=6184,a[e+76|0]=1,_[e+72>>2]=0,_[e+68>>2]=i,_[e+28>>2]=0,_[e+32>>2]=0,_[e+24>>2]=t,a[e+20|0]=1,_[e+16>>2]=0,_[e- -64>>2]=0,a[e+60|0]=0,_[e+56>>2]=1025758986,a[e+54|0]=1,f[e+52>>1]=256,_[e+48>>2]=0,a[e+44|0]=1,_[e+36>>2]=1,_[e+40>>2]=1065353216,_[e+8>>2]=0,_[e+12>>2]=0}(e,t,i),_[(i=e)+100>>2]=1050253722,_[i+104>>2]=1015580809,_[i+92>>2]=1058642330,_[i+96>>2]=1065353216,_[i+88>>2]=0,_[i+80>>2]=0,_[i+84>>2]=0,_[i+132>>2]=0,_[i+136>>2]=1045220557,_[i+124>>2]=1045220557,_[i+128>>2]=1045220557,_[i+108>>2]=0,_[i+112>>2]=10,_[i+184>>2]=0,_[i+188>>2]=1045220557,_[i+176>>2]=1120403456,_[i+180>>2]=1900671690,_[i+172>>2]=128,_[i+164>>2]=260,_[i+168>>2]=2,_[i+156>>2]=0,_[i+160>>2]=1062836634,_[i+148>>2]=-1121724662,_[i+152>>2]=1036831949,_[i+140>>2]=0,_[i+144>>2]=1,_[i+116>>2]=1101004800,_[i+120>>2]=1065353216,_[i>>2]=1464,a[i+208|0]=1,_[i+204>>2]=0,a[i+240|0]=1,_[i+216>>2]=n,_[i+212>>2]=0,_[i+196>>2]=0,_[i+200>>2]=0,_[i+236>>2]=0,_[i+228>>2]=0,_[i+232>>2]=0,a[i+260|0]=1,f[i+290>>1]=0,_[i+256>>2]=0,_[i+248>>2]=0,_[i+252>>2]=0,_[i+264>>2]=0,_[i+268>>2]=-1054867456,_[i+272>>2]=0,_[i+276>>2]=0,_[i+280>>2]=0,_[i+284>>2]=0,a[i+308|0]=1,_[i+312>>2]=0,_[i+304>>2]=0,_[i+296>>2]=0,_[i+300>>2]=0,a[i+336|0]=1,a[i+316|0]=1,_[i+324>>2]=0,_[i+328>>2]=0,_[i+332>>2]=0,_[i+340>>2]=0,r=i,n?i=0:(_[5585]=_[5585]+1,qe(i=0|o[_[4567]](236,16)),_[e+216>>2]=i,i=1),a[r+289|0]=i,_[5585]=_[5585]+1,function(e){_[e>>2]=4716,_[e+16>>2]=0,a[e+20|0]=1,_[e+8>>2]=0,_[e+12>>2]=0,_[e+36>>2]=0,a[e+40|0]=1,a[e+60|0]=1,_[e+28>>2]=0,_[e+32>>2]=0,_[e+56>>2]=0,a[e+64|0]=1,_[e+48>>2]=0,_[e+52>>2]=0}(i=0|o[_[4567]](68,16)),a[e+288|0]=1,_[e+220>>2]=i,_[5585]=_[5585]+1,i=0|o[_[4567]](88,16),n=_[e+216>>2],a[i+44|0]=1,_[i+24>>2]=t,_[i+20>>2]=0,_[i+12>>2]=0,_[i+16>>2]=0,_[i+8>>2]=n,_[i+4>>2]=0,_[i>>2]=2072,_[i+40>>2]=0,a[i+64|0]=1,_[i+32>>2]=0,_[i+36>>2]=0,_[i+60>>2]=0,a[i+84|0]=1,_[i+52>>2]=0,_[i+56>>2]=0,_[i+80>>2]=0,_[i+72>>2]=0,_[i+76>>2]=0,_[e+212>>2]=i}function W(e,t,i){var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0);u=y[t+396>>2],h=y[t+44>>2],T=y[t+40>>2],n=y[t+36>>2],p=y[t+12>>2],f=y[t+8>>2],a=y[t+4>>2],d=y[t+392>>2],o=y[t+28>>2],r=y[t+464>>2],c=y[t+24>>2],m=y[t+460>>2],s=y[t+20>>2],v=y[t+388>>2],S=y[t+456>>2],_[e+12>>2]=0,g=S!=b(0)?b(b(1)/S):b(0),A=b(n*g),w=m!=b(0)?b(b(1)/m):b(0),C=b(T*w),r=r!=b(0)?b(b(1)/r):b(0),k=b(h*r),m=b(b(b(a*A)+b(f*C))+b(p*k)),l=b(g*s),E=b(w*c),O=b(r*o),S=b(b(b(a*l)+b(f*E))+b(p*O)),R=b(v*S),F=b(g*a),I=b(w*f),M=b(r*p),a=b(b(b(a*F)+b(f*I))+b(p*M)),r=b(b(b(l*s)+b(E*c))+b(O*o)),g=b(b(b(l*n)+b(E*T))+b(O*h)),E=b(u*g),p=b(b(R+b(d*r))+E),w=b(m+b(b(b(b(m*b(0))+b(R-b(d*a)))+p)*i)),l=b(b(b(F*s)+b(I*c))+b(M*o)),O=b(v*m),s=b(b(b(A*s)+b(C*c))+b(k*o)),c=b(d*s),o=b(b(b(A*n)+b(C*T))+b(k*h)),f=b(b(O+c)+b(u*o)),c=b(l+b(b(f+b(c+b(b(l*b(0))-b(u*r))))*i)),R=b(d*l),n=b(b(b(F*n)+b(I*T))+b(M*h)),A=b(u*n),h=b(b(b(v*a)+R)+A),k=b(i*b(0)),T=b(b(p+b(b(b(u*h)-b(v*f))*i))-b(k+p)),A=b(g+b(b(h+b(b(b(g*b(0))+A)-b(v*o)))*i)),l=b(r+b(b(b(b(r*b(0))+b(u*l))-b(v*s))*i)),C=b(n+b(b(b(b(d*o)+b(b(n*b(0))-E))-p)*i)),E=b(b(c*A)-b(l*C)),m=b(a+b(b(b(d*m)+b(b(a*b(0))-b(u*S)))*i)),o=b(o+b(b(b(o*b(0))+b(b(v*g)-b(d*n)))*i)),s=b(s+b(b(b(b(s*b(0))+b(b(v*r)-R))-h)*i)),g=b(b(l*o)-b(s*A)),r=b(S+b(b(b(b(b(S*b(0))+b(u*a))-O)-f)*i)),S=b(b(s*C)-b(c*o)),n=b(b(w*E)+b(b(m*g)+b(r*S))),a=b(x(n))>b(1.1920928955078125e-7)?b(b(1)/n):n,n=b(b(h+b(b(b(d*f)-b(u*p))*i))-b(k+h)),i=b(b(f+b(b(b(v*p)-b(d*h))*i))-b(k+f)),y[e+8>>2]=b(u-b(b(b(w*b(b(c*T)-b(l*n)))+b(b(m*b(b(l*i)-b(s*T)))+b(r*b(b(s*n)-b(c*i)))))*a))-u,y[e+4>>2]=b(d-b(b(b(w*b(b(A*n)-b(C*T)))+b(b(m*b(b(o*T)-b(A*i)))+b(r*b(b(C*i)-b(o*n)))))*a))-d,y[e>>2]=b(v-b(b(b(i*E)+b(b(n*g)+b(T*S)))*a))-v}function Y(e,t,i){var n,r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0);B=n=B-16|0,a=y[t+464>>2],o=y[t+460>>2],C=y[t+396>>2],w=y[t+392>>2],c=y[t+456>>2],k=y[t+388>>2],An(t+4|0,n),u=y[n+4>>2],h=y[n>>2],p=y[n+12>>2],f=y[n+8>>2],_[e+12>>2]=0,s=b(b(C*h)+b(b(w*p)-b(k*f))),A=b(b(b(k*h)+b(w*u))+b(C*f)),d=b(b(w*f)+b(b(k*p)-b(C*u))),T=b(b(k*u)+b(b(C*p)-b(w*h))),l=b(b(b(f*s)+b(b(h*A)+b(p*d)))-b(u*T)),m=b(b(b(u*d)+b(b(f*A)+b(p*T)))-b(h*s)),v=b(m*b(0)),g=b(l*b(0)),r=o!=b(0)?b(b(1)/o):b(0),o=b(b(b(h*T)+b(b(u*A)+b(p*s)))-b(f*d)),A=b(v+b(g+b(r*o))),s=c!=b(0)?b(b(1)/c):b(0),d=b(o*b(0)),T=b(v+b(b(l*s)+d)),c=b(b(b(l*A)-b(o*T))*i),M=b(b(b(b(b(g-b(s*o))+b(0))+A)*i)+b(0)),a=a!=b(0)?b(b(1)/a):b(0),O=b(b(a*m)+b(g+d)),R=b(b(b(b(d+b(b(0)-b(r*m)))+O)*i)+b(0)),F=b(b(b(b(b(v+b(0))-b(a*l))+T)*i)+b(0)),E=b(l*b(-0)),v=b(r+b(b(E+b(b(r*b(0))+v))*i)),S=b(m*b(-0)),I=b(b(b(b(b(a*o)+b(S+b(0)))-A)*i)+b(0)),P=b(b(R*F)-b(v*I)),d=b(s+b(b(d+b(b(s*b(0))+S))*i)),S=b(o*b(-0)),a=b(a+b(b(b(a*b(0))+b(S+g))*i)),g=b(b(b(b(b(S+b(r*l))+b(0))-T)*i)+b(0)),S=b(b(v*a)-b(g*F)),E=b(b(b(b(E+b(b(s*m)+b(0)))-O)*i)+b(0)),D=b(b(g*I)-b(a*R)),r=b(b(M*P)+b(b(d*S)+b(E*D))),s=b(x(r))>b(1.1920928955078125e-7)?b(b(1)/r):r,r=b(b(b(o*O)-b(m*A))*i),i=b(b(b(m*T)-b(l*O))*i),l=b(l-b(b(b(c*P)+b(b(r*S)+b(i*D)))*s)),o=b(o-b(b(b(M*b(b(F*r)-b(I*i)))+b(b(d*b(b(a*i)-b(F*c)))+b(E*b(b(I*c)-b(a*r)))))*s)),i=b(m-b(b(b(M*b(b(R*i)-b(v*r)))+b(b(d*b(b(v*c)-b(g*i)))+b(E*b(b(g*r)-b(R*c)))))*s)),m=b(b(b(f*l)+b(p*o))-b(h*i)),c=b(b(b(p*i)+b(h*o))-b(u*l)),r=b(b(b(l*b(-h))-b(u*o))-b(f*i)),i=b(b(b(p*l)+b(u*i))-b(f*o)),y[e+8>>2]=b(b(h*m)+b(b(b(p*c)-b(f*r))-b(u*i)))-C,y[e+4>>2]=b(b(f*i)+b(b(b(p*m)-b(u*r))-b(h*c)))-w,y[e>>2]=b(b(u*c)+b(b(b(p*i)-b(h*r))-b(f*m)))-k,B=n+16|0}function q(e,t,i){var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0);o=y[t+396>>2],f=y[t+44>>2],d=y[t+40>>2],m=y[t+36>>2],l=y[t+392>>2],v=y[t+28>>2],c=y[t+12>>2],n=y[t+464>>2],g=y[t+24>>2],u=y[t+8>>2],h=y[t+460>>2],A=y[t+20>>2],x=y[t+4>>2],r=y[t+388>>2],p=y[t+456>>2],_[e+12>>2]=0,p=p!=b(0)?b(b(1)/p):b(0),a=b(A*p),h=h!=b(0)?b(b(1)/h):b(0),s=b(g*h),T=n!=b(0)?b(b(1)/n):b(0),n=b(v*T),S=b(b(b(r*b(b(b(x*a)+b(u*s))+b(c*n)))+b(l*b(b(b(a*A)+b(s*g))+b(n*v))))+b(o*b(b(b(a*m)+b(s*d))+b(n*f)))),n=b(p*x),a=b(h*u),s=b(T*c),a=b(b(b(r*b(b(b(x*n)+b(u*a))+b(c*s)))+b(l*b(b(b(n*A)+b(a*g))+b(s*v))))+b(o*b(b(b(n*m)+b(a*d))+b(s*f)))),n=b(b(r*S)-b(l*a)),y[e+8>>2]=n,s=r,r=b(p*m),p=u,u=b(h*d),h=c,c=b(T*f),f=b(b(b(s*b(b(b(x*r)+b(p*u))+b(h*c)))+b(l*b(b(b(r*A)+b(u*g))+b(c*v))))+b(o*b(b(b(r*m)+b(u*d))+b(c*f)))),r=b(b(o*a)-b(s*f)),y[e+4>>2]=r,o=b(b(l*f)-b(o*S)),y[e>>2]=o,(l=b(b(n*n)+b(b(o*o)+b(r*r))))>b(i*i)&&(i=b(b(b(1)/b(w(l)))*i),y[e+8>>2]=n*i,y[e+4>>2]=r*i,y[e>>2]=o*i)}function Q(e,t){var i=b(0),n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0);if(l=y[e+504>>2],n=oi(b(b(1)-l),t),i=b(n*y[e+372>>2]),y[e+372>>2]=i,o=b(n*y[e+376>>2]),y[e+376>>2]=o,n=b(n*y[e+380>>2]),y[e+380>>2]=n,c=y[e+508>>2],r=oi(b(b(1)-c),t),t=b(r*y[e+388>>2]),y[e+388>>2]=t,a=b(r*y[e+392>>2]),y[e+392>>2]=a,r=b(r*y[e+396>>2]),y[e+396>>2]=r,d[e+512|0]&&(b(b(b(t*t)+b(a*a))+b(r*r))<y[e+524>>2]^1|b(b(b(i*i)+b(o*o))+b(n*n))<y[e+520>>2]^1||(s=y[e+516>>2],r=b(r*s),y[e+396>>2]=r,a=b(a*s),y[e+392>>2]=a,t=b(t*s),y[e+388>>2]=t,n=b(n*s),y[e+380>>2]=n,o=b(o*s),y[e+376>>2]=o,i=b(i*s),y[e+372>>2]=i),(s=b(w(b(b(b(i*i)+b(o*o))+b(n*n)))))<l&&(s>b(.004999999888241291)?(l=n,n=b(b(1)/s),y[e+380>>2]=l-b(b(l*n)*b(.004999999888241291)),y[e+376>>2]=o-b(b(o*n)*b(.004999999888241291)),y[e+372>>2]=i-b(b(i*n)*b(.004999999888241291))):(_[e+372>>2]=0,_[e+376>>2]=0,_[e+380>>2]=0,_[e+384>>2]=0)),(i=b(w(b(b(b(t*t)+b(a*a))+b(r*r)))))<c)){if(i>b(.004999999888241291))return i=b(b(1)/i),y[e+396>>2]=r-b(b(r*i)*b(.004999999888241291)),y[e+392>>2]=a-b(b(a*i)*b(.004999999888241291)),void(y[e+388>>2]=t-b(b(t*i)*b(.004999999888241291)));_[e+388>>2]=0,_[e+392>>2]=0,_[e+396>>2]=0,_[e+400>>2]=0}}function Z(e,t){var i,n=0,r=b(0),a=b(0),s=b(0),l=b(0);B=i=B-32|0,t!=b(0)&&((n=_[e+540>>2])&&o[_[_[n>>2]+8>>2]](n,e+4|0),_[e+384>>2]=0,t=b(b(1)/t),y[e+380>>2]=t*b(y[e+60>>2]-y[e+124>>2]),y[e+376>>2]=t*b(y[e+56>>2]-y[e+120>>2]),y[e+372>>2]=t*b(y[e+52>>2]-y[e+116>>2]),mr(e+68|0,e+4|0,i+16|0,i+12|0),a=y[i+16>>2],s=y[i+20>>2],l=y[i+24>>2],r=y[i+12>>2],_[e+400>>2]=0,y[e+396>>2]=t*b(r*l),y[e+392>>2]=t*b(r*s),y[e+388>>2]=t*b(a*r),n=_[e+384>>2],_[e+140>>2]=_[e+380>>2],_[e+144>>2]=n,n=_[e+376>>2],_[e+132>>2]=_[e+372>>2],_[e+136>>2]=n,n=_[e+392>>2],_[e+148>>2]=_[e+388>>2],_[e+152>>2]=n,n=_[e+400>>2],_[e+156>>2]=_[e+396>>2],_[e+160>>2]=n,n=_[e+8>>2],_[e+68>>2]=_[e+4>>2],_[e+72>>2]=n,n=_[e+16>>2],_[e+76>>2]=_[e+12>>2],_[e+80>>2]=n,n=_[e+24>>2],_[e+84>>2]=_[e+20>>2],_[e+88>>2]=n,n=_[e+32>>2],_[e+92>>2]=_[e+28>>2],_[e+96>>2]=n,n=_[e+48>>2],_[e+108>>2]=_[e+44>>2],_[e+112>>2]=n,n=_[e+40>>2],_[e+100>>2]=_[e+36>>2],_[e+104>>2]=n,n=_[e+64>>2],_[e+124>>2]=_[e+60>>2],_[e+128>>2]=n,n=_[e+56>>2],_[e+116>>2]=_[e+52>>2],_[e+120>>2]=n),B=i+32|0}function K(e,t){Ue(e),a[e+560|0]=1,_[e>>2]=1380,_[e+556>>2]=0,_[e+548>>2]=0,_[e+552>>2]=0,function(e,t){var i,n=0,r=0,s=b(0),l=b(0),c=0,u=b(0),h=b(0);B=i=B-16|0,_[e+372>>2]=0,_[e+376>>2]=0,_[e+604>>2]=1065353216,_[e+608>>2]=1065353216,_[e+408>>2]=1065353216,_[e+412>>2]=1065353216,_[e+472>>2]=0,_[e+476>>2]=0,_[e+252>>2]=2,_[e+380>>2]=0,_[e+384>>2]=0,_[e+388>>2]=0,_[e+392>>2]=0,_[e+396>>2]=0,_[e+400>>2]=0,_[e+612>>2]=1065353216,_[e+616>>2]=0,_[e+420>>2]=0,_[e+424>>2]=0,_[e+416>>2]=1065353216,_[e+428>>2]=0,_[e+432>>2]=0,_[e+436>>2]=0,_[e+440>>2]=0,_[e+444>>2]=0,_[e+448>>2]=0,_[e+452>>2]=0,_[e+480>>2]=0,_[e+484>>2]=0,_[e+488>>2]=0,_[e+492>>2]=0,_[e+496>>2]=0,_[e+500>>2]=0,s=y[t+96>>2],l=y[t+92>>2],y[i+12>>2]=l,y[i+8>>2]=s,_[i+4>>2]=0,_[i>>2]=1065353216,_[e+504>>2]=_[(l<b(0)?i+4|0:l>b(1)?i:i+12|0)>>2],_[i+4>>2]=0,_[i>>2]=1065353216,_[e+508>>2]=_[(s<b(0)?i+4|0:s>b(1)?i:i+8|0)>>2],_[e+532>>2]=_[t+116>>2],_[e+536>>2]=_[t+120>>2],r=_[t+4>>2],_[e+668>>2]=0,_[e+672>>2]=0,_[e+540>>2]=r,a[e+512|0]=d[t+124|0],_[e+516>>2]=_[t+128>>2],_[e+520>>2]=_[t+132>>2],_[e+524>>2]=_[t+136>>2],_[e+528>>2]=_[t+140>>2],r?(n=e+4|0,o[_[_[r>>2]+8>>2]](r,n)):(c=_[t+12>>2],_[(n=e+4|0)>>2]=_[t+8>>2],_[n+4>>2]=c,r=_[t+20>>2],_[e+12>>2]=_[t+16>>2],_[e+16>>2]=r,r=_[t+36>>2],_[e+28>>2]=_[t+32>>2],_[e+32>>2]=r,r=_[t+28>>2],_[e+20>>2]=_[t+24>>2],_[e+24>>2]=r,r=_[t+44>>2],_[e+36>>2]=_[t+40>>2],_[e+40>>2]=r,r=_[t+52>>2],_[e+44>>2]=_[t+48>>2],_[e+48>>2]=r,c=_[4+(r=t- -64|0)>>2],_[e+60>>2]=_[r>>2],_[e+64>>2]=c,r=_[t+60>>2],_[e+52>>2]=_[t+56>>2],_[e+56>>2]=r),r=_[n+4>>2],_[e+68>>2]=_[n>>2],_[e+72>>2]=r,r=_[n+12>>2],_[e+76>>2]=_[n+8>>2],_[e+80>>2]=r,n=_[e+32>>2],_[e+92>>2]=_[e+28>>2],_[e+96>>2]=n,n=_[e+24>>2],_[e+84>>2]=_[e+20>>2],_[e+88>>2]=n,n=_[e+40>>2],_[e+100>>2]=_[e+36>>2],_[e+104>>2]=n,n=_[e+48>>2],_[e+108>>2]=_[e+44>>2],_[e+112>>2]=n,n=_[e+56>>2],_[e+116>>2]=_[e+52>>2],_[e+120>>2]=n,n=_[e+64>>2],_[e+124>>2]=_[e+60>>2],_[e+128>>2]=n,_[e+132>>2]=0,_[e+136>>2]=0,_[e+140>>2]=0,_[e+144>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,_[e+160>>2]=0,_[e+228>>2]=_[t+100>>2],_[e+236>>2]=_[t+104>>2],_[e+240>>2]=_[t+108>>2],_[e+232>>2]=_[t+112>>2],o[_[_[e>>2]+8>>2]](e,_[t+72>>2]),n=_[4727],_[4727]=n+1,_[e+568>>2]=n,s=b(0),n=_[e+204>>2],(l=y[t>>2])!=b(0)?(_[e+204>>2]=-2&n,s=b(b(1)/l)):_[e+204>>2]=1|n,_[e+436>>2]=0,y[e+404>>2]=s,y[e+432>>2]=l*y[e+448>>2],y[e+428>>2]=l*y[e+444>>2],y[e+424>>2]=l*y[e+440>>2],l=y[t+84>>2],u=y[t+80>>2],h=y[t+76>>2],y[e+620>>2]=s*y[e+408>>2],y[e+624>>2]=s*y[e+412>>2],y[e+628>>2]=s*y[e+416>>2],_[e+632>>2]=0,_[e+468>>2]=0,y[e+456>>2]=h!=b(0)?b(b(1)/h):b(0),y[e+460>>2]=u!=b(0)?b(b(1)/u):b(0),y[e+464>>2]=l!=b(0)?b(b(1)/l):b(0),ho(e),_[e+572>>2]=0,_[e+576>>2]=0,_[e+564>>2]=8,_[e+580>>2]=0,_[e+584>>2]=0,_[e+588>>2]=0,_[e+592>>2]=0,_[e+596>>2]=0,_[e+600>>2]=0,_[e+632>>2]=0,_[e+636>>2]=0,_[e+640>>2]=0,_[e+644>>2]=0,_[e+648>>2]=0,_[e+652>>2]=0,_[e+656>>2]=0,_[e+660>>2]=0,_[e+664>>2]=0,s=y[e+404>>2],y[e+628>>2]=s*y[e+416>>2],y[e+624>>2]=s*y[e+412>>2],y[e+620>>2]=s*y[e+408>>2],B=i+16|0}(e,t)}function J(e){var t,i=b(0);return B=t=B-16|0,_[t+12>>2]=e,i=function(e,t){var i,n=b(0),r=b(0);return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],n=y[e>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n*y[_[t+12>>2]>>2]),r=y[e+4>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n+b(r*y[_[t+12>>2]+4>>2])),r=y[e+8>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],B=i+16|0,b(b(n+b(r*y[_[t+12>>2]+8>>2]))+b(y[e+12>>2]*y[_[i+8>>2]+12>>2]))}(e=_[t+12>>2],e),B=t+16|0,i}function $(e,t){var i;return B=i=B-16|0,_[i+8>>2]=e,_[i+4>>2]=t,e=_[i+8>>2],_[i+4>>2]?_[i+12>>2]=function(e,t){var i;return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,_[i+4>>2]=0,e=_[i+8>>2]<<4,_[5585]=_[5585]+1,e=0|o[_[4567]](e,16),B=i+16|0,e}(e,_[i+4>>2]):_[i+12>>2]=0,B=i+16|0,_[i+12>>2]}function ee(e,t,i){var n,r,o,a,s;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,o=_[n+24>>2],t=B-16|0,i=_[n+28>>2],_[t+12>>2]=i,_[t+8>>2]=0,a=_[t+12>>2]+(_[t+8>>2]<<4)|0,_[12+(t=B-16|0)>>2]=i,_[t+8>>2]=1,s=_[t+12>>2]+(_[t+8>>2]<<4)|0,_[12+(t=B-16|0)>>2]=i,_[t+8>>2]=2,function(e,t,i,n,r){var o;B=o=B-32|0,_[o+28>>2]=t,_[o+24>>2]=i,_[o+20>>2]=n,_[o+16>>2]=r,t=_[o+28>>2],y[o+12>>2]=Sn(t,_[o+24>>2]),y[o+8>>2]=Sn(t,_[o+20>>2]),y[o+4>>2]=Sn(t,_[o+16>>2]),zi(e,o+12|0,o+8|0,o+4|0),B=o+32|0}(r=n+8|0,o,a,s,_[t+12>>2]+(_[t+8>>2]<<4)|0),function(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,y[n+20>>2]=y[_[n+28>>2]>>2]+y[_[n+24>>2]>>2],y[n+16>>2]=y[_[n+28>>2]+4>>2]+y[_[n+24>>2]+4>>2],y[n+12>>2]=y[_[n+28>>2]+8>>2]+y[_[n+24>>2]+8>>2],zi(e,n+20|0,n+16|0,n+12|0),B=n+32|0}(e,r,i+48|0),B=n+32|0}function te(e,t,i,n){var r;B=r=B+-64|0,_[r+60>>2]=e,y[r+56>>2]=t,y[r+52>>2]=i,_[r+48>>2]=n,e=_[r+60>>2],_[e+56>>2]=_[r+48>>2],y[r+44>>2]=1,y[r+40>>2]=1,y[r+36>>2]=1,zi(e+16|0,r+44|0,r+40|0,r+36|0),1!=_[e+56>>2]?_[e+56>>2]?zi(e+32|0,n=r+56|0,n,r+52|0):zi(e+32|0,r+52|0,n=r+56|0,n):zi(e+32|0,n=r+56|0,r+52|0,n),y[r+12>>2]=o[_[_[e>>2]+48>>2]](e),y[r+8>>2]=o[_[_[e>>2]+48>>2]](e),y[r+4>>2]=o[_[_[e>>2]+48>>2]](e),zi(n=r+16|0,r+12|0,r+8|0,r+4|0),function(e,t){var i;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],y[e>>2]=y[e>>2]-y[_[i+8>>2]>>2],y[e+4>>2]=y[e+4>>2]-y[_[i+8>>2]+4>>2],y[e+8>>2]=y[e+8>>2]-y[_[i+8>>2]+8>>2]}(e+32|0,n),B=r- -64|0}function ie(e,t){var i;return B=i=B-32|0,_[i+28>>2]=e,_[i+24>>2]=t,Un(t=i+8|0,e=_[i+28>>2],_[i+24>>2]+48|0),Xn(e+48|0,t),function(e,t){var i;B=i=B-48|0,_[i+44>>2]=e,_[i+40>>2]=t,e=_[i+44>>2],y[i+36>>2]=wn(_[i+40>>2],e),y[i+32>>2]=Cn(_[i+40>>2],e),y[i+28>>2]=En(_[i+40>>2],e),y[i+24>>2]=wn(_[i+40>>2],e+16|0),y[i+20>>2]=Cn(_[i+40>>2],e+16|0),y[i+16>>2]=En(_[i+40>>2],e+16|0),y[i+12>>2]=wn(_[i+40>>2],e+32|0),y[i+8>>2]=Cn(_[i+40>>2],e+32|0),y[i+4>>2]=En(_[i+40>>2],e+32|0),yr(e,i+36|0,i+32|0,i+28|0,i+24|0,i+20|0,i+16|0,i+12|0,i+8|0,i+4|0),B=i+48|0}(e,_[i+24>>2]),B=i+32|0,e}function ne(e,t,i){var n;B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,function(e,t){var i,n;for(B=i=B-16|0,_[i+8>>2]=e,_[i+4>>2]=t,e=_[i+8>>2],_[i+12>>2]=e,n=e+48|0,t=e;_[12+(B-16|0)>>2]=t,(0|n)!=(0|(t=t+16|0)););Ft(e,_[i+4>>2]),B=i+16|0}(e=_[n+12>>2],_[n+8>>2]),t=_[n+4>>2],i=_[t+4>>2],_[e+48>>2]=_[t>>2],_[e+52>>2]=i,i=_[t+12>>2],_[e+56>>2]=_[t+8>>2],_[e+60>>2]=i,B=n+16|0}function re(e,t){var i,n;B=i=B-32|0,_[i+28>>2]=e,y[i+24>>2]=t,nn(e=_[i+28>>2]),_[e>>2]=9868,_[e+4>>2]=8,y[i+20>>2]=1,y[i+16>>2]=1,y[i+12>>2]=1,zi(e+16|0,i+20|0,i+16|0,i+12|0),function(e){var t;B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],y[t+8>>2]=0,y[t+4>>2]=0,y[t>>2]=0,zi(e,t+8|0,t+4|0,t),B=t+16|0}(e+32|0),t=y[i+24>>2],_[12+(n=B-16|0)>>2]=e+32,y[n+8>>2]=t,y[_[n+12>>2]>>2]=y[n+8>>2],y[e+48>>2]=y[i+24>>2],y[e+52>>2]=0,B=i+32|0}function oe(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],_[i+4>>2]=_[_[t+12>>2]+4>>2],t=_[i+4>>2],y[i>>2]=0,function(e,t,i){var n;if(B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,t=B-16|0,e=_[n+28>>2],_[t+12>>2]=e,_[n+16>>2]=_[_[t+12>>2]+4>>2],_[n+24>>2]<_[n+16>>2])for(_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+16>>2];)_[n+12>>2]=_[n+12>>2]+1;else for(_[n+24>>2]>_[n+16>>2]&&mt(e,_[n+24>>2]),_[n+8>>2]=_[n+16>>2];_[n+8>>2]<_[n+24>>2];)y[_[e+12>>2]+(_[n+8>>2]<<2)>>2]=y[_[n+20>>2]>>2],_[n+8>>2]=_[n+8>>2]+1;_[e+4>>2]=_[n+24>>2],B=n+32|0}(e,t,i),ht(_[i+8>>2],_[i+4>>2],_[e+12>>2]),B=i+16|0}function ae(e,t){var i;B=i=B-32|0,_[i+28>>2]=e,_[i+24>>2]=t,e=_[i+28>>2],_[12+(t=B-16|0)>>2]=_[i+24>>2],_[i+20>>2]=_[_[t+12>>2]+4>>2],t=_[i+20>>2],_[12+(B-16|0)>>2]=i,function(e,t,i){var n,r=0;if(B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,t=B-16|0,e=_[n+28>>2],_[t+12>>2]=e,_[n+16>>2]=_[_[t+12>>2]+4>>2],_[n+24>>2]<_[n+16>>2])for(_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+16>>2];)_[n+12>>2]=_[n+12>>2]+1;else for(_[n+24>>2]>_[n+16>>2]&&vt(e,_[n+24>>2]),_[n+8>>2]=_[n+16>>2];_[n+8>>2]<_[n+24>>2];)i=_[e+12>>2]+(_[n+8>>2]<<4)|0,_[12+(t=B-16|0)>>2]=16,_[t+8>>2]=i,i=_[n+20>>2],r=_[i+4>>2],t=_[t+8>>2],_[t>>2]=_[i>>2],_[t+4>>2]=r,r=_[i+12>>2],_[t+8>>2]=_[i+8>>2],_[t+12>>2]=r,_[n+8>>2]=_[n+8>>2]+1;_[e+4>>2]=_[n+24>>2],B=n+32|0}(e,t,i),pt(_[i+24>>2],_[i+20>>2],_[e+12>>2]),B=i+32|0}function se(e,t,i,n,r,s){var l,c,u,h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=0,V=b(0),H=b(0),j=b(0);B=l=B-656|0,c=_[n+12>>2],u=_[n+4>>2];e:if((0|(O=_[u+4>>2]))<=19)y[l+652>>2]=s,_[l+648>>2]=0,_[l+480>>2]=5624,_[l+644>>2]=_[r+4>>2],a[l+452|0]=0,_[l+428>>2]=953267991,_[l+32>>2]=2952,_[20+(O=l+96|0)>>2]=0,_[O+16>>2]=u,_[O+12>>2]=e,_[O+8>>2]=l+32,_[O+4>>2]=l+120,_[O>>2]=5988,o[_[_[O>>2]+8>>2]](O,t,i,c,c,l+480|0)&&(s=y[l+612>>2],h=y[l+616>>2],p=y[l+620>>2],(f=b(b(b(s*s)+b(h*h))+b(p*p)))>b(9999999747378752e-20)&&(d=y[l+644>>2])<y[r+4>>2]&&(m=p,p=b(b(1)/b(w(f))),y[l+620>>2]=m*p,y[l+616>>2]=h*p,y[l+612>>2]=s*p,e=_[n+8>>2],_[l+52>>2]=0,_[l+48>>2]=e,t=_[l+624>>2],_[(e=l- -64|0)>>2]=_[l+620>>2],_[e+4>>2]=t,e=_[l+612>>2],t=_[l+616>>2],i=_[l+640>>2],_[l+80>>2]=_[l+636>>2],_[l+84>>2]=i,_[l+56>>2]=e,_[l+60>>2]=t,e=_[l+632>>2],_[l+72>>2]=_[l+628>>2],_[l+76>>2]=e,y[l+88>>2]=d,b(o[_[_[r>>2]+12>>2]](r,l+48|0,1))));else if((X=O+-21|0)>>>0<=8){t:if(!(X>>>0>7)){switch(X-1|0){default:h=y[c+20>>2],p=y[c+36>>2],f=y[c+24>>2],k=y[c+52>>2],x=y[c+56>>2],d=y[c+40>>2],m=y[c+32>>2],E=y[c+16>>2],g=y[c>>2],v=y[c+4>>2],T=y[c+48>>2],C=y[c+8>>2],S=y[t+52>>2],F=y[t+56>>2],I=y[t+48>>2],_[l+60>>2]=0,k=b(-k),M=b(b(b(f*k)-b(C*T))-b(d*x)),y[l+56>>2]=M+b(b(b(C*I)+b(f*S))+b(d*F)),R=b(b(b(h*k)-b(v*T))-b(p*x)),y[l+52>>2]=R+b(b(b(v*I)+b(h*S))+b(p*F)),k=b(b(b(E*k)-b(g*T))-b(m*x)),y[l+48>>2]=k+b(b(b(g*I)+b(E*S))+b(m*F)),x=y[i+52>>2],T=y[i+56>>2],S=y[i+48>>2],_[l+108>>2]=0,y[l+104>>2]=M+b(b(b(C*S)+b(f*x))+b(d*T)),y[l+100>>2]=R+b(b(b(v*S)+b(h*x))+b(p*T)),y[l+96>>2]=k+b(b(b(g*S)+b(E*x))+b(m*T)),x=y[i+20>>2],T=y[i+36>>2],S=y[i+24>>2],F=y[i+40>>2],I=y[i+32>>2],k=y[i>>2],M=y[i+16>>2],R=y[i+4>>2],P=y[i+8>>2],_[l+524>>2]=0,_[l+528>>2]=0,_[l+508>>2]=0,_[l+532>>2]=0,_[l+536>>2]=0,_[l+540>>2]=0,y[l+520>>2]=b(b(C*P)+b(f*S))+b(d*F),y[l+516>>2]=b(b(C*R)+b(f*x))+b(d*T),y[l+504>>2]=b(b(v*P)+b(h*S))+b(p*F),y[l+500>>2]=b(b(v*R)+b(h*x))+b(p*T),_[l+492>>2]=0,y[l+512>>2]=b(b(C*k)+b(f*M))+b(d*I),y[l+496>>2]=b(b(v*k)+b(h*M))+b(p*I),y[l+488>>2]=b(b(g*P)+b(E*S))+b(m*F),y[l+484>>2]=b(b(g*R)+b(E*x))+b(m*T),y[l+480>>2]=b(b(g*k)+b(E*M))+b(m*I),n=_[n+8>>2],he(l+120|0,e,t,i,c,b(o[_[_[u>>2]+48>>2]](u))),_[l+340>>2]=u,_[l+336>>2]=n,_[l+120>>2]=7344,_[l+332>>2]=r,t=_[r+4>>2],y[l+328>>2]=s,_[l+320>>2]=t,o[_[_[e>>2]+8>>2]](e,l+480|0,l+32|0,l+16|0),function(e,t,i,n,r,o){var a,s;B=a=B-16|0,s=_[e+52>>2],_[a+8>>2]=t,_[a+4>>2]=s,_[a>>2]=10328,di(_[e+56>>2],a,i,n,r,o),B=a+16|0}(u,l+120|0,l+48|0,l+96|0,l+32|0,l+16|0);break e;case 0:case 1:case 2:case 3:case 4:case 5:break t;case 6:}y[l+292>>2]=s,_[l+288>>2]=0,_[l+120>>2]=5624,_[l+284>>2]=_[r+4>>2],_[20+(O=l+48|0)>>2]=u,_[O+16>>2]=0,_[O+12>>2]=e,_[O+4>>2]=0,_[O+8>>2]=0,_[O>>2]=5988,o[_[_[O>>2]+8>>2]](O,t,i,c,c,l+120|0)&&(s=y[l+252>>2],h=y[l+256>>2],p=y[l+260>>2],(f=b(b(b(s*s)+b(h*h))+b(p*p)))>b(9999999747378752e-20)&&(d=y[l+284>>2])<y[r+4>>2]&&(m=p,p=b(b(1)/b(w(f))),y[l+260>>2]=m*p,y[l+256>>2]=h*p,y[l+252>>2]=s*p,e=_[n+8>>2],_[l+484>>2]=0,_[l+480>>2]=e,e=_[l+264>>2],_[l+496>>2]=_[l+260>>2],_[l+500>>2]=e,e=_[l+252>>2],t=_[l+256>>2],i=_[l+280>>2],_[l+512>>2]=_[l+276>>2],_[l+516>>2]=i,_[l+488>>2]=e,_[l+492>>2]=t,e=_[l+272>>2],_[l+504>>2]=_[l+268>>2],_[l+508>>2]=e,y[l+520>>2]=d,b(o[_[_[r>>2]+12>>2]](r,l+480|0,1))));break e}F=y[i+52>>2],I=y[i+56>>2],j=y[c+52>>2],p=y[c+56>>2],E=y[t+52>>2],k=y[t+56>>2],d=y[c+20>>2],m=y[c+36>>2],v=y[c+24>>2],C=y[c+40>>2],M=y[i+48>>2],R=y[c+48>>2],P=y[t+48>>2],f=y[c+32>>2],g=y[c>>2],x=y[c+16>>2],T=y[c+4>>2],S=y[c+8>>2],h=y[i+20>>2],D=y[i+36>>2],L=y[i+24>>2],z=y[i+40>>2],G=y[i+32>>2],U=y[i>>2],N=y[i+16>>2],V=y[i+4>>2],H=y[i+8>>2],_[l+524>>2]=0,_[l+528>>2]=0,_[l+508>>2]=0,_[l+532>>2]=0,_[l+536>>2]=0,_[l+540>>2]=0,y[l+520>>2]=b(b(S*H)+b(v*L))+b(C*z),y[l+516>>2]=b(b(S*V)+b(v*h))+b(C*D),y[l+504>>2]=b(b(T*H)+b(d*L))+b(m*z),y[l+500>>2]=b(b(T*V)+b(d*h))+b(m*D),_[l+492>>2]=0,y[l+512>>2]=b(b(S*U)+b(v*N))+b(C*G),y[l+496>>2]=b(b(T*U)+b(d*N))+b(m*G),y[l+488>>2]=b(b(g*H)+b(x*L))+b(f*z),y[l+484>>2]=b(b(g*V)+b(x*h))+b(f*D),y[l+480>>2]=b(b(g*U)+b(x*N))+b(f*G),n=_[n+8>>2],he(l+120|0,e,t,i,c,b(o[_[_[u>>2]+48>>2]](u))),_[l+340>>2]=u,_[l+336>>2]=n,_[l+120>>2]=7556,_[l+332>>2]=r,t=_[r+4>>2],y[l+328>>2]=s,_[l+320>>2]=t,o[_[_[e>>2]+8>>2]](e,l+480|0,l+48|0,l+96|0),_[l+44>>2]=0,D=b(-j),L=b(b(b(v*D)-b(S*R))-b(C*p)),s=b(L+b(b(b(S*P)+b(v*E))+b(C*k))),y[l+40>>2]=s,z=b(b(b(d*D)-b(T*R))-b(m*p)),h=b(z+b(b(b(T*P)+b(d*E))+b(m*k))),y[l+36>>2]=h,R=b(b(b(x*D)-b(g*R))-b(f*p)),p=b(R+b(b(b(g*P)+b(x*E))+b(f*k))),y[l+32>>2]=p,E=p,(f=b(R+b(b(b(g*M)+b(x*F))+b(f*I))))<p&&(y[l+32>>2]=f,E=f),g=h,(d=b(z+b(b(b(T*M)+b(d*F))+b(m*I))))<h&&(y[l+36>>2]=d,g=d),(m=b(L+b(b(b(S*M)+b(v*F))+b(C*I))))<(v=s)&&(y[l+40>>2]=m,v=m),_[l+28>>2]=0,y[l+24>>2]=s,y[l+20>>2]=h,y[l+16>>2]=p,p<f&&(y[l+16>>2]=f,p=f),h<d&&(y[l+20>>2]=d,h=d),s<m&&(y[l+24>>2]=m,s=m),y[l+32>>2]=y[l+48>>2]+E,y[l+36>>2]=y[l+52>>2]+g,y[l+40>>2]=y[l+56>>2]+v,y[l+16>>2]=y[l+96>>2]+p,y[l+20>>2]=y[l+100>>2]+h,y[l+24>>2]=y[l+104>>2]+s,o[_[_[u>>2]+64>>2]](u,l+120|0,l+32|0,l+16|0)}else if(31==(0|O)){o[_[4565]](6525),x=y[t+56>>2],T=y[t+52>>2],S=y[t+36>>2],F=y[t+20>>2],I=y[t+40>>2],k=y[t+24>>2],h=y[c+32>>2],p=y[c>>2],f=y[c+16>>2],M=y[t+32>>2],R=y[t>>2],P=y[t+16>>2],D=y[c+56>>2],N=y[c+52>>2],L=y[c+48>>2],z=y[t+48>>2],d=y[c+36>>2],m=y[c+4>>2],E=y[c+20>>2],G=y[t+4>>2],g=y[c+40>>2],U=y[t+8>>2],v=y[c+8>>2],C=y[c+24>>2],_[l+180>>2]=0,_[l+164>>2]=0,_[l+148>>2]=0,y[l+160>>2]=b(b(v*U)+b(C*k))+b(g*I),y[l+156>>2]=b(b(v*G)+b(C*F))+b(g*S),y[l+144>>2]=b(b(m*U)+b(E*k))+b(d*I),y[l+140>>2]=b(b(m*G)+b(E*F))+b(d*S),N=b(-N),y[l+176>>2]=b(b(b(C*N)-b(v*L))-b(g*D))+b(b(b(v*z)+b(C*T))+b(g*x)),y[l+172>>2]=b(b(b(E*N)-b(m*L))-b(d*D))+b(b(b(m*z)+b(E*T))+b(d*x)),_[l+132>>2]=0,y[l+152>>2]=b(b(v*R)+b(C*P))+b(g*M),y[l+136>>2]=b(b(m*R)+b(E*P))+b(d*M),y[l+128>>2]=b(b(p*U)+b(f*k))+b(h*I),y[l+124>>2]=b(b(p*G)+b(f*F))+b(h*S),y[l+120>>2]=b(b(p*R)+b(f*P))+b(h*M),y[l+168>>2]=b(b(b(f*N)-b(p*L))-b(h*D))+b(b(b(p*z)+b(f*T))+b(h*x)),o[_[_[e>>2]+8>>2]](e,l+120|0,l+48|0,l+96|0),x=y[i+56>>2],T=y[i+52>>2],S=y[i+36>>2],F=y[i+20>>2],I=y[i+40>>2],k=y[i+24>>2],h=y[c+32>>2],p=y[c>>2],f=y[c+16>>2],M=y[i+32>>2],R=y[i>>2],P=y[i+16>>2],D=y[c+56>>2],N=y[c+52>>2],L=y[c+48>>2],z=y[i+48>>2],d=y[c+36>>2],m=y[c+4>>2],E=y[c+20>>2],G=y[i+4>>2],g=y[c+40>>2],U=y[i+8>>2],v=y[c+8>>2],C=y[c+24>>2],_[l+180>>2]=0,_[l+164>>2]=0,_[l+148>>2]=0,y[l+160>>2]=b(b(v*U)+b(C*k))+b(g*I),y[l+156>>2]=b(b(v*G)+b(C*F))+b(g*S),y[l+144>>2]=b(b(m*U)+b(E*k))+b(d*I),y[l+140>>2]=b(b(m*G)+b(E*F))+b(d*S),N=b(-N),y[l+176>>2]=b(b(b(C*N)-b(v*L))-b(g*D))+b(b(b(v*z)+b(C*T))+b(g*x)),y[l+172>>2]=b(b(b(E*N)-b(m*L))-b(d*D))+b(b(b(m*z)+b(E*T))+b(d*x)),_[l+132>>2]=0,y[l+152>>2]=b(b(v*R)+b(C*P))+b(g*M),y[l+136>>2]=b(b(m*R)+b(E*P))+b(d*M),y[l+128>>2]=b(b(p*U)+b(f*k))+b(h*I),y[l+124>>2]=b(b(p*G)+b(f*F))+b(h*S),y[l+120>>2]=b(b(p*R)+b(f*P))+b(h*M),y[l+168>>2]=b(b(b(f*N)-b(p*L))-b(h*D))+b(b(b(p*z)+b(f*T))+b(h*x)),o[_[_[e>>2]+8>>2]](e,l+120|0,l+32|0,l+16|0),(h=y[l+32>>2])<y[l+48>>2]&&(y[l+48>>2]=h),(h=y[l+36>>2])<y[l+52>>2]&&(y[l+52>>2]=h),(h=y[l+40>>2])<y[l+56>>2]&&(y[l+56>>2]=h),(h=y[l+44>>2])<y[l+60>>2]&&(y[l+60>>2]=h),h=y[l+16>>2],y[l+96>>2]<h&&(y[l+96>>2]=h),h=y[l+20>>2],y[l+100>>2]<h&&(y[l+100>>2]=h),h=y[l+24>>2],y[l+104>>2]<h&&(y[l+104>>2]=h),h=y[l+28>>2],y[l+108>>2]<h&&(y[l+108>>2]=h),_[l+512>>2]=r,_[l+508>>2]=c,y[l+500>>2]=s,_[l+496>>2]=i,_[l+492>>2]=t,_[l+488>>2]=e,_[l+484>>2]=n,_[l+480>>2]=7772,_[l+504>>2]=u;t:if(e=_[u+68>>2])t=_[l+60>>2],_[l+128>>2]=_[l+56>>2],_[l+132>>2]=t,t=_[l+108>>2],_[l+144>>2]=_[l+104>>2],_[l+148>>2]=t,t=_[l+100>>2],_[l+136>>2]=_[l+96>>2],_[l+140>>2]=t,t=_[l+52>>2],_[l+120>>2]=_[l+48>>2],_[l+124>>2]=t,Dn(_[e>>2],l+120|0,l+480|0);else{if(_[u+20>>2]<1)break t;for(i=0;e=_[u+28>>2]+A(i,80)|0,t=_[e+64>>2],n=_[e+12>>2],_[l+128>>2]=_[e+8>>2],_[l+132>>2]=n,n=_[e+4>>2],_[l+120>>2]=_[e>>2],_[l+124>>2]=n,n=_[e+28>>2],_[l+144>>2]=_[e+24>>2],_[l+148>>2]=n,n=_[e+20>>2],_[l+136>>2]=_[e+16>>2],_[l+140>>2]=n,n=_[e+44>>2],_[l+160>>2]=_[e+40>>2],_[l+164>>2]=n,n=_[e+36>>2],_[l+152>>2]=_[e+32>>2],_[l+156>>2]=n,n=_[e+60>>2],_[l+176>>2]=_[e+56>>2],_[l+180>>2]=n,n=_[e+52>>2],_[l+168>>2]=_[e+48>>2],_[l+172>>2]=n,Ga(l+480|0,i,l+120|0,t),(0|(i=i+1|0))<_[u+20>>2];);}o[_[4566]]()}B=l+656|0}function le(e,t){var i,n,r=0,o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0);B=i=B-128|0,r=_[_[e+8>>2]+28>>2]+A(t,80)|0,n=_[r+64>>2],d=y[r+32>>2],m=y[r>>2],v=y[r+16>>2],g=y[r+56>>2],x=y[r+52>>2],T=y[r+48>>2],S=y[r+36>>2],E=y[r+20>>2],C=y[r+4>>2],w=y[r+40>>2],k=y[r+24>>2],O=y[r+8>>2],r=_[e+12>>2],R=y[r+52>>2],F=y[r+56>>2],o=y[r+24>>2],a=y[r+20>>2],s=y[r+40>>2],l=y[r+36>>2],I=y[r+48>>2],c=y[r+8>>2],u=y[r>>2],h=y[r+4>>2],p=y[r+16>>2],f=y[r+32>>2],_[i+124>>2]=0,_[i+108>>2]=0,_[i+92>>2]=0,y[i+104>>2]=b(b(O*f)+b(k*l))+b(w*s),y[i+100>>2]=b(b(C*f)+b(E*l))+b(S*s),y[i+88>>2]=b(b(O*p)+b(k*a))+b(w*o),y[i+84>>2]=b(b(C*p)+b(E*a))+b(S*o),y[i+120>>2]=F+b(b(b(f*T)+b(l*x))+b(s*g)),y[i+116>>2]=R+b(b(b(p*T)+b(a*x))+b(o*g)),_[i+76>>2]=0,y[i+72>>2]=b(b(u*O)+b(h*k))+b(c*w),y[i+68>>2]=b(b(u*C)+b(h*E))+b(c*S),y[i+64>>2]=b(b(m*u)+b(v*h))+b(d*c),y[i+112>>2]=I+b(b(b(u*T)+b(h*x))+b(c*g)),y[i+96>>2]=b(b(m*f)+b(v*l))+b(d*s),y[i+80>>2]=b(b(m*p)+b(v*a))+b(d*o),r=_[e+4>>2],_[i+60>>2]=t,_[i+56>>2]=-1,_[i+48>>2]=r,_[i+44>>2]=n,_[i+40>>2]=0,_[i+52>>2]=i- -64,r=_[e+24>>2],_[i+28>>2]=0,_[i+20>>2]=-65535,_[i+12>>2]=1065353216,_[i+16>>2]=0,_[i+36>>2]=t,_[i+32>>2]=r,_[i+8>>2]=7172,_[i+12>>2]=_[r+4>>2],_[i+28>>2]=_[r+20>>2],_[r+16>>2]=t,_[i+24>>2]=t,ce(_[e+16>>2],_[e+20>>2],i+40|0,i+8|0),B=i+128|0}function ce(e,t,i,n){var r,s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=0,v=b(0),g=b(0),A=0,x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=0,P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0);B=r=B-688|0,nn(r+632|0),_[r+660>>2]=0,_[r+664>>2]=0,_[r+656>>2]=1065353216,_[r+668>>2]=0,_[r+672>>2]=0,_[r+676>>2]=0,_[r+680>>2]=0,_[r+684>>2]=0,_[r+648>>2]=1065353216,_[r+652>>2]=1065353216,_[r+636>>2]=8,_[r+632>>2]=9868,s=_[i+12>>2],m=_[i+4>>2];e:if((0|(A=_[m+4>>2]))<=19)_[r+624>>2]=0,_[r+628>>2]=0,_[r+456>>2]=5624,_[r+620>>2]=_[n+4>>2],a[r+428|0]=0,_[r+404>>2]=953267991,_[12+(A=r+80|0)>>2]=m,_[A+8>>2]=r+632,_[A+4>>2]=r+96,_[A>>2]=4920,_[12+(M=r- -64|0)>>2]=m,_[M+8>>2]=r+632,_[M+4>>2]=r+96,_[M>>2]=5876,m=8&_[n+20>>2]?M:A,o[_[_[m>>2]+8>>2]](m,e,t,s,s,r+456|0)&&(c=y[r+588>>2],h=y[r+592>>2],l=y[r+596>>2],(u=b(b(b(c*c)+b(h*h))+b(l*l)))>b(9999999747378752e-20)&&(T=y[r+620>>2])<y[n+4>>2]&&(p=l,l=b(b(1)/b(w(u))),y[r+596>>2]=p*l,y[r+592>>2]=h*l,y[r+588>>2]=c*l,e=_[i+8>>2],_[r+36>>2]=0,_[r+32>>2]=e,e=_[r+600>>2],_[r+48>>2]=_[r+596>>2],_[r+52>>2]=e,e=_[r+592>>2],_[r+40>>2]=_[r+588>>2],_[r+44>>2]=e,y[r+56>>2]=T,b(o[_[_[n>>2]+12>>2]](n,r+32|0,1))));else if(A+-21>>>0<=8){if(g=y[s+20>>2],p=y[s+36>>2],f=y[s+24>>2],l=y[s+52>>2],u=y[s+56>>2],v=y[s+40>>2],x=y[s+32>>2],S=y[s+16>>2],E=y[s>>2],F=y[s+4>>2],c=y[s+48>>2],I=y[s+8>>2],T=y[e+52>>2],k=y[e+56>>2],h=y[e+48>>2],_[r+468>>2]=0,D=b(-l),L=b(f*D),z=b(v*u),C=b(b(L-b(I*c))-z),G=b(f*T),U=b(v*k),y[r+464>>2]=C+b(b(b(I*h)+G)+U),X=b(g*D),V=b(p*u),P=b(b(X-b(F*c))-V),H=b(g*T),j=b(p*k),y[r+460>>2]=P+b(b(b(F*h)+H)+j),W=b(b(b(S*D)-b(E*c))-b(x*u)),y[r+456>>2]=W+b(b(b(E*h)+b(S*T))+b(x*k)),O=y[t+52>>2],R=y[t+56>>2],l=y[t+48>>2],_[r+44>>2]=0,N=C,Y=b(I*l),I=b(f*O),C=b(v*R),y[r+40>>2]=N+b(b(Y+I)+C),N=P,f=b(F*l),F=b(g*O),P=b(p*R),y[r+36>>2]=N+b(b(f+F)+P),y[r+32>>2]=W+b(b(b(E*l)+b(S*O))+b(x*R)),21==_[m+4>>2]){e=_[i+8>>2],pe(r+96|0,r+456|0,r+32|0,_[n+20>>2]),_[r+148>>2]=m,_[r+144>>2]=e,_[r+140>>2]=n,_[r+96>>2]=6596,e=_[s+12>>2],_[r+160>>2]=_[s+8>>2],_[r+164>>2]=e,e=_[s+4>>2],_[r+152>>2]=_[s>>2],_[r+156>>2]=e,e=_[s+28>>2],_[r+176>>2]=_[s+24>>2],_[r+180>>2]=e,e=_[s+20>>2],_[r+168>>2]=_[s+16>>2],_[r+172>>2]=e,e=_[s+44>>2],_[r+192>>2]=_[s+40>>2],_[r+196>>2]=e,e=_[s+36>>2],_[r+184>>2]=_[s+32>>2],_[r+188>>2]=e,e=_[s+60>>2],_[r+208>>2]=_[s+56>>2],_[r+212>>2]=e,e=_[s+52>>2],_[r+200>>2]=_[s+48>>2],_[r+204>>2]=e,_[r+136>>2]=_[n+4>>2],function(e,t,i,n){var r,o;B=r=B-16|0,o=_[e+52>>2],_[r+8>>2]=t,_[r+4>>2]=o,_[r>>2]=10160,function(e,t,i,n){var r;B=r=B-32|0,_[r+24>>2]=0,_[r+28>>2]=0,_[r+16>>2]=0,_[r+20>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,d[e+60|0]?Lo(e,t,i,n,r+16|0,r,_[e+56>>2]):zo(e,t,i,n,r+16|0,r),B=r+32|0}(_[e+56>>2],r,i,n),B=r+16|0}(m,r+96|0,r+456|0,r+32|0);break e}g=y[s+32>>2],p=y[s+16>>2],f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[r+92>>2]=0,S=b(b(L-b(x*c))-z),y[r+88>>2]=b(b(b(h*x)+G)+U)+S,E=b(b(X-b(v*c))-V),y[r+84>>2]=b(b(b(h*v)+H)+j)+E,c=b(b(b(p*D)-b(f*c))-b(g*u)),y[r+80>>2]=b(b(b(h*f)+b(T*p))+b(k*g))+c,_[r+76>>2]=0,y[r+72>>2]=b(b(b(l*x)+I)+C)+S,y[r+68>>2]=b(b(b(l*v)+F)+P)+E,y[r+64>>2]=b(b(b(l*f)+b(O*p))+b(R*g))+c,e=_[i+8>>2],pe(r+96|0,r+80|0,r- -64|0,_[n+20>>2]),_[r+148>>2]=m,_[r+144>>2]=e,_[r+140>>2]=n,_[r+96>>2]=6780,e=_[s+12>>2],_[r+160>>2]=_[s+8>>2],_[r+164>>2]=e,e=_[s+4>>2],_[r+152>>2]=_[s>>2],_[r+156>>2]=e,e=_[s+28>>2],_[r+176>>2]=_[s+24>>2],_[r+180>>2]=e,e=_[s+20>>2],_[r+168>>2]=_[s+16>>2],_[r+172>>2]=e,e=_[s+44>>2],_[r+192>>2]=_[s+40>>2],_[r+196>>2]=e,e=_[s+36>>2],_[r+184>>2]=_[s+32>>2],_[r+188>>2]=e,e=_[s+60>>2],_[r+208>>2]=_[s+56>>2],_[r+212>>2]=e,e=_[s+52>>2],_[r+200>>2]=_[s+48>>2],_[r+204>>2]=e,_[r+136>>2]=_[n+4>>2],e=_[r+92>>2],_[r+24>>2]=_[r+88>>2],_[r+28>>2]=e,e=_[r+84>>2],_[r+16>>2]=_[r+80>>2],_[r+20>>2]=e,(c=y[r+64>>2])<y[r+16>>2]&&(y[r+16>>2]=c),(h=y[r+68>>2])<y[r+20>>2]&&(y[r+20>>2]=h),(l=y[r+72>>2])<y[r+24>>2]&&(y[r+24>>2]=l),(u=y[r+76>>2])<y[r+28>>2]&&(y[r+28>>2]=u),e=_[r+92>>2],_[r+8>>2]=_[r+88>>2],_[r+12>>2]=e,e=_[r+84>>2],_[r>>2]=_[r+80>>2],_[r+4>>2]=e,y[r>>2]<c&&(y[r>>2]=c),y[r+4>>2]<h&&(y[r+4>>2]=h),y[r+8>>2]<l&&(y[r+8>>2]=l),y[r+12>>2]<u&&(y[r+12>>2]=u),o[_[_[m>>2]+64>>2]](m,r+96|0,r+16|0,r)}else if(31==(0|A))if(A=_[m+68>>2],i=_[i+8>>2],_[r+120>>2]=n,_[r+116>>2]=t,_[r+112>>2]=e,_[r+108>>2]=s,_[r+104>>2]=m,_[r+100>>2]=i,_[r+96>>2]=6968,A)c=y[s+20>>2],h=y[s+36>>2],l=y[s+24>>2],u=y[s+52>>2],f=y[e+52>>2],T=y[s+40>>2],k=y[s+56>>2],v=y[e+56>>2],x=y[s>>2],O=y[s+16>>2],R=y[s+32>>2],S=y[s+4>>2],p=y[s+8>>2],g=y[s+48>>2],E=y[e+48>>2],_[r+468>>2]=0,C=p,p=b(E-g),f=b(f-u),v=b(v-k),y[r+464>>2]=b(b(C*p)+b(l*f))+b(T*v),y[r+460>>2]=b(b(p*S)+b(f*c))+b(v*h),y[r+456>>2]=b(b(p*x)+b(f*O))+b(v*R),p=y[t+52>>2],f=y[t+56>>2],v=y[s>>2],x=y[s+4>>2],S=y[s+8>>2],E=y[t+48>>2],_[r+44>>2]=0,g=b(E-g),C=l,l=b(p-u),u=b(f-k),y[r+40>>2]=b(b(S*g)+b(C*l))+b(T*u),y[r+36>>2]=b(b(g*x)+b(l*c))+b(u*h),y[r+32>>2]=b(b(g*v)+b(l*O))+b(u*R),function(e,t,i,n){var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=0,f=0,d=0,m=0,v=b(0),g=0,A=b(0),x=0,T=0,S=b(0),E=0,C=0,k=b(0),O=0,R=0,F=0,I=0,M=0,P=0;if(B=r=B-544|0,e){for(a=y[t+8>>2],s=y[i+8>>2],c=y[t>>2],l=y[i>>2],u=y[t+4>>2],v=y[i+4>>2],_[r+32>>2]=e,h=b(s-a),A=h,a=b(l-c),s=b(v-u),l=b(b(1)/b(w(b(b(b(a*a)+b(s*s))+b(h*h))))),h=b(h*l),v=a,a=b(a*l),S=s,s=b(s*l),S=b(b(A*h)+b(b(v*a)+b(S*s))),h=h==b(0)?b(0xde0b6b000000000):b(b(1)/h),e=h<b(0),O=(e<<4)+r|8,s=s==b(0)?b(0xde0b6b000000000):b(b(1)/s),i=s<b(0),R=(i<<4)+r|4,F=((1^e)<<4)+r|8,I=((1^i)<<4)+r|4,a=a==b(0)?b(0xde0b6b000000000):b(b(1)/a),e=a<b(0),M=(e<<4)+r|0,P=((1^e)<<4)+r|0,E=126,g=128,f=r+32|0,d=128,x=1;;){p=_[(C=(e=x+-1|0)<<2)+f>>2],i=_[p+4>>2],_[r>>2]=_[p>>2],_[r+4>>2]=i,i=_[p+12>>2],_[r+8>>2]=_[p+8>>2],_[r+12>>2]=i,i=_[p+28>>2],_[r+24>>2]=_[p+24>>2],_[r+28>>2]=i,i=_[p+20>>2],_[r+16>>2]=_[p+16>>2],_[r+20>>2]=i;t:{i:{n:{r:{o:{a:{s:{if(l=b(s*b(y[R>>2]-u)),v=b(a*b(y[P>>2]-c)),!(l>v||(c=b(a*b(y[M>>2]-c)),u=b(s*b(y[I>>2]-u)),c>u||(k=y[t+8>>2],(A=b(h*b(y[O>>2]-k)))>(u=u<v?u:v)||(c=l>c?l:c,l=b(h*b(y[F>>2]-k)),c>l|(A>c?A:c)<S^1|(l<u?l:u)>b(0)^1))))){if(_[p+40>>2]){if((0|e)<=(0|E)){i=f,m=d;break i}if((0|d)>=(0|(m=d<<1))){i=f;break n}if((0|g)>=(0|m)){i=f;break r}if(!d){i=0;break s}if(_[5585]=_[5585]+1,i=0|o[_[4567]](d<<3,16),(0|d)<1)break s;for(e=0;_[(g=e<<2)+i>>2]=_[f+g>>2],(0|d)!=(0|(e=e+1|0)););if(!T)break o;break a}o[_[_[n>>2]+12>>2]](n,p)}i=f,m=d;break t}if(e=T,T=1,!e)break o;if(g=m,!f)break r}f&&(_[5586]=_[5586]+1,o[_[4568]](f))}T=1,g=m}Pi((e=d<<2)+i|0,0,e)}E=m+-2|0}_[i+C>>2]=_[p+36>>2],_[(x<<2)+i>>2]=_[p+40>>2],e=x+1|0}if(!e)break;u=y[t+4>>2],c=y[t>>2],f=i,d=m,x=e}!T|!i||i&&(_[5586]=_[5586]+1,o[_[4568]](i))}B=r+544|0}(_[A>>2],r+456|0,r+32|0,r+96|0);else if(!((0|(t=_[m+20>>2]))<1))for(e=0;le(r+96|0,e),(0|t)!=(0|(e=e+1|0)););B=r+688|0}function ue(e,t,i,n){t|=0,i|=0,n|=0;var r,s=0,l=0,c=0,u=0,h=0;if(B=r=B-96|0,s=_[8+(e|=0)>>2],_[t+216>>2]=s,_[e+12>>2]==(0|s)&&!((0|s)>=(0|(c=s?s<<1:1)))){if(c&&(_[5585]=_[5585]+1,u=0|o[_[4567]](c<<2,16),s=_[e+8>>2]),(0|s)>=1)for(;_[(h=l<<2)+u>>2]=_[_[e+16>>2]+h>>2],(0|(l=l+1|0))!=(0|s););(l=_[e+16>>2])&&(d[e+20|0]&&(l&&(_[5586]=_[5586]+1,o[_[4568]](l)),s=_[e+8>>2]),_[e+16>>2]=0),_[e+16>>2]=u,_[e+12>>2]=c,a[e+20|0]=1}_[_[e+16>>2]+(s<<2)>>2]=t,_[e+8>>2]=s+1,s=_[t+16>>2],_[r+40>>2]=_[t+12>>2],_[r+44>>2]=s,s=_[t+8>>2],_[r+32>>2]=_[t+4>>2],_[r+36>>2]=s,s=_[t+32>>2],_[r+56>>2]=_[t+28>>2],_[r+60>>2]=s,s=_[t+24>>2],_[r+48>>2]=_[t+20>>2],_[r+52>>2]=s,s=_[t+48>>2],_[r+72>>2]=_[t+44>>2],_[r+76>>2]=s,s=_[t+40>>2],_[r+64>>2]=_[t+36>>2],_[r+68>>2]=s,s=_[t+64>>2],_[r+88>>2]=_[t+60>>2],_[r+92>>2]=s,s=_[t+56>>2],_[r+80>>2]=_[t+52>>2],_[r+84>>2]=s,s=_[t+192>>2],o[_[_[s>>2]+8>>2]](s,r+32|0,r+16|0,r),s=_[e+68>>2],_[t+188>>2]=o[_[_[s>>2]+8>>2]](s,r+16|0,r,_[_[t+192>>2]+4>>2],t,i,n,_[e+24>>2]),B=r+96|0}function he(e,t,i,n,r,o){var a;_[e+4>>2]=t,_[e>>2]=6076,t=_[i+12>>2],_[e+16>>2]=_[i+8>>2],_[e+20>>2]=t,t=_[i+4>>2],_[e+8>>2]=_[i>>2],_[e+12>>2]=t,t=_[i+28>>2],_[e+32>>2]=_[i+24>>2],_[e+36>>2]=t,t=_[i+20>>2],_[e+24>>2]=_[i+16>>2],_[e+28>>2]=t,t=_[i+44>>2],_[e+48>>2]=_[i+40>>2],_[e+52>>2]=t,t=_[i+36>>2],_[e+40>>2]=_[i+32>>2],_[e+44>>2]=t,a=_[i+60>>2],_[(t=e- -64|0)>>2]=_[i+56>>2],_[t+4>>2]=a,t=_[i+52>>2],_[e+56>>2]=_[i+48>>2],_[e+60>>2]=t,t=_[n+12>>2],_[e+80>>2]=_[n+8>>2],_[e+84>>2]=t,t=_[n+4>>2],_[e+72>>2]=_[n>>2],_[e+76>>2]=t,t=_[n+28>>2],_[e+96>>2]=_[n+24>>2],_[e+100>>2]=t,t=_[n+20>>2],_[e+88>>2]=_[n+16>>2],_[e+92>>2]=t,t=_[n+44>>2],_[e+112>>2]=_[n+40>>2],_[e+116>>2]=t,t=_[n+36>>2],_[e+104>>2]=_[n+32>>2],_[e+108>>2]=t,t=_[n+60>>2],_[e+128>>2]=_[n+56>>2],_[e+132>>2]=t,t=_[n+52>>2],_[e+120>>2]=_[n+48>>2],_[e+124>>2]=t,t=_[r+12>>2],_[e+144>>2]=_[r+8>>2],_[e+148>>2]=t,t=_[r+4>>2],_[e+136>>2]=_[r>>2],_[e+140>>2]=t,t=_[r+28>>2],_[e+160>>2]=_[r+24>>2],_[e+164>>2]=t,t=_[r+20>>2],_[e+152>>2]=_[r+16>>2],_[e+156>>2]=t,t=_[r+44>>2],_[e+176>>2]=_[r+40>>2],_[e+180>>2]=t,t=_[r+36>>2],_[e+168>>2]=_[r+32>>2],_[e+172>>2]=t,t=_[r+60>>2],_[e+192>>2]=_[r+56>>2],_[e+196>>2]=t,t=_[r+52>>2],_[e+184>>2]=_[r+48>>2],_[e+188>>2]=t,_[e+208>>2]=0,y[e+204>>2]=o,_[e+200>>2]=1065353216}function pe(e,t,i,n){var r=0;_[e>>2]=6052,r=_[t+4>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=r,r=_[t+12>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=r,t=_[i+4>>2],_[e+20>>2]=_[i>>2],_[e+24>>2]=t,t=_[i+12>>2],_[e+28>>2]=_[i+8>>2],_[e+32>>2]=t,_[e+40>>2]=1065353216,_[e+36>>2]=n}function fe(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0;var c,u=b(0),h=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=0,T=0,S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=0,I=0,M=b(0),P=0,D=0;B=c=B-304|0,u=y[t+52>>2],v=y[i+52>>2],h=y[t+56>>2],g=y[i+56>>2],A=y[t+48>>2],m=y[i+48>>2],_[c+300>>2]=0,h=b(g-h),y[c+296>>2]=h,k=b(v-u),y[c+292>>2]=k,O=b(m-A),y[c+288>>2]=O,mr(t,i,c+112|0,c+48|0),_[c+284>>2]=0,u=y[c+48>>2],v=b(u*y[c+120>>2]),y[c+280>>2]=v,g=b(u*y[c+116>>2]),y[c+276>>2]=g,A=b(u*y[c+112>>2]),y[c+272>>2]=A,u=y[n+52>>2],m=y[r+52>>2],f=y[n+56>>2],S=y[r+56>>2],E=y[n+48>>2],C=y[r+48>>2],_[c+268>>2]=0,S=b(S-f),y[c+264>>2]=S,R=b(m-u),y[c+260>>2]=R,E=b(C-E),y[c+256>>2]=E,mr(n,r,c+112|0,c+48|0),_[c+252>>2]=0,u=y[c+48>>2],m=b(u*y[c+120>>2]),y[c+248>>2]=m,f=b(u*y[c+116>>2]),y[c+244>>2]=f,u=b(u*y[c+112>>2]),y[c+240>>2]=u,i=_[e+12>>2],M=b(o[_[_[i>>2]+16>>2]](i)),C=b(0),(i=_[e+16>>2])&&(C=b(o[_[_[i>>2]+16>>2]](i)),h=y[c+296>>2],S=y[c+264>>2],k=y[c+292>>2],R=y[c+260>>2],O=y[c+288>>2],E=y[c+256>>2],m=y[c+248>>2],f=y[c+244>>2],v=y[c+280>>2],g=y[c+276>>2],A=y[c+272>>2],u=y[c+240>>2]),m=b(b(M*b(w(b(b(b(A*A)+b(g*g))+b(v*v)))))+b(C*b(w(b(b(b(u*u)+b(f*f))+b(m*m)))))),v=b(E-O),g=b(R-k),A=b(S-h);e:if(b(m+b(w(b(b(b(v*v)+b(g*g))+b(A*A)))))!=b(0)&&(a[c+216|0]=0,_[c+212>>2]=1566444395,_[c+176>>2]=5928,_e(e,t,n,c+176|0),i=_[c+208>>2],_[c+232>>2]=_[c+204>>2],_[c+236>>2]=i,i=_[c+200>>2],_[c+224>>2]=_[c+196>>2],_[c+228>>2]=i,d[c+216|0]&&(i=_[c+180>>2],F=_[c+184>>2],I=_[c+188>>2],!(b(m+b(b(b(v*y[c+180>>2])+b(g*y[c+184>>2]))+b(A*y[c+188>>2])))<=b(1.1920928955078125e-7))))){T=1,u=b(0);t:{if(h=b(y[c+212>>2]+y[s+172>>2]),f=y[c+192>>2],h>b(.0010000000474974513)){for(P=c+20|0,D=c+160|0,r=0;;){if((x=_[s+168>>2])&&(_[c+120>>2]=1065353216,_[c+124>>2]=0,_[c+112>>2]=1065353216,_[c+116>>2]=1065353216,o[_[_[x>>2]+28>>2]](x,c+224|0,b(.20000000298023224),c+112|0)),(f=b(m+b(b(b(v*(l(0,i),p()))+b(g*(l(0,F),p())))+b(A*(l(0,I),p())))))<=b(1.1920928955078125e-7)){T=0;break e}if((h=b(u+b(h/f)))<=u){T=0;break e}if(h<b(0)){T=0;break e}if(h>b(1)){T=0;break e}if(Tn(t,c+288|0,c+272|0,h,c+112|0),Tn(n,c+256|0,c+240|0,h,c+48|0),(i=_[s+168>>2])&&(_[c+8>>2]=0,_[c+12>>2]=0,_[c>>2]=1065353216,_[c+4>>2]=0,o[_[_[i>>2]+28>>2]](i,D,b(.20000000298023224),c)),o[_[_[s>>2]>>2]](s,h),a[c+40|0]=0,_[c+36>>2]=1566444395,_[c>>2]=5928,_e(e,c+112|0,c+48|0,c),!d[c+40|0])break t;if(f=y[s+172>>2],x=_[(i=P)+12>>2],_[c+232>>2]=_[i+8>>2],_[c+236>>2]=x,x=_[i+4>>2],_[c+224>>2]=_[i>>2],_[c+228>>2]=x,x=r+1|0,r>>>0>63){o[_[_[s>>2]+8>>2]](s,-2,x),T=0;break e}if(i=_[c+4>>2],F=_[c+8>>2],I=_[c+12>>2],r=x,u=h,!((h=b(y[c+36>>2]+f))>b(.0010000000474974513)))break}f=y[c+16>>2]}h=f,_[s+132>>2]=i,y[s+164>>2]=u,y[s+144>>2]=h,_[s+140>>2]=I,_[s+136>>2]=F,e=_[c+228>>2],_[s+148>>2]=_[c+224>>2],_[s+152>>2]=e,e=_[c+236>>2],_[s+156>>2]=_[c+232>>2],_[s+160>>2]=e;break e}o[_[_[s>>2]+8>>2]](s,-1,r),T=0}return B=c+304|0,0|T}function _e(e,t,i,n){var r,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=0,M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=0,U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=0,ee=0,te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0),ae=b(0);B=r=B-240|0,_[e+16>>2]?(ur(_[e+4>>2]),s=_[e+12>>2],I=_[s+4>>2],G=_[e+16>>2],$=s,ee=_[G+4>>2],M=b(o[_[_[s>>2]+48>>2]](s)),s=_[e+16>>2],e=function(e,t,i,n,r,o,s,l,c){return _[e+72>>2]=1,_[e+76>>2]=1,_[e+60>>2]=-1,a[e+52|0]=0,y[e+48>>2]=s,y[e+44>>2]=o,_[e+40>>2]=r,_[e+36>>2]=n,_[e+32>>2]=i,_[e+28>>2]=t,_[e+24>>2]=l,_[e+20>>2]=c,_[e+4>>2]=0,_[e+8>>2]=1065353216,_[e>>2]=3060,_[e+12>>2]=0,_[e+16>>2]=0,e}(r+160|0,$,G,I,ee,M,b(o[_[_[s>>2]+48>>2]](s)),_[e+4>>2],_[e+8>>2]),_[r+152>>2]=1566444395,s=_[t+12>>2],_[r+32>>2]=_[t+8>>2],_[r+36>>2]=s,s=_[t+4>>2],_[r+24>>2]=_[t>>2],_[r+28>>2]=s,s=_[t+28>>2],_[r+48>>2]=_[t+24>>2],_[r+52>>2]=s,s=_[t+20>>2],_[r+40>>2]=_[t+16>>2],_[r+44>>2]=s,I=_[t+44>>2],_[(s=r- -64|0)>>2]=_[t+40>>2],_[s+4>>2]=I,s=_[t+36>>2],_[r+56>>2]=_[t+32>>2],_[r+60>>2]=s,s=_[t+60>>2],_[r+80>>2]=_[t+56>>2],_[r+84>>2]=s,s=_[t+52>>2],_[r+72>>2]=_[t+48>>2],_[r+76>>2]=s,t=_[i+12>>2],_[r+96>>2]=_[i+8>>2],_[r+100>>2]=t,t=_[i+4>>2],_[r+88>>2]=_[i>>2],_[r+92>>2]=t,t=_[i+20>>2],_[r+104>>2]=_[i+16>>2],_[r+108>>2]=t,t=_[i+28>>2],_[r+112>>2]=_[i+24>>2],_[r+116>>2]=t,t=_[i+44>>2],_[r+128>>2]=_[i+40>>2],_[r+132>>2]=t,t=_[i+36>>2],_[r+120>>2]=_[i+32>>2],_[r+124>>2]=t,t=_[i+52>>2],_[r+136>>2]=_[i+48>>2],_[r+140>>2]=t,t=_[i+60>>2],_[r+144>>2]=_[i+56>>2],_[r+148>>2]=t,on(e,r+24|0,n,0)):(te=y[i+52>>2],P=y[i+56>>2],D=y[t+52>>2],N=y[t+56>>2],h=y[t+16>>2],p=y[t+32>>2],f=y[t+20>>2],A=y[t+36>>2],u=y[i+20>>2],d=y[i+36>>2],l=y[i+24>>2],x=y[t+24>>2],c=y[i+40>>2],T=y[t+40>>2],L=y[i+48>>2],z=y[t+48>>2],s=_[e+12>>2],S=y[t>>2],E=y[t+4>>2],v=y[i+32>>2],m=y[i+16>>2],O=y[i>>2],R=y[i+4>>2],F=y[i+8>>2],C=y[t+8>>2],e=_[e+20>>2],g=y[e+56>>2],w=y[e+60>>2],k=y[e+52>>2],_[r+172>>2]=0,U=b(b(b(C*R)+b(x*u))+b(T*d)),g=b(-g),X=b(b(b(C*O)+b(x*m))+b(T*v)),V=b(b(b(C*F)+b(x*l))+b(T*c)),y[r+168>>2]=b(b(U*g)-b(k*X))-b(w*V),H=b(b(b(E*R)+b(f*u))+b(A*d)),j=b(b(b(E*O)+b(f*m))+b(A*v)),W=b(b(b(E*F)+b(f*l))+b(A*c)),y[r+164>>2]=b(b(H*g)-b(k*j))-b(w*W),Y=b(b(b(S*R)+b(h*u))+b(p*d)),q=b(b(b(S*O)+b(h*m))+b(p*v)),Q=b(b(b(S*F)+b(h*l))+b(p*c)),y[r+160>>2]=b(b(Y*g)-b(k*q))-b(w*Q),o[_[_[s>>2]+64>>2]](r+24|0,s,r+160|0),h=y[e+56>>2],p=y[e+60>>2],ie=y[e+68>>2],f=y[e+52>>2],A=y[r+32>>2],x=y[r+24>>2],T=y[r+28>>2],ne=y[i+52>>2],S=y[i+24>>2],E=y[i+20>>2],re=y[i+56>>2],C=y[i+40>>2],w=y[i+36>>2],oe=y[i+48>>2],k=y[i+8>>2],g=y[i>>2],Z=y[i+4>>2],K=y[i+16>>2],J=y[i+32>>2],_[r+172>>2]=0,ae=b(b(b(z*O)+b(D*m))+b(N*v)),M=m,m=b(-te),v=b(b(ae+b(b(b(M*m)-b(O*L))-b(v*P)))+b(b(b(q*x)+b(j*T))+b(X*A))),c=b(b(b(b(b(z*F)+b(D*l))+b(N*c))+b(b(b(l*m)-b(F*L))-b(c*P)))+b(b(b(Q*x)+b(W*T))+b(V*A))),l=b(b(b(b(b(z*R)+b(D*u))+b(N*d))+b(b(b(u*m)-b(R*L))-b(d*P)))+b(b(b(Y*x)+b(H*T))+b(U*A))),u=b(b(b(p*c)+b(b(f*v)+b(h*l)))-ie),d=b(v-b(f*u)),l=b(l-b(h*u)),c=b(c-b(p*u)),y[r+168>>2]=re+b(b(b(J*d)+b(w*l))+b(C*c)),y[r+164>>2]=ne+b(b(b(d*K)+b(l*E))+b(c*S)),y[r+160>>2]=oe+b(b(k*c)+b(b(g*d)+b(Z*l))),_[r+20>>2]=0,y[r+16>>2]=b(b(f*J)+b(h*w))+b(p*C),y[r+12>>2]=b(b(f*K)+b(h*E))+b(p*S),y[r+8>>2]=b(b(g*f)+b(Z*h))+b(k*p),o[_[_[n>>2]+16>>2]](n,r+8|0,r+160|0,u)),B=r+240|0}function de(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);B=n=B-160|0,_[n+112>>2]=_[t>>2],_[n+64>>2]=_[t+64>>2],_[n+116>>2]=_[t+4>>2],_[n+68>>2]=_[t+68>>2],_[n+120>>2]=_[t+8>>2],_[n+72>>2]=_[t+72>>2],_[n+128>>2]=_[t+16>>2],_[n+80>>2]=_[t+80>>2],_[n+132>>2]=_[t+20>>2],_[n+84>>2]=_[t+84>>2],_[n+136>>2]=_[t+24>>2],_[n+88>>2]=_[t+88>>2],_[n+144>>2]=_[t+32>>2],_[n+96>>2]=_[t+96>>2],_[n+148>>2]=_[t+36>>2],_[n+100>>2]=_[t+100>>2],_[n+152>>2]=_[t+40>>2],_[n+104>>2]=_[t+104>>2],r=_[e+4>>2],s=y[r+40>>2],a=y[r+36>>2],l=y[r+32>>2],c=b(o[_[_[r>>2]+48>>2]](r)),u=b(o[_[_[r>>2]+48>>2]](r)),h=b(o[_[_[r>>2]+48>>2]](r)),_[n+36>>2]=0,a=b(a+u),y[n+28>>2]=a+a,a=b(l+c),y[n+24>>2]=a+a,s=b(s+h),y[n+32>>2]=s+s,e=_[e+8>>2],s=y[e+40>>2],a=y[e+36>>2],l=y[e+32>>2],c=b(o[_[_[e>>2]+48>>2]](e)),u=b(o[_[_[e>>2]+48>>2]](e)),h=b(o[_[_[e>>2]+48>>2]](e)),_[n+20>>2]=0,a=b(a+u),y[n+12>>2]=a+a,a=b(l+c),y[n+8>>2]=a+a,s=b(s+h),y[n+16>>2]=s+s,ki(t+48|0,n+112|0,n+24|0,t+112|0,n- -64|0,n+8|0,n+48|0,n+44|0,n+40|0,i),B=n+160|0}function me(e,t){t=b(t)}function ve(e){return 3}function ye(e,t,i,n){t|=0,i|=0,n|=0,o[_[_[(e|=0)>>2]+80>>2]](e,t,i,n)}function ge(e){Mn(e|=0),e&&(_[5586]=_[5586]+1,o[_[4568]](e))}function Ae(e,t){e|=0,t=b(t),y[e+48>>2]=t}function be(e){var t=0;return _[8+(e|=0)>>2]=5008,_[e>>2]=4980,t=_[e+56>>2],o[_[_[t>>2]+20>>2]](t,_[e+72>>2]),t=_[e+56>>2],o[_[_[t>>2]+16>>2]](t,_[e+72>>2]),0|e}function xe(e,t,i,n,r){var s;_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e>>2]=3588,_[e>>2]=4980,t=_[t>>2],_[e+60>>2]=0,_[e+56>>2]=t,_[e+8>>2]=5008,s=r?i:n,_[e+48>>2]=s,i=r?n:i,_[e+44>>2]=i,t=0|o[_[_[t>>2]+12>>2]](t,_[i+8>>2],_[s+8>>2]),_[e+72>>2]=t,i=_[e+56>>2],o[_[_[i>>2]+20>>2]](i,t),a[e+76|0]=r}function Te(e,t,i,n,r,a){e|=0,t|=0,i|=0,n|=0,r|=0,a|=0;var s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=0,x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=0,z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=0,re=0;B=s=B-96|0,ur(_[e+4>>2]),q=y[n+40>>2],Q=y[n+36>>2],Z=y[n+24>>2],K=y[n+20>>2],z=y[t+20>>2],G=y[t+36>>2],U=y[t+24>>2],O=y[t+52>>2],c=y[i+52>>2],R=y[n+52>>2],p=y[r+52>>2],X=y[t+40>>2],F=y[t+56>>2],f=y[i+56>>2],I=y[n+56>>2],l=y[r+56>>2],J=y[n+32>>2],$=y[n+16>>2],ee=y[n+8>>2],te=y[n+4>>2],ie=y[n>>2],V=y[t>>2],H=y[t+16>>2],j=y[t+32>>2],W=y[t+4>>2],Y=y[t+8>>2],M=y[t+48>>2],u=y[i+48>>2],P=y[n+48>>2],h=y[r+48>>2],A=_[e+8>>2],_[s+60>>2]=0,C=b(b(c-O)-b(p-R)),c=b(-C),x=b(b(u-M)-b(h-P)),T=b(b(f-F)-b(l-I)),y[s+56>>2]=b(b(U*c)-b(Y*x))-b(X*T),y[s+52>>2]=b(b(z*c)-b(x*W))-b(T*G),y[s+48>>2]=b(b(H*c)-b(x*V))-b(T*j),o[_[_[A>>2]+64>>2]](s+80|0,A,s+48|0),l=y[t+52>>2],u=y[t+24>>2],h=y[t+20>>2],c=y[t+56>>2],f=y[t+40>>2],p=y[t+36>>2],d=y[t+48>>2],m=y[t+8>>2],v=y[t>>2],E=y[t+4>>2],k=y[t+16>>2],S=y[t+32>>2],_[s+76>>2]=0,D=c,c=y[s+80>>2],N=p,p=y[s+84>>2],g=f,f=y[s+88>>2],y[s+72>>2]=D+b(b(b(S*c)+b(N*p))+b(g*f)),y[s+68>>2]=l+b(b(b(c*k)+b(p*h))+b(f*u)),y[s+64>>2]=d+b(b(b(c*v)+b(p*E))+b(f*m)),A=_[e+12>>2],c=y[n+20>>2],p=y[n+36>>2],f=y[n+24>>2],l=y[n+40>>2],u=y[n>>2],h=y[n+16>>2],d=y[n+32>>2],m=y[n+4>>2],v=y[n+8>>2],_[s+28>>2]=0,y[s+24>>2]=b(b(x*v)+b(C*f))+b(T*l),y[s+20>>2]=b(b(x*m)+b(C*c))+b(T*p),y[s+16>>2]=b(b(x*u)+b(C*h))+b(T*d),o[_[_[A>>2]+64>>2]](s+32|0,A,s+16|0),l=y[n+52>>2],u=y[n+24>>2],h=y[n+20>>2],c=y[n+56>>2],f=y[n+40>>2],p=y[n+36>>2],d=y[n+16>>2],m=y[n+48>>2],v=y[n+8>>2],E=y[n>>2],k=y[n+4>>2],S=y[n+32>>2],_[s+60>>2]=0,_[s+92>>2]=0,D=c,c=y[s+32>>2],N=p,p=y[s+36>>2],g=f,f=y[s+40>>2],S=b(D+b(b(b(S*c)+b(N*p))+b(g*f))),y[s+56>>2]=S,m=b(m+b(b(b(c*E)+b(p*k))+b(f*v))),y[s+48>>2]=m,c=b(l+b(b(b(c*d)+b(p*h))+b(f*u))),y[s+52>>2]=c,l=b(y[s+68>>2]-c),y[s+84>>2]=l,u=b(y[s+64>>2]-m),y[s+80>>2]=u,h=b(y[s+72>>2]-S),y[s+88>>2]=h,c=b(0),p=b(0),f=b(0),d=b(0);e:{t:if(b(b(b(u*u)+b(l*l))+b(h*h))>b(9999999747378752e-20))for(A=32;;){if(!A)break t;if(L=_[e+8>>2],_[s+12>>2]=0,l=b(-y[s+84>>2]),u=y[s+80>>2],h=y[s+88>>2],y[s+8>>2]=b(b(U*l)-b(Y*u))-b(X*h),y[s+4>>2]=b(b(z*l)-b(W*u))-b(G*h),y[s>>2]=b(b(H*l)-b(V*u))-b(j*h),o[_[_[L>>2]+64>>2]](s+16|0,L,s),_[s+76>>2]=0,l=y[s+16>>2],u=y[s+20>>2],h=y[s+24>>2],y[s+72>>2]=F+b(b(b(j*l)+b(G*u))+b(X*h)),y[s+68>>2]=O+b(b(b(H*l)+b(z*u))+b(U*h)),y[s+64>>2]=M+b(b(b(V*l)+b(W*u))+b(Y*h)),L=_[e+12>>2],_[s+12>>2]=0,l=y[s+80>>2],u=y[s+84>>2],h=y[s+88>>2],y[s+8>>2]=b(b(ee*l)+b(Z*u))+b(q*h),y[s+4>>2]=b(b(te*l)+b(K*u))+b(Q*h),y[s>>2]=b(b(ie*l)+b($*u))+b(J*h),o[_[_[L>>2]+64>>2]](s+16|0,L,s),_[s+60>>2]=0,_[s+44>>2]=0,l=y[s+16>>2],u=y[s+20>>2],h=y[s+24>>2],m=b(I+b(b(b(J*l)+b(Q*u))+b(q*h))),y[s+56>>2]=m,m=b(y[s+72>>2]-m),y[s+40>>2]=m,v=b(R+b(b(b($*l)+b(K*u))+b(Z*h))),y[s+52>>2]=v,v=b(y[s+68>>2]-v),y[s+36>>2]=v,l=b(P+b(b(b(ie*l)+b(te*u))+b(ee*h))),y[s+48>>2]=l,E=b(y[s+64>>2]-l),y[s+32>>2]=E,d>b(1))break e;if(l=y[s+80>>2],u=y[s+84>>2],h=y[s+88>>2],(k=b(b(b(E*l)+b(v*u))+b(m*h)))>b(0)){if((c=b(b(b(x*l)+b(C*u))+b(T*h)))>=b(-14210854715202004e-30))break e;p=y[t+48>>2],f=y[i+48>>2],O=y[t+52>>2],M=y[i+52>>2],F=y[t+56>>2],S=y[i+56>>2],P=y[n+48>>2],D=y[r+48>>2],R=y[n+52>>2],N=y[r+52>>2],I=y[n+56>>2],g=y[r+56>>2],_[s+44>>2]=0,y[s+40>>2]=m,y[s+36>>2]=v,y[s+32>>2]=E,d=b(d-b(k/c)),c=b(b(1)-d),I=b(b(I*c)+b(d*g)),R=b(b(c*R)+b(d*N)),P=b(b(c*P)+b(d*D)),F=b(b(c*F)+b(d*S)),O=b(b(c*O)+b(d*M)),M=b(b(c*p)+b(d*f)),ne=_[s+92>>2],p=u,f=h,c=l}if(Re(_[e+4>>2],s+32|0)||Pe(_[e+4>>2],s+32|0,s- -64|0,s+48|0),!Fe(_[e+4>>2],s+80|0))break t;if(A=A+-1|0,l=y[s+80>>2],g=b(l*l),l=y[s+84>>2],g=b(g+b(l*l)),l=y[s+88>>2],!(b(g+b(l*l))>b(9999999747378752e-20)))break}y[a+164>>2]=d,(l=b(b(b(c*c)+b(p*p))+b(f*f)))>=b(14210854715202004e-30)?(_[a+144>>2]=ne,g=f,f=b(b(1)/b(w(l))),d=b(g*f),y[a+140>>2]=d,p=b(p*f),y[a+136>>2]=p,c=b(c*f),y[a+132>>2]=c):(_[a+132>>2]=0,_[a+136>>2]=0,_[a+140>>2]=0,_[a+144>>2]=0,d=b(0),p=b(0),c=b(0)),b(b(b(x*c)+b(C*p))+b(T*d))>=b(-y[a+172>>2])||(Oe(_[e+4>>2],s+16|0,s),e=_[s+12>>2],_[a+156>>2]=_[s+8>>2],_[a+160>>2]=e,e=_[s+4>>2],_[a+148>>2]=_[s>>2],_[a+152>>2]=e,re=1)}return B=s+96|0,0|re}function Se(e){var t=0;return _[(e|=0)>>2]=4716,(t=_[e+56>>2])&&(d[e+60|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+56>>2]=0),_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,a[e+60|0]=1,(t=_[e+36>>2])&&(d[e+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+36>>2]=0),_[e+36>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,a[e+40|0]=1,function(e){var t;(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=0,a[e+16|0]=1,_[e+4>>2]=0,_[e+8>>2]=0}(e+4|0),0|e}function Ee(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+92|0}function Ce(e){return _[8+(e|=0)>>2]}function we(e){var t=0;return _[(e|=0)>>2]=3740,d[e+20|0]&&((t=_[_[e+16>>2]+16>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),(t=_[e+16>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),d[e+12|0]&&((t=_[_[e+8>>2]+16>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),(t=_[e+8>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),t=_[e+28>>2],o[_[_[t>>2]>>2]](t),(t=_[e+28>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+32>>2],o[_[_[t>>2]>>2]](t),(t=_[e+32>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+36>>2],o[_[_[t>>2]>>2]](t),(t=_[e+36>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+40>>2],o[_[_[t>>2]>>2]](t),(t=_[e+40>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+44>>2],o[_[_[t>>2]>>2]](t),(t=_[e+44>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+48>>2],o[_[_[t>>2]>>2]](t),(t=_[e+48>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+52>>2],o[_[_[t>>2]>>2]](t),(t=_[e+52>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+56>>2],o[_[_[t>>2]>>2]](t),(t=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+72>>2],o[_[_[t>>2]>>2]](t),(t=_[e+72>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+76>>2],o[_[_[t>>2]>>2]](t),(t=_[e+76>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+68>>2],o[_[_[t>>2]>>2]](t),(t=_[e+68>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+84>>2],o[_[_[t>>2]>>2]](t),(t=_[e+84>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+80>>2],o[_[_[t>>2]>>2]](t),(t=_[e+80>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),t=_[e+24>>2],o[_[_[t>>2]>>2]](t),(t=_[e+24>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),0|e}function ke(e,t){var i,n=0,r=0,s=0,l=0,c=0;if(_[e>>2]=3740,r=_[t+20>>2],_[5585]=_[5585]+1,n=0|o[_[4567]](4,16),_[n>>2]=r?2952:3160,_[e+24>>2]=n,_[5585]=_[5585]+1,r=0|o[_[4567]](20,16),n=_[e+24>>2],_[r+12>>2]=0,_[r+16>>2]=3,_[r>>2]=8668,a[r+4|0]=0,_[r+8>>2]=n,_[e+28>>2]=r,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=3856,a[n+4|0]=0,_[e+32>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=3980,a[n+4|0]=0,_[e+36>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4072,a[n+4|0]=0,_[e+40>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4152,a[n+4|0]=0,_[e+44>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4240,a[n+4|0]=0,_[e+48>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4324,a[n+4|0]=0,_[e+52>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4392,a[n+4|0]=0,_[e+56>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4476,a[n+4|0]=0,_[e+72>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4476,_[e+76>>2]=n,a[n+4|0]=1,_[5585]=_[5585]+1,n=0|o[_[4567]](8,16),_[n>>2]=4560,a[n+4|0]=0,_[e+68>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](16,16),_[n+8>>2]=1,_[n+12>>2]=0,_[n>>2]=4636,a[n+4|0]=0,_[e+84>>2]=n,_[5585]=_[5585]+1,n=0|o[_[4567]](16,16),_[n+8>>2]=1,_[n+12>>2]=0,_[n>>2]=4636,_[e+80>>2]=n,a[n+4|0]=1,i=_[t+16>>2],n=_[t>>2])_[e+8>>2]=n,a[e+12|0]=0;else{if(a[e+12|0]=1,_[5585]=_[5585]+1,l=0|o[_[4567]](24,16),n=_[t+8>>2],_[l+20>>2]=0,_[l+4>>2]=n,_[l>>2]=868,_[5585]=_[5585]+1,r=0|o[_[4567]](A(n,868),16),_[l+12>>2]=r,_[l+16>>2]=r,n=_[l+4>>2],_[l+8>>2]=n,c=n+-1|0)for(s=_[l>>2];n=r+s|0,_[r>>2]=n,r=n,c=c+-1|0;);else n=r;_[n>>2]=0,_[e+8>>2]=l}if(n=_[t+4>>2])return _[e+16>>2]=n,void(a[e+20|0]=0);if(a[e+20|0]=1,_[5585]=_[5585]+1,s=0|o[_[4567]](24,16),n=_[t+12>>2],_[s+20>>2]=0,_[s+4>>2]=n,t=(0|(t=(0|i)>80?i:80))>116?t+16&-16:128,_[s>>2]=t,_[5585]=_[5585]+1,r=0|o[_[4567]](A(t,n),16),_[s+12>>2]=r,_[s+16>>2]=r,t=_[s+4>>2],_[s+8>>2]=t,c=t+-1|0)for(t=_[s>>2];n=t+r|0,_[r>>2]=n,r=n,c=c+-1|0;);else n=r;_[n>>2]=0,_[e+16>>2]=s}function Oe(e,t,i){var n=0;Me(e),n=_[e+248>>2],_[t>>2]=_[e+244>>2],_[t+4>>2]=n,n=_[e+256>>2],_[t+8>>2]=_[e+252>>2],_[t+12>>2]=n,t=_[e+272>>2],_[i+8>>2]=_[e+268>>2],_[i+12>>2]=t,t=_[e+264>>2],_[i>>2]=_[e+260>>2],_[i+4>>2]=t}function Re(e,t){var i,n=0,r=b(0),o=0,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0);n=0;e:if(!((0|(i=_[e>>2]))<1)){for(s=y[e+308>>2],l=y[t+8>>2],c=y[t+4>>2],u=y[t>>2];;){if(r=b(u-y[4+(n=(o<<4)+e|0)>>2]),a=b(r*r),r=b(c-y[n+8>>2]),a=b(a+b(r*r)),r=b(l-y[n+12>>2]),n=1,b(a+b(r*r))<=s)break e;if((0|i)==(0|(o=o+1|0)))break}n=0}return o=n,y[t+12>>2]!=y[e+304>>2]|y[t+8>>2]!=y[e+300>>2]|y[t+4>>2]!=y[e+296>>2]|y[t>>2]!=y[e+292>>2]||(o=1),o}function Fe(e,t){var i,n=0;return i=Me(e),n=_[e+288>>2],_[t+8>>2]=_[e+284>>2],_[t+12>>2]=n,n=_[e+280>>2],_[t>>2]=_[e+276>>2],_[t+4>>2]=n,i}function Ie(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],e=0|o[_[_[e>>2]+40>>2]](e,_[i+8>>2]),B=i+16|0,0|e}function Me(e){var t,i=b(0),n=0,r=0,o=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=0,T=b(0),S=b(0);B=t=B-16|0;e:if(d[e+356|0]){a[e+356|0]=0,a[e+352|0]=0,_[e+344>>2]=0,_[e+348>>2]=0,_[e+336>>2]=0,_[e+340>>2]=0,x=-16&d[e+332|0],a[e+332|0]=x;t:if(!((n=_[e>>2])>>>0>4)){r=e+316|0;i:{n:{switch(n-1|0){case 1:if(s=y[e+4>>2],c=b(y[e+20>>2]-s),o=y[e+8>>2],u=b(y[e+24>>2]-o),i=y[e+12>>2],m=b(y[e+28>>2]-i),r=1,(o=b(b(b(b(b(0)-s)*c)+b(b(b(0)-o)*u))+b(b(b(0)-i)*m)))>b(0)&&(o<(i=b(b(b(c*c)+b(u*u))+b(m*m)))?(l=b(o/i),r=3):(l=b(1),r=2)),_[e+344>>2]=0,_[e+348>>2]=0,y[e+340>>2]=l,y[e+336>>2]=b(1)-l,a[0|(n=e+332|0)]=r|x,r=0,_[e+256>>2]=0,i=y[e+92>>2],s=b(i+b(l*b(y[e+108>>2]-i))),y[e+252>>2]=s,i=y[e+88>>2],c=b(i+b(l*b(y[e+104>>2]-i))),y[e+248>>2]=c,i=y[e+84>>2],u=b(i+b(l*b(y[e+100>>2]-i))),y[e+244>>2]=u,m=y[e+180>>2],o=y[e+184>>2],h=y[e+168>>2],i=y[e+188>>2],p=y[e+172>>2],f=y[e+164>>2],_[e+288>>2]=0,v=s,s=b(p+b(l*b(i-p))),y[e+284>>2]=v-s,o=b(h+b(l*b(o-h))),y[e+280>>2]=c-o,i=b(f+b(l*b(m-f))),y[e+276>>2]=u-i,_[e+272>>2]=0,y[e+268>>2]=s,y[e+264>>2]=o,y[e+260>>2]=i,no(e,n),y[e+336>>2]>=b(0)^1|y[e+340>>2]>=b(0)^1|y[e+344>>2]>=b(0)^1)break t;r=y[e+348>>2]>=b(0);break t;case 2:if(_[(n=t)+8>>2]=0,_[n+12>>2]=0,_[n>>2]=0,_[n+4>>2]=0,Ln(n,e+4|0,e+20|0,e+36|0,r),r=0,_[e+256>>2]=0,v=y[e+336>>2],g=y[e+340>>2],A=y[e+344>>2],T=b(b(b(v*y[e+92>>2])+b(g*y[e+108>>2]))+b(A*y[e+124>>2])),y[e+252>>2]=T,S=b(b(b(v*y[e+88>>2])+b(g*y[e+104>>2]))+b(A*y[e+120>>2])),y[e+248>>2]=S,l=b(b(b(v*y[e+84>>2])+b(g*y[e+100>>2]))+b(A*y[e+116>>2])),y[e+244>>2]=l,h=y[e+180>>2],p=y[e+196>>2],f=y[e+168>>2],c=y[e+184>>2],u=y[e+200>>2],m=y[e+172>>2],s=y[e+188>>2],o=y[e+204>>2],i=y[e+164>>2],_[e+288>>2]=0,s=b(b(b(v*m)+b(g*s))+b(A*o)),y[e+284>>2]=T-s,o=b(b(b(v*f)+b(g*c))+b(A*u)),y[e+280>>2]=S-o,i=b(b(b(v*i)+b(g*h))+b(A*p)),y[e+276>>2]=l-i,_[e+272>>2]=0,y[e+268>>2]=s,y[e+264>>2]=o,y[e+260>>2]=i,no(e,e+332|0),y[e+336>>2]>=b(0)^1|y[e+340>>2]>=b(0)^1|y[e+344>>2]>=b(0)^1)break t;r=y[e+348>>2]>=b(0);break t;case 3:if(_[(n=t)+8>>2]=0,_[n+12>>2]=0,_[n>>2]=0,_[n+4>>2]=0,function(e,t,i,n,r,o){var s,l,c,u,h=b(0),p=b(0),f=b(0),m=b(0),v=0,g=b(0),A=b(0),x=b(0),T=0,S=b(0),E=b(0),C=b(0),w=0,k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0);return B=s=B-48|0,a[s+24|0]=0,v=_[e+12>>2],_[o+8>>2]=_[e+8>>2],_[o+12>>2]=v,v=_[e+4>>2],_[o>>2]=_[e>>2],_[o+4>>2]=v,a[o+16|0]=15|d[o+16|0],j=y[e+8>>2],k=y[t+8>>2],U=b(j-k),O=y[i+8>>2],E=b(O-k),W=y[n>>2],R=y[t>>2],F=b(W-R),Y=y[r+4>>2],I=y[t+4>>2],M=b(Y-I),P=y[n+4>>2],D=b(P-I),g=y[r>>2],N=b(g-R),A=b(b(F*M)-b(D*N)),L=y[i>>2],z=b(L-R),q=y[r+8>>2],x=b(q-k),f=y[n+8>>2],m=b(f-k),h=b(b(D*x)-b(m*M)),G=y[i+4>>2],S=b(G-I),p=b(b(m*N)-b(F*x)),C=b(b(E*A)+b(b(z*h)+b(S*p))),Q=y[e>>2],X=b(Q-R),Z=y[e+4>>2],V=b(Z-I),l=b(C*C)<b(9.99999905104687e-9)?-1:b(b(b(U*A)+b(b(X*h)+b(V*p)))*C)<b(0),K=b(b(S*m)-b(E*D)),J=b(b(E*F)-b(z*m)),$=b(b(z*D)-b(S*F)),H=b(b(b(K*N)+b(J*M))+b($*x)),h=m,m=b(b(S*N)-b(z*M)),S=b(b(E*M)-b(S*x)),C=b(b(z*x)-b(E*N)),x=b(b(h*m)+b(b(F*S)+b(D*C))),h=b(P-G),P=b(g-L),g=b(W-L),p=b(Y-G),A=b(b(h*P)-b(g*p)),f=b(f-O),E=b(f*p),p=b(q-O),h=b(E-b(h*p)),p=b(b(g*p)-b(f*P)),f=b(b(b(k-O)*A)+b(b(b(R-L)*h)+b(b(I-G)*p))),(0|(v=(c=b(f*f)<b(9.99999905104687e-9)?-1:b(b(b(b(j-O)*A)+b(b(b(Q-L)*h)+b(b(Z-G)*p)))*f)<b(0))|(u=b(x*x)<b(9.99999905104687e-9)?-1:b(b(b(U*m)+b(b(X*S)+b(V*C)))*x)<b(0))|(T=b(H*H)<b(9.99999905104687e-9)?-1:b(b(b(b(X*K)+b(V*J))+b($*U))*H)<b(0))|l))<=-1?a[o+36|0]=1:v&&(p=b(34028234663852886e22),T&&(Ln(e,t,i,n,s+8|0),g=y[s+8>>2],h=b(g-y[e>>2]),p=b(h*h),A=y[s+12>>2],h=b(A-y[e+4>>2]),p=b(p+b(h*h)),f=y[s+16>>2],h=b(f-y[e+8>>2]),h=b(p+b(h*h)),p=b(34028234663852886e22),h<b(34028234663852886e22)&&(_[o+12>>2]=_[s+20>>2],y[o+8>>2]=f,y[o+4>>2]=A,y[o>>2]=g,v=d[s+24|0],a[o+16|0]=1&v|240&d[o+16|0]|2&v|4&v,w=_[s+36>>2],T=_[s+32>>2],v=_[s+28>>2],_[o+32>>2]=0,_[o+28>>2]=w,_[o+20>>2]=v,_[o+24>>2]=T,p=h)),l&&(Ln(e,t,n,r,s+8|0),g=y[s+8>>2],h=b(g-y[e>>2]),m=b(h*h),A=y[s+12>>2],h=b(A-y[e+4>>2]),m=b(m+b(h*h)),f=y[s+16>>2],h=b(f-y[e+8>>2]),(h=b(m+b(h*h)))<p&&(_[o+12>>2]=_[s+20>>2],y[o+8>>2]=f,y[o+4>>2]=A,y[o>>2]=g,T=(v=d[s+24|0])<<1,a[o+16|0]=8&T|4&T|1&v|240&d[o+16|0],w=_[s+36>>2],T=_[s+32>>2],v=_[s+28>>2],_[o+24>>2]=0,_[o+28>>2]=T,_[o+32>>2]=w,_[o+20>>2]=v,p=h)),u&&(Ln(e,t,r,i,s+8|0),g=y[s+8>>2],h=b(g-y[e>>2]),m=b(h*h),A=y[s+12>>2],h=b(A-y[e+4>>2]),m=b(m+b(h*h)),f=y[s+16>>2],h=b(f-y[e+8>>2]),(h=b(m+b(h*h)))<p&&(_[o+12>>2]=_[s+20>>2],y[o+8>>2]=f,y[o+4>>2]=A,y[o>>2]=g,t=d[s+24|0],a[o+16|0]=1&t|240&d[o+16|0]|t>>>1&2|t<<2&8,v=_[s+36>>2],t=_[s+28>>2],_[o+32>>2]=_[s+32>>2],_[o+28>>2]=0,_[o+24>>2]=v,_[o+20>>2]=t,p=h)),c?(Ln(e,i,r,n,s+8|0),w=1,g=y[s+8>>2],h=b(g-y[e>>2]),m=b(h*h),A=y[s+12>>2],h=b(A-y[e+4>>2]),m=b(m+b(h*h)),f=y[s+16>>2],h=b(f-y[e+8>>2]),b(m+b(h*h))<p&&(_[o+12>>2]=_[s+20>>2],y[o+8>>2]=f,y[o+4>>2]=A,y[o>>2]=g,e=d[s+24|0],a[o+16|0]=4&e|240&d[o+16|0]|e<<1&2|e<<2&8,t=_[s+36>>2],e=_[s+28>>2],_[o+32>>2]=_[s+32>>2],_[o+28>>2]=t,_[o+24>>2]=e,_[o+20>>2]=0)):w=1),B=s+48|0,w}(n,e+4|0,e+20|0,e+36|0,e+52|0,r)){if(r=0,_[e+256>>2]=0,h=y[e+336>>2],p=y[e+340>>2],f=y[e+344>>2],i=y[e+348>>2],c=b(b(b(b(h*y[e+92>>2])+b(p*y[e+108>>2]))+b(f*y[e+124>>2]))+b(i*y[e+140>>2])),y[e+252>>2]=c,u=b(b(b(b(h*y[e+88>>2])+b(p*y[e+104>>2]))+b(f*y[e+120>>2]))+b(i*y[e+136>>2])),y[e+248>>2]=u,m=b(b(b(b(h*y[e+84>>2])+b(p*y[e+100>>2]))+b(f*y[e+116>>2]))+b(i*y[e+132>>2])),y[e+244>>2]=m,_[e+288>>2]=0,_[e+272>>2]=0,s=b(b(b(b(h*y[e+164>>2])+b(p*y[e+180>>2]))+b(f*y[e+196>>2]))+b(i*y[e+212>>2])),y[e+260>>2]=s,o=b(b(b(b(h*y[e+168>>2])+b(p*y[e+184>>2]))+b(f*y[e+200>>2]))+b(i*y[e+216>>2])),y[e+264>>2]=o,i=b(b(b(b(h*y[e+172>>2])+b(p*y[e+188>>2]))+b(f*y[e+204>>2]))+b(i*y[e+220>>2])),y[e+268>>2]=i,y[e+276>>2]=m-s,y[e+280>>2]=u-o,y[e+284>>2]=c-i,no(e,e+332|0),y[e+336>>2]>=b(0)^1|y[e+340>>2]>=b(0)^1|y[e+344>>2]>=b(0)^1)break t;r=y[e+348>>2]>=b(0);break t}if(!d[e+352|0])break n;break;case 0:break i}r=0;break t}_[e+276>>2]=0,_[e+280>>2]=0,r=1,a[e+312|0]=1,_[e+284>>2]=0,_[e+288>>2]=0;break e}n=_[e+168>>2],_[e+260>>2]=_[e+164>>2],_[e+264>>2]=n,n=_[e+88>>2],_[e+244>>2]=_[e+84>>2],_[e+248>>2]=n,n=_[e+176>>2],_[e+268>>2]=_[e+172>>2],_[e+272>>2]=n,n=_[e+96>>2],_[e+252>>2]=_[e+92>>2],_[e+256>>2]=n,a[e+352|0]=0,_[e+288>>2]=0,y[e+280>>2]=y[e+248>>2]-y[e+264>>2],y[e+276>>2]=y[e+244>>2]-y[e+260>>2],y[e+284>>2]=y[e+252>>2]-y[e+268>>2],_[e+344>>2]=0,_[e+348>>2]=0,_[e+336>>2]=1065353216,_[e+340>>2]=0,a[e+332|0]=x,r=1}a[e+312|0]=r}else r=d[e+312|0];return B=t+16|0,0!=(0|r)}function Pe(e,t,i,n){var r=0,o=0;r=_[t+4>>2],_[e+292>>2]=_[t>>2],_[e+296>>2]=r,r=_[t+12>>2],_[e+300>>2]=_[t+8>>2],_[e+304>>2]=r,a[e+356|0]=1,o=_[t+4>>2],r=e+(_[e>>2]<<4)|0,_[r+4>>2]=_[t>>2],_[r+8>>2]=o,o=_[t+12>>2],_[r+12>>2]=_[t+8>>2],_[r+16>>2]=o,o=_[i+12>>2],t=(_[e>>2]<<4)+e|0,_[t+92>>2]=_[i+8>>2],_[t+96>>2]=o,r=_[i+4>>2],_[t+84>>2]=_[i>>2],_[t+88>>2]=r,r=_[n+12>>2],t=(_[e>>2]<<4)+e|0,_[t+172>>2]=_[n+8>>2],_[t+176>>2]=r,i=_[n+4>>2],_[t+164>>2]=_[n>>2],_[t+168>>2]=i,_[e>>2]=_[e>>2]+1}function De(e,t,i,n,r){var o,a=b(0),l=b(0),c=b(0),u=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=0,A=b(0),x=b(0),T=b(0),S=b(0),E=0,C=b(0),k=b(0),O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=0,D=b(0),N=b(0),L=b(0),z=0,G=0,U=0,X=0;if(_[60+(o=B+-64|0)>>2]=i,_[o+56>>2]=t,_[o+52>>2]=e,a=y[t>>2],u=y[e>>2],d=y[t+4>>2],c=y[e+4>>2],v=y[t+8>>2],f=y[e+8>>2],_[o+12>>2]=0,l=b(f-v),y[o+8>>2]=l,m=b(c-d),y[o+4>>2]=m,p=b(u-a),y[o>>2]=p,x=y[i>>2],T=y[i+4>>2],S=y[i+8>>2],_[o+44>>2]=0,_[o+28>>2]=0,R=b(S-f),y[o+40>>2]=R,F=b(T-c),y[o+36>>2]=F,S=b(v-S),y[o+24>>2]=S,C=b(d-T),y[o+20>>2]=C,I=b(x-u),y[o+32>>2]=I,k=b(a-x),y[o+16>>2]=k,d=b(-1),v=b(b(p*C)-b(m*k)),x=b(b(m*S)-b(l*C)),T=b(b(l*k)-b(p*S)),!((M=b(b(v*v)+b(b(x*x)+b(T*T))))>b(0)))return b(-1);for(;b(b(b(u*b(b(v*m)-b(T*l)))+b(c*b(b(x*l)-b(v*p))))+b(b(b(T*p)-b(x*m))*f))>b(0)?(X=_[2896+(U=E<<2)>>2],P=_[(g=X<<2)+(o+52|0)>>2],D=y[P>>2],l=b(D-u),N=y[P+4>>2],m=b(N-c),L=y[P+8>>2],p=b(L-f),a=b(b(b(l*l)+b(m*m))+b(p*p)),A=b(-1),a>b(0)&&((a=b(b(-b(b(b(u*l)+b(c*m))+b(f*p)))/a))>=b(1)?(z=1065353216,G=0,O=2,A=b(b(b(D*D)+b(N*N))+b(L*L))):a<=b(0)?(z=0,G=1065353216,O=1,A=b(b(b(u*u)+b(c*c))+b(f*f))):(h(b(b(1)-a)),G=s(0),h(a),z=s(0),O=3,f=b(f+b(p*a)),u=b(u+b(l*a)),a=b(c+b(m*a)),A=b(b(f*f)+b(b(u*u)+b(a*a))))),!!((a=A)<d)|d<b(0)?(_[r>>2]=(0-(1&O)&1<<E)+(1<<X&O<<30>>31),_[n+U>>2]=G,_[n+g>>2]=z,_[(_[g+2896>>2]<<2)+n>>2]=0):a=d):a=d,3!=(0|(E=E+1|0));)p=y[(g=(E<<4)+o|0)>>2],l=y[g+8>>2],m=y[g+4>>2],g=_[(o+52|0)+(E<<2)>>2],f=y[g+8>>2],c=y[g+4>>2],u=y[g>>2],d=a;return a<b(0)&&(a=y[e+8>>2],d=y[e>>2],u=y[e+4>>2],_[r>>2]=7,u=b(b(b(b(x*d)+b(T*u))+b(v*a))/M),a=b(T*u),c=b(y[t+4>>2]-a),d=b(x*u),f=b(y[t>>2]-d),l=b(b(k*c)-b(C*f)),A=b(l*l),u=b(v*u),l=b(y[t+8>>2]-u),c=b(b(C*l)-b(S*c)),p=b(c*c),c=b(b(S*f)-b(k*l)),A=b(w(b(A+b(p+b(c*c))))),c=b(w(M)),f=b(A/c),y[n>>2]=f,l=b(y[i+4>>2]-a),m=b(y[i>>2]-d),p=b(b(I*l)-b(F*m)),A=b(p*p),p=b(y[i+8>>2]-u),l=b(b(F*p)-b(R*l)),v=b(l*l),l=b(b(R*m)-b(I*p)),c=b(b(w(b(A+b(v+b(l*l)))))/c),y[n+4>>2]=c,y[n+8>>2]=b(1)-b(f+c),a=b(b(u*u)+b(b(d*d)+b(a*a)))),a}function Be(e,t,i){var n,r=b(0),o=0,a=b(0),s=b(0),l=b(0),c=b(0),u=0,h=0,p=0,f=0,d=b(0),m=b(0),v=0,g=0,x=0,T=b(0),S=b(0),E=b(0),C=b(0),k=0,O=0,R=0,F=0,I=0;B=n=B-96|0,_[e+376>>2]=0,_[e+364>>2]=4,_[e+368>>2]=0,u=e+316|0,_[e+360>>2]=u,_[e+356>>2]=e+284,_[e+352>>2]=e+252,_[e+348>>2]=e+220,o=_[t+4>>2],_[e>>2]=_[t>>2],_[e+4>>2]=o,o=_[t+20>>2],_[e+16>>2]=_[t+16>>2],_[e+20>>2]=o,o=_[t+12>>2],_[e+8>>2]=_[t+8>>2],_[e+12>>2]=o,o=_[t+36>>2],_[e+32>>2]=_[t+32>>2],_[e+36>>2]=o,o=_[t+28>>2],_[e+24>>2]=_[t+24>>2],_[e+28>>2]=o,o=_[t+52>>2],_[e+48>>2]=_[t+48>>2],_[e+52>>2]=o,o=_[t+44>>2],_[e+40>>2]=_[t+40>>2],_[e+44>>2]=o,f=_[4+(p=t- -64|0)>>2],_[(o=e- -64|0)>>2]=_[p>>2],_[o+4>>2]=f,o=_[t+60>>2],_[e+56>>2]=_[t+56>>2],_[e+60>>2]=o,o=_[t+84>>2],_[e+80>>2]=_[t+80>>2],_[e+84>>2]=o,o=_[t+76>>2],_[e+72>>2]=_[t+72>>2],_[e+76>>2]=o,o=_[t+100>>2],_[e+96>>2]=_[t+96>>2],_[e+100>>2]=o,o=_[t+92>>2],_[e+88>>2]=_[t+88>>2],_[e+92>>2]=o,o=_[t+108>>2],_[e+104>>2]=_[t+104>>2],_[e+108>>2]=o,o=_[t+116>>2],_[e+112>>2]=_[t+112>>2],_[e+116>>2]=o,o=_[t+124>>2],t=_[t+120>>2],_[e+180>>2]=0,_[e+144>>2]=0,_[e+120>>2]=t,_[e+124>>2]=o,t=_[i+12>>2],_[e+136>>2]=_[i+8>>2],_[e+140>>2]=t,t=_[i+4>>2],_[e+128>>2]=_[i>>2],_[e+132>>2]=t,o=e+128|0,r=y[e+128>>2],l=y[e+132>>2],s=y[e+136>>2],(d=b(b(b(r*r)+b(l*l))+b(s*s)))>b(0)?(y[n+40>>2]=-s,y[n+36>>2]=-l,y[n+32>>2]=-r):(_[n+40>>2]=0,_[n+32>>2]=1065353216,_[n+36>>2]=0),_[n+44>>2]=0,_[e+364>>2]=3,_[e+164>>2]=0,_[e+180>>2]=1,_[e+148>>2]=u,an(e,n+32|0,u),_[e+164>>2]=1065353216,t=_[e+148>>2],i=_[t+20>>2],_[o>>2]=_[t+16>>2],_[o+4>>2]=i,i=_[t+28>>2],_[o+8>>2]=_[t+24>>2],_[o+12>>2]=i,i=_[t+28>>2],_[n+88>>2]=_[t+24>>2],_[n+92>>2]=i,i=_[t+20>>2],_[n+80>>2]=_[t+16>>2],_[n+84>>2]=i,i=_[t+28>>2],_[n+72>>2]=_[t+24>>2],_[n+76>>2]=i,i=_[t+20>>2],_[n+64>>2]=_[t+16>>2],_[n+68>>2]=i,i=_[t+28>>2],_[n+56>>2]=_[t+24>>2],_[n+60>>2]=i,i=_[t+20>>2],_[n+48>>2]=_[t+16>>2],_[n+52>>2]=i,i=_[t+28>>2],_[n+40>>2]=_[t+24>>2],_[n+44>>2]=i,i=_[t+20>>2],_[n+32>>2]=_[t+16>>2],_[n+36>>2]=i,r=y[e+136>>2],l=y[e+132>>2],s=y[e+128>>2],u=_[e+368>>2];e:{t:{i:{for(;;){if((m=b(w(b(b(b(s*s)+b(l*l))+b(r*r)))))<b(9999999747378752e-20)){_[e+376>>2]=1;break i}if(_[n+28>>2]=0,y[n+24>>2]=-r,y[n+20>>2]=-l,y[n+16>>2]=-s,p=148+(i=A(u,36)+e|0)|0,t=_[i+180>>2],_[16+(f=p+(t<<2)|0)>>2]=0,h=_[e+364>>2]+-1|0,_[e+364>>2]=h,v=f,f=_[348+((h<<2)+e|0)>>2],_[v>>2]=f,_[i+180>>2]=t+1,an(e,n+16|0,f),h=_[i+180>>2],t=_[(p+(h<<2)|0)-4>>2],r=y[t+16>>2],l=b(r-y[n+32>>2]),a=b(l*l),l=y[t+20>>2],s=b(l-y[n+36>>2]),c=b(a+b(s*s)),s=y[t+24>>2],a=b(s-y[n+40>>2]),!(b(c+b(a*a))<b(9999999747378752e-20)||(a=b(r-y[n+48>>2]),c=b(a*a),a=b(l-y[n+52>>2]),c=b(c+b(a*a)),a=b(s-y[n+56>>2]),b(c+b(a*a))<b(9999999747378752e-20)||(a=b(r-y[n+64>>2]),c=b(a*a),a=b(l-y[n+68>>2]),c=b(c+b(a*a)),a=b(s-y[n+72>>2]),b(c+b(a*a))<b(9999999747378752e-20)||(a=b(r-y[n+80>>2]),c=b(a*a),a=b(l-y[n+84>>2]),c=b(c+b(a*a)),a=b(s-y[n+88>>2]),b(c+b(a*a))<b(9999999747378752e-20)))))){if(x=_[t+28>>2],_[8+(f=(n+32|0)+((k=k+1&3)<<4)|0)>>2]=_[t+24>>2],_[f+12>>2]=x,v=_[t+20>>2],_[f>>2]=_[t+16>>2],_[f+4>>2]=v,r=b(b(b(b(y[e+128>>2]*r)+b(y[e+132>>2]*l))+b(y[e+136>>2]*s))/m),b(b(m-(T=r>T?r:T))+b(m*b(-9999999747378752e-20)))<=b(0)){u=_[e+368>>2],i=A(u,36)+e|0,t=_[i+180>>2]+-1|0,_[i+180>>2]=t,t=_[148+(i+(t<<2)|0)>>2],i=_[e+364>>2],_[e+364>>2]=i+1,_[348+((i<<2)+e|0)>>2]=t;break i}_[n+12>>2]=0;n:{r:{o:if(!((t=h+-2|0)>>>0>2)){switch(t-1|0){default:if(t=_[i+152>>2],S=y[t+16>>2],p=_[p>>2],d=y[p+16>>2],m=b(S-d),E=y[t+20>>2],l=y[p+20>>2],a=b(E-l),C=y[t+24>>2],s=y[p+24>>2],c=b(C-s),!((r=b(b(b(m*m)+b(a*a))+b(c*c)))>b(0)))break r;if((r=b(b(-b(b(b(d*m)+b(l*a))+b(s*c)))/r))>=b(1)){_[n+16>>2]=0,_[n+20>>2]=1065353216,_[n+12>>2]=2,d=b(b(b(S*S)+b(E*E))+b(C*C));break o}if(r<=b(0)){_[n+16>>2]=1065353216,_[n+20>>2]=0,_[n+12>>2]=1,d=b(b(b(d*d)+b(l*l))+b(s*s));break o}_[n+12>>2]=3,y[n+20>>2]=r,y[n+16>>2]=b(1)-r,s=b(s+b(c*r)),d=b(d+b(m*r)),r=b(l+b(a*r)),d=b(b(s*s)+b(b(d*d)+b(r*r)));break o;case 0:d=De(_[p>>2]+16|0,_[i+152>>2]+16|0,_[i+156>>2]+16|0,n+16|0,n+12|0);break o;case 1:}d=G(_[p>>2]+16|0,_[i+152>>2]+16|0,_[i+156>>2]+16|0,_[i+160>>2]+16|0,n+16|0,n+12|0)}if(d>=b(0)){if(t=0,v=A(u=1-u|0,36)+e|0,_[(p=v)+180>>2]=0,_[o+8>>2]=0,_[o+12>>2]=0,_[o>>2]=0,_[o+4>>2]=0,_[e+368>>2]=u,r=b(0),f=_[n+12>>2],l=b(0),s=b(0),!(x=_[i+180>>2]))break n;for(;h=_[148+(O=(g=t<<2)+i|0)>>2],f>>>t&1?(R=_[p+180>>2],_[148+(F=(R<<2)+v|0)>>2]=h,r=y[(h=g+(n+16|0)|0)>>2],h=_[h>>2],_[p+180>>2]=R+1,_[F+164>>2]=h,h=_[O+148>>2],m=y[h+24>>2],l=y[h+20>>2],s=b(b(y[h+16>>2]*r)+y[e+128>>2]),y[e+128>>2]=s,l=b(b(l*r)+y[e+132>>2]),y[e+132>>2]=l,r=b(b(m*r)+y[e+136>>2]),y[e+136>>2]=r):(g=_[e+364>>2],_[e+364>>2]=g+1,_[348+((g<<2)+e|0)>>2]=h),(0|x)!=(0|(t=t+1|0)););break n}}u=_[e+368>>2],i=A(u,36)+e|0,t=_[i+180>>2]+-1|0,_[i+180>>2]=t,t=_[148+(i+(t<<2)|0)>>2],i=_[e+364>>2],_[e+364>>2]=i+1,_[348+((i<<2)+e|0)>>2]=t;break i}if(15==(0|f)&&(_[e+376>>2]=1),127==(0|I)){t=2,_[e+376>>2]=2,_[e+372>>2]=148+(A(u,36)+e|0);break e}if(I=I+1|0,!(t=_[e+376>>2]))continue;break t}break}u=_[e+368>>2],i=A(u,36)+e|0,t=_[i+180>>2]+-1|0,_[i+180>>2]=t,t=_[148+(i+(t<<2)|0)>>2],i=_[e+364>>2],_[e+364>>2]=i+1,_[348+((i<<2)+e|0)>>2]=t}t=_[e+376>>2]}_[e+372>>2]=148+(A(u,36)+e|0),t>>>0>1||(t-1?(r=y[e+128>>2],a=b(r*r),r=y[e+132>>2],a=b(a+b(r*r)),r=y[e+136>>2],y[e+144>>2]=w(b(a+b(r*r))),t=0):(_[e+144>>2]=0,t=1))}return B=n+96|0,t}function Ne(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+12>>2]](e,_[i+8>>2]),B=i+16|0}function Le(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,_[_[e+12>>2]+264>>2]=_[e+8>>2],B=i+16|0}function ze(e,t,i){e|=0,i|=0;var n,r=0;return _[16+(t|=0)>>2]=_[e+4>>2],_[t+20>>2]=_[e+8>>2],_[t+24>>2]=_[e+12>>2],_[t+28>>2]=_[e+16>>2],_[t+32>>2]=_[e+20>>2],_[t+36>>2]=_[e+24>>2],_[t+40>>2]=_[e+28>>2],_[t+44>>2]=_[e+32>>2],_[t+48>>2]=_[e+36>>2],_[t+52>>2]=_[e+40>>2],_[t+56>>2]=_[e+44>>2],_[t+60>>2]=_[e+48>>2],_[t+64>>2]=_[e+52>>2],_[t+68>>2]=_[e+56>>2],_[t+72>>2]=_[e+60>>2],_[t+76>>2]=_[e- -64>>2],_[t+80>>2]=_[e+68>>2],_[t+84>>2]=_[e+72>>2],_[t+88>>2]=_[e+76>>2],_[t+92>>2]=_[e+80>>2],_[t+96>>2]=_[e+84>>2],_[t+100>>2]=_[e+88>>2],_[t+104>>2]=_[e+92>>2],_[t+108>>2]=_[e+96>>2],_[t+112>>2]=_[e+100>>2],_[t+116>>2]=_[e+104>>2],_[t+120>>2]=_[e+108>>2],_[t+124>>2]=_[e+112>>2],_[t+128>>2]=_[e+116>>2],_[t+132>>2]=_[e+120>>2],_[t+136>>2]=_[e+124>>2],_[t+140>>2]=_[e+128>>2],_[t+144>>2]=_[e+132>>2],_[t+148>>2]=_[e+136>>2],_[t+152>>2]=_[e+140>>2],_[t+156>>2]=_[e+144>>2],_[t+160>>2]=_[e+148>>2],_[t+164>>2]=_[e+152>>2],_[t+168>>2]=_[e+156>>2],_[t+172>>2]=_[e+160>>2],_[t+176>>2]=_[e+164>>2],_[t+180>>2]=_[e+168>>2],_[t+184>>2]=_[e+172>>2],_[t+188>>2]=_[e+176>>2],_[t+232>>2]=_[e+180>>2],r=_[e+184>>2],_[t>>2]=0,_[t+192>>2]=r,r=0|o[_[_[i>>2]+28>>2]](i,_[e+192>>2]),_[t+8>>2]=0,_[t+4>>2]=r,_[t+236>>2]=_[e+204>>2],_[t+240>>2]=_[e+208>>2],_[t+244>>2]=_[e+212>>2],_[t+248>>2]=_[e+220>>2],_[t+196>>2]=_[e+224>>2],_[t+200>>2]=_[e+228>>2],_[t+204>>2]=_[e+236>>2],_[t+208>>2]=_[e+244>>2],_[t+212>>2]=_[e+248>>2],_[t+216>>2]=_[e+232>>2],_[t+252>>2]=_[e+252>>2],r=0|o[_[_[i>>2]+40>>2]](i,e),n=0|o[_[_[i>>2]+28>>2]](i,r),_[t+12>>2]=n,n&&o[_[_[i>>2]+48>>2]](i,r),_[t+220>>2]=_[e+268>>2],_[t+224>>2]=_[e+272>>2],_[t+228>>2]=_[e+276>>2],e=_[e+280>>2],_[t+260>>2]=0,_[t+256>>2]=e,2644}function Ge(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+264>>2]}function Ue(e){var t;_[e+132>>2]=0,_[e+136>>2]=0,_[e>>2]=2616,_[e+188>>2]=0,_[e+192>>2]=0,_[e+180>>2]=0,_[e+184>>2]=1566444395,_[e+164>>2]=1065353216,_[e+168>>2]=1065353216,_[e+276>>2]=0,_[e+280>>2]=0,_[e+268>>2]=1065353216,_[e+272>>2]=0,_[e+260>>2]=-1,_[e+264>>2]=-1,_[e+252>>2]=1,_[e+256>>2]=0,_[e+244>>2]=1036831949,_[e+248>>2]=1176256512,_[e+236>>2]=0,_[e+240>>2]=0,_[e+228>>2]=1056964608,_[e+232>>2]=0,_[e+220>>2]=1,_[e+224>>2]=0,_[e+212>>2]=-1,_[e+216>>2]=-1,_[e+204>>2]=1,_[e+208>>2]=-1,_[e+140>>2]=0,_[e+144>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,_[e+160>>2]=0,_[e+172>>2]=1065353216,_[e+176>>2]=0,_[e+196>>2]=0,_[e+200>>2]=0,a[e+300|0]=1,_[e+304>>2]=0,_[e+296>>2]=0,_[e+288>>2]=0,_[e+292>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,_[e+4>>2]=1065353216,_[e+16>>2]=0,_[e+20>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,_[e+24>>2]=1065353216,_[e+36>>2]=0,_[e+40>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,_[e+44>>2]=1065353216,_[e+56>>2]=0,_[e+60>>2]=0,_[e+72>>2]=0,_[e+76>>2]=0,_[(t=e- -64|0)>>2]=0,_[t+4>>2]=1065353216,_[e+80>>2]=0,_[e+84>>2]=0,_[e+88>>2]=1065353216,_[e+100>>2]=0,_[e+104>>2]=0,_[e+92>>2]=0,_[e+96>>2]=0,_[e+128>>2]=0,_[e+108>>2]=1065353216,_[e+120>>2]=0,_[e+124>>2]=0,_[e+112>>2]=0,_[e+116>>2]=0}function Xe(e,t){var i=0,n=0,r=0,a=0;e:if(4!=(0|(i=_[e+844>>2])))_[e+844>>2]=i+1;else{if(i=function(e,t){var i,n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),_=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=0,E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),B=b(0),N=b(0),L=b(0),z=0,G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0);z=(S=(n=y[e+84>>2])<(r=y[t+80>>2]))?0:-1,i=(S=(a=y[e+292>>2])<(n=S?n:r))?1:z,S=(r=y[e+500>>2])<(n=S?a:n),S=(z=y[e+708>>2]<(S?r:n))?3:S?2:i,c=y[t>>2];t:{i:{n:{r:{if(d[18248]){if(!S){v=y[e+636>>2],E=y[e+428>>2],s=b(v-E),T=y[e+632>>2],C=y[e+424>>2],a=b(T-C),o=y[e+628>>2],R=y[e+420>>2],p=b(o-R),n=y[t+8>>2],r=y[t+4>>2];break r}if(l=y[e+212>>2],u=b(c-l),T=y[e+632>>2],C=y[e+424>>2],a=b(T-C),r=y[t+4>>2],_=y[e+216>>2],n=b(r-_),o=y[e+628>>2],R=y[e+420>>2],p=b(o-R),s=b(b(u*a)-b(n*p)),h=b(s*s),v=y[e+636>>2],E=y[e+428>>2],s=b(v-E),f=b(n*s),n=y[t+8>>2],w=y[e+220>>2],g=b(n-w),A=b(f-b(g*a)),u=b(b(g*p)-b(u*s)),j=b(h+b(b(A*A)+b(u*u))),1!=(0|S))break r;c=b(c-y[e+4>>2]),n=b(n-y[e+12>>2]),r=b(r-y[e+8>>2]),p=b(0);break n}o:{a:{if(S){if(M=y[e+212>>2],T=b(c-M),_=y[e+424>>2],g=y[e+632>>2],O=b(_-g),C=y[t+4>>2],P=y[e+216>>2],v=b(C-P),l=y[e+420>>2],A=y[e+628>>2],F=b(l-A),n=b(b(T*O)-b(v*F)),r=b(n*n),w=y[e+428>>2],u=y[e+636>>2],p=b(w-u),E=y[t+8>>2],o=y[e+220>>2],R=b(E-o),n=b(b(v*p)-b(R*O)),a=b(n*n),n=b(b(R*F)-b(T*p)),a=b(r+b(a+b(n*n))),s=b(c-l),I=b(P-g),n=b(C-_),G=b(M-A),r=b(b(s*I)-b(n*G)),h=b(r*r),U=b(o-u),r=b(E-w),f=b(b(n*U)-b(r*I)),m=b(f*f),f=b(b(r*G)-b(s*U)),f=a>(f=b(h+b(m+b(f*f))))?a:f,a=b(P-_),N=b(c-A),m=b(M-l),B=b(C-g),k=b(b(a*N)-b(m*B)),D=b(k*k),k=b(o-w),h=a,a=b(E-u),h=b(b(k*B)-b(h*a)),m=b(b(m*a)-b(k*N)),j=f>(m=b(D+b(b(h*h)+b(m*m))))?f:m,1==(0|S)){f=y[e+4>>2],X=b(f-A),h=b(c-f),m=y[e+12>>2],V=b(m-u),k=y[e+8>>2],H=b(k-g),D=b(E-m),L=b(C-k),p=b(0);break a}}else w=y[e+428>>2],u=y[e+636>>2],p=b(w-u),_=y[e+424>>2],g=y[e+632>>2],O=b(_-g),l=y[e+420>>2],A=y[e+628>>2],F=b(l-A),E=y[t+8>>2],a=b(E-u),C=y[t+4>>2],B=b(C-g),N=b(c-A),r=b(E-w),n=b(C-_),s=b(c-l);if(f=y[e+4>>2],h=b(c-f),k=y[e+8>>2],L=b(C-k),o=b(b(h*O)-b(L*F)),v=b(o*o),m=y[e+12>>2],D=b(E-m),o=b(b(L*p)-b(D*O)),p=b(b(D*F)-b(h*p)),p=b(v+b(b(o*o)+b(p*p))),H=b(k-g),X=b(f-A),o=b(b(s*H)-b(n*X)),v=b(o*o),V=b(m-u),o=b(b(n*V)-b(r*H)),T=b(o*o),o=b(b(r*X)-b(s*V)),p=p>(o=b(v+b(T+b(o*o))))?p:o,O=b(k-_),F=b(f-l),o=b(b(O*N)-b(F*B)),v=b(o*o),I=b(m-w),o=b(b(I*B)-b(O*a)),T=b(o*o),o=b(b(F*a)-b(I*N)),p=p>(o=b(v+b(T+b(o*o))))?p:o,o=y[e+220>>2],R=b(E-o),P=y[e+216>>2],v=b(C-P),M=y[e+212>>2],T=b(c-M),2==(0|S)){u=b(m-o),g=b(k-P),A=b(f-M),a=b(0);break o}U=b(o-u),I=b(P-g),G=b(M-A)}if(n=b(b(h*I)-b(L*G)),r=b(n*n),n=b(b(L*U)-b(D*I)),s=b(n*n),n=b(b(D*G)-b(h*U)),n=b(r+b(s+b(n*n))),r=b(b(T*H)-b(v*X)),s=b(r*r),r=b(b(v*V)-b(R*H)),u=b(r*r),r=b(b(R*X)-b(T*V)),n=n>(r=b(s+b(u+b(r*r))))?n:r,g=b(k-P),A=b(f-M),r=b(b(g*N)-b(A*B)),s=b(r*r),u=b(m-o),r=b(b(u*B)-b(g*a)),O=b(r*r),r=b(b(A*a)-b(u*N)),a=n>(r=b(s+b(O+b(r*r))))?n:r,s=b(0),z)break t;I=b(m-w),O=b(k-_),F=b(f-l),r=b(E-w),n=b(C-_),s=b(c-l)}c=b(P-_),l=b(M-l),_=b(b(h*c)-b(L*l)),f=b(_*_),_=b(o-w),c=b(b(L*_)-b(D*c)),o=b(c*c),c=b(b(D*l)-b(h*_)),c=b(f+b(o+b(c*c))),l=b(b(T*O)-b(v*F)),h=b(l*l),l=b(b(v*I)-b(R*O)),o=b(l*l),l=b(b(R*F)-b(T*I)),c=c>(l=b(h+b(o+b(l*l))))?c:l,l=b(b(g*s)-b(A*n)),n=b(b(u*n)-b(g*r)),h=b(n*n),n=b(b(A*r)-b(u*s)),s=c>(n=b(b(l*l)+b(h+b(n*n))))?c:n;break t}if(c=b(c-y[e+4>>2]),r=b(r-y[e+8>>2]),l=b(b(c*a)-b(r*p)),n=b(n-y[e+12>>2]),a=b(b(r*s)-b(n*a)),h=b(a*a),a=b(b(n*p)-b(c*s)),p=b(b(l*l)+b(h+b(a*a))),w=y[e+220>>2],_=y[e+216>>2],l=y[e+212>>2],a=b(0),2==(0|S))break i}if(a=b(T-_),s=b(o-l),u=b(b(c*a)-b(r*s)),h=b(u*u),u=b(v-w),a=b(b(r*u)-b(n*a)),o=b(a*a),a=b(b(n*s)-b(c*u)),a=b(h+b(o+b(a*a))),s=b(0),z)break t}s=b(C-_),l=b(R-l),_=b(b(c*s)-b(r*l)),h=r,r=b(E-w),s=b(b(h*r)-b(n*s)),n=b(b(n*l)-b(c*r)),s=b(b(_*_)+b(b(s*s)+b(n*n)))}return t=(e=(n=b(x(j)))>b(-0xde0b6b000000000))?0:-1,t=(e=(r=b(x(p)))>(n=e?n:b(-0xde0b6b000000000)))?1:t,e=(a=b(x(a)))>(n=e?r:n),b(x(s))>(e?a:n)?3:e?2:t}(e,t),n=A(i,208)+e|0,!(r=_[n+120>>2]))break e;if(!(a=_[4730]))break e;o[a](r),_[n+120>>2]=0}return Xi(4+((n=e)+A(e=(0|i)>0?i:0,208)|0)|0,t,208),e}function Ve(e){return 1}function He(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]+272>>2]=y[e+8>>2],B=i+16|0}function je(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]+276>>2]=y[e+8>>2],B=i+16|0}function We(e,t){var i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0;if(l=n=_[e+4>>2],(0|n)==_[e+8>>2]&&(l=n,!((0|n)>=(0|(c=n?n<<1:1))))){if(c?(_[5585]=_[5585]+1,h=0|o[_[4567]](A(c,244),16),l=_[e+4>>2]):l=n,(0|l)>=1)for(;r=(i=A(u,244))+h|0,i=i+_[e+12>>2]|0,s=_[i+4>>2],_[r>>2]=_[i>>2],_[r+4>>2]=s,s=_[i+12>>2],_[r+8>>2]=_[i+8>>2],_[r+12>>2]=s,s=_[i+28>>2],_[r+24>>2]=_[i+24>>2],_[r+28>>2]=s,s=_[i+20>>2],_[r+16>>2]=_[i+16>>2],_[r+20>>2]=s,s=_[i+44>>2],_[r+40>>2]=_[i+40>>2],_[r+44>>2]=s,s=_[i+36>>2],_[r+32>>2]=_[i+32>>2],_[r+36>>2]=s,s=_[i+52>>2],_[r+48>>2]=_[i+48>>2],_[r+52>>2]=s,s=_[i+60>>2],_[r+56>>2]=_[i+56>>2],_[r+60>>2]=s,Xi(r- -64|0,i- -64|0,180),(0|l)!=(0|(u=u+1|0)););(l=_[e+12>>2])&&(d[e+16|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+12>>2]=0),_[e+12>>2]=h,a[e+16|0]=1,_[e+8>>2]=c,l=_[e+4>>2]}return _[e+4>>2]=l+1,r=_[t+12>>2],n=(l=A(n,244))+_[e+12>>2]|0,_[(i=n)+8>>2]=_[t+8>>2],_[i+12>>2]=r,i=_[t+4>>2],_[n>>2]=_[t>>2],_[n+4>>2]=i,i=_[t+28>>2],_[n+24>>2]=_[t+24>>2],_[n+28>>2]=i,i=_[t+20>>2],_[n+16>>2]=_[t+16>>2],_[n+20>>2]=i,i=_[t+36>>2],_[n+32>>2]=_[t+32>>2],_[n+36>>2]=i,i=_[t+44>>2],_[n+40>>2]=_[t+40>>2],_[n+44>>2]=i,i=_[t+52>>2],_[n+48>>2]=_[t+48>>2],_[n+52>>2]=i,i=_[t+60>>2],_[n+56>>2]=_[t+56>>2],_[n+60>>2]=i,Xi(n- -64|0,t- -64|0,180),l+_[e+12>>2]|0}function Ye(e){var t=0;return _[(e|=0)>>2]=2400,(t=_[e+204>>2])&&(d[e+208|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+204>>2]=0),_[e+204>>2]=0,_[e+196>>2]=0,_[e+200>>2]=0,a[e+208|0]=1,(t=_[e+176>>2])&&(d[e+180|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+176>>2]=0),_[e+176>>2]=0,_[e+168>>2]=0,_[e+172>>2]=0,a[e+180|0]=1,(t=_[e+156>>2])&&(d[e+160|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+156>>2]=0),_[e+156>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,a[e+160|0]=1,(t=_[e+136>>2])&&(d[e+140|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+136>>2]=0),_[e+136>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,a[e+140|0]=1,(t=_[e+116>>2])&&(d[e+120|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+116>>2]=0),_[e+116>>2]=0,_[e+108>>2]=0,_[e+112>>2]=0,a[e+120|0]=1,(t=_[e+96>>2])&&(d[e+100|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+96>>2]=0),_[e+96>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,a[e+100|0]=1,(t=_[e+76>>2])&&(d[e+80|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+76>>2]=0),_[e+76>>2]=0,_[e+68>>2]=0,_[e+72>>2]=0,a[e+80|0]=1,(t=_[e+56>>2])&&(d[e+60|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+56>>2]=0),_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,a[e+60|0]=1,(t=_[e+36>>2])&&(d[e+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+36>>2]=0),_[e+36>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,a[e+40|0]=1,(t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,0|e}function qe(e){_[e>>2]=2400,a[e+20|0]=1,_[e+16>>2]=0,a[e+40|0]=1,_[e+8>>2]=0,_[e+12>>2]=0,_[e+36>>2]=0,a[e+60|0]=1,_[e+28>>2]=0,_[e+32>>2]=0,_[e+56>>2]=0,a[e+80|0]=1,_[e+48>>2]=0,_[e+52>>2]=0,_[e+76>>2]=0,a[e+100|0]=1,_[e+68>>2]=0,_[e+72>>2]=0,_[e+96>>2]=0,a[e+120|0]=1,_[e+88>>2]=0,_[e+92>>2]=0,_[e+116>>2]=0,a[e+140|0]=1,_[e+108>>2]=0,_[e+112>>2]=0,_[e+136>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,a[e+160|0]=1,_[e+156>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,a[e+180|0]=1,_[e+176>>2]=0,_[e+168>>2]=0,_[e+172>>2]=0,a[e+208|0]=1,_[e+232>>2]=0,_[e+204>>2]=0,_[e+196>>2]=0,_[e+200>>2]=0,_[e+224>>2]=0,_[e+212>>2]=81,_[e+216>>2]=82,_[e+220>>2]=83}function Qe(e,t,i,n){var r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);o=$i(i),r=y[t+444>>2],i=Ji(i),b(x(o))>b(1.1920928955078125e-7)?(a=b(i*i),l=b(o*o),c=b(a/l),s=y[t+448>>2],r=b(w(b(b(c+b(1))/b(b(b(1)/b(s*s))+b(c/b(r*r))))))):(a=b(i*i),l=b(o*o)),_[e+12>>2]=0,r=b(r*b(.5)),a=b(Ji(r)/b(w(b(a+b(l+b(0)))))),l=b(a*b(0)),r=$i(r),s=b(r*b(0)),i=b(a*b(-i)),u=b(l*b(0)),c=b(b(s+b(i*n))-u),o=b(o*a),s=b(b(s+u)-b(o*n)),u=b(o*b(0)),h=b(i*b(0)),a=b(b(b(b(a*b(-0))*n)-u)-h),n=b(b(b(r*n)+u)-h),y[e+8>>2]=b(l*c)+b(b(b(r*s)-b(i*a))-b(o*n)),y[e+4>>2]=b(i*n)+b(b(b(r*c)-b(o*a))-b(l*s)),y[e>>2]=b(o*s)+b(b(b(r*n)-b(l*a))-b(i*c))}function Ze(e){var t=0;return _[(e|=0)>>2]=2072,(t=_[e+80>>2])&&(d[e+84|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+80>>2]=0),_[e+80>>2]=0,_[e+72>>2]=0,_[e+76>>2]=0,a[e+84|0]=1,(t=_[e+60>>2])&&(d[e- -64|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+60>>2]=0),_[e+60>>2]=0,_[e+52>>2]=0,_[e+56>>2]=0,a[e- -64|0]=1,(t=_[e+40>>2])&&(d[e+44|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+40>>2]=0),_[e+40>>2]=0,_[e+32>>2]=0,_[e+36>>2]=0,a[e+44|0]=1,0|e}function Ke(e){return 2}function Je(e,t){return t|=0,_[_[236+(e|=0)>>2]+(t<<2)>>2]}function $e(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,_r(e+4|0,_[i+8>>2]),B=i+16|0}(_[i+12>>2],_[i+8>>2]),B=i+16|0}function et(e){var t,i,n=0,r=0,s=0,l=0,c=0,u=0;if(i=t=_[e+8>>2],c=(s=_[e+32>>2])?_[e+40>>2]:0,u=(r=_[e+52>>2])?_[e+60>>2]:0,l=0,(n=_[e+72>>2])&&(l=_[e+80>>2]),b(o[_[_[t>>2]+12>>2]](i,c,s,u,r,l,n,_[e+4>>2],_[e+20>>2],_[e+24>>2])),(0|(r=_[e+32>>2]))<=-1)for(_[e+36>>2]<=-1&&((n=_[e+40>>2])&&(d[e+44|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+40>>2]=0),_[e+36>>2]=0,_[e+40>>2]=0,a[e+44|0]=1);_[_[e+40>>2]+(r<<2)>>2]=0,s=(n=r+1|0)>>>0>=r>>>0,r=n,s;);if(_[e+32>>2]=0,(0|(r=_[e+52>>2]))<=-1)for(_[e+56>>2]<=-1&&((n=_[e+60>>2])&&(d[e- -64|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+60>>2]=0),_[e+56>>2]=0,_[e+60>>2]=0,a[e- -64|0]=1);_[_[e+60>>2]+(r<<2)>>2]=0,s=(n=r+1|0)>>>0>=r>>>0,r=n,s;);if(_[e+52>>2]=0,(0|(r=_[e+72>>2]))<=-1)for(_[e+76>>2]<=-1&&((n=_[e+80>>2])&&(d[e+84|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+80>>2]=0),_[e+76>>2]=0,_[e+80>>2]=0,a[e+84|0]=1);_[_[e+80>>2]+(r<<2)>>2]=0,s=(n=r+1|0)>>>0>=r>>>0,r=n,s;);_[e+72>>2]=0}function tt(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,_[_[e+12>>2]+204>>2]=_[e+8>>2],B=i+16|0}function it(e,t){t|=0,o[_[_[(e|=0)>>2]+68>>2]](e,t)}function nt(e,t){t|=0,o[_[_[(e|=0)>>2]+64>>2]](e,t)}function rt(e){var t=0;return _[(e|=0)>>2]=1464,d[e+288|0]&&(t=_[e+220>>2],o[_[_[t>>2]>>2]](t),(t=_[e+220>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),(t=_[e+212>>2])&&(o[_[_[t>>2]>>2]](t),(t=_[e+212>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),d[e+289|0]&&(t=_[e+216>>2],o[_[_[t>>2]>>2]](t),(t=_[e+216>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),(t=_[e+332>>2])&&(d[e+336|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+332>>2]=0),_[e+332>>2]=0,_[e+324>>2]=0,_[e+328>>2]=0,a[e+336|0]=1,(t=_[e+304>>2])&&(d[e+308|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+304>>2]=0),_[e+304>>2]=0,_[e+296>>2]=0,_[e+300>>2]=0,a[e+308|0]=1,(t=_[e+256>>2])&&(d[e+260|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+256>>2]=0),_[e+256>>2]=0,_[e+248>>2]=0,_[e+252>>2]=0,a[e+260|0]=1,(t=_[e+236>>2])&&(d[e+240|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+236>>2]=0),_[e+236>>2]=0,_[e+228>>2]=0,_[e+232>>2]=0,a[e+240|0]=1,(t=_[e+204>>2])&&(d[e+208|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+204>>2]=0),_[e+204>>2]=0,_[e+196>>2]=0,_[e+200>>2]=0,a[e+208|0]=1,Wr(e),0|e}function ot(e,t){var i=0,n=0,r=0,o=0;e:if(!((0|(n=_[e+548>>2]))<1)){for(r=_[e+556>>2];;){if(_[r+(i<<2)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break e}break}if(!((0|i)>=(0|n))){i=0;t:{for(;;){if(_[(o=r+(i<<2)|0)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break t}break}(0|n)<=(0|i)||(n=(i=n+-1|0)<<2,_[o>>2]=_[n+r>>2],_[n+_[e+556>>2]>>2]=t,_[e+548>>2]=i)}if(n=_[t+32>>2],(0|(r=_[t+28>>2]))==(0|e)){t:if(!((0|(t=_[e+288>>2]))<1)){for(r=_[e+296>>2],i=0;;){if((0|n)!=_[(o=r+(i<<2)|0)>>2]){if((0|(i=i+1|0))!=(0|t))continue;break t}break}(0|t)<=(0|i)||(i=(t=t+-1|0)<<2,_[o>>2]=_[i+r>>2],_[i+_[e+296>>2]>>2]=n,_[e+288>>2]=t)}return void(_[e+280>>2]=(0|t)>0)}t:if(!((0|(t=_[n+288>>2]))<1)){for(e=_[n+296>>2],i=0;;){if((0|r)!=_[(o=e+(i<<2)|0)>>2]){if((0|(i=i+1|0))!=(0|t))continue;break t}break}(0|t)<=(0|i)||(i=e,e=(t=t+-1|0)<<2,_[o>>2]=_[i+e>>2],_[e+_[n+296>>2]>>2]=r,_[n+288>>2]=t)}_[n+280>>2]=(0|t)>0}}}function at(e,t){var i=0,n=0,r=0,s=0,l=0;if((0|(i=_[e+288>>2]))==_[e+292>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),i=_[e+288>>2]),(0|i)>=1)for(;_[(l=n<<2)+s>>2]=_[_[e+296>>2]+l>>2],(0|(n=n+1|0))!=(0|i););(n=_[e+296>>2])&&(d[e+300|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),i=_[e+288>>2]),_[e+296>>2]=0),_[e+296>>2]=s,_[e+292>>2]=r,a[e+300|0]=1}_[_[e+296>>2]+(i<<2)>>2]=t,t=i+1|0,_[e+288>>2]=t,_[e+280>>2]=(0|t)>0}function st(e,t){var i=0,n=0,r=0,s=0,l=0;e:{t:if(!((0|(i=_[e+548>>2]))<1)){for(r=_[e+556>>2];;){if(_[r+(n<<2)>>2]!=(0|t)){if((0|(n=n+1|0))!=(0|i))continue;break t}break}if((0|i)!=(0|n))break e}if(_[e+552>>2]==(0|i)&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),i=_[e+548>>2]),(0|i)>=1)for(n=0;_[(l=n<<2)+s>>2]=_[_[e+556>>2]+l>>2],(0|(n=n+1|0))!=(0|i););(n=_[e+556>>2])&&(d[e+560|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),i=_[e+548>>2]),_[e+556>>2]=0),_[e+556>>2]=s,_[e+552>>2]=r,a[e+560|0]=1}if(_[_[e+556>>2]+(i<<2)>>2]=t,_[e+548>>2]=i+1,i=_[t+32>>2],(0|(n=e))==(0|(e=_[t+28>>2])))return void at(e,i);at(i,e)}}function lt(e,t){var i=0,n=0;2&d[e+204|0]?(i=_[e+16>>2],_[e+76>>2]=_[e+12>>2],_[e+80>>2]=i,i=_[e+8>>2],_[e+68>>2]=_[e+4>>2],_[e+72>>2]=i,i=_[e+24>>2],_[e+84>>2]=_[e+20>>2],_[e+88>>2]=i,i=_[e+32>>2],_[e+92>>2]=_[e+28>>2],_[e+96>>2]=i,i=_[e+40>>2],_[e+100>>2]=_[e+36>>2],_[e+104>>2]=i,i=_[e+48>>2],_[e+108>>2]=_[e+44>>2],_[e+112>>2]=i,i=_[e+56>>2],_[e+116>>2]=_[e+52>>2],_[e+120>>2]=i,i=_[e+64>>2],_[e+124>>2]=_[e+60>>2],_[e+128>>2]=i):(n=_[(i=t)+4>>2],_[e+68>>2]=_[i>>2],_[e+72>>2]=n,n=_[i+12>>2],_[e+76>>2]=_[i+8>>2],_[e+80>>2]=n,n=_[i+28>>2],_[e+92>>2]=_[i+24>>2],_[e+96>>2]=n,n=_[i+20>>2],_[e+84>>2]=_[i+16>>2],_[e+88>>2]=n,n=_[i+36>>2],_[e+100>>2]=_[i+32>>2],_[e+104>>2]=n,n=_[i+44>>2],_[e+108>>2]=_[i+40>>2],_[e+112>>2]=n,n=_[i+60>>2],_[e+124>>2]=_[i+56>>2],_[e+128>>2]=n,n=_[i+52>>2],_[e+116>>2]=_[i+48>>2],_[e+120>>2]=n),i=_[e+392>>2],_[e+148>>2]=_[e+388>>2],_[e+152>>2]=i,i=_[e+376>>2],_[e+132>>2]=_[e+372>>2],_[e+136>>2]=i,i=_[e+400>>2],_[e+156>>2]=_[e+396>>2],_[e+160>>2]=i,i=_[e+384>>2],_[e+140>>2]=_[e+380>>2],_[e+144>>2]=i,i=_[t+12>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=i,i=_[t+4>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=i,i=_[t+28>>2],_[e+28>>2]=_[t+24>>2],_[e+32>>2]=i,i=_[t+20>>2],_[e+20>>2]=_[t+16>>2],_[e+24>>2]=i,i=_[t+44>>2],_[e+44>>2]=_[t+40>>2],_[e+48>>2]=i,i=_[t+36>>2],_[e+36>>2]=_[t+32>>2],_[e+40>>2]=i,i=_[t+60>>2],_[e+60>>2]=_[t+56>>2],_[e+64>>2]=i,i=_[t+52>>2],_[e+52>>2]=_[t+48>>2],_[e+56>>2]=i,ho(e)}function ct(e){3&d[e+204|0]||(y[e+472>>2]=b(y[e+424>>2]*y[e+408>>2])+y[e+472>>2],y[e+476>>2]=b(y[e+428>>2]*y[e+412>>2])+y[e+476>>2],y[e+480>>2]=b(y[e+432>>2]*y[e+416>>2])+y[e+480>>2])}function ut(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,function(e,t){var i;_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,y[e+236>>2]=y[i+8>>2]}(_[i+12>>2],y[i+8>>2]),B=i+16|0}function ht(e,t,i){var n;for(_[28+(n=B-32|0)>>2]=e,_[n+24>>2]=0,_[n+20>>2]=t,_[n+16>>2]=i,e=_[n+28>>2],_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+20>>2];)y[_[n+16>>2]+(_[n+12>>2]<<2)>>2]=y[_[e+12>>2]+(_[n+12>>2]<<2)>>2],_[n+12>>2]=_[n+12>>2]+1}function pt(e,t,i){var n,r=0;for(B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=0,_[n+20>>2]=t,_[n+16>>2]=i,i=_[n+28>>2],_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+20>>2];)t=_[n+16>>2]+(_[n+12>>2]<<4)|0,_[12+(e=B-16|0)>>2]=16,_[e+8>>2]=t,t=_[i+12>>2]+(_[n+12>>2]<<4)|0,r=_[t+4>>2],e=_[e+8>>2],_[e>>2]=_[t>>2],_[e+4>>2]=r,r=_[t+12>>2],_[e+8>>2]=_[t+8>>2],_[e+12>>2]=r,_[n+12>>2]=_[n+12>>2]+1;B=n+32|0}function ft(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,function(e,t){var i;_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,y[e+228>>2]=y[i+8>>2]}(_[i+12>>2],y[i+8>>2]),B=i+16|0}function _t(e,t,i){var n;for(_[28+(n=B-32|0)>>2]=e,_[n+24>>2]=0,_[n+20>>2]=t,_[n+16>>2]=i,e=_[n+28>>2],_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+20>>2];)_[_[n+16>>2]+(_[n+12>>2]<<2)>>2]=_[_[e+12>>2]+(_[n+12>>2]<<2)>>2],_[n+12>>2]=_[n+12>>2]+1}function dt(e,t){var i;return B=i=B-16|0,_[i+8>>2]=e,_[i+4>>2]=t,e=_[i+8>>2],_[i+4>>2]?_[i+12>>2]=function(e,t){var i;return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,_[i+4>>2]=0,e=_[i+8>>2]<<2,_[5585]=_[5585]+1,e=0|o[_[4567]](e,16),B=i+16|0,e}(e,_[i+4>>2]):_[i+12>>2]=0,B=i+16|0,_[i+12>>2]}function mt(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[_[t+12>>2]+8>>2]<_[i+8>>2]&&(_[i+4>>2]=dt(e,_[i+8>>2]),_[12+(t=B-16|0)>>2]=e,ht(e,_[_[t+12>>2]+4>>2],_[i+4>>2]),_[12+(t=B-16|0)>>2]=e,tr(e,_[_[t+12>>2]+4>>2]),er(e),a[e+16|0]=1,_[e+12>>2]=_[i+4>>2],_[e+8>>2]=_[i+8>>2]),B=i+16|0}function vt(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[_[t+12>>2]+8>>2]<_[i+8>>2]&&(_[i+4>>2]=$(e,_[i+8>>2]),_[12+(t=B-16|0)>>2]=e,pt(e,_[_[t+12>>2]+4>>2],_[i+4>>2]),_[12+(t=B-16|0)>>2]=e,tr(e,_[_[t+12>>2]+4>>2]),er(e),a[e+16|0]=1,_[e+12>>2]=_[i+4>>2],_[e+8>>2]=_[i+8>>2]),B=i+16|0}function yt(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[_[t+12>>2]+8>>2]<_[i+8>>2]&&(_[i+4>>2]=dt(e,_[i+8>>2]),_[12+(t=B-16|0)>>2]=e,_t(e,_[_[t+12>>2]+4>>2],_[i+4>>2]),_[12+(t=B-16|0)>>2]=e,tr(e,_[_[t+12>>2]+4>>2]),er(e),a[e+16|0]=1,_[e+12>>2]=_[i+4>>2],_[e+8>>2]=_[i+8>>2]),B=i+16|0}function gt(e,t,i,n){var r;_[28+(r=B-32|0)>>2]=e,_[r+24>>2]=t,_[r+20>>2]=i,y[r+16>>2]=n,e=_[r+28>>2],y[r+12>>2]=b(1)-y[r+16>>2],y[e>>2]=b(y[r+12>>2]*y[_[r+24>>2]>>2])+b(y[r+16>>2]*y[_[r+20>>2]>>2]),y[e+4>>2]=b(y[r+12>>2]*y[_[r+24>>2]+4>>2])+b(y[r+16>>2]*y[_[r+20>>2]+4>>2]),y[e+8>>2]=b(y[r+12>>2]*y[_[r+24>>2]+8>>2])+b(y[r+16>>2]*y[_[r+20>>2]+8>>2])}function At(e,t){var i,n=0,r=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[i+4>>2]=_[_[t+12>>2]+4>>2],t=_[i+4>>2],_[12+(n=B-16|0)>>2]=e,_[_[n+12>>2]+8>>2]==(0|t)&&(_[12+(n=B-16|0)>>2]=e,r=_[_[n+12>>2]+4>>2],_[12+(n=B-16|0)>>2]=e,_[n+8>>2]=r,vt(t=e,n=_[n+8>>2]?_[n+8>>2]<<1:1)),n=_[e+12>>2]+(_[e+4>>2]<<4)|0,_[12+(t=B-16|0)>>2]=16,_[t+8>>2]=n,n=_[i+8>>2],r=_[n+4>>2],t=_[t+8>>2],_[t>>2]=_[n>>2],_[t+4>>2]=r,r=_[n+12>>2],_[t+8>>2]=_[n+8>>2],_[t+12>>2]=r,_[e+4>>2]=_[e+4>>2]+1,B=i+16|0}function bt(e,t){var i,n=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[i+4>>2]=_[_[t+12>>2]+4>>2],t=_[i+4>>2],_[12+(n=B-16|0)>>2]=e,_[_[n+12>>2]+8>>2]==(0|t)&&(_[12+(n=B-16|0)>>2]=e,t=_[_[n+12>>2]+4>>2],_[12+(n=B-16|0)>>2]=e,_[n+8>>2]=t,yt(t=e,n=_[n+8>>2]?_[n+8>>2]<<1:1)),_[_[e+12>>2]+(_[e+4>>2]<<2)>>2]=_[_[i+8>>2]>>2],_[e+4>>2]=_[e+4>>2]+1,B=i+16|0}function xt(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],_[e>>2]=1140,vn(e+136|0),vn(e+116|0),vn(e+96|0),vn(e+76|0),vn(e+24|0),_[12+(B-16|0)>>2]=e,B=t+16|0,0|e}function Tt(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,function(e,t){var i;_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,y[e+232>>2]=y[i+8>>2]}(_[i+12>>2],y[i+8>>2]),B=i+16|0}function St(e){e|=0,_[12+(B-16|0)>>2]=e,k()}function Et(e,t,i){var n;B=n=B-80|0,_[n+76>>2]=e,_[n+72>>2]=t,_[n+68>>2]=i,function(e,t,i){var n;B=n=B-48|0,_[n+44>>2]=e,_[n+40>>2]=t,_[n+36>>2]=i,i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=0,y[n+32>>2]=wn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=0,y[n+28>>2]=Cn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=0,y[n+24>>2]=En(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=1,y[n+20>>2]=wn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=1,y[n+16>>2]=Cn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=1,y[n+12>>2]=En(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=2,y[n+8>>2]=wn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=2,y[n+4>>2]=Cn(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),i=_[n+36>>2],_[12+(t=B-16|0)>>2]=_[n+40>>2],_[t+8>>2]=2,y[n>>2]=En(i,_[t+12>>2]+(_[t+8>>2]<<4)|0),po(e,n+32|0,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0,n+8|0,n+4|0,n),B=n+48|0}(t=n+16|0,i=_[n+72>>2],_[n+68>>2]),ee(n,i,_[n+68>>2]+48|0),vo(e,t,n),B=n+80|0}function Ct(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,0!=(3&_[_[e+12>>2]+204>>2])|0}function wt(e,t){var i,n=0;for(B=i=B-16|0,_[i+8>>2]=e,_[i+4>>2]=t,e=_[i+8>>2],_[i+12>>2]=e,n=e+48|0,t=e;_[12+(B-16|0)>>2]=t,(0|n)!=(0|(t=t+16|0)););t=_[i+4>>2],n=_[t+4>>2],_[e>>2]=_[t>>2],_[e+4>>2]=n,n=_[t+12>>2],_[e+8>>2]=_[t+8>>2],_[e+12>>2]=n,t=_[i+4>>2],n=_[t+20>>2],_[e+16>>2]=_[t+16>>2],_[e+20>>2]=n,n=_[t+28>>2],_[e+24>>2]=_[t+24>>2],_[e+28>>2]=n,t=_[i+4>>2],n=_[t+36>>2],_[e+32>>2]=_[t+32>>2],_[e+36>>2]=n,n=_[t+44>>2],_[e+40>>2]=_[t+40>>2],_[e+44>>2]=n,B=i+16|0}function kt(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,0!=(1&_[_[e+12>>2]+204>>2])|0}function Ot(e,t){var i,n,r=0;B=i=B-96|0,_[i+92>>2]=e,_[i+88>>2]=t,function(e,t){var i,n,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,r=B-16|0,t=_[i+8>>2],_[r+12>>2]=t,r=_[r+12>>2],_[12+(o=B-16|0)>>2]=t+16,o=_[o+12>>2],_[12+(a=B-16|0)>>2]=t+32,a=_[a+12>>2],_[12+(s=B-16|0)>>2]=t,s=_[s+12>>2]+4|0,_[12+(l=B-16|0)>>2]=t+16,l=_[l+12>>2]+4|0,_[12+(c=B-16|0)>>2]=t+32,c=_[c+12>>2]+4|0,_[12+(u=B-16|0)>>2]=t,u=_[u+12>>2]+8|0,_[12+(h=B-16|0)>>2]=t+16,h=_[h+12>>2]+8|0,_[12+(n=B-16|0)>>2]=t+32,po(e,r,o,a,s,l,c,u,h,_[n+12>>2]+8|0),B=i+16|0}(t=i+40|0,r=_[i+88>>2]),function(e,t){var i;B=i=B-16|0,_[i+12>>2]=t,y[i+8>>2]=-y[_[i+12>>2]>>2],y[i+4>>2]=-y[_[i+12>>2]+4>>2],y[i>>2]=-y[_[i+12>>2]+8>>2],zi(e,i+8|0,i+4|0,i),B=i+16|0}(n=i+8|0,r+48|0),Un(r=i+24|0,t,n),vo(e,t,r),B=i+96|0}function Rt(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,0!=(2&_[_[e+12>>2]+204>>2])|0}function Ft(e,t){var i;B=i=B-112|0,_[i+108>>2]=e,_[i+104>>2]=t,e=_[i+108>>2],y[i+100>>2]=J(_[i+104>>2]),y[i+96>>2]=b(2)/y[i+100>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+92>>2]=y[_[t+12>>2]>>2]*y[i+96>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+88>>2]=y[_[t+12>>2]+4>>2]*y[i+96>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+84>>2]=y[_[t+12>>2]+8>>2]*y[i+96>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+80>>2]=y[_[t+12>>2]+12>>2]*y[i+92>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+76>>2]=y[_[t+12>>2]+12>>2]*y[i+88>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+72>>2]=y[_[t+12>>2]+12>>2]*y[i+84>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+68>>2]=y[_[t+12>>2]>>2]*y[i+92>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+64>>2]=y[_[t+12>>2]>>2]*y[i+88>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+60>>2]=y[_[t+12>>2]>>2]*y[i+84>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+56>>2]=y[_[t+12>>2]+4>>2]*y[i+88>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+52>>2]=y[_[t+12>>2]+4>>2]*y[i+84>>2],_[12+(t=B-16|0)>>2]=_[i+104>>2],y[i+48>>2]=y[_[t+12>>2]+8>>2]*y[i+84>>2],y[i+44>>2]=b(1)-b(y[i+56>>2]+y[i+48>>2]),y[i+40>>2]=y[i+64>>2]-y[i+72>>2],y[i+36>>2]=y[i+60>>2]+y[i+76>>2],y[i+32>>2]=y[i+64>>2]+y[i+72>>2],y[i+28>>2]=b(1)-b(y[i+68>>2]+y[i+48>>2]),y[i+24>>2]=y[i+52>>2]-y[i+80>>2],y[i+20>>2]=y[i+60>>2]-y[i+76>>2],y[i+16>>2]=y[i+52>>2]+y[i+80>>2],y[i+12>>2]=b(1)-b(y[i+68>>2]+y[i+56>>2]),yr(e,i+44|0,i+40|0,i+36|0,i+32|0,i+28|0,i+24|0,i+20|0,i+16|0,i+12|0),B=i+112|0}function It(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=1&function(e){var t,i,n;return B=t=B-16|0,_[t+12>>2]=e,e=0,i=B-16|0,n=_[t+12>>2],_[i+12>>2]=n,2!=_[_[i+12>>2]+220>>2]&&(_[12+(e=B-16|0)>>2]=n,e=5!=_[_[e+12>>2]+220>>2]),B=t+16|0,1&e}(_[t+12>>2]),B=t+16|0,0|e}function Mt(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,a[i+11|0]=t,pr(_[i+12>>2],1&a[i+11|0]),B=i+16|0}function Pt(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,pr(_[t+12>>2],0),B=t+16|0}function Dt(e,t){var i,n;B=i=B-48|0,_[i+44>>2]=e,_[i+40>>2]=t,t=i+8|0,e=_[i+44>>2],On(t,_[i+40>>2],e+408|0),Ut(n=i+24|0,t,e+404|0),Xn(e+372|0,n),B=i+48|0}function Bt(e,t){var i,n;B=i=B-48|0,_[i+44>>2]=e,_[i+40>>2]=t,Un(t=i+8|0,(e=_[i+44>>2])+324|0,_[i+40>>2]),On(n=i+24|0,t,e+604|0),Xn(e+388|0,n),B=i+48|0}function Nt(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+220>>2]=_[i+8>>2],B=i+16|0}function Lt(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,t=_[n+28>>2],y[n+20>>2]=b(y[t+4>>2]*y[_[n+24>>2]+8>>2])-b(y[t+8>>2]*y[_[n+24>>2]+4>>2]),y[n+16>>2]=b(y[t+8>>2]*y[_[n+24>>2]>>2])-b(y[t>>2]*y[_[n+24>>2]+8>>2]),y[n+12>>2]=b(y[t>>2]*y[_[n+24>>2]+4>>2])-b(y[t+4>>2]*y[_[n+24>>2]>>2]),zi(e,n+20|0,n+16|0,n+12|0),B=n+32|0}function zt(e,t){var i;B=i=B-32|0,_[i+28>>2]=e,_[i+24>>2]=t,e=i+8|0,t=_[i+28>>2],On(e,_[i+24>>2],t+408|0),Xn(t+472|0,e),B=i+32|0}function Gt(e,t){var i;B=i=B-32|0,_[i+28>>2]=e,_[i+24>>2]=t,e=i+8|0,t=_[i+28>>2],On(e,_[i+24>>2],t+604|0),Xn(t+488|0,e),B=i+32|0}function Ut(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,y[n+20>>2]=y[_[n+28>>2]>>2]*y[_[n+24>>2]>>2],y[n+16>>2]=y[_[n+28>>2]+4>>2]*y[_[n+24>>2]>>2],y[n+12>>2]=y[_[n+28>>2]+8>>2]*y[_[n+24>>2]>>2],zi(e,n+20|0,n+16|0,n+12|0),B=n+32|0}function Xt(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+8>>2],t=_[i+12>>2],4!=(-2&_[t+220>>2])&&(_[t+220>>2]=e),B=i+16|0}function Vt(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+220>>2]}function Ht(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+192>>2]}function jt(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,ae(_[i+12>>2],_[i+8>>2]),B=i+16|0}function Wt(e,t,i){var n,r,o,s,l,c;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,r=_[n+12>>2],o=_[n+8>>2],s=_[n+4>>2],c=0,B=l=B-16|0,_[l+12>>2]=r,_[l+8>>2]=o,_[l+4>>2]=s,o=_[l+8>>2],c=_[o+4>>2],r=_[l+12>>2],_[(s=r)+164>>2]=_[o>>2],_[s+168>>2]=c,s=_[o+12>>2],_[r+172>>2]=_[o+8>>2],_[r+176>>2]=s,o=l,_[12+(c=B-16|0)>>2]=_[l+8>>2],s=1,y[_[c+12>>2]>>2]==b(1)&&(_[12+(c=B-16|0)>>2]=_[l+8>>2],s=1,y[_[c+12>>2]+4>>2]==b(1)&&(_[12+(s=B-16|0)>>2]=_[l+8>>2],s=y[_[s+12>>2]+8>>2]!=b(1))),a[o+3|0]=s,o=1&a[l+3|0]?_[l+4>>2]:0,_[r+180>>2]=o,B=l+16|0,B=n+16|0}function Yt(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],_[i+4>>2]=_[_[t+12>>2]+4>>2],t=_[i+4>>2],_[i>>2]=0,function(e,t,i){var n;if(B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,t=B-16|0,e=_[n+28>>2],_[t+12>>2]=e,_[n+16>>2]=_[_[t+12>>2]+4>>2],_[n+24>>2]<_[n+16>>2])for(_[n+12>>2]=_[n+24>>2];_[n+12>>2]<_[n+16>>2];)_[n+12>>2]=_[n+12>>2]+1;else for(_[n+24>>2]>_[n+16>>2]&&yt(e,_[n+24>>2]),_[n+8>>2]=_[n+16>>2];_[n+8>>2]<_[n+24>>2];)_[_[e+12>>2]+(_[n+8>>2]<<2)>>2]=_[_[n+20>>2]>>2],_[n+8>>2]=_[n+8>>2]+1;_[e+4>>2]=_[n+24>>2],B=n+32|0}(e,t,i),_t(_[i+8>>2],_[i+4>>2],_[e+12>>2]),B=i+16|0}(_[i+12>>2],_[i+8>>2]),B=i+16|0}function qt(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+24|0}function Qt(e){var t;_[12+(t=B-16|0)>>2]=e,e=_[t+12>>2],_[e>>2]=1272,y[e+4>>2]=1,_[e+8>>2]=0,f[e+12>>1]=1,f[e+14>>1]=65535,_[e+16>>2]=-1,_[e+20>>2]=0}function Zt(e,t,i,n,r){var o,s=0;B=o=B-32|0,_[o+28>>2]=e,_[o+24>>2]=t,y[o+20>>2]=i,y[o+16>>2]=n,y[o+12>>2]=r,i=y[o+20>>2],s=_[o+24>>2],e=B-16|0,t=_[o+28>>2],_[e+12>>2]=t+80,_[e+8>>2]=s,y[_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<2)>>2]=i,i=y[o+16>>2],s=_[o+24>>2],_[12+(e=B-16|0)>>2]=t+120,_[e+8>>2]=s,y[_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<2)>>2]=i,i=y[o+12>>2],s=_[o+24>>2],_[12+(e=B-16|0)>>2]=t+100,_[e+8>>2]=s,y[_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<2)>>2]=i,a[t+140|0]=1,B=o+32|0}function Kt(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+4>>2]=_[e>>2],_[t+8>>2]=i,i=_[e+12>>2],_[t+12>>2]=_[e+8>>2],_[t+16>>2]=i}(_[i+12>>2],_[i+8>>2]),B=i+16|0}function Jt(e){var t;_[12+(t=B-16|0)>>2]=e,e=_[t+12>>2],_[e>>2]=0,_[e+4>>2]=0,_[e+8>>2]=4096,_[e+12>>2]=4096,_[e+16>>2]=0,_[e+20>>2]=1}function $t(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,f[n+6>>1]=i,e=_[n+12>>2],o[_[_[e>>2]+36>>2]](e,_[n+8>>2],f[n+6>>1],-1),B=n+16|0}function ei(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+36>>2]](e,_[i+8>>2],1,-1),B=i+16|0}function ti(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+48>>2]=_[e>>2],_[t+52>>2]=i,i=_[e+12>>2],_[t+56>>2]=_[e+8>>2],_[t+60>>2]=i}function ii(e){var t=0,i=0,n=0,r=0,o=0;if(h(e),255==(0|(i=(o=s(0))>>>23&255)))return e=b(e*b(6.2831854820251465)),b(e/e);if((t=o<<1)>>>0>2173837238){if(i)t=8388607&o|8388608;else{if(i=0,(0|(t=o<<9))>=0)for(;i=i+-1|0,(0|(t<<=1))>-1;);t=o<<1-i}if(r=(0|(n=t-13176795|0))>-1,(0|i)>129){for(;;){if(1&r&&!(t=n))return b(e*b(0));if(r=(0|(n=(t<<=1)-13176795|0))>-1,!((0|(i=i+-1|0))>129))break}i=129}if(r&&!(t=n))return b(e*b(0));if(t>>>0>8388607)r=t;else for(;i=i+-1|0,n=t>>>0<4194304,t=r=t<<1,n;);return l(0,(n=-2147483648&o)|((0|i)>=1?r+-8388608|i<<23:r>>>1-i)),p()}return-2121130058==(0|t)?b(e*b(0)):e}function ni(e,t,i,n){var r,a,s,l=0;r=_[e+4>>2],a=e=_[e>>2],s=t,l=0,i&&(l=t=r>>8,1&r&&(l=_[t+_[i>>2]>>2])),o[_[_[e>>2]+28>>2]](a,s,l+i|0,2&r?n:2)}function ri(e){var t;B=t=B-16|0,_[t+12>>2]=e,function(e){var t;B=t=B-48|0,_[t+44>>2]=e,e=_[t+44>>2],y[t+40>>2]=1,y[t+36>>2]=0,y[t+32>>2]=0,y[t+28>>2]=0,y[t+24>>2]=1,y[t+20>>2]=0,y[t+16>>2]=0,y[t+12>>2]=0,y[t+8>>2]=1,yr(e,t+40|0,t+36|0,t+32|0,t+28|0,t+24|0,t+20|0,t+16|0,t+12|0,t+8|0),B=t+48|0}(e=_[t+12>>2]),y[t+8>>2]=0,y[t+4>>2]=0,y[t>>2]=0,zi(e+48|0,t+8|0,t+4|0,t),B=t+16|0}function oi(e,t){var i=b(0),n=0,r=0,o=0,a=b(0),c=0,u=0,f=b(0),_=b(0),d=b(0),m=0,v=b(0),g=0,A=b(0),T=b(0),S=b(0),E=b(0);a=b(1);e:{t:{h(e);i:if(1065353216!=(0|(c=s(0)))&&(h(t),r=2147483647&(u=s(0)))){if(n=2147483647&c,!(r>>>0<2139095041&&n>>>0<=2139095040))return b(e+t);m=0,(0|c)>-1||(m=2,r>>>0>1266679807||(m=0,r>>>0<1065353216||(m=0,(0|r)==(g=r>>>(o=150-(r>>>23)|0))<<o&&(m=2-(1&g)|0)))),o=m;n:{if(1065353216!=(0|r)){if(2139095040!=(0|r))break n;if(1065353216==(0|n))break i;return n>>>0>=1065353217?(0|u)>-1?t:b(0):b((0|u)>-1?0:-t)}return(0|u)>-1?e:b(b(1)/e)}if(1073741824==(0|u))return b(e*e);if(!(1056964608!=(0|u)|(0|c)<0))return b(w(e));if(i=b(x(e)),2139095040==(1073741824|n)||!n){if(a=(0|u)<0?b(b(1)/i):i,(0|c)>-1)break i;return o|n+-1065353216?1==(0|o)?b(-a):a:(e=b(a-a),b(e/e))}if(!((0|c)>-1|o>>>0>1)){if(o-1)return e=b(e-e),b(e/e);a=b(-1)}if(r>>>0>=1291845633){if(n>>>0<=1065353207)return b((0|u)<0?b(a*b(1.0000000150474662e30))*b(1.0000000150474662e30):b(a*b(1.0000000031710769e-30))*b(1.0000000031710769e-30));if(n>>>0>=1065353224)return b((0|u)>0?b(a*b(1.0000000150474662e30))*b(1.0000000150474662e30):b(a*b(1.0000000031710769e-30))*b(1.0000000031710769e-30));e=b(i+b(-1)),i=b(e*b(1.44268798828125)),f=b(b(e*b(7052607543300837e-21))+b(b(b(e*e)*b(b(.5)-b(e*b(b(e*b(-.25))+b(.3333333432674408)))))*b(-1.4426950216293335))),l(0,-4096&(h(b(i+f)),s(0))),e=p(),v=b(e-i)}else o=1065353216|(c=8388607&(n=(r=n>>>0<8388608)?(h(b(i*b(16777216))),s(0)):n)),r=(n>>23)+(r?-151:-127)|0,n=0,c>>>0<1885298||(c>>>0<6140887?n=1:(o=o+-8388608|0,r=r+1|0)),v=y[17856+(c=n<<2)>>2],l(0,o),f=p(),_=y[c+17840>>2],d=b(f-_),A=b(b(1)/b(_+f)),l(0,-4096&(h(i=b(d*A)),s(0))),e=p(),T=b(e*e),S=e,E=d,l(0,4194304+((o>>1&-536875008|536870912)+(n<<21)|0)|0),d=p(),f=b(A*b(b(E-b(e*d))-b(e*b(f-b(d-_))))),d=b(b(i+e)*f),e=b(i*i),_=b(d+b(b(e*e)*b(b(e*b(b(e*b(b(e*b(b(e*b(b(e*b(.20697501301765442))+b(.23066075146198273)))+b(.2727281153202057)))+b(.3333333432674408)))+b(.4285714328289032)))+b(.6000000238418579)))),l(0,-4096&(h(b(b(T+b(3))+_)),s(0))),e=p(),d=b(S*e),i=b(b(f*e)+b(i*b(_-b(b(e+b(-3))-T)))),l(0,-4096&(h(b(d+i)),s(0))),e=p(),_=b(e*b(.9619140625)),f=b(y[c+17848>>2]+b(b(b(i-b(e-d))*b(.9617967009544373))+b(e*b(-.00011736857413779944)))),i=b(0|r),l(0,-4096&(h(b(b(v+b(_+f))+i)),s(0))),e=p(),v=b(b(b(e-i)-v)-_);if(l(0,-4096&u),_=p(),i=b(e*_),e=b(b(b(f-v)*t)+b(b(t-_)*e)),h(t=b(i+e)),(0|(o=s(0)))>=1124073473)break t;n=1124073472;n:{r:{if(1124073472==(0|o)){if(!(b(e+b(4.299566569443414e-8))>b(t-i)))break r;break t}if(n=2147483647&o,!(e<=b(t-i)^1|-1021968384!=(0|o))|n>>>0>=1125515265)break e;if(r=0,n>>>0<1056964609)break n}r=(8388607&(u=(8388608>>>(n>>>23)-126)+o|0)|8388608)>>>150-(n=u>>>23&255),r=(0|o)<0?0-r|0:r,i=b(i-(l(0,u&-8388608>>n+-127),p())),h(b(e+i)),o=s(0)}l(0,-32768&o),t=p(),f=b(t*b(.693145751953125)),i=b(b(t*b(14286065379565116e-22))+b(b(e-b(t-i))*b(.6931471824645996))),e=b(f+i),t=b(e*e),t=b(e-b(t*b(b(t*b(b(t*b(b(t*b(b(t*b(4.138136944220605e-8))+b(-16533901998627698e-22)))+b(661375597701408e-19)))+b(-.0027777778450399637)))+b(.1666666716337204)))),d=b(b(e*t)/b(t+b(-2))),t=b(i-b(e-f)),(0|(o=0|(h(e=b(b(e-b(d-b(t+b(e*t))))+b(1))),s(0)+(r<<23))))<=8388607?e=function(e,t){var i=0;n:if((0|t)>=128){if(e=b(e*b(17014118346046923e22)),(0|(i=t+-127|0))<128){t=i;break n}e=b(e*b(17014118346046923e22)),t=((0|t)<381?t:381)+-254|0}else(0|t)>-127||(e=b(e*b(11754943508222875e-54)),(0|(i=t+126|0))>-127?t=i:(e=b(e*b(11754943508222875e-54)),t=((0|t)>-378?t:-378)+252|0));return b(e*(l(0,1065353216+(t<<23)|0),p()))}(e,r):(l(0,o),e=p()),a=b(a*e)}return a}return b(b(a*b(1.0000000150474662e30))*b(1.0000000150474662e30))}return b(b(a*b(1.0000000031710769e-30))*b(1.0000000031710769e-30))}function ai(e){var t=0,i=b(0),n=0,r=0,o=b(0),a=b(0);h(e);e:{if((t=2147483647&(r=s(0)))>>>0>=1283457024){if(t>>>0>2139095040)break e;return b((0|r)<0?-1.570796251296997:1.570796251296997)}t:{if(t>>>0<=1054867455){if(n=-1,t>>>0>=964689920)break t;break e}if(e=b(x(e)),t>>>0<=1066926079){if(t>>>0<=1060110335){e=b(b(b(e+e)+b(-1))/b(e+b(2))),n=0;break t}e=b(b(e+b(-1))/b(e+b(1))),n=1}else t>>>0<=1075576831?(e=b(b(e+b(-1.5))/b(b(e*b(1.5))+b(1))),n=2):(e=b(b(-1)/e),n=3)}if(t=n,o=b(e*e),i=b(o*o),a=b(i*b(b(i*b(-.106480173766613))+b(-.19999158382415771))),i=b(o*b(b(i*b(b(i*b(.06168760731816292))+b(.14253635704517365)))+b(.333333283662796))),(0|t)<=-1)return b(e-b(e*b(a+i)));e=b(y[17776+(t<<=2)>>2]-b(b(b(e*b(a+i))-y[t+17792>>2])-e)),e=(0|r)<0?b(-e):e}return e}function si(e,t){var i,n=0,r=0,o=0,a=0,c=0;B=i=B-16|0,h(e);e:if((n=2147483647&(o=s(0)))>>>0<=1305022426){if(r=.6366197723675814*(a=+e)+6755399441055744-6755399441055744,g[t>>3]=a+-1.5707963109016418*r+-1.5893254773528196e-8*r,x(r)<2147483648){n=~~r;break e}n=-2147483648}else n>>>0>=2139095040?(g[t>>3]=b(e-e),n=0):(c=n,n=(n>>>23)-150|0,g[i+8>>3]=(l(0,c-(n<<23)|0),p()),n=function(e,t,i){var n,r,o,a,s,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,b=0,T=0;if(B=n=B-560|0,d=(c=i)+A(o=(0|(i=(i+-3|0)/24|0))>0?i:0,-24)|0,(0|(r=_[3732]))>=0)for(c=r+1|0,i=o;g[(n+320|0)+(u<<3)>>3]=(0|i)<0?0:+_[14944+(i<<2)>>2],i=i+1|0,(0|c)!=(0|(u=u+1|0)););for(p=d+-24|0,c=0;;){for(i=0,l=0;l+=g[(i<<3)+e>>3]*g[(n+320|0)+(c-i<<3)>>3],1!=(0|(i=i+1|0)););if(g[(c<<3)+n>>3]=l,i=(0|c)<(0|r),c=c+1|0,!i)break}s=23-p|0,a=24-p|0,c=r;t:{for(;;){if(l=g[(c<<3)+n>>3],i=0,u=c,!(v=(0|c)<1))for(;f=(n+480|0)+(i<<2)|0,m=l,h=x(l*=5.960464477539063e-8)<2147483648?~~l:-2147483648,h=x(m+=-16777216*(l=+(0|h)))<2147483648?~~m:-2147483648,_[f>>2]=h,l=g[((u=u+-1|0)<<3)+n>>3]+l,(0|c)!=(0|(i=i+1|0)););l=gr(l,p),l+=-8*C(.125*l),f=x(l)<2147483648?~~l:-2147483648,l-=+(0|f);i:{n:{r:{if(b=(0|p)<1){if(p)break r;h=_[476+((c<<2)+n|0)>>2]>>23}else h=_[476+(u=(c<<2)+n|0)>>2],y=u,u=h-((i=h>>a)<<a)|0,_[y+476>>2]=u,f=i+f|0,h=u>>s;if((0|h)<1)break i;break n}if(h=2,!(l>=.5)){h=0;break i}}if(i=0,u=0,!v)for(;;){v=_[(T=(n+480|0)+(i<<2)|0)>>2],y=16777215;n:{r:{if(!u){if(!v)break r;y=16777216,u=1}_[T>>2]=y-v;break n}u=0}if((0|c)==(0|(i=i+1|0)))break}b||(i=p+-1|0)>>>0>1||(_[476+(i=(c<<2)+n|0)>>2]=i-1?8388607&_[i+476>>2]:4194303&_[i+476>>2]),f=f+1|0,2==(0|h)&&(l=1-l,h=2,u&&(l-=gr(1,p)))}if(0!=l)break;if(u=0,!((0|(i=c))<=(0|r))){for(;u=_[(n+480|0)+((i=i+-1|0)<<2)>>2]|u,(0|i)>(0|r););if(u){for(d=p;d=d+-24|0,!_[(n+480|0)+((c=c+-1|0)<<2)>>2];);break t}}for(i=1;u=i,i=i+1|0,!_[(n+480|0)+(r-u<<2)>>2];);for(u=c+u|0;;){for(f=c+1|0,c=c+1|0,g[(n+320|0)+(f<<3)>>3]=_[14944+(o+c<<2)>>2],i=0,l=0;l+=g[(i<<3)+e>>3]*g[(n+320|0)+(f-i<<3)>>3],1!=(0|(i=i+1|0)););if(g[(c<<3)+n>>3]=l,!((0|c)<(0|u)))break}c=u}(l=gr(l,0-p|0))>=16777216?(e=(n+480|0)+(c<<2)|0,m=l,i=x(l*=5.960464477539063e-8)<2147483648?~~l:-2147483648,u=x(l=m+-16777216*+(0|i))<2147483648?~~l:-2147483648,_[e>>2]=u,c=c+1|0):(i=x(l)<2147483648?~~l:-2147483648,d=p),_[(n+480|0)+(c<<2)>>2]=i}if(l=gr(1,d),!((0|c)<=-1)){for(i=c;g[(i<<3)+n>>3]=l*+_[(n+480|0)+(i<<2)>>2],l*=5.960464477539063e-8,e=(0|i)>0,i=i+-1|0,e;);if(!((0|c)<=-1))for(i=c;;){for(e=i,p=c-i|0,l=0,i=0;l+=g[17712+(i<<3)>>3]*g[(e+i<<3)+n>>3],!((0|i)>=(0|r))&&(d=i>>>0<p>>>0,i=i+1|0,d););if(g[(n+160|0)+(p<<3)>>3]=l,i=e+-1|0,!((0|e)>0))break}}if(l=0,(0|c)>=0)for(;l+=g[(n+160|0)+(c<<3)>>3],e=(0|c)>0,c=c+-1|0,e;);return g[t>>3]=h?-l:l,B=n+560|0,7&f}(i+8|0,i,n),r=g[i>>3],(0|o)<=-1?(g[t>>3]=-r,n=0-n|0):g[t>>3]=r);return B=i+16|0,n}function li(e){var t=0;return t=d[e+74|0],a[e+74|0]=t+-1|t,8&(t=_[e>>2])?(_[e>>2]=32|t,-1):(_[e+4>>2]=0,_[e+8>>2]=0,t=_[e+44>>2],_[e+28>>2]=t,_[e+20>>2]=t,_[e+16>>2]=t+_[e+48>>2],0)}function ci(e){var t,i=0,n=0;B=t=B-16|0,a[t+15|0]=10;e:{if(!(i=_[e+16>>2])){if(li(e))break e;i=_[e+16>>2]}n=_[e+20>>2],10==a[e+75|0]|n>>>0>=i>>>0?o[_[e+36>>2]](e,t+15|0,1):(_[e+20>>2]=n+1,a[0|n]=10)}B=t+16|0}function ui(e,t,i,n,r){var o;B=o=B-32|0,_[o+28>>2]=e,y[o+24>>2]=t,_[o+20>>2]=i,_[o+16>>2]=n,_[o+12>>2]=r,e=_[o+28>>2],y[e>>2]=y[o+24>>2],_[e+4>>2]=_[o+20>>2],ko(e+8|0),_[e+72>>2]=_[o+16>>2],i=_[o+12>>2],n=_[i+4>>2],_[e+76>>2]=_[i>>2],_[e+80>>2]=n,n=_[i+12>>2],_[e+84>>2]=_[i+8>>2],_[e+88>>2]=n,y[e+92>>2]=0,y[e+96>>2]=0,y[e+100>>2]=.5,y[e+104>>2]=0,y[e+108>>2]=0,y[e+112>>2]=0,y[e+116>>2]=.800000011920929,y[e+120>>2]=1,a[e+124|0]=0,y[e+128>>2]=.004999999888241291,y[e+132>>2]=.009999999776482582,y[e+136>>2]=.009999999776482582,y[e+140>>2]=.009999999776482582,ri(e+8|0),B=o+32|0}function hi(e,t,i){e:{if(!(t>>>0>20||(t=t+-9|0)>>>0>9)){switch(t-1|0){default:return t=_[i>>2],_[i>>2]=t+4,void(_[e>>2]=_[t>>2]);case 0:return t=_[i>>2],_[i>>2]=t+4,t=_[t>>2],_[e>>2]=t,void(_[e+4>>2]=t>>31);case 1:return t=_[i>>2],_[i>>2]=t+4,_[e>>2]=_[t>>2],void(_[e+4>>2]=0);case 3:return t=_[i>>2],_[i>>2]=t+4,t=f[t>>1],_[e>>2]=t,void(_[e+4>>2]=t>>31);case 4:return t=_[i>>2],_[i>>2]=t+4,_[e>>2]=m[t>>1],void(_[e+4>>2]=0);case 5:return t=_[i>>2],_[i>>2]=t+4,t=a[0|t],_[e>>2]=t,void(_[e+4>>2]=t>>31);case 6:return t=_[i>>2],_[i>>2]=t+4,_[e>>2]=d[0|t],void(_[e+4>>2]=0);case 2:case 7:break e;case 8:}o[561](e,i)}return}t=_[i>>2]+7&-8,_[i>>2]=t+8,i=_[t+4>>2],_[e>>2]=_[t>>2],_[e+4>>2]=i}function pi(e){var t=0,i=0,n=0;if(a[_[e>>2]]+-48>>>0<10)for(;t=_[e>>2],n=a[0|t],_[e>>2]=t+1,i=(A(i,10)+n|0)-48|0,a[t+1|0]+-48>>>0<10;);return i}function fi(e,t){return e?function(e,t){e:{if(e){if(t>>>0<=127)break e;if(_[_[4618]>>2]){if(t>>>0<=2047)return a[e+1|0]=63&t|128,a[0|e]=t>>>6|192,2;if(!(57344!=(-8192&t)&&t>>>0>=55296))return a[e+2|0]=63&t|128,a[0|e]=t>>>12|224,a[e+1|0]=t>>>6&63|128,3;if(t+-65536>>>0<=1048575)return a[e+3|0]=63&t|128,a[0|e]=t>>>18|240,a[e+2|0]=t>>>6&63|128,a[e+1|0]=t>>>12&63|128,4}else if(57216==(-128&t))break e;_[5587]=25,e=-1}else e=1;return e}return a[0|e]=t,1}(e,t):0}function _i(e,t,i){var n,r=0,s=0,c=0,u=0,h=0,f=0,m=0,v=0,g=0,T=0,S=0,E=0,C=0,w=0,k=0;if(B=n=B-144|0,(0|i)<=0)(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=0,a[e+16|0]=1,_[e+4>>2]=0,_[e+8>>2]=0,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1,(t=_[e+52>>2])&&(d[e+56|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+52>>2]=0),_[e+52>>2]=0,_[e+44>>2]=0,_[e+48>>2]=0,a[e+56|0]=1;else{if(a[n+112|0]=1,_[n+88>>2]=0,_[n+92>>2]=256,_[n+72>>2]=0,_[n+76>>2]=256,_[n+56>>2]=0,_[n+60>>2]=256,_[n+108>>2]=0,_[n+100>>2]=0,_[n+104>>2]=0,_[n+80>>2]=0,_[n+84>>2]=0,_[n+64>>2]=0,_[n+68>>2]=0,_[n+48>>2]=0,_[n+52>>2]=0,function(e,t,i){var n,r=0,s=0,c=0,u=0,h=b(0),f=0,m=0,v=b(0),g=b(0),T=0,S=0,E=0,C=b(0),w=b(0),k=b(0),O=0,R=0,F=b(0),I=b(0),M=b(0);if(B=n=B-48|0,c=-246811958,u=1900671690,(0|i)>0)for(r=t,S=1900671690,m=1900671690,s=-246811958,f=-246811958;E=_[r+8>>2],h=y[r+8>>2],l(0,c),c=p()<h?E:c,O=_[r+4>>2],v=y[r+4>>2],l(0,s),s=p()<v?O:s,T=_[r>>2],g=y[r>>2],l(0,f),f=p()<g?T:f,u=h<(l(0,u),p())?E:u,S=v<(l(0,S),p())?O:S,m=g<(l(0,m),p())?T:m,r=r+16|0,(0|(R=R+1|0))!=(0|i););else f=-246811958,s=-246811958,m=1900671690,S=1900671690;if(l(0,s),C=p(),l(0,S),w=p(),h=b(C-w),l(0,c),k=p(),l(0,u),F=p(),v=b(k-F),c=h<v,l(0,f),I=p(),l(0,m),M=p(),g=b(I-M),s=g<v,r=(u=g<h)?c?2:1:s<<1,_[e+112>>2]=r,(0|r)==(0|(f=u?(1^s)<<1:c?1:2))&&(f=(r+1>>>0)%3|0),_[e+104>>2]=f,c=0,_[e+12>>2]=0,_[e+28>>2]=0,s=(3^r)-f|0,_[e+108>>2]=s,y[e+24>>2]=b(k+F)*b(.5),y[e+20>>2]=b(C+w)*b(.5),y[e+16>>2]=b(I+M)*b(.5),v=(r=(0|r)==((s+1|0)%3|0))?b(v*b(9788566967472434e-20)):b(v*b(-9788566967472434e-20)),y[e+8>>2]=v,h=b(r?h*b(9788566967472434e-20):h*b(-9788566967472434e-20)),y[e+4>>2]=h,g=b(r?g*b(9788566967472434e-20):g*b(-9788566967472434e-20)),y[e>>2]=g,_[n+36>>2]=0,a[n+40|0]=1,_[n+28>>2]=0,_[n+32>>2]=0,m=v!=b(0),C=b(b(1)/v),S=h!=b(0),w=b(b(1)/h),E=g!=b(0),k=b(b(1)/g),!((0|i)<1)){_[5585]=_[5585]+1,r=0|o[_[4567]](i<<4,16),s=_[n+36>>2];e:{t:{if((0|(O=_[n+28>>2]))>=1)for(;;)if(f=(u=c<<4)+r|0,R=_[4+(u=s+u|0)>>2],_[f>>2]=_[u>>2],_[f+4>>2]=R,T=_[u+12>>2],_[f+8>>2]=_[u+8>>2],_[f+12>>2]=T,(0|O)==(0|(c=c+1|0)))break t;if(!s)break e}d[n+40|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[n+36>>2]=0}if(_[n+36>>2]=r,c=1,a[n+40|0]=1,_[n+32>>2]=i,s=_[n+12>>2],_[r>>2]=_[n+8>>2],_[r+4>>2]=s,s=_[n+20>>2],_[r+8>>2]=_[n+16>>2],_[r+12>>2]=s,1!=(0|i))for(;s=_[n+12>>2],r=_[n+36>>2]+(c<<4)|0,_[r>>2]=_[n+8>>2],_[r+4>>2]=s,s=_[n+20>>2],_[r+8>>2]=_[n+16>>2],_[r+12>>2]=s,(0|(c=c+1|0))!=(0|i););}if(v=m?C:v,C=S?w:h,g=E?k:g,_[n+28>>2]=i,!((0|i)<1)){for(f=(n+8|0)+(_[e+104>>2]<<2)|0,m=(n+8|0)+(_[e+112>>2]<<2)|0,S=(n+8|0)+(_[e+108>>2]<<2)|0,w=y[e+24>>2],k=y[e+20>>2],F=y[e+16>>2],E=_[n+36>>2],u=0;h=y[t>>2],I=y[t+4>>2],M=y[t+8>>2],_[n+20>>2]=0,y[n+16>>2]=v*b(M-w),y[n+12>>2]=C*b(I-k),y[n+8>>2]=g*b(h-F),c=r=E+(u<<4)|0,h=y[S>>2],T=b(x(h))<b(2147483648)?~~h:-2147483648,_[c>>2]=T,c=r,h=y[m>>2],T=b(x(h))<b(2147483648)?~~h:-2147483648,_[c+4>>2]=T,h=y[f>>2],_[r+12>>2]=u,c=b(x(h))<b(2147483648)?~~h:-2147483648,_[r+8>>2]=c,t=t+16|0,(0|(u=u+1|0))!=(0|i););(0|i)<2||function e(t,i,n,r){var o,a,s,l,c=0,u=0,h=0,p=0,f=0,d=0,m=0;for(B=o=B-16|0,h=_[t+12>>2],l=_[8+(p=h+((n+r|0)/2<<4)|0)>>2],a=_[p+4>>2],s=_[p>>2],p=n,f=r;;){e:{if(!((0|(u=_[4+(c=(p<<4)+h|0)>>2]))<(0|a))){if((0|u)!=(0|a))break e;if(!((0|(u=_[c>>2]))<(0|s))&&(0|u)!=(0|s)|_[c+8>>2]>=(0|l))break e}p=p+1|0;continue}for(;;){e:{if(d=_[4+(u=(m=f<<4)+h|0)>>2],!((0|a)<(0|d))){if((0|a)!=(0|d))break e;if(d=_[u>>2],!((0|s)<(0|d))&&(0|s)!=(0|d)|(0|l)>=_[u+8>>2])break e}f=f+-1|0;continue}break}if((0|p)<=(0|f)&&(h=_[c+12>>2],_[o+8>>2]=_[c+8>>2],_[o+12>>2]=h,h=_[c+4>>2],_[o>>2]=_[c>>2],_[o+4>>2]=h,h=_[u+4>>2],_[c>>2]=_[u>>2],_[c+4>>2]=h,h=_[u+12>>2],_[c+8>>2]=_[u+8>>2],_[c+12>>2]=h,h=_[o+4>>2],c=_[t+12>>2]+m|0,_[c>>2]=_[o>>2],_[c+4>>2]=h,u=_[o+12>>2],_[c+8>>2]=_[o+8>>2],_[c+12>>2]=u,f=f+-1|0,p=p+1|0),!((0|p)<=(0|f)))break;h=_[t+12>>2]}(0|f)>(0|n)&&e(t,i,n,f),(0|p)<(0|r)&&e(t,i,p,r),B=o+16|0}(n+24|0,n+8|0,0,i+-1|0)}if(_[e+44>>2]=i,_[e+40>>2]=0,_[e+36>>2]=_[e+32>>2],(0|(t=_[e+84>>2]))<(0|i)){if(_[e+88>>2]<(0|i)){if(i?(_[5585]=_[5585]+1,f=0|o[_[4567]](i<<2,16),r=_[e+84>>2]):(f=0,r=t),(0|r)>=1)for(c=0;_[(s=c<<2)+f>>2]=_[s+_[e+92>>2]>>2],(0|r)!=(0|(c=c+1|0)););(r=_[e+92>>2])&&(d[e+96|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+92>>2]=0),_[e+92>>2]=f,_[e+88>>2]=i,a[e+96|0]=1}for(;_[_[e+92>>2]+(t<<2)>>2]=0,(0|i)!=(0|(t=t+1|0)););}if(_[e+84>>2]=i,(0|i)>=1)for(m=0;;){if(!((s=_[e+40>>2])||((u=_[e+36>>2])?_[e+36>>2]=_[u+8>>2]:(_[5585]=_[5585]+1,u=0|o[_[4567]](12,16),t=_[e+44>>2],_[u+8>>2]=0,_[u+4>>2]=t,_[5585]=_[5585]+1,_[u>>2]=o[_[4567]](A(t,112),16),_[u+8>>2]=_[e+32>>2],_[e+32>>2]=u),t=0,s=_[u>>2],c=s,(0|(r=_[u+4>>2]))<1)))for(;T=c,c=c+112|0,t=t+1|0,_[T>>2]=(0|t)<(0|r)?c:0,(0|t)!=(0|r););if(_[e+40>>2]=_[s>>2],_[s+16>>2]=0,_[s>>2]=0,_[s+4>>2]=0,_[s+104>>2]=-1,_[s+8>>2]=0,_[s+12>>2]=0,t=_[n+36>>2]+(m<<4)|0,r=_[t+4>>2],_[s+88>>2]=_[t>>2],_[s+92>>2]=r,r=_[t+12>>2],_[s+96>>2]=_[t+8>>2],_[s+100>>2]=r,_[s+104>>2]=-1,_[_[e+92>>2]+(m<<2)>>2]=s,(0|(m=m+1|0))==(0|i))break}(t=_[n+36>>2])&&(d[n+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[n+36>>2]=0),_[n+36>>2]=0,a[n+40|0]=1,_[n+28>>2]=0,_[n+32>>2]=0,_[e+100>>2]=-3,_[e+56>>2]=0,_[e+60>>2]=A(i,6),_[e+116>>2]=0,_[e+120>>2]=0,_[e+52>>2]=_[e+48>>2],_[n+16>>2]=0,_[n+20>>2]=0,_[n+8>>2]=0,_[n+12>>2]=0,function e(t,i,n,r){var o,a=0,s=0,l=0,c=0,u=0,h=0,p=0;B=o=B-16|0;e:if((a=n-i|0)>>>0<=2){switch(a-1|0){default:_[r>>2]=0,_[r+4>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0;break e;case 1:if(a=_[_[t+92>>2]+(i<<2)>>2],i=_[a+204>>2],c=_[a+88>>2],l=_[a+200>>2],s=_[a+92>>2],(0|c)!=(0|l)|(0|s)!=(0|i)||(i=s,_[a+96>>2]!=_[a+208>>2])){n=a+112|0,(i=s-i|0)|(s=c-l|0)?(_[a+4>>2]=n,_[a>>2]=n,_[a+116>>2]=a,_[a+112>>2]=a,l=(c=(0|i)<0)&!s,l|=s=(0|s)<0,_[r+4>>2]=l?n:a,_[r>>2]=l?a:n,s&!i||c?(_[r+8>>2]=a,i=n):(_[r+8>>2]=n,i=a)):(s=_[a+96>>2]>_[a+208>>2],_[(i=s?n:a)+4>>2]=i,_[i>>2]=i,_[r+8>>2]=i,_[r+4>>2]=i,_[r>>2]=i,n=s?a:n,a=i),_[r+12>>2]=i,t=xr(t,a,n),_[t+4>>2]=t,_[t>>2]=t,_[a+8>>2]=t,t=_[t+8>>2],_[t+4>>2]=t,_[t>>2]=t,_[n+8>>2]=t;break e}_[a+8>>2]=0,_[a+4>>2]=a,_[a>>2]=a,_[r+12>>2]=a,_[r+8>>2]=a,_[r+4>>2]=a,_[r>>2]=a;break e;case 0:}t=_[_[t+92>>2]+(i<<2)>>2],_[t+8>>2]=0,_[t+4>>2]=t,_[t>>2]=t,_[r+12>>2]=t,_[r+8>>2]=t,_[r+4>>2]=t,_[r>>2]=t}else{t:if(!((0|(a=s=((0|a)/2|0)+i|0))>=(0|n))){for(l=_[t+92>>2],a=_[(l+(s<<2)|0)-4>>2],u=_[a+88>>2],h=_[a+96>>2],p=_[a+92>>2],a=s;;){if(c=_[(a<<2)+l>>2],(0|u)!=_[c+88>>2]|(0|p)!=_[c+92>>2]|(0|h)!=_[c+96>>2])break t;if((0|(a=a+1|0))==(0|n))break}a=n}e(t,i,s,r),_[o+8>>2]=0,_[o+12>>2]=0,_[o>>2]=0,_[o+4>>2]=0,e(t,a,n,o),function(e,t,i){var n,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,g=0,b=0,x=0,T=0,S=0,E=0,C=0,w=0,k=0,O=0,R=0,F=0,I=0,M=0,P=0,D=0,L=0;B=n=B-128|0;t:if(_[i+4>>2])if(_[t+4>>2]){if(_[e+100>>2]=_[e+100>>2]+-1,_[n+124>>2]=0,_[n+120>>2]=0,function(e,t,i,n){var r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,g=0,b=0,x=0,T=0,S=0;s=_[e+12>>2],u=_[t+8>>2];i:{if(!(_[s+88>>2]!=_[u+88>>2]|_[s+92>>2]!=_[u+92>>2])){if((0|(r=_[u+4>>2]))==(0|u)){if(_[i>>2]=s,t=_[u+8>>2],e=0,!t)break i;return _[n>>2]=_[t+12>>2],0}s=_[u>>2],_[r>>2]=s,_[s+4>>2]=r,_[t>>2]==(0|u)&&(c=t,h=s,a=_[s+88>>2],o=_[r+88>>2],a=(0|a)<(0|o)|(_[s+92>>2]<_[r+92>>2]?(0|a)==(0|o):0)?h:r,_[c>>2]=a),_[t+4>>2]==(0|u)&&(a=_[s+88>>2],o=_[r+88>>2],(0|a)!=(0|o)|_[s+92>>2]<=_[r+92>>2]&&(0|a)<=(0|o)?_[t+4>>2]=r:_[t+4>>2]=s)}for(b=_[t>>2],T=_[e>>2],S=_[e+4>>2],a=S,x=_[t+4>>2],r=x,u=0,h=1;;){m=_[a+88>>2];n:if((0|(o=A(_[r+88>>2]-m|0,h)))>=1)for(c=a;;){for(s=r,l=_[r+92>>2],a=o;o=_[c+92>>2],m=l-o|0,!((0|(r=_[(p=!d<<2)+c>>2]))==(0|c)||(0|(f=_[r+92>>2]-o|0))>0||(v=_[r+88>>2],(0|(o=A(v-_[c+88>>2]|0,h)))>-1|(0|A(a,f))>(0|A(o,m))&&o));)a=A(_[s+88>>2]-v|0,h),c=r;if(r=_[s+p>>2],(0|s)==(0|r))break n;if((0|(p=_[r+92>>2]-l|0))>-1)break n;if(l=_[r+88>>2],(0|(o=A(l-_[c+88>>2]|0,h)))<1)break n;if(l=A(l-_[s+88>>2]|0,h)){if((0|l)>-1)break n;if(!((0|A(a,p))<(0|A(l,m))))break}}else if((0|o)<=-1){r:for(;;){for(m=_[r+92>>2],s=_[(v=(0!=(0|d))<<2)+r>>2];;){if(l=o,c=a,o=_[a+92>>2],p=m-o|0,(0|r)!=(0|s)&&!((0|(f=_[s+92>>2]-m|0))<0||(y=_[s+88>>2],(0|(a=A(y-_[r+88>>2]|0,h)))>-1|(0|A(l,f))>(0|A(a,p))&&a))){o=A(y-_[c+88>>2]|0,h),r=s,a=c;continue r}if(a=_[c+v>>2],(0|c)==(0|a)){s=r;break n}if((0|(y=_[a+92>>2]-o|0))<1){s=r;break n}if(f=_[a+88>>2],(0|(o=A(_[r+88>>2]-f|0,h)))>-1){s=r;break n}if(f=A(f-_[c+88>>2]|0,h)){if((0|f)>-1){s=r;break n}if(!((0|A(l,y))<(0|A(p,f))))break}}break}s=r}else{for(s=_[a+92>>2],o=a;c=o,!((0|(o=_[o+(!d<<2)>>2]))==(0|a)|(0|m)!=_[o+88>>2])&&(l=_[o+92>>2],p=(0|l)<=(0|s),s=l,p););for(a=_[r+92>>2],o=r;;){if(s=o,(0|(o=_[o+((0!=(0|d))<<2)>>2]))==(0|r)|(0|m)!=_[o+88>>2])break n;if(l=_[o+92>>2],p=(0|l)>=(0|a),a=l,!p)break}}if(a=d?c:T,r=d?s:b,g=d?g:c,u=d?u:s,h=d?h:-1,2==(0|(d=d+1|0)))break}_[a+4>>2]=r,_[r>>2]=a,_[g>>2]=u,_[u+4>>2]=g,_[b+88>>2]<_[T+88>>2]&&(_[e>>2]=b),_[x+88>>2]>=_[S+88>>2]&&(_[e+4>>2]=x),_[e+12>>2]=_[t+12>>2],_[i>>2]=g,e=1}return _[n>>2]=u,e}(t,i,n+124|0,n+120|0)){if(E=_[n+124>>2],s=_[E+92>>2],g=_[n+120>>2],m=_[g+92>>2],l=_[E+96>>2],y=_[g+96>>2],x=_[E+88>>2],D=_[g+88>>2],_[n+92>>2]=-1,i=y-l|0,_[n+88>>2]=i,a=m-s|0,_[n+84>>2]=a,r=D-x|0,_[n+80>>2]=r,t=_[E+8>>2],_[n+32>>2]=0,o=i,c=a,h=Qa(i,k=i>>31,a,d=a>>31),O=N,p=i=0-r|0,i=Qa(i,v=i>>31,r,r>>31),a=N,C=Qa(c,d,c,d),r=i-C|0,C=a-(N+(i>>>0<C>>>0)|0)|0,i=Qa(o,k,p,v),k=0-i|0,M=0-(N+(0<i>>>0)|0)|0,t){for(i=t;o=_[i+12>>2],a=_[o+92>>2]-s|0,f=Qa(b=a,a>>=31,p,v),w=N,L=f,f=_[o+88>>2]-x|0,P=Qa(c,d,R=f,f>>=31),(0|L)!=(0-P|0)|(0-(N+(0<P>>>0)|0)|0)!=(0|w)||(a=Qa(h,O,b,a),w=N,f=Qa(R,f,k,M),b=f+a|0,a=N+w|0,a=b>>>0<f>>>0?a+1|0:a,o=_[o+96>>2]-l|0,f=Qa(r,C,o,o>>31),o=N+a|0,(0|(o=(b=f+b|0)>>>0<f>>>0?o+1|0:o))<0||(0|o)<=0&&!(b>>>0>=1)||u&&(_[n+64>>2]=-1,_[n+68>>2]=-1,_[n+56>>2]=0,_[n+60>>2]=0,1!=(0|br(u,i,n+80|0,n+56|0)))||(u=i)),i=_[i>>2],(0|t)!=(0|i););_[n+32>>2]=u}if(a=_[g+8>>2],t=0,_[n+8>>2]=0,a){for(i=a;s=_[i+12>>2],o=_[s+92>>2]-m|0,x=Qa(l=o,o>>=31,p,v),b=N,R=x,x=_[s+88>>2]-D|0,w=Qa(c,d,f=x,x=f>>31),(0|R)!=(0-w|0)|(0-(N+(0<w>>>0)|0)|0)!=(0|b)||(o=Qa(h,O,l,o),b=N,x=Qa(f,x,k,M),l=x+o|0,o=N+b|0,o=l>>>0<x>>>0?o+1|0:o,f=l,s=_[s+96>>2]-y|0,l=Qa(r,C,s,s>>31),o=N+o|0,(0|(o=(s=f+l|0)>>>0<l>>>0?o+1|0:o))<0||(0|o)<=0&&!(s>>>0>=1)||t&&(_[n+64>>2]=-1,_[n+68>>2]=-1,_[n+56>>2]=0,_[n+60>>2]=0,2!=(0|br(t,i,n+80|0,n+56|0)))||(t=i)),i=_[i>>2],(0|a)!=(0|i););_[n+8>>2]=t}t|u&&(Fo(e,E,g,n+32|0,n+8|0),(t=_[n+32>>2])&&(E=_[t+12>>2],_[n+124>>2]=E),(t=_[n+8>>2])&&(g=_[t+12>>2],_[n+120>>2]=g)),O=_[g+96>>2]+1|0,C=_[g+88>>2],y=_[g+92>>2]}else g=_[n+120>>2],C=_[g+88>>2]+1|0,O=_[g+96>>2],E=_[n+124>>2],y=_[g+92>>2];for(u=E,v=g,d=0,t=0,k=1,s=0,o=0;;){x=v,c=_[v+96>>2],D=u,r=_[u+96>>2],p=_[u+92>>2],i=_[v+92>>2],l=_[u+88>>2],a=_[v+88>>2],_[n+116>>2]=-1,i=i-p|0,_[n+108>>2]=i,c=c-r|0,_[n+112>>2]=c,a=a-l|0,_[n+104>>2]=a,r=O-r|0,h=A(p=y-p|0,c)-A(r,i)|0,m=h>>31,M=h,_[n+80>>2]=h,_[n+84>>2]=m,f=A(r,a),h=f-A(r=C-l|0,c)|0,l=h>>31,b=h,_[n+88>>2]=h,_[n+92>>2]=l,r=A(i,r)-A(a,p)|0,h=r>>31,f=r,_[n+96>>2]=r,_[n+100>>2]=h,a=Qa(b,l,r=a,w=r>>31),R=N,p=i,i=Qa(M,m,i,P=i>>31),_[n+72>>2]=a-i,_[n+76>>2]=R-(N+(a>>>0<i>>>0)|0),c=Qa(M,m,i=c,a=i>>31),m=N,r=Qa(f,h,r,w),_[n+64>>2]=c-r,_[n+68>>2]=m-(N+(c>>>0<r>>>0)|0),c=Qa(f,h,p,P),r=N,i=Qa(i,a,b,l),_[n+56>>2]=c-i,_[n+60>>2]=r-(N+(c>>>0<i>>>0)|0),_[n+48>>2]=0,_[n+40>>2]=0,_[n+44>>2]=0,_[n+32>>2]=0,_[n+36>>2]=0,h=Ro(e,0,u,n+104|0,n+80|0,n+56|0,n+32|0),_[n+24>>2]=0,_[n+16>>2]=0,_[n+20>>2]=0,_[n+8>>2]=0,_[n+12>>2]=0;i:if((l=Ro(e,1,v,n+104|0,n+80|0,n+56|0,n+8|0))|h){m=h?-1:1,!h|!l||(m=mn(n+32|0,n+8|0));n:{r:if(!k){o:{if((0|m)>=0){if(_[n+24>>2]>-1)break r;if(!(_[n+16>>2]|_[n+20>>2]))break o;break r}if(_[n+40>>2]|_[n+44>>2]|_[n+48>>2]>-1)break r}p=d,c=t,r=s,a=o;break n}r=xr(e,u,v),a=r,s&&(_[s+4>>2]=r,a=o),_[r>>2]=s,p=_[r+8>>2],c=p,d&&(_[d>>2]=p,c=t),_[p+4>>2]=d}if(_[n+4>>2]=h,_[n>>2]=l,d=l,m||(Fo(e,u,v,n+4|0,n),d=_[n>>2]),t=p,!((0|m)<0)&&(t=p,d)){if(T&&(i=_[T>>2],(0|l)!=(0|i)))for(;y=_[i+8>>2],o=0,t=0,(0|(s=_[i>>2]))!=(0|i)&&(_[s+4>>2]=_[i+4>>2],_[_[i+4>>2]>>2]=s,t=s),_[_[y+12>>2]+8>>2]=t,(0|(t=_[y>>2]))!=(0|y)&&(_[t+4>>2]=_[y+4>>2],_[_[y+4>>2]>>2]=t,o=t),_[_[i+12>>2]+8>>2]=o,_[i+12>>2]=0,_[i+16>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,_[i>>2]=_[e+56>>2],_[e+56>>2]=i,_[y+12>>2]=0,_[y+16>>2]=0,_[y+4>>2]=0,_[y+8>>2]=0,_[y>>2]=_[e+56>>2],_[e+56>>2]=y,_[e+116>>2]=_[e+116>>2]+-1,(0|l)!=(0|(i=s)););p?(T||(T=_[l+4>>2],F=c),_[T>>2]=c,_[c+4>>2]=T,_[p>>2]=l,_[l+4>>2]=p,c=0):F=T?F:l,O=_[x+96>>2],y=_[v+92>>2],C=_[v+88>>2],v=_[d+12>>2],_[n+120>>2]=v,T=_[d+8>>2],t=0}if(d=t,s=r,!((0|m)>0)&&(l=_[n+4>>2],s=r,l)){if(S&&(t=_[S+4>>2],(0|h)!=(0|t)))for(;s=_[(i=t)+8>>2],p=_[i+4>>2],t=0,m=0,(0|(o=_[i>>2]))!=(0|i)&&(_[o+4>>2]=p,_[_[i+4>>2]>>2]=o,m=o),_[_[s+12>>2]+8>>2]=m,(0|(o=_[s>>2]))!=(0|s)&&(_[o+4>>2]=_[s+4>>2],_[_[s+4>>2]>>2]=o,t=o),_[_[i+12>>2]+8>>2]=t,_[i+12>>2]=0,_[i+16>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,_[i>>2]=_[e+56>>2],_[e+56>>2]=i,_[s+12>>2]=0,_[s+16>>2]=0,_[s+4>>2]=0,_[s+8>>2]=0,_[s>>2]=_[e+56>>2],_[e+56>>2]=s,_[e+116>>2]=_[e+116>>2]+-1,(0|(t=p))!=(0|h););r?(S||(S=_[h>>2],I=a),_[S+4>>2]=a,_[a>>2]=S,_[h>>2]=r,_[r+4>>2]=h,a=0):I=S?I:h,O=_[D+96>>2],y=_[u+92>>2],C=_[u+88>>2],u=_[l+12>>2],_[n+124>>2]=u,S=_[l+8>>2],s=0}if(i=1,(0|u)!=(0|E)|(0|v)!=(0|g))k=0;else{if(S){if(t=_[S+4>>2],(0|I)!=(0|t))for(;r=_[(i=t)+8>>2],u=_[i+4>>2],t=0,m=0,(0|(o=_[i>>2]))!=(0|i)&&(_[o+4>>2]=u,_[_[i+4>>2]>>2]=o,m=o),_[_[r+12>>2]+8>>2]=m,(0|(o=_[r>>2]))!=(0|r)&&(_[o+4>>2]=_[r+4>>2],_[_[r+4>>2]>>2]=o,t=o),_[_[i+12>>2]+8>>2]=t,_[i+12>>2]=0,_[i+16>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,_[i>>2]=_[e+56>>2],_[e+56>>2]=i,_[r+12>>2]=0,_[r+16>>2]=0,_[r+4>>2]=0,_[r+8>>2]=0,_[r>>2]=_[e+56>>2],_[e+56>>2]=r,_[e+116>>2]=_[e+116>>2]+-1,(0|(t=u))!=(0|I););s&&(_[a>>2]=S,_[S+4>>2]=a,_[I>>2]=s,_[s+4>>2]=I)}else _[a>>2]=s,_[s+4>>2]=a,_[u+8>>2]=s;if(!T){_[d>>2]=c,_[c+4>>2]=d,_[_[n+120>>2]+8>>2]=d,T=0,t=c,o=a,i=0;break i}if(i=_[T>>2],(0|F)!=(0|i))for(;r=_[i+8>>2],o=0,t=0,(0|(u=_[i>>2]))!=(0|i)&&(_[u+4>>2]=_[i+4>>2],_[_[i+4>>2]>>2]=u,t=u),_[_[r+12>>2]+8>>2]=t,(0|(t=_[r>>2]))!=(0|r)&&(_[t+4>>2]=_[r+4>>2],_[_[r+4>>2]>>2]=t,o=t),_[_[i+12>>2]+8>>2]=o,_[i+12>>2]=0,_[i+16>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,_[i>>2]=_[e+56>>2],_[e+56>>2]=i,_[r+12>>2]=0,_[r+16>>2]=0,_[r+4>>2]=0,_[r+8>>2]=0,_[r>>2]=_[e+56>>2],_[e+56>>2]=r,_[e+116>>2]=_[e+116>>2]+-1,(0|F)!=(0|(i=u)););i=0,d?(_[T>>2]=c,_[c+4>>2]=T,_[d>>2]=F,_[F+4>>2]=d):d=0}t=c,o=a}else i=xr(e,u,v),_[i+4>>2]=i,_[i>>2]=i,_[u+8>>2]=i,i=_[i+8>>2],_[i+4>>2]=i,_[i>>2]=i,_[v+8>>2]=i,i=0;if(!i)break t;u=_[n+124>>2],v=_[n+120>>2]}}else e=_[i+4>>2],_[t>>2]=_[i>>2],_[t+4>>2]=e,e=_[i+12>>2],_[t+8>>2]=_[i+8>>2],_[t+12>>2]=e;B=n+128|0}(t,r,o)}B=o+16|0}(e,0,i,n+8|0),_[e+124>>2]=_[n+8>>2],(e=_[n+36>>2])&&(d[n+40|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[n+36>>2]=0),B=n+48|0}(n+16|0,t,i),(0|(i=_[e+4>>2]))<=-1)for(_[e+8>>2]<=-1&&((t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),a[e+16|0]=1,_[e+8>>2]=0,_[e+12>>2]=0);t=_[n+4>>2],r=_[e+12>>2]+(i<<4)|0,_[r>>2]=_[n>>2],_[r+4>>2]=t,t=_[n+12>>2],_[r+8>>2]=_[n+8>>2],_[r+12>>2]=t,r=(t=i+1|0)>>>0>=i>>>0,i=t,r;);if(_[e+4>>2]=0,_[n+8>>2]=0,_[n>>2]=0,_[n+4>>2]=0,(0|(i=_[e+24>>2]))<=-1)for(_[e+28>>2]<=-1&&((t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+28>>2]=0,_[e+32>>2]=0,a[e+36|0]=1);t=_[n+4>>2],r=_[e+32>>2]+A(i,12)|0,_[r>>2]=_[n>>2],_[r+4>>2]=t,_[r+8>>2]=_[n+8>>2],r=(t=i+1|0)>>>0>=i>>>0,i=t,r;);if(_[e+24>>2]=0,(0|(i=_[e+44>>2]))<=-1&&(t=_[e+52>>2],_[e+48>>2]<=-1&&(!t|!d[e+56|0]||t&&(_[5586]=_[5586]+1,o[_[4568]](t)),a[e+56|0]=1,_[e+48>>2]=0,_[e+52>>2]=0,t=0),Pi((r=t)+(t=i<<2)|0,0,0-t|0)),_[e+44>>2]=0,t=_[n+140>>2],!(_[t+104>>2]>-1)){for(_[t+104>>2]=0,_[5585]=_[5585]+1,S=0|o[_[4567]](4,16),_[S>>2]=t,i=0,f=1,v=1,w=S;;){if(k=i,Ya(n,n+16|0,c=_[(i<<2)+S>>2]),(0|(r=_[e+4>>2]))==_[e+8>>2]&&!((0|r)>=(0|(E=r?r<<1:1)))){if(i=0,s=0,E&&(_[5585]=_[5585]+1,s=0|o[_[4567]](E<<4,16),r=_[e+4>>2]),(0|r)>=1)for(;h=(t=i<<4)+s|0,u=t+_[e+12>>2]|0,t=_[u+4>>2],_[h>>2]=_[u>>2],_[h+4>>2]=t,t=_[u+12>>2],_[h+8>>2]=_[u+8>>2],_[h+12>>2]=t,(0|r)!=(0|(i=i+1|0)););(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=s,a[e+16|0]=1,_[e+8>>2]=E,r=_[e+4>>2]}if(t=_[n+4>>2],i=_[e+12>>2]+(r<<4)|0,_[i>>2]=_[n>>2],_[i+4>>2]=t,t=_[n+12>>2],_[i+8>>2]=_[n+8>>2],_[i+12>>2]=t,_[e+4>>2]=_[e+4>>2]+1,C=-1,h=-1,t=E=_[c+8>>2]){for(;;){if((0|(i=_[t+20>>2]))<=-1){if(r=_[e+24>>2],_[n+8>>2]=0,_[n>>2]=0,_[n+4>>2]=0,(0|(i=r))==_[e+28>>2]&&!((0|r)>=(0|(m=i?i<<1:1)))){if(i=0,s=r,c=0,m&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(m,12),16),s=_[e+24>>2]),(0|s)>=1)for(;g=(u=A(i,12))+_[e+32>>2]|0,T=c+u|0,u=_[g+4>>2],_[T>>2]=_[g>>2],_[T+4>>2]=u,_[T+8>>2]=_[g+8>>2],(0|s)!=(0|(i=i+1|0)););(i=_[e+32>>2])&&(d[e+36|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+32>>2]=0),_[e+32>>2]=c,a[e+36|0]=1,_[e+28>>2]=m,i=_[e+24>>2]}if(s=_[e+32>>2]+A(i,12)|0,i=_[n+4>>2],_[s>>2]=_[n>>2],_[s+4>>2]=i,_[s+8>>2]=_[n+8>>2],s=_[e+24>>2]+1|0,_[e+24>>2]=s,_[n+8>>2]=0,_[n>>2]=0,_[n+4>>2]=0,_[e+28>>2]==(0|s)&&!((0|s)>=(0|(m=s?s<<1:1)))){if(i=0,c=0,m&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(m,12),16),s=_[e+24>>2]),(0|s)>=1)for(;g=(u=A(i,12))+_[e+32>>2]|0,T=c+u|0,u=_[g+4>>2],_[T>>2]=_[g>>2],_[T+4>>2]=u,_[T+8>>2]=_[g+8>>2],(0|s)!=(0|(i=i+1|0)););(i=_[e+32>>2])&&(d[e+36|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+32>>2]=0),_[e+32>>2]=c,a[e+36|0]=1,_[e+28>>2]=m,s=_[e+24>>2]}if(i=_[n+4>>2],s=_[e+32>>2]+A(s,12)|0,_[s>>2]=_[n>>2],_[s+4>>2]=i,_[s+8>>2]=_[n+8>>2],_[e+24>>2]=_[e+24>>2]+1,m=_[e+32>>2],_[t+20>>2]=r,u=r+1|0,_[_[t+8>>2]+20>>2]=u,g=A(r,12)+m|0,_[g+16>>2]=-1,_[g+4>>2]=1,T=_[t+12>>2],(0|(i=_[T+104>>2]))>-1)s=f,f=i;else{if(_[T+104>>2]=f,(0|f)!=(0|v)||(0|v)>=(0|(c=v?v<<1:1)))r=w,c=v;else{i=0,r=0,c&&(_[5585]=_[5585]+1,r=0|o[_[4567]](c<<2,16));e:{t:{if((0|v)>=1)for(;;)if(_[(s=i<<2)+r>>2]=_[s+S>>2],(0|v)==(0|(i=i+1|0)))break t;if(!S)break e}w&&(_[5586]=_[5586]+1,o[_[4568]](w))}S=r}_[(f<<2)+S>>2]=T,s=f+1|0,w=r,v=c}_[g+8>>2]=f,_[8+(A(u,12)+m|0)>>2]=k,f=s,i=_[t+20>>2]}if((0|h)>=0?_[_[e+32>>2]+A(i,12)>>2]=h-i:C=i,h=i,(0|E)==(0|(t=_[t>>2])))break}_[_[e+32>>2]+A(C,12)>>2]=h-C}if(!((0|(i=k+1|0))<(0|f)))break}for(f=0;;){if(t=c=_[_[(f<<2)+S>>2]+8>>2])for(;;){if((0|(i=_[t+20>>2]))>=0){if((0|(r=_[e+44>>2]))==_[e+48>>2]&&!((0|r)>=(0|(h=r?r<<1:1)))){i=0,s=0,h&&(_[5585]=_[5585]+1,s=0|o[_[4567]](h<<2,16),r=_[e+44>>2]),C=_[e+52>>2];e:{t:{if((0|r)>=1)for(;;)if(_[(v=i<<2)+s>>2]=_[v+C>>2],(0|r)==(0|(i=i+1|0)))break t;if(!C)break e}d[e+56|0]&&(i=C)&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+52>>2]=0,r=_[e+44>>2]}_[e+52>>2]=s,a[e+56|0]=1,_[e+48>>2]=h,i=_[t+20>>2]}for(_[_[e+52>>2]+(r<<2)>>2]=i,_[e+44>>2]=_[e+44>>2]+1,i=t;_[i+20>>2]=-1,(0|(i=_[_[i+8>>2]+4>>2]))!=(0|t););}if((0|c)==(0|(t=_[t>>2])))break}if(t=(0|f)==(0|k),f=f+1|0,t)break}S&&w&&(_[5586]=_[5586]+1,o[_[4568]](w))}!function(e){var t=0,i=0;for((t=_[e+92>>2])&&(d[e+96|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+92>>2]=0),_[e+92>>2]=0,_[e+84>>2]=0,_[e+88>>2]=0,a[e+96|0]=1;t=_[e+64>>2];)_[e+64>>2]=_[t+8>>2],(i=_[t>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),t&&(_[5586]=_[5586]+1,o[_[4568]](t));for(;t=_[e+48>>2];)_[e+48>>2]=_[t+8>>2],(i=_[t>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),t&&(_[5586]=_[5586]+1,o[_[4568]](t));for(;t=_[e+32>>2];)_[e+32>>2]=_[t+8>>2],(i=_[t>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),t&&(_[5586]=_[5586]+1,o[_[4568]](t))}(n+16|0)}B=n+144|0}function di(e,t,i,n,r,o){d[e+60|0]?Lo(e,t,i,n,r,o,_[e+56>>2]):zo(e,t,i,n,r,o)}function mi(e,t,i,n){var r,a=b(0),s=b(0),l=0,c=b(0),u=b(0),h=b(0),p=b(0),v=b(0),g=b(0),A=0,x=b(0),T=b(0),S=b(0),E=0,C=0,w=0,k=0,O=0,R=0,F=0,I=0;B=r=B-16|0;e:if(d[e+60|0]){if(u=y[e+28>>2],c=y[e+12>>2],a=(a=y[i+8>>2])<c?c:a,x=y[e+44>>2],l=(a=b(b((u<a?u:a)-c)*x))<b(4294967296)&a>=b(0)?~~a>>>0:0,T=y[e+40>>2],v=y[e+24>>2],a=y[e+8>>2],S=y[e+36>>2],g=y[e+20>>2],p=y[e+4>>2],s=y[i>>2],h=y[i+4>>2],E=65534&l,f[r+14>>1]=E,i=r,C=65534&(l=(h=b(T*b((v<(h=h<a?a:h)?v:h)-a)))<b(4294967296)&h>=b(0)?~~h>>>0:0),f[i+12>>1]=C,i=r,w=65534&(l=(s=b(b((g<(s=s<p?p:s)?g:s)-p)*S))<b(4294967296)&s>=b(0)?~~s>>>0:0),f[i+10>>1]=w,s=y[n+8>>2],i=(c=b(b(x*b((u<(s=s<c?c:s)?u:s)-c))+b(1)))<b(4294967296)&c>=b(0)?~~c>>>0:0,c=y[n>>2],u=y[n+4>>2],k=1|i,f[r+8>>1]=k,i=r,O=1|(n=(a=b(b(T*b((v<(u=u<a?a:u)?v:u)-a))+b(1)))<b(4294967296)&a>=b(0)?~~a>>>0:0),f[i+6>>1]=O,i=r,R=1|(n=(a=b(b(S*b((g<(a=c<p?p:c)?g:a)-p))+b(1)))<b(4294967296)&a>=b(0)?~~a>>>0:0),f[i+4>>1]=R,(i=_[e+144>>2])>>>0>2)break e;switch(i-1|0){default:if(n=0,(0|(F=_[e+56>>2]))>=1)for(e=_[e+136>>2],i=0;(I=(0|(A=_[e+12>>2]))<0)|!(l=w>>>0<=m[e+6>>1]&R>>>0>=m[e>>1]&E>>>0<=m[e+10>>1]&k>>>0>=m[e+4>>1]&C>>>0<=m[e+8>>1]&O>>>0>=m[e+2>>1])||o[_[_[t>>2]+8>>2]](t,A>>>21,2097151&A),(-1^l)&I?(i=i-(l=_[e+12>>2])|0,e=e-(l<<4)|0):(i=i+1|0,e=e+16|0),n=n+1|0,(0|i)<(0|F););if(_[5004]>=(0|n))break e;_[5004]=n;break e;case 0:!function(e,t,i,n){var r=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,v=0;if(_[e+152>>2]>=1)for(;;){if(p=m[i>>1],a=_[e+160>>2]+(f<<5)|0,!(p>>>0>m[a+6>>1]||(d=m[n>>1])>>>0<m[a>>1]||(v=m[i+4>>1])>>>0>m[a+10>>1]||(u=m[n+4>>1])>>>0<m[a+4>>1]||(l=m[i+2>>1])>>>0>m[a+8>>1]||(s=m[n+2>>1])>>>0<m[a+2>>1])){t:if((0|(r=_[a+16>>2]))<1)h=0;else for(a=r+(c=_[a+12>>2])|0,r=_[e+136>>2]+(c<<4)|0,h=0;;){if(u=p>>>0<=m[r+6>>1]&d>>>0>=m[r>>1]&v>>>0<=m[r+10>>1]&u>>>0>=m[r+4>>1]&l>>>0<=m[r+8>>1]&s>>>0>=m[r+2>>1],(s=(0|(l=_[r+12>>2]))<0)|!u||o[_[_[t>>2]+8>>2]](t,l>>>21,2097151&l),s&(-1^u)?(c=c-(s=_[r+12>>2])|0,r=r-(s<<4)|0):(c=c+1|0,r=r+16|0),h=h+1|0,(0|c)>=(0|a))break t;s=m[n+2>>1],l=m[i+2>>1],u=m[n+4>>1],v=m[i+4>>1],d=m[n>>1],p=m[i>>1]}_[5004]>=(0|h)||(_[5004]=h)}if(!((0|(f=f+1|0))<_[e+152>>2]))break}}(e,t,r+10|0,r+4|0);break e;case 1:}!function e(t,i,n,r,a){for(var s=0,l=0;;){t:{if(!(m[a>>1]<m[i>>1]|m[r>>1]>m[i+6>>1]|m[a+4>>1]<m[i+4>>1]|m[r+4>>1]>m[i+10>>1]||m[a+2>>1]<m[i+2>>1]|m[r+2>>1]>m[i+8>>1])){if((0|(s=_[i+12>>2]))<0)break t;o[_[_[n>>2]+8>>2]](n,s>>>21,2097151&s)}return}e(t,s=i+16|0,n,r,a),l=i+32|0,i=(0|(i=_[i+28>>2]))>-1?l:s-(i<<4)|0}}(e,_[e+136>>2],t,r+10|0,r+4|0)}else!function(e,t,i,n){var r=0,a=0,s=0,l=0,c=0;if(_[e+56>>2]>=1)for(r=_[e+96>>2];;){a=0,y[i>>2]>y[r+16>>2]||(a=0,y[n>>2]<y[r>>2]||(a=1)),s=0,s=y[n+8>>2]<y[r+8>>2]|y[i+8>>2]>y[r+24>>2]?s:a;t:{i:{if(y[n+4>>2]<y[r+4>>2]^1&&!(y[i+4>>2]>y[r+20>>2])){if(1==(s&(a=-1==_[r+32>>2]))){o[_[_[t>>2]+8>>2]](t,_[r+36>>2],_[r+40>>2]);break i}}else a=-1==_[r+32>>2],s=0;if(!(a|s)){l=(a=_[r+32>>2])+l|0,r=(a<<6)+r|0;break t}}l=l+1|0,r=r- -64|0}if(c=c+1|0,!((0|l)<_[e+56>>2]))break}_[5004]<(0|c)&&(_[5004]=c)}(e,t,i,n);B=r+16|0}function vi(e,t,i,n){var r=b(0),o=b(0),a=0,s=b(0),l=0,c=b(0),u=b(0),h=0,p=0,v=0,g=0,A=0,x=0;e:{if(d[e+60|0]){if(u=y[e+12>>2],o=y[e+44>>2],h=(r=b(b(y[i+8>>2]-u)*o))<b(4294967296)&r>=b(0)?~~r>>>0:0,s=y[e+8>>2],r=y[e+40>>2],p=(c=b(b(y[i+4>>2]-s)*r))<b(4294967296)&c>=b(0)?~~c>>>0:0,v=(o=b(b(o*b(y[n+8>>2]-u))+b(1)))<b(4294967296)&o>=b(0)?~~o>>>0:0,a=(r=b(b(r*b(y[n+4>>2]-s))+b(1)))<b(4294967296)&r>=b(0)?~~r>>>0:0,l=_[e+136>>2],x=m[(g=l+(t<<4)|0)>>1],s=y[e+4>>2],r=y[e+36>>2],i=x>>>0<=(A=65534&(e=(o=b(b(y[i>>2]-s)*r))<b(4294967296)&o>=b(0)?~~o>>>0:0))>>>0,e=(r=b(b(r*b(y[n>>2]-s))+b(1)))<b(4294967296)&r>=b(0)?~~r>>>0:0,i||(f[g>>1]=A),e|=1,m[6+(i=l+(t<<4)|0)>>1]<e>>>0&&(f[i+6>>1]=e),e=65534&p,m[i+2>>1]>e>>>0&&(f[i+2>>1]=e),e=1|a,m[8+(i=n=l+(t<<4)|0)>>1]<e>>>0&&(f[i+8>>1]=e),e=65534&h,m[n+4>>1]>e>>>0&&(f[n+4>>1]=e),e=1|v,m[10+(t=l+(t<<4)|0)>>1]>=e>>>0)break e;return void(f[t+10>>1]=e)}r=y[i>>2],a=_[e+96>>2],r<y[(e=a+(t<<6)|0)>>2]&&(y[e>>2]=r),(r=y[i+4>>2])<y[e+4>>2]&&(y[e+4>>2]=r),(r=y[i+8>>2])<y[8+(e=a+(t<<6)|0)>>2]&&(y[e+8>>2]=r),(r=y[i+12>>2])<y[e+12>>2]&&(y[e+12>>2]=r),e=a+(t<<6)|0,r=y[n>>2],y[e+16>>2]<r&&(y[e+16>>2]=r),r=y[n+4>>2],y[e+20>>2]<r&&(y[e+20>>2]=r),e=t=a+(t<<6)|0,r=y[n+8>>2],y[e+24>>2]<r&&(y[e+24>>2]=r),r=y[n+12>>2],y[t+28>>2]<r&&(y[t+28>>2]=r)}}function yi(e,t,i,n,r,o,s,l,c,u){_[e>>2]=11800,_[e+4>>2]=35,_[e+8>>2]=0,_[e+12>>2]=-1,_[e+16>>2]=0,_[e>>2]=12572,function(e,t,i,n,r,o,s,l,c,u){var h=b(0),p=b(0),f=b(0),d=b(0);_[e+112>>2]=1065353216,_[e+116>>2]=1065353216,_[e+108>>2]=l,a[e+105|0]=0,a[e+106|0]=0,a[e+104|0]=u,_[e+100>>2]=c,y[e+92>>2]=r,y[e+80>>2]=s,y[e+76>>2]=o,_[e+72>>2]=i,_[e+68>>2]=t,_[e+120>>2]=1065353216,_[e+124>>2]=0,_[e+96>>2]=n,_[e+4>>2]=24,r=b(i+-1|0),y[e+88>>2]=r,h=b(t+-1|0),y[e+84>>2]=h;e:{t:{i:{n:{r:{if(l>>>0<=2)switch(l-1|0){case 1:break i;case 0:break n;default:break r}p=y[e+44>>2],f=y[e+28>>2],r=y[e+40>>2],d=y[e+24>>2],s=y[e+36>>2],o=y[e+20>>2];break e}_[e+48>>2]=0,y[e+44>>2]=r,y[e+40>>2]=h,y[e+36>>2]=s,_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,y[e+20>>2]=o,p=r,r=h;break e}_[e+20>>2]=0,_[e+48>>2]=0,y[e+44>>2]=r,y[e+40>>2]=s,y[e+36>>2]=h,_[e+28>>2]=0,_[e+32>>2]=0,y[e+24>>2]=o,p=r,r=s,d=o,o=b(0);break t}_[e+20>>2]=0,_[e+24>>2]=0,_[e+48>>2]=0,y[e+44>>2]=s,y[e+40>>2]=r,y[e+36>>2]=h,_[e+32>>2]=0,y[e+28>>2]=o,p=s}f=o,s=h,o=b(0)}_[e- -64>>2]=0,y[e+60>>2]=b(f+p)*b(.5),y[e+56>>2]=b(d+r)*b(.5),y[e+52>>2]=b(o+s)*b(.5)}(e,t,i,n,r,o,s,l,c,u)}function gi(e,t,i){var n,r=0,s=0,l=0,c=0,u=0,h=0,p=b(0),f=0,m=b(0),v=0,g=b(0),T=b(0),S=b(0),E=b(0),C=0,k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0);B=n=B-32|0,p=y[i+8>>2],b(x(p))>b(.7071067690849304)?(g=y[i+4>>2],T=b(b(p*p)+b(g*g)),S=b(b(1)/b(w(T))),k=b(T*S),m=y[i>>2],T=b(S*b(-p)),R=b(m*T),S=b(g*S),E=b(S*b(-m)),g=b(0)):(S=y[i>>2],g=y[i+4>>2],m=b(b(S*S)+b(g*g)),T=b(b(1)/b(w(m))),R=b(m*T),g=b(T*b(-g)),E=b(p*g),T=b(S*T),k=b(T*b(-p)),S=b(0));e:if((0|(s=_[e+4>>2]))>=2){for(r=_[e+12>>2];h=A(c,24),b(b(b(g*y[(l=h+r|0)>>2])+b(T*y[l+4>>2]))+b(S*y[l+8>>2]))<b(b(b(g*y[r>>2])+b(T*y[r+4>>2]))+b(S*y[r+8>>2]))&&(s=_[r+20>>2],_[n+24>>2]=_[r+16>>2],_[n+28>>2]=s,s=_[r+12>>2],_[n+16>>2]=_[r+8>>2],_[n+20>>2]=s,s=_[r+4>>2],_[n+8>>2]=_[r>>2],_[n+12>>2]=s,s=_[l+4>>2],_[r>>2]=_[l>>2],_[r+4>>2]=s,s=_[l+12>>2],_[r+8>>2]=_[l+8>>2],_[r+12>>2]=s,s=_[l+20>>2],_[r+16>>2]=_[l+16>>2],_[r+20>>2]=s,s=_[n+12>>2],l=h+_[e+12>>2]|0,_[(r=l)>>2]=_[n+8>>2],_[r+4>>2]=s,r=_[n+28>>2],_[l+16>>2]=_[n+24>>2],_[l+20>>2]=r,r=_[n+20>>2],_[l+8>>2]=_[n+16>>2],_[l+12>>2]=r,s=_[e+4>>2],r=_[e+12>>2]),(0|(c=c+1|0))<(0|s););if(_[r+16>>2]=-246811958,(0|s)>=2)for(F=y[r+8>>2],I=y[r+4>>2],P=y[r>>2],c=1;m=b(0),l=A(c,24)+r|0,p=b(y[l>>2]-P),M=b(y[l+4>>2]-I),D=b(y[l+8>>2]-F),O=b(b(b(k*p)+b(E*M))+b(R*D)),p=b(b(b(g*p)+b(T*M))+b(S*D)),b(b(O*O)+b(p*p))<b(1.1920928955078125e-7)||(m=b(x(O)),p>=b(0)?(p=b(b(p-m)/b(p+m)),m=b(.7853981852531433)):(p=b(b(p+m)/b(m-p)),m=b(2.356194496154785)),p=b(m+b(p*b(-.7853981852531433))),m=O<b(0)?b(-p):p),y[l+16>>2]=m,(0|(c=c+1|0))!=(0|s););if(l=_[r+12>>2],_[n+16>>2]=_[r+8>>2],_[n+20>>2]=l,l=_[r+4>>2],_[n+8>>2]=_[r>>2],_[n+12>>2]=l,function e(t,i,n,r){var o,a,s=b(0),l=0,c=0,u=0,h=0,p=b(0),f=b(0),d=0,m=b(0),v=b(0),g=b(0),x=b(0),T=0,S=b(0),E=b(0),C=b(0);for(B=o=B-32|0,c=_[t+12>>2],u=c+A((n+r|0)/2|0,24)|0,a=_[u+20>>2],m=y[u+16>>2],S=y[u+8>>2],E=y[u+4>>2],C=y[u>>2],u=n,d=r;;){for(v=y[i>>2],p=b(C-v),f=b(p*p),g=y[i+4>>2],p=b(E-g),f=b(f+b(p*p)),x=y[i+8>>2],p=b(S-x),p=b(f+b(p*p));;){t:{l=A(u,24)+c|0;i:{if((s=y[l+16>>2])!=m){if(s<m)break i;break t}if(s=b(y[l>>2]-v),f=b(s*s),s=b(y[l+4>>2]-g),f=b(f+b(s*s)),s=b(y[l+8>>2]-x),1!=(0|((s=b(f+b(s*s)))!=p?s<p:_[l+20>>2]<(0|a))))break t}u=u+1|0;continue}break}for(;;){t:{T=A(d,24),s=y[16+(h=T+c|0)>>2];i:{if(m!=s){if(m<s)break i;break t}if(s=b(y[h>>2]-v),f=b(s*s),s=b(y[h+4>>2]-g),f=b(f+b(s*s)),s=b(y[h+8>>2]-x),s=b(f+b(s*s)),1!=(0|(p!=s?p<s:(0|a)<_[h+20>>2])))break t}d=d+-1|0;continue}break}if((0|u)<=(0|d)&&(c=_[l+20>>2],_[o+24>>2]=_[l+16>>2],_[o+28>>2]=c,c=_[l+12>>2],_[o+16>>2]=_[l+8>>2],_[o+20>>2]=c,c=_[l+4>>2],_[o+8>>2]=_[l>>2],_[o+12>>2]=c,c=_[h+4>>2],_[l>>2]=_[h>>2],_[l+4>>2]=c,c=_[h+12>>2],_[l+8>>2]=_[h+8>>2],_[l+12>>2]=c,c=_[h+20>>2],_[l+16>>2]=_[h+16>>2],_[l+20>>2]=c,c=_[o+12>>2],l=_[t+12>>2]+T|0,_[l>>2]=_[o+8>>2],_[l+4>>2]=c,h=_[o+28>>2],_[l+16>>2]=_[o+24>>2],_[l+20>>2]=h,h=_[o+20>>2],_[l+8>>2]=_[o+16>>2],_[l+12>>2]=h,d=d+-1|0,u=u+1|0),!((0|u)<=(0|d)))break;c=_[t+12>>2]}(0|d)>(0|n)&&e(t,i,n,d),(0|u)<(0|r)&&e(t,i,u,r),B=o+32|0}(e,n+8|0,1,s+-1|0),l=_[e+12>>2],(0|(s=_[t+4>>2]))==_[t+8>>2]&&!((0|s)>=(0|(f=s?s<<1:1)))){if(r=0,c=0,f&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(f,24),16),s=_[t+4>>2]),(0|s)>=1)for(;u=(h=A(r,24))+c|0,h=h+_[t+12>>2]|0,C=_[h+4>>2],_[u>>2]=_[h>>2],_[u+4>>2]=C,v=_[h+20>>2],_[u+16>>2]=_[h+16>>2],_[u+20>>2]=v,v=_[h+12>>2],_[u+8>>2]=_[h+8>>2],_[u+12>>2]=v,(0|s)!=(0|(r=r+1|0)););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=c,a[t+16|0]=1,_[t+8>>2]=f,s=_[t+4>>2]}if(c=_[l+4>>2],r=_[t+12>>2]+A(s,24)|0,_[r>>2]=_[l>>2],_[r+4>>2]=c,s=_[l+20>>2],_[r+16>>2]=_[l+16>>2],_[r+20>>2]=s,s=_[l+12>>2],_[r+8>>2]=_[l+8>>2],_[r+12>>2]=s,s=_[t+4>>2]+1|0,_[t+4>>2]=s,l=_[e+12>>2],_[t+8>>2]==(0|s)&&!((0|s)>=(0|(f=s?s<<1:1)))){if(r=0,c=0,f&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(f,24),16),s=_[t+4>>2]),(0|s)>=1)for(;u=(h=A(r,24))+c|0,h=h+_[t+12>>2]|0,C=_[h+4>>2],_[u>>2]=_[h>>2],_[u+4>>2]=C,v=_[h+20>>2],_[u+16>>2]=_[h+16>>2],_[u+20>>2]=v,v=_[h+12>>2],_[u+8>>2]=_[h+8>>2],_[u+12>>2]=v,(0|s)!=(0|(r=r+1|0)););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=c,a[t+16|0]=1,_[t+8>>2]=f,s=_[t+4>>2]}if(c=_[l+28>>2],r=_[t+12>>2]+A(s,24)|0,_[r>>2]=_[l+24>>2],_[r+4>>2]=c,s=_[l+44>>2],_[r+16>>2]=_[l+40>>2],_[r+20>>2]=s,s=_[l+36>>2],_[r+8>>2]=_[l+32>>2],_[r+12>>2]=s,r=_[t+4>>2]+1|0,_[t+4>>2]=r,2==_[e+4>>2])break e;for(h=2;;){t:if(!((0|r)<2)){for(l=_[e+12>>2]+A(h,24)|0,p=y[l+8>>2],T=y[l+4>>2],S=y[l>>2],g=y[i+8>>2],m=y[i+4>>2],O=y[i>>2],s=_[t+12>>2];;){if(u=A(r,24)+s|0,k=y[(c=u+-48|0)>>2],R=b(k-y[(u=u+-24|0)>>2]),E=y[c+4>>2],F=b(E-T),E=b(E-y[u+4>>2]),k=b(k-S),M=b(b(b(R*F)-b(E*k))*g),P=E,E=y[c+8>>2],I=b(E-p),E=b(E-y[u+8>>2]),!(b(M+b(b(O*b(b(P*I)-b(E*F)))+b(m*b(b(E*k)-b(R*I)))))>b(0))){if(r=r+-1|0,_[t+4>>2]=r,(0|r)>1)continue;break t}break}if(_[t+8>>2]==(0|r)&&!((0|r)>=(0|(f=r<<1)))){if(_[5585]=_[5585]+1,s=0|o[_[4567]](A(r,48),16),r=0,(0|(v=_[t+4>>2]))>=1)for(;u=(c=A(r,24))+s|0,c=c+_[t+12>>2]|0,C=_[c+4>>2],_[u>>2]=_[c>>2],_[u+4>>2]=C,C=_[c+20>>2],_[u+16>>2]=_[c+16>>2],_[u+20>>2]=C,C=_[c+12>>2],_[u+8>>2]=_[c+8>>2],_[u+12>>2]=C,(0|v)!=(0|(r=r+1|0)););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=s,a[t+16|0]=1,_[t+8>>2]=f,r=_[t+4>>2]}c=_[l+4>>2],r=A(r,24)+s|0,_[r>>2]=_[l>>2],_[r+4>>2]=c,s=_[l+20>>2],_[r+16>>2]=_[l+16>>2],_[r+20>>2]=s,s=_[l+12>>2],_[r+8>>2]=_[l+8>>2],_[r+12>>2]=s,r=_[t+4>>2]+1|0,_[t+4>>2]=r}if(1==(0|r)){if(l=_[e+12>>2]+A(h,24)|0,r=1,1==_[t+8>>2]){if(_[5585]=_[5585]+1,u=0|o[_[4567]](48,16),r=0,(0|(f=_[t+4>>2]))>=1)for(;c=(s=A(r,24))+u|0,s=s+_[t+12>>2]|0,C=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=C,v=_[s+20>>2],_[c+16>>2]=_[s+16>>2],_[c+20>>2]=v,v=_[s+12>>2],_[c+8>>2]=_[s+8>>2],_[c+12>>2]=v,(0|f)!=(0|(r=r+1|0)););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=u,a[t+16|0]=1,_[t+8>>2]=2,r=_[t+4>>2]}c=_[l+4>>2],r=_[t+12>>2]+A(r,24)|0,_[r>>2]=_[l>>2],_[r+4>>2]=c,s=_[l+20>>2],_[r+16>>2]=_[l+16>>2],_[r+20>>2]=s,s=_[l+12>>2],_[r+8>>2]=_[l+8>>2],_[r+12>>2]=s,r=_[t+4>>2]+1|0,_[t+4>>2]=r}if((0|(h=h+1|0))==_[e+4>>2])break}}else if(1==(0|s))for(s=_[t+4>>2];;){if(i=_[e+12>>2],_[t+8>>2]==(0|s)&&!((0|s)>=(0|(u=s?s<<1:1)))){if(r=0,c=0,u&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(u,24),16),s=_[t+4>>2]),(0|s)>=1)for(;h=(l=A(r,24))+c|0,l=l+_[t+12>>2]|0,v=_[l+4>>2],_[h>>2]=_[l>>2],_[h+4>>2]=v,f=_[l+20>>2],_[h+16>>2]=_[l+16>>2],_[h+20>>2]=f,f=_[l+12>>2],_[h+8>>2]=_[l+8>>2],_[h+12>>2]=f,(0|s)!=(0|(r=r+1|0)););(l=_[t+12>>2])&&(d[t+16|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[t+12>>2]=0),_[t+12>>2]=c,a[t+16|0]=1,_[t+8>>2]=u,s=_[t+4>>2]}if(r=l=_[t+12>>2]+A(s,24)|0,s=_[i+4>>2],_[r>>2]=_[i>>2],_[r+4>>2]=s,r=_[i+20>>2],_[l+16>>2]=_[i+16>>2],_[l+20>>2]=r,r=_[i+12>>2],_[l+8>>2]=_[i+8>>2],_[l+12>>2]=r,s=_[t+4>>2]+1|0,_[t+4>>2]=s,!((0|(C=C+1|0))<_[e+4>>2]))break}B=n+32|0}function Ai(e,t,i){var n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0,y=0;e:{if(!((y=(r=f[t>>1])+((u=m[t+2>>1])<<16)&(h=_[e+48>>2])+-1)>>>0>=v[e+4>>2])&&-1!=(0|(n=_[_[e+12>>2]+(y<<2)>>2])))for(p=_[e+72>>2],c=65535&r;;){if((0|u)==m[2+(r=(s=n<<2)+p|0)>>1]&&(0|c)==m[r>>1])break e;if(-1==(0|(n=_[s+_[e+32>>2]>>2])))break}if((0|h)==(0|(n=p=_[e+44>>2]))&&!((0|(n=h))>=(0|(u=n?n<<1:1)))){if(u?(_[5585]=_[5585]+1,l=0|o[_[4567]](u<<2,16),n=_[e+44>>2]):n=h,(0|(r=n))>=1)for(n=0;c=(s=n<<2)+l|0,s=s+_[e+52>>2]|0,s=m[s>>1]|m[s+2>>1]<<16,f[c>>1]=s,f[c+2>>1]=s>>>16,(0|r)!=(0|(n=n+1|0)););(r=_[e+52>>2])&&(d[e+56|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+52>>2]=0),_[e+52>>2]=l,_[e+48>>2]=u,a[e+56|0]=1,n=_[e+44>>2]}if(r=_[e+52>>2]+(n<<2)|0,i=m[i>>1]|m[i+2>>1]<<16,f[r>>1]=i,f[r+2>>1]=i>>>16,_[e+44>>2]=_[e+44>>2]+1,(0|(l=_[e- -64>>2]))==_[e+68>>2]&&!((0|l)>=(0|(c=l?l<<1:1)))){if(c?(_[5585]=_[5585]+1,s=0|o[_[4567]](c<<2,16),l=_[e+64>>2]):s=0,(0|l)>=1)for(n=0;r=(i=n<<2)+s|0,i=i+_[e+72>>2]|0,i=m[i>>1]|m[i+2>>1]<<16,f[r>>1]=i,f[r+2>>1]=i>>>16,(0|l)!=(0|(n=n+1|0)););(i=_[e+72>>2])&&(d[e+76|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+72>>2]=0),_[e+72>>2]=s,_[e+68>>2]=c,a[e+76|0]=1,l=_[e+64>>2]}return r=_[e+72>>2]+(l<<2)|0,i=m[t>>1]|m[t+2>>1]<<16,f[r>>1]=i,f[r+2>>1]=i>>>16,_[e+64>>2]=_[e+64>>2]+1,(0|h)<_[e+48>>2]&&(function(e){var t,i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0;if(!((0|(t=_[e+4>>2]))>=(0|(n=_[e+48>>2])))){if(_[e+8>>2]>=(0|n))s=_[e+12>>2];else{i=t,n&&(_[5585]=_[5585]+1,s=0|o[_[4567]](n<<2,16),i=_[e+4>>2]),c=_[e+12>>2];t:{i:{if((0|i)>=1)for(;;)if(_[(l=r<<2)+s>>2]=_[c+l>>2],(0|(r=r+1|0))==(0|i))break i;if(!c)break t}d[e+16|0]&&c&&(_[5586]=_[5586]+1,o[_[4568]](c))}_[e+12>>2]=s,a[e+16|0]=1,_[e+8>>2]=n}if(Pi((i=t<<2)+s|0,0,(l=n<<2)-i|0),_[e+4>>2]=n,(0|(c=_[e+24>>2]))<(0|n)){t:if(_[e+28>>2]>=(0|n))s=_[e+32>>2];else{r=0,i=c,s=0,n&&(_[5585]=_[5585]+1,s=0|o[_[4567]](l,16),i=_[e+24>>2]),u=_[e+32>>2];i:{if((0|i)>=1)for(;;)if(_[(h=r<<2)+s>>2]=_[u+h>>2],(0|(r=r+1|0))==(0|i))break i;if(!u){_[e+32>>2]=s,_[e+28>>2]=n,a[e+36|0]=1;break t}}d[e+36|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+32>>2]=s,a[e+36|0]=1,_[e+28>>2]=n}Pi((i=c<<2)+s|0,0,l-i|0)}if(_[e+24>>2]=n,(0|n)>=1&&(Pi(_[e+12>>2],255,l),Pi(_[e+32>>2],255,l)),!((0|t)<1))for(c=_[e+32>>2],n=_[e+72>>2],s=_[e+12>>2],r=0;i=s+(((m[2+(i=(l=r<<2)+n|0)>>1]<<16)+f[i>>1]&_[e+48>>2]+-1)<<2)|0,_[c+l>>2]=_[i>>2],_[i>>2]=r,(0|t)!=(0|(r=r+1|0)););}}(e),y=f[t>>1]+(m[t+2>>1]<<16)&_[e+48>>2]+-1),t=_[e+32>>2]+(p<<2)|0,e=_[e+12>>2]+(y<<2)|0,_[t>>2]=_[e>>2],void(_[e>>2]=p)}t=_[e+52>>2]+(n<<2)|0,e=m[i>>1]|m[i+2>>1]<<16,f[t>>1]=e,f[t+2>>1]=e>>>16}function bi(e,t,i){var n,r=0,s=b(0),l=0,c=0,u=0;if(B=n=B-144|0,_[e+72>>2]=_[e+72>>2]+1,_[n+140>>2]=0,r=_[t+12>>2],_[n+72>>2]=_[t+8>>2],_[n+76>>2]=r,r=_[t+4>>2],_[n+64>>2]=_[t>>2],_[n+68>>2]=r,r=_[t+28>>2],_[n+88>>2]=_[t+24>>2],_[n+92>>2]=r,r=_[t+20>>2],_[n+80>>2]=_[t+16>>2],_[n+84>>2]=r,r=_[t+44>>2],_[n+104>>2]=_[t+40>>2],_[n+108>>2]=r,r=_[t+36>>2],_[n+96>>2]=_[t+32>>2],_[n+100>>2]=r,r=_[t+60>>2],_[n+120>>2]=_[t+56>>2],_[n+124>>2]=r,r=_[t+52>>2],l=_[t+48>>2],_[n+128>>2]=i,_[n+112>>2]=l,_[n+116>>2]=r,_[n+132>>2]=_[i+4>>2],y[n+136>>2]=o[_[_[i>>2]+48>>2]](i),o[_[_[i>>2]+8>>2]](i,t,n+48|0,n+32|0),s=y[n+48>>2],y[e+36>>2]>s&&(y[e+36>>2]=s),s=y[n+32>>2],y[e+52>>2]<s&&(y[e+52>>2]=s),s=y[n+52>>2],y[e+40>>2]>s&&(y[e+40>>2]=s),s=y[n+36>>2],y[e+56>>2]<s&&(y[e+56>>2]=s),s=y[n+56>>2],y[e+44>>2]>s&&(y[e+44>>2]=s),s=y[n+40>>2],y[e+60>>2]<s&&(y[e+60>>2]=s),(t=_[e+68>>2])&&(i=_[n+60>>2],_[n+8>>2]=_[n+56>>2],_[n+12>>2]=i,i=_[n+44>>2],_[n+24>>2]=_[n+40>>2],_[n+28>>2]=i,i=_[n+36>>2],_[n+16>>2]=_[n+32>>2],_[n+20>>2]=i,i=_[n+52>>2],_[n>>2]=_[n+48>>2],_[n+4>>2]=i,_[n+140>>2]=jn(t,n,_[e+20>>2])),function(e,t){var i=0,n=0,r=0,s=0,l=0,c=0,u=0;if((0|(s=_[e+4>>2]))==_[e+8>>2]&&!((0|s)>=(0|(l=s?s<<1:1)))){if(l&&(_[5585]=_[5585]+1,u=0|o[_[4567]](A(l,80),16),s=_[e+4>>2]),(0|s)>=1)for(;n=(i=A(c,80))+u|0,i=i+_[e+12>>2]|0,r=_[i+4>>2],_[n>>2]=_[i>>2],_[n+4>>2]=r,r=_[i+12>>2],_[n+8>>2]=_[i+8>>2],_[n+12>>2]=r,r=_[i+28>>2],_[n+24>>2]=_[i+24>>2],_[n+28>>2]=r,r=_[i+20>>2],_[n+16>>2]=_[i+16>>2],_[n+20>>2]=r,r=_[i+44>>2],_[n+40>>2]=_[i+40>>2],_[n+44>>2]=r,r=_[i+36>>2],_[n+32>>2]=_[i+32>>2],_[n+36>>2]=r,r=_[i+60>>2],_[n+56>>2]=_[i+56>>2],_[n+60>>2]=r,r=_[i+52>>2],_[n+48>>2]=_[i+48>>2],_[n+52>>2]=r,r=_[i+68>>2],_[n+64>>2]=_[i+64>>2],_[n+68>>2]=r,r=_[i+76>>2],_[n+72>>2]=_[i+72>>2],_[n+76>>2]=r,(0|(c=c+1|0))!=(0|s););(i=_[e+12>>2])&&(d[e+16|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+12>>2]=0),_[e+12>>2]=u,a[e+16|0]=1,_[e+8>>2]=l,s=_[e+4>>2]}i=_[e+12>>2]+A(s,80)|0,s=_[t+4>>2],_[i>>2]=_[t>>2],_[i+4>>2]=s,n=_[t+12>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=n,n=_[t+28>>2],_[i+24>>2]=_[t+24>>2],_[i+28>>2]=n,n=_[t+20>>2],_[i+16>>2]=_[t+16>>2],_[i+20>>2]=n,n=_[t+44>>2],_[i+40>>2]=_[t+40>>2],_[i+44>>2]=n,n=_[t+36>>2],_[i+32>>2]=_[t+32>>2],_[i+36>>2]=n,n=_[t+60>>2],_[i+56>>2]=_[t+56>>2],_[i+60>>2]=n,n=_[t+52>>2],_[i+48>>2]=_[t+48>>2],_[i+52>>2]=n,n=_[t+76>>2],_[i+72>>2]=_[t+72>>2],_[i+76>>2]=n,n=_[t+68>>2],_[i+64>>2]=_[t+64>>2],_[i+68>>2]=n,_[e+4>>2]=_[e+4>>2]+1}(e+16|0,n- -64|0),(0|(i=_[e+84>>2]))==_[e+88>>2]&&!((0|i)>=(0|(l=i?i<<1:1)))){t=0,l&&(_[5585]=_[5585]+1,c=0|o[_[4567]](l<<2,16),i=_[e+84>>2]),r=_[e+92>>2];e:{t:{if((0|i)>=1)for(;;)if(_[(u=t<<2)+c>>2]=_[r+u>>2],(0|i)==(0|(t=t+1|0)))break t;if(!r)break e}d[e+96|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),i=_[e+84>>2]),_[e+92>>2]=0}_[e+92>>2]=c,_[e+88>>2]=l,a[e+96|0]=1}if(_[_[e+92>>2]+(i<<2)>>2]=1056964608,_[e+84>>2]=i+1,(0|(i=_[e+124>>2]))==_[e+128>>2]&&!((0|i)>=(0|(l=i?i<<1:1)))){t=0,c=0,l&&(_[5585]=_[5585]+1,c=0|o[_[4567]](l<<2,16),i=_[e+124>>2]),r=_[e+132>>2];e:{t:{if((0|i)>=1)for(;;)if(_[(u=t<<2)+c>>2]=_[r+u>>2],(0|i)==(0|(t=t+1|0)))break t;if(!r)break e}d[e+136|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),i=_[e+124>>2]),_[e+132>>2]=0}_[e+132>>2]=c,_[e+128>>2]=l,a[e+136|0]=1}if(_[_[e+132>>2]+(i<<2)>>2]=0,_[e+124>>2]=i+1,(0|(i=_[e+104>>2]))==_[e+108>>2]&&!((0|i)>=(0|(l=i?i<<1:1)))){t=0,c=0,l&&(_[5585]=_[5585]+1,c=0|o[_[4567]](l<<2,16),i=_[e+104>>2]),r=_[e+112>>2];e:{t:{if((0|i)>=1)for(;;)if(_[(u=t<<2)+c>>2]=_[r+u>>2],(0|i)==(0|(t=t+1|0)))break t;if(!r)break e}d[e+116|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),i=_[e+104>>2]),_[e+112>>2]=0}_[e+112>>2]=c,_[e+108>>2]=l,a[e+116|0]=1}_[_[e+112>>2]+(i<<2)>>2]=0,_[e+104>>2]=i+1,B=n+144|0}function xi(e,t,i){var n,r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0;r=A((r=((r=i<<16|t)<<15^-1)+r|0)>>>10^r,9),p=(n=(r=((r^=r>>>6)<<11^-1)+r|0)>>>16^r)&(r=_[e+12>>2])+-1;e:{if(-1!=(0|(l=_[_[e+36>>2]+(p<<2)>>2])))for(c=_[e+16>>2];;){if(s=c+A(l,12)|0,_[s+4>>2]==(0|i)&&_[s>>2]==(0|t))break e;if(-1==(0|(l=_[_[e+56>>2]+(l<<2)>>2])))break}l=e;t:{i:{if((0|(s=c=_[e+8>>2]))==(0|r)){if(!(m=(0|r)>=(0|(s=r?r<<1:1))))break i}else r=s;_[l+8>>2]=r+1,s=(u=_[e+16>>2])+A(c,12)|0;break t}if(s&&(_[5585]=_[5585]+1,u=0|o[_[4567]](A(s,12),16),r=_[e+8>>2]),(0|r)>=1)for(l=0;f=(h=A(l,12))+_[e+16>>2]|0,v=_[f+4>>2],_[(h=u+h|0)>>2]=_[f>>2],_[h+4>>2]=v,_[h+8>>2]=_[f+8>>2],(0|(l=l+1|0))!=(0|r););(r=_[e+16>>2])&&(d[e+20|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+16>>2]=0),_[e+16>>2]=u,_[e+12>>2]=s,a[e+20|0]=1,_[e+8>>2]=_[e+8>>2]+1,s=A(c,12)+u|0,m||(Dr(e),p=_[e+12>>2]+-1&n)}_[s>>2]=t,t=A(c,12)+u|0,_[t+4>>2]=i,_[t+8>>2]=0,t=_[e+56>>2]+(c<<2)|0,e=_[e+36>>2]+(p<<2)|0,_[t>>2]=_[e>>2],_[e>>2]=c}return s}function Ti(e){var t,i,n=0,r=0,s=0,l=0;if(_[e>>2]=9384,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,_[e+16>>2]=0,a[e+40|0]=1,_[e+36>>2]=0,a[e+60|0]=1,_[e+28>>2]=0,_[e+32>>2]=0,_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,_[5585]=_[5585]+1,t=0|o[_[4567]](24,16),(0|(i=_[e+8>>2]))>=1)for(;n=(r=A(s,12))+_[e+16>>2]|0,l=_[n+4>>2],_[(r=r+t|0)>>2]=_[n>>2],_[r+4>>2]=l,_[r+8>>2]=_[n+8>>2],(0|i)!=(0|(s=s+1|0)););(n=_[e+16>>2])&&(d[e+20|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+16>>2]=0),_[e+16>>2]=t,a[e+20|0]=1,_[e+12>>2]=2,Dr(e)}function Si(e,t,i,n){var r=0,s=0,l=0,c=0,u=b(0),h=0,p=0,f=0,m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=0,E=b(0),C=0,w=b(0),k=b(0),O=b(0),R=0;e:if(!((0|(C=_[e+4>>2]))<2))for(l=_[e+12>>2],g=y[(r=(l+(C<<4)|0)-16|0)>>2],w=y[i>>2],m=y[r+4>>2],k=y[i+4>>2],v=y[r+8>>2],O=y[i+8>>2],u=b(b(b(b(g*w)+b(m*k))+b(v*O))+n);;){A=y[(r=(R<<4)+l|0)>>2],x=y[r+4>>2],T=y[r+8>>2],E=b(b(b(b(A*w)+b(x*k))+b(T*O))+n),S=_[r+12>>2];t:{i:if(u<b(0)){if(E<b(0)){if((0|(r=_[t+4>>2]))==_[t+8>>2]&&!((0|r)>=(0|(h=r?r<<1:1)))){if(l=0,p=0,h&&(_[5585]=_[5585]+1,p=0|o[_[4567]](h<<4,16),r=_[t+4>>2]),(0|r)>=1)for(;c=(s=l<<4)+p|0,s=s+_[t+12>>2]|0,f=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=f,f=_[s+12>>2],_[c+8>>2]=_[s+8>>2],_[c+12>>2]=f,(0|(l=l+1|0))!=(0|r););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=p,a[t+16|0]=1,_[t+8>>2]=h,r=_[t+4>>2]}r=_[t+12>>2]+(r<<4)|0,_[r+12>>2]=S,y[r+8>>2]=T,y[r+4>>2]=x,y[r>>2]=A;break i}if(u=b(u/b(u-E)),v=b(v+b(b(T-v)*u)),m=b(m+b(b(x-m)*u)),u=b(g+b(b(A-g)*u)),(0|(r=_[t+4>>2]))==_[t+8>>2]&&!((0|r)>=(0|(p=r?r<<1:1)))){if(l=0,h=0,p&&(_[5585]=_[5585]+1,h=0|o[_[4567]](p<<4,16),r=_[t+4>>2]),(0|r)>=1)for(;c=S=(s=l<<4)+h|0,s=s+_[t+12>>2]|0,f=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=f,c=_[s+12>>2],_[S+8>>2]=_[s+8>>2],_[S+12>>2]=c,(0|(l=l+1|0))!=(0|r););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=h,a[t+16|0]=1,_[t+8>>2]=p,r=_[t+4>>2]}r=_[t+12>>2]+(r<<4)|0,_[r+12>>2]=0,y[r+8>>2]=v,y[r+4>>2]=m,y[r>>2]=u}else{if(!(E<b(0)))break t;if(u=b(u/b(u-E)),v=b(v+b(b(T-v)*u)),m=b(m+b(b(x-m)*u)),u=b(g+b(b(A-g)*u)),(0|(r=_[t+4>>2]))==_[t+8>>2]&&!((0|r)>=(0|(h=r?r<<1:1)))){if(l=0,p=0,h&&(_[5585]=_[5585]+1,p=0|o[_[4567]](h<<4,16),r=_[t+4>>2]),(0|r)>=1)for(;c=(s=l<<4)+p|0,s=s+_[t+12>>2]|0,f=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=f,f=_[s+12>>2],_[c+8>>2]=_[s+8>>2],_[c+12>>2]=f,(0|(l=l+1|0))!=(0|r););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=p,a[t+16|0]=1,_[t+8>>2]=h,r=_[t+4>>2]}if(r=_[t+12>>2]+(r<<4)|0,_[r+12>>2]=0,y[r+8>>2]=v,y[r+4>>2]=m,y[r>>2]=u,r=_[t+4>>2]+1|0,_[t+4>>2]=r,_[t+8>>2]==(0|r)&&!((0|r)>=(0|(h=r?r<<1:1)))){if(l=0,p=0,h&&(_[5585]=_[5585]+1,p=0|o[_[4567]](h<<4,16),r=_[t+4>>2]),(0|r)>=1)for(;c=(s=l<<4)+p|0,s=s+_[t+12>>2]|0,f=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=f,f=_[s+12>>2],_[c+8>>2]=_[s+8>>2],_[c+12>>2]=f,(0|(l=l+1|0))!=(0|r););(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[t+12>>2]=0),_[t+12>>2]=p,a[t+16|0]=1,_[t+8>>2]=h,r=_[t+4>>2]}r=_[t+12>>2]+(r<<4)|0,_[r+12>>2]=S,y[r+8>>2]=T,y[r+4>>2]=x,y[r>>2]=A}_[t+4>>2]=_[t+4>>2]+1}if((0|(R=R+1|0))==(0|C))break e;O=y[i+8>>2],k=y[i+4>>2],w=y[i>>2],l=_[e+12>>2],u=E,v=T,m=x,g=A}}function Ei(e,t,i,n,r,a){var s,l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=0,x=0,T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0);B=s=B-32|0,h=_[e+8>>2],c=y[h+60>>2],l=b(y[h+76>>2]-c),m=y[h- -64>>2],u=b(y[h+96>>2]-m),p=b(y[h+80>>2]-m),d=b(y[h+92>>2]-c),v=b(b(l*u)-b(p*d)),T=p,g=y[h+68>>2],p=b(y[h+100>>2]-g),f=b(y[h+84>>2]-g),u=b(b(T*p)-b(f*u)),d=b(b(f*d)-b(l*p));e:if((p=b(b(v*v)+b(b(u*u)+b(d*d))))>=b(14210854715202004e-30)&&(A=_[e+4>>2],T=b(y[A+32>>2]*y[A+16>>2]),l=b(T+a),a=b(b(1)/b(w(p))),p=b(u*a),u=y[t>>2],d=b(d*a),f=y[t+4>>2],S=b(b(p*b(u-c))+b(d*b(f-m))),m=b(v*a),c=y[t+8>>2],(a=b(S+b(m*b(c-g))))<b(0)&&(m=b(-m),d=b(-d),p=b(-p),a=b(-a)),a<l)){if(A=_[t+12>>2],_[s+24>>2]=_[t+8>>2],_[s+28>>2]=A,A=_[t+4>>2],_[s+16>>2]=_[t>>2],_[s+20>>2]=A,_[s+12>>2]=0,y[s+8>>2]=m,y[s+4>>2]=d,y[s>>2]=p,function(e,t,i){var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),_=b(0),d=b(0),m=b(0),v=b(0),g=b(0);return u=y[e+40>>2],l=y[e+24>>2],f=b(u-l),h=y[i+8>>2],d=y[e+32>>2],r=y[e+16>>2],s=b(d-r),o=y[t+4>>2],m=y[e+36>>2],c=y[e+20>>2],a=b(m-c),p=y[t>>2],_=b(b(h-l)*b(b(s*o)-b(a*p))),v=y[i>>2],n=a,a=y[t+8>>2],g=y[i+4>>2],f=b(_+b(b(b(v-r)*b(b(n*a)-b(f*o)))+b(b(g-c)*b(b(f*p)-b(s*a))))),n=l,l=y[e+8>>2],s=b(n-l),n=r,r=y[e>>2],_=b(n-r),n=c,c=y[e+4>>2],n=b(n-c),s=b(b(b(h-l)*b(b(_*o)-b(n*p)))+b(b(b(v-r)*b(b(n*a)-b(s*o)))+b(b(g-c)*b(b(s*p)-b(_*a))))),e=1,n=b(h-u),h=b(r-d),r=b(c-m),u=b(l-u),o=b(b(n*b(b(h*o)-b(r*p)))+b(b(b(v-d)*b(b(r*a)-b(u*o)))+b(b(g-m)*b(b(u*p)-b(h*a))))),f>b(0)&&!(o>b(0)^1|s>b(0)^1)||(e=s<=b(0)&f<=b(0)&o<=b(0)),e}(h+60|0,s,s+16|0))E=b(c-b(a*m)),C=b(f-b(a*d)),k=b(u-b(a*p)),S=b(l*l);else{if((0|o[_[_[h>>2]+100>>2]](h))<1)break e;for(S=b(l*l),A=0,h=0;x=_[e+8>>2],o[_[_[x>>2]+104>>2]](x,h,s+16|0,s),l=b(0),O=y[s+16>>2],a=b(y[t>>2]-O),f=b(y[s>>2]-O),R=y[s+20>>2],c=b(y[t+4>>2]-R),v=b(y[s+4>>2]-R),F=y[s+24>>2],u=b(y[t+8>>2]-F),g=b(y[s+8>>2]-F),(I=b(b(b(a*f)+b(c*v))+b(u*g)))>b(0)&&(I<(l=b(b(b(f*f)+b(v*v))+b(g*g)))?(l=b(I/l),u=b(u-b(g*l)),c=b(c-b(v*l)),a=b(a-b(f*l))):(u=b(u-g),c=b(c-v),a=b(a-f),l=b(1))),b(b(b(a*a)+b(c*c))+b(u*u))<S&&(k=b(O+b(f*l)),C=b(R+b(v*l)),A=1,E=b(F+b(g*l))),h=h+1|0,x=_[e+8>>2],(0|h)<(0|o[_[_[x>>2]+100>>2]](x)););if(x=0,!A)break e;c=y[t+8>>2],f=y[t+4>>2],u=y[t>>2]}a=b(u-k),u=b(f-C),c=b(c-E),(l=b(b(b(a*a)+b(u*u))+b(c*c)))<S&&(l>b(1.1920928955078125e-7)?(_[n+12>>2]=0,p=c,l=b(w(l)),c=b(b(1)/l),y[n+8>>2]=p*c,y[n+4>>2]=u*c,y[n>>2]=a*c,T=b(T-l)):(_[n+12>>2]=0,y[n+8>>2]=m,y[n+4>>2]=d,y[n>>2]=p),_[i+12>>2]=0,y[i+8>>2]=E,y[i+4>>2]=C,y[i>>2]=k,y[r>>2]=-T,x=1)}return B=s+32|0,x}function Ci(e,t,i){var n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0;e:{if(c=_[e+48>>2],n=_[t>>2],r=A((r=(n<<15^-1)+n|0)>>>10^r,9),!((h=c+-1&((r=((r^=r>>>6)<<11^-1)+r|0)>>>16^r))>>>0>=v[e+4>>2])&&-1!=(0|(r=_[_[e+12>>2]+(h<<2)>>2])))for(s=_[e+72>>2];;){if((0|n)==_[s+(r<<3)>>2])break e;if(-1==(0|(r=_[_[e+32>>2]+(r<<2)>>2])))break}if((0|c)==(0|(n=p=_[e+44>>2]))&&!((0|(n=c))>=(0|(s=n?n<<1:1)))){if(s?(_[5585]=_[5585]+1,l=0|o[_[4567]](s<<2,16),n=_[e+44>>2]):n=c,(0|n)>=1)for(r=0;_[(u=r<<2)+l>>2]=_[u+_[e+52>>2]>>2],(0|(r=r+1|0))!=(0|n););(r=_[e+52>>2])&&(d[e+56|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),n=_[e+44>>2]),_[e+52>>2]=0),_[e+52>>2]=l,_[e+48>>2]=s,a[e+56|0]=1}if(_[_[e+52>>2]+(n<<2)>>2]=_[i>>2],_[e+44>>2]=n+1,(0|(n=_[e- -64>>2]))==_[e+68>>2]&&!((0|n)>=(0|(i=n?n<<1:1)))){if(i?(_[5585]=_[5585]+1,l=0|o[_[4567]](i<<3,16),n=_[e+64>>2]):l=0,(0|n)>=1)for(r=0;u=(s=r<<3)+l|0,s=s+_[e+72>>2]|0,f=_[s+4>>2],_[u>>2]=_[s>>2],_[u+4>>2]=f,(0|(r=r+1|0))!=(0|n););(n=_[e+72>>2])&&(d[e+76|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+72>>2]=0),_[e+72>>2]=l,_[e+68>>2]=i,a[e+76|0]=1,n=_[e+64>>2]}return i=_[e+72>>2]+(n<<3)|0,n=_[t+4>>2],_[i>>2]=_[t>>2],_[i+4>>2]=n,_[e+64>>2]=_[e+64>>2]+1,(0|c)<_[e+48>>2]&&(function(e){var t,i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0;if(!((0|(t=_[e+4>>2]))>=(0|(n=_[e+48>>2])))){if(_[e+8>>2]>=(0|n))i=_[e+12>>2];else{r=t,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](n<<2,16),r=_[e+4>>2]),l=_[e+12>>2];t:{i:{if((0|r)>=1)for(;;)if(_[(c=s<<2)+i>>2]=_[l+c>>2],(0|(s=s+1|0))==(0|r))break i;if(!l)break t}d[e+16|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l))}_[e+12>>2]=i,a[e+16|0]=1,_[e+8>>2]=n}if(Pi((r=t<<2)+i|0,0,(c=n<<2)-r|0),_[e+4>>2]=n,(0|(l=_[e+24>>2]))<(0|n)){t:if(_[e+28>>2]>=(0|n))i=_[e+32>>2];else{s=0,r=l,i=0,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](c,16),r=_[e+24>>2]),u=_[e+32>>2];i:{if((0|r)>=1)for(;;)if(_[(h=s<<2)+i>>2]=_[u+h>>2],(0|(s=s+1|0))==(0|r))break i;if(!u){_[e+32>>2]=i,_[e+28>>2]=n,a[e+36|0]=1;break t}}d[e+36|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+32>>2]=i,a[e+36|0]=1,_[e+28>>2]=n}Pi((r=l<<2)+i|0,0,c-r|0)}if(_[e+24>>2]=n,(0|n)>=1&&(Pi(_[e+12>>2],255,c),Pi(_[e+32>>2],255,c)),!((0|t)<1))for(r=_[e+32>>2],l=_[e+72>>2],n=_[e+12>>2],s=0;i=_[l+(s<<3)>>2],i=A((i=(i<<15^-1)+i|0)>>>10^i,9),i=((i^=i>>>6)<<11^-1)+i|0,i=n+((_[e+48>>2]+-1&(i>>>16^i))<<2)|0,_[r+(s<<2)>>2]=_[i>>2],_[i>>2]=s,(0|t)!=(0|(s=s+1|0)););}}(e),t=_[t>>2],t=A((t=(t<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,h=_[e+48>>2]+-1&(t>>>16^t)),t=_[e+32>>2]+(p<<2)|0,e=_[e+12>>2]+(h<<2)|0,_[t>>2]=_[e>>2],void(_[e>>2]=p)}_[_[e+52>>2]+(r<<2)>>2]=_[i>>2]}function wi(e,t){var i,n=b(0),r=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=0;B=i=B+-64|0,p=_[t+192>>2],o[_[_[p>>2]+8>>2]](p,t+4|0,i+48|0,i+32|0),n=y[4561],s=b(y[i+48>>2]-n),y[i+48>>2]=s,l=b(y[i+52>>2]-n),y[i+52>>2]=l,c=b(y[i+56>>2]-n),y[i+56>>2]=c,r=b(n+y[i+32>>2]),y[i+32>>2]=r,u=b(n+y[i+36>>2]),y[i+36>>2]=u,h=b(n+y[i+40>>2]),y[i+40>>2]=h,3&d[t+204|0]|!d[e+44|0]|2!=_[t+252>>2]||(p=_[t+192>>2],o[_[_[p>>2]+8>>2]](p,t+68|0,i+16|0,i),l=b(y[i+16>>2]-n),y[i+16>>2]=l,c=b(y[i+20>>2]-n),y[i+20>>2]=c,r=b(y[i+24>>2]-n),y[i+24>>2]=r,u=b(n+y[i>>2]),y[i>>2]=u,h=b(n+y[i+4>>2]),y[i+4>>2]=h,n=b(n+y[i+8>>2]),y[i+8>>2]=n,l<(s=y[i+48>>2])&&(y[i+48>>2]=l,s=l),c<(l=y[i+52>>2])&&(y[i+52>>2]=c,l=c),r<(c=y[i+56>>2])&&(y[i+56>>2]=r,c=r),(r=y[i+28>>2])<y[i+60>>2]&&(y[i+60>>2]=r),(r=y[i+32>>2])<u&&(y[i+32>>2]=u,r=u),(u=y[i+36>>2])<h&&(y[i+36>>2]=h,u=h),(h=y[i+40>>2])<n&&(y[i+40>>2]=n,h=n),n=y[i+12>>2],y[i+44>>2]<n&&(y[i+44>>2]=n)),p=_[e+68>>2],1&a[t+204|0]||(s=b(r-s),r=b(s*s),s=b(u-l),r=b(r+b(s*s)),s=b(h-c),b(r+b(s*s))<b(999999995904))?o[_[_[p>>2]+16>>2]](p,_[t+188>>2],i+48|0,i+32|0,_[e+24>>2]):(4!=(-2&_[t+220>>2])&&(_[t+220>>2]=5),d[19960]||(t=_[e+72>>2])&&(a[19960]=1,o[_[_[t>>2]+44>>2]](t,6236),t=_[e+72>>2],o[_[_[t>>2]+44>>2]](t,6285),t=_[e+72>>2],o[_[_[t>>2]+44>>2]](t,6353),e=_[e+72>>2],o[_[_[e>>2]+44>>2]](e,6418))),B=i- -64|0}function ki(e,t,i,n,r,a,s,l,c,u){var h,p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),T=b(0),S=b(0),E=b(0),C=0,k=b(0),O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=0,K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0),ae=0,se=b(0),le=b(0),ce=b(0),ue=b(0),he=b(0),pe=0,fe=b(0),_e=0,de=0,me=0,ve=0,ye=0,ge=0,Ae=b(0),be=b(0),xe=0,Te=0,Se=0,Ee=0;B=h=B-384|0,M=y[t+36>>2],j=y[t+4>>2],T=y[t+20>>2],G=y[t+40>>2],re=y[t+8>>2],K=y[t+24>>2],v=y[e+8>>2],E=y[n+8>>2],g=y[e>>2],m=y[n>>2],D=y[e+4>>2],L=y[n+4>>2],f=y[t+32>>2],fe=y[t>>2],p=y[t+16>>2],k=b(y[i>>2]*b(.5)),y[h+372>>2]=k,d=b(y[i+4>>2]*b(.5)),y[h+376>>2]=d,R=b(y[i+8>>2]*b(.5)),y[h+380>>2]=R,P=b(y[a>>2]*b(.5)),y[h+360>>2]=P,F=b(y[a+4>>2]*b(.5)),y[h+364>>2]=F,S=b(y[a+8>>2]*b(.5)),y[h+368>>2]=S,g=b(m-g),m=b(L-D),v=b(E-v),E=b(b(b(fe*g)+b(p*m))+b(f*v)),J=y[r>>2],U=y[r+16>>2],W=y[r+32>>2],D=b(b(b(fe*J)+b(p*U))+b(f*W)),se=b(x(D)),I=y[r+4>>2],$=y[r+20>>2],ee=y[r+36>>2],L=b(b(b(fe*I)+b(p*$))+b(f*ee)),Ae=b(x(L)),te=y[r+8>>2],ie=y[r+24>>2],oe=y[r+40>>2],X=b(b(b(fe*te)+b(p*ie))+b(f*oe)),be=b(x(X));e:if(!((p=b(b(x(E))-b(b(b(k+b(P*se))+b(F*Ae))+b(S*be))))>b(0)||(V=b(b(b(j*te)+b(T*ie))+b(M*oe)),le=b(x(V)),Y=b(b(b(j*I)+b(T*$))+b(M*ee)),ne=b(x(Y)),q=b(b(b(j*J)+b(T*U))+b(M*W)),Q=b(x(q)),f=b(-34028234663852886e22),i=0,p>b(-34028234663852886e22)&&(C=E<b(0),f=p,O=t,i=1),M=b(b(b(g*j)+b(m*T))+b(v*M)),(p=b(b(x(M))-b(b(b(d+b(P*Q))+b(F*ne))+b(S*le))))>b(0)||(H=b(b(b(re*te)+b(K*ie))+b(G*oe)),ce=b(x(H)),z=b(b(b(re*I)+b(K*$))+b(G*ee)),ue=b(x(z)),N=b(b(b(re*J)+b(K*U))+b(G*W)),he=b(x(N)),p>f&&(O=t+4|0,C=M<b(0),f=p,i=2),T=b(b(b(g*re)+b(m*K))+b(v*G)),(p=b(b(x(T))-b(b(b(R+b(P*he))+b(F*ue))+b(S*ce))))>b(0)||(p>f&&(O=t+8|0,C=T<b(0),f=p,i=3),G=b(b(b(g*J)+b(m*U))+b(v*W)),(p=b(b(x(G))-b(P+b(b(R*he)+b(b(k*se)+b(d*Q))))))>b(0)||(p>f&&(C=G<b(0),f=p,O=r,i=4),G=b(b(b(g*I)+b(m*$))+b(v*ee)),(p=b(b(x(G))-b(F+b(b(R*ue)+b(b(k*Ae)+b(d*ne))))))>b(0)||(p>f&&(O=r+4|0,C=G<b(0),f=p,i=5),g=b(b(b(g*te)+b(m*ie))+b(v*oe)),(p=b(b(x(g))-b(S+b(b(R*ce)+b(b(k*be)+b(d*le))))))>b(0)||(p>f&&(O=r+8|0,C=g<b(0),f=p,i=6),W=b(b(T*q)-b(M*N)),$=b(Ae+b(9999999747378752e-21)),ee=b(he+b(9999999747378752e-21)),te=b(Q+b(9999999747378752e-21)),ie=b(be+b(9999999747378752e-21)),(p=b(b(x(W))-b(b(S*$)+b(b(b(d*ee)+b(R*te))+b(F*ie)))))>b(1.1920928955078125e-7)||(G=b(ue+b(9999999747378752e-21)),K=b(ne+b(9999999747378752e-21)),J=b(se+b(9999999747378752e-21)),m=b(0),oe=b(q*q),ne=b(b(N*N)+b(0)),(U=b(w(b(oe+ne))))>b(1.1920928955078125e-7)?(v=b(0),p=b(p/U),g=b(0),b(p*b(1.0499999523162842))>f&&(C=W<b(0),v=b(b(-N)/U),m=b(b(0)/U),O=0,i=7,f=p,g=b(q/U))):(v=b(0),g=b(0)),Q=b(b(T*Y)-b(M*z)),(p=b(b(x(Q))-b(b(S*J)+b(b(b(d*G)+b(R*K))+b(P*ie)))))>b(1.1920928955078125e-7)||(U=b(ce+b(9999999747378752e-21)),W=b(le+b(9999999747378752e-21)),le=b(Y*Y),ce=b(b(z*z)+b(0)),(I=b(w(b(le+ce))))>b(1.1920928955078125e-7)&&(p=b(p/I),b(p*b(1.0499999523162842))>f&&(C=Q<b(0),g=b(Y/I),v=b(b(-z)/I),m=b(b(0)/I),O=0,i=8,f=p)),Q=b(b(T*V)-b(M*H)),(p=b(b(x(Q))-b(b(F*J)+b(b(P*$)+b(b(d*U)+b(R*W))))))>b(1.1920928955078125e-7)||(ue=b(V*V),he=b(b(H*H)+b(0)),(I=b(w(b(ue+he))))>b(1.1920928955078125e-7)&&(p=b(p/I),b(p*b(1.0499999523162842))>f&&(C=Q<b(0),g=b(V/I),v=b(b(-H)/I),m=b(b(0)/I),O=0,i=9,f=p)),Q=b(b(E*N)-b(T*D)),(p=b(b(x(Q))-b(b(S*K)+b(b(b(k*ee)+b(R*J))+b(F*W)))))>b(1.1920928955078125e-7)||(se=b(D*D),(I=b(w(b(se+ne))))>b(1.1920928955078125e-7)&&(p=b(p/I),b(p*b(1.0499999523162842))>f&&(C=Q<b(0),g=b(b(-D)/I),v=b(b(0)/I),m=b(N/I),O=0,i=10,f=p)),I=b(b(E*z)-b(T*L)),(p=b(b(x(I))-b(b(S*te)+b(b(b(k*G)+b(R*$))+b(P*W)))))>b(1.1920928955078125e-7)||(ne=b(L*L),(N=b(w(b(ne+ce))))>b(1.1920928955078125e-7)&&(p=b(p/N),b(p*b(1.0499999523162842))>f&&(C=I<b(0),g=b(b(-L)/N),v=b(b(0)/N),m=b(z/N),O=0,i=11,f=p)),z=b(b(E*H)-b(T*X)),(p=b(b(x(z))-b(b(F*te)+b(b(P*K)+b(b(k*U)+b(R*ie))))))>b(1.1920928955078125e-7)||(N=b(X*X),(T=b(w(b(N+he))))>b(1.1920928955078125e-7)&&(p=b(p/T),b(p*b(1.0499999523162842))>f&&(C=z<b(0),g=b(b(-X)/T),v=b(b(0)/T),m=b(H/T),O=0,i=12,f=p)),H=b(b(M*D)-b(E*q)),(p=b(b(x(H))-b(b(S*G)+b(b(b(k*te)+b(d*J))+b(F*U)))))>b(1.1920928955078125e-7)||((T=b(w(b(b(oe+se)+b(0)))))>b(1.1920928955078125e-7)&&(p=b(p/T),b(p*b(1.0499999523162842))>f&&(C=H<b(0),g=b(b(0)/T),v=b(D/T),m=b(b(-q)/T),O=0,i=13,f=p)),T=b(b(M*L)-b(E*Y)),(p=b(b(x(T))-b(b(S*ee)+b(b(b(k*K)+b(d*$))+b(P*U)))))>b(1.1920928955078125e-7)||((S=b(w(b(b(le+ne)+b(0)))))>b(1.1920928955078125e-7)&&(p=b(p/S),b(p*b(1.0499999523162842))>f&&(C=T<b(0),g=b(b(0)/S),v=b(L/S),m=b(b(-Y)/S),O=0,i=14,f=p)),S=b(b(M*X)-b(E*V)),(k=b(b(x(S))-b(b(F*ee)+b(b(P*G)+b(b(k*W)+b(d*ie))))))>b(1.1920928955078125e-7))))))))))))))))){t:{i:{if((p=b(w(b(b(ue+N)+b(0)))))>b(1.1920928955078125e-7)&&(k=b(k/p),b(k*b(1.0499999523162842))>f))C=S<b(0),g=b(b(0)/p),v=b(X/p),m=b(b(-V)/p),i=15;else{if(!i)break e;if(O)break i;k=f}p=b(b(b(fe*m)+b(j*v))+b(re*g)),y[s>>2]=p,d=b(b(b(m*y[t+16>>2])+b(v*y[t+20>>2]))+b(g*y[t+24>>2])),y[s+4>>2]=d,m=b(b(b(m*y[t+32>>2])+b(v*y[t+36>>2]))+b(g*y[t+40>>2])),y[s+8>>2]=m;break t}p=y[O>>2],_[s>>2]=_[O>>2],d=y[O+16>>2],_[s+4>>2]=_[O+16>>2],m=y[O+32>>2],_[s+8>>2]=_[O+32>>2],k=f}if(C&&(y[s+8>>2]=-m,y[s+4>>2]=-d,y[s>>2]=-p),y[l>>2]=-k,(0|i)>=7)_[h+120>>2]=_[e+8>>2],a=_[e+4>>2],_[h+112>>2]=_[e>>2],_[h+116>>2]=a,d=b(0),F=y[h+112>>2],S=y[h+116>>2],T=f=y[h+372>>2],m=b(-f),f=y[s>>2],E=y[t>>2],p=y[s+4>>2],M=y[t+16>>2],g=y[s+8>>2],v=y[t+32>>2],m=b(b(b(f*E)+b(p*M))+b(g*v))>b(0)?T:m,I=b(y[h+120>>2]+b(m*v)),v=y[h+376>>2],T=y[t+4>>2],D=y[t+20>>2],L=y[t+36>>2],v=b(b(b(f*T)+b(p*D))+b(g*L))>b(0)?v:b(-v),I=b(I+b(v*L)),L=y[t+8>>2],X=y[t+24>>2],V=y[t+40>>2],R=b(b(b(f*L)+b(p*X))+b(g*V))>b(0)?R:b(-R),y[h+120>>2]=I+b(R*V),y[h+116>>2]=b(b(S+b(m*M))+b(v*D))+b(R*X),y[h+112>>2]=b(b(F+b(m*E))+b(v*T))+b(R*L),_[h+216>>2]=_[n+8>>2],e=_[n+4>>2],_[h+208>>2]=_[n>>2],_[h+212>>2]=e,T=b(-P),E=P,R=y[r>>2],P=y[r+16>>2],v=y[r+32>>2],m=b(b(b(f*R)+b(p*P))+b(g*v))>b(0)?T:E,T=b(y[h+216>>2]+b(m*v)),v=y[h+364>>2],F=y[r+4>>2],S=y[r+20>>2],E=y[r+36>>2],v=b(b(b(f*F)+b(p*S))+b(g*E))>b(0)?b(-v):v,I=b(T+b(v*E)),E=y[h+368>>2],D=b(-E),T=E,E=y[r+8>>2],M=y[r+24>>2],f=b(b(f*E)+b(p*M)),p=y[r+40>>2],f=b(f+b(g*p))>b(0)?D:T,p=b(I+b(f*p)),y[h+216>>2]=p,g=b(b(b(y[h+212>>2]+b(m*P))+b(v*S))+b(f*M)),y[h+212>>2]=g,f=b(b(b(y[h+208>>2]+b(m*R))+b(v*F))+b(f*E)),y[h+208>>2]=f,F=y[(e=(e=t)+((n=(0|(t=i+-7|0))/3|0)<<2)|0)>>2],t=(t-A(n,3)<<2)+r|0,m=y[t>>2],S=y[e+16>>2],v=y[t+16>>2],E=y[e+32>>2],R=y[t+32>>2],P=b(b(b(F*m)+b(S*v))+b(E*R)),(M=b(b(1)-b(P*P)))<=b(9999999747378752e-20)||(d=b(f-y[h+112>>2]),T=b(d*F),F=b(g-y[h+116>>2]),T=b(T+b(F*S)),S=b(p-y[h+120>>2]),d=b(b(b(b(T+b(S*E))*P)-b(b(b(d*m)+b(F*v))+b(S*R)))*b(b(1)/M))),y[h+216>>2]=p+b(d*R),y[h+212>>2]=g+b(d*v),y[h+208>>2]=f+b(d*m),f=y[s>>2],p=y[s+4>>2],g=y[s+8>>2],_[h+300>>2]=0,y[h+296>>2]=-g,y[h+292>>2]=-p,y[h+288>>2]=-f,o[_[_[u>>2]+16>>2]](u,h+288|0,h+208|0,k),_[c>>2]=i;else{v=y[s>>2],(0|i)<=3?(k=y[s+8>>2],g=y[s+4>>2],me=h+372|0,C=r,O=h+360|0):(v=b(-v),k=b(-y[s+8>>2]),g=b(-y[s+4>>2]),a=n,me=h+360|0,n=e,e=a,C=t,t=r,O=h+372|0),p=b(b(b(v*y[C>>2])+b(g*y[C+16>>2]))+b(k*y[C+32>>2])),y[h+344>>2]=p,d=b(b(b(v*y[C+4>>2])+b(g*y[C+20>>2]))+b(k*y[C+36>>2])),y[h+348>>2]=d,f=b(b(b(v*y[C+8>>2])+b(g*y[C+24>>2]))+b(k*y[C+40>>2])),y[h+352>>2]=f,f=b(x(f)),(d=b(x(d)))>(p=b(x(p)))?(r=(l=d>f)?1:2,a=0):(r=(1^(l=p>f))<<1,a=l),Te=a,f=y[(a=r<<2)+O>>2],p=b(f*y[a+C>>2]),d=b(y[n>>2]-y[e>>2]),Se=l?2:1,r=h,y[a+(h+344|0)>>2]<b(0)?(p=b(d+p),y[h+328>>2]=p,d=b(b(y[n+4>>2]-y[e+4>>2])+b(f*y[(16|a)+C>>2])),y[h+332>>2]=d,f=b(b(y[n+8>>2]-y[e+8>>2])+b(f*y[(32|a)+C>>2]))):(p=b(d-p),y[h+328>>2]=p,d=b(b(y[n+4>>2]-y[e+4>>2])-b(f*y[(16|a)+C>>2])),y[h+332>>2]=d,f=b(b(y[n+8>>2]-y[e+8>>2])-b(f*y[(32|a)+C>>2]))),y[r+336>>2]=f,r=1;t:{if((xe=((0|i)<4?-1:-4)+i|0)>>>0<=1){if(n=2,xe-1)break t}else n=1;r=0}m=y[32+(r=(a=r<<2)+t|0)>>2],R=y[r>>2],P=y[r+16>>2],F=y[(t=(n<<=2)+t|0)>>2],S=y[t+16>>2],E=y[t+32>>2],M=b(b(b(p*F)+b(d*S))+b(f*E)),D=y[(ve=(t=Te<<2)+C|0)>>2],L=y[ve+16>>2],X=y[ve+32>>2],T=b(b(b(F*D)+b(S*L))+b(E*X)),V=y[t+O>>2],Y=b(T*V),q=b(M+Y),H=y[(ye=(t=Se<<2)+C|0)>>2],z=y[ye+16>>2],N=y[ye+32>>2],S=b(b(b(F*H)+b(S*z))+b(E*N)),j=y[t+O>>2],F=b(S*j),y[h+316>>2]=q-F,E=b(b(b(p*R)+b(d*P))+b(f*m)),D=b(b(b(R*D)+b(P*L))+b(m*X)),p=b(V*D),d=b(E+p),R=b(b(b(R*H)+b(P*z))+b(m*N)),f=b(j*R),y[h+312>>2]=d-f,y[h+308>>2]=q+F,y[h+304>>2]=d+f,d=b(M-Y),y[h+300>>2]=d+F,p=b(E-p),y[h+296>>2]=p+f,y[h+292>>2]=d-F,y[h+288>>2]=p-f,_[h+280>>2]=_[a+me>>2],_[h+284>>2]=_[n+me>>2],t=4,a=h+208|0,O=h+288|0;t:{for(;;){i:{n:if((0|t)>=1){for(Ee=1-ge|0,p=y[(pe=(ae=ge<<2)+(h+280|0)|0)>>2],l=0,n=a,r=O;;){if(d=y[(Z=r+ae|0)>>2],p>(m=b(-d))){if(_[n>>2]=_[r>>2],_[n+4>>2]=_[r+4>>2],8&(l=l+1|0))break i;p=y[pe>>2],d=y[Z>>2],m=b(-d),n=n+8|0}if(_e=m<p,Z=r+8|0,m=y[(de=(0|t)>1?Z:O)+ae>>2],(0|_e)!=(p>b(-m)|0)){if(f=y[(_e=r)+(r=Ee<<2)>>2],y[n+r>>2]=f+b(b(b(-p)-d)*b(b(y[r+de>>2]-f)/b(m-d))),p=y[pe>>2],y[n+ae>>2]=-p,8&(l=l+1|0))break i;n=n+8|0}if(r=Z,!((0|(t=t+-1|0))>0))break}if(t=0,O=(h+208|0)==(0|a)?h+112|0:h+208|0,(0|l)<=0)break n;for(n=O,r=a;;){if((d=y[(Z=r+ae|0)>>2])<p){if(_[n>>2]=_[r>>2],_[n+4>>2]=_[r+4>>2],8&(t=t+1|0))break t;p=y[pe>>2],d=y[Z>>2],n=n+8|0}if(Z=r+8|0,(d<p|0)!=((m=y[(de=(0|l)>1?Z:a)+ae>>2])<p|0)){if(f=y[(_e=r)+(r=Ee<<2)>>2],y[n+r>>2]=f+b(b(p-d)*b(b(y[r+de>>2]-f)/b(m-d))),p=y[pe>>2],_[n+ae>>2]=_[pe>>2],8&(t=t+1|0))break t;n=n+8|0}if(r=Z,!((0|(l=l+-1|0))>0))break}}else O=(h+208|0)==(0|a)?h+112|0:h+208|0,t=0;if(a=(h+208|0)==(0|O)?h+112|0:h+208|0,2!=(0|(ge=ge+1|0)))continue;break t}break}O=a,t=l}if((h+208|0)!=(0|O)&&Xi(h+208|0,O,t<<3),!((0|t)<1)){for(f=b(b(1)/b(b(D*S)-b(T*R))),d=b(f*b(-T)),m=b(S*f),R=b(R*f),P=b(D*f),F=y[(xe<<2)+me>>2],S=y[(32|(n=Se<<2))+C>>2],T=y[(32|(r=Te<<2))+C>>2],D=y[(16|n)+C>>2],L=y[(16|r)+C>>2],X=y[ye>>2],V=y[ve>>2],r=0,Y=y[h+336>>2],q=y[h+332>>2],H=y[h+328>>2],n=0;a=(h+112|0)+A(r,12)|0,z=y[(l=n<<3)+(h+208|0)>>2],p=b(z-E),N=y[(h+208|0)+(4|l)>>2],j=b(N-M),f=b(b(m*p)-b(R*j)),p=b(b(d*p)+b(P*j)),j=b(b(H+b(f*V))+b(p*X)),y[a>>2]=j,re=b(b(q+b(f*L))+b(p*D)),y[a+4>>2]=re,f=b(b(Y+b(f*T))+b(p*S)),y[a+8>>2]=f,f=b(F-b(b(b(v*j)+b(g*re))+b(k*f))),y[(h+80|0)+(r<<2)>>2]=f,f>=b(0)&&(y[(a=r<<3)+(h+208|0)>>2]=z,y[(h+208|0)+(4|a)>>2]=N,r=r+1|0),(0|(n=n+1|0))!=(0|t););if(!((0|r)<1)){t:if((0|r)<=(0|(a=(0|(t=(0|r)<4?r:4))>1?t:1))){if((0|i)>=4){for(t=0;n=(h+112|0)+A(t,12)|0,p=y[s>>2],f=y[(h+80|0)+(t<<2)>>2],y[h+32>>2]=b(y[n>>2]+y[e>>2])-b(p*f),k=y[s+4>>2],y[h+36>>2]=b(y[n+4>>2]+y[e+4>>2])-b(f*k),g=y[s+8>>2],y[h+40>>2]=b(y[n+8>>2]+y[e+8>>2])-b(f*g),_[h+76>>2]=0,y[h+72>>2]=-g,y[h+68>>2]=-k,y[h+64>>2]=-p,o[_[_[u>>2]+16>>2]](u,h- -64|0,h+32|0,b(-f)),(0|r)!=(0|(t=t+1|0)););break t}for(t=0;n=(h+112|0)+A(t,12)|0,y[h+32>>2]=y[n>>2]+y[e>>2],y[h+36>>2]=y[n+4>>2]+y[e+4>>2],y[h+40>>2]=y[n+8>>2]+y[e+8>>2],f=y[s>>2],p=y[s+4>>2],k=y[s+8>>2],_[h+76>>2]=0,y[h+72>>2]=-k,y[h+68>>2]=-p,y[h+64>>2]=-f,o[_[_[u>>2]+16>>2]](u,h- -64|0,h+32|0,b(-y[(h+80|0)+(t<<2)>>2])),(0|r)!=(0|(t=t+1|0)););}else{if(n=0,(0|r)>=2)for(p=y[h+80>>2],t=1;p=(l=(f=y[(h+80|0)+(t<<2)>>2])>p)?f:p,n=l?t:n,(0|r)!=(0|(t=t+1|0)););for(Oi(r,h+208|0,a,n,h+32|0),l=(0|i)>3,t=0;n=_[(h+32|0)+(t<<2)>>2],r=(h+112|0)+A(n,12)|0,g=b(y[r>>2]+y[e>>2]),y[h+64>>2]=g,d=b(y[r+4>>2]+y[e+4>>2]),y[h+68>>2]=d,m=b(y[r+8>>2]+y[e+8>>2]),y[h+72>>2]=m,l?(p=y[s>>2],k=y[s+4>>2],f=y[s+8>>2],_[h+28>>2]=0,y[h+24>>2]=-f,y[h+20>>2]=-k,y[h+16>>2]=-p,_[h+12>>2]=0,E=f,f=y[(h+80|0)+(n<<2)>>2],y[h+8>>2]=m-b(E*f),y[h+4>>2]=d-b(k*f),y[h>>2]=g-b(p*f),o[_[_[u>>2]+16>>2]](u,h+16|0,h,b(-f))):(f=y[s>>2],p=y[s+4>>2],k=y[s+8>>2],_[h+28>>2]=0,y[h+24>>2]=-k,y[h+20>>2]=-p,y[h+16>>2]=-f,o[_[_[u>>2]+16>>2]](u,h+16|0,h- -64|0,b(-y[(h+80|0)+(n<<2)>>2]))),(t=t+1|0)>>>0<a>>>0;);}_[c>>2]=i}}}}B=h+384|0}function Oi(e,t,i,n,r){var o,a=0,s=b(0),l=b(0),c=0,u=b(0),h=b(0),p=0,f=0,d=b(0),m=b(0),v=b(0),g=b(0),A=b(0);B=o=B+-64|0;e:{t:{i:{n:{r:{if(!((c=e+-1|0)>>>0<=1)){if((0|c)>0)break r;break n}if(c-1)break i;l=b(b(y[t+4>>2]+y[t+12>>2])*b(.5)),s=b(b(y[t>>2]+y[t+8>>2])*b(.5));break t}for(;h=y[(p=(f=a<<3)+t|0)>>2],d=y[p+12>>2],m=y[p+8>>2],v=y[(4|f)+t>>2],u=b(b(h*d)-b(m*v)),s=b(s+u),l=b(l+b(b(d+v)*u)),g=b(g+b(b(h+m)*u)),(0|c)!=(0|(a=a+1|0)););}if(u=b(0xde0b6b000000000),A=s,h=y[(a=(e<<3)+t|0)-8>>2],d=y[t+4>>2],m=y[t>>2],v=y[a+-4>>2],s=b(b(h*d)-b(m*v)),A=b(A+s),b(x(A))>b(1.1920928955078125e-7)&&(u=b(b(1)/b(A*b(3)))),p=0,(0|e)<=0)break e;l=b(b(l+b(b(d+v)*s))*u),s=b(b(g+b(b(h+m)*s))*u);break t}l=y[t+4>>2],s=y[t>>2]}for(a=0;c=a<<3,y[(o+32|0)+(a<<2)>>2]=Ua(b(y[(4|c)+t>>2]-l),b(y[t+c>>2]-s)),(0|(a=a+1|0))!=(0|e););for(a=0;p=1,_[(a<<2)+o>>2]=1,(0|(a=a+1|0))!=(0|e););}if(_[(t=n<<2)+o>>2]=0,_[r>>2]=n,(0|i)>=2)for(u=b(b(6.2831854820251465)/b(0|i)),g=y[t+(o+32|0)>>2],c=1;;){if(_[r+4>>2]=n,r=r+4|0,t=n,p)for(h=(s=b(b(u*b(0|c))+g))>b(3.1415927410125732)?b(s+b(-6.2831854820251465)):s,a=0,s=b(1e9);_[(f=a<<2)+o>>2]&&(l=(l=b(x(b(y[f+(o+32|0)>>2]-h))))>b(3.1415927410125732)?b(b(6.2831854820251465)-l):l)<s&&(_[r>>2]=a,t=a,s=l),(0|(a=a+1|0))!=(0|e););if(_[(t<<2)+o>>2]=0,(0|(c=c+1|0))==(0|i))break}B=o- -64|0}function Ri(e,t,i,n,r){var a,s,l,c,u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0);B=a=B-48|0,c=d[e+16|0],s=_[(l=c?i:n)+12>>2],J=y[s+56>>2],j=y[s+52>>2],$=y[s+48>>2],i=_[(n=c?n:i)+12>>2],ee=y[i+56>>2],te=y[i+52>>2],ie=y[i+48>>2],n=_[n+4>>2],x=y[s+40>>2],f=y[s+8>>2],m=y[s+24>>2],v=y[s+36>>2],S=y[s+4>>2],w=y[s+20>>2],E=y[s+32>>2],R=y[i+40>>2],F=y[i+32>>2],I=y[i+36>>2],k=y[s>>2],M=y[i+8>>2],P=y[i>>2],D=y[i+4>>2],O=y[s+16>>2],z=y[i+24>>2],G=y[i+16>>2],U=y[i+20>>2],p=y[t+12>>2],A=y[t+8>>2],h=y[t+4>>2],u=y[t>>2],i=_[l+4>>2],X=y[i+60>>2],ne=y[i+56>>2],V=y[i+52>>2],_[a+28>>2]=0,T=b(b(2)/b(b(b(b(u*u)+b(h*h))+b(A*A))+b(p*p))),g=b(A*T),W=b(u*g),N=b(h*T),Y=b(p*N),L=b(W+Y),q=b(h*g),C=b(u*T),Q=b(p*C),T=b(q-Q),Z=b(u*C),K=b(h*N),h=b(b(1)-b(Z+K)),C=b(b(b(F*L)+b(I*T))+b(R*h)),H=b(b(b(P*L)+b(D*T))+b(M*h)),h=b(b(b(G*L)+b(U*T))+b(z*h)),T=b(-ne),y[a+24>>2]=b(b(b(b(v*C)+b(b(S*H)+b(w*h)))*T)-b(V*b(b(E*C)+b(b(k*H)+b(O*h)))))-b(X*b(b(x*C)+b(b(f*H)+b(m*h)))),h=b(q+Q),N=b(u*N),L=b(p*g),u=b(N-L),C=b(A*g),p=b(b(1)-b(Z+C)),A=b(b(R*h)+b(b(F*u)+b(I*p))),g=b(b(M*h)+b(b(P*u)+b(D*p))),u=b(b(z*h)+b(b(G*u)+b(U*p))),y[a+20>>2]=b(b(b(b(v*A)+b(b(S*g)+b(w*u)))*T)-b(V*b(b(E*A)+b(b(k*g)+b(O*u)))))-b(X*b(b(x*A)+b(b(f*g)+b(m*u)))),u=b(W-Y),p=b(N+L),h=b(b(1)-b(K+C)),A=b(b(R*u)+b(b(I*p)+b(F*h))),g=b(b(M*u)+b(b(D*p)+b(P*h))),u=b(b(z*u)+b(b(U*p)+b(G*h))),y[a+16>>2]=b(b(b(b(v*A)+b(b(S*g)+b(w*u)))*T)-b(V*b(b(E*A)+b(b(k*g)+b(O*u)))))-b(X*b(b(x*A)+b(b(f*g)+b(m*u)))),o[_[_[n>>2]+64>>2]](a+32|0,n,a+16|0),t=_[l+12>>2],T=y[t+48>>2],N=y[t+32>>2],L=y[t+16>>2],C=y[t+8>>2],H=y[t+4>>2],ne=y[t>>2],W=y[t+56>>2],Y=y[t+52>>2],q=y[t+40>>2],Q=y[t+36>>2],Z=y[t+24>>2],K=y[t+20>>2],re=y[i+68>>2],A=y[i+60>>2],X=y[i+52>>2],V=y[i+56>>2],u=y[a+40>>2],p=y[a+32>>2],h=y[a+36>>2],oe=y[_[e+12>>2]+848>>2],_[r+4>>2]=_[e+12>>2],g=b(-j),j=b(b(b(b(b(ie*f)+b(te*m))+b(ee*x))+b(b(b(m*g)-b(f*$))-b(x*J)))+b(b(b(p*b(b(b(P*f)+b(G*m))+b(F*x)))+b(h*b(b(b(D*f)+b(U*m))+b(I*x))))+b(u*b(b(b(M*f)+b(z*m))+b(R*x))))),E=b(b(b(b(b(ie*k)+b(te*O))+b(ee*E))+b(b(b(O*g)-b(k*$))-b(E*J)))+b(b(b(p*b(b(b(P*k)+b(G*O))+b(F*E)))+b(h*b(b(b(D*k)+b(U*O))+b(I*E))))+b(u*b(b(b(M*k)+b(z*O))+b(R*E))))),S=b(b(b(b(b(ie*S)+b(te*w))+b(ee*v))+b(b(b(w*g)-b(S*$))-b(v*J)))+b(b(b(p*b(b(b(P*S)+b(G*w))+b(F*v)))+b(h*b(b(b(D*S)+b(U*w))+b(I*v))))+b(u*b(b(b(M*S)+b(z*w))+b(R*v))))),(x=b(b(b(A*j)+b(b(X*E)+b(V*S)))-re))<oe&&(e=_[l+12>>2],w=y[e+24>>2],k=y[e+20>>2],O=y[e+40>>2],R=y[e+36>>2],F=y[e+16>>2],I=y[e+32>>2],f=y[i+60>>2],M=y[e+8>>2],m=y[i+52>>2],P=y[e>>2],v=y[i+56>>2],D=y[e+4>>2],_[a+28>>2]=0,y[a+16>>2]=b(b(P*m)+b(D*v))+b(M*f),y[a+24>>2]=b(b(m*I)+b(v*R))+b(f*O),y[a+20>>2]=b(b(m*F)+b(v*k))+b(f*w),_[a+12>>2]=0,f=b(E-b(X*x)),m=b(S-b(V*x)),v=b(j-b(A*x)),y[a+8>>2]=b(b(b(f*N)+b(m*Q))+b(v*q))+W,y[a+4>>2]=b(b(b(f*L)+b(m*K))+b(v*Z))+Y,y[a>>2]=b(b(C*v)+b(b(ne*f)+b(H*m)))+T,o[_[_[r>>2]+16>>2]](r,a+16|0,a,x)),B=a+48|0}function Fi(e){for(var t=0;_[e+4>>2]=0,_[e+8>>2]=0,(t=_[e+24>>2])&&Fi(t),e=_[e+28>>2];);}function Ii(e){Bi(e|=0)}function Mi(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,(e=_[t+12>>2])&&o[_[_[e>>2]+4>>2]](e),B=t+16|0}function Pi(e,t,i){var n=0,r=0,o=0,s=0;if(i&&(a[(n=e+i|0)-1|0]=t,a[0|e]=t,!(i>>>0<3||(a[n+-2|0]=t,a[e+1|0]=t,a[n+-3|0]=t,a[e+2|0]=t,i>>>0<7||(a[n+-4|0]=t,a[e+3|0]=t,i>>>0<9||(r=(n=0-e&3)+e|0,t=A(255&t,16843009),_[r>>2]=t,_[(n=(i=i-n&-4)+r|0)-4>>2]=t,i>>>0<9||(_[r+8>>2]=t,_[r+4>>2]=t,_[n+-8>>2]=t,_[n+-12>>2]=t,i>>>0<25||(_[r+24>>2]=t,_[r+20>>2]=t,_[r+16>>2]=t,_[r+12>>2]=t,_[n+-16>>2]=t,_[n+-20>>2]=t,_[n+-24>>2]=t,_[n+-28>>2]=t,(i=i-(s=4&r|24)|0)>>>0<32))))))))for(n=t,o=t,t=r+s|0;_[t+24>>2]=o,_[t+28>>2]=n,_[t+16>>2]=o,_[t+20>>2]=n,_[t+8>>2]=o,_[t+12>>2]=n,_[t>>2]=o,_[t+4>>2]=n,t=t+32|0,(i=i+-32|0)>>>0>31;);return e}function Di(e,t,i){var n,r=0,a=b(0),s=b(0),l=b(0),c=0,u=0,h=b(0),p=b(0),f=b(0),d=0,m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0);if(B=n=B-16|0,!((0|(u=_[e+844>>2]))<1)){for(;m=y[t+48>>2],x=y[t+8>>2],T=y[t>>2],S=y[t+4>>2],v=y[t+52>>2],E=y[t+24>>2],h=y[t+16>>2],C=y[t+20>>2],a=y[t+56>>2],s=y[t+40>>2],l=y[t+32>>2],g=y[t+36>>2],r=A(u=u+-1|0,208)+e|0,_[r- -64>>2]=0,f=a,a=y[r+4>>2],p=b(l*a),l=y[r+8>>2],w=s,s=y[r+12>>2],g=b(f+b(b(p+b(g*l))+b(w*s))),y[r+60>>2]=g,v=b(v+b(b(b(a*h)+b(l*C))+b(s*E))),y[r+56>>2]=v,m=b(m+b(b(b(a*T)+b(l*S))+b(s*x))),y[r+52>>2]=m,x=y[i+56>>2],T=y[i+40>>2],S=y[i+32>>2],E=y[i+36>>2],h=y[i+52>>2],C=y[i+24>>2],k=y[i+16>>2],O=y[i+20>>2],a=y[i+48>>2],s=y[i+8>>2],l=y[i>>2],p=y[i+4>>2],_[r+48>>2]=0,f=a,a=y[r+20>>2],R=b(l*a),l=y[r+24>>2],w=s,s=y[r+28>>2],p=b(f+b(b(R+b(p*l))+b(w*s))),y[r+36>>2]=p,h=b(h+b(b(b(a*k)+b(l*O))+b(s*C))),y[r+40>>2]=h,a=b(x+b(b(b(a*S)+b(l*E))+b(s*T))),y[r+44>>2]=a,y[r+84>>2]=b(b(b(m-p)*y[r+68>>2])+b(b(v-h)*y[r+72>>2]))+b(b(g-a)*y[r+76>>2]),_[r+168>>2]=_[r+168>>2]+1,(0|u)>0;);if(!((0|(t=_[e+844>>2]))<1))for(;;){u=4+(r=A(t=(i=t)+-1|0,208)+e|0)|0;e:if((a=y[r+84>>2])<=(l=y[e+848>>2]))if(s=b(y[r+36>>2]-b(y[r+52>>2]-b(y[r+68>>2]*a))),f=b(s*s),s=b(y[r+40>>2]-b(y[r+56>>2]-b(a*y[r+72>>2]))),a=b(y[r+44>>2]-b(y[r+60>>2]-b(a*y[r+76>>2]))),b(b(f+b(s*s))+b(a*a))>b(l*l)){if((c=_[r+120>>2])&&(d=_[4730])&&(o[d](c),_[r+120>>2]=0),(0|(c=_[(r=e)+844>>2]))!=(0|i)&&(Xi(u,4+(i=A(c+-1|0,208)+e|0)|0,208),_[i+168>>2]=0,_[i+120>>2]=0,_[i+132>>2]=0,_[i+136>>2]=0,_[i+140>>2]=0,_[i+144>>2]=0,i=_[e+844>>2]),i=i+-1|0,_[r+844>>2]=i,i)break e;if(!(i=_[4733]))break e;_[n+8>>2]=e,o[i](n+8|0)}else(i=_[4731])&&o[i](u,_[e+836>>2],_[e+840>>2]);else{if((c=_[r+120>>2])&&(d=_[4730])&&(o[d](c),_[r+120>>2]=0),(0|(c=_[(r=e)+844>>2]))!=(0|i)&&(Xi(u,4+(i=A(c+-1|0,208)+e|0)|0,208),_[i+168>>2]=0,_[i+120>>2]=0,_[i+132>>2]=0,_[i+136>>2]=0,_[i+140>>2]=0,_[i+144>>2]=0,i=_[e+844>>2]),i=i+-1|0,_[r+844>>2]=i,i)break e;if(!(i=_[4733]))break e;_[n+12>>2]=e,o[i](n+12|0)}if(!((0|t)>0))break}}B=n+16|0}function Bi(e){var t=0,i=0,n=0,r=0,o=0,a=0,s=0;e:if(e|=0){o=(n=e+-8|0)+(e=-8&(i=_[e+-4>>2]))|0;t:if(!(1&i)){if(!(3&i))break e;if((n=n-(i=_[n>>2])|0)>>>0<v[5611])break e;if(e=e+i|0,_[5612]==(0|n)){if(3==(3&(i=_[o+4>>2])))return _[5609]=e,_[o+4>>2]=-2&i,_[n+4>>2]=1|e,void(_[e+n>>2]=e)}else{if(i>>>0<=255){if(r=_[n+8>>2],i>>>=3,(0|(t=_[n+12>>2]))==(0|r)){_[5607]=_[5607]&Ka(i);break t}_[r+12>>2]=t,_[t+8>>2]=r;break t}if(s=_[n+24>>2],(0|n)==(0|(i=_[n+12>>2])))if((t=_[(r=n+20|0)>>2])||(t=_[(r=n+16|0)>>2])){for(;a=r,(t=_[(r=(i=t)+20|0)>>2])||(r=i+16|0,t=_[i+16>>2]););_[a>>2]=0}else i=0;else t=_[n+8>>2],_[t+12>>2]=i,_[i+8>>2]=t;if(!s)break t;r=_[n+28>>2];i:{if(_[(t=22732+(r<<2)|0)>>2]==(0|n)){if(_[t>>2]=i,i)break i;_[5608]=_[5608]&Ka(r);break t}if(_[s+(_[s+16>>2]==(0|n)?16:20)>>2]=i,!i)break t}if(_[i+24>>2]=s,(t=_[n+16>>2])&&(_[i+16>>2]=t,_[t+24>>2]=i),!(t=_[n+20>>2]))break t;_[i+20>>2]=t,_[t+24>>2]=i}}if(!(o>>>0<=n>>>0)&&1&(i=_[o+4>>2])){t:{if(!(2&i)){if(_[5613]==(0|o)){if(_[5613]=n,e=_[5610]+e|0,_[5610]=e,_[n+4>>2]=1|e,_[5612]!=(0|n))break e;return _[5609]=0,void(_[5612]=0)}if(_[5612]==(0|o))return _[5612]=n,e=_[5609]+e|0,_[5609]=e,_[n+4>>2]=1|e,void(_[e+n>>2]=e);e=(-8&i)+e|0;i:if(i>>>0<=255){if(i>>>=3,(0|(t=_[o+8>>2]))==(0|(r=_[o+12>>2]))){_[5607]=_[5607]&Ka(i);break i}_[t+12>>2]=r,_[r+8>>2]=t}else{if(s=_[o+24>>2],(0|o)==(0|(i=_[o+12>>2])))if((t=_[(r=o+20|0)>>2])||(t=_[(r=o+16|0)>>2])){for(;a=r,(t=_[(r=(i=t)+20|0)>>2])||(r=i+16|0,t=_[i+16>>2]););_[a>>2]=0}else i=0;else t=_[o+8>>2],_[t+12>>2]=i,_[i+8>>2]=t;if(s){r=_[o+28>>2];n:{if(_[(t=22732+(r<<2)|0)>>2]==(0|o)){if(_[t>>2]=i,i)break n;_[5608]=_[5608]&Ka(r);break i}if(_[s+(_[s+16>>2]==(0|o)?16:20)>>2]=i,!i)break i}_[i+24>>2]=s,(t=_[o+16>>2])&&(_[i+16>>2]=t,_[t+24>>2]=i),(t=_[o+20>>2])&&(_[i+20>>2]=t,_[t+24>>2]=i)}}if(_[n+4>>2]=1|e,_[e+n>>2]=e,_[5612]!=(0|n))break t;return void(_[5609]=e)}_[o+4>>2]=-2&i,_[n+4>>2]=1|e,_[e+n>>2]=e}if(e>>>0<=255)return i=22468+((e>>>=3)<<3)|0,(t=_[5607])&(e=1<<e)?e=_[i+8>>2]:(_[5607]=e|t,e=i),_[i+8>>2]=n,_[e+12>>2]=n,_[n+12>>2]=i,void(_[n+8>>2]=e);_[n+16>>2]=0,_[n+20>>2]=0,t=0,(r=e>>>8)&&(t=31,e>>>0>16777215||(t=r,t<<=r=r+1048320>>>16&8,t=28+((t=((t<<=s=t+520192>>>16&4)<<(a=t+245760>>>16&2)>>>15)-(a|r|s)|0)<<1|e>>>t+21&1)|0)),_[(i=n)+28>>2]=t,a=22732+(t<<2)|0;t:if((r=_[5608])&(i=1<<t)){r=e<<(31==(0|t)?0:25-(t>>>1)|0),i=_[a>>2];i:{for(;;){if(t=i,(-8&_[i+4>>2])==(0|e))break i;if(i=r>>>29,r<<=1,!(i=_[16+(a=t+(4&i)|0)>>2]))break}_[a+16>>2]=n,_[n+12>>2]=n,_[n+24>>2]=t,_[n+8>>2]=n;break t}e=_[t+8>>2],_[e+12>>2]=n,_[t+8>>2]=n,_[n+24>>2]=0,_[n+12>>2]=t,_[n+8>>2]=e}else _[5608]=i|r,_[a>>2]=n,_[n+12>>2]=n,_[n+24>>2]=a,_[n+8>>2]=n;if(e=_[5615]+-1|0,_[5615]=e,!e){for(n=22884;n=(e=_[n>>2])+8|0,e;);_[5615]=-1}}}}function Ni(e){var t;return B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],_[5585]=_[5585]+1,e=0|o[_[4567]](e,16),B=t+16|0,e}function Li(e){return 0|(e|=0)}function zi(e,t,i,n){var r;_[12+(r=B-16|0)>>2]=e,_[r+8>>2]=t,_[r+4>>2]=i,_[r>>2]=n,e=_[r+12>>2],y[e>>2]=y[_[r+8>>2]>>2],y[e+4>>2]=y[_[r+4>>2]>>2],y[e+8>>2]=y[_[r>>2]>>2],y[e+12>>2]=0}function Gi(e,t,i){32&d[0|e]||Wa(t,i,e)}function Ui(e,t,i,n,r){var o,a=0,s=0;if(B=o=B-256|0,!(73728&r|(0|i)<=(0|n))){if(Pi(o,t,(a=(r=i-n|0)>>>0<256)?r:256),t=e,s=o,!a){for(i=i-n|0;Gi(e,o,256),(r=r+-256|0)>>>0>255;);r=255&i}Gi(t,s,r)}B=o+256|0}function Xi(e,t,i){var n,r=0;if(i>>>0>=8192)F(0|e,0|t,0|i);else{n=e+i|0;e:if(3&(e^t))if(n>>>0<4)i=e;else if((r=n+-4|0)>>>0<e>>>0)i=e;else for(i=e;a[0|i]=d[0|t],a[i+1|0]=d[t+1|0],a[i+2|0]=d[t+2|0],a[i+3|0]=d[t+3|0],t=t+4|0,(i=i+4|0)>>>0<=r>>>0;);else{t:if((0|i)<1)i=e;else if(3&e)for(i=e;;){if(a[0|i]=d[0|t],t=t+1|0,(i=i+1|0)>>>0>=n>>>0)break t;if(!(3&i))break}else i=e;if(!((e=-4&n)>>>0<64||i>>>0>(r=e+-64|0)>>>0))for(;_[i>>2]=_[t>>2],_[i+4>>2]=_[t+4>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=_[t+12>>2],_[i+16>>2]=_[t+16>>2],_[i+20>>2]=_[t+20>>2],_[i+24>>2]=_[t+24>>2],_[i+28>>2]=_[t+28>>2],_[i+32>>2]=_[t+32>>2],_[i+36>>2]=_[t+36>>2],_[i+40>>2]=_[t+40>>2],_[i+44>>2]=_[t+44>>2],_[i+48>>2]=_[t+48>>2],_[i+52>>2]=_[t+52>>2],_[i+56>>2]=_[t+56>>2],_[i+60>>2]=_[t+60>>2],t=t- -64|0,(i=i- -64|0)>>>0<=r>>>0;);if(i>>>0>=e>>>0)break e;for(;_[i>>2]=_[t>>2],t=t+4|0,(i=i+4|0)>>>0<e>>>0;);}if(i>>>0<n>>>0)for(;a[0|i]=d[0|t],t=t+1|0,(0|n)!=(0|(i=i+1|0)););}}function Vi(e,t,i){return i?!function(e,t){var i=0,n=0;i=d[0|e],n=d[0|t];e:if(!(!i|(0|i)!=(0|n)))for(;;){if(n=d[t+1|0],!(i=d[e+1|0]))break e;if(t=t+1|0,e=e+1|0,(0|i)!=(0|n))break}return i-n|0}(_[e+4>>2],_[t+4>>2]):(0|e)==(0|t)}function Hi(e,t,i){}function ji(e){var t=0,i=0;for(e=e||1;!(t=So(e))&&(i=_[5606]);)o[i]();return t}function Wi(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+12>>2]}function Yi(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=1&function(e){var t,i;return B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],_[12+(i=B-16|0)>>2]=_[_[e+12>>2]+4>>2],B=t+16|0,31==_[i+12>>2]}(_[t+12>>2]),B=t+16|0,0|e}function qi(e,t,i){var n;e|=0,t=b(t),i|=0,B=n=B-16|0,_[n+12>>2]=e,y[n+8>>2]=t,_[n+4>>2]=i,e=_[n+12>>2],o[_[_[e>>2]+32>>2]](e,y[n+8>>2],_[n+4>>2]),B=n+16|0}function Qi(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],e=0|o[_[_[e>>2]+28>>2]](e),B=t+16|0,0|e}function Zi(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,_[_[e+12>>2]+12>>2]=_[e+8>>2],B=i+16|0}function Ki(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+24>>2]](e,_[i+8>>2]),B=i+16|0}function Ji(e){var t,i=0,n=0,r=0;B=t=B-16|0,h(e);e:if((i=2147483647&(r=s(0)))>>>0<=1061752794){if(i>>>0<964689920)break e;e=en(+e)}else if(i>>>0<=1081824209){if(n=+e,i>>>0<=1075235811){if((0|r)<=-1){e=b(-tn(n+1.5707963267948966));break e}e=tn(n+-1.5707963267948966);break e}e=en(-(((0|r)<0?3.141592653589793:-3.141592653589793)+n))}else if(i>>>0<=1088565717){if(n=+e,i>>>0<=1085271519){if((0|r)<=-1){e=tn(n+4.71238898038469);break e}e=b(-tn(n+-4.71238898038469));break e}e=en(((0|r)<0?6.283185307179586:-6.283185307179586)+n)}else if(i>>>0>=2139095040)e=b(e-e);else if((i=3&si(e,t+8|0))>>>0<=2){switch(i-1|0){default:e=en(g[t+8>>3]);break e;case 0:e=tn(g[t+8>>3]);break e;case 1:}e=en(-g[t+8>>3])}else e=b(-tn(g[t+8>>3]));return B=t+16|0,e}function $i(e){var t,i=b(0),n=0,r=0,o=0;B=t=B-16|0,h(e);e:if((n=2147483647&(r=s(0)))>>>0<=1061752794){if(i=b(1),n>>>0<964689920)break e;i=tn(+e)}else if(n>>>0<=1081824209){if(o=+e,n>>>0>=1075235812){i=b(-tn(((0|r)<0?3.141592653589793:-3.141592653589793)+o));break e}if((0|r)<=-1){i=en(o+1.5707963267948966);break e}i=en(1.5707963267948966-o)}else if(n>>>0<=1088565717){if(n>>>0>=1085271520){i=tn(+e+((0|r)<0?6.283185307179586:-6.283185307179586));break e}if((0|r)<=-1){i=en(-4.71238898038469-+e);break e}i=en(+e-4.71238898038469)}else if(i=b(e-e),!(n>>>0>=2139095040))if((n=3&si(e,t+8|0))>>>0<=2){switch(n-1|0){default:i=tn(g[t+8>>3]);break e;case 0:i=en(-g[t+8>>3]);break e;case 1:}i=b(-tn(g[t+8>>3]))}else i=en(g[t+8>>3]);return B=t+16|0,e=i}function en(e){var t,i;return b((i=(t=e*e)*e)*(t*t)*(2718311493989822e-21*t-.00019839334836096632)+(i*(.008333329385889463*t-.16666666641626524)+e))}function tn(e){var t;return b(-.499999997251031*(e*=e)+1+.04166662332373906*(t=e*e)+e*t*(2439044879627741e-20*e-.001388676377460993))}function nn(e){_[e>>2]=11296,_[e+12>>2]=-1,_[e+4>>2]=35,_[e+8>>2]=0,_[e+48>>2]=1025758986,_[e+24>>2]=1065353216,_[e+28>>2]=0,_[e+16>>2]=1065353216,_[e+20>>2]=1065353216,_[e>>2]=11424}function rn(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,(e=_[t+12>>2])&&Bi(e),B=t+16|0}function on(e,t,i,n,r){!function(e,t,i,n){var r,a,s=b(0),l=b(0),c=b(0),u=0,h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=0,T=b(0),S=0,E=b(0),C=b(0),k=0,O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=0,j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0),ae=b(0),se=b(0),le=b(0),ce=b(0),ue=b(0);for(B=r=B-272|0,_[e+56>>2]=0,_[r+264>>2]=0,_[r+268>>2]=0,_[r+256>>2]=0,_[r+260>>2]=0,u=_[t+12>>2],_[r+168>>2]=_[t+8>>2],_[r+172>>2]=u,u=_[t+4>>2],_[r+160>>2]=_[t>>2],_[r+164>>2]=u,u=_[t+28>>2],_[r+184>>2]=_[t+24>>2],_[r+188>>2]=u,u=_[t+20>>2],_[r+176>>2]=_[t+16>>2],_[r+180>>2]=u,u=_[t+44>>2],_[r+200>>2]=_[t+40>>2],_[r+204>>2]=u,u=_[t+36>>2],_[r+192>>2]=_[t+32>>2],_[r+196>>2]=u,u=_[t+60>>2],_[r+216>>2]=_[t+56>>2],_[r+220>>2]=u,u=_[t+52>>2],_[r+208>>2]=_[t+48>>2],_[r+212>>2]=u,u=_[t+76>>2],_[r+104>>2]=_[t+72>>2],_[r+108>>2]=u,u=_[t+68>>2],_[r+96>>2]=_[t+64>>2],_[r+100>>2]=u,u=_[t+92>>2],_[r+120>>2]=_[t+88>>2],_[r+124>>2]=u,u=_[t+84>>2],_[r+112>>2]=_[t+80>>2],_[r+116>>2]=u,u=_[t+108>>2],_[r+136>>2]=_[t+104>>2],_[r+140>>2]=u,u=_[t+100>>2],_[r+128>>2]=_[t+96>>2],_[r+132>>2]=u,u=_[t+124>>2],_[r+152>>2]=_[t+120>>2],_[r+156>>2]=u,u=_[t+116>>2],_[r+144>>2]=_[t+112>>2],_[r+148>>2]=u,s=y[r+212>>2],l=y[r+148>>2],I=b(b(s+l)*b(.5)),y[r+212>>2]=s-I,s=y[r+216>>2],c=y[r+152>>2],M=b(b(s+c)*b(.5)),y[r+216>>2]=s-M,y[r+148>>2]=l-I,y[r+152>>2]=c-M,s=y[r+208>>2],l=y[r+144>>2],P=b(b(s+l)*b(.5)),y[r+208>>2]=s-P,y[r+144>>2]=l-P,k=_[_[e+28>>2]+4>>2]+-17>>>0<=1?_[_[e+32>>2]+4>>2]+-17>>>0<2:k,m=y[e+44>>2],s=y[e+48>>2],_[4736]=_[4736]+1,_[e+68>>2]=0,_[e+12>>2]=0,_[e+16>>2]=0,_[e+4>>2]=0,_[e+8>>2]=1065353216,_[e+60>>2]=-1,_[e+64>>2]=0,a=d[e+52|0],ur(_[e+24>>2]),v=a?b(0):s,u=e+4|0,l=b(0xde0b6b000000000);;){f=y[t+32>>2],A=y[t+16>>2],T=y[t>>2],g=y[t+36>>2],C=y[t+20>>2],O=y[t+4>>2],R=y[t+40>>2],s=y[e+12>>2],p=y[t+24>>2],h=y[e+8>>2],F=y[t+8>>2],c=y[e+4>>2],_[r+252>>2]=0,E=p,p=b(-h),y[r+248>>2]=b(b(E*p)-b(c*F))-b(s*R),y[r+244>>2]=b(b(C*p)-b(c*O))-b(s*g),y[r+240>>2]=b(b(A*p)-b(c*T))-b(s*f),p=y[t+96>>2],f=y[t+64>>2],A=y[t+80>>2],T=y[t+100>>2],g=y[t+68>>2],C=y[t+84>>2],O=y[t+104>>2],R=y[t+72>>2],F=y[t+88>>2],_[r+236>>2]=0,y[r+232>>2]=b(b(c*R)+b(h*F))+b(s*O),y[r+228>>2]=b(b(c*g)+b(h*C))+b(s*T),y[r+224>>2]=b(b(c*f)+b(h*A))+b(s*p),sn(r+80|0,_[e+28>>2],r+240|0),sn(r- -64|0,_[e+32>>2],r+224|0),_[r+60>>2]=0,s=y[r+80>>2],h=y[r+84>>2],p=y[r+88>>2],c=b(b(b(b(s*y[r+192>>2])+b(h*y[r+196>>2]))+b(p*y[r+200>>2]))+y[r+216>>2]),y[r+56>>2]=c,A=b(b(b(b(s*y[r+176>>2])+b(h*y[r+180>>2]))+b(p*y[r+184>>2]))+y[r+212>>2]),y[r+52>>2]=A,T=b(b(b(b(s*y[r+160>>2])+b(h*y[r+164>>2]))+b(p*y[r+168>>2]))+y[r+208>>2]),y[r+48>>2]=T,_[r+44>>2]=0,s=y[r+64>>2],p=y[r+68>>2],f=y[r+72>>2],h=b(b(b(b(s*y[r+128>>2])+b(p*y[r+132>>2]))+b(f*y[r+136>>2]))+y[r+152>>2]),y[r+40>>2]=h,g=b(b(b(b(s*y[r+112>>2])+b(p*y[r+116>>2]))+b(f*y[r+120>>2]))+y[r+148>>2]),y[r+36>>2]=g,s=b(b(b(b(s*y[r+96>>2])+b(p*y[r+100>>2]))+b(f*y[r+104>>2]))+y[r+144>>2]),y[r+32>>2]=s,k&&(_[r+40>>2]=0,_[r+56>>2]=0,h=b(0),c=b(0)),_[r+28>>2]=0,c=b(c-h),y[r+24>>2]=c,s=b(T-s),y[r+16>>2]=s,h=b(A-g),y[r+20>>2]=h;e:{if((s=b(b(b(s*y[e+4>>2])+b(h*y[e+8>>2]))+b(c*y[e+12>>2])))>b(0)^1|b(s*s)>b(l*y[t+128>>2])^1){if(Re(_[e+24>>2],r+16|0)){S=1,_[e+68>>2]=1,x=2;break e}if((s=b(l-s))<=b(l*b(9.999999974752427e-7))){x=2,_[e+68>>2]=s<=b(0)?2:11,S=1;break e}if(Pe(_[e+24>>2],r+16|0,r+48|0,r+32|0),Fe(_[e+24>>2],r)){if(s=y[r>>2],c=b(s*s),s=y[r+4>>2],c=b(c+b(s*s)),s=y[r+8>>2],!((s=b(c+b(s*s)))<b(9.999999974752427e-7))){b(l-s)<=b(l*b(1.1920928955078125e-7))?(_[e+68>>2]=12,S=1,x=2):(x=_[r+4>>2],_[u>>2]=_[r>>2],_[u+4>>2]=x,x=_[r+12>>2],_[u+8>>2]=_[r+8>>2],_[u+12>>2]=x,H=_[e+64>>2],_[e+64>>2]=H+1,x=2,(0|H)>1e3||(4==_[_[e+24>>2]>>2]?_[e+68>>2]=13:x=0)),l=s;break e}x=_[r+4>>2],_[u>>2]=_[r>>2],_[u+4>>2]=x,x=_[r+12>>2],_[u+8>>2]=_[r+8>>2],_[u+12>>2]=x,_[e+68>>2]=6}else _[e+68>>2]=3}else _[e+68>>2]=10;S=1,x=2}if(x)break}s=b(0),c=a?b(0):m,h=b(c+v),k=0,x=0,1&S&&(Oe(_[e+24>>2],r+240|0,r+224|0),S=_[u+12>>2],_[r+264>>2]=_[u+8>>2],_[r+268>>2]=S,S=_[u+4>>2],_[r+256>>2]=_[u>>2],_[r+260>>2]=S,s=y[e+4>>2],p=y[e+8>>2],f=y[e+12>>2],(m=b(b(b(s*s)+b(p*p))+b(f*f)))<b(9.999999974752427e-7)&&(_[e+68>>2]=5),S=1,m>b(14210854715202004e-30)?(m=b(b(1)/b(w(m))),y[r+256>>2]=m*y[r+256>>2],y[r+260>>2]=m*y[r+260>>2],y[r+264>>2]=m*y[r+264>>2],A=b(w(l)),l=b(c/A),y[r+240>>2]=y[r+240>>2]-b(l*s),y[r+244>>2]=y[r+244>>2]-b(l*p),y[r+248>>2]=y[r+248>>2]-b(l*f),l=b(v/A),y[r+224>>2]=b(l*s)+y[r+224>>2],y[r+228>>2]=b(l*p)+y[r+228>>2],y[r+232>>2]=b(l*f)+y[r+232>>2],x=1,s=b(b(b(1)/m)-h)):(S=2,s=b(0)),_[e+60>>2]=S),!_[e+68>>2]|!_[e+72>>2]|!_[e+20>>2]||(k=b(h+s)<y[4563]);e:{t:{if(((S=1^x)||k)&&(k=_[e+20>>2])){if(_[4735]=_[4735]+1,_[u+8>>2]=0,_[u+12>>2]=0,_[u>>2]=0,_[u+4>>2]=0,o[_[_[k>>2]+8>>2]](k,_[e+24>>2],_[e+28>>2],_[e+32>>2],r+160|0,r+96|0,u,r+80|0,r- -64|0,n)){if(f=b(0),l=y[r+64>>2],m=y[r+80>>2],v=b(l-m),A=y[r+68>>2],T=y[r+84>>2],p=b(A-T),g=y[r+72>>2],C=y[r+88>>2],c=b(g-C),(h=b(b(b(v*v)+b(p*p))+b(c*c)))<=b(14210854715202004e-30)&&(f=y[e+16>>2],v=y[e+4>>2],p=y[e+8>>2],c=y[e+12>>2],h=b(b(b(v*v)+b(p*p))+b(c*c))),h>b(14210854715202004e-30)){if(_[e+60>>2]=3,l=b(m-l),E=b(l*l),l=b(T-A),E=b(E+b(l*l)),l=b(C-g),!((s>(l=b(-b(w(b(E+b(l*l))))))^-1)&(1^S))){n=_[r+92>>2],_[r+248>>2]=_[r+88>>2],_[r+252>>2]=n,n=_[r+76>>2],_[r+232>>2]=_[r+72>>2],_[r+236>>2]=n,n=_[r+84>>2],_[r+240>>2]=_[r+80>>2],_[r+244>>2]=n,n=_[r+68>>2],_[r+224>>2]=_[r+64>>2],_[r+228>>2]=n,y[r+268>>2]=f,s=b(b(1)/b(w(h))),y[r+264>>2]=c*s,y[r+260>>2]=p*s,y[r+256>>2]=v*s,s=l;break t}if(_[e+60>>2]=8,x)break t;break e}if(_[e+60>>2]=9,x)break t;break e}if(p=y[e+4>>2],f=y[e+8>>2],m=y[e+12>>2],b(b(b(p*p)+b(f*f))+b(m*m))>b(0)){if(l=b(y[r+80>>2]-y[r+64>>2]),g=b(l*l),l=b(y[r+84>>2]-y[r+68>>2]),g=b(g+b(l*l)),l=b(y[r+88>>2]-y[r+72>>2]),!(((l=b(b(w(b(g+b(l*l))))-h))<s^-1)&(1^S))){n=_[r+92>>2],_[r+248>>2]=_[r+88>>2],_[r+252>>2]=n,n=_[r+76>>2],_[r+232>>2]=_[r+72>>2],_[r+236>>2]=n,y[r+248>>2]=y[r+248>>2]-b(c*m),y[r+232>>2]=b(v*m)+y[r+232>>2],n=_[r+68>>2],_[r+224>>2]=_[r+64>>2],_[r+228>>2]=n,n=_[r+84>>2],_[r+240>>2]=_[r+80>>2],_[r+244>>2]=n,y[r+224>>2]=b(v*p)+y[r+224>>2],y[r+228>>2]=b(v*f)+y[r+228>>2],y[r+240>>2]=y[r+240>>2]-b(c*p),y[r+244>>2]=y[r+244>>2]-b(c*f),n=_[u+12>>2],_[r+264>>2]=_[u+8>>2],_[r+268>>2]=n,n=_[u+4>>2],_[r+256>>2]=_[u>>2],_[r+260>>2]=n,c=y[r+256>>2],h=y[r+260>>2],v=y[r+264>>2],s=b(b(1)/b(w(b(b(b(c*c)+b(h*h))+b(v*v))))),y[r+264>>2]=v*s,y[r+260>>2]=h*s,y[r+256>>2]=c*s,_[e+60>>2]=6,s=l;break t}if(_[e+60>>2]=5,x)break t;break e}if(x)break t;break e}if(!x)break e}b(s*s)<y[t+128>>2]^1&&!(s<b(0))||(n=_[r+260>>2],_[u>>2]=_[r+256>>2],_[u+4>>2]=n,n=_[r+268>>2],_[u+8>>2]=_[r+264>>2],_[u+12>>2]=n,y[e+56>>2]=s,v=y[t+32>>2],p=y[t>>2],f=y[t+16>>2],m=y[t+36>>2],A=y[t+4>>2],T=y[t+20>>2],c=y[t+40>>2],l=y[t+8>>2],h=y[t+24>>2],_[r+92>>2]=0,g=l,l=y[r+256>>2],E=h,h=y[r+260>>2],C=c,c=y[r+264>>2],y[r+88>>2]=b(b(g*l)+b(E*h))+b(C*c),y[r+84>>2]=b(b(l*A)+b(h*T))+b(c*m),y[r+80>>2]=b(b(p*l)+b(f*h))+b(v*c),v=y[t+96>>2],p=y[t+80>>2],f=y[t+64>>2],m=y[t+100>>2],A=y[t+84>>2],T=y[t+68>>2],g=y[t+104>>2],C=y[t+88>>2],O=y[t+72>>2],_[r+76>>2]=0,h=b(-h),y[r+72>>2]=b(b(C*h)-b(l*O))-b(c*g),y[r+68>>2]=b(b(A*h)-b(l*T))-b(c*m),y[r+64>>2]=b(b(p*h)-b(l*f))-b(c*v),sn(r+48|0,_[e+28>>2],r+80|0),sn(r+32|0,_[e+32>>2],r- -64|0),l=y[r+264>>2],C=y[r+216>>2],O=y[r+200>>2],R=y[r+192>>2],F=y[r+196>>2],j=y[r+152>>2],W=y[r+136>>2],Y=y[r+128>>2],q=y[r+132>>2],Q=y[r+212>>2],Z=y[r+184>>2],K=y[r+176>>2],J=y[r+180>>2],$=y[r+148>>2],ee=y[r+120>>2],te=y[r+112>>2],ie=y[r+116>>2],ne=y[r+208>>2],re=y[r+168>>2],v=y[r+56>>2],oe=y[r+160>>2],p=y[r+48>>2],ae=y[r+164>>2],f=y[r+52>>2],se=y[r+144>>2],le=y[r+104>>2],m=y[r+40>>2],ce=y[r+96>>2],A=y[r+32>>2],ue=y[r+100>>2],T=y[r+36>>2],h=y[r+260>>2],c=y[r+256>>2],D=y[t+32>>2],N=y[t+16>>2],L=y[t>>2],z=y[t+36>>2],G=y[t+20>>2],U=y[t+4>>2],X=y[t+40>>2],g=y[t+24>>2],V=y[t+8>>2],_[r+92>>2]=0,E=g,g=b(-h),y[r+88>>2]=b(b(E*g)-b(c*V))-b(l*X),y[r+84>>2]=b(b(G*g)-b(c*U))-b(l*z),y[r+80>>2]=b(b(N*g)-b(c*L))-b(l*D),D=y[t+96>>2],N=y[t+64>>2],L=y[t+80>>2],z=y[t+100>>2],G=y[t+68>>2],U=y[t+84>>2],X=y[t+104>>2],V=y[t+72>>2],E=y[t+88>>2],_[r+76>>2]=0,y[r+72>>2]=b(b(c*V)+b(h*E))+b(l*X),y[r+68>>2]=b(b(c*G)+b(h*U))+b(l*z),y[r+64>>2]=b(b(c*N)+b(h*L))+b(l*D),sn(r+48|0,_[e+28>>2],r+80|0),sn(r+32|0,_[e+32>>2],r- -64|0),g=b(b(b(b(b(Q+b(b(b(p*K)+b(f*J))+b(v*Z)))-b($+b(b(b(A*te)+b(T*ie))+b(m*ee))))*g)-b(c*b(b(ne+b(b(b(p*oe)+b(f*ae))+b(v*re)))-b(se+b(b(b(A*ce)+b(T*ue))+b(m*le))))))-b(l*b(b(C+b(b(b(p*R)+b(f*F))+b(v*O)))-b(j+b(b(b(A*Y)+b(T*q))+b(m*W)))))),l=y[r+48>>2],c=y[r+52>>2],h=y[r+56>>2],v=y[r+32>>2],p=y[r+36>>2],f=y[r+40>>2],m=y[r+256>>2],A=y[r+260>>2],E=b(b(b(b(b(b(b(l*y[r+160>>2])+b(c*y[r+164>>2]))+b(h*y[r+168>>2]))+y[r+208>>2])-b(b(b(b(v*y[r+96>>2])+b(p*y[r+100>>2]))+b(f*y[r+104>>2]))+y[r+144>>2]))*m)+b(b(b(b(b(b(l*y[r+176>>2])+b(c*y[r+180>>2]))+b(h*y[r+184>>2]))+y[r+212>>2])-b(b(b(b(v*y[r+112>>2])+b(p*y[r+116>>2]))+b(f*y[r+120>>2]))+y[r+148>>2]))*A)),c=b(b(b(b(b(l*y[r+192>>2])+b(c*y[r+196>>2]))+b(h*y[r+200>>2]))+y[r+216>>2])-b(b(b(b(v*y[r+128>>2])+b(p*y[r+132>>2]))+b(f*y[r+136>>2]))+y[r+152>>2])),l=y[r+264>>2],g>b(E+b(c*l))&&(_[e+60>>2]=10,y[r+264>>2]=-l,y[r+260>>2]=-A,y[r+256>>2]=-m),_[r+92>>2]=0,y[r+88>>2]=M+y[r+232>>2],y[r+84>>2]=I+y[r+228>>2],y[r+80>>2]=P+y[r+224>>2],o[_[_[i>>2]+16>>2]](i,r+256|0,r+80|0,s))}B=r+272|0}(e|=0,t|=0,i|=0,n|=0)}function an(e,t,i){var n,r,a,s,l,c,u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0);B=n=B-48|0,u=y[t+8>>2],h=y[t>>2],p=y[t+4>>2],_[i+12>>2]=0,f=u,u=b(b(1)/b(w(b(b(b(h*h)+b(p*p))+b(u*u))))),y[i+8>>2]=f*u,y[i+4>>2]=p*u,y[i>>2]=h*u,t=_[e+120>>2],s=n+32|0,r=_[e+124>>2],l=a=_[e>>2]+(r>>1)|0,c=i,1&r&&(t=_[t+_[a>>2]>>2]),o[t](s,l,c),u=y[i>>2],h=y[i+4>>2],p=y[i+8>>2],_[n+12>>2]=0,y[n+8>>2]=-p,y[n+4>>2]=-h,y[n>>2]=-u,function(e,t,i){var n,r,a,s=b(0),l=b(0),c=b(0),u=0,h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0);B=n=B-32|0,r=_[t+124>>2],a=_[t+4>>2]+(r>>1)|0,u=_[t+120>>2],u=1&r?_[_[a>>2]+u>>2]:u,h=y[t+16>>2],p=y[t+12>>2],f=y[t+32>>2],d=y[t+24>>2],m=y[t+28>>2],v=y[t+48>>2],g=y[t+40>>2],A=y[t+44>>2],x=y[t+8>>2],s=y[i+8>>2],l=y[i>>2],c=y[i+4>>2],_[n+12>>2]=0,y[n+8>>2]=b(b(l*g)+b(c*A))+b(s*v),y[n+4>>2]=b(b(l*d)+b(c*m))+b(s*f),y[n>>2]=b(b(x*l)+b(p*c))+b(h*s),o[u](n+16|0,a,n),h=y[t+104>>2],p=y[t- -64>>2],f=y[t+60>>2],d=y[t+108>>2],m=y[t+80>>2],v=y[t+72>>2],g=y[t+76>>2],A=y[t+112>>2],x=y[t+96>>2],T=y[t+88>>2],S=y[t+92>>2],E=y[t+56>>2],s=y[n+24>>2],l=y[n+16>>2],c=y[n+20>>2],_[e+12>>2]=0,y[e+8>>2]=A+b(b(b(l*T)+b(c*S))+b(s*x)),y[e+4>>2]=d+b(b(b(l*v)+b(c*g))+b(s*m)),y[e>>2]=h+b(b(b(l*E)+b(c*f))+b(s*p)),B=n+32|0}(n+16|0,e,n),u=y[n+16>>2],h=y[n+32>>2],p=y[n+20>>2],f=y[n+36>>2],d=y[n+24>>2],m=y[n+40>>2],_[i+28>>2]=0,y[i+24>>2]=m-d,y[i+20>>2]=f-p,y[i+16>>2]=h-u,B=n+48|0}function sn(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),a=b(0),s=0,l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=0,d=b(0),m=0,v=b(0),g=0;B=n=B-48|0;e:{t:if(!((s=_[t+4>>2])>>>0>13)){switch(s-1|0){case 7:_[e>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0;break e;default:p=y[t+36>>2],c=y[t+40>>2],l=y[i+4>>2],a=y[i+8>>2],u=y[t+32>>2],r=y[i>>2],_[e+12>>2]=0,y[e>>2]=r>=b(0)?u:b(-u),y[e+8>>2]=a>=b(0)?c:b(-c),y[e+4>>2]=l>=b(0)?p:b(-p);break e;case 0:c=y[i>>2],u=y[i+4>>2],r=y[i+8>>2],l=b(b(b(c*y[t+76>>2])+b(u*y[t+80>>2]))+b(r*y[t+84>>2])),a=b(b(b(c*y[t+92>>2])+b(u*y[t+96>>2]))+b(r*y[t+100>>2])),r=b(b(b(c*y[t+60>>2])+b(u*y[t- -64>>2]))+b(r*y[t+68>>2])),s=_[4+(t=(t+60|0)+((r<l?l<a?2:1:(r<a)<<1)<<4)|0)>>2],i=_[t>>2],t=_[t+8>>2],_[e+12>>2]=0,_[e+8>>2]=t,_[e>>2]=i,_[e+4>>2]=s;break e;case 12:s=_[t+44>>2],_[n+40>>2]=_[t+40>>2],_[n+44>>2]=s,s=_[t+36>>2],_[n+32>>2]=_[t+32>>2],_[n+36>>2]=s,_[n+16>>2]=_[i>>2],a=y[i+4>>2],_[n+20>>2]=_[i+4>>2],r=y[i+8>>2],i=_[i+8>>2],_[n+28>>2]=0,_[n+24>>2]=i,s=2,i=1,(t=(h=_[t+56>>2])+-1|0)>>>0>1||(t-1?(m=1,i=0):(r=a,m=2,s=1,i=0)),t=s,c=y[(n+32|0)+(h<<2)>>2],u=y[((s=i<<2)|n+32)>>2],l=y[(s|n+16)>>2],(a=b(w(b(b(l*l)+b(r*r)))))==b(0)?(y[(i<<2|n)>>2]=u,y[(i=m<<2)+n>>2]=y[i+(n+16|0)>>2]<b(0)?b(-c):c,_[(t<<2)+n>>2]=0,i=4|n,t=n+8|0):(a=b(u/a),y[(i<<2|n)>>2]=l*a,y[(i=m<<2)+n>>2]=y[i+(n+16|0)>>2]<b(0)?b(-c):c,y[(t<<2)+n>>2]=r*a,i=4|n,t=n+8|0),_[e>>2]=_[n>>2],_[e+4>>2]=_[i>>2],t=_[t>>2],_[e+12>>2]=0,_[e+8>>2]=t;break e;case 9:s=t,g=_[t+56>>2],c=y[32+(s+(t=g<<2)|0)>>2],u=y[i>>2],l=y[i+4>>2],a=y[i+8>>2],(r=b(b(b(u*u)+b(l*l))+b(a*a)))<b(14210854715202004e-30)?l=b(1):(r=b(b(1)/b(w(r))),p=b(a*r),d=b(l*r),l=b(u*r)),_[n+40>>2]=0,_[n+44>>2]=0,_[n+32>>2]=0,_[n+36>>2]=0,y[t+(n+32|0)>>2]=c,r=b(-0xde0b6b000000000),i=0,h=_[n+32>>2],s=_[n+36>>2],t=_[n+40>>2],(a=b(b(b(l*y[n+32>>2])+b(d*y[n+36>>2]))+b(p*y[n+40>>2])))>b(-0xde0b6b000000000)&&(m=t,f=s,r=a,i=h),_[n+40>>2]=0,_[n+44>>2]=0,_[n+32>>2]=0,_[n+36>>2]=0,y[(n+32|0)+(g<<2)>>2]=-c,h=_[n+40>>2],c=y[n+40>>2],s=_[n+32>>2],u=y[n+32>>2],t=_[n+36>>2],a=y[n+36>>2],_[e+12>>2]=0,g=h,h=b(b(b(l*u)+b(d*a))+b(p*c))>r,_[e+8>>2]=h?g:m,_[e+4>>2]=h?t:f,_[e>>2]=h?s:i;break e;case 4:if(v=y[t+16>>2],d=y[t+24>>2],p=y[t+20>>2],h=_[t+96>>2],f=-1,(0|(s=_[t+100>>2]))>=1)for(c=b(y[i>>2]*v),u=b(y[i+8>>2]*d),l=b(y[i+4>>2]*p),t=0,r=b(-34028234663852886e22);r=(i=(a=b(b(b(c*y[(i=h+(t<<4)|0)>>2])+b(l*y[i+4>>2]))+b(u*y[i+8>>2])))>r)?a:r,f=i?t:f,(0|s)!=(0|(t=t+1|0)););l=y[(t=h+(f<<4)|0)>>2],a=y[t+4>>2],r=y[t+8>>2],_[e+12>>2]=0,y[e+8>>2]=d*r,y[e+4>>2]=p*a,y[e>>2]=v*l;break e;case 1:case 2:case 5:case 6:case 8:case 10:case 11:break t;case 3:}if(v=y[t+16>>2],d=y[t+24>>2],p=y[t+20>>2],h=_[t+108>>2],f=-1,(0|(s=_[t+100>>2]))>=1)for(c=b(y[i>>2]*v),u=b(y[i+8>>2]*d),l=b(y[i+4>>2]*p),t=0,r=b(-34028234663852886e22);r=(i=(a=b(b(b(c*y[(i=h+(t<<4)|0)>>2])+b(l*y[i+4>>2]))+b(u*y[i+8>>2])))>r)?a:r,f=i?t:f,(0|s)!=(0|(t=t+1|0)););l=y[(t=h+(f<<4)|0)>>2],a=y[t+4>>2],r=y[t+8>>2],_[e+12>>2]=0,y[e+8>>2]=d*r,y[e+4>>2]=p*a,y[e>>2]=v*l;break e}o[_[_[t>>2]+68>>2]](e,t,i)}B=n+48|0}function ln(e){k()}function cn(e){e|=0;var t,i=b(0);return B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],i=b(o[_[_[e>>2]+48>>2]](e)),B=t+16|0,b(i)}function un(e,t){var i=b(0),n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0);!e|!(1&_[e+180>>2])||(v=y[e+172>>2],i=y[e+44>>2],c=y[e+12>>2],u=y[e+28>>2],r=y[e+36>>2],h=y[e+20>>2],g=y[e+168>>2],n=y[e+40>>2],p=y[e+8>>2],f=y[e+24>>2],o=y[e+164>>2],d=y[e+4>>2],_[t+12>>2]=0,m=r,a=o,o=y[t>>2],s=y[t+4>>2],r=y[t+8>>2],l=b(a*b(b(b(d*o)+b(h*s))+b(m*r))),A=n,n=b(g*b(b(b(o*p)+b(s*f))+b(r*n))),a=i,i=b(v*b(b(b(o*c)+b(s*u))+b(r*i))),y[t+8>>2]=b(b(m*l)+b(A*n))+b(a*i),y[t+4>>2]=b(b(h*l)+b(f*n))+b(u*i),y[t>>2]=b(b(d*l)+b(p*n))+b(c*i))}function hn(e,t){}function pn(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+44>>2]](e,y[i+8>>2]),B=i+16|0}function fn(e,t,i){var n,r=0;return B=n=B-256|0,(0|(r=_[t+212>>2]))>-1||(2&(r=_[t+252>>2])&&(2&d[204+(r=r<<30>>31&t)|0]||y[r+404>>2]!=b(0))?(r=_[e+8>>2],Pi(n+8|0,0,244),function(e,t,i){var n=0,r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0);t=t?_[t+252>>2]<<30>>31&t:0,_[e+64>>2]=0,_[e+68>>2]=0,_[e+144>>2]=0,_[e+148>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,_[e+80>>2]=0,_[e+84>>2]=0,_[e+72>>2]=0,_[e+76>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,_[e+160>>2]=0,_[e+164>>2]=0,_[e+168>>2]=0,_[e+172>>2]=0,t?(n=_[t+16>>2],_[e+8>>2]=_[t+12>>2],_[e+12>>2]=n,n=_[t+8>>2],_[e>>2]=_[t+4>>2],_[e+4>>2]=n,n=_[t+32>>2],_[e+24>>2]=_[t+28>>2],_[e+28>>2]=n,n=_[t+24>>2],_[e+16>>2]=_[t+20>>2],_[e+20>>2]=n,n=_[t+48>>2],_[e+40>>2]=_[t+44>>2],_[e+44>>2]=n,n=_[t+40>>2],_[e+32>>2]=_[t+36>>2],_[e+36>>2]=n,n=_[t+64>>2],_[e+56>>2]=_[t+60>>2],_[e+60>>2]=n,n=_[t+56>>2],_[e+48>>2]=_[t+52>>2],_[e+52>>2]=n,o=y[t+412>>2],a=y[t+416>>2],s=y[t+408>>2],r=y[t+404>>2],_[e+240>>2]=t,_[e+140>>2]=0,y[e+136>>2]=r*a,y[e+132>>2]=r*o,y[e+128>>2]=r*s,n=_[t+616>>2],_[e+104>>2]=_[t+612>>2],_[e+108>>2]=n,n=_[t+608>>2],_[e+96>>2]=_[t+604>>2],_[e+100>>2]=n,n=_[t+420>>2],_[e+120>>2]=_[t+416>>2],_[e+124>>2]=n,n=_[t+412>>2],_[e+112>>2]=_[t+408>>2],_[e+116>>2]=n,n=_[t+384>>2],_[e+184>>2]=_[t+380>>2],_[e+188>>2]=n,n=_[t+376>>2],_[e+176>>2]=_[t+372>>2],_[e+180>>2]=n,n=_[t+400>>2],_[e+200>>2]=_[t+396>>2],_[e+204>>2]=n,n=_[t+392>>2],_[e+192>>2]=_[t+388>>2],_[e+196>>2]=n,o=y[t+476>>2],a=y[t+480>>2],s=y[t+472>>2],r=y[t+404>>2],_[e+220>>2]=0,y[e+216>>2]=b(r*a)*i,y[e+212>>2]=b(r*o)*i,y[e+208>>2]=b(r*s)*i,s=y[t+340>>2],l=y[t+356>>2],c=y[t+328>>2],u=y[t+344>>2],h=y[t+360>>2],p=y[t+324>>2],r=y[t+488>>2],o=y[t+492>>2],a=y[t+496>>2],y[e+232>>2]=b(b(b(r*y[t+332>>2])+b(o*y[t+348>>2]))+b(a*y[t+364>>2]))*i,y[e+228>>2]=b(b(b(r*c)+b(o*u))+b(a*h))*i,y[e+224>>2]=b(b(b(p*r)+b(s*o))+b(l*a))*i):(_[e+4>>2]=0,_[e+8>>2]=0,_[e>>2]=1065353216,_[e+32>>2]=0,_[e+36>>2]=0,_[e+240>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,_[e+112>>2]=1065353216,_[e+116>>2]=1065353216,_[e+96>>2]=1065353216,_[e+100>>2]=1065353216,_[e+176>>2]=0,_[e+180>>2]=0,_[e+12>>2]=0,_[e+16>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,_[e+20>>2]=1065353216,_[e+44>>2]=0,_[e+48>>2]=0,_[e+40>>2]=1065353216,_[e+52>>2]=0,_[e+56>>2]=0,_[e+60>>2]=0,_[e+136>>2]=0,_[e+140>>2]=0,_[e+120>>2]=1065353216,_[e+124>>2]=0,_[e+104>>2]=1065353216,_[e+108>>2]=0,_[e+232>>2]=0,_[e+224>>2]=0,_[e+228>>2]=0,_[e+216>>2]=0,_[e+220>>2]=0,_[e+208>>2]=0,_[e+212>>2]=0,_[e+200>>2]=0,_[e+204>>2]=0,_[e+192>>2]=0,_[e+196>>2]=0,_[e+184>>2]=0,_[e+188>>2]=0),_[e+236>>2]=0}(We(e+4|0,n+8|0),t,i),_[t+212>>2]=r):(0|(r=_[e+188>>2]))>-1||(_[e+188>>2]=_[e+8>>2],Pi(n+8|0,0,244),t=We(e+4|0,n+8|0),_[t+88>>2]=0,_[t+92>>2]=0,_[t+80>>2]=0,_[t+84>>2]=0,_[t+72>>2]=0,_[t+76>>2]=0,_[t+64>>2]=0,_[t+68>>2]=0,_[t+144>>2]=0,_[t+148>>2]=0,_[t+152>>2]=0,_[t+156>>2]=0,_[t+160>>2]=0,_[t+164>>2]=0,_[t+168>>2]=0,_[t+172>>2]=0,_[t+4>>2]=0,_[t+8>>2]=0,_[t>>2]=1065353216,_[t+12>>2]=0,_[t+16>>2]=0,_[t+24>>2]=0,_[t+28>>2]=0,_[t+20>>2]=1065353216,_[t+32>>2]=0,_[t+36>>2]=0,_[t+44>>2]=0,_[t+48>>2]=0,_[t+40>>2]=1065353216,_[t+52>>2]=0,_[t+56>>2]=0,_[t+60>>2]=0,_[t+136>>2]=0,_[t+140>>2]=0,_[t+240>>2]=0,_[t+128>>2]=0,_[t+132>>2]=0,_[t+120>>2]=1065353216,_[t+124>>2]=0,_[t+112>>2]=1065353216,_[t+116>>2]=1065353216,_[t+104>>2]=1065353216,_[t+108>>2]=0,_[t+96>>2]=1065353216,_[t+100>>2]=1065353216,_[t+232>>2]=0,_[t+236>>2]=0,_[t+224>>2]=0,_[t+228>>2]=0,_[t+216>>2]=0,_[t+220>>2]=0,_[t+208>>2]=0,_[t+212>>2]=0,_[t+200>>2]=0,_[t+204>>2]=0,_[t+192>>2]=0,_[t+196>>2]=0,_[t+184>>2]=0,_[t+188>>2]=0,_[t+176>>2]=0,_[t+180>>2]=0,r=_[e+188>>2])),B=n+256|0,r}function _n(e){var t;return(0|(e=(t=_[5736])+e|0))<=-1?(_[5587]=48,-1):e>>>0<=(n.byteLength/65536|0)<<16>>>0||I(0|e)?(_[5736]=e,t):(_[5587]=48,-1)}function dn(e){var t,i,n=0,r=0,o=0,a=b(0);return B=t=B-16|0,r=n=_[e+12>>2],i=_[e+8>>2],(0|n)>0||(0|n)>=0&&!(i>>>0<0)?a=b(b(b(+(i>>>0)+4294967296*+(r>>>0))*b(0x10000000000000000))+b(+v[e>>2]+4294967296*+v[e+4>>2])):(o=_[e+4>>2],e=n=_[e>>2],_[t>>2]=0-e,_[t+4>>2]=0-(o+(0<e>>>0)|0),r^=-1,(n=(e=!(e|o))+(o=-1^i)|0)>>>0<o>>>0&&(r=r+1|0),_[(e=t)+8>>2]=n,_[e+12>>2]=r,a=b(-dn(e))),B=t+16|0,a}function mn(e,t){var i,n,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0;return(0|(i=_[e+16>>2]))!=(0|(o=_[t+16>>2]))?i-o|0:i?(l=_[e+4>>2],u=_[t+8>>2],p=Qa(h=_[t+12>>2],0,m=_[e>>2],0),c=N,h=Qa(h,a,l,0),o=N+s|0,s=r=h+c|0,r=r>>>0<h>>>0?o+1|0:o,l=Qa(u,h=0,l,a),(a=(o=s)+(s=N)|0)>>>0<s>>>0&&(r=r+1|0),o=a,s=r,a=0,(r=l+p|0)>>>0<l>>>0&&(a=a+1|0),p=a,a=a+o|0,o=s,o=a>>>0<p>>>0?o+1|0:o,s=a,a=r,p=0,u=Qa(m,f,u,h),r=N+r|0,r=(l=p+u|0)>>>0<u>>>0?r+1|0:r,n=l,u=l,l=r,(r=s+(a=(0|a)==(0|r)&u>>>0<p>>>0|r>>>0<a>>>0)|0)>>>0<a>>>0&&(o=o+1|0),p=r,u=o,h=r,m=o,a=_[e+8>>2],e=_[e+12>>2],r=_[t>>2],f=a,s=Qa(c=_[t+4>>2],o=0,a,0),t=N,d=e,c=Qa(c,o,e,a=0),o=N,o=(e=t+c|0)>>>0<c>>>0?o+1|0:o,t=e,c=r,e=Qa(r,0,d,a),r=o,a=r=(t=(d=N)+t|0)>>>0<d>>>0?r+1|0:r,o=0,(r=e+s|0)>>>0<e>>>0&&(o=o+1|0),d=o,s=o+t|0,o=a,o=s>>>0<d>>>0?o+1|0:o,t=s,s=-1,a=o,d=t,t=0,f=Qa(c,0,f,0),o=r,r=r+N|0,r=(e=t+f|0)>>>0<f>>>0?r+1|0:r,f=e,c=e,e=r,(o=d+(t=(0|o)==(0|r)&c>>>0<t>>>0|r>>>0<o>>>0)|0)>>>0<t>>>0&&(a=a+1|0),t=a,(0|a)==(0|m)&h>>>0<(r=o)>>>0|m>>>0<a>>>0||(s=1,(0|t)==(0|u)&p>>>0>o>>>0|u>>>0>t>>>0||(s=-1,(0|e)==(0|l)&n>>>0<f>>>0|l>>>0<e>>>0||(s=(0|e)==(0|l)&n>>>0>f>>>0|l>>>0>e>>>0))),A(s,i)):0}function vn(e){var t;B=t=B-16|0,_[t+12>>2]=e,function(e){var t,i;B=t=B-16|0,_[t+12>>2]=e,i=B-16|0,e=_[t+12>>2],_[i+12>>2]=e,tr(e,_[_[i+12>>2]+4>>2]),er(e),$o(e),B=t+16|0}(_[t+12>>2]),B=t+16|0}function yn(e,t){var i=0,n=0,r=0,s=0,l=0,c=0;if(d[e+164|0]){if((0|(i=_[e+128>>2]))==_[e+132>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),i=_[e+128>>2]),n=_[e+136>>2];e:{t:{if((0|i)>=1)for(;;)if(_[(c=l<<2)+s>>2]=_[n+c>>2],(0|(l=l+1|0))==(0|i))break t;if(!n)break e}d[e+140|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+136>>2]=0,i=_[e+128>>2]}_[e+136>>2]=s,_[e+132>>2]=r,a[e+140|0]=1}return n=i<<2,i=_[e+136>>2],_[n+i>>2]=t,_[e+128>>2]=_[e+128>>2]+1,void(_[_[e+32>>2]+4>>2]=i)}if((0|(i=_[e+148>>2]))==_[e+152>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<1,16),i=_[e+148>>2]),n=_[e+156>>2];e:{t:{if((0|i)>=1)for(;;)if(f[(c=l<<1)+s>>1]=m[n+c>>1],(0|(l=l+1|0))==(0|i))break t;if(!n)break e}d[e+160|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),i=_[e+148>>2]),_[e+156>>2]=0}_[e+156>>2]=s,_[e+152>>2]=r,a[e+160|0]=1}s=_[e+156>>2],f[s+(i<<1)>>1]=t,_[e+148>>2]=i+1,_[_[e+32>>2]+4>>2]=s}function gn(e,t,i){var n,r;return e|=0,t|=0,n=0|o[_[_[(i|=0)>>2]+40>>2]](i,e),r=0|o[_[_[i>>2]+28>>2]](i,n),_[t>>2]=r,r&&o[_[_[i>>2]+48>>2]](i,n),e=_[e+4>>2],_[t+8>>2]=0,_[t+4>>2]=e,11238}function An(e,t){var i,n=0,r=b(0);B=i=B+-64|0,_[i+60>>2]=e,_[i+56>>2]=t,e=B-16|0,t=_[i+60>>2],_[e+12>>2]=t,r=y[_[e+12>>2]>>2],_[12+(e=B-16|0)>>2]=t+16,r=b(r+y[_[e+12>>2]+4>>2]),_[12+(e=B-16|0)>>2]=t+32,y[i+52>>2]=r+y[_[e+12>>2]+8>>2],y[i+52>>2]>b(0)?(y[12+(e=B-16|0)>>2]=y[i+52>>2]+b(1),y[i+28>>2]=w(y[e+12>>2]),y[i+44>>2]=y[i+28>>2]*b(.5),y[i+28>>2]=b(.5)/y[i+28>>2],_[12+(e=B-16|0)>>2]=t+32,r=y[_[e+12>>2]+4>>2],_[12+(e=B-16|0)>>2]=t+16,y[i+32>>2]=b(r-y[_[e+12>>2]+8>>2])*y[i+28>>2],_[12+(e=B-16|0)>>2]=t,r=y[_[e+12>>2]+8>>2],_[12+(e=B-16|0)>>2]=t+32,y[i+36>>2]=b(r-y[_[e+12>>2]>>2])*y[i+28>>2],_[12+(e=B-16|0)>>2]=t+16,r=y[_[e+12>>2]>>2],_[12+(e=B-16|0)>>2]=t,y[i+40>>2]=b(r-y[_[e+12>>2]+4>>2])*y[i+28>>2]):(e=i,_[12+(n=B-16|0)>>2]=t,r=y[_[n+12>>2]>>2],_[12+(n=B-16|0)>>2]=t+16,r<y[_[n+12>>2]+4>>2]?(_[12+(n=B-16|0)>>2]=t+16,r=y[_[n+12>>2]+4>>2],_[12+(n=B-16|0)>>2]=t+32,n=r<y[_[n+12>>2]+8>>2]?2:1):(_[12+(n=B-16|0)>>2]=t,r=y[_[n+12>>2]>>2],_[12+(n=B-16|0)>>2]=t+32,n=r<y[_[n+12>>2]+8>>2]?2:0),_[e+24>>2]=n,_[i+20>>2]=(_[i+24>>2]+1|0)%3,_[i+16>>2]=(_[i+24>>2]+2|0)%3,_[12+(e=B-16|0)>>2]=t+(_[i+24>>2]<<4),r=y[_[e+12>>2]+(_[i+24>>2]<<2)>>2],_[12+(e=B-16|0)>>2]=t+(_[i+20>>2]<<4),r=b(r-y[_[e+12>>2]+(_[i+20>>2]<<2)>>2]),_[12+(e=B-16|0)>>2]=t+(_[i+16>>2]<<4),y[12+(n=B-16|0)>>2]=b(r-y[_[e+12>>2]+(_[i+16>>2]<<2)>>2])+b(1),y[i+12>>2]=w(y[n+12>>2]),y[(e=i+32|0)+(_[i+24>>2]<<2)>>2]=y[i+12>>2]*b(.5),y[i+12>>2]=b(.5)/y[i+12>>2],_[12+(n=B-16|0)>>2]=t+(_[i+16>>2]<<4),r=y[_[n+12>>2]+(_[i+20>>2]<<2)>>2],_[12+(n=B-16|0)>>2]=t+(_[i+20>>2]<<4),y[i+44>>2]=b(r-y[_[n+12>>2]+(_[i+16>>2]<<2)>>2])*y[i+12>>2],_[12+(n=B-16|0)>>2]=t+(_[i+20>>2]<<4),r=y[_[n+12>>2]+(_[i+24>>2]<<2)>>2],_[12+(n=B-16|0)>>2]=t+(_[i+24>>2]<<4),y[e+(_[i+20>>2]<<2)>>2]=b(r+y[_[n+12>>2]+(_[i+20>>2]<<2)>>2])*y[i+12>>2],_[12+(n=B-16|0)>>2]=t+(_[i+16>>2]<<4),r=y[_[n+12>>2]+(_[i+24>>2]<<2)>>2],_[12+(n=B-16|0)>>2]=t+(_[i+24>>2]<<4),y[e+(_[i+16>>2]<<2)>>2]=b(r+y[_[n+12>>2]+(_[i+16>>2]<<2)>>2])*y[i+12>>2]),e=i+32|0,sa(_[i+56>>2],e,e+4|0,e+8|0,e+12|0),B=i- -64|0}function bn(e,t,i,n,r,o,a){var s,l,c=b(0),u=b(0),h=0,p=0,f=b(0),d=b(0),m=b(0);if(s=B-16|0,_[n>>2]=2139095039,h=-8388609,_[r>>2]=-8388609,l=_[e+8>>2],c=b(-34028234663852886e22),!((0|l)<1)){for(h=0;p=_[e+16>>2]+(h<<4)|0,c=y[p>>2],u=y[p+4>>2],f=y[p+8>>2],d=b(b(b(b(c*y[t>>2])+b(u*y[t+4>>2]))+b(f*y[t+8>>2]))+y[t+48>>2]),m=b(b(b(b(c*y[t+16>>2])+b(u*y[t+20>>2]))+b(f*y[t+24>>2]))+y[t+52>>2]),u=b(b(b(b(c*y[t+32>>2])+b(u*y[t+36>>2]))+b(f*y[t+40>>2]))+y[t+56>>2]),(c=b(b(b(d*y[i>>2])+b(m*y[i+4>>2]))+b(u*y[i+8>>2])))<y[n>>2]&&(y[n>>2]=c,_[o+12>>2]=0,y[o+8>>2]=u,y[o+4>>2]=m,y[o>>2]=d),c>y[r>>2]&&(y[r>>2]=c,_[a+12>>2]=0,y[a+8>>2]=u,y[a+4>>2]=m,y[a>>2]=d),(0|l)!=(0|(h=h+1|0)););h=_[r>>2],c=y[r>>2]}(u=y[n>>2])>c&&(_[n>>2]=h,y[r>>2]=u,e=_[o+12>>2],_[s+8>>2]=_[o+8>>2],_[s+12>>2]=e,e=_[o+4>>2],_[s>>2]=_[o>>2],_[s+4>>2]=e,e=_[a+12>>2],_[o+8>>2]=_[a+8>>2],_[o+12>>2]=e,e=_[a+4>>2],_[o>>2]=_[a>>2],_[o+4>>2]=e,e=_[s+12>>2],_[a+8>>2]=_[s+8>>2],_[a+12>>2]=e,e=_[s+4>>2],_[a>>2]=_[s>>2],_[a+4>>2]=e)}function xn(e,t,i,n,r,s,l,c,u,h,p,f){var m,v=0,g=0,x=0,T=0,S=0;if(v=m=_[e+68>>2],(0|m)==_[e+72>>2]&&(v=m,!((0|m)>=(0|(x=m?m<<1:1))))){if(x?(_[5585]=_[5585]+1,T=0|o[_[4567]](A(x,152),16),v=_[e+68>>2]):v=m,(0|(g=v))>=1)for(v=0;Xi((S=A(v,152))+T|0,_[e+76>>2]+S|0,152),(0|g)!=(0|(v=v+1|0)););(g=_[e+76>>2])&&(d[e+80|0]&&g&&(_[5586]=_[5586]+1,o[_[4568]](g)),_[e+76>>2]=0),_[e+76>>2]=T,_[e+72>>2]=x,a[e+80|0]=1,v=_[e+68>>2]}_[e+68>>2]=v+1,g=_[e+76>>2]+A(m,152)|0,_[g+140>>2]=r,function(e,t,i,n,r,o,a,s,l,c,u,h){var p,f,m,v,g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),B=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0);m=_[e+16>>2],p=_[240+(m+A(r,244)|0)>>2],f=_[240+(A(n,244)+m|0)>>2],_[t+148>>2]=r,_[t+144>>2]=n,V=y[o+84>>2],v=_[o+84>>2],_[t+132>>2]=0,_[t+104>>2]=v,_[t+96>>2]=0,_[t+100>>2]=0,f?(e=_[i+4>>2],_[t+16>>2]=_[i>>2],_[t+20>>2]=e,e=_[i+12>>2],_[t+24>>2]=_[i+8>>2],_[t+28>>2]=e,x=y[a+8>>2],S=y[a>>2],E=y[a+4>>2],_[t+12>>2]=0,O=y[t+20>>2],D=y[t+16>>2],R=b(b(S*O)-b(E*D)),y[t+8>>2]=R,B=y[t+24>>2],S=b(b(x*D)-b(S*B)),y[t+4>>2]=S,E=b(b(E*B)-b(x*O)),y[t>>2]=E,x=y[f+612>>2],g=y[f+364>>2],F=y[f+356>>2],C=y[f+360>>2],T=y[f+608>>2],N=y[f+348>>2],L=y[f+340>>2],z=y[f+344>>2],w=y[f+332>>2],I=y[f+328>>2],M=y[f+604>>2],k=y[f+324>>2],_[t+76>>2]=0,I=b(M*b(b(b(E*k)+b(S*I))+b(R*w))),y[t+64>>2]=I,M=b(T*b(b(b(E*L)+b(S*z))+b(R*N))),y[t+68>>2]=M,k=b(x*b(b(b(E*F)+b(S*C))+b(R*g))),y[t+72>>2]=k):(_[t+64>>2]=0,_[t+68>>2]=0,_[t>>2]=0,_[t+4>>2]=0,_[t+72>>2]=0,_[t+76>>2]=0,_[t+8>>2]=0,_[t+12>>2]=0,_[t+16>>2]=0,_[t+20>>2]=0,_[t+24>>2]=0,_[t+28>>2]=0),p?(x=y[i>>2],g=y[i+4>>2],T=y[i+8>>2],_[t+60>>2]=0,N=b(-T),y[t+56>>2]=N,L=b(-g),y[t+52>>2]=L,z=b(-x),y[t+48>>2]=z,w=y[s+8>>2],P=y[s+4>>2],C=y[s>>2],_[t+44>>2]=0,F=b(b(x*P)-b(g*C)),y[t+40>>2]=F,C=b(b(T*C)-b(x*w)),y[t+36>>2]=C,T=b(b(g*w)-b(T*P)),y[t+32>>2]=T,x=y[p+332>>2],P=y[p+328>>2],w=y[p+608>>2],U=y[p+348>>2],G=y[p+340>>2],X=y[p+344>>2],g=y[p+612>>2],H=y[p+364>>2],j=y[p+356>>2],W=y[p+360>>2],Y=y[p+604>>2],q=y[p+324>>2],_[t+92>>2]=0,g=b(g*b(b(b(T*j)+b(C*W))+b(F*H))),y[t+88>>2]=g,w=b(w*b(b(b(T*G)+b(C*X))+b(F*U))),y[t+84>>2]=w,P=b(Y*b(b(b(T*q)+b(C*P))+b(F*x))),y[t+80>>2]=P):(_[t+80>>2]=0,_[t+84>>2]=0,_[t+32>>2]=0,_[t+36>>2]=0,_[t+88>>2]=0,_[t+92>>2]=0,_[t+40>>2]=0,_[t+44>>2]=0,_[t+48>>2]=0,_[t+52>>2]=0,_[t+56>>2]=0,_[t+60>>2]=0,F=b(0),C=b(0),T=b(0),N=b(0),L=b(0),z=b(0),g=b(0),w=b(0)),e=t,x=l,f?(l=y[a+8>>2],U=y[a+4>>2],X=b(b(b(M*l)-b(k*U))*y[i>>2]),G=k,k=y[a>>2],l=b(y[f+404>>2]+b(b(X+b(b(b(G*k)-b(l*I))*y[i+4>>2]))+b(b(b(U*I)-b(M*k))*y[i+8>>2])))):l=b(0),p?(I=y[s+4>>2],M=y[s+8>>2],G=b(b(b(g*I)-b(w*M))*y[i>>2]),k=g,g=y[s>>2],g=b(y[p+404>>2]+b(b(G+b(b(b(P*M)-b(k*g))*y[i+4>>2]))+b(b(b(w*g)-b(P*I))*y[i+8>>2])))):g=b(0),x=b(x/b(l+g)),y[e+108>>2]=x,f?(e=A(n,244)+m|0,O=b(b(b(b(y[e+176>>2]+y[e+208>>2])*D)+b(b(y[e+180>>2]+y[e+212>>2])*O))+b(b(y[e+184>>2]+y[e+216>>2])*B)),B=y[e+200>>2],g=y[e+192>>2],l=y[e+196>>2]):(g=b(0),O=b(b(b(D*b(0))+b(O*b(0)))+b(B*b(0))),B=b(0),l=b(0)),O=b(O+b(b(b(g*E)+b(l*S))+b(B*R))),p?(e=A(r,244)+m|0,E=b(b(b(b(y[e+176>>2]+y[e+208>>2])*z)+b(b(y[e+180>>2]+y[e+212>>2])*L))+b(b(y[e+184>>2]+y[e+216>>2])*N)),S=y[e+200>>2],D=y[e+192>>2],l=y[e+196>>2]):(S=b(0),E=b(b(b(z*b(0))+b(L*b(0)))+b(N*b(0))),D=b(0),l=b(0)),R=b(0),R=16&d[o+128|0]?b(x*b(b(y[c+44>>2]*b(-b(b(b(b(y[o+48>>2]-y[o+32>>2])*y[i>>2])+b(b(y[o+52>>2]-y[o+36>>2])*y[i+4>>2]))+b(b(y[o+56>>2]-y[o+40>>2])*y[i+8>>2]))))/y[c+12>>2])):R,_[t+128>>2]=0,_[t+124>>2]=v,y[t+116>>2]=h,y[t+112>>2]=b(x*b(u-b(O+b(E+b(b(b(D*T)+b(l*C))+b(S*F))))))+R,y[t+120>>2]=-V}(e,g,t,i,n,s,l,c,u,h,p,f)}function Tn(e,t,i,n,r){var o,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0);B=o=B-16|0,a=y[e+52>>2],s=y[e+56>>2],c=y[e+48>>2],l=y[t>>2],u=y[t+4>>2],h=y[t+8>>2],_[r+60>>2]=0,y[r+56>>2]=s+b(h*n),y[r+52>>2]=a+b(u*n),y[r+48>>2]=c+b(l*n),c=y[i>>2],p=y[i+4>>2],f=y[i+8>>2],a=(a=b(b(b(c*c)+b(p*p))+b(f*f)))>b(1.1920928955078125e-7)?b(w(a)):b(0),a=(s=b(a*n)>b(.7853981852531433)?b(b(.7853981852531433)/n):a)<b(.0010000000474974513)?b(b(n*b(.5))+b(s*b(b(b(b(n*n)*n)*b(-.02083333395421505))*s))):b(Ji(b(b(s*b(.5))*n))/s),An(e,o),l=y[o+12>>2],s=$i(b(b(s*n)*b(.5))),u=b(c*a),h=y[o>>2],p=b(p*a),d=y[o+4>>2],f=b(f*a),m=y[o+8>>2],a=b(b(b(b(l*s)-b(u*h))-b(p*d))-b(f*m)),c=b(b(b(b(f*l)+b(s*m))+b(u*d))-b(p*h)),n=b(b(b(b(s*h)+b(u*l))+b(p*m))-b(f*d)),s=b(b(b(f*h)+b(b(p*l)+b(s*d)))-b(u*m)),(l=b(b(a*a)+b(b(c*c)+b(b(n*n)+b(s*s)))))>b(1.1920928955078125e-7)&&(l=b(b(1)/b(w(l))),a=b(a*l),c=b(c*l),s=b(s*l),n=b(n*l),l=b(b(a*a)+b(b(c*c)+b(b(s*s)+b(n*n))))),l>b(1.1920928955078125e-7)?(_[r+12>>2]=0,_[r+44>>2]=0,_[r+28>>2]=0,u=b(b(2)/l),l=b(c*u),h=b(s*l),p=b(n*u),d=b(a*p),y[r+36>>2]=h+d,f=b(n*l),u=b(s*u),m=b(a*u),y[r+32>>2]=f-m,y[r+24>>2]=h-d,h=b(n*u),a=b(a*l),y[r+16>>2]=h+a,y[r+8>>2]=f+m,y[r+4>>2]=h-a,n=b(n*p),a=b(s*u),y[r+40>>2]=b(1)-b(n+a),s=n,n=b(c*l),y[r+20>>2]=b(1)-b(s+n),y[r>>2]=b(1)-b(a+n)):(t=_[e+4>>2],_[r>>2]=_[e>>2],_[r+4>>2]=t,t=_[e+12>>2],_[r+8>>2]=_[e+8>>2],_[r+12>>2]=t,t=_[e+20>>2],_[r+16>>2]=_[e+16>>2],_[r+20>>2]=t,t=_[e+28>>2],_[r+24>>2]=_[e+24>>2],_[r+28>>2]=t,t=_[e+36>>2],_[r+32>>2]=_[e+32>>2],_[r+36>>2]=t,t=_[e+44>>2],_[r+40>>2]=_[e+40>>2],_[r+44>>2]=t),B=o+16|0}function Sn(e,t){var i;return _[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],b(b(b(y[e>>2]*y[_[i+8>>2]>>2])+b(y[e+4>>2]*y[_[i+8>>2]+4>>2]))+b(y[e+8>>2]*y[_[i+8>>2]+8>>2]))}function En(e,t){var i,n=b(0),r=b(0);return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,n=y[_[t+12>>2]+8>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n*y[_[t+12>>2]>>2]),_[12+(t=B-16|0)>>2]=e+16,r=y[_[t+12>>2]+8>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n+b(r*y[_[t+12>>2]+4>>2])),_[12+(t=B-16|0)>>2]=e+32,r=y[_[t+12>>2]+8>>2],_[12+(e=B-16|0)>>2]=_[i+8>>2],B=i+16|0,b(n+b(r*y[_[e+12>>2]+8>>2]))}function Cn(e,t){var i,n=b(0),r=b(0);return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,n=y[_[t+12>>2]+4>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n*y[_[t+12>>2]>>2]),_[12+(t=B-16|0)>>2]=e+16,r=y[_[t+12>>2]+4>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n+b(r*y[_[t+12>>2]+4>>2])),_[12+(t=B-16|0)>>2]=e+32,r=y[_[t+12>>2]+4>>2],_[12+(e=B-16|0)>>2]=_[i+8>>2],B=i+16|0,b(n+b(r*y[_[e+12>>2]+8>>2]))}function wn(e,t){var i,n=b(0),r=b(0);return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,n=y[_[t+12>>2]>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n*y[_[t+12>>2]>>2]),_[12+(t=B-16|0)>>2]=e+16,r=y[_[t+12>>2]>>2],_[12+(t=B-16|0)>>2]=_[i+8>>2],n=b(n+b(r*y[_[t+12>>2]+4>>2])),_[12+(t=B-16|0)>>2]=e+32,r=y[_[t+12>>2]>>2],_[12+(e=B-16|0)>>2]=_[i+8>>2],B=i+16|0,b(n+b(r*y[_[e+12>>2]+8>>2]))}function kn(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],_[12+(B-16|0)>>2]=e,B=t+16|0,0|e}function On(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,y[n+20>>2]=y[_[n+28>>2]>>2]*y[_[n+24>>2]>>2],y[n+16>>2]=y[_[n+28>>2]+4>>2]*y[_[n+24>>2]+4>>2],y[n+12>>2]=y[_[n+28>>2]+8>>2]*y[_[n+24>>2]+8>>2],zi(e,n+20|0,n+16|0,n+12|0),B=n+32|0}function Rn(e,t,i){var n=0,r=0,o=0;if(1==(0|t)&e>>>0<0|t>>>0<1)n=e;else for(;n=Za(e,t,10),o=r=N,r=Qa(n,r,10,0),a[0|(i=i+-1|0)]=e-r|48,r=9==(0|t)&e>>>0>4294967295|t>>>0>9,e=n,t=o,r;);if(n)for(;e=(n>>>0)/10|0,a[0|(i=i+-1|0)]=n-A(e,10)|48,t=n>>>0>9,n=e,t;);return i}function Fn(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,(e=_[t+12>>2])&&(vn(e),Bi(e)),B=t+16|0}function In(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+4>>2]}function Mn(e){var t=0;return _[(e|=0)>>2]=10964,(t=_[e+56>>2])&&(o[_[_[t>>2]>>2]](t),(t=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),0|e}function Pn(e){(e|=0)&&(_[5586]=_[5586]+1,o[_[4568]](e))}function Dn(e,t,i){var n,r=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=0;if(B=n=B-256|0,e){for(f=y[t+24>>2],d=y[t+20>>2],m=y[t+16>>2],v=y[t+8>>2],g=y[t+4>>2],A=y[t>>2],_[n>>2]=e,a=64,r=n,t=1;;){e:{t:{i:{if(s=_[(h=(e=t+-1|0)<<2)+r>>2],!(y[s>>2]<=m^1|y[s+16>>2]>=A^1|y[s+4>>2]<=d^1|y[s+20>>2]>=g^1||y[s+8>>2]<=f^1|y[s+24>>2]>=v^1)){if(_[s+40>>2]){if(x=_[s+36>>2],(0|e)!=(0|a))break i;if((0|t)>(0|(c=a?a<<1:1)))break i;e=0,l=0,c&&(_[5585]=_[5585]+1,l=0|o[_[4567]](c<<2,16));n:{r:{if((0|a)>=1){for(;_[(p=e<<2)+l>>2]=_[r+p>>2],(0|a)!=(0|(e=e+1|0)););if(u)break r;break n}if(!r|!u)break n}r&&(_[5586]=_[5586]+1,o[_[4568]](r))}u=1;break t}o[_[_[i>>2]+12>>2]](i,s)}break e}c=a,l=r}if(_[l+h>>2]=x,s=_[s+40>>2],(0|t)==(0|c))if((0|t)>=(0|(a=t?t<<1:1)))a=t,r=l;else{e=0,r=0,a&&(_[5585]=_[5585]+1,r=0|o[_[4567]](a<<2,16));t:{i:{if((0|t)>=1){for(;_[(c=e<<2)+r>>2]=_[l+c>>2],(0|t)!=(0|(e=e+1|0)););if(u)break i;break t}if(!l|!u)break t}l&&(_[5586]=_[5586]+1,o[_[4568]](l))}u=1}else a=c,r=l;_[(t<<2)+r>>2]=s,e=t+1|0}if(!((0|(t=e))>0))break}!r|!u||r&&(_[5586]=_[5586]+1,o[_[4568]](r))}B=n+256|0}function Bn(e,t,i,n,r){return b(b(1))}function Nn(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+32|0}function Ln(e,t,i,n,r){var o,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0);o=-16&d[r+16|0],a[r+16|0]=o,I=y[n>>2],f=y[t>>2],x=b(I-f),p=y[e>>2],s=b(p-f),M=y[n+4>>2],m=y[t+4>>2],T=b(M-m),u=y[e+4>>2],l=b(u-m),P=y[n+8>>2],v=y[t+8>>2],S=b(P-v),g=y[e+8>>2],c=b(g-v),h=b(b(b(x*s)+b(T*l))+b(S*c)),e=r,k=y[i>>2],E=b(k-f),O=y[i+4>>2],C=b(O-m),R=y[i+8>>2],w=b(R-v),(l=b(b(b(E*s)+b(C*l))+b(w*c)))<=b(0)^1|h<=b(0)^1?(s=b(p-k),c=b(u-O),A=b(g-R),F=b(b(b(x*s)+b(T*c))+b(S*A)),(c=b(b(b(E*s)+b(C*c))+b(w*A)))>=b(0)^1|F<=c^1?(A=b(b(l*F)-b(c*h)),c<=b(0)^1|l>=b(0)^1||(s=b(0),!(A<=b(0)))?(s=b(p-I),u=b(u-M),g=b(g-P),p=b(b(b(E*s)+b(C*u))+b(w*g)),(s=b(b(b(x*s)+b(T*u))+b(S*g)))>=b(0)^1|p<=s^1?(u=b(b(p*h)-b(l*s)),s<=b(0)^1|h>=b(0)^1||(l=b(0),!(u<=b(0)))?(h=b(b(c*s)-b(p*F)))<=b(0)&&(l=b(F-c))>=b(0)&&(s=b(p-s))>=b(0)?(_[r+12>>2]=0,a[r+16|0]=6|o,s=b(l/b(l+s)),y[r+8>>2]=R+b(b(P-R)*s),y[r+4>>2]=O+b(b(M-O)*s),y[r>>2]=k+b(b(I-k)*s),l=b(b(1)-s),c=b(0)):(_[r+12>>2]=0,a[r+16|0]=7|o,l=b(b(1)/b(A+b(h+u))),s=b(A*l),l=b(u*l),y[r+8>>2]=b(S*s)+b(v+b(w*l)),y[r+4>>2]=b(T*s)+b(m+b(C*l)),y[r>>2]=b(x*s)+b(f+b(E*l)),c=b(b(b(1)-l)-s)):(_[r+12>>2]=0,a[r+16|0]=5|o,s=b(h/b(h-s)),y[r+8>>2]=v+b(S*s),y[r+4>>2]=m+b(T*s),y[r>>2]=f+b(x*s),c=b(b(1)-s))):(t=_[n+4>>2],_[r>>2]=_[n>>2],_[r+4>>2]=t,t=_[n+12>>2],_[r+8>>2]=_[n+8>>2],_[r+12>>2]=t,a[r+16|0]=4|o,s=b(1),l=b(0),c=b(0))):(_[r+12>>2]=0,a[r+16|0]=3|o,l=b(l/b(l-c)),y[r+8>>2]=v+b(w*l),y[r+4>>2]=m+b(C*l),y[r>>2]=f+b(E*l),c=b(b(1)-l))):(t=_[i+4>>2],_[r>>2]=_[i>>2],_[r+4>>2]=t,t=_[i+12>>2],_[r+8>>2]=_[i+8>>2],_[r+12>>2]=t,a[r+16|0]=2|o,l=b(1),s=b(0),c=b(0))):(i=_[t+4>>2],_[r>>2]=_[t>>2],_[r+4>>2]=i,i=_[t+12>>2],_[r+8>>2]=_[t+8>>2],_[r+12>>2]=i,a[r+16|0]=1|o,l=b(0),s=b(0),c=b(1)),y[e+20>>2]=c,_[r+32>>2]=0,y[r+28>>2]=s,y[r+24>>2]=l}function zn(e,t,i,n,r){var o,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=0,g=b(0);if(o=_[e+18504>>2]){if((s=_[o+48>>2])&&(_[s+44>>2]=_[o+44>>2]),(s=_[o+44>>2])&&(_[s+48>>2]=_[o+48>>2]),_[e+18504>>2]==(0|o)&&(_[e+18504>>2]=_[o+48>>2]),_[(s=e+18508|0)>>2]=_[s>>2]+-1,_[o+44>>2]=0,_[o+48>>2]=_[e+18496>>2],(s=_[e+18496>>2])&&(_[s+44>>2]=o),_[e+18496>>2]=o,_[(s=e+18500|0)>>2]=_[s>>2]+1,_[o+28>>2]=n,_[o+24>>2]=i,_[o+20>>2]=t,a[o+55|0]=0,h=y[i+24>>2],g=y[n+24>>2],l=y[t+24>>2],p=y[n+20>>2],u=y[t+20>>2],f=y[i+20>>2],d=y[i+16>>2],m=y[n+16>>2],c=y[t+16>>2],_[o+12>>2]=0,d=b(d-c),p=b(p-u),f=b(f-u),c=b(m-c),u=b(b(d*p)-b(f*c)),y[o+8>>2]=u,h=b(h-l),m=b(h*c),c=b(g-l),l=b(m-b(d*c)),y[o+4>>2]=l,c=b(b(f*c)-b(h*p)),y[o>>2]=c,v=2,(l=b(w(b(b(b(c*c)+b(l*l))+b(u*u)))))>b(9999999747378752e-20)){if(ro(o,t,i,s=o+16|0)||ro(o,i,n,s)||ro(o,n,t,s)||(y[o+16>>2]=b(b(b(y[t+16>>2]*y[o>>2])+b(y[t+20>>2]*y[o+4>>2]))+b(y[t+24>>2]*y[o+8>>2]))/l),l=b(b(1)/l),y[o>>2]=l*y[o>>2],y[o+4>>2]=l*y[o+4>>2],y[o+8>>2]=l*y[o+8>>2],r)return o;if(v=3,y[s>>2]>=b(-9999999747378752e-21))return o}return _[e>>2]=v,(t=_[o+48>>2])&&(_[t+44>>2]=_[o+44>>2]),(t=_[o+44>>2])&&(_[t+48>>2]=_[o+48>>2]),_[e+18496>>2]==(0|o)&&(_[e+18496>>2]=_[o+48>>2]),_[e+18500>>2]=_[e+18500>>2]+-1,_[o+44>>2]=0,_[o+48>>2]=_[e+18504>>2],(t=_[e+18504>>2])&&(_[t+44>>2]=o),_[e+18504>>2]=o,_[e+18508>>2]=_[e+18508>>2]+1,0}return _[e>>2]=5,0}function Gn(e){_[e>>2]=1025,_[e+120>>2]=0,_[e+124>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,_[e+136>>2]=0,_[e+140>>2]=0,_[e+144>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,_[e+160>>2]=0,_[e+164>>2]=0,_[e+168>>2]=0,_[e+328>>2]=0,_[e+332>>2]=0,_[e+336>>2]=0,_[e+340>>2]=0,_[e+344>>2]=0,_[e+348>>2]=0,_[e+352>>2]=0,_[e+356>>2]=0,_[e+360>>2]=0,_[e+364>>2]=0,_[e+368>>2]=0,_[e+372>>2]=0,_[e+376>>2]=0,_[e+536>>2]=0,_[e+540>>2]=0,_[e+544>>2]=0,_[e+548>>2]=0,_[e+552>>2]=0,_[e+556>>2]=0,_[e+560>>2]=0,_[e+564>>2]=0,_[e+568>>2]=0,_[e+572>>2]=0,_[e+576>>2]=0,_[e+580>>2]=0,_[e+584>>2]=0,_[e+792>>2]=0,_[e+784>>2]=0,_[e+788>>2]=0,_[e+776>>2]=0,_[e+780>>2]=0,_[e+768>>2]=0,_[e+772>>2]=0,_[e+760>>2]=0,_[e+764>>2]=0,_[e+752>>2]=0,_[e+756>>2]=0,_[e+744>>2]=0,_[e+748>>2]=0,_[e+836>>2]=0,_[e+840>>2]=0,_[e+864>>2]=0,_[e+844>>2]=0}function Un(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=t,_[n+24>>2]=i,_[12+(t=B-16|0)>>2]=_[n+28>>2],_[t+8>>2]=0,y[n+20>>2]=Sn(_[t+12>>2]+(_[t+8>>2]<<4)|0,_[n+24>>2]),_[12+(t=B-16|0)>>2]=_[n+28>>2],_[t+8>>2]=1,y[n+16>>2]=Sn(_[t+12>>2]+(_[t+8>>2]<<4)|0,_[n+24>>2]),_[12+(t=B-16|0)>>2]=_[n+28>>2],_[t+8>>2]=2,y[n+12>>2]=Sn(_[t+12>>2]+(_[t+8>>2]<<4)|0,_[n+24>>2]),zi(e,n+20|0,n+16|0,n+12|0),B=n+32|0}function Xn(e,t){var i;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],y[e>>2]=y[e>>2]+y[_[i+8>>2]>>2],y[e+4>>2]=y[e+4>>2]+y[_[i+8>>2]+4>>2],y[e+8>>2]=y[e+8>>2]+y[_[i+8>>2]+8>>2]}function Vn(e){var t;B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],_[12+(B-16|0)>>2]=e,$o(e),B=t+16|0}function Hn(e,t){var i;Yn(e,t),(i=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+4>>2]=t,_[e+12>>2]=_[e+12>>2]+-1}function jn(e,t,i){var n=0;return(n=_[e+4>>2])?_[e+4>>2]=0:(_[5585]=_[5585]+1,n=0|o[_[4567]](44,16),_[n>>2]=0,_[n+4>>2]=0,_[n+40>>2]=0,_[n+32>>2]=0,_[n+36>>2]=0,_[n+24>>2]=0,_[n+28>>2]=0,_[n+16>>2]=0,_[n+20>>2]=0,_[n+8>>2]=0,_[n+12>>2]=0),_[n+36>>2]=i,_[n+32>>2]=0,_[n+40>>2]=0,i=_[t+4>>2],_[n>>2]=_[t>>2],_[n+4>>2]=i,i=_[t+12>>2],_[n+8>>2]=_[t+8>>2],_[n+12>>2]=i,i=_[t+20>>2],_[n+16>>2]=_[t+16>>2],_[n+20>>2]=i,i=_[t+28>>2],_[n+24>>2]=_[t+24>>2],_[n+28>>2]=i,Wn(e,_[e>>2],n),_[e+12>>2]=_[e+12>>2]+1,n}function Wn(e,t,i){var n=0,r=b(0),a=b(0),s=b(0),l=0;if(!_[e>>2])return _[e>>2]=i,void(_[i+32>>2]=0);if(n=_[t+40>>2])for(a=b(y[i>>2]+y[i+16>>2]),r=b(y[i+8>>2]+y[i+24>>2]),s=b(y[i+4>>2]+y[i+20>>2]);l=t+36|0,t=_[t+36>>2],t=_[l+((b(b(b(x(b(a-b(y[t>>2]+y[t+16>>2]))))+b(x(b(s-b(y[t+4>>2]+y[t+20>>2])))))+b(x(b(r-b(y[t+8>>2]+y[t+24>>2])))))<b(b(b(x(b(a-b(y[n>>2]+y[n+16>>2]))))+b(x(b(s-b(y[n+4>>2]+y[n+20>>2])))))+b(x(b(r-b(y[n+8>>2]+y[n+24>>2])))))^1)<<2)>>2],n=_[t+40>>2];);l=_[t+32>>2],(n=_[e+4>>2])?_[e+4>>2]=0:(_[5585]=_[5585]+1,n=0|o[_[4567]](44,16),_[n>>2]=0,_[n+4>>2]=0,_[n+40>>2]=0,_[n+32>>2]=0,_[n+36>>2]=0,_[n+24>>2]=0,_[n+28>>2]=0,_[n+16>>2]=0,_[n+20>>2]=0,_[n+8>>2]=0,_[n+12>>2]=0),_[n+36>>2]=0,_[n+40>>2]=0,_[n+32>>2]=l,a=y[i>>2],r=y[t>>2],y[n>>2]=a<r?a:r,a=y[i+16>>2],r=y[t+16>>2],y[n+16>>2]=a>r?a:r,a=y[i+4>>2],r=y[t+4>>2],y[n+4>>2]=a<r?a:r,a=y[i+20>>2],r=y[t+20>>2],y[n+20>>2]=a>r?a:r,a=y[i+8>>2],r=y[t+8>>2],y[n+8>>2]=a<r?a:r,a=y[i+24>>2],r=y[t+24>>2],y[n+24>>2]=a>r?a:r;e:if(l)for(_[36+(((_[_[t+32>>2]+40>>2]==(0|t))<<2)+l|0)>>2]=n,_[n+36>>2]=t,_[t+32>>2]=n,_[n+40>>2]=i,_[i+32>>2]=n,a=y[n>>2];;){if(e=n,!(y[(n=l)>>2]<=a^1|y[n+4>>2]<=y[e+4>>2]^1|y[n+8>>2]<=y[e+8>>2]^1|y[n+16>>2]>=y[e+16>>2]^1)&&y[n+20>>2]>=y[e+20>>2]&&y[n+24>>2]>=y[e+24>>2])break e;if(e=_[n+36>>2],a=y[e>>2],t=_[n+40>>2],a=a<(r=y[t>>2])?a:r,y[n>>2]=a,r=y[e+16>>2],s=y[t+16>>2],y[n+16>>2]=r>s?r:s,r=y[e+4>>2],s=y[t+4>>2],y[n+4>>2]=r<s?r:s,r=y[e+20>>2],s=y[t+20>>2],y[n+20>>2]=r>s?r:s,r=y[e+8>>2],s=y[t+8>>2],y[n+8>>2]=r<s?r:s,r=y[e+24>>2],s=y[t+24>>2],y[n+24>>2]=r>s?r:s,!(l=_[n+32>>2]))break}else _[n+36>>2]=t,_[t+32>>2]=n,_[n+40>>2]=i,_[i+32>>2]=n,_[e>>2]=n}function Yn(e,t){var i=0,n=0,r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0);if(_[e>>2]==(0|t))return _[e>>2]=0,0;n=_[t+32>>2],i=_[36+(((_[n+40>>2]!=(0|t))<<2)+n|0)>>2];e:{if(t=_[n+32>>2])for(_[36+((((0|n)==_[t+40>>2])<<2)+t|0)>>2]=i,_[i+32>>2]=t,(i=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+4>>2]=n;;){if(g=y[t>>2],n=_[t+36>>2],r=y[n>>2],i=_[t+40>>2],r=r<(h=y[i>>2])?r:h,y[t>>2]=r,h=y[t+16>>2],a=(a=y[n+16>>2])>(p=y[i+16>>2])?a:p,y[t+16>>2]=a,p=y[t+4>>2],s=(s=y[n+4>>2])<(f=y[i+4>>2])?s:f,y[t+4>>2]=s,f=y[t+20>>2],l=(l=y[n+20>>2])>(d=y[i+20>>2])?l:d,y[t+20>>2]=l,d=y[t+8>>2],c=(c=y[n+8>>2])<(m=y[i+8>>2])?c:m,y[t+8>>2]=c,m=y[t+24>>2],u=(u=y[n+24>>2])>(v=y[i+24>>2])?u:v,y[t+24>>2]=u,!(f!=l|h!=a|g!=r|p!=s)&&d==c&&m==u)break e;if(!(t=_[t+32>>2]))break}else _[e>>2]=i,_[i+32>>2]=0,(t=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+4>>2]=n;t=_[e>>2]}return t}function qn(e,t){var i;_[t+40>>2]&&(qn(e,_[t+36>>2]),qn(e,_[t+40>>2])),_[e>>2]==(0|t)&&(_[e>>2]=0),(i=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+4>>2]=t}function Qn(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,(e=_[t+12>>2])&&Bo(e),B=t+16|0}function Zn(e){var t=0;return _[(e|=0)>>2]=14192,(t=_[e+160>>2])&&(d[e+164|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+160>>2]=0),_[e+160>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,a[e+164|0]=1,(t=_[e+136>>2])&&(d[e+140|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+136>>2]=0),_[e+136>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,a[e+140|0]=1,(t=_[e+116>>2])&&(d[e+120|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+116>>2]=0),_[e+116>>2]=0,_[e+108>>2]=0,_[e+112>>2]=0,a[e+120|0]=1,(t=_[e+96>>2])&&(d[e+100|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+96>>2]=0),_[e+96>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,a[e+100|0]=1,(t=_[e+76>>2])&&(d[e+80|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+76>>2]=0),_[e+76>>2]=0,_[e+68>>2]=0,_[e+72>>2]=0,a[e+80|0]=1,0|e}function Kn(e){}function Jn(e,t,i,n){for(var r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,y=0,g=0,A=0,b=0,x=0;;){for(A=i,f=_[e+12>>2],b=_[8+(o=f+((i+n|0)/2<<4)|0)>>2],h=_[o+4>>2],u=_[o>>2],o=n;;){a=-1,l=-1,(p=_[(r=(i<<4)+f|0)>>2])&&(l=_[p+12>>2]),a=u?_[u+12>>2]:a,s=-1,c=-1,(d=_[r+4>>2])&&(c=_[d+12>>2]),s=h?_[h+12>>2]:s;e:{t:if(!((0|l)>(0|a))){if(!((0|u)!=(0|p)|(0|c)>(0|s))){if((0|h)!=(0|d))break e;if(v[r+8>>2]>b>>>0)break t;break e}if((0|u)!=(0|p)|(0|c)<=(0|s))break e}i=i+1|0;continue}for(;;){a=(x=o<<4)+f|0,l=-1,s=-1,s=u?_[u+12>>2]:s,(m=_[a>>2])&&(l=_[m+12>>2]),c=-1,y=-1,y=h?_[h+12>>2]:y,(g=_[a+4>>2])&&(c=_[g+12>>2]);e:{t:if(!((0|s)>(0|l))){if(!((0|u)!=(0|m)|(0|y)>(0|c))){if((0|h)!=(0|g))break e;if(v[a+8>>2]<b>>>0)break t;break e}if((0|u)!=(0|m)|(0|y)<=(0|c))break e}o=o+-1|0;continue}break}if((0|i)<=(0|o)&&(c=_[r+8>>2],s=_[r+12>>2],l=_[a+4>>2],_[r>>2]=_[a>>2],_[r+4>>2]=l,l=_[a+12>>2],_[r+8>>2]=_[a+8>>2],_[r+12>>2]=l,r=_[e+12>>2]+x|0,_[r+4>>2]=d,_[r+8>>2]=c,_[r+12>>2]=s,_[r>>2]=p,o=o+-1|0,i=i+1|0),!((0|i)<=(0|o)))break;f=_[e+12>>2]}if((0|o)>(0|A)&&Jn(e,t,A,o),!((0|i)<(0|n)))break}}function $n(e,t,i,n){var r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0;if(!(!t|!i)){if(!(_[e+24>>2]>127|_[e+28>>2]>127)){if(_[5585]=_[5585]+1,r=0|o[_[4567]](1024,16),(0|(u=_[e+24>>2]))>=1)for(;c=(s=l<<3)+r|0,s=s+_[e+32>>2]|0,h=_[s+4>>2],_[c>>2]=_[s>>2],_[c+4>>2]=h,(0|u)!=(0|(l=l+1|0)););(u=_[e+32>>2])&&(d[e+36|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+32>>2]=0),_[e+32>>2]=r,_[e+28>>2]=128,a[e+36|0]=1}for(_[e+24>>2]=128,r=_[e+32>>2],_[r+4>>2]=i,_[r>>2]=t,t=124,r=1;;){if(i=_[e+32>>2],u=r,c=_[4+(s=i+(h=(r=r+-1|0)<<3)|0)>>2],s=_[s>>2],(0|r)>(0|t)){if(!((0|(l=_[e+24>>2]))>=(0|(t=l<<1))|_[e+28>>2]>=(0|t))){if(l){if(_[5585]=_[5585]+1,i=0|o[_[4567]](l<<4,16),l=0,!((0|(f=_[e+24>>2]))<1))for(;m=(p=l<<3)+i|0,p=_[e+32>>2]+p|0,v=_[p+4>>2],_[m>>2]=_[p>>2],_[m+4>>2]=v,(0|f)!=(0|(l=l+1|0)););}else i=0;(l=_[e+32>>2])&&(d[e+36|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+32>>2]=0),_[e+32>>2]=i,a[e+36|0]=1,_[e+28>>2]=t}_[e+24>>2]=t,t=t+-4|0}e:if((0|s)!=(0|c)){if(!(y[s>>2]<=y[c+16>>2]^1|y[s+16>>2]>=y[c>>2]^1|y[s+4>>2]<=y[c+20>>2]^1|y[s+20>>2]>=y[c+4>>2]^1||y[s+8>>2]<=y[c+24>>2]^1|y[s+24>>2]>=y[c+8>>2]^1))if(l=_[c+40>>2],_[s+40>>2]){if(r=_[s+36>>2],l){_[4+(i=i+h|0)>>2]=_[c+36>>2],_[i>>2]=r,r=_[s+40>>2],l=(i=u<<3)+_[e+32>>2]|0,_[l+4>>2]=_[c+36>>2],_[l>>2]=r,r=_[s+36>>2],l=i+_[e+32>>2]|0,_[l+12>>2]=_[c+40>>2],_[l+8>>2]=r,r=_[s+40>>2],i=i+_[e+32>>2]|0,_[i+20>>2]=_[c+40>>2],_[i+16>>2]=r,r=u+3|0;break e}_[4+(i=i+h|0)>>2]=c,_[i>>2]=r,i=_[s+40>>2],r=_[e+32>>2]+(u<<3)|0,_[r+4>>2]=c,_[r>>2]=i,r=u+1|0}else l?(_[4+(i=i+h|0)>>2]=_[c+36>>2],_[i>>2]=s,i=_[e+32>>2]+(u<<3)|0,_[i+4>>2]=_[c+40>>2],_[i>>2]=s,r=u+1|0):o[_[_[n>>2]+8>>2]](n,s,c)}else{if(!_[s+40>>2])break e;i=i+h|0,r=_[s+36>>2],_[i+4>>2]=r,_[i>>2]=r,r=(i=u<<3)+_[e+32>>2]|0,c=_[s+40>>2],_[r+4>>2]=c,_[r>>2]=c,r=_[s+40>>2],i=i+_[e+32>>2]|0,_[i+8>>2]=_[s+36>>2],_[i+12>>2]=r,r=u+2|0}if(!r)break}}}function er(e){var t;B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],_[e+12>>2]&&(1&a[e+16|0]&&function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,(e=_[i+8>>2])&&(_[5586]=_[5586]+1,o[_[4568]](e)),B=i+16|0}(e,_[e+12>>2]),_[e+12>>2]=0),B=t+16|0}function tr(e,t){var i;for(_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=0,_[i+4>>2]=t,_[i>>2]=_[i+8>>2];_[i>>2]<_[i+4>>2];)_[i>>2]=_[i>>2]+1}function ir(e,t){e|=0,t=b(t);var i=b(0),n=b(0),r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0);i=b(o[_[_[e>>2]+48>>2]](e)),n=b(o[_[_[e>>2]+48>>2]](e)),r=b(o[_[_[e>>2]+48>>2]](e)),y[e+48>>2]=t,t=y[e+40>>2],a=y[e+32>>2],s=y[e+36>>2],l=b(o[_[_[e>>2]+48>>2]](e)),c=b(o[_[_[e>>2]+48>>2]](e)),u=b(o[_[_[e>>2]+48>>2]](e)),_[e+44>>2]=0,y[e+36>>2]=b(n+s)-c,y[e+32>>2]=b(i+a)-l,y[e+40>>2]=b(r+t)-u}function nr(e){var t=0;e:{t:if(!((t=_[e+4>>2])>>>0>13)){i:switch(t+-2|0){case 6:return b(y[e+32>>2]*y[e+16>>2]);case 0:case 1:case 4:case 5:case 7:case 10:break t;case 2:case 3:break i;default:break e}break e}return b(o[_[_[e>>2]+48>>2]](e))}return y[e+48>>2]}function rr(e){return nn(e),_[e+56>>2]=0,_[e>>2]=10964,e}function or(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+8>>2]=_[i+8>>2]}function ar(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+8>>2]}function sr(e){return _[16+(e|=0)>>2]}function lr(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0;if(!(!(i=_[12+(e|=0)>>2])|!d[e+8|0])){if((0|(n=_[t+4>>2]))==_[t+8>>2]&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),n=_[t+4>>2]),(0|n)>=1)for(i=0;_[(l=i<<2)+s>>2]=_[_[t+12>>2]+l>>2],(0|(i=i+1|0))!=(0|n););(i=_[t+12>>2])&&(d[t+16|0]&&(i&&(_[5586]=_[5586]+1,o[_[4568]](i)),n=_[t+4>>2]),_[t+12>>2]=0),_[t+12>>2]=s,a[t+16|0]=1,_[t+8>>2]=r,i=_[e+12>>2]}_[_[t+12>>2]+(n<<2)>>2]=i,_[t+4>>2]=n+1}}function cr(){!(0==d[19952])|1&a[19952]||(_[4906]=1062847606,_[4907]=0,_[4904]=1042701022,_[4905]=1056964440,_[4902]=1062847606,_[4903]=0,_[4900]=-1093024784,_[4901]=1050556081,_[4898]=1062847606,_[4899]=0,_[4896]=-1093024784,_[4897]=-1096927567,_[4894]=1062847606,_[4895]=0,_[4892]=1042701022,_[4893]=-1090519208,_[4890]=1062847572,_[4891]=0,_[4888]=1057396286,_[4889]=0,_[4886]=1057396386,_[4887]=0,_[4884]=1060121912,_[4885]=1056964507,_[4882]=1057396420,_[4883]=0,_[4880]=-1098475836,_[4881]=1062148969,_[4878]=1057396386,_[4879]=0,_[4876]=-1084636143,_[4877]=0,_[4874]=1057396420,_[4875]=0,_[4872]=-1098475836,_[4873]=-1085334679,_[4870]=1057396386,_[4871]=0,_[4868]=1060121912,_[4869]=-1090519141,_[4866]=-2147483648,_[4867]=0,_[4864]=1058437413,_[4865]=1062149053,_[4862]=-2147483648,_[4863]=0,_[4860]=-2147483648,_[4861]=1065353216,_[4858]=-2147483648,_[4859]=0,_[4856]=-1089046235,_[4857]=1062149053,_[4854]=-2147483648,_[4855]=0,_[4852]=-1082951543,_[4853]=1050556148,_[4850]=-2147483648,_[4851]=0,_[4848]=-1082951543,_[4849]=-1096927500,_[4846]=0,_[4847]=0,_[4844]=-1089046235,_[4845]=-1085334595,_[4842]=0,_[4843]=0,_[4840]=0,_[4841]=-1082130432,_[4838]=0,_[4839]=0,_[4836]=1058437413,_[4837]=-1085334595,_[4834]=0,_[4835]=0,_[4832]=1064532105,_[4833]=-1096927500,_[4830]=0,_[4831]=0,_[4828]=1064532105,_[4829]=1050556148,_[4826]=-1090087228,_[4827]=0,_[4824]=1049007812,_[4825]=1062148969,_[4822]=-1090087262,_[4823]=0,_[4820]=-1087361736,_[4821]=1056964507,_[4818]=-1084636042,_[4819]=0,_[4816]=-1104782626,_[4817]=1056964440,_[4814]=-1090087262,_[4815]=0,_[4812]=-1087361736,_[4813]=-1090519141,_[4810]=-1084636076,_[4811]=0,_[4808]=-1090087362,_[4809]=-2147483648,_[4806]=-1090087262,_[4807]=0,_[4804]=1062847505,_[4805]=-2147483648,_[4802]=-1084636042,_[4803]=0,_[4800]=1054458864,_[4801]=1050556081,_[4798]=-1090087228,_[4799]=0,_[4796]=1049007812,_[4797]=-1085334679,_[4794]=-1084636042,_[4795]=0,_[4792]=-1104782626,_[4793]=-1090519208,_[4790]=-1084636042,_[4791]=0,_[4788]=1054458864,_[4789]=-1096927567,_[4786]=1065353216,_[4787]=0,_[4784]=-2147483648,_[4785]=0,_[4782]=1055193471,_[4783]=0,_[4780]=1063581978,_[4781]=0,_[4778]=1055193572,_[4779]=0,_[4776]=1049461434,_[4777]=1062847522,_[4774]=1055193572,_[4775]=0,_[4772]=-1086767520,_[4773]=1057396202,_[4770]=1055193572,_[4771]=0,_[4768]=-1086767520,_[4769]=-1090087446,_[4766]=1055193605,_[4767]=0,_[4764]=1049461434,_[4765]=-1084636126,_[4762]=-1092290076,_[4763]=0,_[4760]=1060716128,_[4761]=1057396202,_[4758]=-1092290043,_[4759]=0,_[4756]=-1098022214,_[4757]=1062847522,_[4754]=-1092290177,_[4755]=0,_[4752]=-1083901670,_[4753]=-2147483648,_[4750]=-1092290076,_[4751]=0,_[4748]=-1098022214,_[4749]=-1084636126,_[4746]=-1092290076,_[4747]=0,_[4744]=1060716128,_[4745]=-1090087446,_[4742]=-1082130432,_[4743]=0,_[4740]=0,_[4741]=-2147483648,_[4988]=0,_[4988]=1|_[4988])}function ur(e){a[e+356|0]=1,_[e>>2]=0,a[e+312|0]=0,_[e+292>>2]=1566444395,_[e+296>>2]=1566444395,_[e+336>>2]=0,_[e+340>>2]=0,_[e+300>>2]=1566444395,_[e+304>>2]=0,_[e+344>>2]=0,_[e+348>>2]=0,a[e+352|0]=0,a[e+332|0]=240&d[e+332|0]}function hr(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],e=0|o[_[_[e>>2]+36>>2]](e),B=t+16|0,0|e}function pr(e,t){3&d[e+204|0]&&!t||(4!=(-2&_[e+220>>2])&&(_[e+220>>2]=1),_[e+224>>2]=0)}function fr(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+8>>2]](e,_[i+8>>2]),B=i+16|0}function _r(e,t){var i,n=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i=0,n=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],n=_[t+4>>2],e=_[i+12>>2],_[e>>2]=_[t>>2],_[e+4>>2]=n,n=_[t+12>>2],_[e+8>>2]=_[t+8>>2],_[e+12>>2]=n,t=_[i+8>>2],n=_[t+20>>2],_[e+16>>2]=_[t+16>>2],_[e+20>>2]=n,n=_[t+28>>2],_[e+24>>2]=_[t+24>>2],_[e+28>>2]=n,t=_[i+8>>2],i=_[t+36>>2],_[e+32>>2]=_[t+32>>2],_[e+36>>2]=i,i=_[t+44>>2],_[e+40>>2]=_[t+40>>2],_[e+44>>2]=i}(e=_[i+12>>2],_[i+8>>2]),t=_[i+8>>2],n=_[t+52>>2],_[e+48>>2]=_[t+48>>2],_[e+52>>2]=n,n=_[t+60>>2],_[e+56>>2]=_[t+56>>2],_[e+60>>2]=n,B=i+16|0}function dr(e,t){var i=b(0),n=0,r=b(0),o=b(0),a=b(0);(i=y[e+404>>2])!=b(0)&&(r=y[t>>2],o=y[t+4>>2],a=y[t+8>>2],_[e+436>>2]=0,i=b(b(1)/i),y[e+432>>2]=a*i,y[e+428>>2]=i*o,y[e+424>>2]=i*r),n=_[t+4>>2],_[e+440>>2]=_[t>>2],_[e+444>>2]=n,n=_[t+12>>2],_[e+448>>2]=_[t+8>>2],_[e+452>>2]=n}function mr(e,t,i,n){var r,o=b(0),a=b(0),c=b(0),u=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0);B=r=B+-64|0,x=y[t+24>>2],T=y[t+20>>2],C=y[t+40>>2],k=y[t+36>>2],f=y[e+40>>2],d=y[e+20>>2],g=y[e+36>>2],m=y[e+24>>2],O=y[t+8>>2],R=y[t>>2],F=y[t+4>>2],I=y[t+16>>2],M=y[t+32>>2],a=y[e+8>>2],c=y[e+4>>2],A=y[e+32>>2],v=y[e+16>>2],u=y[e>>2],_[r+60>>2]=0,_[r+44>>2]=0,D=b(b(d*f)-b(m*g)),N=b(b(m*A)-b(f*v)),L=b(b(g*v)-b(d*A)),o=b(b(1)/b(b(b(u*D)+b(c*N))+b(a*L))),P=b(b(b(m*c)-b(d*a))*o),m=b(b(b(v*a)-b(m*u))*o),d=b(b(b(d*u)-b(v*c))*o),y[r+56>>2]=b(b(M*P)+b(k*m))+b(C*d),v=b(b(b(g*a)-b(f*c))*o),a=b(b(b(f*u)-b(A*a))*o),c=b(b(b(A*c)-b(g*u))*o),y[r+52>>2]=b(b(M*v)+b(k*a))+b(C*c),y[r+40>>2]=b(b(P*I)+b(m*T))+b(d*x),y[r+36>>2]=b(b(v*I)+b(a*T))+b(c*x),_[r+28>>2]=0,u=b(D*o),f=b(N*o),o=b(L*o),y[r+48>>2]=b(b(M*u)+b(k*f))+b(C*o),y[r+32>>2]=b(b(u*I)+b(f*T))+b(o*x),y[r+24>>2]=b(O*d)+b(b(R*P)+b(F*m)),y[r+20>>2]=b(O*c)+b(b(R*v)+b(F*a)),y[r+16>>2]=b(O*o)+b(b(R*u)+b(F*f)),An(r+16|0,r),u=y[r>>2],c=y[r+4>>2],a=y[r+8>>2],f=y[r+12>>2],o=b(b(1)/b(w(b(b(b(b(u*u)+b(c*c))+b(a*a))+b(f*f))))),a=b(a*o),y[r+8>>2]=a,c=b(c*o),y[r+4>>2]=c,u=b(u*o),y[r>>2]=u,o=b(f*o),y[r+12>>2]=o,o=function(e){var t,i=b(0),n=0,r=b(0);if(h(e),n=s(0),(t=2147483647&n)>>>0>=1065353216)return b(1065353216==(0|t)?(0|n)<0?3.141592502593994:0:b(0)/b(e-e));e:{if(t>>>0<=1056964607){if(i=b(1.570796251296997),t>>>0<847249409)break e;return i=b(e*e),b(b(b(b(7.549789415861596e-8)-b(b(b(i*b(b(i*b(b(i*b(-.008656363002955914))+b(-.04274342209100723)))+b(.16666586697101593)))/b(b(i*b(-.7066296339035034))+b(1)))*e))-e)+b(1.570796251296997))}if((0|n)<=-1)return e=b(b(e+b(1))*b(.5)),i=b(w(e)),e=b(b(1.570796251296997)-b(i+b(b(i*b(b(e*b(b(e*b(b(e*b(-.008656363002955914))+b(-.04274342209100723)))+b(.16666586697101593)))/b(b(e*b(-.7066296339035034))+b(1))))+b(-7.549789415861596e-8)))),b(e+e);e=b(b(b(1)-e)*b(.5)),l(0,-4096&(h(r=b(w(e))),s(0))),i=p(),e=b(b(b(b(b(e*b(b(e*b(b(e*b(-.008656363002955914))+b(-.04274342209100723)))+b(.16666586697101593)))/b(b(e*b(-.7066296339035034))+b(1)))*r)+b(b(e-b(i*i))/b(r+i)))+i),i=b(e+e)}return i}(b(S(b(E(o,b(-1))),b(1)))),y[n>>2]=o+o,_[i+12>>2]=0,y[i+8>>2]=a,y[i+4>>2]=c,y[i>>2]=u,(o=b(b(b(u*u)+b(c*c))+b(a*a)))<b(14210854715202004e-30)?(_[i+8>>2]=0,_[i+12>>2]=0,_[i>>2]=1065353216,_[i+4>>2]=0):(o=b(b(1)/b(w(o))),y[i+8>>2]=a*o,y[i+4>>2]=c*o,y[i>>2]=u*o),B=r- -64|0}function vr(e,t,i){Tn(e+4|0,e+372|0,e+388|0,t,i)}function yr(e,t,i,n,r,o,a,s,l,c){var u;B=u=B-48|0,_[u+44>>2]=e,_[u+40>>2]=t,_[u+36>>2]=i,_[u+32>>2]=n,_[u+28>>2]=r,_[u+24>>2]=o,_[u+20>>2]=a,_[u+16>>2]=s,_[u+12>>2]=l,_[u+8>>2]=c,zi(e=_[u+44>>2],_[u+40>>2],_[u+36>>2],_[u+32>>2]),zi(e+16|0,_[u+28>>2],_[u+24>>2],_[u+20>>2]),zi(e+32|0,_[u+16>>2],_[u+12>>2],_[u+8>>2]),B=u+48|0}function gr(e,t){var i=0;e:if((0|t)>=1024){if(e*=898846567431158e293,(0|(i=t+-1023|0))<1024){t=i;break e}e*=898846567431158e293,t=((0|t)<3069?t:3069)+-2046|0}else(0|t)>-1023||(e*=22250738585072014e-324,(0|(i=t+1022|0))>-1023?t=i:(e*=22250738585072014e-324,t=((0|t)>-3066?t:-3066)+2044|0));return l(0,0),l(1,t+1023<<20),e*+c()}function Ar(e,t,i,n,r){var a,s,l=0;l=(a=_[e+4>>2])>>8,s=e=_[e>>2],1&a&&(l=_[_[i>>2]+l>>2]),o[_[_[e>>2]+24>>2]](s,t,i+l|0,2&a?n:2,r)}function br(e,t,i,n){var r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0;o=_[e+4>>2];e:{if(_[e>>2]==(0|t)){if(r=2,(0|t)!=(0|o))break e;return o=_[t+12>>2],t=_[_[t+8>>2]+12>>2],s=_[t+96>>2],p=_[o+96>>2]-s|0,e=_[e+12>>2],r=_[t+92>>2],l=_[e+92>>2]-r|0,r=_[o+92>>2]-r|0,s=_[e+96>>2]-s|0,a=c=A(p,l)-A(r,s)|0,h=c>>31,c=_[i+8>>2],f=_[n+4>>2],d=_[i+4>>2],m=_[n+8>>2],u=Qa(a,h,u=A(c,f)-A(d,m)|0,u>>31),h=N,a=r,r=(r=_[e+88>>2])-(e=_[t+88>>2])|0,o=_[o+88>>2]-e|0,t=e=A(a,r)-A(o,l)|0,a=e>>31,n=_[n>>2],i=_[i>>2],l=Qa(t,a,e=A(n,d)-A(i,f)|0,e>>31),e=N+h|0,e=(t=l+u|0)>>>0<l>>>0?e+1|0:e,a=t,i=Qa(r=t=A(o,s)-A(r,p)|0,o=t>>31,t=A(i,m)-A(n,c)|0,t>>31),e=N+e|0,(0|(e=(t=a+i|0)>>>0<i>>>0?e+1|0:e))>0||(0|e)>=0&&!(t>>>0<=0)?2:1}r=(0|t)==(0|o)}return r}function xr(e,t,i){var n=0,r=0,a=0,s=0,l=0,c=0;if(!((a=_[e+56>>2])||((n=_[e+52>>2])?_[e+52>>2]=_[n+8>>2]:(_[5585]=_[5585]+1,n=0|o[_[4567]](12,16),r=_[e+60>>2],_[n+8>>2]=0,_[n+4>>2]=r,_[5585]=_[5585]+1,_[n>>2]=o[_[4567]](A(r,24),16),_[n+8>>2]=_[e+48>>2],_[e+48>>2]=n),a=_[n>>2],(0|(s=_[n+4>>2]))<1)))for(n=0,r=a;l=r,r=r+24|0,n=n+1|0,_[l>>2]=(0|n)<(0|s)?r:0,(0|n)!=(0|s););if(_[e+56>>2]=_[a>>2],_[a+16>>2]=0,_[a+20>>2]=0,_[a+8>>2]=0,_[a+12>>2]=0,_[a>>2]=0,_[a+4>>2]=0,!((s=_[e+56>>2])||((n=_[e+52>>2])?_[e+52>>2]=_[n+8>>2]:(_[5585]=_[5585]+1,n=0|o[_[4567]](12,16),r=_[e+60>>2],_[n+8>>2]=0,_[n+4>>2]=r,_[5585]=_[5585]+1,_[n>>2]=o[_[4567]](A(r,24),16),_[n+8>>2]=_[e+48>>2],_[e+48>>2]=n),s=_[n>>2],(0|(c=_[n+4>>2]))<1)))for(n=0,r=s;l=r,r=r+24|0,n=n+1|0,_[l>>2]=(0|n)<(0|c)?r:0,(0|n)!=(0|c););return _[e+56>>2]=_[s>>2],_[s>>2]=0,_[s+4>>2]=0,_[a+8>>2]=s,_[s+8>>2]=a,r=_[e+100>>2],_[a+20>>2]=r,_[s+20>>2]=r,_[a+12>>2]=i,_[s+12>>2]=t,_[a+16>>2]=0,_[s+16>>2]=0,i=(t=_[e+116>>2])+1|0,_[e+116>>2]=i,(0|t)>=_[e+120>>2]&&(_[e+120>>2]=i),a}function Tr(e){var t=0;(t=_[e+24>>2])&&(Tr(t),Bi(t)),_[e+24>>2]=0,(t=_[e+28>>2])&&(Tr(t),Bi(t)),_[e+28>>2]=0}function Sr(e,t,i){var n=0,r=0,o=0,a=0;e:if(r=Yn(e,t))if((0|(o=_[e+8>>2]))>=0){if(!o)break e;for(;;){if(!(n=_[r+32>>2]))break e;if(r=n,(0|o)==(0|(a=a+1|0)))break}}else r=_[e>>2];else r=0;n=_[i+4>>2],_[t>>2]=_[i>>2],_[t+4>>2]=n,n=_[i+28>>2],_[t+24>>2]=_[i+24>>2],_[t+28>>2]=n,n=_[i+20>>2],_[t+16>>2]=_[i+16>>2],_[t+20>>2]=n,n=_[i+12>>2],_[t+8>>2]=_[i+8>>2],_[t+12>>2]=n,Wn(e,r,t)}function Er(e){var t=0;(t=_[e>>2])&&qn(e,t),(t=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+4>>2]=0,_[e+8>>2]=-1,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+16>>2]=0,_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1}function Cr(e,t,i){var n,r,s=0,l=0,c=0,u=b(0),h=b(0),p=b(0),v=0,g=0,A=b(0),x=b(0),T=b(0),S=0,E=0,C=b(0),w=0;if(B=n=B-32|0,r=_[e+56>>2],1!=(i-t|0)){if(E=function(e,t,i,n){var r,o=0,a=0,s=0,l=0,c=0,u=0,h=b(0),p=b(0),f=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=0,C=b(0),w=b(0),k=b(0),O=0;if(_[24+(r=B-96|0)>>2]=0,_[r+28>>2]=0,_[r+16>>2]=0,_[r+20>>2]=0,!(o=(0|i)<=(0|t))){for(E=d[e+60|0],u=t;E?(s=_[e+116>>2]+(u<<4)|0,g=y[e+44>>2],f=y[e+12>>2],A=b(b(b(m[s+4>>1])/g)+f),p=y[e+40>>2],C=y[e+8>>2],h=b(b(b(m[s+2>>1])/p)+C),w=y[e+36>>2],k=y[e+4>>2],v=b(b(b(m[s>>1])/w)+k),g=b(b(b(m[s+10>>1])/g)+f),f=b(b(b(m[s+8>>1])/p)+C),p=b(b(b(m[s+6>>1])/w)+k)):(s=_[e+76>>2]+(u<<6)|0,A=y[s+8>>2],h=y[s+4>>2],v=y[s>>2],g=y[s+24>>2],f=y[s+20>>2],p=y[s+16>>2]),x=b(b(b(g+A)*b(.5))+x),T=b(b(b(f+h)*b(.5))+T),S=b(b(b(p+v)*b(.5))+S),(0|(u=u+1|0))!=(0|i););y[r+24>>2]=x,y[r+20>>2]=T,y[r+16>>2]=S}if(E=i-t|0,h=b(b(1)/b(0|E)),y[r+24>>2]=h*x,y[r+20>>2]=h*T,y[r+16>>2]=h*S,s=t,!o)for(g=y[(n<<=2)+(r+16|0)>>2],O=n+r|0,s=u=t;(o=d[e+60|0])?(n=_[e+116>>2]+(u<<4)|0,h=y[e+44>>2],v=y[e+12>>2],x=b(b(b(m[n+4>>1])/h)+v),A=y[e+40>>2],f=y[e+8>>2],T=b(b(b(m[n+2>>1])/A)+f),p=y[e+36>>2],C=y[e+4>>2],S=b(b(b(m[n>>1])/p)+C),h=b(b(b(m[n+10>>1])/h)+v),v=b(b(b(m[n+8>>1])/A)+f),p=b(b(b(m[n+6>>1])/p)+C)):(n=_[e+76>>2]+(u<<6)|0,x=y[n+8>>2],T=y[n+4>>2],S=y[n>>2],h=y[n+24>>2],v=y[n+20>>2],p=y[n+16>>2]),A=p,_[r+12>>2]=0,y[r+8>>2]=b(h+x)*b(.5),y[r+4>>2]=b(v+T)*b(.5),y[r>>2]=b(A+S)*b(.5),y[O>>2]>g&&(o?(c=_[e+116>>2],l=_[4+(a=8+(n=o=c+(u<<4)|0)|0)>>2],_[r+40>>2]=_[a>>2],_[r+44>>2]=l,a=_[n+4>>2],_[r+32>>2]=_[n>>2],_[r+36>>2]=a,a=_[4+(o=(o=c)+(c=s<<4)|0)>>2],_[n>>2]=_[o>>2],_[n+4>>2]=a,a=_[o+12>>2],_[n+8>>2]=_[o+8>>2],_[n+12>>2]=a,n=c+_[e+116>>2]|0,c=_[r+36>>2],_[n>>2]=_[r+32>>2],_[n+4>>2]=c,o=_[r+44>>2],_[n+8>>2]=_[r+40>>2],_[n+12>>2]=o):(o=_[e+76>>2],a=_[4+(c=56+(n=o+(u<<6)|0)|0)>>2],_[r+88>>2]=_[c>>2],_[r+92>>2]=a,c=_[n+52>>2],_[r+80>>2]=_[n+48>>2],_[r+84>>2]=c,c=_[n+44>>2],_[r+72>>2]=_[n+40>>2],_[r+76>>2]=c,l=_[n+36>>2],_[(a=c=r- -64|0)>>2]=_[n+32>>2],_[a+4>>2]=l,a=_[n+28>>2],_[r+56>>2]=_[n+24>>2],_[r+60>>2]=a,a=_[n+20>>2],_[r+48>>2]=_[n+16>>2],_[r+52>>2]=a,a=_[n+12>>2],_[r+40>>2]=_[n+8>>2],_[r+44>>2]=a,a=_[n+4>>2],_[r+32>>2]=_[n>>2],_[r+36>>2]=a,l=_[4+(o=o+(a=s<<6)|0)>>2],_[n>>2]=_[o>>2],_[n+4>>2]=l,l=_[o+12>>2],_[n+8>>2]=_[o+8>>2],_[n+12>>2]=l,l=_[o+20>>2],_[n+16>>2]=_[o+16>>2],_[n+20>>2]=l,l=_[o+28>>2],_[n+24>>2]=_[o+24>>2],_[n+28>>2]=l,l=_[o+36>>2],_[n+32>>2]=_[o+32>>2],_[n+36>>2]=l,l=_[o+44>>2],_[n+40>>2]=_[o+40>>2],_[n+44>>2]=l,l=_[o+52>>2],_[n+48>>2]=_[o+48>>2],_[n+52>>2]=l,l=_[o+60>>2],_[n+56>>2]=_[o+56>>2],_[n+60>>2]=l,n=_[e+76>>2]+a|0,a=_[r+36>>2],_[n>>2]=_[r+32>>2],_[n+4>>2]=a,o=_[r+44>>2],_[n+8>>2]=_[r+40>>2],_[n+12>>2]=o,o=_[r+52>>2],_[n+16>>2]=_[r+48>>2],_[n+20>>2]=o,o=_[r+60>>2],_[n+24>>2]=_[r+56>>2],_[n+28>>2]=o,o=_[c+4>>2],_[n+32>>2]=_[c>>2],_[n+36>>2]=o,o=_[r+76>>2],_[n+40>>2]=_[r+72>>2],_[n+44>>2]=o,o=_[r+84>>2],_[n+48>>2]=_[r+80>>2],_[n+52>>2]=o,o=_[r+92>>2],_[n+56>>2]=_[r+88>>2],_[n+60>>2]=o),s=s+1|0),(0|(u=u+1|0))!=(0|i););return n=e=(E>>1)+t|0,(0|s)>=((-1^(e=(0|E)/3|0))+i|0)||(0|s)<=(e+t|0)?n:s}(e,t,i,function(e,t,i){var n,r=0,o=b(0),a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=0,w=b(0);n=i-t|0;e:{t:{if((0|i)<=(0|t))h=b(0|n);else{for(C=d[e+60|0],r=t;C?(a=_[e+116>>2]+(r<<4)|0,c=y[e+44>>2],u=y[e+12>>2],o=b(b(b(m[a+4>>1])/c)+u),h=y[e+40>>2],f=y[e+8>>2],p=b(b(b(m[a+2>>1])/h)+f),x=y[e+36>>2],T=y[e+4>>2],g=b(b(b(m[a>>1])/x)+T),c=b(b(b(m[a+10>>1])/c)+u),u=b(b(b(m[a+8>>1])/h)+f),h=b(b(b(m[a+6>>1])/x)+T)):(a=_[e+76>>2]+(r<<6)|0,o=y[a+8>>2],p=y[a+4>>2],g=y[a>>2],c=y[a+24>>2],u=y[a+20>>2],h=y[a+16>>2]),s=b(s+b(b(c+o)*b(.5))),l=b(l+b(b(u+p)*b(.5))),A=b(A+b(b(h+g)*b(.5))),(0|(r=r+1|0))!=(0|i););if(h=b(0|n),o=b(0),(0|i)>(0|t))break t}s=b(0),l=b(0);break e}for(o=b(b(1)/h),x=b(o*s),T=b(o*l),w=b(o*A),l=b(0),a=d[e+60|0],s=b(0),o=b(0);a?(r=_[e+116>>2]+(t<<4)|0,c=y[e+44>>2],u=y[e+12>>2],A=b(b(b(m[r+4>>1])/c)+u),f=y[e+40>>2],v=y[e+8>>2],p=b(b(b(m[r+2>>1])/f)+v),S=y[e+36>>2],E=y[e+4>>2],g=b(b(b(m[r>>1])/S)+E),c=b(b(b(m[r+10>>1])/c)+u),u=b(b(b(m[r+8>>1])/f)+v),f=b(b(b(m[r+6>>1])/S)+E)):(r=_[e+76>>2]+(t<<6)|0,A=y[r+8>>2],p=y[r+4>>2],g=y[r>>2],c=y[r+24>>2],u=y[r+20>>2],f=y[r+16>>2]),v=l,l=b(b(b(c+A)*b(.5))-x),l=b(v+b(l*l)),v=s,s=b(b(b(u+p)*b(.5))-T),s=b(v+b(s*s)),v=o,o=b(b(b(f+g)*b(.5))-w),o=b(v+b(o*o)),(0|i)!=(0|(t=t+1|0)););}return p=b(b(1)/b(h+b(-1))),s=b(p*s),l=b(p*l),(o=b(p*o))<s?s<l?2:1:(o<l)<<1}(e,t,i)),g=_[e+56>>2],d[e+60|0]?(h=y[e+40>>2],p=y[e+8>>2],A=y[e+24>>2],x=y[e+44>>2],T=y[e+12>>2],C=y[e+28>>2],s=l=_[e+136>>2]+(g<<4)|0,c=(u=b(b(y[e+20>>2]-y[e+4>>2])*y[e+36>>2]))<b(4294967296)&u>=b(0)?~~u>>>0:0,f[s>>1]=65534&c,s=l,c=(u=b(b(C-T)*x))<b(4294967296)&u>=b(0)?~~u>>>0:0,f[s+4>>1]=65534&c,s=(u=b(b(A-p)*h))<b(4294967296)&u>=b(0)?~~u>>>0:0,f[l+2>>1]=65534&s):(v=_[e+24>>2],l=_[e+96>>2]+(g<<6)|0,_[l>>2]=_[e+20>>2],_[l+4>>2]=v,s=_[e+32>>2],_[l+8>>2]=_[e+28>>2],_[l+12>>2]=s),l=_[e+56>>2],d[e+60|0]?(A=y[e+40>>2],u=y[e+8>>2],x=y[e+44>>2],h=y[e+12>>2],s=l=_[e+136>>2]+(l<<4)|0,p=y[e+4>>2],c=(p=b(b(b(p-p)*y[e+36>>2])+b(1)))<b(4294967296)&p>=b(0)?~~p>>>0:0,f[s+6>>1]=1|c,s=l,c=(h=b(b(b(h-h)*x)+b(1)))<b(4294967296)&h>=b(0)?~~h>>>0:0,f[s+10>>1]=1|c,s=(u=b(b(b(u-u)*A)+b(1)))<b(4294967296)&u>=b(0)?~~u>>>0:0,f[l+8>>1]=1|s):(v=_[e+8>>2],l=_[e+96>>2]+(l<<6)|0,_[l+16>>2]=_[e+4>>2],_[l+20>>2]=v,s=_[e+16>>2],_[l+24>>2]=_[e+12>>2],_[l+28>>2]=s),v=_[e+56>>2],(0|i)>(0|t))for(l=t;d[e+60|0]?(s=_[e+116>>2]+(l<<4)|0,c=m[s+4>>1],S=m[s+2>>1],w=m[s>>1],u=y[e+44>>2],h=y[e+40>>2],p=y[e+36>>2],_[n+28>>2]=0,A=y[e+4>>2],y[n+16>>2]=b(b(w>>>0)/p)+A,x=y[e+8>>2],y[n+20>>2]=b(b(S>>>0)/h)+x,T=y[e+12>>2],y[n+24>>2]=b(b(c>>>0)/u)+T,c=m[s+6>>1],S=m[s+8>>1],s=m[s+10>>1],_[n+12>>2]=0,y[n+8>>2]=T+b(b(s>>>0)/u),y[n+4>>2]=x+b(b(S>>>0)/h),y[n>>2]=A+b(b(c>>>0)/p)):(s=_[e+76>>2]+(l<<6)|0,c=_[s+12>>2],_[n+24>>2]=_[s+8>>2],_[n+28>>2]=c,c=_[s+4>>2],_[n+16>>2]=_[s>>2],_[n+20>>2]=c,c=_[s+28>>2],_[n+8>>2]=_[s+24>>2],_[n+12>>2]=c,c=_[s+20>>2],_[n>>2]=_[s+16>>2],_[n+4>>2]=c),vi(e,v,n+16|0,n),v=_[e+56>>2],(0|(l=l+1|0))!=(0|i););s=v+1|0,_[e+56>>2]=s,Cr(e,t,E),v=_[e+56>>2],Cr(e,E,i),!(l=d[e+60|0])|(0|(t=_[e+56>>2]-r|0))<129||(function(e,t,i){var n,r,s,l,c=0,u=0,h=0,p=0,v=0,y=0,g=0,A=0;if(B=n=B-32|0,r=_[e+136>>2],s=(0|(c=_[12+(r+(i<<4)|0)>>2]))>-1?1:0-c|0,(0|(l=(0|(c=_[12+((t<<4)+r|0)>>2]))>-1?1:0-c|0))<=128){if((0|(c=h=_[e+152>>2]))==_[e+156>>2]&&!((0|(c=h))>=(0|(y=c?c<<1:1)))){if(y?(_[5585]=_[5585]+1,c=0|o[_[4567]](y<<5,16),p=_[e+152>>2]):(c=0,p=h),(0|p)>=1)for(;v=(u=g<<5)+c|0,u=u+_[e+160>>2]|0,A=_[u+4>>2],_[v>>2]=_[u>>2],_[v+4>>2]=A,A=_[u+28>>2],_[v+24>>2]=_[u+24>>2],_[v+28>>2]=A,A=_[u+20>>2],_[v+16>>2]=_[u+16>>2],_[v+20>>2]=A,A=_[u+12>>2],_[v+8>>2]=_[u+8>>2],_[v+12>>2]=A,(0|p)!=(0|(g=g+1|0)););(p=_[e+160>>2])&&(d[e+164|0]&&p&&(_[5586]=_[5586]+1,o[_[4568]](p)),_[e+160>>2]=0),_[e+160>>2]=c,_[e+156>>2]=y,a[e+164|0]=1,c=_[e+152>>2]}_[e+152>>2]=c+1,u=_[(c=n)+4>>2],h=(p=h<<5)+_[e+160>>2]|0,_[h>>2]=_[c>>2],_[h+4>>2]=u,u=_[c+28>>2],_[h+24>>2]=_[c+24>>2],_[h+28>>2]=u,u=_[c+20>>2],_[h+16>>2]=_[c+16>>2],_[h+20>>2]=u,u=_[c+12>>2],_[h+8>>2]=_[c+8>>2],_[h+12>>2]=u,c=p+_[e+160>>2]|0,h=(t<<4)+r|0,f[c>>1]=m[h>>1],f[c+2>>1]=m[h+2>>1],f[c+4>>1]=m[h+4>>1],f[c+6>>1]=m[h+6>>1],f[c+8>>1]=m[h+8>>1],h=m[h+10>>1],_[c+16>>2]=l,_[c+12>>2]=t,f[c+10>>1]=h}if((0|s)<=128){if((0|(c=h=_[e+152>>2]))==_[e+156>>2]&&!((0|(c=h))>=(0|(v=c?c<<1:1)))){if(v?(_[5585]=_[5585]+1,t=0|o[_[4567]](v<<5,16),c=_[e+152>>2]):(t=0,c=h),(0|c)>=1)for(g=0;p=(u=g<<5)+t|0,u=u+_[e+160>>2]|0,y=_[u+4>>2],_[p>>2]=_[u>>2],_[p+4>>2]=y,y=_[u+28>>2],_[p+24>>2]=_[u+24>>2],_[p+28>>2]=y,y=_[u+20>>2],_[p+16>>2]=_[u+16>>2],_[p+20>>2]=y,y=_[u+12>>2],_[p+8>>2]=_[u+8>>2],_[p+12>>2]=y,(0|c)!=(0|(g=g+1|0)););(c=_[e+160>>2])&&(d[e+164|0]&&c&&(_[5586]=_[5586]+1,o[_[4568]](c)),_[e+160>>2]=0),_[e+160>>2]=t,_[e+156>>2]=v,a[e+164|0]=1,c=_[e+152>>2]}_[e+152>>2]=c+1,u=_[(t=n)+4>>2],c=(h<<=5)+_[e+160>>2]|0,_[c>>2]=_[t>>2],_[c+4>>2]=u,p=_[t+28>>2],_[c+24>>2]=_[t+24>>2],_[c+28>>2]=p,p=_[t+20>>2],_[c+16>>2]=_[t+16>>2],_[c+20>>2]=p,p=_[t+12>>2],_[c+8>>2]=_[t+8>>2],_[c+12>>2]=p,t=h+_[e+160>>2]|0,c=(i<<4)+r|0,f[t>>1]=m[c>>1],f[t+2>>1]=m[c+2>>1],f[t+4>>1]=m[c+4>>1],f[t+6>>1]=m[c+6>>1],f[t+8>>1]=m[c+8>>1],c=m[c+10>>1],_[t+16>>2]=s,_[t+12>>2]=i,f[t+10>>1]=c}_[e+168>>2]=_[e+152>>2],B=n+32|0}(e,s,v),l=d[e+60|0]),255&l?_[12+(_[e+136>>2]+(g<<4)|0)>>2]=0-t:_[32+(_[e+96>>2]+(g<<6)|0)>>2]=t}else d[e+60|0]?(t=_[e+116>>2]+(t<<4)|0,g=_[(s=t)+4>>2],i=_[e+136>>2]+(r<<4)|0,_[(l=i)>>2]=_[s>>2],_[l+4>>2]=g):(t=_[e+76>>2]+(t<<6)|0,g=_[(l=t)+4>>2],i=_[e+96>>2]+(r<<6)|0,_[(s=i)>>2]=_[l>>2],_[s+4>>2]=g,s=_[l+60>>2],_[i+56>>2]=_[l+56>>2],_[i+60>>2]=s,s=_[l+52>>2],_[i+48>>2]=_[l+48>>2],_[i+52>>2]=s,s=_[l+44>>2],_[i+40>>2]=_[l+40>>2],_[i+44>>2]=s,s=_[l+36>>2],_[i+32>>2]=_[l+32>>2],_[i+36>>2]=s,s=_[l+28>>2],_[i+24>>2]=_[l+24>>2],_[i+28>>2]=s,s=_[l+20>>2],_[i+16>>2]=_[l+16>>2],_[i+20>>2]=s),l=_[t+12>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=l,_[e+56>>2]=_[e+56>>2]+1;B=n+32|0}function wr(e,t,i){var n=0,r=0,s=0,l=0,c=b(0),u=0,h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=0;e:{if(d[e+165|0]){if(!(!i|(0|(n=_[e+88>>2]))<1))for(s=_[e+96>>2],p=y[e+168>>2],f=y[t+8>>2],m=y[t+4>>2],v=y[t>>2],i=0;;){if(c=b(y[(r=s+(i<<4)|0)>>2]-v),h=b(c*c),c=b(y[r+4>>2]-m),h=b(h+b(c*c)),c=b(y[r+8>>2]-f),b(h+b(c*c))<=p)break e;if(!((0|(i=i+1|0))<(0|n)))break}if(i=_[e+32>>2],_[i+12>>2]=_[i+12>>2]+1,_[e+92>>2]==(0|n)&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(_[5585]=_[5585]+1,l=0|o[_[4567]](r<<4,16),n=_[e+88>>2]),(0|n)>=1)for(i=0;u=(s=i<<4)+l|0,s=s+_[e+96>>2]|0,g=_[s+4>>2],_[u>>2]=_[s>>2],_[u+4>>2]=g,g=_[s+12>>2],_[u+8>>2]=_[s+8>>2],_[u+12>>2]=g,(0|n)!=(0|(i=i+1|0)););(i=_[e+96>>2])&&(d[e+100|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+96>>2]=0),_[e+96>>2]=l,_[e+92>>2]=r,a[e+100|0]=1,n=_[e+88>>2]}return i=_[e+96>>2]+(n<<4)|0,n=_[t+4>>2],_[i>>2]=_[t>>2],_[i+4>>2]=n,n=_[t+12>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=n,t=_[e+88>>2],_[e+88>>2]=t+1,_[_[e+32>>2]+16>>2]=_[e+96>>2],t}t:if(!(!i|(0|(n=_[e+108>>2]))<1)){for(s=_[e+116>>2],p=y[e+168>>2],f=y[t+8>>2],m=y[t+4>>2],v=y[t>>2],i=0;;){if(c=b(y[(r=s+(i<<2)|0)>>2]-v),h=b(c*c),c=b(y[r+4>>2]-m),h=b(h+b(c*c)),c=b(y[r+8>>2]-f),!(b(h+b(c*c))<=p)){if((0|(i=i+3|0))<(0|n))continue;break t}break}return(i>>>0)/3|0}if((0|(r=_[e+112>>2]))==(0|n))if((0|n)>=(0|(r=n?n<<1:1)))r=n;else{i=0,r&&(_[5585]=_[5585]+1,l=0|o[_[4567]](r<<2,16),n=_[e+108>>2]),s=_[e+116>>2];t:{i:{if((0|n)>=1)for(;;)if(_[(u=i<<2)+l>>2]=_[s+u>>2],(0|n)==(0|(i=i+1|0)))break i;if(!s)break t}d[e+120|0]&&(s&&(_[5586]=_[5586]+1,o[_[4568]](s)),n=_[e+108>>2]),_[e+116>>2]=0}_[e+116>>2]=l,_[e+112>>2]=r,a[e+120|0]=1}if(l=_[e+116>>2],_[l+(n<<2)>>2]=_[t>>2],i=n+1|0,_[e+108>>2]=i,(0|i)==(0|r))if((0|r)>=(0|(s=r?r<<1:1)))n=l,s=r;else{i=0,n=0,s&&(_[5585]=_[5585]+1,n=0|o[_[4567]](s<<2,16),r=_[e+108>>2],l=_[e+116>>2]);t:{i:{if((0|r)>=1)for(;;)if(_[(u=i<<2)+n>>2]=_[l+u>>2],(0|r)==(0|(i=i+1|0)))break i;if(!l)break t}d[e+120|0]&&(l&&(_[5586]=_[5586]+1,o[_[4568]](l)),r=_[e+108>>2]),_[e+116>>2]=0}_[e+116>>2]=n,_[e+112>>2]=s,a[e+120|0]=1}else n=l,s=r,r=i;if(_[(r<<2)+n>>2]=_[t+4>>2],i=r+1|0,_[e+108>>2]=i,(0|i)==(0|s))if((0|s)>=(0|(r=s?s<<1:1)))l=n;else{i=0,l=0,r&&(_[5585]=_[5585]+1,l=0|o[_[4567]](r<<2,16),s=_[e+108>>2],n=_[e+116>>2]);t:{i:{if((0|s)>=1)for(;;)if(_[(u=i<<2)+l>>2]=_[n+u>>2],(0|s)==(0|(i=i+1|0)))break i;if(!n)break t}d[e+120|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),s=_[e+108>>2]),_[e+116>>2]=0}_[e+116>>2]=l,_[e+112>>2]=r,a[e+120|0]=1}else l=n,s=i;_[(s<<2)+l>>2]=_[t+8>>2],t=s+1|0,_[e+108>>2]=t,e=_[e+32>>2],_[e+16>>2]=l,_[e+12>>2]=_[e+12>>2]+1,i=((0|t)/3|0)-1|0}return i}function kr(e,t,i){var n,r=0,s=0,l=0;if(_[e>>2]=13164,a[e+36|0]=1,_[e+12>>2]=1065353216,_[e+16>>2]=0,_[e+4>>2]=1065353216,_[e+8>>2]=1065353216,_[e+32>>2]=0,_[e+48>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+100|0]=1,_[e+96>>2]=0,a[e+120|0]=1,_[e+88>>2]=0,_[e+92>>2]=0,_[e+116>>2]=0,a[e+140|0]=1,_[e+108>>2]=0,_[e+112>>2]=0,_[e+136>>2]=0,a[e+160|0]=1,_[e+128>>2]=0,_[e+132>>2]=0,_[e+168>>2]=0,a[e+164|0]=t,_[e+148>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,a[e+165|0]=i,_[5585]=_[5585]+1,l=0|o[_[4567]](32,16),(0|(n=_[e+24>>2]))>=1)for(;i=(t=s<<5)+l|0,t=t+_[e+32>>2]|0,r=_[t+4>>2],_[i>>2]=_[t>>2],_[i+4>>2]=r,r=_[t+28>>2],_[i+24>>2]=_[t+24>>2],_[i+28>>2]=r,r=_[t+20>>2],_[i+16>>2]=_[t+16>>2],_[i+20>>2]=r,r=_[t+12>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=r,(0|n)!=(0|(s=s+1|0)););(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=l,a[e+36|0]=1,_[e+28>>2]=1,t=l+(_[e+24>>2]<<5)|0,_[t+24>>2]=2,_[t+28>>2]=0,_[t+16>>2]=0,_[t+20>>2]=16,_[t+8>>2]=12,_[t+12>>2]=0,_[t>>2]=0,_[t+4>>2]=0,_[e+24>>2]=_[e+24>>2]+1,i=d[e+164|0],l=_[(i?128:148)+e>>2],t=_[e+32>>2],_[t+24>>2]=i?2:3,_[t+4>>2]=0,s=12,_[t+8>>2]=i?12:6,_[t>>2]=(0|l)/3,d[e+165|0]?(s=16,e=_[e+88>>2]):e=_[e+108>>2]/3|0,_[t+20>>2]=s,_[t+16>>2]=0,_[t+12>>2]=e}function Or(e,t){e|=0,t|=0;var i=b(0),n=b(0),r=b(0);i=y[t>>2],n=y[t+4>>2],r=y[t+8>>2],_[e+28>>2]=0,y[e+24>>2]=x(r),y[e+20>>2]=x(n),y[e+16>>2]=x(i)}function Rr(e){return 60}function Fr(e){var t,i,n=b(0),r=b(0),o=b(0),a=0,s=0,l=0,c=0,u=0;for(i=(0|(t=_[e+28>>2]))<1;;){e:if(!(a>>>0>7)){switch(a-1|0){default:n=b(y[e+88>>2]+y[e+72>>2]),r=b(y[e+84>>2]+y[e+68>>2]),o=b(y[e+80>>2]+y[e+64>>2]);break e;case 0:n=b(y[e+72>>2]-y[e+88>>2]),r=b(y[e+84>>2]+y[e+68>>2]),o=b(y[e+80>>2]+y[e+64>>2]);break e;case 1:n=b(y[e+88>>2]+y[e+72>>2]),r=b(y[e+68>>2]-y[e+84>>2]),o=b(y[e+80>>2]+y[e+64>>2]);break e;case 2:n=b(y[e+72>>2]-y[e+88>>2]),r=b(y[e+68>>2]-y[e+84>>2]),o=b(y[e+80>>2]+y[e+64>>2]);break e;case 3:n=b(y[e+88>>2]+y[e+72>>2]),r=b(y[e+84>>2]+y[e+68>>2]),o=b(y[e+64>>2]-y[e+80>>2]);break e;case 4:n=b(y[e+72>>2]-y[e+88>>2]),r=b(y[e+84>>2]+y[e+68>>2]),o=b(y[e+64>>2]-y[e+80>>2]);break e;case 5:n=b(y[e+88>>2]+y[e+72>>2]),r=b(y[e+68>>2]-y[e+84>>2]),o=b(y[e+64>>2]-y[e+80>>2]);break e;case 6:}n=b(y[e+72>>2]-y[e+88>>2]),r=b(y[e+68>>2]-y[e+84>>2]),o=b(y[e+64>>2]-y[e+80>>2])}e:{if(!i)for(u=_[e+36>>2],c=0,s=0;;){if(l=A(s,36)+u|0,b(y[l+32>>2]+b(b(b(o*y[l+20>>2])+b(r*y[l+24>>2]))+b(n*y[l+28>>2])))>b(0))break e;if(!((0|(s=s+1|0))<(0|t)))break}if(c=1,8!=(0|(a=a+1|0)))continue}break}return c}function Ir(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]+8>>2]=y[e+8>>2],B=i+16|0}function Mr(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]+4>>2]=y[e+8>>2],B=i+16|0}function Pr(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]>>2]=y[e+8>>2],B=i+16|0}function Dr(e){var t,i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0;if(!((0|(t=_[e+28>>2]))>=(0|(n=_[e+12>>2])))){e:if(_[e+32>>2]>=(0|n))i=_[e+36>>2];else{r=t,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](n<<2,16),r=_[e+28>>2]),l=_[e+36>>2];t:{if((0|r)>=1)for(;;)if(_[(c=s<<2)+i>>2]=_[l+c>>2],(0|(s=s+1|0))==(0|r))break t;if(!l){_[e+36>>2]=i,_[e+32>>2]=n,a[e+40|0]=1;break e}}d[e+40|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+36>>2]=i,a[e+40|0]=1,_[e+32>>2]=n}if(Pi((r=t<<2)+i|0,0,(c=n<<2)-r|0),_[e+28>>2]=n,(0|(l=_[e+48>>2]))<(0|n)){e:if(_[e+52>>2]>=(0|n))i=_[e+56>>2];else{s=0,r=l,i=0,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](c,16),r=_[e+48>>2]),u=_[e+56>>2];t:{if((0|r)>=1)for(;;)if(_[(h=s<<2)+i>>2]=_[u+h>>2],(0|(s=s+1|0))==(0|r))break t;if(!u){_[e+56>>2]=i,_[e+52>>2]=n,a[e+60|0]=1;break e}}d[e+60|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+56>>2]=i,a[e+60|0]=1,_[e+52>>2]=n}Pi((r=l<<2)+i|0,0,c-r|0)}if(_[e+48>>2]=n,(0|n)>=1&&(Pi(_[e+36>>2],255,c),Pi(_[e+56>>2],255,c)),!((0|t)<1))for(r=_[e+56>>2],l=_[e+16>>2],n=_[e+36>>2],s=0;i=l+A(s,12)|0,i=_[i+4>>2]<<16|_[i>>2],i=A((i=(i<<15^-1)+i|0)>>>10^i,9),i=((i^=i>>>6)<<11^-1)+i|0,i=n+((_[e+12>>2]+-1&(i>>>16^i))<<2)|0,_[r+(s<<2)>>2]=_[i>>2],_[i>>2]=s,(0|t)!=(0|(s=s+1|0)););}}function Br(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]+8>>2])}function Nr(e){var t,i=0,n=0,r=0;if(_[(e|=0)>>2]=9236,(0|(t=_[e+52>>2]))>=1)for(;(n=_[(r=i<<2)+_[e+60>>2]>>2])&&(o[_[_[n>>2]>>2]](n),n=_[e+4>>2],o[_[_[n>>2]+60>>2]](n,_[_[e+60>>2]+r>>2])),(0|t)!=(0|(i=i+1|0)););return(i=_[e+60>>2])&&(d[e- -64|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+60>>2]=0),_[e+60>>2]=0,_[e+52>>2]=0,_[e+56>>2]=0,a[e- -64|0]=1,(i=_[e+40>>2])&&(d[e+44|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+40>>2]=0),_[e+40>>2]=0,_[e+32>>2]=0,_[e+36>>2]=0,a[e+44|0]=1,(i=_[e+20>>2])&&(d[e+24|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+20>>2]=0),_[e+20>>2]=0,_[e+12>>2]=0,_[e+16>>2]=0,a[e+24|0]=1,0|e}function Lr(e,t,i,n,r){_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e>>2]=3588,a[e+24|0]=1,_[e>>2]=9236,_[e+20>>2]=0,a[e+44|0]=1,_[e+12>>2]=0,_[e+16>>2]=0,_[e+40>>2]=0,a[e- -64|0]=1,_[e+32>>2]=0,_[e+36>>2]=0,_[e+60>>2]=0,a[e+68|0]=r,_[e+52>>2]=0,_[e+56>>2]=0,t=_[t+4>>2],a[e+76|0]=0,_[e+72>>2]=t,_[e+80>>2]=_[_[(r?n:i)+4>>2]+72>>2],Oa(e,i,n)}function zr(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]+4>>2])}function Gr(e,t,i,n,r,o,a,s,l,c,u){var h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0);g=y[(s=(s<<2)+c|0)>>2],A=b(y[c+48>>2]-y[l+48>>2]),E=y[s+16>>2],C=b(y[c+52>>2]-y[l+52>>2]),k=y[s+32>>2],O=b(y[c+56>>2]-y[l+56>>2]),f=b(b(b(g*A)+b(E*C))+b(k*O)),T=y[(a=(a<<2)+l|0)>>2],d=y[a+16>>2],v=y[a+32>>2],S=b(b(b(T*A)+b(d*C))+b(v*O)),m=b(b(b(T*g)+b(d*E))+b(v*k)),(p=b(b(1)-b(m*m)))!=b(0)&&((p=b(b(S-b(m*f))/p))<(h=b(-i))||(h=p)>i&&(h=i));e:{if((p=b(b(m*h)-f))<(f=b(-r))){if((r=b(S-b(m*r)))<(h=b(-i))){p=f;break e}if(!(r>i)){p=f,h=r;break e}r=f}else{if(!(p>r))break e;if((f=b(b(m*r)+S))<(h=b(-i))){p=r;break e}if(!(f>i)){p=r,h=f;break e}}p=r,h=i}if(f=b(k*p),i=b(f+b(O-b(v*h))),m=b(g*p),r=b(m+b(A-b(T*h))),p=b(E*p),h=b(p+b(C-b(d*h))),S=b(b(i*i)+b(b(r*r)+b(h*h))),g=b(w(S)),!((A=b(b(g-n)-o))>u)){e:if(S<=b(14210854715202004e-30)){if(b(x(v))>b(.7071067690849304)){_[e>>2]=0,n=b(b(1)/b(w(b(b(d*d)+b(v*v))))),i=b(d*n),y[e+8>>2]=i,h=b(n*b(-v)),y[e+4>>2]=h,n=b(0);break e}_[e+8>>2]=0,i=b(b(1)/b(w(b(b(T*T)+b(d*d))))),h=b(T*i),y[e+4>>2]=h,n=b(i*b(-d)),y[e>>2]=n,i=b(0)}else _[e+12>>2]=0,n=b(b(-1)/g),i=b(i*n),y[e+8>>2]=i,h=b(h*n),y[e+4>>2]=h,n=b(r*n),y[e>>2]=n;r=y[c+48>>2],u=y[c+52>>2],d=y[c+56>>2],_[t+12>>2]=0,y[t+8>>2]=b(f+d)+b(i*o),y[t+4>>2]=b(p+u)+b(h*o),y[t>>2]=b(m+r)+b(n*o)}return A}function Ur(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]>>2])}function Xr(e,t,i,n,r,o,a){var s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),_=b(0);return s=y[n>>2],u=y[n+4>>2],h=y[n+8>>2],f=b(b(b(y[i>>2]*s)+b(y[i+4>>2]*u))+b(y[i+8>>2]*h)),l=b(b(b(s*y[e>>2])+b(u*y[e+16>>2]))+b(h*y[e+32>>2])),c=y[r+80>>2],p=b(l*(l<b(0)?b(-c):c)),l=b(b(b(s*y[e+4>>2])+b(u*y[e+20>>2]))+b(h*y[e+36>>2])),c=y[r+84>>2],p=b(p+b(l*(l<b(0)?b(-c):c))),l=b(b(b(s*y[e+8>>2])+b(u*y[e+24>>2]))+b(h*y[e+40>>2])),c=y[r+88>>2],p=(l=b(p+b(l*(l<b(0)?b(-c):c))))>(c=y[r+96>>2])?l:c,l=b(b(b(s*y[t>>2])+b(u*y[t+16>>2]))+b(h*y[t+32>>2])),c=y[o+80>>2],_=b(l*(l<b(0)?b(-c):c)),l=b(b(b(s*y[t+4>>2])+b(u*y[t+20>>2]))+b(h*y[t+36>>2])),c=y[o+84>>2],s=b(b(b(s*y[t+8>>2])+b(u*y[t+24>>2]))+b(h*y[t+40>>2])),u=y[o+88>>2],s=b(b(_+b(l*(l<b(0)?b(-c):c)))+b(s*(s<b(0)?b(-u):u))),u=y[o+96>>2],s=b(p+(s>u?s:u)),((u=b(f+s))<(s=b(s-f))?u:s)>a^1}function Vr(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+4>>2]=y[i+8>>2]}function Hr(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+4>>2])}function jr(e,t){e|=0;var i=0,n=0,r=0,a=0,s=0,l=0,c=0;(n=_[188+(t|=0)>>2])&&(i=_[e+68>>2],i=0|o[_[_[i>>2]+36>>2]](i),o[_[_[i>>2]+40>>2]](i,n,_[e+24>>2]),i=_[e+68>>2],o[_[_[i>>2]+12>>2]](i,n,_[e+24>>2]),_[t+188>>2]=0);e:if((0|(i=_[t+216>>2]))<0|(0|i)>=(0|(n=_[e+8>>2]))){if(!((0|n)<1)){for(r=_[e+16>>2],i=0;;){if(_[(a=r+(i<<2)|0)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break e}break}(0|n)<=(0|i)||(i=(n=n+-1|0)<<2,_[a>>2]=_[i+r>>2],_[i+_[e+16>>2]>>2]=t,_[e+8>>2]=n)}}else{if(r=_[e+16>>2],l=_[(s=r+(a=i<<2)|0)>>2],c=r,r=(n=n+-1|0)<<2,_[s>>2]=_[c+r>>2],_[r+_[e+16>>2]>>2]=l,_[e+8>>2]=n,(0|i)>=(0|n))break e;_[_[a+_[e+16>>2]>>2]+216>>2]=i}_[t+216>>2]=-1}function Wr(e){var t=0,i=0,n=0,r=0,s=0;if(_[(e|=0)>>2]=6184,t=_[e+16>>2],(0|(i=_[e+8>>2]))>=1)for(;s=_[(n<<2)+t>>2],(r=_[s+188>>2])&&(t=_[e+68>>2],t=0|o[_[_[t>>2]+36>>2]](t),o[_[_[t>>2]+40>>2]](t,r,_[e+24>>2]),t=_[e+68>>2],o[_[_[t>>2]+12>>2]](t,r,_[e+24>>2]),_[s+188>>2]=0,i=_[e+8>>2],t=_[e+16>>2]),(0|(n=n+1|0))<(0|i););return t&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,0|e}function Yr(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+16>>2]=_[i+8>>2]}function qr(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0;var c,u,h=0,f=b(0),m=b(0),v=0,g=b(0),A=0,x=b(0),T=b(0),S=b(0),E=0,C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0);B=c=B-288|0,ur(_[e+4>>2]),f=y[t+52>>2],m=y[i+52>>2],g=y[n+52>>2],x=y[r+52>>2],T=y[t+56>>2],S=y[i+56>>2],C=y[n+56>>2],w=y[r+56>>2],k=y[t+48>>2],O=y[i+48>>2],R=y[n+48>>2],F=y[r+48>>2],a[c+264|0]=0,_[c+260>>2]=1566444395,_[c+224>>2]=5928,u=io(c+144|0,_[e+8>>2],_[e+12>>2],_[e+4>>2],0),_[c+136>>2]=1566444395,h=_[(e=t)+12>>2],_[c+16>>2]=_[e+8>>2],_[c+20>>2]=h,h=_[e+4>>2],_[c+8>>2]=_[e>>2],_[c+12>>2]=h,h=_[e+28>>2],_[c+32>>2]=_[e+24>>2],_[c+36>>2]=h,h=_[e+20>>2],_[c+24>>2]=_[e+16>>2],_[c+28>>2]=h,h=_[e+44>>2],_[c+48>>2]=_[e+40>>2],_[c+52>>2]=h,h=_[e+36>>2],_[c+40>>2]=_[e+32>>2],_[c+44>>2]=h,A=_[e+60>>2],_[(h=c- -64|0)>>2]=_[e+56>>2],_[h+4>>2]=A,h=_[e+52>>2],_[c+56>>2]=_[e+48>>2],_[c+60>>2]=h,h=_[(e=n)+12>>2],_[c+80>>2]=_[e+8>>2],_[c+84>>2]=h,h=_[e+4>>2],_[c+72>>2]=_[e>>2],_[c+76>>2]=h,h=_[e+20>>2],_[c+88>>2]=_[e+16>>2],_[c+92>>2]=h,h=_[e+28>>2],_[c+96>>2]=_[e+24>>2],_[c+100>>2]=h,h=_[e+44>>2],_[c+112>>2]=_[e+40>>2],_[c+116>>2]=h,h=_[e+36>>2],_[c+104>>2]=_[e+32>>2],_[c+108>>2]=h,h=_[e+52>>2],_[c+120>>2]=_[e+48>>2],_[c+124>>2]=h,h=_[e+60>>2],_[c+128>>2]=_[e+56>>2],_[c+132>>2]=h,on(u,c+8|0,c+224|0,0),e=_[c+256>>2],_[c+280>>2]=_[c+252>>2],_[c+284>>2]=e,e=_[c+248>>2],_[c+272>>2]=_[c+244>>2],_[c+276>>2]=e,v=0;e:if(d[c+264|0]){T=b(b(S-T)-b(w-C)),x=b(b(m-f)-b(x-g)),S=b(b(O-k)-b(F-R)),A=_[c+232>>2],h=_[c+236>>2],E=_[c+228>>2];t:{if((g=y[c+260>>2])>b(.0010000000474974513)){for(e=0,m=b(0);;){if(v=0,32==(0|e))break e;if(v=0,(f=b(m-b(g/b(b(T*(l(0,h),p()))+b(b(x*(l(0,A),p()))+b(S*(l(0,E),p())))))))<=m)break e;if(v=0,f<b(0))break e;if(v=0,f>b(1))break e;if(o[_[_[s>>2]>>2]](s,f),m=b(b(1)-f),y[c+56>>2]=b(m*y[t+48>>2])+b(f*y[i+48>>2]),y[c+60>>2]=b(m*y[t+52>>2])+b(f*y[i+52>>2]),y[c+64>>2]=b(m*y[t+56>>2])+b(f*y[i+56>>2]),y[c+120>>2]=b(m*y[n+48>>2])+b(f*y[r+48>>2]),y[c+124>>2]=b(m*y[n+52>>2])+b(f*y[r+52>>2]),y[c+128>>2]=b(m*y[n+56>>2])+b(f*y[r+56>>2]),on(u,c+8|0,c+224|0,0),v=0,!d[c+264|0])break e;if((g=y[c+260>>2])<b(0)){y[s+164>>2]=f,e=_[c+228>>2],t=_[c+232>>2],i=_[c+240>>2],_[s+140>>2]=_[c+236>>2],_[s+144>>2]=i,_[s+132>>2]=e,_[s+136>>2]=t,e=_[c+256>>2],_[s+156>>2]=_[c+252>>2],_[s+160>>2]=e,e=_[c+248>>2],_[s+148>>2]=_[c+244>>2],_[s+152>>2]=e;break t}if(e=e+1|0,h=_[c+256>>2],_[c+280>>2]=_[c+252>>2],_[c+284>>2]=h,h=_[c+248>>2],_[c+272>>2]=_[c+244>>2],_[c+276>>2]=h,E=_[c+228>>2],A=_[c+232>>2],h=_[c+236>>2],m=f,!(g>b(.0010000000474974513)))break}m=y[c+240>>2]}else f=b(0),m=y[c+240>>2];if(v=0,b(b(T*(l(0,h),p()))+b(b(x*(l(0,A),p()))+b(S*(l(0,E),p()))))>=b(-y[s+172>>2]))break e;_[s+132>>2]=E,y[s+164>>2]=f,y[s+144>>2]=m,_[s+140>>2]=h,_[s+136>>2]=A,e=_[c+276>>2],_[s+148>>2]=_[c+272>>2],_[s+152>>2]=e,e=_[c+284>>2],_[s+156>>2]=_[c+280>>2],_[s+160>>2]=e}v=1}return B=c+288|0,0|(h=v)}function Qr(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+16>>2]}function Zr(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,f[i+10>>1]=t,f[_[i+12>>2]+14>>1]=m[i+10>>1]}function Kr(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,f[_[t+12>>2]+14>>1]}function Jr(e,t,i){t=b(t),_[(i|=0)>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,_[i+12>>2]=0}function $r(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,f[i+10>>1]=t,f[_[i+12>>2]+12>>1]=m[i+10>>1]}function eo(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,f[_[t+12>>2]+12>>1]}function to(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,0!=_[_[e+12>>2]+8>>2]|0}function io(e,t,i,n,r){var s=b(0);return _[e+32>>2]=i,_[e+28>>2]=t,_[e+24>>2]=n,_[e+20>>2]=r,_[e+4>>2]=0,_[e+8>>2]=1065353216,_[e>>2]=3060,_[e+12>>2]=0,_[e+16>>2]=0,_[e+36>>2]=_[t+4>>2],_[e+40>>2]=_[i+4>>2],y[e+44>>2]=o[_[_[t>>2]+48>>2]](t),s=b(o[_[_[i>>2]+48>>2]](i)),_[e+72>>2]=1,_[e+76>>2]=1,_[e+60>>2]=-1,a[e+52|0]=0,y[e+48>>2]=s,e}function no(e,t){var i=0,n=0,r=0;e:{t:{i:{n:{r:{o:if((0|(i=_[e>>2]))>=4){if(8&d[0|t]){r=i;break o}r=i+-1|0,_[e>>2]=r,i=_[16+(n=(r<<4)+e|0)>>2],_[e+60>>2]=_[n+12>>2],_[e+64>>2]=i,i=_[n+8>>2],_[e+52>>2]=_[n+4>>2],_[e+56>>2]=i,i=_[n+88>>2],_[e+132>>2]=_[n+84>>2],_[e+136>>2]=i,i=_[n+96>>2],_[e+140>>2]=_[n+92>>2],_[e+144>>2]=i,i=_[n+176>>2],_[e+220>>2]=_[n+172>>2],_[e+224>>2]=i,i=_[n+168>>2],_[e+212>>2]=_[n+164>>2],_[e+216>>2]=i}else if(r=3,3!=(0|i))break r;if(4&d[0|t])break n;r=r+-1|0,_[e>>2]=r,i=_[16+(n=(r<<4)+e|0)>>2],_[e+44>>2]=_[n+12>>2],_[e+48>>2]=i,i=_[n+8>>2],_[e+36>>2]=_[n+4>>2],_[e+40>>2]=i,i=_[n+88>>2],_[e+116>>2]=_[n+84>>2],_[e+120>>2]=i,i=_[n+96>>2],_[e+124>>2]=_[n+92>>2],_[e+128>>2]=i,i=_[n+176>>2],_[e+204>>2]=_[n+172>>2],_[e+208>>2]=i,i=_[n+168>>2],_[e+196>>2]=_[n+164>>2],_[e+200>>2]=i;break n}if(r=2,(0|i)<2)break i}if(2&d[0|t])break t;r=r+-1|0,_[e>>2]=r,i=_[16+(n=(r<<4)+e|0)>>2],_[e+28>>2]=_[n+12>>2],_[e+32>>2]=i,i=_[n+8>>2],_[e+20>>2]=_[n+4>>2],_[e+24>>2]=i,i=_[n+88>>2],_[e+100>>2]=_[n+84>>2],_[e+104>>2]=i,i=_[n+96>>2],_[e+108>>2]=_[n+92>>2],_[e+112>>2]=i,i=_[n+176>>2],_[e+188>>2]=_[n+172>>2],_[e+192>>2]=i,i=_[n+168>>2],_[e+180>>2]=_[n+164>>2],_[e+184>>2]=i;break t}if(r=1,1!=(0|i))break e}1&a[0|t]||(t=r+-1|0,_[e>>2]=t,t=_[4+(r=(i=t<<4)+(e+4|0)|0)>>2],_[e+4>>2]=_[r>>2],_[e+8>>2]=t,t=_[r+12>>2],_[e+12>>2]=_[r+8>>2],_[e+16>>2]=t,t=_[4+(r=i+(e+84|0)|0)>>2],_[e+84>>2]=_[r>>2],_[e+88>>2]=t,t=_[r+12>>2],_[e+92>>2]=_[r+8>>2],_[e+96>>2]=t,t=_[12+(i=i+(e+164|0)|0)>>2],_[e+172>>2]=_[i+8>>2],_[e+176>>2]=t,t=_[i+4>>2],_[e+164>>2]=_[i>>2],_[e+168>>2]=t)}}function ro(e,t,i,n){var r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),_=b(0),d=b(0);return l=y[i+24>>2],r=y[t+24>>2],h=b(l-r),c=y[i+16>>2],a=y[t+16>>2],p=b(c-a),o=y[e+4>>2],u=y[i+20>>2],s=y[t+20>>2],f=b(u-s),_=y[e>>2],d=y[e+8>>2],b(b(r*b(b(p*o)-b(f*_)))+b(b(a*b(b(f*d)-b(h*o)))+b(s*b(b(h*_)-b(p*d)))))<b(0)?(o=b(b(b(a*a)+b(s*s))+b(r*r)),b(b(b(a*p)+b(s*f))+b(r*h))>b(0)||(o=b(b(b(c*c)+b(u*u))+b(l*l)),b(b(b(c*p)+b(u*f))+b(l*h))<b(0)||(o=b(b(b(b(c*c)+b(u*u))+b(l*l))*b(b(b(a*a)+b(s*s))+b(r*r))),r=b(b(b(c*a)+b(u*s))+b(l*r)),o=(r=b(b(o-b(r*r))/b(b(b(p*p)+b(f*f))+b(h*h))))>b(0)?r:b(0))),y[n>>2]=w(o),e=1):e=0,e}function oo(e,t,i,n,r,o){var s=0,l=0,c=0;e:if(d[n+55|0]!=(0|t)){if(l=_[2920+(s=r<<2)>>2],b(b(b(b(y[n>>2]*y[i+16>>2])+b(y[n+4>>2]*y[i+20>>2]))+b(y[n+8>>2]*y[i+24>>2]))-y[n+16>>2])<b(-9999999747378752e-21)){if(!(e=zn(t=e,_[(e=n+20|0)+(l<<2)>>2],_[e+s>>2],i,0)))break e;return _[e+32>>2]=n,a[e+52|0]=r,a[52+(n+r|0)|0]=0,_[32+((r<<2)+n|0)>>2]=e,(t=_[o>>2])?(_[t+36>>2]=e,a[t+53|0]=2,_[e+40>>2]=t,a[e+54|0]=1):_[o+4>>2]=e,_[o>>2]=e,_[o+8>>2]=_[o+8>>2]+1,1}a[n+55|0]=t,oo(e,t,i,_[32+((l<<2)+n|0)>>2],d[52+(n+l|0)|0],o)&&(r=t,t=_[s+2932>>2],oo(e,r,i,_[32+((t<<2)+n|0)>>2],d[52+(t+n|0)|0],o)&&((t=_[n+48>>2])&&(_[t+44>>2]=_[n+44>>2]),(t=_[n+44>>2])&&(_[t+48>>2]=_[n+48>>2]),_[e+18496>>2]==(0|n)&&(_[e+18496>>2]=_[n+48>>2]),_[(t=e+18500|0)>>2]=_[t>>2]+-1,_[n+44>>2]=0,_[n+48>>2]=_[e+18504>>2],(t=_[e+18504>>2])&&(_[t+44>>2]=n),_[e+18504>>2]=n,c=1,_[(e=e+18508|0)>>2]=_[e>>2]+1))}return c}function ao(e){var t;return _[(e|=0)>>2]=2616,(t=_[e+296>>2])&&(d[e+300|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+296>>2]=0),_[e+296>>2]=0,_[e+288>>2]=0,_[e+292>>2]=0,a[e+300|0]=1,0|e}function so(e,t,i,n,r,l){var c,u=0,p=0,f=0,m=0,v=0;if(u=c=_[e+88>>2],(0|c)==_[e+92>>2]&&(u=c,!((0|c)>=(0|(f=c?c<<1:1))))){if(f?(_[5585]=_[5585]+1,m=0|o[_[4567]](A(f,152),16),u=_[e+88>>2]):u=c,(0|(p=u))>=1)for(u=0;Xi((v=A(u,152))+m|0,_[e+96>>2]+v|0,152),(0|p)!=(0|(u=u+1|0)););(p=_[e+96>>2])&&(d[e+100|0]&&p&&(_[5586]=_[5586]+1,o[_[4568]](p)),_[e+96>>2]=0),_[e+96>>2]=m,_[e+92>>2]=f,a[e+100|0]=1,u=_[e+88>>2]}_[e+88>>2]=u+1,p=_[e+96>>2]+A(c,152)|0,_[p+140>>2]=r,function(e,t,i,n,r,o){var a,l,c,u=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=0,C=0,w=0,k=0,O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=b(0);_[t+48>>2]=-2147483648,_[t+52>>2]=-2147483648,_[t+16>>2]=0,_[t+20>>2]=0,_[t+56>>2]=-2147483648,_[t+60>>2]=0,_[t+24>>2]=0,_[t+28>>2]=0,l=_[e+16>>2],e=_[240+(l+A(n,244)|0)>>2],a=_[240+(A(r,244)+l|0)>>2],_[t+148>>2]=r,_[t+144>>2]=n,_[t+132>>2]=0,y[t+104>>2]=o,_[t+96>>2]=0,_[t+100>>2]=0,p=y[i>>2],T=y[i+4>>2],f=y[i+8>>2],_[t+12>>2]=0,y[t+8>>2]=-f,u=b(-T),y[t+4>>2]=u,S=b(-p),y[t>>2]=S,c=t,e?(h(b(b(b(b(y[e+360>>2]*u)-b(p*y[e+356>>2]))-b(f*y[e+364>>2]))*y[e+612>>2])),C=s(0),h(b(b(b(b(y[e+344>>2]*u)-b(p*y[e+340>>2]))-b(f*y[e+348>>2]))*y[e+608>>2])),w=s(0),h(b(b(b(b(y[e+328>>2]*u)-b(p*y[e+324>>2]))-b(f*y[e+332>>2]))*y[e+604>>2])),E=s(0)):E=0,_[c+64>>2]=E,_[t+76>>2]=0,_[t+72>>2]=C,_[t+68>>2]=w,d=y[i>>2],m=y[i+4>>2],v=y[i+8>>2],_[t+44>>2]=_[i+12>>2],y[t+40>>2]=v,y[t+36>>2]=m,y[t+32>>2]=d,i=0,a&&(h(b(b(b(b(d*y[a+356>>2])+b(m*y[a+360>>2]))+b(v*y[a+364>>2]))*y[a+612>>2])),k=s(0),h(b(b(b(b(d*y[a+324>>2])+b(m*y[a+328>>2]))+b(v*y[a+332>>2]))*y[a+604>>2])),O=s(0),h(b(b(b(b(d*y[a+340>>2])+b(m*y[a+344>>2]))+b(v*y[a+348>>2]))*y[a+608>>2])),i=s(0)),_[t+80>>2]=O,_[t+92>>2]=0,_[t+88>>2]=k,_[t+84>>2]=i,e&&(x=b(b(b(y[e+360>>2]*u)-b(p*y[e+356>>2]))-b(f*y[e+364>>2])),R=b(b(b(y[e+344>>2]*u)-b(p*y[e+340>>2]))-b(f*y[e+348>>2])),g=b(b(b(y[e+328>>2]*u)-b(p*y[e+324>>2]))-b(f*y[e+332>>2]))),i=t,p=b(b(b(b(R*u)-b(p*g))-b(f*x))+b(0)),a?(F=b(b(b(d*y[a+356>>2])+b(m*y[a+360>>2]))+b(v*y[a+364>>2])),I=b(b(b(d*y[a+340>>2])+b(m*y[a+344>>2]))+b(v*y[a+348>>2])),u=b(b(b(y[a+324>>2]*d)+b(y[a+328>>2]*m))+b(y[a+332>>2]*v))):u=b(0),x=b(b(1)/b(p+b(b(b(u*d)+b(I*m))+b(F*v)))),y[i+108>>2]=x,p=b(0),u=b(0),g=b(0),e&&(e=A(n,244)+l|0,p=b(b(b(b(y[e+176>>2]+y[e+208>>2])*b(0))+b(b(y[e+180>>2]+y[e+212>>2])*b(0)))+b(b(y[e+184>>2]+y[e+216>>2])*b(0))),M=y[e+196>>2],g=y[e+192>>2],u=y[e+200>>2]),g=b(p+b(b(b(g*S)-b(T*M))-b(f*u))),a?(e=A(r,244)+l|0,p=b(b(b(b(y[e+176>>2]+y[e+208>>2])*b(-0))+b(b(y[e+180>>2]+y[e+212>>2])*b(-0)))+b(b(y[e+184>>2]+y[e+216>>2])*b(-0))),P=y[e+200>>2],u=y[e+196>>2],f=y[e+192>>2]):(p=b(-0),u=b(0),f=b(0)),y[t+124>>2]=o,y[t+116>>2]=0,y[t+120>>2]=-o,y[t+112>>2]=x*b(b(0)-b(g+b(p+b(b(v*P)+b(b(m*u)+b(d*f))))))}(e,p,t,i,n,l)}function lo(e){return _[72+(e|=0)>>2]}function co(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+204>>2]}function uo(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+4|0}function ho(e){var t=b(0),i=b(0),n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0);_[e+368>>2]=0,_[e+352>>2]=0,_[e+336>>2]=0,f=y[e+456>>2],t=y[e+36>>2],i=b(f*t),d=y[e+460>>2],n=y[e+40>>2],r=b(d*n),m=y[e+464>>2],o=y[e+44>>2],a=b(m*o),y[e+364>>2]=b(b(i*t)+b(r*n))+b(a*o),u=y[e+20>>2],h=y[e+24>>2],p=y[e+28>>2],y[e+360>>2]=b(b(i*u)+b(r*h))+b(a*p),s=i,i=y[e+4>>2],l=r,r=y[e+8>>2],c=a,a=y[e+12>>2],y[e+356>>2]=b(b(s*i)+b(l*r))+b(c*a),s=b(f*u),l=b(d*h),c=b(m*p),y[e+348>>2]=b(b(t*s)+b(n*l))+b(o*c),y[e+344>>2]=b(b(s*u)+b(l*h))+b(c*p),y[e+340>>2]=b(b(s*i)+b(l*r))+b(c*a),s=t,t=b(i*f),l=n,n=b(r*d),c=o,o=b(a*m),y[e+332>>2]=b(b(s*t)+b(l*n))+b(c*o),y[e+328>>2]=b(b(t*u)+b(n*h))+b(o*p),y[e+324>>2]=b(b(t*i)+b(n*r))+b(o*a)}function po(e,t,i,n,r,o,a,s,l,c){var u;for(B=u=B-48|0,_[u+40>>2]=e,_[u+36>>2]=t,_[u+32>>2]=i,_[u+28>>2]=n,_[u+24>>2]=r,_[u+20>>2]=o,_[u+16>>2]=a,_[u+12>>2]=s,_[u+8>>2]=l,_[u+4>>2]=c,e=_[u+40>>2],_[u+44>>2]=e,i=e+48|0,t=e;_[12+(B-16|0)>>2]=t,(0|i)!=(0|(t=n=t+16|0)););yr(e,_[u+36>>2],_[u+32>>2],_[u+28>>2],_[u+24>>2],_[u+20>>2],_[u+16>>2],_[u+12>>2],_[u+8>>2],_[u+4>>2]),B=u+48|0}function fo(e,t,i){var n;B=n=B-48|0,_[n+44>>2]=e,_[n+40>>2]=t,_[n+36>>2]=i,e=_[n+44>>2],y[e+404>>2]!=b(0)&&(Dt(e,_[n+40>>2]),_[12+(t=B-16|0)>>2]=e+604,_[t+12>>2]&&(t=_[n+36>>2],On(n,_[n+40>>2],e+408|0),Lt(i=n+16|0,t,n),Bt(e,i))),B=n+48|0}function _o(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]}function mo(e,t){var i,n=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,wt(e=_[i+12>>2],_[i+8>>2]),t=_[i+8>>2],n=_[t+52>>2],_[e+48>>2]=_[t+48>>2],_[e+52>>2]=n,n=_[t+60>>2],_[e+56>>2]=_[t+56>>2],_[e+60>>2]=n,B=i+16|0}function vo(e,t,i){var n;B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,wt(e=_[n+12>>2],_[n+8>>2]),t=_[n+4>>2],i=_[t+4>>2],_[e+48>>2]=_[t>>2],_[e+52>>2]=i,i=_[t+12>>2],_[e+56>>2]=_[t+8>>2],_[e+60>>2]=i,B=n+16|0}function yo(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,t=B-16|0,e=_[n+28>>2],_[t+12>>2]=e,_[_[t+12>>2]>>2]=1116,_[e>>2]=1032,mo(e+4|0,_[n+24>>2]),mo(e+68|0,_[n+20>>2]),mo(e+132|0,_[n+24>>2]),_[e+196>>2]=0,B=n+32|0}function go(){var e,t=0;return B=e=B-48|0,!(0==d[18848])|1&a[18848]||(t=function(){var e;return B=e=B-48|0,!(0==d[18900])|1&a[18900]||(y[e+44>>2]=1,y[e+40>>2]=0,y[e+36>>2]=0,y[e+32>>2]=0,y[e+28>>2]=1,y[e+24>>2]=0,y[e+20>>2]=0,y[e+16>>2]=0,y[e+12>>2]=1,po(18852,e+44|0,e+40|0,e+36|0,e+32|0,e+28|0,e+24|0,e+20|0,e+16|0,e+12|0),_[4725]=0,_[4725]=1|_[4725]),B=e+48|0,18852}(),y[e+20>>2]=0,y[e+16>>2]=0,y[e+12>>2]=0,zi(e+24|0,e+20|0,e+16|0,e+12|0),vo(18784,t,e+24|0),_[4712]=0,_[4712]=1|_[4712]),B=e+48|0,18784}function Ao(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+40>>2]](e,_[i+8>>2]),B=i+16|0}function bo(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,f[r+6>>1]=i,f[r+4>>1]=n,e=_[r+12>>2],o[_[_[e>>2]+36>>2]](e,_[r+8>>2],f[r+6>>1],f[r+4>>1]),B=r+16|0}function xo(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,_[r+4>>2]=i,_[r>>2]=n,e=_[r+12>>2],o[_[_[e>>2]+32>>2]](e,_[r+8>>2],_[r+4>>2],_[r>>2]),B=r+16|0}function To(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+24>>2]}function So(e){var t,i=0,n=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0;B=t=B-16|0;e:{t:{i:{n:{r:{o:{a:{s:{l:{c:{u:{if((e|=0)>>>0<=244){if(3&(i=(a=_[5607])>>>(e=(s=e>>>0<11?16:e+11&-8)>>>3))){e=(i=_[22476+(o=(n=e+(1&(-1^i))|0)<<3)>>2])+8|0,(0|(r=_[i+8>>2]))!=(0|(o=o+22468|0))?(_[r+12>>2]=o,_[o+8>>2]=r):_[5607]=Ka(n)&a,n<<=3,_[i+4>>2]=3|n,_[4+(i=i+n|0)>>2]=1|_[i+4>>2];break e}if(s>>>0<=(c=_[5609])>>>0)break u;if(i){n=i=(e=(0-(e=(0-(n=2<<e)|n)&i<<e)&e)-1|0)>>>12&16,n|=i=(e>>>=i)>>>5&8,n|=i=(e>>>=i)>>>2&4,i=_[22476+(r=(n=((n|=i=(e>>>=i)>>>1&2)|(i=(e>>>=i)>>>1&1))+(e>>>i)|0)<<3)>>2],(0|(e=_[i+8>>2]))!=(0|(r=r+22468|0))?(_[e+12>>2]=r,_[r+8>>2]=e):(a=Ka(n)&a,_[5607]=a),e=i+8|0,_[i+4>>2]=3|s,o=(n<<=3)-s|0,_[4+(l=i+s|0)>>2]=1|o,_[i+n>>2]=o,c&&(i=22468+((n=c>>>3)<<3)|0,r=_[5612],(n=1<<n)&a?n=_[i+8>>2]:(_[5607]=n|a,n=i),_[i+8>>2]=r,_[n+12>>2]=r,_[r+12>>2]=i,_[r+8>>2]=n),_[5612]=l,_[5609]=o;break e}if(!(h=_[5608]))break u;for(n=i=(e=(h&0-h)-1|0)>>>12&16,n|=i=(e>>>=i)>>>5&8,n|=i=(e>>>=i)>>>2&4,i=_[22732+(((n|=i=(e>>>=i)>>>1&2)|(i=(e>>>=i)>>>1&1))+(e>>>i)<<2)>>2],r=(-8&_[i+4>>2])-s|0,n=i;(e=_[n+16>>2])||(e=_[n+20>>2]);)r=(n=(o=(-8&_[e+4>>2])-s|0)>>>0<r>>>0)?o:r,i=n?e:i,n=e;if(u=_[i+24>>2],(0|(o=_[i+12>>2]))!=(0|i)){e=_[i+8>>2],_[e+12>>2]=o,_[o+8>>2]=e;break t}if(!(e=_[(n=i+20|0)>>2])){if(!(e=_[i+16>>2]))break c;n=i+16|0}for(;l=n,o=e,(e=_[(n=e+20|0)>>2])||(n=o+16|0,e=_[o+16>>2]););_[l>>2]=0;break t}if(s=-1,!(e>>>0>4294967231)&&(s=-8&(i=e+11|0),c=_[5608])){n=0-s|0,a=0,(i>>>=8)&&(a=31,s>>>0>16777215||(a=28+((e=((a=(i<<=r=i+1048320>>>16&8)<<(e=i+520192>>>16&4))<<(i=a+245760>>>16&2)>>>15)-(i|e|r)|0)<<1|s>>>e+21&1)|0));h:{p:{if(r=_[22732+(a<<2)>>2])for(i=s<<(31==(0|a)?0:25-(a>>>1)|0),e=0;;){if(!((l=(-8&_[r+4>>2])-s|0)>>>0>=n>>>0||(o=r,n=l))){n=0,e=r;break p}if(l=_[r+20>>2],r=_[16+((i>>>29&4)+r|0)>>2],e=l?(0|l)==(0|r)?e:l:e,i<<=0!=(0|r),!r)break}else e=0;if(!(e|o)){if(!(e=(0-(e=2<<a)|e)&c))break u;r=i=(e=(e&0-e)-1|0)>>>12&16,r|=i=(e>>>=i)>>>5&8,r|=i=(e>>>=i)>>>2&4,e=_[22732+(((r|=i=(e>>>=i)>>>1&2)|(i=(e>>>=i)>>>1&1))+(e>>>i)<<2)>>2]}if(!e)break h}for(;n=(i=(r=(-8&_[e+4>>2])-s|0)>>>0<n>>>0)?r:n,o=i?e:o,e=(i=_[e+16>>2])||_[e+20>>2];);}if(!(!o|n>>>0>=_[5609]-s>>>0)){if(l=_[o+24>>2],(0|o)!=(0|(i=_[o+12>>2]))){e=_[o+8>>2],_[e+12>>2]=i,_[i+8>>2]=e;break i}if(!(e=_[(r=o+20|0)>>2])){if(!(e=_[o+16>>2]))break l;r=o+16|0}for(;a=r,i=e,(e=_[(r=e+20|0)>>2])||(r=i+16|0,e=_[i+16>>2]););_[a>>2]=0;break i}}}if((i=_[5609])>>>0>=s>>>0){e=_[5612],(n=i-s|0)>>>0>=16?(_[5609]=n,r=e+s|0,_[5612]=r,_[r+4>>2]=1|n,_[e+i>>2]=n,_[e+4>>2]=3|s):(_[5612]=0,_[5609]=0,_[e+4>>2]=3|i,_[4+(i=e+i|0)>>2]=1|_[i+4>>2]),e=e+8|0;break e}if((r=_[5610])>>>0>s>>>0){i=r-s|0,_[5610]=i,n=(e=_[5613])+s|0,_[5613]=n,_[n+4>>2]=1|i,_[e+4>>2]=3|s,e=e+8|0;break e}if(e=0,n=o=s+47|0,_[5725]?i=_[5727]:(_[5728]=-1,_[5729]=-1,_[5726]=4096,_[5727]=4096,_[5725]=t+12&-16^1431655768,_[5730]=0,_[5718]=0,i=4096),(n=(a=n+i|0)&(l=0-i|0))>>>0<=s>>>0)break e;if((i=_[5717])&&(u=(c=_[5715])+n|0)>>>0<=c>>>0|u>>>0>i>>>0)break e;if(4&d[22872])break o;u:{h:{if(i=_[5613])for(e=22876;;){if((c=_[e>>2])+_[e+4>>2]>>>0>i>>>0&&c>>>0<=i>>>0)break h;if(!(e=_[e+8>>2]))break}if(-1==(0|(i=_n(0))))break a;if(a=n,(r=(e=_[5726])+-1|0)&i&&(a=(n-i|0)+(i+r&0-e)|0),a>>>0<=s>>>0|a>>>0>2147483646)break a;if((e=_[5717])&&(l=(r=_[5715])+a|0)>>>0<=r>>>0|l>>>0>e>>>0)break a;if((0|i)!=(0|(e=_n(a))))break u;break r}if((a=l&a-r)>>>0>2147483646)break a;if((0|(i=_n(a)))==(_[e>>2]+_[e+4>>2]|0))break s;e=i}if(i=e,!(s+48>>>0<=a>>>0|a>>>0>2147483646|-1==(0|e))){if((e=(e=_[5727])+(o-a|0)&0-e)>>>0>2147483646)break r;if(-1!=(0|_n(e))){a=e+a|0;break r}_n(0-a|0);break a}if(-1!=(0|i))break r;break a}o=0;break t}i=0;break i}if(-1!=(0|i))break r}_[5718]=4|_[5718]}if(n>>>0>2147483646)break n;if((i=_n(n))>>>0>=(e=_n(0))>>>0|-1==(0|i)|-1==(0|e))break n;if((a=e-i|0)>>>0<=s+40>>>0)break n}e=_[5715]+a|0,_[5715]=e,e>>>0>v[5716]&&(_[5716]=e);r:{o:{a:{if(n=_[5613]){for(e=22876;;){if(((r=_[e>>2])+(o=_[e+4>>2])|0)==(0|i))break a;if(!(e=_[e+8>>2]))break}break o}for(i>>>0>=(e=_[5611])>>>0&&e||(_[5611]=i),e=0,_[5720]=a,_[5719]=i,_[5615]=-1,_[5616]=_[5725],_[5722]=0;r=22468+(n=e<<3)|0,_[n+22476>>2]=r,_[n+22480>>2]=r,32!=(0|(e=e+1|0)););r=(e=a+-40|0)-(n=i+8&7?-8-i&7:0)|0,_[5610]=r,n=i+n|0,_[5613]=n,_[n+4>>2]=1|r,_[4+(e+i|0)>>2]=40,_[5614]=_[5729];break r}if(!(8&d[e+12|0]|i>>>0<=n>>>0|r>>>0>n>>>0)){_[e+4>>2]=o+a,i=(e=n+8&7?-8-n&7:0)+n|0,_[5613]=i,e=(r=_[5610]+a|0)-e|0,_[5610]=e,_[i+4>>2]=1|e,_[4+(n+r|0)>>2]=40,_[5614]=_[5729];break r}}i>>>0<(o=_[5611])>>>0&&(_[5611]=i,o=0),r=i+a|0,e=22876;o:{a:{s:{l:{c:{u:{for(;;){if((0|r)!=_[e>>2]){if(e=_[e+8>>2])continue;break u}break}if(!(8&d[e+12|0]))break c}for(e=22876;;){if((r=_[e>>2])>>>0<=n>>>0&&(o=r+_[e+4>>2]|0)>>>0>n>>>0)break l;e=_[e+8>>2]}}if(_[e>>2]=i,_[e+4>>2]=_[e+4>>2]+a,_[4+(u=(i+8&7?-8-i&7:0)+i|0)>>2]=3|s,e=((i=r+(r+8&7?-8-r&7:0)|0)-u|0)-s|0,l=s+u|0,(0|i)==(0|n)){_[5613]=l,e=_[5610]+e|0,_[5610]=e,_[l+4>>2]=1|e;break a}if(_[5612]==(0|i)){_[5612]=l,e=_[5609]+e|0,_[5609]=e,_[l+4>>2]=1|e,_[e+l>>2]=e;break a}if(1==(3&(n=_[i+4>>2]))){h=-8&n;c:if(n>>>0<=255){if(o=n>>>3,n=_[i+8>>2],(0|(r=_[i+12>>2]))==(0|n)){_[5607]=_[5607]&Ka(o);break c}_[n+12>>2]=r,_[r+8>>2]=n}else{if(c=_[i+24>>2],(0|(a=_[i+12>>2]))==(0|i))if((s=_[(r=i+20|0)>>2])||(s=_[(r=i+16|0)>>2])){for(;n=r,a=s,(s=_[(r=s+20|0)>>2])||(r=a+16|0,s=_[a+16>>2]););_[n>>2]=0}else a=0;else n=_[i+8>>2],_[n+12>>2]=a,_[a+8>>2]=n;if(c){n=_[i+28>>2];u:{if(_[(r=22732+(n<<2)|0)>>2]==(0|i)){if(_[r>>2]=a,a)break u;_[5608]=_[5608]&Ka(n);break c}if(_[c+(_[c+16>>2]==(0|i)?16:20)>>2]=a,!a)break c}_[a+24>>2]=c,(n=_[i+16>>2])&&(_[a+16>>2]=n,_[n+24>>2]=a),(n=_[i+20>>2])&&(_[a+20>>2]=n,_[n+24>>2]=a)}}i=i+h|0,e=e+h|0}if(_[i+4>>2]=-2&_[i+4>>2],_[l+4>>2]=1|e,_[e+l>>2]=e,e>>>0<=255){e=22468+((i=e>>>3)<<3)|0,(n=_[5607])&(i=1<<i)?i=_[e+8>>2]:(_[5607]=i|n,i=e),_[e+8>>2]=l,_[i+12>>2]=l,_[l+12>>2]=e,_[l+8>>2]=i;break a}if(i=0,(r=e>>>8)&&(i=31,e>>>0>16777215||(i=28+((i=((s=(r<<=o=r+1048320>>>16&8)<<(i=r+520192>>>16&4))<<(r=s+245760>>>16&2)>>>15)-(r|i|o)|0)<<1|e>>>i+21&1)|0)),_[(n=l)+28>>2]=i,_[l+16>>2]=0,_[l+20>>2]=0,n=22732+(i<<2)|0,(r=_[5608])&(o=1<<i)){for(r=e<<(31==(0|i)?0:25-(i>>>1)|0),i=_[n>>2];;){if(n=i,(-8&_[i+4>>2])==(0|e))break s;if(i=r>>>29,r<<=1,!(i=_[16+(o=(4&i)+n|0)>>2]))break}_[o+16>>2]=l}else _[5608]=r|o,_[n>>2]=l;_[l+24>>2]=n,_[l+12>>2]=l,_[l+8>>2]=l;break a}for(l=(e=a+-40|0)-(r=i+8&7?-8-i&7:0)|0,_[5610]=l,r=i+r|0,_[5613]=r,_[r+4>>2]=1|l,_[4+(e+i|0)>>2]=40,_[5614]=_[5729],_[(r=(e=(o+(o+-39&7?39-o&7:0)|0)-47|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=_[5722],_[r+16>>2]=_[5721],_[r+20>>2]=e,e=_[5720],_[r+8>>2]=_[5719],_[r+12>>2]=e,_[5721]=r+8,_[5720]=a,_[5719]=i,_[5722]=0,e=r+24|0;_[e+4>>2]=7,i=e+8|0,e=e+4|0,i>>>0<o>>>0;);if((0|n)==(0|r))break r;if(_[r+4>>2]=-2&_[r+4>>2],o=r-n|0,_[n+4>>2]=1|o,_[r>>2]=o,o>>>0<=255){e=22468+((i=o>>>3)<<3)|0,(r=_[5607])&(i=1<<i)?i=_[e+8>>2]:(_[5607]=i|r,i=e),_[e+8>>2]=n,_[i+12>>2]=n,_[n+12>>2]=e,_[n+8>>2]=i;break r}if(_[n+16>>2]=0,_[n+20>>2]=0,e=0,(r=o>>>8)&&(e=31,o>>>0>16777215||(e=28+((e=((l=(r<<=a=r+1048320>>>16&8)<<(e=r+520192>>>16&4))<<(r=l+245760>>>16&2)>>>15)-(r|e|a)|0)<<1|o>>>e+21&1)|0)),_[(i=n)+28>>2]=e,i=22732+(e<<2)|0,(r=_[5608])&(a=1<<e)){for(e=o<<(31==(0|e)?0:25-(e>>>1)|0),i=_[i>>2];;){if(r=i,(0|o)==(-8&_[i+4>>2]))break o;if(i=e>>>29,e<<=1,!(i=_[16+(a=r+(4&i)|0)>>2]))break}_[a+16>>2]=n,_[n+24>>2]=r}else _[5608]=r|a,_[i>>2]=n,_[n+24>>2]=i;_[n+12>>2]=n,_[n+8>>2]=n;break r}e=_[n+8>>2],_[e+12>>2]=l,_[n+8>>2]=l,_[l+24>>2]=0,_[l+12>>2]=n,_[l+8>>2]=e}e=u+8|0;break e}e=_[r+8>>2],_[e+12>>2]=n,_[r+8>>2]=n,_[n+24>>2]=0,_[n+12>>2]=r,_[n+8>>2]=e}if(!((e=_[5610])>>>0<=s>>>0)){i=e-s|0,_[5610]=i,n=(e=_[5613])+s|0,_[5613]=n,_[n+4>>2]=1|i,_[e+4>>2]=3|s,e=e+8|0;break e}}_[5587]=48,e=0;break e}i:if(l){e=_[o+28>>2];n:{if(_[(r=22732+(e<<2)|0)>>2]==(0|o)){if(_[r>>2]=i,i)break n;c=Ka(e)&c,_[5608]=c;break i}if(_[l+(_[l+16>>2]==(0|o)?16:20)>>2]=i,!i)break i}_[i+24>>2]=l,(e=_[o+16>>2])&&(_[i+16>>2]=e,_[e+24>>2]=i),(e=_[o+20>>2])&&(_[i+20>>2]=e,_[e+24>>2]=i)}i:if(n>>>0<=15)e=n+s|0,_[o+4>>2]=3|e,_[4+(e=e+o|0)>>2]=1|_[e+4>>2];else if(_[o+4>>2]=3|s,_[4+(r=o+s|0)>>2]=1|n,_[n+r>>2]=n,n>>>0<=255)e=22468+((i=n>>>3)<<3)|0,(n=_[5607])&(i=1<<i)?i=_[e+8>>2]:(_[5607]=i|n,i=e),_[e+8>>2]=r,_[i+12>>2]=r,_[r+12>>2]=e,_[r+8>>2]=i;else{e=0,(s=n>>>8)&&(e=31,n>>>0>16777215||(e=28+((e=((l=(s<<=a=s+1048320>>>16&8)<<(e=s+520192>>>16&4))<<(s=l+245760>>>16&2)>>>15)-(s|e|a)|0)<<1|n>>>e+21&1)|0)),_[(i=r)+28>>2]=e,_[r+16>>2]=0,_[r+20>>2]=0,i=22732+(e<<2)|0;n:{if((s=1<<e)&c){for(e=n<<(31==(0|e)?0:25-(e>>>1)|0),s=_[i>>2];;){if((-8&_[(i=s)+4>>2])==(0|n))break n;if(s=e>>>29,e<<=1,!(s=_[16+(a=(4&s)+i|0)>>2]))break}_[a+16>>2]=r}else _[5608]=s|c,_[i>>2]=r;_[r+24>>2]=i,_[r+12>>2]=r,_[r+8>>2]=r;break i}e=_[i+8>>2],_[e+12>>2]=r,_[i+8>>2]=r,_[r+24>>2]=0,_[r+12>>2]=i,_[r+8>>2]=e}e=o+8|0;break e}t:if(u){e=_[i+28>>2];i:{if(_[(n=22732+(e<<2)|0)>>2]==(0|i)){if(_[n>>2]=o,o)break i;_[5608]=Ka(e)&h;break t}if(_[u+(_[u+16>>2]==(0|i)?16:20)>>2]=o,!o)break t}_[o+24>>2]=u,(e=_[i+16>>2])&&(_[o+16>>2]=e,_[e+24>>2]=o),(e=_[i+20>>2])&&(_[o+20>>2]=e,_[e+24>>2]=o)}r>>>0<=15?(e=r+s|0,_[i+4>>2]=3|e,_[4+(e=e+i|0)>>2]=1|_[e+4>>2]):(_[i+4>>2]=3|s,_[4+(s=i+s|0)>>2]=1|r,_[r+s>>2]=r,c&&(e=22468+((n=c>>>3)<<3)|0,o=_[5612],(n=1<<n)&a?n=_[e+8>>2]:(_[5607]=n|a,n=e),_[e+8>>2]=o,_[n+12>>2]=o,_[o+12>>2]=e,_[o+8>>2]=n),_[5612]=s,_[5609]=r),e=i+8|0}return B=t+16|0,0|e}function Eo(e,t,i,n,r,a){var s,l,c=0;c=(s=_[e+4>>2])>>8,l=e=_[e>>2],1&s&&(c=_[_[n>>2]+c>>2]),o[_[_[e>>2]+20>>2]](l,t,i,n+c|0,2&s?r:2,a)}function Co(e,t,i,n){a[e+53|0]=1;e:if(_[e+4>>2]==(0|i)){if(a[e+52|0]=1,!(i=_[e+16>>2])){if(_[e+36>>2]=1,_[e+24>>2]=n,_[e+16>>2]=t,1!=(0|n)|1!=_[e+48>>2])break e;return void(a[e+54|0]=1)}if((0|t)==(0|i)){if(2==(0|(i=_[e+24>>2]))&&(_[e+24>>2]=n,i=n),1!=_[e+48>>2]|1!=(0|i))break e;return void(a[e+54|0]=1)}a[e+54|0]=1,_[e+36>>2]=_[e+36>>2]+1}}function wo(e,t,i){var n;if(!(n=_[e+16>>2]))return _[e+36>>2]=1,_[e+24>>2]=i,void(_[e+16>>2]=t);e:{if((0|t)==(0|n)){if(2!=_[e+24>>2])break e;return void(_[e+24>>2]=i)}a[e+54|0]=1,_[e+24>>2]=2,_[e+36>>2]=_[e+36>>2]+1}}function ko(e){var t;B=t=B-16|0,_[t+12>>2]=e,function(e){var t,i;for(B=t=B-16|0,_[t+8>>2]=e,e=_[t+8>>2],_[t+12>>2]=e,i=e+48|0;_[12+(B-16|0)>>2]=e,(0|i)!=(0|(e=e+16|0)););B=t+16|0}(e=_[t+12>>2]),_[12+(B-16|0)>>2]=e+48,B=t+16|0}function Oo(e,t,i,n){var r,s,l,c=0,u=0,h=0,p=0,m=0,v=0,y=0,b=0,x=0,T=0,S=0,E=0,C=0;B=r=B-80|0,_[r+76>>2]=17868,l=r+55|0,s=r+56|0;e:{t:{i:for(;;){(0|x)<0||((0|c)>(2147483647-x|0)?(_[5587]=61,x=-1):x=c+x|0);n:{r:{o:{a:{s:{l:{c:{u:{h:{p:{f:{_:{d:{if(m=_[r+76>>2],p=d[0|(c=m)]){for(;;){m:{v:{y:if(u=255&p){if(37!=(0|u))break v;for(p=c;;){if(37!=d[c+1|0])break y;if(u=c+2|0,_[r+76>>2]=u,p=p+1|0,h=d[c+2|0],c=u,37!=(0|h))break}}else p=c;if(c=p-m|0,e&&Gi(e,m,c),c)continue i;T=-1,p=1,u=r,c=_[r+76>>2],36!=d[c+2|0]|a[_[r+76>>2]+1|0]+-48>>>0>=10||(T=a[c+1|0]+-48|0,E=1,p=3),c=p+c|0,_[u+76>>2]=c,p=0;y:if((h=(S=a[0|c])+-32|0)>>>0>31)u=c;else if(u=c,75913&(h=1<<h))for(;;){if(u=c+1|0,_[r+76>>2]=u,p|=h,(h=(S=a[c+1|0])+-32|0)>>>0>31)break y;if(c=u,!(75913&(h=1<<h)))break}y:if(42!=(0|S)){if((0|(b=pi(r+76|0)))<0)break t;c=_[r+76>>2]}else{if(v=r,a[u+1|0]+-48>>>0>=10||(c=_[r+76>>2],36!=d[c+2|0])){if(E)break t;E=0,b=0,e&&(c=_[t>>2],_[t>>2]=c+4,b=_[c>>2]),c=_[r+76>>2]+1|0}else _[((a[c+1|0]<<2)+n|0)-192>>2]=10,b=_[((a[c+1|0]<<3)+i|0)-384>>2],E=1,c=c+3|0;if(_[v+76>>2]=c,(0|b)>-1)break y;b=0-b|0,p|=8192}h=-1;y:if(46==d[0|c])if(42!=d[c+1|0])_[r+76>>2]=c+1,h=pi(r+76|0),c=_[r+76>>2];else{if(!(a[c+2|0]+-48>>>0>=10)&&(c=_[r+76>>2],36==d[c+3|0])){_[((a[c+2|0]<<2)+n|0)-192>>2]=10,h=_[((a[c+2|0]<<3)+i|0)-384>>2],c=c+4|0,_[r+76>>2]=c;break y}if(E)break t;e?(c=_[t>>2],_[t>>2]=c+4,h=_[c>>2]):h=0,c=_[r+76>>2]+2|0,_[r+76>>2]=c}for(u=0;;){if(C=u,y=-1,a[0|c]+-65>>>0>57)break e;if(S=c+1|0,_[r+76>>2]=S,u=a[0|c],c=S,!((u=d[14335+(u+A(C,58)|0)|0])+-1>>>0<8))break}if(!u)break e;y:{g:{A:{if(19==(0|u)){if((0|T)<=-1)break A;break e}if((0|T)<0)break g;_[(T<<2)+n>>2]=u,u=_[4+(c=(T<<3)+i|0)>>2],_[r+64>>2]=_[c>>2],_[r+68>>2]=u}if(c=0,!e)continue i;break y}if(!e)break n;hi(r- -64|0,u,t),S=_[r+76>>2]}if(v=-65537&p,p=8192&p?v:p,y=0,T=14369,u=s,c=a[S+-1|0],(S=(c=C&&3==(15&c)?-33&c:c)+-88|0)>>>0<=32)break m;y:{g:{A:{b:{if((v=c+-65|0)>>>0>6){if(83!=(0|c))break r;if(!h)break b;u=_[r+64>>2];break g}switch(v-1|0){case 1:break A;case 0:case 2:break r;default:break d}}c=0,Ui(e,32,b,0,p);break y}_[r+12>>2]=0,_[r+8>>2]=_[r+64>>2],_[r+64>>2]=r+8,h=-1,u=r+8|0}c=0;g:{for(;;){if(!(m=_[u>>2]))break g;if(!((v=(0|(m=fi(r+4|0,m)))<0)|m>>>0>h-c>>>0)){if(u=u+4|0,h>>>0>(c=c+m|0)>>>0)continue;break g}break}if(y=-1,v)break e}if(Ui(e,32,b,c,p),c)for(h=0,u=_[r+64>>2];;){if(!(m=_[u>>2]))break y;if((0|(h=(m=fi(r+4|0,m))+h|0))>(0|c))break y;if(Gi(e,r+4|0,m),u=u+4|0,!(h>>>0<c>>>0))break}else c=0}Ui(e,32,b,c,8192^p),c=(0|b)>(0|c)?b:c;continue i}u=c+1|0,_[r+76>>2]=u,p=d[c+1|0],c=u;continue}break}switch(S-1|0){case 28:break s;case 21:break l;case 23:break u;case 22:break h;case 11:case 16:break p;case 10:break f;case 26:break _;case 8:case 12:case 13:case 14:break d;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break r;default:break c}}if(y=x,e)break e;if(!E)break n;for(c=1;;){if(e=_[(c<<2)+n>>2]){if(hi((c<<3)+i|0,e,t),y=1,10!=(0|(c=c+1|0)))continue;break e}break}if(y=1,c>>>0>9)break e;if(y=-1,_[(c<<2)+n>>2])break e;for(;!_[((c=c+1|0)<<2)+n>>2]&&10!=(0|c););y=c>>>0<10?-1:1;break e}c=0|o[560](e,g[r+64>>3],b,h,p,c);continue}u=(c=Va(m=(c=_[r+64>>2])||14379,h))||h+m|0,p=v,h=c?c-m|0:h;break r}a[r+55|0]=_[r+64>>2],h=1,m=l,p=v;break r}if(c=v=_[r+68>>2],m=_[r+64>>2],(0|c)<-1||(0|c)<=-1&&!(m>>>0>4294967295)){c=0-(c+(0<m>>>0)|0)|0,m=0-m|0,_[r+64>>2]=m,_[r+68>>2]=c,y=1,T=14369;break a}if(2048&p){y=1,T=14370;break a}T=(y=1&p)?14371:14369;break a}if(m=ja(_[r+64>>2],_[r+68>>2],s),!(8&p))break o;h=(0|h)>(0|(c=s-m|0))?h:c+1|0;break o}h=h>>>0>8?h:8,p|=8,c=120}if(m=Ha(_[r+64>>2],_[r+68>>2],s,32&c),!(8&p)|!(_[r+64>>2]|_[r+68>>2]))break o;T=14369+(c>>>4)|0,y=2;break o}if(c=0,(u=255&C)>>>0>7)continue;switch(u-1|0){default:case 0:_[_[r+64>>2]>>2]=x;continue;case 1:u=_[r+64>>2],_[u>>2]=x,_[u+4>>2]=x>>31;continue;case 2:f[_[r+64>>2]>>1]=x;continue;case 3:a[_[r+64>>2]]=x;continue;case 5:_[_[r+64>>2]>>2]=x;continue;case 4:continue;case 6:}u=_[r+64>>2],_[u>>2]=x,_[u+4>>2]=x>>31;continue}m=_[r+64>>2],c=_[r+68>>2],T=14369}m=Rn(m,c,s)}p=(0|h)>-1?-65537&p:p,!!((c=_[r+64>>2])|(v=_[r+68>>2]))|h?h=(0|h)>(0|(c=!(c|v)+(s-m|0)|0))?h:c:(m=s,h=0)}Ui(e,32,c=(0|b)<(0|(u=(h=(0|h)<(0|(v=u-m|0))?v:h)+y|0))?u:b,u,p),Gi(e,T,y),Ui(e,48,c,u,65536^p),Ui(e,48,h,v,0),Gi(e,m,v),Ui(e,32,c,u,8192^p);continue}break}y=0;break e}y=-1}return B=r+80|0,y}function Ro(e,t,i,n,r,o,a){var s,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,g=0,A=0;if(B=s=B-48|0,l=_[i+8>>2])for(m=l;;){if(_[m+20>>2]>_[e+100>>2]){l=_[m+12>>2],p=_[l+92>>2],f=_[l+96>>2],u=_[i+88>>2],h=_[l+88>>2],c=_[i+92>>2],l=_[i+96>>2],_[s+44>>2]=-1,d=f-l|0,_[s+40>>2]=d,c=p-c|0,_[s+36>>2]=c,l=h-u|0,_[s+32>>2]=l,u=Qa(f=c,y=c>>31,_[(c=r)+8>>2],_[c+12>>2]),h=N,p=u,u=l,c=p+(l=Qa(l,g=l>>31,_[c>>2],_[c+4>>2]))|0,p=N+h|0,p=c>>>0<l>>>0?p+1|0:p,d=(l=Qa(h=d,A=h>>31,_[r+16>>2],_[r+20>>2]))+c|0,c=N+p|0,c=d>>>0<l>>>0?c+1|0:c,l=d,p=Qa(_[(d=o)+8>>2],_[d+12>>2],f,y),f=N,u=Qa(_[d>>2],_[d+4>>2],u,g),f=N+f|0,f=(d=u+p|0)>>>0<u>>>0?f+1|0:f,h=Qa(_[o+16>>2],_[o+20>>2],h,A),p=N+f|0,p=(u=h+d|0)>>>0<h>>>0?p+1|0:p,h=u,(0|(u=p))>0||(0|u)>=0&&!(h>>>0<1)?(_[s+8>>2]=h,_[s+12>>2]=u,_[s+24>>2]=1,f=-1,h=-1):(0|u)<-1||(0|u)<=-1&&!(h>>>0>4294967295)?(_[s+24>>2]=-1,_[s+8>>2]=0-h,_[s+12>>2]=0-((0<h>>>0)+u|0),f=1,h=-1):(_[s+8>>2]=0,_[s+12>>2]=0,_[s+24>>2]=0,f=0,h=0);e:{t:{i:{if(u=s,d=s,(0|c)<0||(0|c)<=0&&!(l>>>0>0)){if((0|c)>-1||(0|c)>=-1&&!(l>>>0<=4294967295))break i;_[s+24>>2]=f,c=0-((0<l>>>0)+c|0)|0,l=0-l|0}_[d+16>>2]=l,_[u+20>>2]=c;break t}if(_[s+16>>2]=0,_[s+20>>2]=0,!h)break e}v?(0|(l=mn(s+8|0,a)))<=-1?(l=_[s+12>>2],_[a>>2]=_[s+8>>2],_[a+4>>2]=l,_[a+16>>2]=_[s+24>>2],l=_[s+20>>2],_[a+8>>2]=_[s+16>>2],_[a+12>>2]=l,v=m):l||(v=2!=(0|br(v,m,n,s+32|0))^t?m:v):(l=_[s+12>>2],_[a>>2]=_[s+8>>2],_[a+4>>2]=l,_[a+16>>2]=_[s+24>>2],l=_[s+20>>2],_[a+8>>2]=_[s+16>>2],_[a+12>>2]=l,v=m)}l=_[i+8>>2]}if((0|(m=_[m>>2]))==(0|l))break}return B=s+48|0,v}function Fo(e,t,i,n,r){var o,a,s,l,c,u,h,p,f,d,m,v,y,g,b=0,x=0,T=0,S=0,E=0,C=0,w=0,k=0,O=0,R=0,F=0,I=0,M=0,P=0,D=0,L=0,z=0,G=0,U=0,X=0,V=0,H=0,j=0,W=0,Y=0,q=0,Q=0,Z=0;if(B=o=B-48|0,M=_[r>>2],F=t,(V=_[n>>2])&&(F=_[V+12>>2]),U=_[F+96>>2],C=_[t+96>>2],v=_[i+96>>2]-C|0,b=_[(V||M)+12>>2],w=_[t+92>>2],x=_[b+92>>2]-w|0,E=i,u=_[i+92>>2]-w|0,D=_[b+96>>2]-C|0,k=Qa(h=i=A(v,x)-A(u,D)|0,p=i>>31,i=v,L=i>>31),G=N,S=_[t+88>>2],T=_[b+88>>2]-S|0,y=_[E+88>>2]-S|0,b=Qa(f=t=A(T,u)-A(x,y)|0,d=t>>31,t=y,O=t>>31),x=Qa(a=k-b|0,s=G-(N+(k>>>0<b>>>0)|0)|0,k=Y=_[F+92>>2],k>>31),G=N,b=Qa(f,d,k=u,H=k>>31),W=N,R=x,g=x=A(t,D)-A(i,T)|0,i=Qa(x,m=x>>31,i,L),b=Qa(l=b-i|0,W=W-(N+(b>>>0<i>>>0)|0)|0,i=F=_[F+88>>2],i>>31),x=N+G|0,x=(i=R+b|0)>>>0<b>>>0?x+1|0:x,t=Qa(t,O,g,m),b=N,R=i,i=Qa(k,H,h,p),i=Qa(H=t-i|0,c=b-(N+(t>>>0<i>>>0)|0)|0,U,U>>31),b=N+x|0,k=t=R+i|0,i=t>>>0<i>>>0?b+1|0:b,t=Qa(h,p,S,S>>31),b=N,C=Qa(f,d,C,C>>31),b=N+b|0,b=(t=C+t|0)>>>0<C>>>0?b+1|0:b,C=Qa(g,m,w,w>>31),b=N+b|0,X=t=C+t|0,O=t>>>0<C>>>0?b+1|0:b,E=M?_[M+12>>2]:E,D=_[E+96>>2],L=_[E+92>>2],G=_[E+88>>2],t=M,V&&(t=M,_[V+12>>2])){t=_[_[V+8>>2]+4>>2],S=_[t+12>>2],E=Qa(w=C=_[(b=S)+92>>2],C>>=31,g,m),x=N,R=E,z=b=_[b+88>>2],E=Qa(b,P=b>>31,h,p),x=N+x|0,x=(b=R+E|0)>>>0<E>>>0?x+1|0:x,T=b,R=b=_[S+96>>2],E=Qa(b,I=b>>31,f,d),b=N+x|0;e:if(!((0|(b=(S=T+E|0)>>>0<E>>>0?b+1|0:b))<(0|O)||(0|b)<=(0|O)&&!(S>>>0>=X>>>0))){for(E=t+12|0,j=_[e+100>>2];;){if((0|j)==_[t+20>>2])break e;if(b=Qa(w,C,a,s),w=N,C=(S=Qa(z,P,l,W))+b|0,b=N+w|0,b=C>>>0<S>>>0?b+1|0:b,w=Qa(R,I,H,c),x=N+b|0,(0|(b=x=(C=w+C|0)>>>0<w>>>0?x+1|0:x))<(0|i)||(0|b)<=(0|i)&&!(C>>>0>k>>>0))break e;if(_[n>>2]=t,i=_[E>>2],U=_[i+96>>2],Y=_[i+92>>2],F=_[i+88>>2],!i)break;if(E=(t=_[_[t+8>>2]+4>>2])+12|0,k=C,i=b,x=_[t+12>>2],S=Qa(w=C=_[(b=x)+92>>2],C>>=31,g,m),T=N,z=b=_[b+88>>2],R=Qa(b,P=b>>31,h,p),b=N+T|0,b=(S=R+S|0)>>>0<R>>>0?b+1|0:b,T=S,R=S=_[x+96>>2],S=T+(x=Qa(S,I=S>>31,f,d))|0,T=N+b|0,(0|(T=S>>>0<x>>>0?T+1|0:T))<(0|O)||(0|T)<=(0|O)&&!(S>>>0>=X>>>0))break e}k=C,i=b}t=_[r>>2]}b=Qa(a,s,L,L>>31),C=N,w=Qa(l,W,G,G>>31),x=N+C|0,x=(b=w+b|0)>>>0<w>>>0?x+1|0:x,C=(w=Qa(H,c,D,D>>31))+b|0,b=N+x|0,b=C>>>0<w>>>0?b+1|0:b,w=C,C=b;e:if(t){if(_[t+12>>2]&&(E=_[_[t+8>>2]>>2],S=_[E+12>>2],z=x=_[(b=S)+92>>2],x=Qa(x,P=x>>31,g,m),T=N,q=x,R=b=_[b+88>>2],x=Qa(b,I=b>>31,h,p),T=N+T|0,T=(b=q+x|0)>>>0<x>>>0?T+1|0:T,q=b,x=b=_[S+96>>2],Q=Qa(b,j=b>>31,f,d),b=N+T|0,!((0|(b=(S=q+Q|0)>>>0<Q>>>0?b+1|0:b))<(0|O)||(0|b)<=(0|O)&&!(S>>>0>=X>>>0)))){for(Q=E+12|0,Z=_[e+100>>2];;){if((0|Z)==_[(S=E)+20>>2])break e;if(b=Qa(z,P,a,s),T=N,E=(z=Qa(R,I,l,W))+b|0,b=N+T|0,b=E>>>0<z>>>0?b+1|0:b,x=Qa(H,c,x,j),T=N+b|0,T=(E=x+E|0)>>>0<x>>>0?T+1|0:T,x=E,(0|(b=T))<(0|C)||(0|b)<=(0|C)&&!(x>>>0>w>>>0))break e;if(_[r>>2]=S,t=_[Q>>2],D=_[t+96>>2],L=_[t+92>>2],G=_[t+88>>2],!t)break;if(Q=(E=_[_[S+8>>2]>>2])+12|0,w=x,C=b,t=S,x=_[E+12>>2],z=S=_[(b=x)+92>>2],S=Qa(S,P=S>>31,g,m),T=N,R=b=_[b+88>>2],j=Qa(b,I=b>>31,h,p),b=N+T|0,b=(S=j+S|0)>>>0<j>>>0?b+1|0:b,q=S,T=Qa(x=S=_[x+96>>2],j=x>>31,f,d),b=N+b|0,(0|(b=(S=q+T|0)>>>0<T>>>0?b+1|0:b))<(0|O)||(0|b)<=(0|O)&&!(S>>>0>=X>>>0))break e}t=S,w=x,C=b}}else t=0;e:{if(i=C-((w>>>0<k>>>0)+i|0)|0,k=w-k|0,(0|i)>0||(0|i)>=0&&!(k>>>0<1))for(;;){C=t=O=(A(L-Y|0,u)+A(G-F|0,y)|0)+A(D-U|0,v)|0,z=t>>31;t:if(!(!(P=_[n>>2])|!_[P+12>>2]||(R=_[_[P>>2]+8>>2],_[R+20>>2]<=_[e+100>>2]))){t=_[R+12>>2],b=(w=_[t+92>>2])-Y|0,x=(S=_[t+88>>2])-F|0,t=(E=_[t+96>>2])-U|0,M=(A(b,u)+A(x,y)|0)+A(t,v)|0,b=Qa(a,s,b,b>>31),T=N,x=(I=Qa(l,W,x,x>>31))+b|0,b=N+T|0,b=x>>>0<I>>>0?b+1|0:b,T=x,x=Qa(H,c,t,t>>31),b=N+b|0,b=(t=T+x|0)>>>0<x>>>0?b+1|0:b,x=t,T=b;i:{if(!(b|t)){if((0|M)<0)break i;break t}if((0|T)>-1||(0|T)>=-1&&!(x>>>0<=4294967295))break t;if(I=(t=M)>>31,b=o,(0|t)>=1?(_[o+24>>2]=t,_[o+28>>2]=I,_[o+40>>2]=1,t=-1):(0|M)<=-1?(_[o+40>>2]=-1,_[o+24>>2]=0-t,_[o+28>>2]=0-((0<t>>>0)+I|0),t=1):(_[o+24>>2]=0,_[o+28>>2]=0,_[o+40>>2]=0,t=0),_[b+40>>2]=t,_[o+32>>2]=0-x,_[o+36>>2]=0-((0<x>>>0)+T|0),(0|O)>=1?(_[o>>2]=C,_[o+4>>2]=z,_[o+16>>2]=1,x=-1):(0|O)<=-1?(_[o+16>>2]=-1,t=C,_[o>>2]=0-t,_[o+4>>2]=0-((0<t>>>0)+z|0),x=1):(_[o>>2]=0,_[o+4>>2]=0,_[o+16>>2]=0,x=0),M=o,t=k,T=b=i,(0|b)>0||(0|b)>=0&&!(t>>>0<=0)||(t=0,T=0,(0|i)>-1||(0|i)>=-1&&!(k>>>0<=4294967295)||(_[o+16>>2]=x,t=0-(b=k)|0,T=0-((0<b>>>0)+i|0)|0)),b=T,_[M+8>>2]=t,_[M+12>>2]=b,(0|mn(o+24|0,o))<=-1)break t}_[n>>2]=(0|P)==(0|V)?0:R,t=Qa(a,s,t=L-w|0,t>>31),i=N,t=(b=t)+(k=Qa(l,W,t=G-S|0,t>>31))|0,b=N+i|0,b=t>>>0<k>>>0?b+1|0:b,x=t,i=Qa(H,c,t=D-E|0,t>>31),b=N+b|0,k=t=x+i|0,i=t>>>0<i>>>0?b+1|0:b,F=S,Y=w,U=E;continue}if(!(t=_[r>>2])|!_[t+12>>2])break e;if(P=_[_[t+8>>2]>>2],_[P+20>>2]<=_[e+100>>2])break e;if(t=_[P+12>>2],E=b=S=(w=_[t+92>>2])-L|0,b=Qa(b,M=b>>31,g,m),x=N,T=b,R=b=G=(L=_[t+88>>2])-G|0,b=T+(X=Qa(b,I=b>>31,h,p))|0,T=N+x|0,T=b>>>0<X>>>0?T+1|0:T,x=b,X=t=D=(b=_[t+96>>2])-D|0,(0|x)!=(0-(t=Qa(f,d,t,j=t>>31))|0)|(0-(N+(0<t>>>0)|0)|0)!=(0|T))break e;if(t=Qa(a,s,t=w-Y|0,t>>31),w=N,t=(x=t)+(L=Qa(l,W,t=L-F|0,t>>31))|0,x=N+w|0,x=t>>>0<L>>>0?x+1|0:x,T=t,w=Qa(H,c,t=b-U|0,t>>31),b=N+x|0,b=(t=T+w|0)>>>0<w>>>0?b+1|0:b,w=t,t=b,(0|b)<0||(0|b)<=0&&!(w>>>0>=1))break e;S=(A(S,u)+A(G,y)|0)+A(D,v)|0,b=Qa(E,M,a,s),M=N,E=(x=Qa(R,I,l,W))+b|0,b=N+M|0,b=E>>>0<x>>>0?b+1|0:b,M=Qa(H,c,X,j),b=N+b|0,M=b=(E=M+E|0)>>>0<M>>>0?b+1|0:b;t:{if(!(b|E)){if((0|S)<0)break t;break e}if((0|M)>-1||(0|M)>=-1&&!(E>>>0<=4294967295))break e;if(D=(b=S)>>31,x=o,(0|b)>=1?(_[o+24>>2]=b,_[o+28>>2]=D,_[o+40>>2]=1,b=-1):(0|S)<=-1?(_[o+40>>2]=-1,_[o+24>>2]=0-b,_[o+28>>2]=0-((0<b>>>0)+D|0),b=1):(_[o+24>>2]=0,_[o+28>>2]=0,_[o+40>>2]=0,b=0),_[x+40>>2]=b,_[o+32>>2]=0-E,_[o+36>>2]=0-((0<E>>>0)+M|0),(0|O)>=1?(_[o>>2]=C,_[o+4>>2]=z,_[o+16>>2]=1,E=-1):(0|O)<=-1?(_[o+16>>2]=-1,_[o>>2]=0-C,_[o+4>>2]=0-((0<C>>>0)+z|0),E=1):(_[o>>2]=0,_[o+4>>2]=0,_[o+16>>2]=0,E=0),S=o,x=o,C=i,R=b=k,(0|i)>0||(0|i)>=0&&!(b>>>0<=0)||(C=0,R=0,(0|i)>-1||(0|i)>=-1&&!(k>>>0<=4294967295)||(_[o+16>>2]=E,C=0-((0<k>>>0)+i|0)|0,R=0-k|0)),_[x+8>>2]=R,_[S+12>>2]=C,(0|mn(o+24|0,o))<=0)break e}_[r>>2]=P,i=_[P+12>>2],D=_[i+96>>2],L=_[i+92>>2],G=_[i+88>>2],k=w,i=t}if(!((0|i)>-1||(0|i)>=-1&&!(k>>>0<=4294967295)))for(;;){w=b=z=(A(L-Y|0,u)+A(G-F|0,y)|0)+A(D-U|0,v)|0,P=b>>31;t:if(!(!t|!_[t+12>>2]||(R=_[_[t+4>>2]+8>>2],_[R+20>>2]<=_[e+100>>2]))){b=_[R+12>>2],T=(C=_[b+92>>2])-L|0,O=(S=_[b+88>>2])-G|0,V=(E=_[b+96>>2])-D|0,x=(A(T,u)+A(O,y)|0)+A(V,v)|0,b=Qa(a,s,T,T>>31),I=N,T=(O=Qa(l,W,O,O>>31))+b|0,b=N+I|0,b=T>>>0<O>>>0?b+1|0:b,O=Qa(H,c,V,V>>31),b=N+b|0,O=b=(T=O+T|0)>>>0<O>>>0?b+1|0:b;i:{if(!(b|T)){if((0|x)>0)break i;break t}if((0|O)>-1||(0|O)>=-1&&!(T>>>0<=4294967295))break t;if(I=(b=x)>>31,X=o,(0|b)>=1?(_[o+24>>2]=b,_[o+28>>2]=I,_[o+40>>2]=1,b=-1):(0|x)<=-1?(_[o+40>>2]=-1,_[o+24>>2]=0-b,_[o+28>>2]=0-((0<b>>>0)+I|0),b=1):(_[o+24>>2]=0,_[o+28>>2]=0,_[o+40>>2]=0,b=0),_[X+40>>2]=b,_[o+32>>2]=0-T,_[o+36>>2]=0-((0<T>>>0)+O|0),(0|z)>=1?(_[o>>2]=w,_[o+4>>2]=P,_[o+16>>2]=1,O=-1):(0|z)<=-1?(_[o+16>>2]=-1,b=w,_[o>>2]=0-b,_[o+4>>2]=0-((0<b>>>0)+P|0),O=1):(_[o>>2]=0,_[o+4>>2]=0,_[o+16>>2]=0,O=0),T=o,b=k,x=i,(0|i)>0||(0|i)>=0&&!(b>>>0<=0)||(b=0,x=0,(0|i)>-1||(0|i)>=-1&&!(k>>>0<=4294967295)||(_[o+16>>2]=O,b=0-(x=k)|0,x=0-((0<x>>>0)+i|0)|0)),_[T+8>>2]=b,_[T+12>>2]=x,(0|mn(o+24|0,o))>=1)break t}t=(0|t)==(0|M)?0:R,_[r>>2]=t,i=Qa(a,s,i=C-Y|0,i>>31),k=N,i=(b=i)+(w=Qa(l,W,i=S-F|0,i>>31))|0,b=N+k|0,b=i>>>0<w>>>0?b+1|0:b,x=i,k=Qa(H,c,i=E-U|0,i>>31),b=N+b|0,b=(i=x+k|0)>>>0<k>>>0?b+1|0:b,k=i,i=b,G=S,L=C,D=E;continue}if(!(t=_[n>>2])|!_[t+12>>2])break e;if(O=_[_[t+8>>2]+4>>2],_[O+20>>2]<=_[e+100>>2])break e;if(t=_[O+12>>2],x=b=E=(C=_[t+92>>2])-Y|0,b=Qa(b,Y=b>>31,g,m),S=N,T=b,R=b=F=(V=_[t+88>>2])-F|0,b=T+(X=Qa(b,I=b>>31,h,p))|0,T=N+S|0,T=b>>>0<X>>>0?T+1|0:T,X=t=U=(S=_[t+96>>2])-U|0,(0-(t=Qa(f,d,t,j=t>>31))|0)!=(0|b)|(0-(N+(0<t>>>0)|0)|0)!=(0|T))break e;if(t=Qa(a,s,t=L-C|0,t>>31),b=N,T=t,C=Qa(l,W,t=G-V|0,t>>31),b=N+b|0,b=(t=T+C|0)>>>0<C>>>0?b+1|0:b,T=t,C=Qa(H,c,t=D-S|0,t>>31),b=N+b|0,S=t=T+C|0,C=b=t>>>0<C>>>0?b+1|0:b,(0|b)>-1||(0|b)>=-1&&!(t>>>0<=4294967295))break e;if(F=(A(E,u)+A(F,y)|0)+A(U,v)|0,t=Qa(x,Y,a,s),b=N,E=Qa(R,I,l,W),x=N+b|0,x=(t=E+t|0)>>>0<E>>>0?x+1|0:x,E=Qa(H,c,X,j),b=N+x|0,b=(t=E+t|0)>>>0<E>>>0?b+1|0:b,E=t,x=b,b|t){if((0|x)>-1||(0|x)>=-1&&!(E>>>0<=4294967295))break e;if(U=(t=F)>>31,b=o,(0|t)>=1?(_[o+24>>2]=t,_[o+28>>2]=U,_[o+40>>2]=1,t=-1):(0|F)<=-1?(_[o+40>>2]=-1,_[o+24>>2]=0-t,_[o+28>>2]=0-((0<t>>>0)+U|0),t=1):(_[o+24>>2]=0,_[o+28>>2]=0,_[o+40>>2]=0,t=0),_[b+40>>2]=t,_[o+32>>2]=0-E,_[o+36>>2]=0-((0<E>>>0)+x|0),(0|z)>=1?(_[o>>2]=w,_[o+4>>2]=P,_[o+16>>2]=1,F=-1):(0|z)<=-1?(_[o+16>>2]=-1,_[o>>2]=0-w,_[o+4>>2]=0-((0<w>>>0)+P|0),F=1):(_[o>>2]=0,_[o+4>>2]=0,_[o+16>>2]=0,F=0),w=o,x=o,E=t=k,(0|(b=i))>0||(0|b)>=0&&!(t>>>0<=0)||(b=0,E=0,(0|i)>-1||(0|i)>=-1&&!(k>>>0<=4294967295)||(_[o+16>>2]=F,b=0-((0<k>>>0)+i|0)|0,E=0-k|0)),_[x+8>>2]=E,_[w+12>>2]=b,(0|mn(o+24|0,o))>=0)break e}else if((0|F)<=0)break e;_[n>>2]=O,i=_[O+12>>2],U=_[i+96>>2],Y=_[i+92>>2],t=_[r>>2],F=_[i+88>>2],k=S,i=C}}B=o+48|0}function Io(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]>>2]=_[i+8>>2]}function Mo(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]>>2]}function Po(e,t){var i,n=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0;B=i=B-32|0;e:if(!((0|(t=(0|t)<=-1?_[e+12>>2]:t))<1)&&(r=_[e>>2]))for(;;){if(c=0,_[(a=r+40|0)>>2])for(;(o=_[r+32>>2])>>>0<=r>>>0?o=r:(h=(0|(n=_[o+40>>2]))==(0|r),u=_[36+((s=((0|n)!=(0|r))<<2)+o|0)>>2],l=e,(n=_[o+32>>2])&&(l=36+(n+((_[n+40>>2]==(0|o))<<2)|0)|0),_[l>>2]=r,_[u+32>>2]=r,_[o+32>>2]=r,_[r+32>>2]=n,n=r+36|0,_[o+36>>2]=_[n>>2],_[o+40>>2]=_[a>>2],_[_[n>>2]+32>>2]=o,_[_[a>>2]+32>>2]=o,_[n+(h<<2)>>2]=o,_[n+s>>2]=u,a=_[4+(n=o+24|0)>>2],_[i+24>>2]=_[n>>2],_[i+28>>2]=a,a=_[4+(n=o+16|0)>>2],_[i+16>>2]=_[n>>2],_[i+20>>2]=a,a=_[4+(n=o+8|0)>>2],_[i+8>>2]=_[n>>2],_[i+12>>2]=a,n=_[o+4>>2],_[i>>2]=_[o>>2],_[i+4>>2]=n,a=_[4+(n=r+24|0)>>2],_[o+24>>2]=_[n>>2],_[o+28>>2]=a,a=_[4+(n=r+16|0)>>2],_[o+16>>2]=_[n>>2],_[o+20>>2]=a,a=_[4+(n=r+8|0)>>2],_[o+8>>2]=_[n>>2],_[o+12>>2]=a,n=_[r+4>>2],_[o>>2]=_[r>>2],_[o+4>>2]=n,n=_[i+28>>2],_[r+24>>2]=_[i+24>>2],_[r+28>>2]=n,n=_[i+20>>2],_[r+16>>2]=_[i+16>>2],_[r+20>>2]=n,n=_[i+12>>2],_[r+8>>2]=_[i+8>>2],_[r+12>>2]=n,n=_[i+4>>2],_[r>>2]=_[i>>2],_[r+4>>2]=n),r=_[e+16>>2]>>>c,c=c+1&31,r=_[36+(((1&r)<<2)+o|0)>>2],_[(a=r+40|0)>>2];);if(l=o=e,s=0,Yn(o,r)&&(s=_[e>>2]),Wn(l,s,r),_[e+16>>2]=_[e+16>>2]+1,!(t=t+-1|0))break e;r=_[e>>2]}B=i+32|0}function Do(e){var t=0;(t=_[e>>2])&&qn(e,t),(t=_[e+4>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+4>>2]=0,_[e+8>>2]=-1,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,_[e+16>>2]=0,a[e+36|0]=1}function Bo(e){var t;B=t=B-16|0,_[t+12>>2]=e,(e=_[t+12>>2])&&(_[5586]=_[5586]+1,o[_[4568]](e)),B=t+16|0}function No(e,t,i,n){t|=0,i|=0,n|=0;var r,s=0,l=0,c=0,u=0,h=0,p=0,v=0;_[168+(e|=0)>>2]=_[e+152>>2],a[t+80|0]=1,a[t+60|0]=0,_[t+52>>2]=287,_[t>>2]=14192,_[t+76>>2]=0,a[t+100|0]=1,_[t+68>>2]=0,_[t+72>>2]=0,_[t+96>>2]=0,a[t+120|0]=1,_[t+88>>2]=0,_[t+92>>2]=0,_[t+116>>2]=0,a[t+140|0]=1,_[t+108>>2]=0,_[t+112>>2]=0,_[t+136>>2]=0,a[t+164|0]=1,_[t+144>>2]=0,_[t+128>>2]=0,_[t+132>>2]=0,_[t+160>>2]=0,_[t+152>>2]=0,_[t+156>>2]=0,_[t+168>>2]=0,_[t+28>>2]=2139095039,_[t+32>>2]=0,_[t+20>>2]=2139095039,_[t+24>>2]=2139095039,_[t+12>>2]=-8388609,_[t+16>>2]=0,_[t+4>>2]=-8388609,_[t+8>>2]=-8388609,c=_[e+56>>2],i=t,n?(_[t+56>>2]=c<<8&16711680|c<<24|c>>>8&65280|c>>>24,a[t+4|0]=d[e+7|0],a[t+5|0]=d[e+6|0],a[t+6|0]=d[e+5|0],a[t+7|0]=d[e+4|0],a[t+8|0]=d[e+11|0],a[t+9|0]=d[e+10|0],a[t+10|0]=d[e+9|0],a[t+11|0]=d[e+8|0],a[t+12|0]=d[e+15|0],a[t+13|0]=d[e+14|0],a[t+14|0]=d[e+13|0],a[t+15|0]=d[e+12|0],a[t+16|0]=d[e+19|0],a[t+17|0]=d[e+18|0],a[t+18|0]=d[e+17|0],a[t+19|0]=d[e+16|0],a[t+20|0]=d[e+23|0],a[t+21|0]=d[e+22|0],a[t+22|0]=d[e+21|0],a[t+23|0]=d[e+20|0],a[t+24|0]=d[e+27|0],a[t+25|0]=d[e+26|0],a[t+26|0]=d[e+25|0],a[t+27|0]=d[e+24|0],a[t+28|0]=d[e+31|0],a[t+29|0]=d[e+30|0],a[t+30|0]=d[e+29|0],a[t+31|0]=d[e+28|0],a[t+32|0]=d[e+35|0],a[t+33|0]=d[e+34|0],a[t+34|0]=d[e+33|0],a[t+35|0]=d[e+32|0],a[t+36|0]=d[e+39|0],a[t+37|0]=d[e+38|0],a[t+38|0]=d[e+37|0],a[t+39|0]=d[e+36|0],a[t+40|0]=d[e+43|0],a[t+41|0]=d[e+42|0],a[t+42|0]=d[e+41|0],a[t+43|0]=d[e+40|0],a[t+44|0]=d[e+47|0],a[t+45|0]=d[e+46|0],a[t+46|0]=d[e+45|0],a[t+47|0]=d[e+44|0],a[t+48|0]=d[e+51|0],a[t+49|0]=d[e+50|0],a[t+50|0]=d[e+49|0],a[t+51|0]=d[e+48|0],c=_[e+144>>2],_[t+144>>2]=c<<24|c<<8&16711680|c>>>8&65280|c>>>24,c=(c=_[e+168>>2])<<24|c<<8&16711680|c>>>8&65280|c>>>24):(_[t+56>>2]=c,c=_[e+16>>2],_[t+12>>2]=_[e+12>>2],_[t+16>>2]=c,c=_[e+8>>2],_[t+4>>2]=_[e+4>>2],_[t+8>>2]=c,c=_[e+32>>2],_[t+28>>2]=_[e+28>>2],_[t+32>>2]=c,c=_[e+24>>2],_[t+20>>2]=_[e+20>>2],_[t+24>>2]=c,c=_[e+48>>2],_[t+44>>2]=_[e+44>>2],_[t+48>>2]=c,c=_[e+40>>2],_[t+36>>2]=_[e+36>>2],_[t+40>>2]=c,_[t+144>>2]=_[e+144>>2],c=_[e+168>>2]),_[i+168>>2]=c,a[t+60|0]=d[e+60|0],c=t+172|0,r=_[e+56>>2];e:if(d[e+60|0]){(i=_[t+136>>2])&&(d[t+140|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[t+136>>2]=0),_[t+136>>2]=c,a[t+140|0]=0,_[t+132>>2]=r,_[t+128>>2]=r;t:if(n){if(!((0|r)<1))for(u=_[e+136>>2];s=(i=h<<4)+c|0,i=m[(l=i+u|0)>>1],f[s>>1]=(i<<24|i<<8&16711680)>>>16,i=m[l+2>>1],f[s+2>>1]=(i<<24|i<<8&16711680)>>>16,i=m[l+4>>1],f[s+4>>1]=(i<<24|i<<8&16711680)>>>16,i=m[l+6>>1],f[s+6>>1]=(i<<24|i<<8&16711680)>>>16,i=m[l+8>>1],f[s+8>>1]=(i<<24|i<<8&16711680)>>>16,i=m[l+10>>1],f[s+10>>1]=(i<<24|i<<8&16711680)>>>16,i=_[l+12>>2],_[s+12>>2]=i<<24|i<<8&16711680|i>>>8&65280|i>>>24,(0|r)!=(0|(h=h+1|0)););}else{if((0|r)<1)break t;for(u=_[e+136>>2];l=(i=h<<4)+c|0,i=i+u|0,f[l>>1]=m[i>>1],f[l+2>>1]=m[i+2>>1],f[l+4>>1]=m[i+4>>1],f[l+6>>1]=m[i+6>>1],f[l+8>>1]=m[i+8>>1],f[l+10>>1]=m[i+10>>1],_[l+12>>2]=_[i+12>>2],(0|r)!=(0|(h=h+1|0)););}l=t+128|0,s=r<<4}else{(i=_[t+96>>2])&&(d[t+100|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[t+96>>2]=0),l=t+88|0,_[t+96>>2]=c,a[t+100|0]=0,_[t+92>>2]=r,_[t+88>>2]=r;t:{i:{if(n){if((0|r)<1)break i;for(p=_[e+96>>2],i=c;s=(u=v<<6)+i|0,i=u+p|0,a[0|s]=d[i+3|0],a[s+1|0]=d[i+2|0],a[s+2|0]=d[i+1|0],a[s+3|0]=d[0|i],a[s+4|0]=d[i+7|0],a[s+5|0]=d[i+6|0],a[s+6|0]=d[i+5|0],a[s+7|0]=d[i+4|0],a[s+8|0]=d[i+11|0],a[s+9|0]=d[i+10|0],a[s+10|0]=d[i+9|0],a[s+11|0]=d[i+8|0],a[s+12|0]=d[i+15|0],a[s+13|0]=d[i+14|0],a[s+14|0]=d[i+13|0],a[s+15|0]=d[i+12|0],s=u+_[t+96>>2]|0,i=u+_[e+96>>2]|0,a[s+16|0]=d[i+19|0],a[s+17|0]=d[i+18|0],a[s+18|0]=d[i+17|0],a[s+19|0]=d[i+16|0],a[s+20|0]=d[i+23|0],a[s+21|0]=d[i+22|0],a[s+22|0]=d[i+21|0],a[s+23|0]=d[i+20|0],a[s+24|0]=d[i+27|0],a[s+25|0]=d[i+26|0],a[s+26|0]=d[i+25|0],a[s+27|0]=d[i+24|0],a[s+28|0]=d[i+31|0],a[s+29|0]=d[i+30|0],a[s+30|0]=d[i+29|0],a[s+31|0]=d[i+28|0],s=u+(i=_[t+96>>2])|0,p=_[e+96>>2],h=_[32+(u=u+p|0)>>2],_[s+32>>2]=h<<24|h<<8&16711680|h>>>8&65280|h>>>24,h=_[u+36>>2],_[s+36>>2]=h<<24|h<<8&16711680|h>>>8&65280|h>>>24,u=_[u+40>>2],_[s+40>>2]=u<<24|u<<8&16711680|u>>>8&65280|u>>>24,(0|r)!=(0|(v=v+1|0)););}else{if((0|r)<1)break i;for(v=_[e+96>>2],i=c;s=(p=h<<6)+i|0,i=_[4+(u=p+v|0)>>2],_[s>>2]=_[u>>2],_[s+4>>2]=i,i=_[u+12>>2],_[s+8>>2]=_[u+8>>2],_[s+12>>2]=i,u=p+_[e+96>>2]|0,i=_[u+20>>2],s=p+_[t+96>>2]|0,_[s+16>>2]=_[u+16>>2],_[s+20>>2]=i,i=_[u+28>>2],_[s+24>>2]=_[u+24>>2],_[s+28>>2]=i,s=p+(i=_[t+96>>2])|0,u=p+(v=_[e+96>>2])|0,_[s+32>>2]=_[u+32>>2],_[s+36>>2]=_[u+36>>2],_[s+40>>2]=_[u+40>>2],(0|r)!=(0|(h=h+1|0)););}if(u=s=r<<6,i)break t;break e}i=c,u=r<<6}s=u,d[t+100|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[t+96>>2]=0}_[l>>2]=0,_[l+4>>2]=0,a[l+5|0]=0,a[l+6|0]=0,a[l+7|0]=0,a[l+8|0]=0,a[l+9|0]=0,a[l+10|0]=0,a[l+11|0]=0,a[l+12|0]=0,l=_[e+168>>2],(i=_[t+160>>2])&&(d[t+164|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[t+160>>2]=0),u=s+c|0,_[t+160>>2]=u,a[t+164|0]=0,_[t+156>>2]=l,_[t+152>>2]=l,c=_[e+168>>2];e:if(n){if(!((0|c)<1))for(i=_[e+160>>2],n=0;s=(e=n<<5)+u|0,e=m[(l=e+i|0)>>1],f[s>>1]=(e<<24|e<<8&16711680)>>>16,e=m[l+2>>1],f[s+2>>1]=(e<<24|e<<8&16711680)>>>16,e=m[l+4>>1],f[s+4>>1]=(e<<24|e<<8&16711680)>>>16,e=m[l+6>>1],f[s+6>>1]=(e<<24|e<<8&16711680)>>>16,e=m[l+8>>1],f[s+8>>1]=(e<<24|e<<8&16711680)>>>16,e=m[l+10>>1],f[s+10>>1]=(e<<24|e<<8&16711680)>>>16,e=_[l+12>>2],_[s+12>>2]=e<<24|e<<8&16711680|e>>>8&65280|e>>>24,e=_[l+16>>2],_[s+16>>2]=e<<24|e<<8&16711680|e>>>8&65280|e>>>24,(0|(n=n+1|0))<(0|c););}else{if((0|c)<1)break e;for(c=_[e+160>>2],n=0;l=(i=n<<5)+u|0,i=i+c|0,f[l>>1]=m[i>>1],f[l+2>>1]=m[i+2>>1],f[l+4>>1]=m[i+4>>1],f[l+6>>1]=m[i+6>>1],f[l+8>>1]=m[i+8>>1],f[l+10>>1]=m[i+10>>1],_[l+12>>2]=_[i+12>>2],i=_[i+16>>2],_[l+28>>2]=0,_[l+20>>2]=0,_[l+24>>2]=0,_[l+16>>2]=i,(0|(n=n+1|0))<_[e+168>>2];);}return _[t>>2]=0,a[t+157|0]=0,a[t+158|0]=0,a[t+159|0]=0,a[t+160|0]=0,a[t+161|0]=0,a[t+162|0]=0,a[t+163|0]=0,a[t+164|0]=0,_[t+152>>2]=0,_[t+156>>2]=0,1}function Lo(e,t,i,n,r,a,s){var l,c=b(0),u=b(0),h=0,p=b(0),f=b(0),d=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=0,E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=0,M=0,P=0,D=0,N=0,L=0,z=0,G=0,U=0,X=0,V=0,H=0,j=0,W=0,Y=0,q=0,Q=0,Z=0,K=0;if(B=l=B-32|0,k=y[i+4>>2],O=y[n+4>>2],R=y[i>>2],F=y[n>>2],d=y[e+28>>2],E=y[e+12>>2],A=y[n+8>>2],x=y[i+8>>2],c=(c=b((A<x?A:x)+y[r+8>>2]))<E?E:c,p=y[e+44>>2],I=(c=b(b((d<c?d:c)-E)*p))<b(4294967296)&c>=b(0)?~~c>>>0:0,v=y[e+24>>2],C=y[e+8>>2],c=(c=b((O<k?O:k)+y[r+4>>2]))<C?C:c,T=y[e+40>>2],M=(c=b(b((v<c?v:c)-C)*T))<b(4294967296)&c>=b(0)?~~c>>>0:0,f=y[e+20>>2],g=y[e+4>>2],c=(c=b((F<R?F:R)+y[r>>2]))<g?g:c,u=y[e+36>>2],P=(c=b(b((f<c?f:c)-g)*u))<b(4294967296)&c>=b(0)?~~c>>>0:0,c=b((x<A?A:x)+y[a+8>>2]),S=(c=b(b(b((d<(c=c<E?E:c)?d:c)-E)*p)+b(1)))<b(4294967296)&c>=b(0)?~~c>>>0:0,c=b((k<O?O:k)+y[a+4>>2]),h=(c=b(b(b((v<(c=c<C?C:c)?v:c)-C)*T)+b(1)))<b(4294967296)&c>=b(0)?~~c>>>0:0,c=b((R<F?F:R)+y[a>>2]),n=(c=b(b(b((f<(c=c<g?g:c)?f:c)-g)*u)+b(1)))<b(4294967296)&c>=b(0)?~~c>>>0:0,0<(0|s))for(f=b(F-R),T=b(O-k),u=b(A-x),c=b(b(1)/b(w(b(b(b(f*f)+b(T*T))+b(u*u))))),p=b(u*c),d=b(u*p),u=b(f*c),c=b(T*c),T=b(d+b(b(f*u)+b(T*c))),G=65534&I,U=65534&M,X=65534&P,V=1|S,H=1|h,j=1|n,n=_[e+136>>2],W=((S=(g=p==b(0)?b(0xde0b6b000000000):b(b(1)/p))<b(0))<<4)+l|8,Y=((h=(A=c==b(0)?b(0xde0b6b000000000):b(b(1)/c))<b(0))<<4)+l|4,q=((1^S)<<4)+l|8,Q=((1^h)<<4)+l|4,Z=((h=(x=u==b(0)?b(0xde0b6b000000000):b(b(1)/u))<b(0))<<4)+l|0,K=((1^h)<<4)+l|0;;){L=_[n+12>>2],h=0;e:{t:{i:{n:if(!(X>>>0>m[n+6>>1]||j>>>0<(z=m[n>>1])>>>0|G>>>0>m[n+10>>1]||V>>>0<(I=m[n+4>>1])>>>0|U>>>0>m[n+8>>1]||H>>>0<(M=m[n+2>>1])>>>0)){if(d=y[e+12>>2],v=y[e+44>>2],f=y[e+8>>2],p=y[e+40>>2],u=y[e+4>>2],c=y[e+36>>2],_[l+12>>2]=0,P=m[n+10>>1],S=m[n+8>>1],h=m[n+6>>1],_[l+28>>2]=0,y[l>>2]=b(u+b(b(z>>>0)/c))-y[a>>2],y[l+4>>2]=b(f+b(b(M>>>0)/p))-y[a+4>>2],y[l+8>>2]=b(d+b(b(I>>>0)/v))-y[a+8>>2],y[l+16>>2]=b(u+b(b(h>>>0)/c))-y[r>>2],y[l+20>>2]=b(f+b(b(S>>>0)/p))-y[r+4>>2],y[l+24>>2]=b(d+b(b(P>>>0)/v))-y[r+8>>2],u=y[i+4>>2],d=b(A*b(y[Y>>2]-u)),c=y[i>>2],!(d>(p=b(x*b(y[K>>2]-c)))||(v=b(x*b(y[Z>>2]-c)))>(u=b(A*b(y[Q>>2]-u)))||(c=y[i+8>>2],(f=b(g*b(y[W>>2]-c)))>(p=u<p?u:p)||(u=d>v?d:v)>(c=b(g*b(y[q>>2]-c)))))){if(!(h=(f>u?f:u)<T&(c<p?c:p)>b(0))|(0|L)<0)break n;h=_[n+12>>2],o[_[_[t>>2]+8>>2]](t,h>>21,2097151&h);break i}h=0}if(!((0|L)>-1||h))break t}D=D+1|0,n=n+16|0;break e}D=D-(h=_[n+12>>2])|0,n=n-(h<<4)|0}if(N=N+1|0,!((0|D)<(0|s)))break}_[5004]<(0|N)&&(_[5004]=N),B=l+32|0}function zo(e,t,i,n,r,a){var s,l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=0,x=b(0),T=b(0),S=b(0),E=0,C=b(0),k=0,O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=0,L=0,z=0,G=0,U=0,X=0;B=s=B-32|0;e:if(!(_[e+56>>2]<1))for(h=y[n+8>>2],u=y[i+8>>2],T=d=b(h-u),c=y[n>>2],m=y[i>>2],p=b(c-m),v=y[n+4>>2],g=y[i+4>>2],f=b(v-g),x=b(b(1)/b(w(b(b(b(p*p)+b(f*f))+b(d*d))))),d=b(d*x),S=p,p=b(p*x),C=f,f=b(f*x),C=b(b(T*d)+b(b(S*p)+b(C*f))),x=y[a+8>>2],R=b((u<h?h:u)+x),T=y[a+4>>2],F=b((g<v?v:g)+T),S=y[a>>2],I=b((m<c?c:m)+S),u=h<u?h:u,h=y[r+8>>2],M=b(u+h),u=y[r+4>>2],P=b((v<g?v:g)+u),m=c<m?c:m,c=y[r>>2],D=b(m+c),n=_[e+96>>2],N=((l=(m=d==b(0)?b(0xde0b6b000000000):b(b(1)/d))<b(0))<<4)+s|8,L=((A=(v=f==b(0)?b(0xde0b6b000000000):b(b(1)/f))<b(0))<<4)+s|4,z=((1^l)<<4)+s|8,G=((1^A)<<4)+s|4,U=((l=(g=p==b(0)?b(0xde0b6b000000000):b(b(1)/p))<b(0))<<4)+s|0,X=((1^l)<<4)+s|0;;){l=_[n+4>>2],_[s>>2]=_[n>>2],_[s+4>>2]=l,l=_[n+12>>2],_[s+8>>2]=_[n+8>>2],_[s+12>>2]=l,l=_[n+28>>2],_[s+24>>2]=_[n+24>>2],_[s+28>>2]=l,l=_[n+20>>2],_[s+16>>2]=_[n+16>>2],_[s+20>>2]=l,y[s>>2]=y[s>>2]-S,y[s+4>>2]=y[s+4>>2]-T,y[s+16>>2]=y[s+16>>2]-c,y[s+20>>2]=y[s+20>>2]-u,y[s+8>>2]=y[s+8>>2]-x,y[s+24>>2]=y[s+24>>2]-h,l=0,D>y[n+16>>2]||(l=0,I<y[n>>2]||(l=1)),A=0,A=R<y[n+8>>2]|M>y[n+24>>2]?A:l;t:{i:{n:{r:{if(!(F<y[n+4>>2]|P>y[n+20>>2]|1^A||(p=y[i+4>>2],h=b(v*b(y[L>>2]-p)),c=y[i>>2],h>(u=b(g*b(y[X>>2]-c)))||(c=b(g*b(y[U>>2]-c)))>(p=b(v*b(y[G>>2]-p)))||(d=y[i+8>>2],(f=b(m*b(y[N>>2]-d)))>(u=p<u?p:u)||(h=h>c?h:c)>(c=b(m*b(y[z>>2]-d))))))){if(A=-1==(0|(O=_[n+32>>2])),1!=(0|(l=(f>h?f:h)<C&(c<u?c:u)>b(0)))|-1!=(0|O))break r;o[_[_[t>>2]+8>>2]](t,_[n+36>>2],_[n+40>>2]);break n}A=-1==_[n+32>>2],l=0}if(!A&&!l)break i}E=E+1|0,n=n- -64|0;break t}E=(l=_[n+32>>2])+E|0,n=(l<<6)+n|0}if(k=k+1|0,(0|E)>=_[e+56>>2])break e;h=y[r+8>>2],u=y[r+4>>2],c=y[r>>2],x=y[a+8>>2],T=y[a+4>>2],S=y[a>>2]}_[5004]<(0|k)&&(_[5004]=k),B=s+32|0}function Go(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+4>>2]=_[i+8>>2]}function Uo(e,t){t|=0,e=_[4+(e|=0)>>2],o[_[_[e>>2]+8>>2]](e,_[t+36>>2])}function Xo(e){return _[96+(e|=0)>>2]}function Vo(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,B=i+16|0,_[_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<2)>>2]}function Ho(e,t,i,n,r,s,l,c,u){var h,p=0,f=0,m=b(0),v=0,g=0,A=0,x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=0,k=0,O=b(0),R=0;if(B=h=B-32|0,e){if((0|(p=_[c+4>>2]))<=127){if(_[c+8>>2]<=127){if(_[5585]=_[5585]+1,v=0|o[_[4567]](512,16),(0|(A=_[c+4>>2]))>=1)for(;_[(f=g<<2)+v>>2]=_[f+_[c+12>>2]>>2],(0|A)!=(0|(g=g+1|0)););(g=_[c+12>>2])&&(d[c+16|0]&&g&&(_[5586]=_[5586]+1,o[_[4568]](g)),_[c+12>>2]=0),_[c+12>>2]=v,a[c+16|0]=1,_[c+8>>2]=128}for(;_[_[c+12>>2]+(p<<2)>>2]=0,128!=(0|(p=p+1|0)););}for(_[c+4>>2]=128,_[_[c+12>>2]>>2]=e,p=126,g=1;;){if(A=_[c+12>>2],v=_[A+(k=(e=g+-1|0)<<2)>>2],x=y[v>>2],T=y[v+4>>2],m=y[v+8>>2],S=y[l>>2],E=y[l+4>>2],C=y[l+8>>2],_[h+12>>2]=0,y[h+8>>2]=m-C,y[h+4>>2]=T-E,y[h>>2]=x-S,x=y[v+16>>2],T=y[v+20>>2],m=y[v+24>>2],S=y[s>>2],E=y[s+4>>2],C=y[s+8>>2],_[h+28>>2]=0,y[h+24>>2]=m-C,y[h+20>>2]=T-E,y[h+16>>2]=x-S,f=_[n+4>>2],S=y[t+4>>2],E=y[i+4>>2],x=b(b(y[4+((f<<4)+h|0)>>2]-S)*E),m=y[i>>2],w=_[n>>2],C=y[t>>2],!(x>(T=b(m*b(y[(1-w<<4)+h>>2]-C)))||(m=b(b(y[(w<<4)+h>>2]-C)*m))>(S=b(E*b(y[4+((1-f<<4)+h|0)>>2]-S)))||(f=_[n+8>>2],C=y[t+8>>2],O=y[i+8>>2],(E=b(b(y[8+((f<<4)+h|0)>>2]-C)*O))>(T=S<T?S:T)||(x=x>m?x:m)>(m=b(O*b(y[8+((1-f<<4)+h|0)>>2]-C)))|(E>x?E:x)<r^1|(m<T?m:T)>b(0)^1)))if(_[v+40>>2]){if((0|e)>(0|p)){if((0|(p=_[c+4>>2]))<(0|(f=p<<1))){if(_[c+8>>2]<(0|f)){if(p){if(_[5585]=_[5585]+1,A=0|o[_[4567]](p<<3,16),e=0,!((0|(w=_[c+4>>2]))<1))for(;_[(R=e<<2)+A>>2]=_[_[c+12>>2]+R>>2],(0|w)!=(0|(e=e+1|0)););}else A=0;(e=_[c+12>>2])&&(d[c+16|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[c+12>>2]=0),_[c+12>>2]=A,a[c+16|0]=1,_[c+8>>2]=f}for(;_[(p<<2)+A>>2]=0,A=_[c+12>>2],(0|f)!=(0|(p=p+1|0)););}_[c+4>>2]=f,p=f+-2|0}_[A+k>>2]=_[v+36>>2],_[_[c+12>>2]+(g<<2)>>2]=_[v+40>>2],e=g+1|0}else o[_[_[u>>2]+12>>2]](u,v);if(g=e,!e)break}}B=h+32|0}function jo(e){var t,i=0,n=0,r=0,s=0;if(_[(e|=0)>>2]=13824,d[e+152|0]&&(i=_[e+96>>2],o[_[_[i>>2]>>2]](i),(i=_[e+96>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i))),(0|(t=_[e+160>>2]))>=1)for(;s=i=_[e+168>>2]+A(n,20)|0,(r=_[i+12>>2])&&(d[i+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[s+12>>2]=0),a[i+16|0]=1,_[s+12>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,(0|t)!=(0|(n=n+1|0)););return(i=_[e+168>>2])&&(d[e+172|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+168>>2]=0),_[e+168>>2]=0,_[e+160>>2]=0,_[e+164>>2]=0,a[e+172|0]=1,Er(e+44|0),Er(e+4|0),0|e}function Wo(e,t){var i,n,r=0,s=0,l=0;if(_[e+12>>2]=0,a[e+16|0]=1,_[e+4>>2]=0,_[e+8>>2]=0,(0|(i=_[t+4>>2]))<=0)_[e+4>>2]=i;else{if(_[5585]=_[5585]+1,s=0|o[_[4567]](i<<2,16),(0|(n=_[e+4>>2]))>=1)for(;_[(l=r<<2)+s>>2]=_[_[e+12>>2]+l>>2],(0|n)!=(0|(r=r+1|0)););for((r=_[e+12>>2])&&(d[e+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+12>>2]=0),_[e+12>>2]=s,a[e+16|0]=1,_[e+8>>2]=i,r=0;_[(r<<2)+s>>2]=0,s=_[e+12>>2],(0|i)!=(0|(r=r+1|0)););if(_[e+4>>2]=i,(0|i)>=1)for(r=0;_[(e=r<<2)+s>>2]=_[e+_[t+12>>2]>>2],(0|i)!=(0|(r=r+1|0)););}}function Yo(e){var t=0;return _[(e|=0)>>2]=13264,(t=_[e+60>>2])&&(d[e- -64|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+60>>2]=0),_[e+60>>2]=0,_[e+52>>2]=0,_[e+56>>2]=0,a[e- -64|0]=1,(t=_[e+40>>2])&&(d[e+44|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+40>>2]=0),_[e+40>>2]=0,_[e+32>>2]=0,_[e+36>>2]=0,a[e+44|0]=1,(t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,0|e}function qo(e){var t,i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0;if(!((0|(t=_[e+32>>2]))>=(0|(n=_[e+12>>2])))){e:if(_[e+36>>2]>=(0|n))i=_[e+40>>2];else{r=t,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](n<<2,16),r=_[e+32>>2]),l=_[e+40>>2];t:{if((0|r)>=1)for(;;)if(_[(c=s<<2)+i>>2]=_[l+c>>2],(0|(s=s+1|0))==(0|r))break t;if(!l){_[e+40>>2]=i,_[e+36>>2]=n,a[e+44|0]=1;break e}}d[e+44|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+40>>2]=i,a[e+44|0]=1,_[e+36>>2]=n}if(Pi((r=t<<2)+i|0,0,(c=n<<2)-r|0),_[e+32>>2]=n,(0|(l=_[e+52>>2]))<(0|n)){e:if(_[e+56>>2]>=(0|n))i=_[e+60>>2];else{s=0,r=l,i=0,n&&(_[5585]=_[5585]+1,i=0|o[_[4567]](c,16),r=_[e+52>>2]),u=_[e+60>>2];t:{if((0|r)>=1)for(;;)if(_[(h=s<<2)+i>>2]=_[u+h>>2],(0|(s=s+1|0))==(0|r))break t;if(!u){_[e+60>>2]=i,_[e+56>>2]=n,a[e- -64|0]=1;break e}}d[e- -64|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+60>>2]=i,a[e+64|0]=1,_[e+56>>2]=n}Pi((r=l<<2)+i|0,0,c-r|0)}if(_[e+52>>2]=n,(0|n)>=1&&(Pi(_[e+40>>2],255,c),Pi(_[e+60>>2],255,c)),!((0|t)<1))for(r=_[e+60>>2],l=_[e+16>>2],n=_[e+40>>2],s=0;i=_[_[4+(i=l+(s<<4)|0)>>2]+12>>2]<<16|_[_[i>>2]+12>>2],i=A((i=(i<<15^-1)+i|0)>>>10^i,9),i=((i^=i>>>6)<<11^-1)+i|0,i=n+((_[e+12>>2]+-1&(i>>>16^i))<<2)|0,_[r+(s<<2)>>2]=_[i>>2],_[i>>2]=s,(0|t)!=(0|(s=s+1|0)););}}function Qo(e){var t=0;return _[(e|=0)>>2]=13164,(t=_[e+156>>2])&&(d[e+160|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+156>>2]=0),_[e+156>>2]=0,_[e+148>>2]=0,_[e+152>>2]=0,a[e+160|0]=1,(t=_[e+136>>2])&&(d[e+140|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+136>>2]=0),_[e+136>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,a[e+140|0]=1,(t=_[e+116>>2])&&(d[e+120|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+116>>2]=0),_[e+116>>2]=0,_[e+108>>2]=0,_[e+112>>2]=0,a[e+120|0]=1,(t=_[e+96>>2])&&(d[e+100|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+96>>2]=0),_[e+96>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,a[e+100|0]=1,Jo(e),0|e}function Zo(e,t,i,n,r){var o;o=_[e+32>>2],_[o>>2]=_[o>>2]+1,yn(e,wr(e,t,r)),yn(e,wr(e,i,r)),yn(e,wr(e,n,r))}function Ko(e,t,i,n,r,o,a,s,l,c){t|=0,i|=0,n|=0,r|=0,o|=0,a|=0,s|=0,l|=0,c|=0,e=_[32+(e|=0)>>2]+(c<<5)|0,_[i>>2]=_[e+12>>2],_[t>>2]=_[e+16>>2],_[n>>2]=_[e+28>>2],_[r>>2]=_[e+20>>2],_[s>>2]=_[e>>2],_[o>>2]=_[e+4>>2],_[a>>2]=_[e+8>>2],_[l>>2]=_[e+24>>2]}function Jo(e){var t;return _[(e|=0)>>2]=13052,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1,0|e}function $o(e){var t;_[12+(t=B-16|0)>>2]=e,e=_[t+12>>2],a[e+16|0]=1,_[e+12>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0}function ea(e,t,i,n,r){var s,l=0,c=0,u=0,h=0,p=0,v=0;if(B=s=B-112|0,a[e+60|0]=i,i){if(function(e,t,i){var n=b(0),r=b(0),o=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0);o=y[t>>2],s=y[t+4>>2],l=y[t+8>>2],_[e+16>>2]=0,c=b(l-b(1)),y[e+12>>2]=c,s=b(s-b(1)),y[e+8>>2]=s,l=b(o-b(1)),y[e+4>>2]=l,r=y[i>>2],n=y[i+4>>2],o=y[i+8>>2],a[e+60|0]=1,_[e+48>>2]=0,_[e+32>>2]=0,d=b(o+b(1)),y[e+28>>2]=d,m=b(n+b(1)),y[e+24>>2]=m,o=b(r+b(1)),y[e+20>>2]=o,p=b(b(65533)/b(d-c)),y[e+44>>2]=p,h=b(b(65533)/b(m-s)),y[e+40>>2]=h,u=b(b(65533)/b(o-l)),y[e+36>>2]=u,t=(n=b(b(c-c)*p))<b(4294967296)&n>=b(0)?~~n>>>0:0,f=b((65534&t)>>>0),v=n=s,t=(r=b(b(n-n)*h))<b(4294967296)&r>=b(0)?~~r>>>0:0,r=b(v+b(b((65534&t)>>>0)/h)),v=n=l,t=(h=b(b(n-n)*u))<b(4294967296)&h>=b(0)?~~h>>>0:0,(n=b(b(v+b(b((65534&t)>>>0)/u))-b(1)))<l&&(y[e+4>>2]=n,l=n),(n=b(r-b(1)))<s&&(y[e+8>>2]=n,s=n),(n=b(b(c+b(f/p))-b(1)))<c&&(y[e+12>>2]=n,c=n),_[e+48>>2]=0,n=b(d-c),g=b(b(65533)/n),y[e+44>>2]=g,r=b(m-s),f=b(b(65533)/r),y[e+40>>2]=f,u=b(o-l),p=b(b(65533)/u),y[e+36>>2]=p,t=(n=b(b(g*n)+b(1)))<b(4294967296)&n>=b(0)?~~n>>>0:0,h=b((1|t)>>>0),n=s,t=(r=b(b(f*r)+b(1)))<b(4294967296)&r>=b(0)?~~r>>>0:0,f=b(n+b(b((1|t)>>>0)/f)),v=o,n=l,t=(u=b(b(p*u)+b(1)))<b(4294967296)&u>=b(0)?~~u>>>0:0,v<(n=b(b(n+b(b((1|t)>>>0)/p))+b(1)))&&(y[e+20>>2]=n,o=n),m<(n=b(f+b(1)))&&(y[e+24>>2]=n,m=n),d<(n=b(b(c+b(h/g))+b(1)))&&(y[e+28>>2]=n,d=n),_[e+48>>2]=0,y[e+44>>2]=b(65533)/b(d-c),y[e+40>>2]=b(65533)/b(m-s),y[e+36>>2]=b(65533)/b(o-l)}(e,n,r),_[s+96>>2]=e,_[s+92>>2]=e+104,_[s+88>>2]=12316,o[_[_[t>>2]+8>>2]](t,s+88|0,e+4|0,e+20|0),r=_[e+108>>2],_[s+16>>2]=0,_[s+20>>2]=0,_[s+8>>2]=0,_[s+12>>2]=0,(0|(i=_[e+128>>2]))<(0|(l=r<<1))){if(_[e+132>>2]<(0|l)){if(r?(_[5585]=_[5585]+1,h=0|o[_[4567]](r<<5,16),n=_[e+128>>2]):n=i,(0|n)>=1)for(t=0;u=p=(c=t<<4)+h|0,c=c+_[e+136>>2]|0,v=_[c+4>>2],_[u>>2]=_[c>>2],_[u+4>>2]=v,u=_[c+12>>2],_[p+8>>2]=_[c+8>>2],_[p+12>>2]=u,(0|n)!=(0|(t=t+1|0)););(t=_[e+136>>2])&&(d[e+140|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+136>>2]=0),_[e+136>>2]=h,a[e+140|0]=1,_[e+132>>2]=l}for(;h=_[s+12>>2],t=_[e+136>>2]+(i<<4)|0,_[t>>2]=_[s+8>>2],_[t+4>>2]=h,n=_[s+20>>2],_[t+8>>2]=_[s+16>>2],_[t+12>>2]=n,(0|l)!=(0|(i=i+1|0)););}_[e+128>>2]=l}else{if(_[s+104>>2]=12448,_[s+108>>2]=e- -64,_[s+96>>2]=-581039253,_[s+100>>2]=0,_[s+88>>2]=-581039253,_[s+92>>2]=-581039253,_[s+80>>2]=1566444395,_[s+84>>2]=0,_[s+72>>2]=1566444395,_[s+76>>2]=1566444395,o[_[_[t>>2]+8>>2]](t,s+104|0,s+88|0,s+72|0),r=_[e+68>>2],_[(t=s- -64|0)>>2]=0,_[t+4>>2]=0,_[s+56>>2]=0,_[s+60>>2]=0,_[s+48>>2]=0,_[s+52>>2]=0,_[s+40>>2]=0,_[s+44>>2]=0,_[s+32>>2]=0,_[s+36>>2]=0,_[s+24>>2]=0,_[s+28>>2]=0,_[s+16>>2]=0,_[s+20>>2]=0,_[s+8>>2]=0,_[s+12>>2]=0,(0|(t=_[e+88>>2]))<(0|(c=r<<1))){if(_[e+92>>2]<(0|c)){if(r?(_[5585]=_[5585]+1,h=0|o[_[4567]](r<<7,16),i=_[e+88>>2]):i=t,(0|i)>=1)for(;l=(n=p<<6)+h|0,n=n+_[e+96>>2]|0,v=_[n+4>>2],_[l>>2]=_[n>>2],_[l+4>>2]=v,u=_[n+60>>2],_[l+56>>2]=_[n+56>>2],_[l+60>>2]=u,u=_[n+52>>2],_[l+48>>2]=_[n+48>>2],_[l+52>>2]=u,u=_[n+44>>2],_[l+40>>2]=_[n+40>>2],_[l+44>>2]=u,u=_[n+36>>2],_[l+32>>2]=_[n+32>>2],_[l+36>>2]=u,u=_[n+28>>2],_[l+24>>2]=_[n+24>>2],_[l+28>>2]=u,u=_[n+20>>2],_[l+16>>2]=_[n+16>>2],_[l+20>>2]=u,u=_[n+12>>2],_[l+8>>2]=_[n+8>>2],_[l+12>>2]=u,(0|i)!=(0|(p=p+1|0)););(i=_[e+96>>2])&&(d[e+100|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+96>>2]=0),_[e+96>>2]=h,a[e+100|0]=1,_[e+92>>2]=c}for(;l=_[s+12>>2],i=_[e+96>>2]+(t<<6)|0,_[i>>2]=_[s+8>>2],_[i+4>>2]=l,l=_[4+(n=s- -64|0)>>2],_[i+56>>2]=_[n>>2],_[i+60>>2]=l,n=_[s+60>>2],_[i+48>>2]=_[s+56>>2],_[i+52>>2]=n,n=_[s+52>>2],_[i+40>>2]=_[s+48>>2],_[i+44>>2]=n,n=_[s+44>>2],_[i+32>>2]=_[s+40>>2],_[i+36>>2]=n,n=_[s+36>>2],_[i+24>>2]=_[s+32>>2],_[i+28>>2]=n,n=_[s+28>>2],_[i+16>>2]=_[s+24>>2],_[i+20>>2]=n,n=_[s+20>>2],_[i+8>>2]=_[s+16>>2],_[i+12>>2]=n,(0|c)!=(0|(t=t+1|0)););}_[e+88>>2]=c}if(_[e+56>>2]=0,Cr(e,0,r),!(_[e+152>>2]|!d[e+60|0])){if(t=e,_[e+156>>2])r=_[e+160>>2],i=1;else{if(_[5585]=_[5585]+1,r=0|o[_[4567]](32,16),(0|(h=_[e+152>>2]))>=1)for(n=0;l=(i=n<<5)+r|0,i=i+_[e+160>>2]|0,p=_[i+4>>2],_[l>>2]=_[i>>2],_[l+4>>2]=p,c=_[i+28>>2],_[l+24>>2]=_[i+24>>2],_[l+28>>2]=c,c=_[i+20>>2],_[l+16>>2]=_[i+16>>2],_[l+20>>2]=c,c=_[i+12>>2],_[l+8>>2]=_[i+8>>2],_[l+12>>2]=c,(0|h)!=(0|(n=n+1|0)););(i=_[e+160>>2])&&(d[e+164|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+160>>2]=0),_[e+160>>2]=r,a[e+164|0]=1,_[e+156>>2]=1,i=_[e+152>>2]+1|0}_[t+152>>2]=i,t=_[s+36>>2],_[r+24>>2]=_[s+32>>2],_[r+28>>2]=t,t=_[s+28>>2],_[r+16>>2]=_[s+24>>2],_[r+20>>2]=t,t=_[s+20>>2],_[r+8>>2]=_[s+16>>2],_[r+12>>2]=t,t=_[s+12>>2],_[r>>2]=_[s+8>>2],_[r+4>>2]=t,t=_[e+160>>2],i=_[e+136>>2],f[t>>1]=m[i>>1],f[t+2>>1]=m[i+2>>1],f[t+4>>1]=m[i+4>>1],f[t+6>>1]=m[i+6>>1],f[t+8>>1]=m[i+8>>1],n=m[i+10>>1],_[t+12>>2]=0,f[t+10>>1]=n,n=t,t=_[i+12>>2],_[n+16>>2]=(0|t)>-1?1:0-t|0}_[e+168>>2]=_[e+152>>2],(t=_[e+116>>2])&&(d[e+120|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+116>>2]=0),_[e+116>>2]=0,a[e+120|0]=1,_[e+108>>2]=0,_[e+112>>2]=0,(t=_[e+76>>2])&&(d[e+80|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+76>>2]=0),_[e+76>>2]=0,a[e+80|0]=1,_[e+68>>2]=0,_[e+72>>2]=0,B=s+112|0}function ta(e){return function(e){a[e+60|0]=0,_[e+52>>2]=287,_[e>>2]=14192,_[e+144>>2]=0,a[e+80|0]=1,_[e+76>>2]=0,a[e+100|0]=1,_[e+68>>2]=0,_[e+72>>2]=0,_[e+96>>2]=0,a[e+120|0]=1,_[e+88>>2]=0,_[e+92>>2]=0,_[e+116>>2]=0,a[e+140|0]=1,_[e+108>>2]=0,_[e+112>>2]=0,_[e+136>>2]=0,a[e+164|0]=1,_[e+128>>2]=0,_[e+132>>2]=0,_[e+160>>2]=0,_[e+168>>2]=0,_[e+152>>2]=0,_[e+156>>2]=0,_[e+4>>2]=-8388609,_[e+8>>2]=-8388609,_[e+12>>2]=-8388609,_[e+16>>2]=0,_[e+20>>2]=2139095039,_[e+24>>2]=2139095039,_[e+28>>2]=2139095039,_[e+32>>2]=0}(e),_[e>>2]=12244,e}function ia(e){return 6}function na(e,t){e|=0,t|=0;var i=b(0),n=b(0),r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);i=b(o[_[_[e>>2]+48>>2]](e)),n=b(o[_[_[e>>2]+48>>2]](e)),r=b(o[_[_[e>>2]+48>>2]](e)),a=y[e+16>>2],s=y[e+32>>2],l=y[e+20>>2],c=y[e+36>>2],u=y[e+24>>2],h=y[e+40>>2],Or(e,t),_[e+44>>2]=0,y[e+40>>2]=b(b(b(r+h)/u)*y[e+24>>2])-r,y[e+36>>2]=b(b(b(n+c)/l)*y[e+20>>2])-n,y[e+32>>2]=b(b(b(i+s)/a)*y[e+16>>2])-i}function ra(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0);r=b(o[_[_[e>>2]+48>>2]](e)),u=y[t+52>>2],l=y[t+24>>2],f=y[t+20>>2],h=y[t+56>>2],c=y[t+40>>2],d=y[e+40>>2],a=y[e+32>>2],m=y[t+36>>2],s=y[e+36>>2],p=y[t+48>>2],v=y[t+8>>2],g=y[t>>2],A=y[t+4>>2],T=y[t+16>>2],S=y[t+32>>2],_[i+12>>2]=0,a=b(r+a),s=b(r+s),r=b(r+d),c=b(b(b(a*b(x(S)))+b(s*b(x(m))))+b(r*b(x(c)))),y[i+8>>2]=h-c,l=b(b(b(a*b(x(T)))+b(s*b(x(f))))+b(r*b(x(l)))),y[i+4>>2]=u-l,r=b(b(b(a*b(x(g)))+b(s*b(x(A))))+b(r*b(x(v)))),y[i>>2]=p-r,_[n+12>>2]=0,y[n+8>>2]=h+c,y[n+4>>2]=l+u,y[n>>2]=r+p}function oa(e,t){t|=0,_[(e|=0)>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,_[e+(_[t+56>>2]<<2)>>2]=1065353216}function aa(e,t){var i,n,r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0;if((0|(l=_[e+4>>2]))==_[e+8>>2]&&(la(e,l?l<<1:1),l=_[e+4>>2]),r=(n=_[e+12>>2])+A(l,36)|0,_[r+12>>2]=0,a[r+16|0]=1,_[r+4>>2]=0,_[r+8>>2]=0,(0|(i=_[t+4>>2]))>=1){_[5585]=_[5585]+1,h=i<<2,c=0|o[_[4567]](h,16),u=_[r+12>>2];e:{t:{if((0|(p=_[r+4>>2]))>=1)for(;;)if(_[c+(f=s<<2)>>2]=_[u+f>>2],(0|p)==(0|(s=s+1|0)))break t;if(!u)break e}d[r+16|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u))}for(a[r+16|0]=1,_[r+12>>2]=c,_[r+8>>2]=i,s=0,Pi(c,0,h),_[r+4>>2]=i,u=_[t+12>>2],r=_[r+12>>2];_[(c=s<<2)+r>>2]=_[u+c>>2],(0|i)!=(0|(s=s+1|0)););}else _[r+4>>2]=i;s=_[t+24>>2],r=A(l,36)+n|0,_[r+20>>2]=_[t+20>>2],_[r+24>>2]=s,s=_[t+32>>2],_[r+28>>2]=_[t+28>>2],_[r+32>>2]=s,_[e+4>>2]=_[e+4>>2]+1}function sa(e,t,i,n,r){var o;_[28+(o=B-32|0)>>2]=e,_[o+24>>2]=t,_[o+20>>2]=i,_[o+16>>2]=n,_[o+12>>2]=r,e=_[o+28>>2],y[e>>2]=y[_[o+24>>2]>>2],y[e+4>>2]=y[_[o+20>>2]>>2],y[e+8>>2]=y[_[o+16>>2]>>2],y[e+12>>2]=y[_[o+12>>2]>>2]}function la(e,t){var i=0,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0;if(_[e+8>>2]<(0|t)){if(t?(_[5585]=_[5585]+1,h=0|o[_[4567]](A(t,36),16)):h=0,!((0|(f=_[e+4>>2]))<1)){for(;;){if(n=_[e+12>>2],r=A(p,36),_[12+(i=r+h|0)>>2]=0,a[i+16|0]=1,_[i+4>>2]=0,_[i+8>>2]=0,(0|(s=_[4+(r=n+r|0)>>2]))>=1){_[5585]=_[5585]+1,c=s<<2,u=0|o[_[4567]](c,16),l=_[i+12>>2],n=0;e:{t:{if((0|(m=_[i+4>>2]))>=1)for(;;)if(_[u+(v=n<<2)>>2]=_[l+v>>2],(0|m)==(0|(n=n+1|0)))break t;if(!l)break e}d[i+16|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l))}for(a[i+16|0]=1,_[i+12>>2]=u,_[i+8>>2]=s,n=0,Pi(u,0,c),_[i+4>>2]=s,l=_[r+12>>2],u=_[i+12>>2];_[(c=n<<2)+u>>2]=_[l+c>>2],(0|s)!=(0|(n=n+1|0)););}else _[i+4>>2]=s;if(n=_[r+24>>2],_[i+20>>2]=_[r+20>>2],_[i+24>>2]=n,n=_[r+32>>2],_[i+28>>2]=_[r+28>>2],_[i+32>>2]=n,(0|f)==(0|(p=p+1|0)))break}if(!((0|(l=_[e+4>>2]))<1))for(n=0;r=i=_[e+12>>2]+A(n,36)|0,(s=_[i+12>>2])&&(d[i+16|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[r+12>>2]=0),a[i+16|0]=1,_[r+12>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,(0|l)!=(0|(n=n+1|0)););}(i=_[e+12>>2])&&(d[e+16|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+12>>2]=0),_[e+12>>2]=h,a[e+16|0]=1,_[e+8>>2]=t}}function ca(e){return 12}function ua(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+4>>2]}function ha(e,t){e|=0;var i,n=0;n=_[4+(t|=0)>>2],i=_[e+52>>2],_[i+4>>2]=_[t>>2],_[i+8>>2]=n,n=_[t+12>>2],_[i+12>>2]=_[t+8>>2],_[i+16>>2]=n,pa(e)}function pa(e){var t,i=0;B=t=B-48|0,_[t+44>>2]=0,_[t+36>>2]=0,_[t+40>>2]=0,_[t+32>>2]=1065353216,o[_[_[e>>2]+68>>2]](t+16|0,e,t+32|0),y[e+36>>2]=y[t+16>>2]+y[e+16>>2],_[t+32>>2]=-1082130432,o[_[_[e>>2]+68>>2]](t,e,t+32|0),i=_[t+12>>2],_[t+24>>2]=_[t+8>>2],_[t+28>>2]=i,i=_[t+4>>2],_[t+16>>2]=_[t>>2],_[t+20>>2]=i,y[e+20>>2]=y[t+16>>2]-y[e+16>>2],_[t+40>>2]=0,_[t+44>>2]=0,_[t+32>>2]=0,_[t+36>>2]=1065353216,o[_[_[e>>2]+68>>2]](t+16|0,e,t+32|0),y[e+40>>2]=y[t+20>>2]+y[e+16>>2],_[t+36>>2]=-1082130432,o[_[_[e>>2]+68>>2]](t,e,t+32|0),i=_[t+12>>2],_[t+24>>2]=_[t+8>>2],_[t+28>>2]=i,i=_[t+4>>2],_[t+16>>2]=_[t>>2],_[t+20>>2]=i,y[e+24>>2]=y[t+20>>2]-y[e+16>>2],_[t+32>>2]=0,_[t+36>>2]=0,_[t+40>>2]=1065353216,_[t+44>>2]=0,o[_[_[e>>2]+68>>2]](t+16|0,e,t+32|0),y[e+44>>2]=y[t+24>>2]+y[e+16>>2],_[t+40>>2]=-1082130432,o[_[_[e>>2]+68>>2]](t,e,t+32|0),i=_[t+12>>2],_[t+24>>2]=_[t+8>>2],_[t+28>>2]=i,i=_[t+4>>2],_[t+16>>2]=_[t>>2],_[t+20>>2]=i,y[e+28>>2]=y[t+24>>2]-y[e+16>>2],B=t+48|0}function fa(e,t,i){e|=0,t|=0,i|=0;var n,r,a,s,l,c,u=0,h=0,p=0,f=b(0),d=b(0),v=b(0),x=b(0),T=0;B=n=B-80|0,h=_[e+4>>2],o[_[_[h>>2]+16>>2]](h,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0,n+8|0,n+4|0,n,t),a=_[n+12>>2]+A(_[n+8>>2],i)|0,s=_[n+20>>2],h=(r=_[e+4>>2])+12|0,u=p=_[n+28>>2],l=_[n>>2],T=m[a+4>>1],3!=(0|l)&&(T=_[a+8>>2]),c=_[n+16>>2],u=u+A(T,c)|0,s?(f=b(y[r+8>>2]*b(g[u+8>>3])),d=b(y[r+4>>2]*b(g[u>>3])),v=b(g[u+16>>3]),u=h):(f=b(y[u+4>>2]*y[r+8>>2]),d=b(y[u>>2]*y[r+4>>2]),v=y[r+12>>2],u=u+8|0),x=y[u>>2],_[n+76>>2]=0,y[n+68>>2]=f,y[n+72>>2]=x*v,y[n+64>>2]=d,u=3!=(0|l)?_[a+4>>2]:m[a+2>>1],u=A(u,c)+p|0,s?(f=b(y[r+8>>2]*b(g[u+8>>3])),d=b(y[r+4>>2]*b(g[u>>3])),v=b(g[u+16>>3]),u=h):(f=b(y[u+4>>2]*y[r+8>>2]),d=b(y[u>>2]*y[r+4>>2]),v=y[r+12>>2],u=u+8|0),x=y[u>>2],_[n+60>>2]=0,y[n+52>>2]=f,y[n+56>>2]=x*v,y[n+48>>2]=d,u=3!=(0|l)?_[a>>2]:m[a>>1],p=A(u,c)+p|0,s?(v=b(g[p+16>>3]),f=b(y[r+8>>2]*b(g[p+8>>3])),d=b(y[r+4>>2]*b(g[p>>3]))):(h=p+8|0,v=y[r+12>>2],f=b(y[p+4>>2]*y[r+8>>2]),d=b(y[p>>2]*y[r+4>>2])),x=y[h>>2],_[n+44>>2]=0,y[n+36>>2]=f,y[n+32>>2]=d,y[n+40>>2]=x*v,h=_[e+8>>2],o[_[_[h>>2]+8>>2]](h,n+32|0,t,i),e=_[e+4>>2],o[_[_[e>>2]+24>>2]](e,t),B=n+80|0}function _a(e,t,i,n){!function(e,t){_[e>>2]=11800,_[e+4>>2]=35,_[e+8>>2]=0,_[e+12>>2]=-1,_[e+16>>2]=0,_[e+52>>2]=t,_[e>>2]=10636,_[e+4>>2]=21,o[_[_[t>>2]+40>>2]](t)?o[_[_[t>>2]+48>>2]](t,e+20|0,e+36|0):pa(e)}(e,t),a[e+65|0]=0,a[e+64|0]=i,_[e+56>>2]=0,_[e+60>>2]=0,_[e>>2]=10004,_[e+4>>2]=21,n&&(_[5585]=_[5585]+1,i=ta(t=0|o[_[4567]](172,16)),_[e+56>>2]=t,ea(i,_[e+52>>2],d[e+64|0],e+20|0,e+36|0),a[e+65|0]=1)}function da(e){return 0}function ma(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0);l=b(o[_[_[e>>2]+48>>2]](e)),c=b(o[_[_[e>>2]+48>>2]](e)),u=b(o[_[_[e>>2]+48>>2]](e)),r=y[t+52>>2],a=y[t+56>>2],s=y[t+48>>2],_[i+12>>2]=0,y[i+8>>2]=a-u,y[i+4>>2]=r-c,y[i>>2]=s-l,r=y[t+52>>2],a=y[t+56>>2],s=y[t+48>>2],_[n+12>>2]=0,y[n+8>>2]=u+a,y[n+4>>2]=c+r,y[n>>2]=l+s}function va(e,t){var i;e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,t=y[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],y[e+8>>2]=t,y[_[e+12>>2]+12>>2]=y[e+8>>2],B=i+16|0}function ya(e){var t,i=0,n=0,r=0,s=0;if(_[(e|=0)>>2]=9820,(i=_[e+56>>2])&&(d[e+60|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+56>>2]=0),_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,a[e+60|0]=1,(0|(t=_[e+28>>2]))>=1)for(;s=i=_[e+36>>2]+A(n,36)|0,(r=_[i+12>>2])&&(d[i+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[s+12>>2]=0),a[i+16|0]=1,_[s+12>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,(0|t)!=(0|(n=n+1|0)););return(i=_[e+36>>2])&&(d[e+40|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+36>>2]=0),_[e+36>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,a[e+40|0]=1,(i=_[e+16>>2])&&(d[e+20|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,0|e}function ga(e,t){var i,n,r,o=0,a=0,s=0,l=0,c=b(0),u=b(0);B=i=B-80|0,_[e+72>>2]=_[e+72>>2]+1,(o=_[e+68>>2])&&Hn(o,_[76+(_[e+28>>2]+A(t,80)|0)>>2]),a=_[e+20>>2],l=_[e+28>>2],n=A(t,80),r=_[4+(s=8+(o=l+n|0)|0)>>2],_[i+8>>2]=_[s>>2],_[i+12>>2]=r,s=_[o+4>>2],_[i>>2]=_[o>>2],_[i+4>>2]=s,s=_[o+28>>2],_[i+24>>2]=_[o+24>>2],_[i+28>>2]=s,s=_[o+20>>2],_[i+16>>2]=_[o+16>>2],_[i+20>>2]=s,s=_[o+44>>2],_[i+40>>2]=_[o+40>>2],_[i+44>>2]=s,s=_[o+36>>2],_[i+32>>2]=_[o+32>>2],_[i+36>>2]=s,s=_[o+60>>2],_[i+56>>2]=_[o+56>>2],_[i+60>>2]=s,s=_[o+52>>2],_[i+48>>2]=_[o+48>>2],_[i+52>>2]=s,s=_[o+76>>2],_[i+72>>2]=_[o+72>>2],_[i+76>>2]=s,s=_[o+68>>2],_[i+64>>2]=_[o+64>>2],_[i+68>>2]=s,s=l,l=A(a,80)+-80|0,s=_[4+(a=s+l|0)>>2],_[o>>2]=_[a>>2],_[o+4>>2]=s,s=_[a+12>>2],_[o+8>>2]=_[a+8>>2],_[o+12>>2]=s,s=_[a+20>>2],_[o+16>>2]=_[a+16>>2],_[o+20>>2]=s,s=_[a+28>>2],_[o+24>>2]=_[a+24>>2],_[o+28>>2]=s,s=_[a+44>>2],_[o+40>>2]=_[a+40>>2],_[o+44>>2]=s,s=_[a+36>>2],_[o+32>>2]=_[a+32>>2],_[o+36>>2]=s,s=_[a+52>>2],_[o+48>>2]=_[a+48>>2],_[o+52>>2]=s,s=_[a+60>>2],_[o+56>>2]=_[a+56>>2],_[o+60>>2]=s,s=_[a+76>>2],_[o+72>>2]=_[a+72>>2],_[o+76>>2]=s,s=_[a+68>>2],_[o+64>>2]=_[a+64>>2],_[o+68>>2]=s,o=l+_[e+28>>2]|0,l=_[i+4>>2],_[o>>2]=_[i>>2],_[o+4>>2]=l,a=_[i+12>>2],_[o+8>>2]=_[i+8>>2],_[o+12>>2]=a,a=_[i+20>>2],_[o+16>>2]=_[i+16>>2],_[o+20>>2]=a,a=_[i+28>>2],_[o+24>>2]=_[i+24>>2],_[o+28>>2]=a,a=_[i+36>>2],_[o+32>>2]=_[i+32>>2],_[o+36>>2]=a,a=_[i+44>>2],_[o+40>>2]=_[i+40>>2],_[o+44>>2]=a,a=_[i+52>>2],_[o+48>>2]=_[i+48>>2],_[o+52>>2]=a,a=_[i+60>>2],_[o+56>>2]=_[i+56>>2],_[o+60>>2]=a,a=_[i+68>>2],_[o+64>>2]=_[i+64>>2],_[o+68>>2]=a,a=_[i+76>>2],_[o+72>>2]=_[i+72>>2],_[o+76>>2]=a,_[e+68>>2]&&(_[_[76+(n+_[e+28>>2]|0)>>2]+36>>2]=t),_[e+20>>2]=_[e+20>>2]+-1,u=b(0|t);e:if(!((0|(o=_[e+84>>2]))<1)){for(a=_[e+92>>2],t=0;;){if((c=y[(l=a+(t<<2)|0)>>2])!=u){if((0|o)!=(0|(t=t+1|0)))continue;break e}break}(0|o)<=(0|t)||(o=a+((t=o+-1|0)<<2)|0,_[l>>2]=_[o>>2],y[o>>2]=c,_[e+84>>2]=t)}e:if(!((0|(o=_[e+124>>2]))<1)){for(a=_[e+132>>2],t=0;;){if((c=y[(l=a+(t<<2)|0)>>2])!=u){if((0|o)!=(0|(t=t+1|0)))continue;break e}break}(0|o)<=(0|t)||(o=a+((t=o+-1|0)<<2)|0,_[l>>2]=_[o>>2],y[o>>2]=c,_[e+124>>2]=t)}e:if(!((0|(o=_[e+104>>2]))<1)){for(a=_[e+112>>2],t=0;;){if((c=y[(l=a+(t<<2)|0)>>2])!=u){if((0|o)!=(0|(t=t+1|0)))continue;break e}break}(0|o)<=(0|t)||(o=a+((t=o+-1|0)<<2)|0,_[l>>2]=_[o>>2],y[o>>2]=c,_[e+104>>2]=t)}B=i+80|0}function Aa(e,t,i,n){var r,a,s=0,l=0;B=r=B+-64|0,s=(a=A(t,80))+_[e+28>>2]|0,l=_[(t=i)+4>>2],_[s>>2]=_[t>>2],_[s+4>>2]=l,l=_[t+12>>2],_[s+8>>2]=_[t+8>>2],_[s+12>>2]=l,l=_[t+28>>2],_[s+24>>2]=_[t+24>>2],_[s+28>>2]=l,l=_[t+20>>2],_[s+16>>2]=_[t+16>>2],_[s+20>>2]=l,l=_[t+44>>2],_[s+40>>2]=_[t+40>>2],_[s+44>>2]=l,l=_[t+36>>2],_[s+32>>2]=_[t+32>>2],_[s+36>>2]=l,l=_[t+60>>2],_[s+56>>2]=_[t+56>>2],_[s+60>>2]=l,l=_[t+52>>2],_[s+48>>2]=_[t+48>>2],_[s+52>>2]=l,_[e+68>>2]&&(t=_[64+(_[e+28>>2]+a|0)>>2],o[_[_[t>>2]+8>>2]](t,i,r+48|0,r+32|0),i=_[(t=r)+60>>2],s=_[t+56>>2],_[t+8>>2]=s,_[t+12>>2]=i,i=_[t+44>>2],_[t+24>>2]=_[t+40>>2],_[t+28>>2]=i,i=_[t+36>>2],_[t+16>>2]=_[t+32>>2],_[t+20>>2]=i,i=_[t+52>>2],_[t>>2]=_[t+48>>2],_[t+4>>2]=i,Sr(_[e+68>>2],_[76+(_[e+28>>2]+a|0)>>2],t)),n&&o[_[_[e>>2]+68>>2]](e),B=r- -64|0}function ba(e){var t=0;return _[(e|=0)>>2]=9652,(t=_[e+68>>2])&&(Er(t),(t=_[e+68>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),(t=_[e+132>>2])&&(d[e+136|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+132>>2]=0),_[e+132>>2]=0,_[e+124>>2]=0,_[e+128>>2]=0,a[e+136|0]=1,(t=_[e+112>>2])&&(d[e+116|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+112>>2]=0),_[e+112>>2]=0,_[e+104>>2]=0,_[e+108>>2]=0,a[e+116|0]=1,(t=_[e+92>>2])&&(d[e+96|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+92>>2]=0),_[e+92>>2]=0,_[e+84>>2]=0,_[e+88>>2]=0,a[e+96|0]=1,(t=_[e+28>>2])&&(d[e+32|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+28>>2]=0),_[e+28>>2]=0,_[e+20>>2]=0,_[e+24>>2]=0,a[e+32|0]=1,0|e}function xa(e,t){var i=0,n=0,r=0,s=0;if(_[e>>2]=9652,_[e+76>>2]=0,_[(i=e)+68>>2]=0,_[i+72>>2]=1,_[i+52>>2]=-581039253,_[i+56>>2]=-581039253,_[i+36>>2]=1566444395,_[i+40>>2]=1566444395,_[i+8>>2]=0,_[i+12>>2]=-1,a[i+32|0]=1,_[i+28>>2]=0,a[i+96|0]=1,_[i+60>>2]=-581039253,_[i+64>>2]=0,_[i+44>>2]=1566444395,_[i+48>>2]=0,_[i+20>>2]=0,_[i+24>>2]=0,_[i+92>>2]=0,_[i+84>>2]=0,_[i+88>>2]=0,a[i+116|0]=1,_[i+112>>2]=0,a[i+136|0]=1,_[i+104>>2]=0,_[i+108>>2]=0,_[i+124>>2]=0,_[i+128>>2]=0,_[i+132>>2]=0,_[i+144>>2]=1065353216,_[i+148>>2]=1065353216,_[i+152>>2]=1065353216,_[i+156>>2]=0,a[i+140|0]=0,_[i+4>>2]=31,t?(_[5585]=_[5585]+1,t=0|o[_[4567]](40,16),_[t+16>>2]=0,_[t+8>>2]=-1,_[t+12>>2]=0,_[t>>2]=0,_[t+4>>2]=0,_[t+32>>2]=0,a[t+36|0]=1,_[t+24>>2]=0,_[t+28>>2]=0,_[e+68>>2]=t,t=_[e+24>>2]):t=0,(0|t)<0){if((0|(s=_[e+20>>2]))>=1)for(;i=(t=A(r,80))+_[e+28>>2]|0,n=_[i+4>>2],_[t>>2]=_[i>>2],_[t+4>>2]=n,n=_[i+12>>2],_[t+8>>2]=_[i+8>>2],_[t+12>>2]=n,n=_[i+28>>2],_[t+24>>2]=_[i+24>>2],_[t+28>>2]=n,n=_[i+20>>2],_[t+16>>2]=_[i+16>>2],_[t+20>>2]=n,n=_[i+44>>2],_[t+40>>2]=_[i+40>>2],_[t+44>>2]=n,n=_[i+36>>2],_[t+32>>2]=_[i+32>>2],_[t+36>>2]=n,n=_[i+60>>2],_[t+56>>2]=_[i+56>>2],_[t+60>>2]=n,n=_[i+52>>2],_[t+48>>2]=_[i+48>>2],_[t+52>>2]=n,n=_[i+68>>2],_[t+64>>2]=_[i+64>>2],_[t+68>>2]=n,n=_[i+76>>2],_[t+72>>2]=_[i+72>>2],_[t+76>>2]=n,(0|s)!=(0|(r=r+1|0)););(t=_[e+28>>2])&&(d[e+32|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+28>>2]=0),_[e+28>>2]=0,a[e+32|0]=1,_[e+24>>2]=0}}function Ta(e){var t,i=0,n=0,r=0,s=0;if(_[(e|=0)>>2]=9448,i=_[e+84>>2],(0|(t=_[i+8>>2]))>=1){for(;(n=_[8+(_[i+16>>2]+A(r,12)|0)>>2])&&(o[_[_[n>>2]>>2]](n),s=_[e+4>>2],o[_[_[s>>2]+60>>2]](s,n)),(0|t)!=(0|(r=r+1|0)););i=_[e+84>>2]}return Sa(i),i=_[e+84>>2],o[_[_[i>>2]>>2]](i),(i=_[e+84>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),(i=_[e+100>>2])&&(d[e+104|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+100>>2]=0),_[e+100>>2]=0,_[e+92>>2]=0,_[e+96>>2]=0,a[e+104|0]=1,Nr(e),0|e}function Sa(e){var t=0,i=0,n=0,r=0,s=0,l=0;if((t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,(t=_[e+36>>2])&&(d[e+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+36>>2]=0),_[e+36>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,a[e+40|0]=1,(t=_[e+56>>2])&&(d[e+60|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+56>>2]=0),t=0,_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,a[e+60|0]=1,_[e+12>>2]<=1){if(_[5585]=_[5585]+1,r=0|o[_[4567]](24,16),(0|(s=_[e+8>>2]))>=1)for(;n=(i=A(t,12))+_[e+16>>2]|0,l=_[n+4>>2],_[(i=i+r|0)>>2]=_[n>>2],_[i+4>>2]=l,_[i+8>>2]=_[n+8>>2],(0|s)!=(0|(t=t+1|0)););(t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=r,a[e+20|0]=1,_[e+12>>2]=2}Dr(e)}function Ea(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]+12>>2])}function Ca(e){var t=0;return _[(e|=0)>>2]=9384,(t=_[e+56>>2])&&(d[e+60|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+56>>2]=0),_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0,a[e+60|0]=1,(t=_[e+36>>2])&&(d[e+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+36>>2]=0),_[e+36>>2]=0,_[e+28>>2]=0,_[e+32>>2]=0,a[e+40|0]=1,(t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a[e+20|0]=1,0|e}function wa(e,t,i){var n,r,a=0,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0);B=n=B-160|0,s=_[e+4>>2],a=_[s+12>>2],M=y[a+52>>2],P=y[a+56>>2],l=y[a+24>>2],c=y[a+20>>2],u=y[a+40>>2],h=y[a+36>>2],D=y[a+48>>2],p=y[a+8>>2],f=y[a>>2],d=y[a+4>>2],m=y[a+16>>2],v=y[a+32>>2],a=_[_[s+4>>2]+28>>2]+A(i,80)|0,g=y[a+32>>2],x=y[a>>2],T=y[a+16>>2],S=y[a+56>>2],E=y[a+52>>2],C=y[a+48>>2],w=y[a+36>>2],k=y[a+20>>2],O=y[a+4>>2],R=y[a+40>>2],F=y[a+24>>2],I=y[a+8>>2],s=0,_[n+156>>2]=0,_[n+140>>2]=0,_[n+124>>2]=0,y[n+136>>2]=b(b(v*I)+b(h*F))+b(u*R),y[n+132>>2]=b(b(v*O)+b(h*k))+b(u*w),y[n+120>>2]=b(b(m*I)+b(c*F))+b(l*R),y[n+116>>2]=b(b(m*O)+b(c*k))+b(l*w),y[n+152>>2]=P+b(b(b(v*C)+b(h*E))+b(u*S)),y[n+148>>2]=M+b(b(b(m*C)+b(c*E))+b(l*S)),_[n+108>>2]=0,y[n+128>>2]=b(b(v*x)+b(h*T))+b(u*g),y[n+112>>2]=b(b(m*x)+b(c*T))+b(l*g),y[n+96>>2]=b(b(f*x)+b(d*T))+b(p*g),y[n+104>>2]=b(b(f*I)+b(d*F))+b(p*R),y[n+100>>2]=b(b(f*O)+b(d*k))+b(p*w),y[n+144>>2]=D+b(b(b(f*C)+b(d*E))+b(p*S)),o[_[_[t>>2]+8>>2]](t,n+96|0,n+80|0,n- -64|0),l=y[_[e+20>>2]+32>>2],y[n+80>>2]=y[n+80>>2]-l,y[n+84>>2]=y[n+84>>2]-l,y[n+88>>2]=y[n+88>>2]-l,y[n+64>>2]=l+y[n+64>>2],y[n+68>>2]=l+y[n+68>>2],y[n+72>>2]=l+y[n+72>>2],a=_[e+8>>2],r=_[a+4>>2],o[_[_[r>>2]+8>>2]](r,_[a+12>>2],n+48|0,n+32|0),(a=_[4995])&&!o[a](_[_[e+8>>2]+4>>2],t)||(s=y[n+64>>2]<y[n+48>>2]|y[n+80>>2]>y[n+32>>2]?s:1,a=0,a=y[n+72>>2]<y[n+56>>2]|y[n+88>>2]>y[n+40>>2]?a:s,y[n+68>>2]<y[n+52>>2]|y[n+84>>2]>y[n+36>>2]|1^a||(a=_[e+4>>2],s=_[a+8>>2],_[n+28>>2]=i,_[n+24>>2]=-1,_[n+16>>2]=s,_[n+12>>2]=t,_[n+8>>2]=a,_[n+20>>2]=n+96,y[_[e+20>>2]+32>>2]>b(0)?(t=_[e+12>>2],t=0|o[_[_[t>>2]+8>>2]](t,n+8|0,_[e+8>>2],0,2)):(t=_[(a=i<<2)+_[e+24>>2]>>2])||(t=_[e+12>>2],t=0|o[_[_[t>>2]+8>>2]](t,n+8|0,_[e+8>>2],_[e+28>>2],1),_[a+_[e+24>>2]>>2]=t,t=_[a+_[e+24>>2]>>2]),s=_[e+20>>2],a=_[s+8>>2],_[a+8>>2]!=_[_[e+4>>2]+8>>2]?(a=_[s+12>>2],_[s+12>>2]=n+8,o[_[_[s>>2]+12>>2]](s,-1,i)):(_[s+8>>2]=n+8,o[_[_[s>>2]+8>>2]](s,-1,i)),o[_[_[t>>2]+8>>2]](t,n+8|0,_[e+8>>2],_[e+16>>2],_[e+20>>2]),t=_[e+20>>2],_[(_[_[t+8>>2]+8>>2]==_[_[e+4>>2]+8>>2]?8:12)+t>>2]=a)),B=n+160|0}function ka(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var s,l,c,u=0,h=0,p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=0,w=0,k=0,O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0);if(B=s=B-176|0,w=d[e+68|0],l=_[(c=w?i:t)+4>>2],_[l+72>>2]!=_[e+80>>2]){if((0|(C=_[e+52>>2]))>=1)for(;(h=_[(k=u<<2)+_[e+60>>2]>>2])&&(o[_[_[h>>2]>>2]](h),h=_[e+4>>2],o[_[_[h>>2]+60>>2]](h,_[k+_[e+60>>2]>>2])),(0|C)!=(0|(u=u+1|0)););Oa(e,t,i),_[e+80>>2]=_[l+72>>2]}if(h=_[e+52>>2]){if(C=_[l+68>>2],u=_[e+4>>2],k=_[e+60>>2],_[s+172>>2]=_[e+72>>2],_[s+168>>2]=k,_[s+164>>2]=r,_[s+160>>2]=n,_[s+156>>2]=u,n=w?t:i,_[s+152>>2]=n,_[s+148>>2]=c,_[s+144>>2]=9308,(0|(u=_[e+32>>2]))<=-1){for(_[e+36>>2]<=-1&&((t=_[e+40>>2])&&(d[e+44|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+40>>2]=0),_[e+36>>2]=0,_[e+40>>2]=0,a[e+44|0]=1);_[_[e+40>>2]+(u<<2)>>2]=0,i=(t=u+1|0)>>>0>=u>>>0,u=t,i;);h=_[e+52>>2]}if(_[e+32>>2]=0,(0|h)>=1)for(w=e+28|0,i=0;;){if(t=_[_[e+60>>2]+(i<<2)>>2]){if(o[_[_[t>>2]+16>>2]](t,w),h=0,(0|(u=_[e+32>>2]))>0)for(;t=_[_[e+40>>2]+(h<<2)>>2],_[t+844>>2]&&(_[r+4>>2]=t,(0|(u=_[t+836>>2]))==(0|(k=_[_[r+8>>2]+8>>2]))?Di(t,u+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(t,_[_[r+12>>2]+8>>2]+4|0,k+4|0),_[r+4>>2]=0,u=_[e+32>>2]),(0|(h=h+1|0))<(0|u););if((0|u)<=-1)for(_[e+36>>2]<=-1&&((t=_[e+40>>2])&&(d[e+44|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+40>>2]=0),a[e+44|0]=1,_[e+36>>2]=0,_[e+40>>2]=0);_[_[e+40>>2]+(u<<2)>>2]=0,h=(t=u+1|0)>>>0<u>>>0,u=t,!h;);_[e+32>>2]=0,h=_[e+52>>2]}if(!((0|(i=i+1|0))<(0|h)))break}e:if(C)t=_[c+12>>2],O=y[t+52>>2],R=y[t+56>>2],i=_[n+12>>2],F=y[i+52>>2],I=y[i+56>>2],p=y[t+20>>2],f=y[t+36>>2],M=y[i+20>>2],P=y[i+36>>2],D=y[i+24>>2],m=y[t+24>>2],N=y[i+40>>2],v=y[t+40>>2],L=y[i+32>>2],g=y[t+32>>2],z=y[i>>2],x=y[t>>2],G=y[i+16>>2],T=y[t+16>>2],U=y[t+48>>2],X=y[i+48>>2],S=y[t+4>>2],V=y[i+4>>2],H=y[i+8>>2],E=y[t+8>>2],_[s+108>>2]=0,_[s+92>>2]=0,_[s+76>>2]=0,y[s+88>>2]=b(b(E*H)+b(m*D))+b(v*N),y[s+84>>2]=b(b(E*V)+b(m*M))+b(v*P),y[s+72>>2]=b(b(S*H)+b(p*D))+b(f*N),y[s+68>>2]=b(b(S*V)+b(p*M))+b(f*P),O=b(-O),y[s+104>>2]=b(b(b(m*O)-b(E*U))-b(v*R))+b(b(b(E*X)+b(m*F))+b(v*I)),y[s+100>>2]=b(b(b(p*O)-b(S*U))-b(f*R))+b(b(b(S*X)+b(p*F))+b(f*I)),_[s+60>>2]=0,y[s+48>>2]=b(b(x*z)+b(T*G))+b(g*L),y[s+80>>2]=b(b(E*z)+b(m*G))+b(v*L),y[s+64>>2]=b(b(S*z)+b(p*G))+b(f*L),y[s+56>>2]=b(b(x*H)+b(T*D))+b(g*N),y[s+52>>2]=b(b(x*V)+b(T*M))+b(g*P),y[s+96>>2]=b(b(b(T*O)-b(x*U))-b(g*R))+b(b(b(x*X)+b(T*F))+b(g*I)),t=_[n+4>>2],o[_[_[t>>2]+8>>2]](t,s+48|0,s+128|0,s+112|0),p=y[r+32>>2],y[s+128>>2]=y[s+128>>2]-p,y[s+132>>2]=y[s+132>>2]-p,y[s+136>>2]=y[s+136>>2]-p,y[s+112>>2]=p+y[s+112>>2],y[s+116>>2]=p+y[s+116>>2],y[s+120>>2]=p+y[s+120>>2],t=_[s+140>>2],_[s+24>>2]=_[s+136>>2],_[s+28>>2]=t,t=_[s+124>>2],_[s+40>>2]=_[s+120>>2],_[s+44>>2]=t,t=_[s+116>>2],_[s+32>>2]=_[s+112>>2],_[s+36>>2]=t,t=_[s+132>>2],_[s+16>>2]=_[s+128>>2],_[s+20>>2]=t,function(e,t,i,n){var r=0,s=0,l=0,c=0,u=0,h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0);if(e){if(h=y[t+24>>2],p=y[t+20>>2],s=_[i+8>>2],f=y[t+16>>2],m=y[t+8>>2],v=y[t+4>>2],g=y[t>>2],(0|(t=_[i+4>>2]))<=-1)for((0|s)<=-1&&((r=_[i+12>>2])&&(d[i+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+12>>2]=0),a[i+16|0]=1,_[i+8>>2]=0,_[i+12>>2]=0,s=0);_[_[i+12>>2]+(t<<2)>>2]=0,l=(r=t+1|0)>>>0>=t>>>0,t=r,l;);if(r=0,_[i+4>>2]=0,(0|s)<=63){if(_[5585]=_[5585]+1,s=0|o[_[4567]](256,16),(0|(r=_[i+4>>2]))>=1)for(t=0;_[(l=t<<2)+s>>2]=_[l+_[i+12>>2]>>2],(0|r)!=(0|(t=t+1|0)););(t=_[i+12>>2])&&(d[i+16|0]&&(t&&(_[5586]=_[5586]+1,o[_[4568]](t)),r=_[i+4>>2]),_[i+12>>2]=0),_[i+12>>2]=s,a[i+16|0]=1,_[i+8>>2]=64,s=64}if((0|r)==(0|s))if((0|s)>=(0|(c=s<<1)))r=s;else{t=0;t:{if(s){if(_[5585]=_[5585]+1,l=0|o[_[4567]](s<<3,16),(0|(r=_[i+4>>2]))<1)break t}else l=0,r=s;for(;_[(s=t<<2)+l>>2]=_[s+_[i+12>>2]>>2],(0|r)!=(0|(t=t+1|0)););}(t=_[i+12>>2])&&(d[i+16|0]&&(t&&(_[5586]=_[5586]+1,o[_[4568]](t)),r=_[i+4>>2]),_[i+12>>2]=0),_[i+12>>2]=l,a[i+16|0]=1,_[i+8>>2]=c}for(_[_[i+12>>2]+(r<<2)>>2]=e,r=r+1|0,_[i+4>>2]=r;;){if(l=_[i+12>>2],s=_[l+((t=r+-1|0)<<2)>>2],_[i+4>>2]=t,y[s>>2]<=f)if(y[s+16>>2]>=g)if(y[s+4>>2]<=p)if(y[s+20>>2]>=v)if(y[s+8>>2]<=h)if(y[s+24>>2]>=m)if(_[s+40>>2]){if(c=_[s+36>>2],(0|t)==(0|(e=_[i+8>>2])))if((0|r)>(0|(e=t?t<<1:1)))e=t;else{if(r=0,l=0,e&&(_[5585]=_[5585]+1,l=0|o[_[4567]](e<<2,16),t=_[i+4>>2]),(0|t)>=1)for(;_[(u=r<<2)+l>>2]=_[_[i+12>>2]+u>>2],(0|(r=r+1|0))!=(0|t););(r=_[i+12>>2])&&(d[i+16|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),t=_[i+4>>2]),_[i+12>>2]=0),_[i+12>>2]=l,a[i+16|0]=1,_[i+8>>2]=e}if(_[(t<<2)+l>>2]=c,t=t+1|0,_[i+4>>2]=t,s=_[s+40>>2],(0|e)==(0|t)){if((0|e)<(0|(r=e?e<<1:1))){if(t=0,l=0,r&&(_[5585]=_[5585]+1,l=0|o[_[4567]](r<<2,16),e=_[i+4>>2]),(0|e)>=1)for(;_[(c=t<<2)+l>>2]=_[c+_[i+12>>2]>>2],(0|(t=t+1|0))!=(0|e););(t=_[i+12>>2])&&(d[i+16|0]&&(t&&(_[5586]=_[5586]+1,o[_[4568]](t)),e=_[i+4>>2]),_[i+12>>2]=0),_[i+12>>2]=l,a[i+16|0]=1,_[i+8>>2]=r}t=e}_[_[i+12>>2]+(t<<2)>>2]=s,r=t+1|0,_[i+4>>2]=r}else o[_[_[n>>2]+12>>2]](n,s),r=_[i+4>>2];else r=t;else r=t;else r=t;else r=t;else r=t;else r=t;if(!((0|r)>0))break}}}(_[C>>2],s+16|0,e+8|0,s+144|0);else{if((0|h)<1)break e;for(u=0;wa(s+144|0,_[64+(_[l+28>>2]+A(u,80)|0)>>2],u),(0|h)!=(0|(u=u+1|0)););}if(C=_[e+52>>2],(0|(u=_[e+32>>2]))<=-1)for(_[e+36>>2]<=-1&&((t=_[e+40>>2])&&(d[e+44|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+40>>2]=0),_[e+36>>2]=0,_[e+40>>2]=0,a[e+44|0]=1);_[_[e+40>>2]+(u<<2)>>2]=0,i=(t=u+1|0)>>>0>=u>>>0,u=t,i;);if(_[e+32>>2]=0,!((0|C)<1))for(r=0;_[(u=r<<2)+_[e+60>>2]>>2]&&(t=_[l+28>>2]+A(r,80)|0,w=_[t+64>>2],i=_[c+12>>2],V=y[i+52>>2],H=y[i+56>>2],R=y[t+48>>2],F=y[t+52>>2],I=y[t+56>>2],M=y[t+4>>2],P=y[t+20>>2],D=y[t+36>>2],N=y[t+8>>2],L=y[t+24>>2],z=y[t+40>>2],p=y[i+20>>2],f=y[i+24>>2],G=y[t>>2],U=y[t+16>>2],m=y[i+36>>2],X=y[t+32>>2],v=y[i+40>>2],O=y[i+48>>2],g=y[i+8>>2],x=y[i>>2],T=y[i+4>>2],S=y[i+16>>2],E=y[i+32>>2],h=0,_[s+108>>2]=0,_[s+92>>2]=0,_[s+76>>2]=0,_[s+60>>2]=0,y[s+80>>2]=b(b(E*G)+b(m*U))+b(v*X),y[s+64>>2]=b(b(S*G)+b(p*U))+b(f*X),y[s+48>>2]=b(b(x*G)+b(T*U))+b(g*X),y[s+88>>2]=b(b(E*N)+b(m*L))+b(v*z),y[s+84>>2]=b(b(E*M)+b(m*P))+b(v*D),y[s+72>>2]=b(b(S*N)+b(p*L))+b(f*z),y[s+68>>2]=b(b(S*M)+b(p*P))+b(f*D),y[s+56>>2]=b(b(x*N)+b(T*L))+b(g*z),y[s+52>>2]=b(b(x*M)+b(T*P))+b(g*D),y[s+104>>2]=H+b(b(b(E*R)+b(m*F))+b(v*I)),y[s+100>>2]=V+b(b(b(S*R)+b(p*F))+b(f*I)),y[s+96>>2]=O+b(b(b(x*R)+b(T*F))+b(g*I)),o[_[_[w>>2]+8>>2]](w,s+48|0,s+16|0,s+128|0),t=_[n+4>>2],o[_[_[t>>2]+8>>2]](t,_[n+12>>2],s+112|0,s),t=0,y[s+16>>2]>y[s>>2]||(t=0,y[s+128>>2]<y[s+112>>2]||(t=1)),(1^(h=y[s+136>>2]<y[s+120>>2]|y[s+24>>2]>y[s+8>>2]?h:t)||y[s+132>>2]<y[s+116>>2]|y[s+20>>2]>y[s+4>>2])&&(t=_[u+_[e+60>>2]>>2],o[_[_[t>>2]>>2]](t),t=_[e+4>>2],o[_[_[t>>2]+60>>2]](t,_[u+_[e+60>>2]>>2]),_[u+_[e+60>>2]>>2]=0)),(0|C)!=(0|(r=r+1|0)););}B=s+176|0}function Oa(e,t,i){var n,r,s,l,c,u=0,h=0,p=0,f=0,m=0;if(B=n=B-32|0,u=_[e+52>>2],c=d[e+68|0],l=_[(s=c?i:t)+4>>2],(0|u)<(0|(r=_[l+20>>2]))){if(_[e+56>>2]<(0|r)){if(r?(_[5585]=_[5585]+1,f=0|o[_[4567]](r<<2,16),h=_[e+52>>2]):h=u,(0|h)>=1)for(;_[(m=p<<2)+f>>2]=_[_[e+60>>2]+m>>2],(0|h)!=(0|(p=p+1|0)););(h=_[e+60>>2])&&(d[e- -64|0]&&h&&(_[5586]=_[5586]+1,o[_[4568]](h)),_[e+60>>2]=0),_[e+60>>2]=f,_[e+56>>2]=r,a[e- -64|0]=1}for(;_[_[e+60>>2]+(u<<2)>>2]=0,(0|r)!=(0|(u=u+1|0)););}if(_[e+52>>2]=r,(0|r)>=1)for(t=c?t:i,u=0;_[l+68>>2]?_[_[e+60>>2]+(u<<2)>>2]=0:(i=_[s+12>>2],h=_[s+8>>2],_[n+12>>2]=_[64+(_[l+28>>2]+A(u,80)|0)>>2],_[n+16>>2]=h,_[n+20>>2]=i,_[n+28>>2]=u,_[n+24>>2]=-1,_[n+8>>2]=s,i=_[e+4>>2],i=0|o[_[_[i>>2]+8>>2]](i,n+8|0,t,_[e+72>>2],1),_[_[e+60>>2]+(u<<2)>>2]=i),(0|r)!=(0|(u=u+1|0)););B=n+32|0}function Ra(e){var t=0,i=0;return _[(e|=0)>>2]=8688,d[e+52|0]&&(t=_[e+56>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),(t=_[e+44>>2])&&(d[e+48|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+44>>2]=0),_[e+44>>2]=0,_[e+36>>2]=0,_[e+40>>2]=0,a[e+48|0]=1,(t=_[e+24>>2])&&(d[e+28|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+24>>2]=0),_[e+24>>2]=0,_[e+16>>2]=0,_[e+20>>2]=0,a[e+28|0]=1,0|e}function Fa(e,t,i,n,r,s,l,c){var u,h=0,p=0,f=0,m=0,v=b(0),g=b(0),x=b(0),T=0,S=b(0),E=b(0),C=0,w=b(0),k=b(0),O=b(0),R=b(0),F=0,I=0,M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0);if(B=u=B-32|0,(0|(h=_[r+4>>2]))<=-1)for(_[r+8>>2]<=-1&&((p=_[r+12>>2])&&(d[r+16|0]&&p&&(_[5586]=_[5586]+1,o[_[4568]](p)),_[r+12>>2]=0),a[r+16|0]=1,_[r+8>>2]=0,_[r+12>>2]=0);f=_[u+20>>2],p=_[r+12>>2]+(h<<4)|0,_[p>>2]=_[u+16>>2],_[p+4>>2]=f,m=_[u+28>>2],_[p+8>>2]=_[u+24>>2],_[p+12>>2]=m,m=(p=h+1|0)>>>0>=h>>>0,h=p,m;);if(p=0,_[r+4>>2]=0,m=_[n+4>>2],_[r+8>>2]<(0|m)){if(m&&(_[5585]=_[5585]+1,p=0|o[_[4567]](m<<4,16),!((0|(I=_[r+4>>2]))<1)))for(h=0;T=C=(f=h<<4)+p|0,f=f+_[r+12>>2]|0,F=_[f+4>>2],_[T>>2]=_[f>>2],_[T+4>>2]=F,T=_[f+12>>2],_[C+8>>2]=_[f+8>>2],_[C+12>>2]=T,(0|I)!=(0|(h=h+1|0)););(h=_[r+12>>2])&&(d[r+16|0]&&h&&(_[5586]=_[5586]+1,o[_[4568]](h)),_[r+12>>2]=0),_[r+12>>2]=p,a[r+16|0]=1,_[r+8>>2]=m}if(!((0|(f=_[t+28>>2]))<1)){for(w=y[i+40>>2],M=y[i+36>>2],S=y[i+24>>2],P=y[i+20>>2],C=_[t+36>>2],k=y[e+8>>2],D=y[e+4>>2],O=y[e>>2],N=y[i+32>>2],L=y[i+16>>2],z=y[i+8>>2],G=y[i+4>>2],R=y[i>>2],h=0,x=b(34028234663852886e22),m=-1;p=C+A(h,36)|0,g=y[p+20>>2],v=y[p+24>>2],E=y[p+28>>2],x=(p=(g=b(b(b(b(b(b(g*R)+b(v*G))+b(E*z))*O)+b(b(b(b(g*L)+b(v*P))+b(E*S))*D))+b(b(b(b(g*N)+b(v*M))+b(E*w))*k)))<x)?g:x,m=p?h:m,(0|(h=h+1|0))<(0|f););if(!((0|m)<0)){if(f=_[t+36>>2]+A(m,36)|0,(0|(I=_[f+4>>2]))<1)p=n;else for(h=0;;){if(p=r,C=(0|(m=h+1|0))==(0|I),F=_[t+16>>2],T=_[f+12>>2],r=F+(_[T+((C?0:m)<<2)>>2]<<4)|0,U=y[r+8>>2],R=y[r>>2],X=y[r+4>>2],r=F+(_[(h<<2)+T>>2]<<4)|0,x=y[r+8>>2],g=y[r>>2],v=y[r+4>>2],q=y[i+56>>2],Q=y[i+52>>2],Z=y[i+48>>2],E=y[i+40>>2],w=y[i+32>>2],M=y[i+36>>2],S=y[f+28>>2],P=y[i+8>>2],k=y[f+20>>2],D=y[i>>2],O=y[f+24>>2],N=y[i+4>>2],L=y[i+24>>2],z=y[i+16>>2],G=y[i+20>>2],_[u+28>>2]=0,R=b(g-R),X=b(v-X),U=b(x-U),V=b(b(b(D*R)+b(N*X))+b(P*U)),H=b(b(b(z*k)+b(G*O))+b(L*S)),j=b(b(b(R*z)+b(X*G))+b(U*L)),W=b(b(b(D*k)+b(N*O))+b(P*S)),Y=b(b(V*H)-b(j*W)),y[u+24>>2]=-Y,S=b(b(b(w*k)+b(M*O))+b(E*S)),k=b(b(b(R*w)+b(X*M))+b(U*E)),O=b(b(j*S)-b(k*H)),y[u+16>>2]=-O,S=b(-b(b(k*W)-b(V*S))),y[u+20>>2]=S,Si(r=n,p,u+16|0,b(-b(b(b(b(Q+b(b(b(g*z)+b(v*G))+b(x*L)))*S)-b(O*b(Z+b(b(b(g*D)+b(v*N))+b(x*P)))))-b(Y*b(q+b(b(b(g*w)+b(v*M))+b(x*E))))))),(0|(h=_[r+4>>2]))<=-1)for(_[r+8>>2]<=-1&&((n=_[r+12>>2])&&(d[r+16|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[r+12>>2]=0),a[r+16|0]=1,_[r+8>>2]=0,_[r+12>>2]=0);F=_[u+4>>2],n=_[r+12>>2]+(h<<4)|0,_[n>>2]=_[u>>2],_[n+4>>2]=F,T=_[u+12>>2],_[n+8>>2]=_[u+8>>2],_[n+12>>2]=T,T=(n=h+1|0)>>>0>=h>>>0,h=n,T;);if(_[r+4>>2]=0,h=m,n=p,C)break}if(!((0|(m=_[p+4>>2]))<1))for(x=y[f+20>>2],g=y[f+24>>2],v=y[f+28>>2],E=b(b(b(x*y[i>>2])+b(g*y[i+4>>2]))+b(v*y[i+8>>2])),w=b(b(b(x*y[i+16>>2])+b(g*y[i+20>>2]))+b(v*y[i+24>>2])),x=b(b(b(x*y[i+32>>2])+b(g*y[i+36>>2]))+b(v*y[i+40>>2])),g=b(y[f+32>>2]-b(b(b(E*y[i+48>>2])+b(w*y[i+52>>2]))+b(x*y[i+56>>2]))),i=0;t=_[p+12>>2]+(i<<4)|0,(v=(v=b(g+b(b(b(E*y[t>>2])+b(w*y[t+4>>2]))+b(x*y[t+8>>2]))))<=s?s:v)<=l&&(n=_[t+12>>2],_[u+24>>2]=_[t+8>>2],_[u+28>>2]=n,n=_[t+4>>2],_[u+16>>2]=_[t>>2],_[u+20>>2]=n,o[_[_[c>>2]+16>>2]](c,e,u+16|0,v),m=_[p+4>>2]),(0|(i=i+1|0))<(0|m););}}B=u+32|0}function Ia(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0);B=n=B-144|0,_[n+108>>2]=0,a=y[t+80>>2],l=y[t+96>>2],m=y[t+120>>2],R=y[t+56>>2],E=y[t+112>>2],C=y[t+116>>2],F=y[t+52>>2],c=y[t+68>>2],v=y[t+84>>2],g=y[t+100>>2],s=y[t+20>>2],f=y[t+36>>2],A=y[t+72>>2],u=y[t+88>>2],d=y[t+24>>2],h=y[t+104>>2],x=y[t+40>>2],p=y[t+64>>2],T=y[t+32>>2],S=y[t>>2],w=y[t+16>>2],I=y[t+48>>2],k=y[t+4>>2],O=y[t+8>>2],_[n+100>>2]=0,_[n+84>>2]=0,_[n+68>>2]=0,y[n+80>>2]=b(b(O*A)+b(d*u))+b(x*h),y[n+76>>2]=b(b(k*A)+b(s*u))+b(f*h),y[n- -64>>2]=b(b(O*c)+b(d*v))+b(x*g),y[n+60>>2]=b(b(k*c)+b(s*v))+b(f*g),E=b(I-E),C=b(F-C),m=b(R-m),y[n+96>>2]=b(b(A*E)+b(u*C))+b(h*m),y[n+92>>2]=b(b(E*c)+b(C*v))+b(m*g),_[n+52>>2]=0,y[n+72>>2]=b(b(S*A)+b(w*u))+b(T*h),y[n+56>>2]=b(b(S*c)+b(w*v))+b(T*g),y[n+48>>2]=b(b(p*O)+b(a*d))+b(l*x),y[n+44>>2]=b(b(p*k)+b(a*s))+b(l*f),y[n+40>>2]=b(b(p*S)+b(a*w))+b(l*T),y[n+88>>2]=b(b(E*p)+b(C*a))+b(m*l),Ei(e,n+88|0,n+128|0,n+112|0,n+108|0,y[e+12>>2])&&(r?(v=y[t+72>>2],g=y[t+64>>2],A=y[t+68>>2],u=y[t+88>>2],h=y[t+80>>2],p=y[t+84>>2],s=y[t+104>>2],f=y[t+96>>2],d=y[t+100>>2],a=y[n+120>>2],l=y[n+112>>2],c=y[n+116>>2],_[n+36>>2]=0,x=b(b(b(l*f)+b(c*d))+b(a*s)),y[n+32>>2]=-x,T=b(b(b(l*h)+b(c*p))+b(a*u)),y[n+28>>2]=-T,S=b(b(b(g*l)+b(A*c))+b(v*a)),y[n+24>>2]=-S,w=y[t+112>>2],k=y[t+116>>2],a=y[t+120>>2],_[n+20>>2]=0,l=y[n+128>>2],c=y[n+132>>2],m=s,s=y[n+136>>2],m=b(a+b(b(b(f*l)+b(d*c))+b(m*s))),a=y[n+108>>2],y[n+16>>2]=m+b(x*a),y[n+12>>2]=b(k+b(b(b(l*h)+b(c*p))+b(s*u)))+b(T*a),y[n+8>>2]=b(w+b(b(b(l*g)+b(c*A))+b(s*v)))+b(S*a),o[_[_[i>>2]+16>>2]](i,n+24|0,n+8|0,a)):(a=y[t+72>>2],l=y[t+64>>2],c=y[t+68>>2],v=y[t+88>>2],g=y[t+80>>2],A=y[t+84>>2],u=y[t+104>>2],h=y[t+96>>2],p=y[t+100>>2],_[n+36>>2]=0,s=y[n+112>>2],f=y[n+116>>2],d=y[n+120>>2],y[n+32>>2]=b(b(h*s)+b(p*f))+b(u*d),y[n+28>>2]=b(b(s*g)+b(f*A))+b(d*v),y[n+24>>2]=b(b(l*s)+b(c*f))+b(a*d),s=y[t+112>>2],f=y[t+116>>2],d=y[t+120>>2],_[n+20>>2]=0,m=h,h=y[n+128>>2],x=p,p=y[n+132>>2],T=u,u=y[n+136>>2],y[n+16>>2]=d+b(b(b(m*h)+b(x*p))+b(T*u)),y[n+12>>2]=f+b(b(b(h*g)+b(p*A))+b(u*v)),y[n+8>>2]=s+b(b(b(h*l)+b(p*c))+b(u*a)),o[_[_[i>>2]+16>>2]](i,n+24|0,n+8|0,y[n+108>>2]))),B=n+144|0}function Ma(e,t,i,n,r,a){var s;return e|=0,t|=0,i|=0,n=b(n),r|=0,a|=0,B=s=B+-64|0,_[s+60>>2]=a,_[s+56>>2]=r,r=_[e+212>>2],y[r+4>>2]>=n&&(_[s+8>>2]=_[e+216>>2],_[s+12>>2]=s+56,e=_[t+12>>2],_[s+24>>2]=_[t+8>>2],_[s+28>>2]=e,e=_[t+4>>2],_[s+16>>2]=_[t>>2],_[s+20>>2]=e,e=_[i+12>>2],_[s+40>>2]=_[i+8>>2],_[s+44>>2]=e,e=_[i+4>>2],_[s+32>>2]=_[i>>2],_[s+36>>2]=e,y[s+48>>2]=n,n=b(o[_[_[r>>2]+12>>2]](r,s+8|0,1))),B=s- -64|0,b(n)}function Pa(e,t){return 1}function Da(e,t,i,n,r){e|=0,t|=0,i=b(i),n|=0,r|=0;var a,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0);return B=a=B-48|0,_[a+44>>2]=r,_[a+40>>2]=n,u=y[e- -64>>2],h=y[e+60>>2],p=y[e+80>>2],f=y[e+72>>2],d=y[e+76>>2],m=y[e+96>>2],v=y[e+88>>2],g=y[e+92>>2],A=y[e+56>>2],s=y[t+8>>2],l=y[t>>2],c=y[t+4>>2],t=_[e+48>>2],_[a+28>>2]=0,y[a+24>>2]=b(b(l*v)+b(c*g))+b(s*m),y[a+20>>2]=b(b(l*f)+b(c*d))+b(s*p),y[a+32>>2]=i,_[a+8>>2]=t,y[a+16>>2]=b(b(A*l)+b(h*c))+b(u*s),_[a+12>>2]=a+40,e=_[e+44>>2],i=b(o[_[_[e>>2]+12>>2]](e,a+8|0,1)),B=a+48|0,b(i)}function Ba(e){var t=0;(t=_[e+72>>2])&&(d[e+76|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+72>>2]=0),_[e+72>>2]=0,_[e+64>>2]=0,_[e+68>>2]=0,a[e+76|0]=1,(t=_[e+52>>2])&&(d[e+56|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+52>>2]=0),_[e+52>>2]=0,_[e+44>>2]=0,_[e+48>>2]=0,a[e+56|0]=1,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1,(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=0,a[e+16|0]=1,_[e+4>>2]=0,_[e+8>>2]=0}function Na(e,t){var i,n=0,r=0,s=0,l=0,c=0,u=0;if(B=i=B-96|0,a[i+92|0]=1,_[i+60>>2]=0,_[i+64>>2]=0,a[i+52|0]=1,_[i+48>>2]=0,a[i+72|0]=1,_[i+40>>2]=0,_[i+44>>2]=0,_[i+68>>2]=0,_[i+88>>2]=0,_[i+80>>2]=0,_[i+84>>2]=0,_[i+28>>2]=0,a[i+32|0]=1,_[i+20>>2]=0,_[i+24>>2]=0,!((0|(l=_[e+8>>2]))<1)){for(;;){s=_[_[_[e+16>>2]+(c<<2)>>2]+192>>2],_[i+12>>2]=s,u=n+-1|0,n=A((n=s+(s<<15^-1)|0)>>>10^n,9);e:{t:if(!((n=u&((n=((n^=n>>>6)<<11^-1)+n|0)>>>16^n))>>>0>=r>>>0)&&-1!=(0|(r=_[_[i+28>>2]+(n<<2)>>2]))){for(n=_[i+48>>2],u=_[i+88>>2];;){if((0|s)!=_[(r<<3)+u>>2]){if(-1!=(0|(r=_[n+(r<<2)>>2])))continue;break t}break}if(_[i+68>>2])break e}_[i>>2]=s,Ci(i+16|0,i,i+12|0),r=_[i+12>>2],o[_[_[r>>2]+60>>2]](r,t),l=_[e+8>>2]}if(!((0|(c=c+1|0))<(0|l)))break;r=_[i+20>>2],n=_[i+64>>2]}if(!((0|l)<1))for(r=0;s=_[_[e+16>>2]+(r<<2)>>2],1!=(0|(c=_[s+252>>2]))&&64!=(0|c)||(o[_[_[s>>2]+24>>2]](s,t),l=_[e+8>>2]),(0|(r=r+1|0))<(0|l););}Ba(i+16|0),B=i+96|0}function La(e){e|=0;var t,i=0,n=0,r=b(0),s=0,l=0,c=0,u=b(0),h=0,p=0,f=0,m=0,v=b(0),g=b(0),x=b(0),T=b(0);if(B=t=B-192|0,o[_[_[e>>2]+20>>2]](e)){if(i=0|o[_[_[e>>2]+20>>2]](e),o[_[_[i>>2]+100>>2]](i),i=0|o[_[_[e>>2]+20>>2]](e),o[_[_[i>>2]+8>>2]](t+80|0,i),i=0|o[_[_[e>>2]+20>>2]](e),8&o[_[_[i>>2]+56>>2]](i)&&(i=_[e+24>>2])&&!((0|(h=0|o[_[_[i>>2]+36>>2]](i)))<1))for(m=t+176|0,i=0;;){if(l=0,c=_[e+24>>2],p=0|o[_[_[c>>2]+40>>2]](c,i),(0|(f=_[p+844>>2]))>0)for(;s=0|o[_[_[e>>2]+20>>2]](e),c=p+A(l,208)|0,o[_[_[s>>2]+40>>2]](s,c+36|0,c+68|0,y[c+84>>2],_[c+168>>2],m),(0|f)!=(0|(l=l+1|0)););if((0|h)==(0|(i=i+1|0)))break}if(i=0|o[_[_[e>>2]+20>>2]](e),!(!(3&o[_[_[i>>2]+56>>2]](i))|_[e+8>>2]<1))for(c=t+160|0,h=t+96|0,m=t+112|0,p=t+128|0,f=t+144|0,l=0;;){if(s=_[_[e+16>>2]+(l<<2)>>2],!(32&d[s+204|0])){if(o[_[_[e>>2]+20>>2]](e)&&(i=0|o[_[_[e>>2]+20>>2]](e),1&o[_[_[i>>2]+56>>2]](i))){_[t+72>>2]=1053609165,_[t+76>>2]=0,_[t+64>>2]=1053609165,_[t+68>>2]=1053609165;e:if((i=_[s+220>>2]+-1|0)>>>0<=4){switch(i-1|0){default:i=_[t+92>>2],_[t+72>>2]=_[t+88>>2],_[t+76>>2]=i,i=_[t+84>>2],_[t+64>>2]=_[t+80>>2],_[t+68>>2]=i;break e;case 0:n=_[(i=h)+12>>2],_[t+72>>2]=_[i+8>>2],_[t+76>>2]=n,n=_[i+4>>2],_[t+64>>2]=_[i>>2],_[t+68>>2]=n;break e;case 1:n=_[(i=m)+12>>2],_[t+72>>2]=_[i+8>>2],_[t+76>>2]=n,n=_[i+4>>2],_[t+64>>2]=_[i>>2],_[t+68>>2]=n;break e;case 2:n=_[(i=p)+12>>2],_[t+72>>2]=_[i+8>>2],_[t+76>>2]=n,n=_[i+4>>2],_[t+64>>2]=_[i>>2],_[t+68>>2]=n;break e;case 3:}n=_[(i=f)+12>>2],_[t+72>>2]=_[i+8>>2],_[t+76>>2]=n,n=_[i+4>>2],_[t+64>>2]=_[i>>2],_[t+68>>2]=n}else _[t+72>>2]=1050253722,_[t+76>>2]=0,_[t+64>>2]=1050253722,_[t+68>>2]=1050253722;1&a[s+205|0]&&(i=_[s+320>>2],_[t+72>>2]=_[s+316>>2],_[t+76>>2]=i,i=_[s+312>>2],_[t+64>>2]=_[s+308>>2],_[t+68>>2]=i),o[_[_[e>>2]+28>>2]](e,s+4|0,_[s+192>>2],t- -64|0)}(i=_[e+72>>2])&&2&o[_[_[i>>2]+56>>2]](i)&&(n=_[(i=c)+12>>2],_[t+40>>2]=_[i+8>>2],_[t+44>>2]=n,n=_[i+4>>2],_[t+32>>2]=_[i>>2],_[t+36>>2]=n,i=_[s+192>>2],o[_[_[i>>2]+8>>2]](i,s+4|0,t- -64|0,t+48|0),r=y[4561],y[t+64>>2]=y[t+64>>2]-r,y[t+68>>2]=y[t+68>>2]-r,y[t+72>>2]=y[t+72>>2]-r,y[t+48>>2]=r+y[t+48>>2],y[t+52>>2]=r+y[t+52>>2],y[t+56>>2]=r+y[t+56>>2],3&d[s+204|0]|!d[e+44|0]|2!=_[s+252>>2]||(i=_[s+192>>2],o[_[_[i>>2]+8>>2]](i,s+68|0,t+16|0,t),u=b(y[t+16>>2]-r),y[t+16>>2]=u,v=b(y[t+20>>2]-r),y[t+20>>2]=v,g=b(y[t+24>>2]-r),y[t+24>>2]=g,x=b(r+y[t>>2]),y[t>>2]=x,T=b(r+y[t+4>>2]),y[t+4>>2]=T,r=b(r+y[t+8>>2]),y[t+8>>2]=r,u<y[t+64>>2]&&(y[t+64>>2]=u),v<y[t+68>>2]&&(y[t+68>>2]=v),g<y[t+72>>2]&&(y[t+72>>2]=g),(u=y[t+28>>2])<y[t+76>>2]&&(y[t+76>>2]=u),y[t+48>>2]<x&&(y[t+48>>2]=x),y[t+52>>2]<T&&(y[t+52>>2]=T),y[t+56>>2]<r&&(y[t+56>>2]=r),r=y[t+12>>2],y[t+60>>2]<r&&(y[t+60>>2]=r)),i=_[e+72>>2],o[_[_[i>>2]+60>>2]](i,t- -64|0,t+48|0,t+32|0))}if(!((0|(l=l+1|0))<_[e+8>>2]))break}}B=t+192|0}function za(e,t,i,n,r){var a,l=0,c=b(0),u=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0);B=a=B-400|0,o[_[4565]](6545),l=_[i+12>>2],_[a+336>>2]=_[i+8>>2],_[a+340>>2]=l,l=_[i+4>>2],_[a+328>>2]=_[i>>2],_[a+332>>2]=l,l=_[i+28>>2],_[a+352>>2]=_[i+24>>2],_[a+356>>2]=l,l=_[i+20>>2],_[a+344>>2]=_[i+16>>2],_[a+348>>2]=l,l=_[i+44>>2],_[a+368>>2]=_[i+40>>2],_[a+372>>2]=l,l=_[i+36>>2],_[a+360>>2]=_[i+32>>2],_[a+364>>2]=l,l=_[i+60>>2],_[a+384>>2]=_[i+56>>2],_[a+388>>2]=l,l=_[i+52>>2],_[a+376>>2]=_[i+48>>2],_[a+380>>2]=l,l=_[n+12>>2],_[a+272>>2]=_[n+8>>2],_[a+276>>2]=l,l=_[n+4>>2],_[a+264>>2]=_[n>>2],_[a+268>>2]=l,l=_[n+28>>2],_[a+288>>2]=_[n+24>>2],_[a+292>>2]=l,l=_[n+20>>2],_[a+280>>2]=_[n+16>>2],_[a+284>>2]=l,l=_[n+44>>2],_[a+304>>2]=_[n+40>>2],_[a+308>>2]=l,l=_[n+36>>2],_[a+296>>2]=_[n+32>>2],_[a+300>>2]=l,l=_[n+60>>2],_[a+320>>2]=_[n+56>>2],_[a+324>>2]=l,l=_[n+52>>2],_[a+312>>2]=_[n+48>>2],_[a+316>>2]=l,mr(a+328|0,a+264|0,a,a+248|0),_[a+228>>2]=0,c=y[a+248>>2],y[a+224>>2]=c*y[a+8>>2],y[a+220>>2]=c*y[a+4>>2],y[a+216>>2]=c*y[a>>2],_[a+208>>2]=0,_[a+212>>2]=0,_[a+200>>2]=0,_[a+204>>2]=0,_[a+52>>2]=0,_[a+56>>2]=0,_[a+60>>2]=0,_[a+4>>2]=0,_[a+8>>2]=0,_[a>>2]=1065353216,_[a+12>>2]=0,_[a+16>>2]=0,_[a+24>>2]=0,_[a+28>>2]=0,_[a+20>>2]=1065353216,_[a+32>>2]=0,_[a+36>>2]=0,_[a+44>>2]=0,_[a+48>>2]=0,_[a+40>>2]=1065353216,An(a+328|0,a+248|0),_[a+28>>2]=0,c=y[a+248>>2],u=y[a+252>>2],m=y[a+256>>2],p=y[a+260>>2],d=b(b(2)/b(b(b(b(c*c)+b(u*u))+b(m*m))+b(p*p))),v=b(m*d),f=b(u*v),g=b(c*d),A=b(p*g),y[a+36>>2]=f+A,_[a+44>>2]=0,_[a+12>>2]=0,x=b(c*v),d=b(u*d),T=b(p*d),y[a+32>>2]=x-T,y[a+24>>2]=f-A,f=b(c*d),p=b(p*v),y[a+16>>2]=f+p,y[a+8>>2]=x+T,y[a+4>>2]=f-p,c=b(c*g),u=b(u*d),y[a+40>>2]=b(1)-b(c+u),f=c,c=b(m*v),y[a+20>>2]=b(1)-b(f+c),y[a>>2]=b(1)-b(u+c),function(e,t,i,n,r,a){var l=b(0),c=b(0),u=b(0),p=b(0),f=0,d=0,m=0,v=0,g=0,A=b(0),x=b(0),T=b(0),S=b(0),E=b(0);o[_[_[e>>2]+8>>2]](e,t,r,a),l=y[i+8>>2],c=y[i+4>>2],p=y[r+8>>2],t=_[r+8>>2],A=y[r+4>>2],f=_[r+4>>2],x=y[r>>2],d=_[r>>2],T=y[a+8>>2],m=_[a+8>>2],S=y[a+4>>2],v=_[a+4>>2],E=y[a>>2],g=_[a>>2],(u=y[i>>2])>b(0)?(h(b(u+E)),g=s(0)):(h(b(u+x)),d=s(0)),c>b(0)?(h(b(c+S)),v=s(0)):(h(b(c+A)),f=s(0)),l>b(0)?(h(b(l+T)),m=s(0)):(h(b(l+p)),t=s(0)),l=y[n+8>>2],c=y[n>>2],u=y[n+4>>2],p=b(o[_[_[e>>2]+16>>2]](e)),_[r+12>>2]=0,_[r+8>>2]=t,_[r+4>>2]=f,_[r>>2]=d,_[a+12>>2]=0,_[a+8>>2]=m,_[a+4>>2]=v,_[a>>2]=g,l=b(p*b(w(b(b(b(c*c)+b(u*u))+b(l*l))))),y[r>>2]=y[r>>2]-l,y[r+4>>2]=y[r+4>>2]-l,y[r+8>>2]=y[r+8>>2]-l,y[a>>2]=l+y[a>>2],y[a+4>>2]=l+y[a+4>>2],y[a+8>>2]=l+y[a+8>>2]}(t,a,a+200|0,a+216|0,a+248|0,a+232|0),_[a>>2]=8376,l=_[i+12>>2],_[a+44>>2]=_[i+8>>2],_[a+48>>2]=l,l=_[i+4>>2],_[a+36>>2]=_[i>>2],_[a+40>>2]=l,l=_[i+28>>2],_[a+60>>2]=_[i+24>>2],_[a+64>>2]=l,l=_[i+20>>2],_[a+52>>2]=_[i+16>>2],_[a+56>>2]=l,l=_[i+44>>2],_[a+76>>2]=_[i+40>>2],_[a+80>>2]=l,l=_[i+36>>2],_[a+68>>2]=_[i+32>>2],_[a+72>>2]=l,l=_[i+60>>2],_[a+92>>2]=_[i+56>>2],_[a+96>>2]=l,l=_[i+52>>2],_[a+84>>2]=_[i+48>>2],_[a+88>>2]=l,i=_[n+12>>2],_[a+108>>2]=_[n+8>>2],_[a+112>>2]=i,i=_[n+4>>2],_[a+100>>2]=_[n>>2],_[a+104>>2]=i,i=_[n+20>>2],_[a+116>>2]=_[n+16>>2],_[a+120>>2]=i,i=_[n+28>>2],_[a+124>>2]=_[n+24>>2],_[a+128>>2]=i,i=_[n+44>>2],_[a+140>>2]=_[n+40>>2],_[a+144>>2]=i,i=_[n+36>>2],_[a+132>>2]=_[n+32>>2],_[a+136>>2]=i,i=_[n+52>>2],_[a+148>>2]=_[n+48>>2],_[a+152>>2]=i,i=_[n+60>>2],_[a+156>>2]=_[n+56>>2],_[a+160>>2]=i,_[a+184>>2]=r,y[a+188>>2]=0,_[a+192>>2]=t,_[a+180>>2]=e,c=b(y[a+148>>2]-y[a+84>>2]),u=b(y[a+152>>2]-y[a+88>>2]),p=b(y[a+156>>2]-y[a+92>>2]),m=b(b(1)/b(w(b(b(b(c*c)+b(u*u))+b(p*p))))),f=(d=b(p*m))==b(0)?b(0xde0b6b000000000):b(b(1)/d),y[a+12>>2]=f,g=(v=b(u*m))==b(0)?b(0xde0b6b000000000):b(b(1)/v),y[a+8>>2]=g,_[a+28>>2]=f<b(0),_[a+24>>2]=g<b(0),f=c,c=b(c*m),y[a+32>>2]=b(p*d)+b(b(f*c)+b(u*v)),c=c==b(0)?b(0xde0b6b000000000):b(b(1)/c),y[a+4>>2]=c,_[a+20>>2]=c<b(0),e=_[e+68>>2],o[_[_[e>>2]+24>>2]](e,a+376|0,a+312|0,a,a+248|0,a+232|0),o[_[4566]](),B=a+400|0}function Ga(e,t,i,n){var r,o=0,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0);B=r=B-112|0,o=_[e+28>>2],R=y[o+52>>2],F=y[o+56>>2],m=y[i+52>>2],v=y[i+56>>2],a=y[o+20>>2],s=y[o+24>>2],g=y[i+20>>2],A=y[i+36>>2],x=y[i+24>>2],l=y[o+36>>2],T=y[i+40>>2],c=y[o+40>>2],I=y[o+48>>2],S=y[i+32>>2],E=y[i>>2],C=y[i+16>>2],u=y[o+8>>2],h=y[o>>2],p=y[o+4>>2],w=y[i+48>>2],f=y[o+16>>2],k=y[i+4>>2],O=y[i+8>>2],d=y[o+32>>2],_[r+108>>2]=0,_[r+92>>2]=0,_[r+76>>2]=0,y[r+88>>2]=b(b(O*d)+b(x*l))+b(T*c),y[r+84>>2]=b(b(k*d)+b(g*l))+b(A*c),y[r+72>>2]=b(b(O*f)+b(x*a))+b(T*s),y[r+68>>2]=b(b(k*f)+b(g*a))+b(A*s),y[r+104>>2]=F+b(b(b(d*w)+b(l*m))+b(c*v)),y[r+100>>2]=R+b(b(b(f*w)+b(a*m))+b(s*v)),_[r+60>>2]=0,y[r+56>>2]=b(b(h*O)+b(p*x))+b(u*T),y[r+52>>2]=b(b(h*k)+b(p*g))+b(u*A),y[r+48>>2]=b(b(E*h)+b(C*p))+b(S*u),y[r+96>>2]=I+b(b(b(h*w)+b(p*m))+b(u*v)),y[r+80>>2]=b(b(E*d)+b(C*l))+b(S*c),y[r+64>>2]=b(b(E*f)+b(C*a))+b(S*s),i=_[e+32>>2],_[r+36>>2]=-1,_[r+28>>2]=1065353216,_[r+32>>2]=1,_[r+44>>2]=t,_[r+40>>2]=i,_[r+24>>2]=7988,_[r+28>>2]=_[i+4>>2],i=_[e+4>>2],o=_[i+8>>2],_[r+20>>2]=t,_[r+16>>2]=-1,_[r+8>>2]=o,_[r+4>>2]=n,_[r>>2]=i,_[r+12>>2]=r+48,se(_[e+8>>2],_[e+12>>2],_[e+16>>2],r,r+24|0,y[e+20>>2]),B=r+112|0}function Ua(e,t){var i,n=0,r=0,o=0,a=0,l=b(0);if(h(t),!((o=2147483647&(n=s(0)))>>>0<=2139095040&&(h(e),(r=2147483647&(a=s(0)))>>>0<2139095041)))return b(e+t);if(1065353216==(0|n))return ai(e);n=(i=n>>>30&2)|a>>>31;e:{t:{i:{n:{if(!r){r:switch(n-2|0){case 0:break n;case 1:break r;default:break i}return b(-3.1415927410125732)}if(2139095040!=(0|o)){if(!o|!(o+218103808>>>0>=r>>>0&&2139095040!=(0|r)))break e;if(r+218103808>>>0<o>>>0&&(l=b(0),i)||(l=ai(b(x(b(e/t))))),e=l,n>>>0<=2){r:switch(n-1|0){case 0:return b(-e);case 1:break r;default:break i}return b(b(3.1415927410125732)-b(e+b(8.742277657347586e-8)))}return b(b(e+b(8.742277657347586e-8))+b(-3.1415927410125732))}if(2139095040==(0|r))break t;return y[17824+(n<<2)>>2]}e=b(3.1415927410125732)}return e}return y[17808+(n<<2)>>2]}return b((0|a)<0?-1.5707963705062866:1.5707963705062866)}function Xa(e,t,i,n){var r,o,a,s=0,u=0,h=0;B=r=B-32|0,o=s=2147483647&n,s=s+-1006698496|0,i>>>0<0&&(s=s+1|0),a=u=i,u=s,s=o+-1140785152|0,(h=i)>>>0<0&&(s=s+1|0);e:if((0|s)==(0|u)&a>>>0<h>>>0|u>>>0<s>>>0){if(s=n<<4|i>>>28,i=i<<4|t>>>28,h=t&=268435455,134217728==(0|t)&e>>>0>=1|t>>>0>134217728){s=s+1073741824|0,(e=i+1|0)>>>0<1&&(s=s+1|0),u=e;break e}if(u=i,s=s-((i>>>0<0)+-1073741824|0)|0,e|134217728^h)break e;(e=u+(1&u)|0)>>>0<u>>>0&&(s=s+1|0),u=e}else(!h&2147418112==(0|o)?!(e|t):2147418112==(0|o)&h>>>0<0|o>>>0<2147418112)?(u=0,s=2146435072,1140785151==(0|o)&h>>>0>4294967295|o>>>0>1140785151||(s=0,(h=o>>>16)>>>0<15249||(function(e,t,i,n,r,o){var a=0,s=0,l=0,c=0;t:if(64&o)t=31&(i=o+-64|0),32<=(63&i)>>>0?(i=0,t=r>>>t):(i=r>>>t,t=((1<<t)-1&r)<<32-t|n>>>t),n=0,r=0;else{if(!o)break t;s=r,l=n,a=31&(c=64-o|0),32<=(63&c)>>>0?(s=l<<a,c=0):(s=(1<<a)-1&l>>>32-a|s<<a,c=l<<a),l=t,t=31&(a=o),32<=(63&a)>>>0?(a=0,t=i>>>t):(a=i>>>t,t=((1<<t)-1&i)<<32-t|l>>>t),t|=c,i=a|s,a=n,n=31&o,32<=(63&o)>>>0?(s=0,n=r>>>n):(s=r>>>n,n=((1<<n)-1&r)<<32-n|a>>>n),r=s}_[e>>2]=t,_[e+4>>2]=i,_[e+8>>2]=n,_[e+12>>2]=r}(r,e,t,i,s=65535&n|65536,15361-h|0),function(e,t,i,n,r,o){var a=0,s=0,l=0,c=0;64&o?(n=t,t=31&(r=o+-64|0),32<=(63&r)>>>0?(r=n<<t,n=0):(r=(1<<t)-1&n>>>32-t|i<<t,n<<=t),t=0,i=0):o&&(a=n,l=o,n=31&o,32<=(63&o)>>>0?(s=a<<n,c=0):(s=(1<<n)-1&a>>>32-n|r<<n,c=a<<n),n=i,a=t,r=31&(o=64-o|0),32<=(63&o)>>>0?(o=0,n>>>=r):(o=n>>>r,n=((1<<r)-1&n)<<32-r|a>>>r),n|=c,r=o|s,o=t,t=31&l,32<=(63&l)>>>0?(s=o<<t,t=0):(s=(1<<t)-1&o>>>32-t|i<<t,t=o<<t),i=s),_[e>>2]=t,_[e+4>>2]=i,_[e+8>>2]=n,_[e+12>>2]=r}(r+16|0,e,t,i,s,h+-15233|0),i=_[r+4>>2],e=_[r+8>>2],s=_[r+12>>2]<<4|e>>>28,u=e<<4|i>>>28,i=e=268435455&i,134217728==(0|e)&(t=_[r>>2]|0!=(_[r+16>>2]|_[r+24>>2])|0!=(_[r+20>>2]|_[r+28>>2]))>>>0>=1|e>>>0>134217728?((e=u+1|0)>>>0<1&&(s=s+1|0),u=e):t|134217728^i||((e=u+(1&u)|0)>>>0<u>>>0&&(s=s+1|0),u=e)))):(u=i<<4|t>>>28,s=524287&(s=n<<4|i>>>28)|2146959360);return B=r+32|0,l(0,0|u),l(1,-2147483648&n|s),+c()}function Va(e,t){var i=0,n=0,r=0;i=0!=(0|t);e:{t:{i:{n:if(!(!t|!(3&e)))for(;;){if(!d[0|e])break i;if(e=e+1|0,i=0!=(0|(t=t+-1|0)),!t)break n;if(!(3&e))break}if(!i)break t}if(!d[0|e])break e;i:{if(t>>>0>=4){for(i=(i=t+-4|0)-(n=-4&i)|0,n=4+(e+n|0)|0;;){if((-1^(r=_[e>>2]))&r+-16843009&-2139062144)break i;if(e=e+4|0,!((t=t+-4|0)>>>0>3))break}t=i,e=n}if(!t)break t}for(;;){if(!d[0|e])break e;if(e=e+1|0,!(t=t+-1|0))break}}return 0}return e}function Ha(e,t,i,n){if(e|t)for(;a[0|(i=i+-1|0)]=d[14864+(15&e)|0]|n,(e=(15&t)<<28|e>>>4)|(t>>>=4););return i}function ja(e,t,i){if(e|t)for(;a[0|(i=i+-1|0)]=7&e|48,(e=(7&t)<<29|e>>>3)|(t>>>=3););return i}function Wa(e,t,i){var n=0,r=0,s=0;e:{if(!(n=_[i+16>>2])){if(li(i))break e;n=_[i+16>>2]}if(n-(s=_[i+20>>2])>>>0<t>>>0)return void o[_[i+36>>2]](i,e,t);t:if(!(a[i+75|0]<0)){for(n=t;;){if(!(r=n))break t;if(10==d[(n=r+-1|0)+e|0])break}if(o[_[i+36>>2]](i,e,r)>>>0<r>>>0)break e;t=t-r|0,e=e+r|0,s=_[i+20>>2]}Xi(s,e,t),_[i+20>>2]=_[i+20>>2]+t}}function Ya(e,t,i){var n,r=b(0),o=b(0),a=0,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0);B=n=B-16|0;e:{t:{i:{n:{if(_[i+100>>2]>=0)y[(_[t+108>>2]<<2)+n>>2]=_[i+88>>2];else if(r=dn(i+24|0),o=dn(a=i+72|0),s=_[i+100>>2],y[(_[t+108>>2]<<2)+n>>2]=r/o,(0|s)<0)break n;y[(_[t+112>>2]<<2)+n>>2]=_[i+92>>2];break i}if(r=dn(i+40|0),o=dn(a),a=_[i+100>>2],y[(_[t+112>>2]<<2)+n>>2]=r/o,(0|a)<0)break t}r=b(_[i+96>>2]);break e}r=b(dn(i+56|0)/dn(i+72|0))}y[(_[t+104>>2]<<2)+n>>2]=r,r=y[t+20>>2],o=y[t+24>>2],l=y[t+16>>2],c=y[t>>2],u=y[t+4>>2],h=y[t+8>>2],p=y[n>>2],f=y[n+4>>2],d=y[n+8>>2],_[e+12>>2]=0,y[e+8>>2]=o+b(d*h),y[e+4>>2]=r+b(f*u),y[e>>2]=l+b(p*c),B=n+16|0}function qa(e,t){var i,n;i=0|e,n=0|t,r[0]=i,r[1]=n}function Qa(e,t,i,n){return e=function(e,t,i,n){var r,o,a,s,l=0,c=0;return s=A(l=i>>>16,c=e>>>16),l=(65535&(c=((a=A(r=65535&i,o=65535&e))>>>16)+A(c,r)|0))+A(l,o)|0,e=(((A(t,i)+s|0)+A(e,n)|0)+(c>>>16)|0)+(l>>>16)|0,N=e,t=65535&a|l<<16}(e,t,i,n)}function Za(e,t,i){return function(e,t,i){var n=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0,h=0;e:{t:{i:{n:{r:{o:{a:{s:{l:{if(r=t){if(!(n=i))break l;break s}return qa((t=e)-A(e=(e>>>0)/(i>>>0)|0,i)|0,0),N=0,e}if(!e)break a;break o}if(!((a=n+-1|0)&n))break r;s=0-(a=(T(n)+33|0)-T(r)|0)|0;break i}return qa(0,r-A(e=(r>>>0)/0|0,0)|0),N=0,e}if((n=32-T(r)|0)>>>0<31)break n;break t}if(qa(e&a,0),1==(0|n))break e;return i=31&(n=n?31-T(n+-1^n)|0:32),32<=(63&n)>>>0?(r=0,e=t>>>i):(r=t>>>i,e=((1<<i)-1&t)<<32-i|e>>>i),N=r,e}a=n+1|0,s=63-n|0}if(n=t,o=31&(r=63&a),32<=r>>>0?(r=0,o=n>>>o):(r=n>>>o,o=((1<<o)-1&n)<<32-o|e>>>o),n=31&(s&=63),32<=s>>>0?(t=e<<n,e=0):(t=(1<<n)-1&e>>>32-n|t<<n,e<<=n),a)for(n=-1,(s=i+-1|0)>>>0<4294967295&&(n=0);o=(c=l=o<<1|t>>>31)-(u=i&(l=n-((r=r<<1|o>>>31)+(s>>>0<l>>>0)|0)>>31))|0,r=r-(c>>>0<u>>>0)|0,t=t<<1|e>>>31,e=h|e<<1,h=l&=1,a=a+-1|0;);return qa(o,r),N=t<<1|e>>>31,l|e<<1}qa(e,t),e=0,t=0}return N=t,e}(e,t,i)}function Ka(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}return o[1]=kn,o[2]=function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,kn(e=_[t+12>>2]),Bo(e),B=t+16|0},o[3]=function(e,t){var i,n;e|=0,t|=0,B=i=B-144|0,_[i+140>>2]=e,_[i+136>>2]=t,Ot(e=i+8|0,(t=_[i+140>>2])+68|0),Et(n=i+72|0,t+4|0,e),_r(_[i+136>>2],n),B=i+144|0},o[4]=function(e,t){var i;e|=0,t|=0,B=i=B-80|0,_[i+76>>2]=e,_[i+72>>2]=t,e=i+8|0,t=_[i+76>>2],Et(e,_[i+72>>2],t+68|0),_r(t+4|0,e),B=i+80|0},o[5]=_o,o[6]=St,o[7]=function(){!function(){var e=0;B=e=B-16|0,_[e+12>>2]=0,function(e){var t,i=0,n=0,r=0;B=t=B-208|0,_[t+204>>2]=0,Pi(t+160|0,0,40),_[t+200>>2]=_[t+204>>2],(0|Oo(0,t+200|0,t+80|0,t+160|0))<0||(n=_[e+76>>2]>=0?1:n,i=_[e>>2],a[e+74|0]<=0&&(_[e>>2]=-33&i),r=32&i,_[e+48>>2]?Oo(e,t+200|0,t+80|0,t+160|0):(_[e+48>>2]=80,_[e+16>>2]=t+80,_[e+28>>2]=t,_[e+20>>2]=t,i=_[e+44>>2],_[e+44>>2]=t,Oo(e,t+200|0,t+80|0,t+160|0),i&&(o[_[e+36>>2]](e,0,0),_[e+48>>2]=0,_[e+44>>2]=i,_[e+28>>2]=0,_[e+16>>2]=0,_[e+20>>2]=0)),_[e>>2]=_[e>>2]|r),B=t+208|0}(e=_[4466]),function(e){var t=0;if(_[e+76>>2]<0)return 10==a[e+75|0]||(t=_[e+20>>2])>>>0>=v[e+16>>2]?void ci(e):(_[e+20>>2]=t+1,void(a[0|t]=10));10==a[e+75|0]||(t=_[e+20>>2])>>>0>=v[e+16>>2]?ci(e):(_[e+20>>2]=t+1,a[0|t]=10)}(e),P(),k()}(),k()},o[8]=xt,o[9]=function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,xt(e=_[t+12>>2]),Bi(e),B=t+16|0},o[10]=function(e,t){var i;return e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],a[i+7|0]=0!=(_[_[i+8>>2]+4>>2]&f[t+14>>1]),a[i+7|0]=1&a[i+7|0]?0!=(f[t+12>>1]&_[_[i+8>>2]+8>>2]):0,1&a[i+7|0]},o[11]=function(e,t,i){var n;return e|=0,t|=0,i|=0,B=n=B+-64|0,_[n+60>>2]=e,_[n+56>>2]=t,a[n+55|0]=i,e=_[n+60>>2],_[e+8>>2]=_[_[n+56>>2]>>2],bt(e+24|0,_[n+56>>2]),_[12+(B-16|0)>>2]=n+32,1&a[n+55|0]?(t=_[n+56>>2],i=_[t+12>>2],_[n+32>>2]=_[t+8>>2],_[n+36>>2]=i,i=_[t+20>>2],_[n+40>>2]=_[t+16>>2],_[n+44>>2]=i):(_[12+(t=B-16|0)>>2]=_[e+8>>2],_[12+(i=B-16|0)>>2]=_[t+12>>2]+4,Un(n+16|0,_[i+12>>2],_[n+56>>2]+8|0),t=_[n+20>>2],_[n+32>>2]=_[n+16>>2],_[n+36>>2]=t,t=_[n+28>>2],_[n+40>>2]=_[n+24>>2],_[n+44>>2]=t),At(e+76|0,n+32|0),_[12+(B-16|0)>>2]=n,gt(n,e+44|0,e+60|0,y[_[n+56>>2]+24>>2]),At(e+96|0,n),function(e,t){var i,n=0;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=B-16|0,e=_[i+12>>2],_[t+12>>2]=e,_[i+4>>2]=_[_[t+12>>2]+4>>2],t=_[i+4>>2],_[12+(n=B-16|0)>>2]=e,_[_[n+12>>2]+8>>2]==(0|t)&&(_[12+(n=B-16|0)>>2]=e,t=_[_[n+12>>2]+4>>2],_[12+(n=B-16|0)>>2]=e,_[n+8>>2]=t,mt(t=e,n=_[n+8>>2]?_[n+8>>2]<<1:1)),y[_[e+12>>2]+(_[e+4>>2]<<2)>>2]=y[_[i+8>>2]>>2],_[e+4>>2]=_[e+4>>2]+1,B=i+16|0}(e+116|0,_[n+56>>2]+24|0),bt(e+136|0,_[_[n+56>>2]+4>>2]),B=n- -64|0,b(y[e+4>>2])},o[12]=_o,o[13]=St,o[14]=kn,o[15]=function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,kn(e=_[t+12>>2]),Bi(e),B=t+16|0},o[16]=function(e,t,i){var n;return e|=0,t|=0,i|=0,B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,a[n+23|0]=i,e=_[n+28>>2],_[e+16>>2]=_[_[_[n+24>>2]+4>>2]>>2],y[e+4>>2]=y[_[n+24>>2]+24>>2],_[e+8>>2]=_[_[n+24>>2]>>2],1&a[n+23|0]?(t=_[n+24>>2],i=_[t+12>>2],_[e+56>>2]=_[t+8>>2],_[e+60>>2]=i,i=_[t+20>>2],_[e+64>>2]=_[t+16>>2],_[e+68>>2]=i):(_[12+(t=B-16|0)>>2]=_[e+8>>2],_[12+(i=B-16|0)>>2]=_[t+12>>2]+4,Un(n,_[i+12>>2],_[n+24>>2]+8|0),t=_[n+4>>2],_[e+56>>2]=_[n>>2],_[e+60>>2]=t,t=_[n+12>>2],_[e+64>>2]=_[n+8>>2],_[e+68>>2]=t),gt(e+72|0,e+24|0,e+40|0,y[_[n+24>>2]+24>>2]),B=n+32|0,b(y[_[n+24>>2]+24>>2])},o[17]=function(e){var t;return _[(e|=0)>>2]=1380,(t=_[e+556>>2])&&(d[e+560|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+556>>2]=0),_[e+556>>2]=0,_[e+548>>2]=0,_[e+552>>2]=0,a[e+560|0]=1,ao(e),0|e},o[18]=function(e){var t;_[(e|=0)>>2]=1380,(t=_[e+556>>2])&&(d[e+560|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+556>>2]=0),_[e+556>>2]=0,_[e+548>>2]=0,_[e+552>>2]=0,a[e+560|0]=1,ao(e),e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[19]=function(e,t){t|=0,_[200+(e|=0)>>2]=t,_[e+192>>2]=t,_[e+304>>2]=_[e+304>>2]+1},o[20]=function(e,t){t|=0;var i,n=0;n=i=_[288+(e|=0)>>2];e:if(!((0|i)<1)){for(e=_[e+296>>2],n=0;;){if(_[e+(n<<2)>>2]==(0|t))break e;if((0|i)==(0|(n=n+1|0)))break}n=i}return(0|n)>=(0|i)|0},o[21]=function(e){return 496},o[22]=function(e,t,i){return ze(e|=0,t|=0,i|=0),_[t+264>>2]=_[e+324>>2],_[t+268>>2]=_[e+328>>2],_[t+272>>2]=_[e+332>>2],_[t+276>>2]=_[e+336>>2],_[t+280>>2]=_[e+340>>2],_[t+284>>2]=_[e+344>>2],_[t+288>>2]=_[e+348>>2],_[t+292>>2]=_[e+352>>2],_[t+296>>2]=_[e+356>>2],_[t+300>>2]=_[e+360>>2],_[t+304>>2]=_[e+364>>2],_[t+308>>2]=_[e+368>>2],_[t+312>>2]=_[e+372>>2],_[t+316>>2]=_[e+376>>2],_[t+320>>2]=_[e+380>>2],_[t+324>>2]=_[e+384>>2],_[t+328>>2]=_[e+388>>2],_[t+332>>2]=_[e+392>>2],_[t+336>>2]=_[e+396>>2],_[t+340>>2]=_[e+400>>2],_[t+456>>2]=_[e+404>>2],_[t+344>>2]=_[e+604>>2],_[t+348>>2]=_[e+608>>2],_[t+352>>2]=_[e+612>>2],_[t+356>>2]=_[e+616>>2],_[t+360>>2]=_[e+408>>2],_[t+364>>2]=_[e+412>>2],_[t+368>>2]=_[e+416>>2],_[t+372>>2]=_[e+420>>2],_[t+376>>2]=_[e+424>>2],_[t+380>>2]=_[e+428>>2],_[t+384>>2]=_[e+432>>2],_[t+388>>2]=_[e+436>>2],_[t+392>>2]=_[e+440>>2],_[t+396>>2]=_[e+444>>2],_[t+400>>2]=_[e+448>>2],_[t+404>>2]=_[e+452>>2],_[t+408>>2]=_[e+456>>2],_[t+412>>2]=_[e+460>>2],_[t+416>>2]=_[e+464>>2],_[t+420>>2]=_[e+468>>2],_[t+424>>2]=_[e+472>>2],_[t+428>>2]=_[e+476>>2],_[t+432>>2]=_[e+480>>2],_[t+436>>2]=_[e+484>>2],_[t+440>>2]=_[e+488>>2],_[t+444>>2]=_[e+492>>2],_[t+448>>2]=_[e+496>>2],_[t+452>>2]=_[e+500>>2],_[t+460>>2]=_[e+504>>2],_[t+464>>2]=_[e+508>>2],_[t+492>>2]=d[e+512|0],_[t+468>>2]=_[e+516>>2],_[t+472>>2]=_[e+520>>2],_[t+476>>2]=_[e+524>>2],_[t+480>>2]=_[e+528>>2],_[t+484>>2]=_[e+532>>2],_[t+488>>2]=_[e+536>>2],1408},o[23]=function(e,t){var i,n=0,r=0,a=0,s=0,l=0;a=t|=0,s=0|o[_[_[(e|=0)>>2]+16>>2]](e),l=1,r=_[_[t>>2]+16>>2],n=0|o[r](0|a,0|s,0|l),l=t,s=n,a=0|o[_[_[e>>2]+20>>2]](e,_[n+8>>2],t),i=e,r=_[_[t>>2]+20>>2],o[r](0|l,0|s,0|a,1497645650,0|i)},o[24]=rt,o[25]=function(e){(e=rt(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[26]=function(e){e|=0;var t,i=0,n=0,r=0,a=0;if(B=t=B-16|0,o[_[4565]](6427),(0|(i=_[e+8>>2]))>=1)for(;;){r=_[_[e+16>>2]+(n<<2)>>2];e:{t:if(!(d[e+76|0]||(a=_[r+220>>2]+-2|0)>>>0>3))switch(a-1|0){case 0:case 1:break t;default:break e}wi(e,r),i=_[e+8>>2]}if(!((0|(n=n+1|0))<(0|i)))break}o[_[4566]](),B=t+16|0},o[27]=function(e){var t,i;e|=0,B=t=B-16|0,o[_[4565]](6439),i=_[e+68>>2],o[_[_[i>>2]+32>>2]](i,_[e+24>>2]),o[_[4566]](),B=t+16|0},o[28]=function(e,t){t|=0,_[72+(e|=0)>>2]=t},o[29]=lo,o[30]=function(e){e|=0;var t,i=0,n=0,r=0,a=0,s=0;B=t=B-16|0,o[_[4565]](1652),La(e);e:if(o[_[_[e>>2]+20>>2]](e)&&(i=0|o[_[_[e>>2]+20>>2]](e),6144&o[_[_[i>>2]+56>>2]](i)))for(i=0|o[_[_[e>>2]+104>>2]](e);;){if((0|i)<1)break e;i=i+-1|0,a=e,s=0|o[_[_[e>>2]+108>>2]](e,i),r=_[_[e>>2]+172>>2],o[r](0|a,0|s)}if(o[_[_[e>>2]+20>>2]](e)&&(i=0|o[_[_[e>>2]+20>>2]](e),16387&o[_[_[i>>2]+56>>2]](i)&&o[_[_[e>>2]+20>>2]](e)&&(i=0|o[_[_[e>>2]+20>>2]](e),!(!o[_[_[i>>2]+56>>2]](i)|_[e+296>>2]<1))))for(i=0;n=_[_[e+304>>2]+(i<<2)>>2],o[_[_[n>>2]+12>>2]](n,_[e+72>>2]),(0|(i=i+1|0))<_[e+296>>2];);o[_[_[e>>2]+20>>2]](e)&&(e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+104>>2]](e)),o[_[4566]](),B=t+16|0},o[31]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=0,x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=0,I=0,M=0,P=b(0),D=b(0),N=0,L=0,z=0,G=0,U=0,X=b(0),V=b(0),H=b(0);B=r=B-144|0,o[_[_[e>>2]+20>>2]](e)&&(a=0|o[_[_[e>>2]+20>>2]](e),32768&o[_[_[a>>2]+56>>2]](a)&&(a=0|o[_[_[e>>2]+20>>2]](e),o[_[_[a>>2]+64>>2]](a,t,b(.10000000149011612))));e:{t:if(!((a=_[i+4>>2])>>>0>31)){switch(a-1|0){case 30:if((0|(F=_[i+20>>2]))<1)break e;for(;F=F+-1|0,a=_[i+28>>2]+A(F,80)|0,g=_[a+64>>2],m=y[a+56>>2],v=y[a+48>>2],w=y[a+52>>2],x=y[a+32>>2],T=y[a>>2],k=y[a+16>>2],R=y[a+36>>2],u=y[a+4>>2],S=y[a+20>>2],O=y[a+40>>2],P=y[a+8>>2],D=y[a+24>>2],X=y[t+48>>2],V=y[t+52>>2],H=y[t+56>>2],s=y[t+8>>2],l=y[t>>2],c=y[t+4>>2],h=y[t+24>>2],p=y[t+16>>2],f=y[t+20>>2],E=y[t+40>>2],C=y[t+32>>2],d=y[t+36>>2],_[r+60>>2]=0,_[r+44>>2]=0,_[r+28>>2]=0,_[r+12>>2]=0,y[r+40>>2]=b(b(P*C)+b(D*d))+b(O*E),y[r+36>>2]=b(b(u*C)+b(S*d))+b(R*E),y[r+32>>2]=b(b(T*C)+b(k*d))+b(x*E),y[r+24>>2]=b(b(P*p)+b(D*f))+b(O*h),y[r+20>>2]=b(b(u*p)+b(S*f))+b(R*h),y[r+16>>2]=b(b(T*p)+b(k*f))+b(x*h),y[r+8>>2]=b(b(P*l)+b(D*c))+b(O*s),y[r+4>>2]=b(b(u*l)+b(S*c))+b(R*s),y[r>>2]=b(b(T*l)+b(k*c))+b(x*s),y[r+56>>2]=H+b(b(b(v*C)+b(w*d))+b(m*E)),y[r+52>>2]=V+b(b(b(v*p)+b(w*f))+b(m*h)),y[r+48>>2]=X+b(b(b(v*l)+b(w*c))+b(m*s)),o[_[_[e>>2]+28>>2]](e,r,g,n),(0|F)>0;);break e;default:a=_[i+44>>2],_[r+8>>2]=_[i+40>>2],_[r+12>>2]=a,a=_[i+36>>2],_[r>>2]=_[i+32>>2],_[r+4>>2]=a,s=b(o[_[_[i>>2]+48>>2]](i)),l=b(o[_[_[i>>2]+48>>2]](i)),c=b(b(o[_[_[i>>2]+48>>2]](i))+y[r+8>>2]),y[r+8>>2]=c,s=b(s+y[r>>2]),y[r>>2]=s,l=b(l+y[r+4>>2]),y[r+4>>2]=l,e=0|o[_[_[e>>2]+20>>2]](e),_[r+140>>2]=0,y[r+136>>2]=-c,y[r+132>>2]=-l,y[r+128>>2]=-s,o[_[_[e>>2]+80>>2]](e,r+128|0,r,t,n);break e;case 7:s=b(o[_[_[i>>2]+48>>2]](i)),e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+24>>2]](e,s,t,n);break e;case 8:if((0|(a=_[i+96>>2]))<1)break e;for(;a=a+-1|0,g=_[i+104>>2]+(a<<4)|0,s=y[g+8>>2],l=y[g>>2],c=y[g+4>>2],g=0|o[_[_[e>>2]+20>>2]](e),x=y[_[i+124>>2]+(a<<2)>>2],T=y[t+48>>2],k=y[t+52>>2],R=y[t+56>>2],h=y[t+8>>2],p=y[t>>2],f=y[t+4>>2],E=y[t+24>>2],C=y[t+16>>2],d=y[t+20>>2],m=y[t+40>>2],v=y[t+32>>2],w=y[t+36>>2],_[r+60>>2]=0,_[r+44>>2]=0,_[r+28>>2]=0,_[r+12>>2]=0,u=b(v*b(0)),S=b(w*b(0)),y[r+40>>2]=m+b(u+S),O=b(u+w),u=b(m*b(0)),y[r+36>>2]=O+u,y[r+32>>2]=b(v+S)+u,u=b(C*b(0)),S=b(d*b(0)),y[r+24>>2]=E+b(u+S),O=b(u+d),u=b(E*b(0)),y[r+20>>2]=O+u,y[r+16>>2]=b(C+S)+u,u=b(p*b(0)),S=b(f*b(0)),y[r+8>>2]=h+b(u+S),O=b(u+f),u=b(h*b(0)),y[r+4>>2]=O+u,y[r>>2]=b(p+S)+u,y[r+56>>2]=R+b(b(b(l*v)+b(c*w))+b(s*m)),y[r+52>>2]=k+b(b(b(l*C)+b(c*d))+b(s*E)),y[r+48>>2]=T+b(b(b(l*p)+b(c*f))+b(s*h)),o[_[_[g>>2]+24>>2]](g,x,r,n),(0|a)>0;);break e;case 9:a=_[i+56>>2],s=y[(a<<2)+(i=i+32|0)>>2],l=y[i+((a+2|0)%3<<2)>>2],e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+84>>2]](e,l,s,a,t,n);break e;case 10:a=_[i+72>>2],s=y[i+60>>2],l=y[i+64>>2],e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+92>>2]](e,s,l,a,t,n);break e;case 12:a=_[i+56>>2],s=b(o[_[_[i>>2]+92>>2]](i)),g=_[i+44>>2],_[r+8>>2]=_[i+40>>2],_[r+12>>2]=g,g=_[i+36>>2],_[r>>2]=_[i+32>>2],_[r+4>>2]=g,l=b(o[_[_[i>>2]+48>>2]](i)),c=b(o[_[_[i>>2]+48>>2]](i)),y[r+8>>2]=b(o[_[_[i>>2]+48>>2]](i))+y[r+8>>2],y[r>>2]=l+y[r>>2],y[r+4>>2]=c+y[r+4>>2],l=y[(a<<2)+r>>2],e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+88>>2]](e,s,l,a,t,n);break e;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 29:break t;case 27:}s=y[i+68>>2],e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+96>>2]](e,i+52|0,s,t,n);break e}t:if(!((0|a)>6))if(M=_[i+56>>2]){if(_[M+28>>2]<1)break t;for(;;){c=b(0);i:if(a=(z=A(L,36))+_[M+36>>2]|0,N=_[a+4>>2]){if(s=b(0),l=b(0),!((0|N)<1))for(I=_[a+12>>2],a=_[(I+(N<<2)|0)-4>>2],F=0;;){if(I=(G=(g=_[(F<<2)+I>>2])<<4)+_[M+16>>2]|0,O=y[I>>2],P=y[I+4>>2],D=y[I+8>>2],I=0|o[_[_[e>>2]+20>>2]](e),U=_[M+16>>2],h=y[8+(a=U+(a<<4)|0)>>2],p=y[a>>2],f=y[a+4>>2],E=y[t+48>>2],C=y[t+8>>2],d=y[t>>2],m=y[t+4>>2],v=y[t+52>>2],w=y[t+24>>2],x=y[t+16>>2],T=y[t+20>>2],k=y[t+56>>2],R=y[t+40>>2],u=y[t+32>>2],S=y[t+36>>2],_[r+12>>2]=0,y[r+8>>2]=k+b(b(b(p*u)+b(f*S))+b(h*R)),y[r+4>>2]=v+b(b(b(p*x)+b(f*T))+b(h*w)),y[r>>2]=E+b(b(b(p*d)+b(f*m))+b(h*C)),h=y[8+(a=G+U|0)>>2],p=y[a>>2],f=y[a+4>>2],_[r+140>>2]=0,y[r+136>>2]=k+b(b(b(u*p)+b(S*f))+b(R*h)),y[r+132>>2]=v+b(b(b(x*p)+b(T*f))+b(w*h)),y[r+128>>2]=E+b(b(b(d*p)+b(m*f))+b(C*h)),o[_[_[I>>2]+16>>2]](I,r,r+128|0,n),l=b(l+D),s=b(s+P),c=b(c+O),F=F+1|0,a=_[M+36>>2]+z|0,(0|F)>=_[a+4>>2])break i;I=_[a+12>>2],a=g}}else s=b(0),l=b(0);if(a=0|o[_[_[e>>2]+20>>2]](e),16384&o[_[_[a>>2]+56>>2]](a)&&(_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=1065353216,_[r+4>>2]=1065353216,a=_[M+36>>2]+z|0,u=y[a+28>>2],S=y[a+20>>2],O=y[a+24>>2],a=0|o[_[_[e>>2]+20>>2]](e),h=y[t+48>>2],p=y[t+8>>2],f=y[t>>2],E=y[t+4>>2],C=y[t+52>>2],d=y[t+24>>2],m=y[t+16>>2],v=y[t+20>>2],w=y[t+56>>2],x=y[t+40>>2],T=y[t+32>>2],k=y[t+36>>2],_[r+140>>2]=0,R=b(b(1)/b(0|N)),c=b(R*c),s=b(R*s),l=b(R*l),y[r+136>>2]=w+b(b(b(T*c)+b(k*s))+b(x*l)),y[r+132>>2]=C+b(b(b(c*m)+b(s*v))+b(l*d)),y[r+128>>2]=h+b(b(b(c*f)+b(s*E))+b(l*p)),_[r+124>>2]=0,c=b(c+S),s=b(s+O),l=b(l+u),y[r+120>>2]=w+b(b(b(T*c)+b(k*s))+b(x*l)),y[r+116>>2]=C+b(b(b(c*m)+b(s*v))+b(l*d)),y[r+112>>2]=h+b(b(b(c*f)+b(s*E))+b(l*p)),o[_[_[a>>2]+16>>2]](a,r+128|0,r+112|0,r)),!((0|(L=L+1|0))<_[M+28>>2]))break}}else if(!((0|o[_[_[i>>2]+100>>2]](i))<1))for(a=0;o[_[_[i>>2]+104>>2]](i,a,r,r+128|0),s=y[t+48>>2],l=y[t+8>>2],c=y[t>>2],h=y[t+4>>2],p=y[t+52>>2],f=y[t+24>>2],E=y[t+16>>2],C=y[t+20>>2],d=y[t+56>>2],m=y[t+40>>2],v=y[t+32>>2],w=y[t+36>>2],_[r+124>>2]=0,x=y[r>>2],T=y[r+4>>2],k=y[r+8>>2],y[r+120>>2]=d+b(b(b(v*x)+b(w*T))+b(m*k)),y[r+116>>2]=p+b(b(b(x*E)+b(T*C))+b(k*f)),y[r+112>>2]=s+b(b(b(x*c)+b(T*h))+b(k*l)),_[r+108>>2]=0,u=d,d=y[r+128>>2],T=b(v*d),v=y[r+132>>2],x=m,m=y[r+136>>2],y[r+104>>2]=u+b(b(T+b(w*v))+b(x*m)),y[r+100>>2]=p+b(b(b(E*d)+b(C*v))+b(f*m)),y[r+96>>2]=s+b(b(b(c*d)+b(h*v))+b(l*m)),g=0|o[_[_[e>>2]+20>>2]](e),o[_[_[g>>2]+16>>2]](g,r+112|0,r+96|0,n),(0|(a=a+1|0))<(0|o[_[_[i>>2]+100>>2]](i)););(a=_[i+4>>2])+-21>>>0<=8&&(_[r+136>>2]=1566444395,_[r+140>>2]=0,_[r+128>>2]=1566444395,_[r+132>>2]=1566444395,_[r+120>>2]=-581039253,_[r+124>>2]=0,_[r+112>>2]=-581039253,_[r+116>>2]=-581039253,_[r+8>>2]=o[_[_[e>>2]+20>>2]](e),_[r+4>>2]=8456,_[r>>2]=8432,a=_[n+12>>2],_[r+20>>2]=_[n+8>>2],_[r+24>>2]=a,a=_[n+4>>2],_[r+12>>2]=_[n>>2],_[r+16>>2]=a,a=_[t+12>>2],_[r+36>>2]=_[t+8>>2],_[r+40>>2]=a,a=_[t+4>>2],_[r+28>>2]=_[t>>2],_[r+32>>2]=a,a=_[t+20>>2],_[r+44>>2]=_[t+16>>2],_[r+48>>2]=a,a=_[t+28>>2],_[r+52>>2]=_[t+24>>2],_[r+56>>2]=a,a=_[t+44>>2],_[r+68>>2]=_[t+40>>2],_[r+72>>2]=a,a=_[t+36>>2],_[r+60>>2]=_[t+32>>2],_[r+64>>2]=a,a=_[t+52>>2],_[r+76>>2]=_[t+48>>2],_[r+80>>2]=a,a=_[t+60>>2],_[r+84>>2]=_[t+56>>2],_[r+88>>2]=a,o[_[_[i>>2]+64>>2]](i,r,r+112|0,r+128|0),a=_[i+4>>2]),3==(0|a)&&(_[r+136>>2]=1566444395,_[r+140>>2]=0,_[r+128>>2]=1566444395,_[r+132>>2]=1566444395,_[r+120>>2]=-581039253,_[r+124>>2]=0,_[r+112>>2]=-581039253,_[r+116>>2]=-581039253,_[r+8>>2]=o[_[_[e>>2]+20>>2]](e),_[r+4>>2]=8456,_[r>>2]=8432,e=_[n+12>>2],_[r+20>>2]=_[n+8>>2],_[r+24>>2]=e,e=_[n+4>>2],_[r+12>>2]=_[n>>2],_[r+16>>2]=e,e=_[t+12>>2],_[r+36>>2]=_[t+8>>2],_[r+40>>2]=e,e=_[t+4>>2],_[r+28>>2]=_[t>>2],_[r+32>>2]=e,e=_[t+20>>2],_[r+44>>2]=_[t+16>>2],_[r+48>>2]=e,e=_[t+28>>2],_[r+52>>2]=_[t+24>>2],_[r+56>>2]=e,e=_[t+44>>2],_[r+68>>2]=_[t+40>>2],_[r+72>>2]=e,e=_[t+36>>2],_[r+60>>2]=_[t+32>>2],_[r+64>>2]=e,e=_[t+52>>2],_[r+76>>2]=_[t+48>>2],_[r+80>>2]=e,e=_[t+60>>2],_[r+84>>2]=_[t+56>>2],_[r+88>>2]=e,e=_[i+96>>2],o[_[_[e>>2]+8>>2]](e,4|r,r+112|0,r+128|0))}B=r+144|0},o[32]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0);B=r=B-256|0,_[r+32>>2]=8248,s=_[t+12>>2],_[r+76>>2]=_[t+8>>2],_[r+80>>2]=s,s=_[t+4>>2],_[r+68>>2]=_[t>>2],_[r+72>>2]=s,s=_[i+12>>2],_[r+92>>2]=_[i+8>>2],_[r+96>>2]=s,s=_[i>>2],a=_[i+4>>2],_[r+104>>2]=0,_[r+108>>2]=0,_[r+112>>2]=0,_[r+116>>2]=0,_[r+124>>2]=0,_[r+128>>2]=0,_[r+120>>2]=1065353216,_[r+132>>2]=0,_[r+136>>2]=0,_[r+140>>2]=1065353216,_[r+144>>2]=0,_[r+84>>2]=s,_[r+88>>2]=a,_[r+248>>2]=n,_[r+100>>2]=1065353216,_[r+244>>2]=e,n=_[r+72>>2],_[r+148>>2]=_[r+68>>2],_[r+152>>2]=n,n=_[r+80>>2],_[r+156>>2]=_[r+76>>2],_[r+160>>2]=n,_[r+164>>2]=1065353216,_[r+176>>2]=0,_[r+180>>2]=0,_[r+168>>2]=0,_[r+172>>2]=0,_[r+184>>2]=1065353216,_[r+196>>2]=0,_[r+200>>2]=0,_[r+188>>2]=0,_[r+192>>2]=0,_[r+204>>2]=1065353216,_[r+208>>2]=0,n=_[i+12>>2],_[r+220>>2]=_[i+8>>2],_[r+224>>2]=n,n=_[i+4>>2],_[r+212>>2]=_[i>>2],_[r+216>>2]=n,h=b(y[i>>2]-y[t>>2]),l=b(y[i+4>>2]-y[t+4>>2]),c=b(y[i+8>>2]-y[t+8>>2]),u=b(b(1)/b(w(b(b(b(h*h)+b(l*l))+b(c*c))))),p=(c=b(c*u))==b(0)?b(0xde0b6b000000000):b(b(1)/c),y[r+44>>2]=p,f=(l=b(l*u))==b(0)?b(0xde0b6b000000000):b(b(1)/l),y[r+40>>2]=f,_[r+60>>2]=p<b(0),_[r+56>>2]=f<b(0),h=(u=b(h*u))==b(0)?b(0xde0b6b000000000):b(b(1)/u),y[r+36>>2]=h,_[r+52>>2]=h<b(0),y[r+64>>2]=b(b(u*b(y[r+84>>2]-y[r+68>>2]))+b(l*b(y[r+88>>2]-y[r+72>>2])))+b(c*b(y[r+92>>2]-y[r+76>>2])),e=_[e+68>>2],_[r+24>>2]=0,_[r+28>>2]=0,_[r+16>>2]=0,_[r+20>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,o[_[_[e>>2]+24>>2]](e,t,i,r+32|0,r+16|0,r),B=r+256|0},o[33]=function(e,t,i,n){ue(e|=0,t|=0,i|=0,n|=0)},o[34]=function(e,t){e|=0,!(t|=0)|!(2&_[t+252>>2])?jr(e,t):o[_[_[e>>2]+92>>2]](e,t)},o[35]=function(e){e|=0;var t,i,n=0,r=0,a=0,s=0,l=0,c=0;B=i=B-16|0,o[_[4565]](6465),o[_[_[e>>2]+8>>2]](e),o[_[_[e>>2]+12>>2]](e),t=_[e+24>>2],o[_[4565]](6499),t&&(n=_[e+68>>2],a=t,s=0|o[_[_[n>>2]+36>>2]](n),l=e+28|0,c=_[e+24>>2],r=_[_[t>>2]+32>>2],o[r](0|a,0|s,0|l,0|c)),o[_[4566]](),o[_[4566]](),B=i+16|0},o[36]=function(e,t){var i,n,r;e|=0,o[_[_[(t|=0)>>2]+32>>2]](t),n=0|o[_[_[t>>2]+16>>2]](t,104,1),i=Pi(_[n+8>>2],0,104),_[i+88>>2]=_[e+264>>2],_[i+92>>2]=_[e+268>>2],_[i+96>>2]=_[e+272>>2],_[i+100>>2]=_[e+276>>2],_[i>>2]=_[e+92>>2],_[i+4>>2]=_[e+96>>2],_[i+8>>2]=_[e+100>>2],_[i+12>>2]=_[e+104>>2],_[i+16>>2]=_[e+108>>2],_[i+20>>2]=_[e+116>>2],_[i+24>>2]=_[e+120>>2],_[i+28>>2]=_[e+124>>2],_[i+32>>2]=_[e+128>>2],_[i+36>>2]=_[e+132>>2],_[i+40>>2]=_[e+148>>2],_[i+44>>2]=_[e+152>>2],_[i+48>>2]=_[e+156>>2],_[i+52>>2]=_[e+160>>2],_[i+56>>2]=_[e+176>>2],_[i+60>>2]=_[e+180>>2],_[i+64>>2]=_[e+112>>2],_[i+68>>2]=_[e+164>>2],_[i+72>>2]=_[e+168>>2],_[i+76>>2]=_[e+172>>2],r=_[e+144>>2],_[i+84>>2]=0,_[i+80>>2]=r,o[_[_[t>>2]+20>>2]](t,n,1969,1145853764,i),Na(e,t),function(e,t){var i=0,n=0,r=0,a=0,s=0,l=0,c=0,u=0,h=0;if((0|(n=_[e+8>>2]))>=1)for(;i=_[_[e+16>>2]+(r<<2)>>2],2&d[i+252|0]&&(s=t,l=0|o[_[_[i>>2]+16>>2]](i),c=1,a=_[_[t>>2]+16>>2],n=0|o[a](0|s,0|l,0|c),c=t,l=n,s=0|o[_[_[i>>2]+20>>2]](i,_[n+8>>2],t),u=1497645650,h=i,a=_[_[t>>2]+20>>2],o[a](0|c,0|l,0|s,0|u,0|h),n=_[e+8>>2]),(0|(r=r+1|0))<(0|n););if(_[e+228>>2]>=1)for(r=0;i=_[_[e+236>>2]+(r<<2)>>2],h=t,u=0|o[_[_[i>>2]+36>>2]](i),s=1,a=_[_[t>>2]+16>>2],n=0|o[a](0|h,0|u,0|s),s=t,u=n,h=0|o[_[_[i>>2]+40>>2]](i,_[n+8>>2],t),l=1397641027,c=i,a=_[_[t>>2]+20>>2],o[a](0|s,0|u,0|h,0|l,0|c),(0|(r=r+1|0))<_[e+228>>2];);}(e,t),o[_[_[t>>2]+36>>2]](t)},o[37]=function(e,t,i,n){e|=0,t=b(t),i|=0,n=b(n);var r=0,s=0,l=b(0);O(_[5005],0);e:if(i){if(y[e+284>>2]=n,t=b(y[e+280>>2]+t),y[e+280>>2]=t,!(t>=n))break e;r=e,l=t,t=b(t/n),s=b(x(t))<b(2147483648)?~~t:-2147483648,y[r+280>>2]=l-b(b(0|s)*n)}else _[e+284>>2]=0,y[e+280>>2]=d[e+316|0]?b(0):t,n=t,i=s=b(x(t))<b(1.1920928955078125e-7)^1;o[_[_[e>>2]+20>>2]](e)&&(r=0|o[_[_[e>>2]+20>>2]](e),a[18904]=o[_[_[r>>2]+56>>2]](r)>>>4&1);e:if(s){if(r=(0|s)>(0|i)?i:s,o[_[_[e>>2]+168>>2]](e,b(n*b(0|r))),o[_[_[e>>2]+176>>2]](e),(0|r)<1)break e;for(i=0;o[_[_[e>>2]+160>>2]](e,n),o[_[_[e>>2]+80>>2]](e),(0|(i=i+1|0))<(0|r););}else o[_[_[e>>2]+80>>2]](e);return o[_[_[e>>2]+120>>2]](e),_[5584]=_[5584]+1,0|s},o[38]=function(e,t,i){t|=0,i|=0;var n=0,r=0,s=0,l=0,c=0;if((0|(n=_[228+(e|=0)>>2]))==_[e+232>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){if(s&&(_[5585]=_[5585]+1,l=0|o[_[4567]](s<<2,16),n=_[e+228>>2]),(0|n)>=1)for(;_[(c=r<<2)+l>>2]=_[_[e+236>>2]+c>>2],(0|(r=r+1|0))!=(0|n););(r=_[e+236>>2])&&(d[e+240|0]&&(r&&(_[5586]=_[5586]+1,o[_[4568]](r)),n=_[e+228>>2]),_[e+236>>2]=0),_[e+236>>2]=l,_[e+232>>2]=s,a[e+240|0]=1}_[_[e+236>>2]+(n<<2)>>2]=t,_[e+228>>2]=n+1,i&&(st(_[t+28>>2],t),st(_[t+32>>2],t))},o[39]=function(e,t){t|=0;var i=0,n=0,r=0,o=0;e:if(!((0|(i=_[228+(e|=0)>>2]))<1)){for(r=_[e+236>>2];;){if(_[(o=(n<<2)+r|0)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}(0|i)<=(0|n)||(n=(i=i+-1|0)<<2,_[o>>2]=_[n+r>>2],_[n+_[e+236>>2]>>2]=t,_[e+228>>2]=i)}ot(_[t+28>>2],t),ot(_[t+32>>2],t)},o[40]=function(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0;if((0|(i=_[296+(e|=0)>>2]))==_[e+300>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),i=_[e+296>>2]),(0|i)>=1)for(;_[(l=n<<2)+s>>2]=_[_[e+304>>2]+l>>2],(0|(n=n+1|0))!=(0|i););(n=_[e+304>>2])&&(d[e+308|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),i=_[e+296>>2]),_[e+304>>2]=0),_[e+304>>2]=s,_[e+300>>2]=r,a[e+308|0]=1}_[_[e+304>>2]+(i<<2)>>2]=t,_[e+296>>2]=i+1},o[41]=function(e,t){t|=0;var i=0,n=0,r=0,o=0;e:if(!((0|(i=_[296+(e|=0)>>2]))<1)){for(r=_[e+304>>2];;){if(_[(o=(n<<2)+r|0)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}(0|i)<=(0|n)||(n=(i=i+-1|0)<<2,_[o>>2]=_[n+r>>2],_[n+_[e+304>>2]>>2]=t,_[e+296>>2]=i)}},o[42]=function(e,t){e|=0;var i=0,n=0,r=0,o=0;if(n=_[4+(i=t|=0)>>2],_[e+264>>2]=_[i>>2],_[e+268>>2]=n,n=_[i+12>>2],_[e+272>>2]=_[i+8>>2],_[e+276>>2]=n,(0|(i=_[e+248>>2]))>=1)for(;;){e:{t:if(n=_[_[e+256>>2]+(r<<2)>>2],!((o=_[n+220>>2]+-2|0)>>>0>3))switch(o-1|0){case 0:case 1:break t;default:break e}1&a[n+564|0]||(dr(n,t),i=_[e+248>>2])}if(!((0|(r=r+1|0))<(0|i)))break}},o[43]=function(e,t){e|=0;var i=0;i=_[268+(t|=0)>>2],_[e>>2]=_[t+264>>2],_[e+4>>2]=i,i=_[t+276>>2],_[e+8>>2]=_[t+272>>2],_[e+12>>2]=i},o[44]=function(e){e|=0;var t,i=0,n=0,r=b(0),a=0,s=0;B=t=B+-64|0;e:if(d[e+290|0]){if((0|(n=_[e+8>>2]))<1)break e;for(;!(i=_[_[e+16>>2]+(a<<2)>>2])|!(2&_[i+252>>2])|!_[i+540>>2]|3&d[i+204|0]||(Tn(n=i+68|0,s=i+132|0,i+148|0,r=d[e+316|0]&&(r=y[e+284>>2])!=b(0)?b(y[e+280>>2]-r):b(y[e+280>>2]*y[i+268>>2]),t),i=_[i+540>>2],o[_[_[i>>2]+12>>2]](i,t),n=_[e+8>>2]),(0|(a=a+1|0))<(0|n););}else if(!((0|(n=_[e+248>>2]))<1))for(;;){t:{i:if(i=_[_[e+256>>2]+(a<<2)>>2],!((s=_[i+220>>2]+-2|0)>>>0>3))switch(s-1|0){case 0:case 1:break i;default:break t}!_[i+540>>2]|3&d[i+204|0]||(Tn(n=i+68|0,s=i+132|0,i+148|0,r=d[e+316|0]&&(r=y[e+284>>2])!=b(0)?b(y[e+280>>2]-r):b(y[e+280>>2]*y[i+268>>2]),t),i=_[i+540>>2],o[_[_[i>>2]+12>>2]](i,t),n=_[e+248>>2])}if(!((0|(a=a+1|0))<(0|n)))break}B=t- -64|0},o[45]=function(e,t){e|=0;var i=0,n=0,r=0,s=0,l=0;if(3&d[204+(t|=0)|0]|1&a[t+564|0]||dr(t,e+264|0),_[t+192>>2]){if(1&a[t+204|0])4!=(-2&_[t+220>>2])&&(_[t+220>>2]=2);else{if((0|(i=_[e+248>>2]))==_[e+252>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),i=_[e+248>>2]),(0|i)>=1)for(;_[(l=n<<2)+s>>2]=_[_[e+256>>2]+l>>2],(0|(n=n+1|0))!=(0|i););(n=_[e+256>>2])&&(d[e+260|0]&&(n&&(_[5586]=_[5586]+1,o[_[4568]](n)),i=_[e+248>>2]),_[e+256>>2]=0),_[e+256>>2]=s,_[e+252>>2]=r,a[e+260|0]=1}_[_[e+256>>2]+(i<<2)>>2]=t,_[e+248>>2]=i+1}i=t,t=3&_[t+204>>2],o[_[_[e>>2]+36>>2]](e,i,t?2:1,t?-3:-1)}},o[46]=function(e,t,i,n){e|=0,i|=0,n|=0;var r=0,s=0,l=0,c=0,u=0;if(3&d[204+(t|=0)|0]|1&a[t+564|0]||dr(t,e+264|0),_[t+192>>2]){if(1&a[t+204|0])4!=(-2&_[t+220>>2])&&(_[t+220>>2]=2);else{if((0|(r=_[e+248>>2]))==_[e+252>>2]&&!((0|r)>=(0|(l=r?r<<1:1)))){if(l&&(_[5585]=_[5585]+1,c=0|o[_[4567]](l<<2,16),r=_[e+248>>2]),(0|r)>=1)for(;_[(u=s<<2)+c>>2]=_[_[e+256>>2]+u>>2],(0|(s=s+1|0))!=(0|r););(s=_[e+256>>2])&&(d[e+260|0]&&(s&&(_[5586]=_[5586]+1,o[_[4568]](s)),r=_[e+248>>2]),_[e+256>>2]=0),_[e+256>>2]=c,_[e+252>>2]=l,a[e+260|0]=1}_[_[e+256>>2]+(r<<2)>>2]=t,_[e+248>>2]=r+1}o[_[_[e>>2]+36>>2]](e,t,i,n)}},o[47]=function(e,t){t|=0;var i=0,n=0,r=0,o=0;e:if(!((0|(i=_[248+(e|=0)>>2]))<1)){for(r=_[e+256>>2];;){if(_[(o=(n<<2)+r|0)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}(0|i)<=(0|n)||(n=(i=i+-1|0)<<2,_[o>>2]=_[n+r>>2],_[n+_[e+256>>2]>>2]=t,_[e+248>>2]=i)}jr(e,t)},o[48]=function(e,t){t|=0;var i=0;d[289+(e|=0)|0]&&(i=_[e+216>>2])&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+216>>2]=t,a[e+289|0]=0,_[_[e+212>>2]+8>>2]=t},o[49]=function(e){return _[216+(e|=0)>>2]},o[50]=function(e){return _[228+(e|=0)>>2]},o[51]=Je,o[52]=Je,o[53]=Ke,o[54]=function(e){var t=0,i=0;if(_[248+(e|=0)>>2]>=1)for(;t=_[_[e+256>>2]+(i<<2)>>2],_[t+472>>2]=0,_[t+476>>2]=0,_[t+496>>2]=0,_[t+500>>2]=0,_[t+488>>2]=0,_[t+492>>2]=0,_[t+480>>2]=0,_[t+484>>2]=0,(0|(i=i+1|0))<_[e+248>>2];);},o[55]=nt,o[56]=it,o[57]=nt,o[58]=it,o[59]=function(e,t){e|=0,t=b(t);var i,n=0,r=0,a=0;if(B=i=B-16|0,o[_[4565]](1943),(0|(r=_[e+248>>2]))>=1)for(;n=_[_[e+256>>2]+(a<<2)>>2],3&d[n+204|0]||(Q(n,t),vr(n,t,n+68|0),r=_[e+248>>2]),(0|(a=a+1|0))<(0|r););o[_[4566]](),B=i+16|0},o[60]=function(e,t){e|=0,t=b(t);var i,n=0,r=b(0),a=0,s=0,l=0,c=b(0),u=b(0),h=b(0),p=0,f=0,m=b(0),v=b(0),g=b(0),x=b(0);if(B=i=B-80|0,o[_[4565]](1885),(0|(n=_[e+248>>2]))>=1&&function(e,t,i,n){var r,a=0,s=0,l=b(0),c=0,u=0,h=0,p=0,f=b(0),m=0,v=b(0);if(B=r=B-304|0,(0|i)>=1)for(;;){s=_[(p<<2)+t>>2],m=s,_[s+268>>2]=1065353216;e:{t:if(!((u=_[s+220>>2]+-2|0)>>>0>3))switch(u-1|0){case 0:case 1:break t;default:break e}3&d[s+204|0]||(vr(s,n,r+240|0),d[e+44|0]&&(l=y[s+276>>2],(l=b(l*l))!=b(0)&&(v=l,l=b(y[r+288>>2]-y[s+52>>2]),f=b(l*l),l=b(y[r+292>>2]-y[s+56>>2]),f=b(f+b(l*l)),l=b(y[r+296>>2]-y[s+60>>2]),v<b(f+b(l*l))&&(o[_[4565]](1865),_[_[s+192>>2]+4>>2]<=19&&(u=0,_[4728]=_[4728]+1,a=_[e+68>>2],a=0|o[_[_[a>>2]+36>>2]](a),h=_[e+24>>2],_[r+140>>2]=-1,_[r+132>>2]=1065353216,_[r+136>>2]=1,_[r+128>>2]=2376,c=_[s+64>>2],_[r+152>>2]=_[s+60>>2],_[r+156>>2]=c,c=_[s+56>>2],_[r+144>>2]=_[s+52>>2],_[r+148>>2]=c,c=_[r+300>>2],_[r+168>>2]=_[r+296>>2],_[r+172>>2]=c,c=_[r+292>>2],_[r+160>>2]=_[r+288>>2],_[r+164>>2]=c,_[r+224>>2]=h,_[r+220>>2]=a,_[r+216>>2]=0,_[r+128>>2]=2188,_[r+208>>2]=0,_[r+212>>2]=s,a=_[s+272>>2],nn(r+72|0),_[r+96>>2]=1065353216,_[r+88>>2]=1065353216,_[r+92>>2]=1065353216,_[r+76>>2]=8,_[r+72>>2]=9868,_[r+108>>2]=0,_[r+112>>2]=0,_[r+116>>2]=0,_[r+100>>2]=0,_[r+104>>2]=0,_[r+124>>2]=0,_[r+120>>2]=a,_[r+104>>2]=a,_[r+216>>2]=_[e+56>>2],a=_[s+188>>2],_[r+136>>2]=_[a+4>>2],_[r+140>>2]=_[a+8>>2],a=_[r+252>>2],_[r+16>>2]=_[r+248>>2],_[r+20>>2]=a,a=_[r+244>>2],_[r+8>>2]=_[r+240>>2],_[r+12>>2]=a,a=_[r+268>>2],_[r+32>>2]=_[r+264>>2],_[r+36>>2]=a,a=_[r+260>>2],_[r+24>>2]=_[r+256>>2],_[r+28>>2]=a,a=_[r+284>>2],_[r+48>>2]=_[r+280>>2],_[r+52>>2]=a,a=_[r+276>>2],_[r+40>>2]=_[r+272>>2],_[r+44>>2]=a,a=_[r+300>>2],_[r+64>>2]=_[r+296>>2],_[r+68>>2]=a,a=_[r+292>>2],_[r+56>>2]=_[r+288>>2],_[r+60>>2]=a,c=_[12+(a=h=s+4|0)>>2],_[r+16>>2]=_[a+8>>2],_[r+20>>2]=c,c=_[a+4>>2],_[r+8>>2]=_[a>>2],_[r+12>>2]=c,a=_[s+32>>2],_[r+32>>2]=_[s+28>>2],_[r+36>>2]=a,a=_[s+24>>2],_[r+24>>2]=_[s+20>>2],_[r+28>>2]=a,a=_[s+48>>2],_[r+48>>2]=_[s+44>>2],_[r+52>>2]=a,a=_[s+40>>2],_[r+40>>2]=_[s+36>>2],_[r+44>>2]=a,za(e,r+72|0,h,r+8|0,r+128|0),(l=y[r+132>>2])<b(1)&&(y[m+268>>2]=l,vr(s,b(l*n),r+240|0),_[m+268>>2]=0,lt(s,r+240|0),u=4),u)||(u=0),o[_[4566]](),u)))||lt(s,r+240|0))}if((0|(p=p+1|0))==(0|i))break}B=r+304|0}(e,_[e+256>>2],n,t),d[e+291|0]){if(o[_[4565]](1905),(0|(n=_[e+324>>2]))>=1)for(;;){if(s=_[_[e+332>>2]+(f<<2)>>2],_[s+844>>2]>=1){for(n=_[s+840>>2],l=_[n+252>>2]<<30>>31&n,n=_[s+836>>2],a=_[n+252>>2]<<30>>31&n,p=0;(t=b(y[a+232>>2]*y[l+232>>2]))>b(0)&&(n=A(p,208)+s|0,(r=y[n+136>>2])!=b(0)&&(c=y[n+68>>2],u=y[n+72>>2],h=y[n+76>>2],_[i+60>>2]=0,h=b(t*b(r*b(-h))),y[i+56>>2]=h,u=b(t*b(r*b(-u))),y[i+52>>2]=u,t=b(t*b(r*b(-c))),y[i+48>>2]=t,r=y[a+52>>2],c=y[n+52>>2],m=y[a+56>>2],v=y[n+56>>2],g=y[a+60>>2],x=y[n+60>>2],_[i+44>>2]=0,y[i+40>>2]=x-g,y[i+36>>2]=v-m,y[i+32>>2]=c-r,r=y[l+52>>2],c=y[n+36>>2],m=y[l+56>>2],v=y[n+40>>2],g=y[l+60>>2],x=y[n+44>>2],_[i+28>>2]=0,y[i+24>>2]=x-g,y[i+20>>2]=v-m,y[i+16>>2]=c-r,a&&(fo(a,i+48|0,i+32|0),h=y[i+56>>2],u=y[i+52>>2],t=y[i+48>>2]),_[i+12>>2]=0,y[i+8>>2]=-h,y[i+4>>2]=-u,y[i>>2]=-t,fo(l,i,i+16|0))),(0|(p=p+1|0))<_[s+844>>2];);n=_[e+324>>2]}if(!((0|(f=f+1|0))<(0|n)))break}o[_[4566]]()}o[_[4566]](),B=i+80|0},o[61]=function(e){e|=0;var t,i=0,n=0,r=0,a=0,s=0,l=0,c=0,u=0;if(B=t=B-16|0,o[_[4565]](1749),i=_[e+220>>2],o[_[_[i>>2]+8>>2]](i,e,_[e+24>>2]),(0|(c=_[e+324>>2]))>=1)for(u=_[e+332>>2];;){if(i=_[u+(l<<2)>>2],(n=_[i+836>>2])&&!(!(i=_[i+840>>2])|3&_[n+204>>2]|3&d[i+204|0])){if(i=_[i+208>>2],r=_[_[e+220>>2]+16>>2],a=_[n+208>>2],(0|(n=_[(s=r+(a<<3)|0)>>2]))!=(0|a))for(;n=r+(n<<3)|0,_[s>>2]=_[n>>2],a=_[n>>2],(0|(n=_[(s=r+(a<<3)|0)>>2]))!=(0|a););if((0|(n=_[(s=r+(i<<3)|0)>>2]))!=(0|i))for(;i=r+(n<<3)|0,_[s>>2]=_[i>>2],(0|(i=_[i>>2]))!=(0|(n=_[(s=r+(i<<3)|0)>>2])););(0|i)!=(0|a)&&(_[(n=r+(a<<3)|0)>>2]=i,_[4+(i=r+(i<<3)|0)>>2]=_[i+4>>2]+_[n+4>>2])}if(!((0|(l=l+1|0))<(0|c)))break}if((0|(c=_[e+228>>2]))>=1)for(u=_[e+236>>2],s=0;;){if(i=_[u+(s<<2)>>2],d[i+20|0]&&(n=_[i+28>>2],!(3&d[n+204|0]||(i=_[i+32>>2],3&d[i+204|0])))){if(i=_[i+208>>2],r=_[_[e+220>>2]+16>>2],a=_[n+208>>2],(0|(l=_[(n=r+(a<<3)|0)>>2]))!=(0|a))for(;a=n,n=r+(l<<3)|0,_[a>>2]=_[n>>2],a=_[n>>2],(0|(l=_[(n=r+(a<<3)|0)>>2]))!=(0|a););if((0|(l=_[(n=r+(i<<3)|0)>>2]))!=(0|i))for(;i=r+(l<<3)|0,_[n>>2]=_[i>>2],(0|(i=_[i>>2]))!=(0|(l=_[(n=r+(i<<3)|0)>>2])););(0|i)!=(0|a)&&(_[(n=r+(a<<3)|0)>>2]=i,_[4+(i=r+(i<<3)|0)>>2]=_[i+4>>2]+_[n+4>>2])}if((0|c)==(0|(s=s+1|0)))break}i=_[e+220>>2],o[_[_[i>>2]+12>>2]](i,e),o[_[4566]](),B=t+16|0},o[62]=function(e,t){e|=0,t|=0;var i,n,r,s,l,c=0,u=0,h=0,p=0,f=0,m=0;if(B=i=B-16|0,o[_[4565]](1732),(0|(u=_[e+196>>2]))<(0|(h=_[e+228>>2]))){if(_[e+200>>2]<(0|h)){if(h?(_[5585]=_[5585]+1,f=0|o[_[4567]](h<<2,16),c=_[e+196>>2]):c=u,(0|c)>=1)for(;_[(m=p<<2)+f>>2]=_[_[e+204>>2]+m>>2],(0|c)!=(0|(p=p+1|0)););(c=_[e+204>>2])&&(d[e+208|0]&&c&&(_[5586]=_[5586]+1,o[_[4568]](c)),_[e+204>>2]=0),_[e+204>>2]=f,_[e+200>>2]=h,a[e+208|0]=1}for(;_[_[e+204>>2]+(u<<2)>>2]=0,(0|h)!=(0|(u=u+1|0)););}for(c=e+192|0,_[e+196>>2]=h,u=0;(0|u)<(0|o[_[_[e>>2]+104>>2]](e));)_[(h=u<<2)+_[e+204>>2]>>2]=_[h+_[e+236>>2]>>2],u=u+1|0;(0|(u=_[e+196>>2]))>=2&&function e(t,i,n,r){for(var o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,g=0;;){for(f=n,s=_[t+12>>2],u=_[s+((n+r|0)/2<<2)>>2],l=r,c=n;;){for(d=_[_[u+28>>2]+208>>2];h=_[(m=((n=c)<<2)+s|0)>>2],(v=(0|(a=d))>-1)||(a=_[_[u+32>>2]+208>>2]),c=n+1|0,(0|(o=_[_[h+28>>2]+208>>2]))<=-1&&(o=_[_[h+32>>2]+208>>2]),(0|o)<(0|a););for(;p=_[(y=(o=l)<<2)+s>>2],(0|(a=_[_[p+28>>2]+208>>2]))<=-1&&(a=_[_[p+32>>2]+208>>2]),g=d,l=o+-1|0,v||(g=_[_[u+32>>2]+208>>2]),(0|g)<(0|a););if((0|n)<=(0|o)&&(_[m>>2]=p,_[_[t+12>>2]+y>>2]=h,o=l,n=c),!((0|n)<=(0|o)))break;s=_[t+12>>2],l=o,c=n}if((0|o)>(0|f)&&e(t,i,f,o),!((0|n)<(0|r)))break}}(c,i,0,u+-1|0),c=0,o[_[_[e>>2]+104>>2]](e)&&(c=_[e+204>>2]),function(e,t,i,n,r){if(_[e+20>>2]=r,_[e+16>>2]=n,_[e+12>>2]=i,_[e+4>>2]=t,(0|(t=_[e+32>>2]))<=-1)for(_[e+36>>2]<=-1&&((i=_[e+40>>2])&&(d[e+44|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+40>>2]=0),_[e+36>>2]=0,_[e+40>>2]=0,a[e+44|0]=1);_[_[e+40>>2]+(t<<2)>>2]=0,n=(i=t+1|0)>>>0>=t>>>0,t=i,n;);if(_[e+32>>2]=0,(0|(t=_[e+52>>2]))<=-1)for(_[e+56>>2]<=-1&&((i=_[e+60>>2])&&(d[e- -64|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+60>>2]=0),_[e+56>>2]=0,_[e+60>>2]=0,a[e- -64|0]=1);_[_[e+60>>2]+(t<<2)>>2]=0,n=(i=t+1|0)>>>0>=t>>>0,t=i,n;);if(_[e+52>>2]=0,(0|(t=_[e+72>>2]))<=-1)for(_[e+76>>2]<=-1&&((i=_[e+80>>2])&&(d[e+84|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+80>>2]=0),_[e+76>>2]=0,_[e+80>>2]=0,a[e+84|0]=1);_[_[e+80>>2]+(t<<2)>>2]=0,n=(i=t+1|0)>>>0>=t>>>0,t=i,n;);_[e+72>>2]=0}(_[e+212>>2],t,c,_[e+196>>2],0|o[_[_[e>>2]+20>>2]](e)),c=_[e+216>>2],u=_[e+24>>2],r=c,s=_[e+8>>2],l=0|o[_[_[u>>2]+36>>2]](u),n=_[_[c>>2]+8>>2],o[n](0|r,0|s,0|l),function(e,t,i,n){var r,s,l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0,y=0,g=0,A=0;if(B=s=B-16|0,L(e,t,i),r=_[e+8>>2],o[_[4565]](4760),d[e+64|0]){if((0|(y=_[e+28>>2]))>=2&&function e(t,i,n,r){for(var o=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=0,y=0,g=0;;){for(f=n,s=_[t+12>>2],u=_[s+((n+r|0)/2<<2)>>2],l=r,c=n;;){for(d=_[_[u+836>>2]+208>>2];h=_[(m=((n=c)<<2)+s|0)>>2],(0|(o=_[_[h+836>>2]+208>>2]))<=-1&&(o=_[_[h+840>>2]+208>>2]),c=n+1|0,a=o,(v=(0|(o=d))>-1)||(o=_[_[u+840>>2]+208>>2]),(0|a)<(0|o););for(;p=_[(y=(o=l)<<2)+s>>2],a=d,l=o+-1|0,v||(a=_[_[u+840>>2]+208>>2]),g=a,(0|(a=_[_[p+836>>2]+208>>2]))<=-1&&(a=_[_[p+840>>2]+208>>2]),(0|g)<(0|a););if((0|n)<=(0|o)&&(_[m>>2]=p,_[_[t+12>>2]+y>>2]=h,o=l,n=c),!((0|n)<=(0|o)))break;s=_[t+12>>2],l=o,c=n}if((0|o)>(0|f)&&e(t,i,f,o),!((0|n)<(0|r)))break}}(e+24|0,s,0,y+-1|0),!((0|r)<1))for(f=1;;){t=_[e+16>>2],g=_[t+(u<<3)>>2],A=1;e:if(!((0|u)>=(0|r)))for(;;){if(h=_[_[i+16>>2]+(_[4+((u<<3)+t|0)>>2]<<2)>>2],(0|(c=_[e+48>>2]))==_[e+52>>2]&&!((0|c)>=(0|(l=c?c<<1:1)))){if(t=0,p=0,l&&(_[5585]=_[5585]+1,p=0|o[_[4567]](l<<2,16),c=_[e+48>>2]),(0|c)>=1)for(;_[(m=t<<2)+p>>2]=_[_[e+56>>2]+m>>2],(0|c)!=(0|(t=t+1|0)););(t=_[e+56>>2])&&(d[e+60|0]&&(t&&(_[5586]=_[5586]+1,o[_[4568]](t)),c=_[e+48>>2]),_[e+56>>2]=0),_[e+56>>2]=p,a[e+60|0]=1,_[e+52>>2]=l}if(_[_[e+56>>2]+(c<<2)>>2]=h,_[e+48>>2]=c+1,t=_[h+220>>2],A&=5==(0|t)|2==(0|t),(0|r)==(0|(u=u+1|0))){u=r;break e}if(t=_[e+16>>2],(0|g)!=_[t+(u<<3)>>2])break}if(p=0,l=0,!((0|v)>=(0|y))&&(m=_[e+36>>2],t=_[(h=m+(v<<2)|0)>>2],(0|(c=_[_[t+836>>2]+208>>2]))<=-1&&(c=_[_[t+840>>2]+208>>2]),t=v,l=0,(0|c)==(0|g))){for(;(0|(t=t+1|0))<(0|y)&&(f=_[m+(t<<2)>>2],(0|(l=_[_[f+836>>2]+208>>2]))<=-1&&(l=_[_[f+840>>2]+208>>2]),(0|l)==(0|g)););p=t-v|0,f=t,l=h}if(A||o[_[_[n>>2]+8>>2]](n,_[e+56>>2],_[e+48>>2],l,p,g),(0|(t=_[e+48>>2]))<=-1)for(_[e+52>>2]<=-1&&((l=_[e+56>>2])&&(d[e+60|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[e+56>>2]=0),a[e+60|0]=1,_[e+52>>2]=0,_[e+56>>2]=0);_[_[e+56>>2]+(t<<2)>>2]=0,h=(l=t+1|0)>>>0>=t>>>0,t=l,h;);if(v=p?f:v,_[e+48>>2]=0,!((0|u)<(0|r)))break}}else e=0|o[_[_[t>>2]+44>>2]](t),t=0|o[_[_[t>>2]+36>>2]](t),o[_[_[n>>2]+8>>2]](n,_[i+16>>2],_[i+8>>2],e,t,-1);o[_[4566]](),B=s+16|0}(_[e+220>>2],_[e+24>>2],e,_[e+212>>2]),et(_[e+212>>2]),c=_[e+216>>2],o[_[_[c>>2]+16>>2]](c,t,_[e+72>>2]),o[_[4566]](),B=i+16|0},o[63]=function(e,t){e|=0,t=b(t);var i,n=0,r=b(0),a=b(0),s=0,l=0,c=0;if(B=i=B-16|0,o[_[4565]](1710),_[e+248>>2]>=1)for(;;){e:if(n=_[_[e+256>>2]+(l<<2)>>2]){t:{if(!((c=(s=_[n+220>>2])+-2|0)-1|0&&c>>>0<=2)){if(r=y[n+372>>2],a=b(r*r),r=y[n+376>>2],a=b(a+b(r*r)),r=y[n+380>>2],a=b(a+b(r*r)),r=y[n+532>>2],a<b(r*r)&&(r=y[n+388>>2],a=b(r*r),r=y[n+392>>2],a=b(a+b(r*r)),r=y[n+396>>2],a=b(a+b(r*r)),r=y[n+536>>2],a<b(r*r))){y[n+224>>2]=y[n+224>>2]+t;break t}_[n+224>>2]=0,4!=(-2&_[n+220>>2])&&(_[n+220>>2]=0),s=_[n+220>>2]}if(4==(0|s))break e}if(d[18904]||(r=y[4560])==b(0)|(y[n+224>>2]>r^1?2!=(-2&s):0))4!=(-2&_[n+220>>2])&&(_[n+220>>2]=1);else{if(3&d[n+204|0]){4!=(-2&_[n+220>>2])&&(_[n+220>>2]=2);break e}if(1==(0|s)&&(4!=(-2&_[n+220>>2])&&(_[n+220>>2]=3),s=_[n+220>>2]),2!=(0|s))break e;_[n+388>>2]=0,_[n+392>>2]=0,_[n+372>>2]=0,_[n+376>>2]=0,_[n+396>>2]=0,_[n+400>>2]=0,_[n+380>>2]=0,_[n+384>>2]=0,_[n+304>>2]=_[n+304>>2]+2}}if(!((0|(l=l+1|0))<_[e+248>>2]))break}o[_[4566]](),B=i+16|0},o[64]=function(e,t){e|=0,t=b(t);var i,n=0,r=0;if(B=i=B-16|0,o[_[4565]](1667),(n=_[e+84>>2])&&o[n](e,t),o[_[_[e>>2]+140>>2]](e,t),n=0,_[e+32>>2]=0,y[e+28>>2]=t,_[e+48>>2]=o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+164>>2]](e,t),o[_[_[e>>2]+44>>2]](e),o[_[_[e>>2]+148>>2]](e),y[e+104>>2]=t,o[_[_[e>>2]+152>>2]](e,e+92|0),o[_[_[e>>2]+144>>2]](e,t),o[_[4565]](1696),_[e+296>>2]>=1)for(;r=_[_[e+304>>2]+(n<<2)>>2],o[_[_[r>>2]+8>>2]](r,e,t),(0|(n=n+1|0))<_[e+296>>2];);o[_[4566]](),o[_[_[e>>2]+156>>2]](e,t),(n=_[e+80>>2])&&o[n](e,t),o[_[4566]](),B=i+16|0},o[65]=function(e,t){var i,n;e|=0,t=b(t),B=i=B-16|0,o[_[4565]](1840),function(e){var t,i=0,n=0,r=0;if(B=t=B-16|0,o[_[4565]](1803),i=_[e+332>>2],_[e+324>>2]>=1)for(;r=_[e+24>>2],o[_[_[r>>2]+16>>2]](r,_[(n<<2)+i>>2]),i=_[e+332>>2],(0|(n=n+1|0))<_[e+324>>2];);i&&(d[e+336|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+332>>2]=0),_[e+332>>2]=0,_[e+324>>2]=0,_[e+328>>2]=0,a[e+336|0]=1,o[_[4566]](),B=t+16|0}(e),(0|(n=_[e+248>>2]))>=1&&function(e,t,i,n){var r,s=0,l=0,c=b(0),u=0,h=b(0),p=0,f=b(0),m=b(0),v=b(0),g=0,x=b(0),T=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=0,I=0,M=b(0),P=0,D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0);if(B=r=B-512|0,(0|i)>=1)for(;;){l=_[(F<<2)+t>>2],_[l+268>>2]=1065353216;e:{t:if(!((s=_[l+220>>2]+-2|0)>>>0>3))switch(s-1|0){case 0:case 1:break t;default:break e}if(!(3&d[l+204|0])&&(vr(l,n,r+448|0),d[e+44|0]&&(c=y[l+276>>2],(c=b(c*c))!=b(0)&&(f=c,c=b(y[r+496>>2]-y[l+52>>2]),h=b(c*c),c=b(y[r+500>>2]-y[l+56>>2]),h=b(h+b(c*c)),c=b(y[r+504>>2]-y[l+60>>2]),f<b(h+b(c*c)))))){if(o[_[4565]](1776),_[_[l+192>>2]+4>>2]<=19&&(_[4728]=_[4728]+1,s=_[e+68>>2],s=0|o[_[_[s>>2]+36>>2]](s),u=_[e+24>>2],_[r+348>>2]=-1,_[r+340>>2]=1065353216,_[r+344>>2]=1,_[r+336>>2]=2376,p=_[l+64>>2],_[r+360>>2]=_[l+60>>2],_[r+364>>2]=p,p=_[l+56>>2],_[r+352>>2]=_[l+52>>2],_[r+356>>2]=p,p=_[r+508>>2],_[r+376>>2]=_[r+504>>2],_[r+380>>2]=p,p=_[r+500>>2],_[r+368>>2]=_[r+496>>2],_[r+372>>2]=p,_[r+432>>2]=u,_[r+428>>2]=s,_[r+424>>2]=0,_[r+336>>2]=2188,_[r+416>>2]=0,_[r+420>>2]=l,s=_[l+272>>2],nn(r+280|0),_[r+304>>2]=1065353216,_[r+296>>2]=1065353216,_[r+300>>2]=1065353216,_[r+284>>2]=8,_[r+280>>2]=9868,_[r+316>>2]=0,_[r+320>>2]=0,_[r+324>>2]=0,_[r+308>>2]=0,_[r+312>>2]=0,_[r+332>>2]=0,_[r+328>>2]=s,_[r+312>>2]=s,_[r+424>>2]=_[e+56>>2],s=_[l+188>>2],_[r+344>>2]=_[s+4>>2],_[r+348>>2]=_[s+8>>2],s=_[r+460>>2],_[r+224>>2]=_[r+456>>2],_[r+228>>2]=s,s=_[r+452>>2],_[r+216>>2]=_[r+448>>2],_[r+220>>2]=s,s=_[r+476>>2],_[r+240>>2]=_[r+472>>2],_[r+244>>2]=s,s=_[r+468>>2],_[r+232>>2]=_[r+464>>2],_[r+236>>2]=s,s=_[r+492>>2],_[r+256>>2]=_[r+488>>2],_[r+260>>2]=s,s=_[r+484>>2],_[r+248>>2]=_[r+480>>2],_[r+252>>2]=s,s=_[r+508>>2],_[r+272>>2]=_[r+504>>2],_[r+276>>2]=s,s=_[r+500>>2],_[r+264>>2]=_[r+496>>2],_[r+268>>2]=s,u=_[12+(s=l+4|0)>>2],_[r+224>>2]=_[s+8>>2],_[r+228>>2]=u,u=_[s+4>>2],_[r+216>>2]=_[s>>2],_[r+220>>2]=u,u=_[l+32>>2],_[r+240>>2]=_[l+28>>2],_[r+244>>2]=u,u=_[l+24>>2],_[r+232>>2]=_[l+20>>2],_[r+236>>2]=u,u=_[l+48>>2],_[r+256>>2]=_[l+44>>2],_[r+260>>2]=u,u=_[l+40>>2],_[r+248>>2]=_[l+36>>2],_[r+252>>2]=u,za(e,r+280|0,s,r+216|0,r+336|0),(c=y[r+340>>2])<b(1))){if(x=y[l+60>>2],m=y[l+56>>2],v=y[l+52>>2],f=y[r+392>>2],T=y[r+504>>2],C=y[r+388>>2],w=y[r+500>>2],k=y[r+384>>2],O=y[r+496>>2],s=_[e+24>>2],u=0|o[_[_[s>>2]+12>>2]](s,l,_[r+416>>2]),R=b(c*b(w-m)),m=b(c*b(O-v)),h=f,f=b(c*b(T-x)),z=b(b(b(R*b(-C))-b(k*m))-b(h*f)),(0|(s=_[e+324>>2]))==_[e+328>>2]&&!((0|s)>=(0|(p=s?s<<1:1)))){if(g=0,I=0,p&&(_[5585]=_[5585]+1,I=0|o[_[4567]](p<<2,16),s=_[e+324>>2]),(0|s)>=1)for(;_[(P=g<<2)+I>>2]=_[_[e+332>>2]+P>>2],(0|s)!=(0|(g=g+1|0)););(g=_[e+332>>2])&&(d[e+336|0]&&(g&&(_[5586]=_[5586]+1,o[_[4568]](g)),s=_[e+324>>2]),_[e+332>>2]=0),_[e+332>>2]=I,a[e+336|0]=1,_[e+328>>2]=p}_[_[e+332>>2]+(s<<2)>>2]=u,_[e+324>>2]=s+1,s=_[r+416>>2],T=y[s+20>>2],C=y[s+36>>2],w=y[s+40>>2],k=y[s+8>>2],O=y[s+24>>2],c=y[s+60>>2],G=y[s+56>>2],x=y[s+52>>2],D=y[s+44>>2],M=y[l+60>>2],N=y[s+12>>2],v=y[l+52>>2],h=y[s+28>>2],U=y[l+56>>2],L=y[s+4>>2],_[r+16>>2]=0,_[r+20>>2]=0,_[r+36>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0,m=b(m+v),v=b(R+U),f=b(f+M),M=b(b(b(N*m)+b(h*v))+b(D*f)),R=h,h=b(-G),y[r+32>>2]=M+b(b(b(R*h)-b(N*x))-b(D*c)),y[r+28>>2]=b(b(b(m*k)+b(v*O))+b(f*w))+b(b(b(O*h)-b(k*x))-b(w*c)),y[r+24>>2]=b(b(b(m*L)+b(v*T))+b(f*C))+b(b(b(T*h)-b(L*x))-b(C*c)),s=_[r+388>>2],_[r+72>>2]=_[r+384>>2],_[r+76>>2]=s,s=_[r+396>>2],_[r+80>>2]=_[r+392>>2],_[r+84>>2]=s,y[r+88>>2]=z,_[r+100>>2]=0,_[r+104>>2]=0,_[r+92>>2]=0,_[r+96>>2]=0,_[r+172>>2]=0,_[r+164>>2]=0,_[r+168>>2]=0,_[r+156>>2]=0,_[r+160>>2]=0,_[r+148>>2]=0,_[r+152>>2]=0,_[r+140>>2]=0,_[r+144>>2]=0,_[r+132>>2]=0,_[r+136>>2]=0,_[r+124>>2]=0,_[r+128>>2]=0,s=A(Xe(u,r+8|0),208)+u|0,_[s+100>>2]=0,y[s+88>>2]=S(b(E(b(y[l+228>>2]*y[_[r+416>>2]+228>>2]),b(-10))),b(10)),u=_[l+56>>2],_[s+52>>2]=_[l+52>>2],_[s+56>>2]=u,u=_[l+64>>2],_[s+60>>2]=_[l+60>>2],_[s+64>>2]=u,_[s+48>>2]=0,y[s+44>>2]=f,y[s+40>>2]=v,y[s+36>>2]=m}o[_[4566]]()}}if((0|(F=F+1|0))==(0|i))break}B=r+512|0}(e,_[e+256>>2],n,t),o[_[4566]](),B=i+16|0},o[66]=function(e,t){e|=0,t=b(t);var i=0,n=0,r=0;if((0|(n=_[e+8>>2]))>=1)for(;!(i=_[_[e+16>>2]+(r<<2)>>2])|!(2&_[i+252>>2])|!(2&d[i+204|0])|2==_[i+220>>2]||(Z(i,t),n=_[e+8>>2]),(0|(r=r+1|0))<(0|n););},o[67]=function(e,t){e|=0,t|=0;var i,n=0,r=0,a=0,s=0,l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=0,G=0,U=b(0),X=b(0),V=b(0);B=i=B-176|0,n=0|o[_[_[e>>2]+20>>2]](e),h=0|o[_[_[n>>2]+56>>2]](n),n=0|o[_[_[e>>2]+20>>2]](e),s=0|o[_[_[n>>2]+56>>2]](n);e:if(!((L=y[t+40>>2])<=b(0)||(n=_[t+4>>2]+-3|0)>>>0>9)){switch(a=2048&h,G=4096&s,n-1|0){default:if(_[i+124>>2]=0,_[i+128>>2]=0,_[i+136>>2]=0,_[i+140>>2]=0,_[i+132>>2]=1065353216,_[i+156>>2]=0,_[i+160>>2]=0,_[i+152>>2]=1065353216,_[i+164>>2]=0,_[i+168>>2]=0,_[i+172>>2]=0,_[i+116>>2]=0,_[i+120>>2]=0,_[i+112>>2]=1065353216,_[i+144>>2]=0,_[i+148>>2]=0,n=_[t+28>>2],P=y[n+52>>2],g=y[n+12>>2],k=y[n+4>>2],O=y[n+8>>2],F=y[n+56>>2],f=y[n+28>>2],m=y[n+20>>2],v=y[n+24>>2],p=y[n+60>>2],R=y[t+308>>2],u=y[n+44>>2],I=y[t+300>>2],l=y[n+36>>2],M=y[t+304>>2],c=y[n+40>>2],_[i+172>>2]=0,y[i+168>>2]=p+b(b(b(I*l)+b(M*c))+b(R*u)),y[i+164>>2]=F+b(b(b(I*m)+b(M*v))+b(R*f)),y[i+160>>2]=P+b(b(b(I*k)+b(M*O))+b(R*g)),n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L),n=_[t+32>>2],P=y[n+52>>2],g=y[n+12>>2],k=y[n+4>>2],O=y[n+8>>2],F=y[n+56>>2],f=y[n+28>>2],m=y[n+20>>2],v=y[n+24>>2],p=y[n+60>>2],R=y[t+324>>2],u=y[n+44>>2],I=y[t+316>>2],l=y[n+36>>2],M=y[t+320>>2],c=y[n+40>>2],_[i+172>>2]=0,y[i+168>>2]=p+b(b(b(I*l)+b(M*c))+b(R*u)),y[i+164>>2]=F+b(b(b(I*m)+b(M*v))+b(R*f)),y[i+160>>2]=P+b(b(b(I*k)+b(M*O))+b(R*g)),!a)break e;e=0|o[_[_[e>>2]+20>>2]](e),o[_[_[e>>2]+64>>2]](e,i+112|0,L);break e;case 0:if(n=_[t+28>>2],u=y[n+52>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],R=y[t+584>>2],I=y[t+552>>2],M=y[t+568>>2],l=y[n+56>>2],c=y[n+60>>2],P=y[t+608>>2],g=y[t+600>>2],k=y[t+604>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],O=y[t+588>>2],F=y[t+556>>2],f=y[t+572>>2],m=y[t+592>>2],w=y[n+44>>2],v=y[t+560>>2],D=y[n+36>>2],p=y[t+576>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+168>>2]=c+b(b(b(D*g)+b(N*k))+b(w*P)),y[i+164>>2]=l+b(b(b(E*g)+b(C*k))+b(S*P)),_[i+124>>2]=0,y[i+144>>2]=b(b(I*D)+b(M*N))+b(R*w),y[i+128>>2]=b(b(I*E)+b(M*C))+b(R*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(I*T)+b(M*A))+b(R*x),y[i+160>>2]=u+b(b(b(T*g)+b(A*k))+b(x*P)),a?(n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L),n=_[t+32>>2],u=y[n+52>>2],l=y[n+56>>2],c=y[n+60>>2],R=y[t+672>>2],I=y[t+664>>2],M=y[t+668>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],P=y[t+648>>2],g=y[t+616>>2],k=y[t+632>>2],O=y[t+652>>2],F=y[t+620>>2],f=y[t+636>>2],m=y[t+656>>2],w=y[n+44>>2],v=y[t+624>>2],D=y[n+36>>2],p=y[t+640>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,_[i+124>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+144>>2]=b(b(g*D)+b(k*N))+b(P*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+128>>2]=b(b(g*E)+b(k*C))+b(P*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(g*T)+b(k*A))+b(P*x),y[i+168>>2]=c+b(b(b(D*I)+b(N*M))+b(w*R)),y[i+164>>2]=l+b(b(b(E*I)+b(C*M))+b(S*R)),y[i+160>>2]=u+b(b(b(T*I)+b(A*M))+b(x*R)),n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L)):(n=_[t+32>>2],u=y[n+52>>2],l=y[n+56>>2],c=y[n+60>>2],R=y[t+672>>2],I=y[t+664>>2],M=y[t+668>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],P=y[t+648>>2],g=y[t+616>>2],k=y[t+632>>2],O=y[t+652>>2],F=y[t+620>>2],f=y[t+636>>2],m=y[t+656>>2],w=y[n+44>>2],v=y[t+624>>2],D=y[n+36>>2],p=y[t+640>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,_[i+124>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+144>>2]=b(b(g*D)+b(k*N))+b(P*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+128>>2]=b(b(g*E)+b(k*C))+b(P*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(g*T)+b(k*A))+b(P*x),y[i+168>>2]=c+b(b(b(D*I)+b(N*M))+b(w*R)),y[i+164>>2]=l+b(b(b(E*I)+b(C*M))+b(S*R)),y[i+160>>2]=u+b(b(b(T*I)+b(A*M))+b(x*R))),!G|(u=function(e){var t=b(0);return(t=ii(b(y[e>>2]-y[e+4>>2])))<b(-3.1415927410125732)?b(t+b(6.2831854820251465)):t>b(3.1415927410125732)^1?t:b(t+b(-6.2831854820251465))}(n=t+688|0))==(l=function(e){var t=b(0);return(t=ii(b(y[e>>2]+y[e+4>>2])))<b(-3.1415927410125732)?b(t+b(6.2831854820251465)):t>b(3.1415927410125732)^1?t:b(t+b(-6.2831854820251465))}(n)))break e;c=y[t+692>>2],_[i+96>>2]=_[i+120>>2],_[i+100>>2]=_[i+136>>2],_[i+108>>2]=0,_[i+104>>2]=_[i+152>>2],_[i+80>>2]=_[i+112>>2],_[i+84>>2]=_[i+128>>2],_[i+92>>2]=0,_[i+88>>2]=_[i+144>>2],t=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,e=c>b(0),o[_[_[t>>2]+68>>2]](t,i+160|0,i+96|0,i+80|0,L,L,e?u:b(0),e?l:b(6.2831854820251465),i- -64|0,e,b(10));break e;case 1:if(n=_[t+28>>2],u=y[n+52>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],R=y[t+332>>2],I=y[t+300>>2],M=y[t+316>>2],l=y[n+56>>2],c=y[n+60>>2],P=y[t+356>>2],g=y[t+348>>2],k=y[t+352>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],O=y[t+336>>2],F=y[t+304>>2],f=y[t+320>>2],m=y[t+340>>2],w=y[n+44>>2],v=y[t+308>>2],D=y[n+36>>2],p=y[t+324>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+168>>2]=c+b(b(b(D*g)+b(N*k))+b(w*P)),y[i+164>>2]=l+b(b(b(E*g)+b(C*k))+b(S*P)),_[i+124>>2]=0,y[i+144>>2]=b(b(I*D)+b(M*N))+b(R*w),y[i+128>>2]=b(b(I*E)+b(M*C))+b(R*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(I*T)+b(M*A))+b(R*x),y[i+160>>2]=u+b(b(b(T*g)+b(A*k))+b(x*P)),a?(n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L),n=_[t+32>>2],u=y[n+52>>2],l=y[n+56>>2],c=y[n+60>>2],R=y[t+420>>2],I=y[t+412>>2],M=y[t+416>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],P=y[t+396>>2],g=y[t+364>>2],k=y[t+380>>2],O=y[t+400>>2],F=y[t+368>>2],f=y[t+384>>2],m=y[t+404>>2],w=y[n+44>>2],v=y[t+372>>2],D=y[n+36>>2],p=y[t+388>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,_[i+124>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+144>>2]=b(b(g*D)+b(k*N))+b(P*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+128>>2]=b(b(g*E)+b(k*C))+b(P*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(g*T)+b(k*A))+b(P*x),y[i+168>>2]=c+b(b(b(D*I)+b(N*M))+b(w*R)),y[i+164>>2]=l+b(b(b(E*I)+b(C*M))+b(S*R)),y[i+160>>2]=u+b(b(b(T*I)+b(A*M))+b(x*R)),n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L)):(n=_[t+32>>2],u=y[n+52>>2],l=y[n+56>>2],c=y[n+60>>2],R=y[t+420>>2],I=y[t+412>>2],M=y[t+416>>2],x=y[n+12>>2],T=y[n+4>>2],A=y[n+8>>2],S=y[n+28>>2],E=y[n+20>>2],C=y[n+24>>2],P=y[t+396>>2],g=y[t+364>>2],k=y[t+380>>2],O=y[t+400>>2],F=y[t+368>>2],f=y[t+384>>2],m=y[t+404>>2],w=y[n+44>>2],v=y[t+372>>2],D=y[n+36>>2],p=y[t+388>>2],N=y[n+40>>2],_[i+172>>2]=0,_[i+156>>2]=0,_[i+140>>2]=0,_[i+124>>2]=0,y[i+152>>2]=b(b(v*D)+b(p*N))+b(m*w),y[i+148>>2]=b(b(F*D)+b(f*N))+b(O*w),y[i+144>>2]=b(b(g*D)+b(k*N))+b(P*w),y[i+136>>2]=b(b(v*E)+b(p*C))+b(m*S),y[i+132>>2]=b(b(F*E)+b(f*C))+b(O*S),y[i+128>>2]=b(b(g*E)+b(k*C))+b(P*S),y[i+120>>2]=b(b(T*v)+b(A*p))+b(x*m),y[i+116>>2]=b(b(T*F)+b(A*f))+b(x*O),y[i+112>>2]=b(b(g*T)+b(k*A))+b(P*x),y[i+168>>2]=c+b(b(b(D*I)+b(N*M))+b(w*R)),y[i+164>>2]=l+b(b(b(E*I)+b(C*M))+b(S*R)),y[i+160>>2]=u+b(b(b(T*I)+b(A*M))+b(x*R))),!G)break e;for(Qe(i+96|0,t,b(6.0868353843688965),L),_[i+108>>2]=0,u=y[i+96>>2],l=y[i+100>>2],c=y[i+104>>2],y[i+104>>2]=b(b(b(u*y[i+144>>2])+b(l*y[i+148>>2]))+b(c*y[i+152>>2]))+y[i+168>>2],y[i+100>>2]=b(b(b(u*y[i+128>>2])+b(l*y[i+132>>2]))+b(c*y[i+136>>2]))+y[i+164>>2],y[i+96>>2]=b(b(b(u*y[i+112>>2])+b(l*y[i+116>>2]))+b(c*y[i+120>>2]))+y[i+160>>2],n=i+160|0,h=0;Qe(i+80|0,t,b(b(b(0|h)*b(6.283185005187988))*b(.03125)),L),_[i+92>>2]=0,u=y[i+80>>2],l=y[i+84>>2],c=y[i+88>>2],y[i+88>>2]=b(b(b(u*y[i+144>>2])+b(l*y[i+148>>2]))+b(c*y[i+152>>2]))+y[i+168>>2],y[i+84>>2]=b(b(b(u*y[i+128>>2])+b(l*y[i+132>>2]))+b(c*y[i+136>>2]))+y[i+164>>2],y[i+80>>2]=b(b(b(u*y[i+112>>2])+b(l*y[i+116>>2]))+b(c*y[i+120>>2]))+y[i+160>>2],s=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,o[_[_[s>>2]+16>>2]](s,i+96|0,i+80|0,i- -64|0),3&h||(s=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,o[_[_[s>>2]+16>>2]](s,n,i+80|0,i- -64|0)),s=_[i+92>>2],_[i+104>>2]=_[i+88>>2],_[i+108>>2]=s,s=_[i+84>>2],_[i+96>>2]=_[i+80>>2],_[i+100>>2]=s,32!=(0|(h=h+1|0)););D=y[t+512>>2],N=y[t+452>>2],h=_[t+32>>2],y[h+404>>2]>b(0)?(U=y[h+36>>2],l=y[t+412>>2],g=y[h+40>>2],c=y[t+416>>2],R=b(b(U*l)+b(g*c)),x=y[h+20>>2],T=y[h+24>>2],A=y[h+28>>2],k=y[t+420>>2],I=b(b(b(x*l)+b(T*c))+b(A*k)),S=y[h+4>>2],E=y[h+8>>2],C=y[h+12>>2],M=b(b(b(S*l)+b(E*c))+b(C*k)),O=y[t+372>>2],F=y[t+388>>2],f=y[t+404>>2],w=y[h+44>>2],P=b(b(b(O*U)+b(F*g))+b(f*w)),m=y[t+368>>2],v=y[t+384>>2],p=y[t+400>>2],X=b(b(b(m*U)+b(v*g))+b(p*w)),u=y[t+364>>2],l=y[t+380>>2],c=y[t+396>>2],V=b(b(b(u*U)+b(l*g))+b(c*w)),g=b(b(b(O*x)+b(F*T))+b(f*A)),U=b(b(b(m*x)+b(v*T))+b(p*A)),A=b(b(b(u*x)+b(l*T))+b(c*A)),f=b(b(b(S*O)+b(E*F))+b(C*f)),m=b(b(b(S*m)+b(E*v))+b(C*p)),v=b(b(b(u*S)+b(l*E))+b(c*C)),p=b(w*k)):(h=_[t+28>>2],U=y[h+36>>2],l=y[t+348>>2],g=y[h+40>>2],c=y[t+352>>2],R=b(b(U*l)+b(g*c)),x=y[h+20>>2],T=y[h+24>>2],A=y[h+28>>2],k=y[t+356>>2],I=b(b(b(x*l)+b(T*c))+b(A*k)),S=y[h+4>>2],E=y[h+8>>2],C=y[h+12>>2],M=b(b(b(S*l)+b(E*c))+b(C*k)),O=y[t+308>>2],F=y[t+324>>2],f=y[t+340>>2],w=y[h+44>>2],P=b(b(b(O*U)+b(F*g))+b(f*w)),m=y[t+304>>2],v=y[t+320>>2],p=y[t+336>>2],X=b(b(b(m*U)+b(v*g))+b(p*w)),u=y[t+300>>2],l=y[t+316>>2],c=y[t+332>>2],V=b(b(b(u*U)+b(l*g))+b(c*w)),g=b(b(b(O*x)+b(F*T))+b(f*A)),U=b(b(b(m*x)+b(v*T))+b(p*A)),A=b(b(b(u*x)+b(l*T))+b(c*A)),f=b(b(b(S*O)+b(E*F))+b(C*f)),m=b(b(b(S*m)+b(E*v))+b(C*p)),v=b(b(b(u*S)+b(l*E))+b(c*C)),p=b(w*k)),u=y[h+52>>2],l=y[h+56>>2],c=y[h+60>>2],_[i+172>>2]=0,_[i+156>>2]=0,y[i+152>>2]=P,y[i+148>>2]=X,y[i+144>>2]=V,_[i+140>>2]=0,y[i+136>>2]=g,y[i+132>>2]=U,y[i+128>>2]=A,_[i+124>>2]=0,y[i+120>>2]=f,y[i+116>>2]=m,y[i+112>>2]=v,y[i+168>>2]=c+b(R+p),y[i+164>>2]=I+l,y[i+160>>2]=u+M,t=_[n+12>>2],_[i+88>>2]=_[n+8>>2],_[i+92>>2]=t,t=_[n+4>>2],_[i+80>>2]=_[n>>2],_[i+84>>2]=t,_[i+76>>2]=0,y[i+72>>2]=V,y[i+68>>2]=A,y[i+64>>2]=v,_[i+60>>2]=0,y[i+56>>2]=X,y[i+52>>2]=U,y[i+48>>2]=m,e=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[e>>2]+68>>2]](e,i+80|0,i- -64|0,i+48|0,L,L,b(b(-D)-N),b(N-D),i+32|0,1,b(10));break e;case 2:case 5:if(n=_[4+(s=t+1072|0)>>2],_[i+120>>2]=_[s>>2],_[i+124>>2]=n,n=_[4+(s=z=t+1064|0)>>2],_[i+112>>2]=_[s>>2],_[i+116>>2]=n,n=_[4+(s=t+1088|0)>>2],_[i+136>>2]=_[s>>2],_[i+140>>2]=n,n=_[4+(s=h=t+1080|0)>>2],_[i+128>>2]=_[s>>2],_[i+132>>2]=n,n=_[4+(s=t+1104|0)>>2],_[i+152>>2]=_[s>>2],_[i+156>>2]=n,n=_[4+(r=s=t+1096|0)>>2],_[i+144>>2]=_[r>>2],_[i+148>>2]=n,n=_[4+(r=t+1120|0)>>2],_[i+168>>2]=_[r>>2],_[i+172>>2]=n,r=_[4+(n=t+1112|0)>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=r,a?(r=0|o[_[_[e>>2]+20>>2]](e),o[_[_[r>>2]+64>>2]](r,i+112|0,L),r=_[4+(a=t+1136|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1128|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1152|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1144|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1168|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1160|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[4+(a=t+1184|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,r=_[4+(a=t+1176|0)>>2],_[i+160>>2]=_[a>>2],_[i+164>>2]=r,r=0|o[_[_[e>>2]+20>>2]](e),o[_[_[r>>2]+64>>2]](r,i+112|0,L)):(r=_[4+(a=t+1136|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1128|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1152|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1144|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1168|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1160|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[4+(a=t+1184|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,r=_[4+(a=t+1176|0)>>2],_[i+160>>2]=_[a>>2],_[i+164>>2]=r),!G)break e;a=_[(r=z)+12>>2],_[i+120>>2]=_[r+8>>2],_[i+124>>2]=a,a=_[r+4>>2],_[i+112>>2]=_[r>>2],_[i+116>>2]=a,a=_[(r=h)+12>>2],_[i+136>>2]=_[r+8>>2],_[i+140>>2]=a,a=_[r+4>>2],_[i+128>>2]=_[r>>2],_[i+132>>2]=a,a=_[(r=s)+12>>2],_[i+152>>2]=_[r+8>>2],_[i+156>>2]=a,a=_[r+4>>2],_[i+144>>2]=_[r>>2],_[i+148>>2]=a,a=_[n+12>>2],_[i+168>>2]=_[n+8>>2],_[i+172>>2]=a,a=_[n+4>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=a,_[i+96>>2]=_[i+120>>2],_[i+100>>2]=_[i+136>>2],_[i+108>>2]=0,_[i+104>>2]=_[i+152>>2],_[i+80>>2]=_[i+112>>2],_[i+84>>2]=_[i+128>>2],_[i+92>>2]=0,_[i+88>>2]=_[i+144>>2],p=y[t+1e3>>2],u=y[t+996>>2],l=y[t+936>>2],c=y[t+932>>2],r=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,G=t+1176|0,o[_[_[r>>2]+72>>2]](r,G,i+96|0,i+80|0,b(L*b(.8999999761581421)),c,l,u,p,i- -64|0,b(10),1),_[i+92>>2]=0,_[i+88>>2]=_[i+148>>2],_[i+84>>2]=_[i+132>>2],_[i+80>>2]=_[i+116>>2],l=y[t+1196>>2],f=Ji(c=y[t+1200>>2]),m=y[i+80>>2],v=$i(c),p=y[i+84>>2],y[i+68>>2]=b(v*p)-b(f*m),u=Ji(l),l=$i(l),c=y[i+88>>2],y[i+72>>2]=b(b(m*b(v*u))+b(p*b(u*f)))+b(l*c),y[i+64>>2]=b(b(m*b(l*v))+b(p*b(l*f)))-b(u*c),r=_[4+(a=t+1136|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1128|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1152|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1144|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1168|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1160|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[G+4>>2],_[i+160>>2]=_[G>>2],_[i+164>>2]=r,r=_[4+(a=t+1184|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,_[i+60>>2]=0,y[i+56>>2]=-y[i+144>>2],y[i+52>>2]=-y[i+128>>2],y[i+48>>2]=-y[i+112>>2],(l=y[t+868>>2])>(c=y[t+872>>2])?(r=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[r>>2]+68>>2]](r,G,i+48|0,i- -64|0,L,L,b(-3.1415927410125732),b(3.1415927410125732),i+32|0,0,b(10))):l<c&&(r=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[r>>2]+68>>2]](r,G,i+48|0,i- -64|0,L,L,l,c,i+32|0,1,b(10))),r=_[z+12>>2],_[i+120>>2]=_[z+8>>2],_[i+124>>2]=r,r=_[z+4>>2],_[i+112>>2]=_[z>>2],_[i+116>>2]=r,z=_[h+12>>2],_[i+136>>2]=_[h+8>>2],_[i+140>>2]=z,z=_[h+4>>2],_[i+128>>2]=_[h>>2],_[i+132>>2]=z,h=_[s+12>>2],_[i+152>>2]=_[s+8>>2],_[i+156>>2]=h,h=_[s+4>>2],_[i+144>>2]=_[s>>2],_[i+148>>2]=h,s=_[n+12>>2],_[i+168>>2]=_[n+8>>2],_[i+172>>2]=s,s=_[n+4>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=s,n=_[t+692>>2],_[i+40>>2]=_[t+688>>2],_[i+44>>2]=n,n=_[t+684>>2],_[i+32>>2]=_[t+680>>2],_[i+36>>2]=n,n=_[t+708>>2],_[i+24>>2]=_[t+704>>2],_[i+28>>2]=n,n=_[t+700>>2],_[i+16>>2]=_[t+696>>2],_[i+20>>2]=n,e=0|o[_[_[e>>2]+20>>2]](e),_[i+8>>2]=0,_[i+12>>2]=0,_[i>>2]=0,_[i+4>>2]=0,o[_[_[e>>2]+80>>2]](e,i+32|0,i+16|0,i+112|0,i);break e;case 8:if(n=_[4+(s=t+1244|0)>>2],_[i+120>>2]=_[s>>2],_[i+124>>2]=n,n=_[4+(s=z=t+1236|0)>>2],_[i+112>>2]=_[s>>2],_[i+116>>2]=n,n=_[4+(s=t+1260|0)>>2],_[i+136>>2]=_[s>>2],_[i+140>>2]=n,n=_[4+(s=h=t+1252|0)>>2],_[i+128>>2]=_[s>>2],_[i+132>>2]=n,n=_[4+(s=t+1276|0)>>2],_[i+152>>2]=_[s>>2],_[i+156>>2]=n,n=_[4+(r=s=t+1268|0)>>2],_[i+144>>2]=_[r>>2],_[i+148>>2]=n,n=_[4+(r=t+1292|0)>>2],_[i+168>>2]=_[r>>2],_[i+172>>2]=n,r=_[4+(n=t+1284|0)>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=r,a?(r=0|o[_[_[e>>2]+20>>2]](e),o[_[_[r>>2]+64>>2]](r,i+112|0,L),r=_[4+(a=t+1308|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1300|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1324|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1316|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1340|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1332|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[4+(a=t+1356|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,r=_[4+(a=t+1348|0)>>2],_[i+160>>2]=_[a>>2],_[i+164>>2]=r,r=0|o[_[_[e>>2]+20>>2]](e),o[_[_[r>>2]+64>>2]](r,i+112|0,L)):(r=_[4+(a=t+1308|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1300|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1324|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1316|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1340|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1332|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[4+(a=t+1356|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,r=_[4+(a=t+1348|0)>>2],_[i+160>>2]=_[a>>2],_[i+164>>2]=r),!G)break e;a=_[(r=z)+12>>2],_[i+120>>2]=_[r+8>>2],_[i+124>>2]=a,a=_[r+4>>2],_[i+112>>2]=_[r>>2],_[i+116>>2]=a,a=_[(r=h)+12>>2],_[i+136>>2]=_[r+8>>2],_[i+140>>2]=a,a=_[r+4>>2],_[i+128>>2]=_[r>>2],_[i+132>>2]=a,a=_[(r=s)+12>>2],_[i+152>>2]=_[r+8>>2],_[i+156>>2]=a,a=_[r+4>>2],_[i+144>>2]=_[r>>2],_[i+148>>2]=a,a=_[n+12>>2],_[i+168>>2]=_[n+8>>2],_[i+172>>2]=a,a=_[n+4>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=a,_[i+96>>2]=_[i+120>>2],_[i+100>>2]=_[i+136>>2],_[i+108>>2]=0,_[i+104>>2]=_[i+152>>2],_[i+80>>2]=_[i+112>>2],_[i+84>>2]=_[i+128>>2],_[i+92>>2]=0,_[i+88>>2]=_[i+144>>2],p=y[t+1148>>2],u=y[t+1144>>2],l=y[t+1060>>2],c=y[t+1056>>2],r=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,G=t+1348|0,o[_[_[r>>2]+72>>2]](r,G,i+96|0,i+80|0,b(L*b(.8999999761581421)),c,l,u,p,i- -64|0,b(10),1),_[i+92>>2]=0,v=y[i+148>>2],_[i+88>>2]=_[i+148>>2],l=y[i+132>>2],_[i+84>>2]=_[i+132>>2],c=y[i+116>>2],_[i+80>>2]=_[i+116>>2],f=Ji(u=y[t+1372>>2]),m=$i(u),u=y[t+1368>>2],y[i+68>>2]=b(m*l)-b(f*c),p=Ji(u),u=$i(u),y[i+72>>2]=b(b(b(m*p)*c)+b(b(p*f)*l))+b(u*v),y[i+64>>2]=b(b(b(u*m)*c)+b(b(u*f)*l))-b(p*v),r=_[4+(a=t+1308|0)>>2],_[i+120>>2]=_[a>>2],_[i+124>>2]=r,r=_[4+(a=t+1300|0)>>2],_[i+112>>2]=_[a>>2],_[i+116>>2]=r,r=_[4+(a=t+1324|0)>>2],_[i+136>>2]=_[a>>2],_[i+140>>2]=r,r=_[4+(a=t+1316|0)>>2],_[i+128>>2]=_[a>>2],_[i+132>>2]=r,r=_[4+(a=t+1340|0)>>2],_[i+152>>2]=_[a>>2],_[i+156>>2]=r,r=_[4+(a=t+1332|0)>>2],_[i+144>>2]=_[a>>2],_[i+148>>2]=r,r=_[4+(a=t+1356|0)>>2],_[i+168>>2]=_[a>>2],_[i+172>>2]=r,r=_[G+4>>2],_[i+160>>2]=_[G>>2],_[i+164>>2]=r,_[i+60>>2]=0,y[i+56>>2]=-y[i+144>>2],y[i+52>>2]=-y[i+128>>2],y[i+48>>2]=-y[i+112>>2],(l=y[t+968>>2])>(c=y[t+972>>2])?(r=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[r>>2]+68>>2]](r,G,i+48|0,i- -64|0,L,L,b(-3.1415927410125732),b(3.1415927410125732),i+32|0,0,b(10))):l<c&&(r=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[r>>2]+68>>2]](r,G,i+48|0,i- -64|0,L,L,l,c,i+32|0,1,b(10))),r=_[z+12>>2],_[i+120>>2]=_[z+8>>2],_[i+124>>2]=r,r=_[z+4>>2],_[i+112>>2]=_[z>>2],_[i+116>>2]=r,z=_[h+12>>2],_[i+136>>2]=_[h+8>>2],_[i+140>>2]=z,z=_[h+4>>2],_[i+128>>2]=_[h>>2],_[i+132>>2]=z,h=_[s+12>>2],_[i+152>>2]=_[s+8>>2],_[i+156>>2]=h,h=_[s+4>>2],_[i+144>>2]=_[s>>2],_[i+148>>2]=h,s=_[n+12>>2],_[i+168>>2]=_[n+8>>2],_[i+172>>2]=s,s=_[n+4>>2],_[i+160>>2]=_[n>>2],_[i+164>>2]=s,n=_[t+692>>2],_[i+40>>2]=_[t+688>>2],_[i+44>>2]=n,n=_[t+684>>2],_[i+32>>2]=_[t+680>>2],_[i+36>>2]=n,n=_[t+708>>2],_[i+24>>2]=_[t+704>>2],_[i+28>>2]=n,n=_[t+700>>2],_[i+16>>2]=_[t+696>>2],_[i+20>>2]=n,e=0|o[_[_[e>>2]+20>>2]](e),_[i+8>>2]=0,_[i+12>>2]=0,_[i>>2]=0,_[i+4>>2]=0,o[_[_[e>>2]+80>>2]](e,i+32|0,i+16|0,i+112|0,i);break e;case 4:case 6:case 7:break e;case 3:}n=_[t+836>>2],_[i+120>>2]=_[t+832>>2],_[i+124>>2]=n,n=_[4+(s=h=t+824|0)>>2],_[i+112>>2]=_[s>>2],_[i+116>>2]=n,n=_[t+852>>2],_[i+136>>2]=_[t+848>>2],_[i+140>>2]=n,n=_[t+844>>2],_[i+128>>2]=_[t+840>>2],_[i+132>>2]=n,n=_[t+868>>2],_[i+152>>2]=_[t+864>>2],_[i+156>>2]=n,n=_[t+860>>2],_[i+144>>2]=_[t+856>>2],_[i+148>>2]=n,n=_[t+884>>2],_[i+168>>2]=_[t+880>>2],_[i+172>>2]=n,n=_[t+876>>2],_[i+160>>2]=_[t+872>>2],_[i+164>>2]=n,a?(n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L),n=_[t+900>>2],_[i+120>>2]=_[t+896>>2],_[i+124>>2]=n,n=_[t+892>>2],_[i+112>>2]=_[t+888>>2],_[i+116>>2]=n,n=_[t+916>>2],_[i+136>>2]=_[t+912>>2],_[i+140>>2]=n,n=_[t+908>>2],_[i+128>>2]=_[t+904>>2],_[i+132>>2]=n,n=_[t+932>>2],_[i+152>>2]=_[t+928>>2],_[i+156>>2]=n,n=_[t+924>>2],_[i+144>>2]=_[t+920>>2],_[i+148>>2]=n,n=_[t+948>>2],_[i+168>>2]=_[t+944>>2],_[i+172>>2]=n,n=_[t+940>>2],_[i+160>>2]=_[t+936>>2],_[i+164>>2]=n,n=0|o[_[_[e>>2]+20>>2]](e),o[_[_[n>>2]+64>>2]](n,i+112|0,L)):(n=_[t+900>>2],_[i+120>>2]=_[t+896>>2],_[i+124>>2]=n,n=_[t+892>>2],_[i+112>>2]=_[t+888>>2],_[i+116>>2]=n,n=_[t+916>>2],_[i+136>>2]=_[t+912>>2],_[i+140>>2]=n,n=_[t+908>>2],_[i+128>>2]=_[t+904>>2],_[i+132>>2]=n,n=_[t+932>>2],_[i+152>>2]=_[t+928>>2],_[i+156>>2]=n,n=_[t+924>>2],_[i+144>>2]=_[t+920>>2],_[i+148>>2]=n,n=_[t+948>>2],_[i+168>>2]=_[t+944>>2],_[i+172>>2]=n,n=_[t+940>>2],_[i+160>>2]=_[t+936>>2],_[i+164>>2]=n),G&&(n=d[t+180|0],I=y[(s=n?h:t+888|0)+48>>2],F=y[s+8>>2],f=y[s+4>>2],a=_[s+4>>2],M=y[s+52>>2],p=y[s+24>>2],P=y[s+16>>2],r=_[s+16>>2],u=y[s+20>>2],z=_[s+20>>2],g=y[s+56>>2],l=y[s+40>>2],k=y[s+32>>2],h=_[s+32>>2],c=y[s+36>>2],s=_[s+36>>2],O=y[(n=(n?824:888)+t|0)>>2],n=_[n>>2],R=y[t+184>>2],_[i+108>>2]=0,m=b(l*b(0)),v=b(c*b(0)),y[i+104>>2]=g+b(m+b(v+b(R*k))),p=b(p*b(0)),u=b(u*b(0)),y[i+100>>2]=M+b(p+b(u+b(R*P))),l=b(F*b(0)),c=b(f*b(0)),y[i+96>>2]=I+b(l+b(c+b(R*O))),f=y[t+188>>2],_[i+92>>2]=0,y[i+88>>2]=g+b(m+b(v+b(f*k))),y[i+84>>2]=M+b(p+b(u+b(f*P))),y[i+80>>2]=I+b(l+b(c+b(f*O))),G=0|o[_[_[e>>2]+20>>2]](e),_[i+72>>2]=0,_[i+76>>2]=0,_[i+64>>2]=0,_[i+68>>2]=0,o[_[_[G>>2]+16>>2]](G,i+96|0,i+80|0,i- -64|0),_[i+76>>2]=0,_[i+72>>2]=h,_[i+68>>2]=r,_[i+64>>2]=n,_[i+60>>2]=0,_[i+56>>2]=s,_[i+52>>2]=z,_[i+48>>2]=a,l=y[t+196>>2],c=y[t+192>>2],e=0|o[_[_[e>>2]+20>>2]](e),_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,o[_[_[e>>2]+68>>2]](e,t+936|0,i- -64|0,i+48|0,L,L,c,l,i+32|0,1,b(10)))}B=i+176|0},o[68]=function(e){var t=0,i=0,n=0,r=0;if((0|(t=_[248+(e|=0)>>2]))>=1)for(;;){e:{t:if(n=_[_[e+256>>2]+(i<<2)>>2],!((r=_[n+220>>2]+-2|0)>>>0>3))switch(r-1|0){case 0:case 1:break t;default:break e}ct(n),t=_[e+248>>2]}if(!((0|(i=i+1|0))<(0|t)))break}},o[69]=hn,o[70]=function(e,t){e|=0,t=b(t);var i,n=0,r=0;if(B=i=B-16|0,o[_[4565]](1696),_[e+296>>2]>=1)for(;r=_[_[e+304>>2]+(n<<2)>>2],o[_[_[r>>2]+8>>2]](r,e,t),(0|(n=n+1|0))<_[e+296>>2];);o[_[4566]](),B=i+16|0},o[71]=Ze,o[72]=function(e){Bi(Ze(e|=0))},o[73]=function(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0;var l=0,c=0,u=0,h=0,p=0,f=0,m=0,v=0;if(!((0|(s|=0))>=0))return s=_[e+8>>2],void b(o[_[_[s>>2]+12>>2]](s,t,i,n,r,_[e+12>>2],_[e+16>>2],_[e+4>>2],_[e+20>>2],_[e+24>>2]));e:{if((0|(c=_[e+16>>2]))>=1)for(f=_[e+12>>2];;){if(p=_[(m=f+(l<<2)|0)>>2],(0|(u=_[_[p+28>>2]+208>>2]))<=-1&&(u=_[_[p+32>>2]+208>>2]),(0|s)==(0|u))break e;if(!((0|(l=l+1|0))<(0|c)))break}m=0}if(p=0,(0|l)<(0|c))for(v=_[e+12>>2];f=_[v+(l<<2)>>2],(0|(u=_[_[f+28>>2]+208>>2]))<=-1&&(u=_[_[f+32>>2]+208>>2]),p=((0|s)==(0|u))+p|0,(0|c)!=(0|(l=l+1|0)););if(l=_[e+4>>2],_[l+80>>2]<2)s=_[e+8>>2],b(o[_[_[s>>2]+12>>2]](s,t,i,n,r,m,p,l,_[e+20>>2],_[e+24>>2]));else{if(!((0|i)<1))for(s=_[e+36>>2],l=_[e+32>>2];;){if(v=(h<<2)+t|0,(0|s)==(0|l))if((0|s)>=(0|(u=s?s<<1:1)))l=s;else{if(l=0,c=0,u&&(_[5585]=_[5585]+1,c=0|o[_[4567]](u<<2,16),s=_[e+32>>2]),(0|s)>=1)for(;_[(f=l<<2)+c>>2]=_[_[e+40>>2]+f>>2],(0|(l=l+1|0))!=(0|s););(l=_[e+40>>2])&&(d[e+44|0]&&(l&&(_[5586]=_[5586]+1,o[_[4568]](l)),s=_[e+32>>2]),_[e+40>>2]=0),l=s,_[e+40>>2]=c,a[e+44|0]=1,_[e+36>>2]=u,s=u}if(_[_[e+40>>2]+(l<<2)>>2]=_[v>>2],l=l+1|0,_[e+32>>2]=l,(0|(h=h+1|0))==(0|i))break}if((0|r)>=1)for(s=_[e+56>>2],l=_[e+52>>2],h=0;;){if(u=(h<<2)+n|0,(0|s)==(0|l))if((0|s)>=(0|(t=s?s<<1:1)))l=s;else{if(l=0,c=0,t&&(_[5585]=_[5585]+1,c=0|o[_[4567]](t<<2,16),s=_[e+52>>2]),(0|s)>=1)for(;_[(i=l<<2)+c>>2]=_[i+_[e+60>>2]>>2],(0|(l=l+1|0))!=(0|s););(i=_[e+60>>2])&&(d[e+64|0]&&(i&&(_[5586]=_[5586]+1,o[_[4568]](i)),s=_[e+52>>2]),_[e+60>>2]=0),l=s,_[e+60>>2]=c,a[e+64|0]=1,_[e+56>>2]=t,s=t}if(_[_[e+60>>2]+(l<<2)>>2]=_[u>>2],l=l+1|0,_[e+52>>2]=l,(0|(h=h+1|0))==(0|r))break}if(p)for(s=_[e+76>>2],l=_[e+72>>2],h=0;;){if(n=(h<<2)+m|0,(0|s)==(0|l))if((0|s)>=(0|(t=s?s<<1:1)))l=s;else{if(l=0,c=0,t&&(_[5585]=_[5585]+1,c=0|o[_[4567]](t<<2,16),s=_[e+72>>2]),(0|s)>=1)for(;_[(i=l<<2)+c>>2]=_[i+_[e+80>>2]>>2],(0|(l=l+1|0))!=(0|s););(i=_[e+80>>2])&&(d[e+84|0]&&(i&&(_[5586]=_[5586]+1,o[_[4568]](i)),s=_[e+72>>2]),_[e+80>>2]=0),l=s,_[e+80>>2]=c,a[e+84|0]=1,_[e+76>>2]=t,s=t}if(_[_[e+80>>2]+(l<<2)>>2]=_[n>>2],l=l+1|0,_[e+72>>2]=l,(0|p)==(0|(h=h+1|0)))break}else l=_[e+72>>2];(_[e+52>>2]+l|0)>_[_[e+4>>2]+80>>2]&&et(e)}},o[74]=Li,o[75]=Ii,o[76]=function(e,t){e|=0;var i,n,r=0;return i=_[(t|=0)>>2],n=_[e+84>>2],!(_[t+8>>2]&_[e+8>>2])|!(_[e+12>>2]&_[t+4>>2])|(0|i)==(0|n)||(e=_[e+96>>2],r=0|o[_[_[e>>2]+28>>2]](e,n,i)),0|r},o[77]=function(e,t,i){e|=0,t|=0,i|=0;var n=0,r=b(0),o=b(0),a=b(0),s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0);return r=b(1),(0|(n=_[t>>2]))==_[e+84>>2]|4&d[n+204|0]|b(b(b(b(y[e+32>>2]-y[e+16>>2])*y[t+8>>2])+b(b(y[e+36>>2]-y[e+20>>2])*y[t+12>>2]))+b(b(y[e+40>>2]-y[e+24>>2])*y[t+16>>2]))>=b(-y[e+88>>2])||(s=_[t+40>>2],_[e+80>>2]=n,_[e+4>>2]=s,i?(n=_[4+(i=t+8|0)>>2],_[e+48>>2]=_[i>>2],_[e+52>>2]=n,n=_[i+12>>2],_[e+56>>2]=_[i+8>>2],_[e+60>>2]=n):(l=y[n+12>>2],c=y[n+8>>2],u=y[n+28>>2],h=y[n+20>>2],p=y[n+24>>2],f=y[n+44>>2],m=y[n+36>>2],v=y[n+40>>2],g=y[n+4>>2],r=y[t+16>>2],o=y[t+8>>2],a=y[t+12>>2],_[e+60>>2]=0,y[e+56>>2]=b(b(o*m)+b(a*v))+b(r*f),y[e+52>>2]=b(b(o*h)+b(a*p))+b(r*u),y[e+48>>2]=b(b(g*o)+b(c*a))+b(l*r)),n=_[t+28>>2],_[(i=e- -64|0)>>2]=_[t+24>>2],_[i+4>>2]=n,i=_[t+36>>2],_[e+72>>2]=_[t+32>>2],_[e+76>>2]=i,r=y[t+40>>2]),b(r)},o[78]=Ii,o[79]=function(e,t){return t|=0,_[12+(e|=0)>>2]&_[t+4>>2]?0!=(_[t+8>>2]&_[e+8>>2])|0:0},o[80]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0);return _[e+4>>2]=_[t+40>>2],n=_[t>>2],_[e+80>>2]=n,i?(i=_[t+12>>2],_[e+48>>2]=_[t+8>>2],_[e+52>>2]=i,i=_[t+20>>2],_[e+56>>2]=_[t+16>>2],_[e+60>>2]=i):(s=y[n+8>>2],l=y[n+12>>2],c=y[n+20>>2],u=y[n+24>>2],h=y[n+28>>2],p=y[n+36>>2],f=y[n+40>>2],r=y[t+12>>2],d=y[n+44>>2],o=y[t+16>>2],m=y[n+4>>2],a=y[t+8>>2],_[e+60>>2]=0,y[e+56>>2]=b(b(a*p)+b(r*f))+b(o*d),y[e+52>>2]=b(b(a*c)+b(r*u))+b(o*h),y[e+48>>2]=b(b(m*a)+b(s*r))+b(l*o)),i=_[t+28>>2],_[e+64>>2]=_[t+24>>2],_[e+68>>2]=i,i=_[t+36>>2],_[e+72>>2]=_[t+32>>2],_[e+76>>2]=i,b(y[t+40>>2])},o[81]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0);return a=y[i+100>>2],s=y[i+16>>2],l=y[i+20>>2],c=y[i+24>>2],r=y[i+108>>2],n=b(b(b(y[i+112>>2]-b(a*y[i+116>>2]))-b(b(b(b(b(s*y[e+64>>2])+b(l*y[e+68>>2]))+b(c*y[e+72>>2]))+b(b(b(y[i>>2]*y[e+80>>2])+b(y[i+4>>2]*y[e+84>>2]))+b(y[i+8>>2]*y[e+88>>2])))*r))-b(r*b(b(b(b(y[i+48>>2]*y[t+64>>2])+b(y[i+52>>2]*y[t+68>>2]))+b(y[i+56>>2]*y[t+72>>2]))+b(b(b(y[i+32>>2]*y[t+80>>2])+b(y[i+36>>2]*y[t+84>>2]))+b(y[i+40>>2]*y[t+88>>2]))))),((r=b(a+n))<(o=y[i+120>>2])||r>(o=y[i+124>>2]))&&(n=b(o-a),r=o),y[i+100>>2]=r,_[e+240>>2]&&(y[e+64>>2]=b(y[e+112>>2]*b(n*b(s*y[e+128>>2])))+y[e+64>>2],y[e+68>>2]=b(b(n*b(l*y[e+132>>2]))*y[e+116>>2])+y[e+68>>2],y[e+72>>2]=b(b(n*b(c*y[e+136>>2]))*y[e+120>>2])+y[e+72>>2],r=y[i+72>>2],o=y[i+68>>2],y[e+80>>2]=b(b(n*y[e+96>>2])*y[i+64>>2])+y[e+80>>2],a=y[e+104>>2],y[e+84>>2]=b(o*b(n*y[e+100>>2]))+y[e+84>>2],y[e+88>>2]=b(r*b(n*a))+y[e+88>>2]),_[t+240>>2]&&(r=y[i+56>>2],o=y[i+52>>2],y[t+64>>2]=b(y[t+112>>2]*b(n*b(y[i+48>>2]*y[t+128>>2])))+y[t+64>>2],y[t+68>>2]=b(b(n*b(o*y[t+132>>2]))*y[t+116>>2])+y[t+68>>2],y[t+72>>2]=b(b(n*b(r*y[t+136>>2]))*y[t+120>>2])+y[t+72>>2],r=y[i+88>>2],o=y[i+84>>2],y[t+80>>2]=b(b(n*y[t+96>>2])*y[i+80>>2])+y[t+80>>2],a=y[t+104>>2],y[t+84>>2]=b(o*b(n*y[t+100>>2]))+y[t+84>>2],y[t+88>>2]=b(r*b(n*a))+y[t+88>>2]),b(n)},o[82]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0);return r=y[i+100>>2],s=y[i+16>>2],l=y[i+20>>2],c=y[i+24>>2],o=y[i+108>>2],o=b(b(b(y[i+112>>2]-b(r*y[i+116>>2]))-b(b(b(b(b(s*y[e+64>>2])+b(l*y[e+68>>2]))+b(c*y[e+72>>2]))+b(b(b(y[i>>2]*y[e+80>>2])+b(y[i+4>>2]*y[e+84>>2]))+b(y[i+8>>2]*y[e+88>>2])))*o))-b(o*b(b(b(b(y[i+48>>2]*y[t+64>>2])+b(y[i+52>>2]*y[t+68>>2]))+b(y[i+56>>2]*y[t+72>>2]))+b(b(b(y[i+32>>2]*y[t+80>>2])+b(y[i+36>>2]*y[t+84>>2]))+b(y[i+40>>2]*y[t+88>>2]))))),n=(u=b(r+o))<(a=y[i+120>>2]),y[i+100>>2]=n?a:u,r=n?b(a-r):o,_[e+240>>2]&&(y[e+64>>2]=b(y[e+112>>2]*b(r*b(s*y[e+128>>2])))+y[e+64>>2],y[e+68>>2]=b(b(r*b(l*y[e+132>>2]))*y[e+116>>2])+y[e+68>>2],y[e+72>>2]=b(b(r*b(c*y[e+136>>2]))*y[e+120>>2])+y[e+72>>2],o=y[i+72>>2],a=y[i+68>>2],y[e+80>>2]=b(b(r*y[e+96>>2])*y[i+64>>2])+y[e+80>>2],s=y[e+104>>2],y[e+84>>2]=b(a*b(r*y[e+100>>2]))+y[e+84>>2],y[e+88>>2]=b(o*b(r*s))+y[e+88>>2]),_[t+240>>2]&&(o=y[i+56>>2],a=y[i+52>>2],y[t+64>>2]=b(y[t+112>>2]*b(r*b(y[i+48>>2]*y[t+128>>2])))+y[t+64>>2],y[t+68>>2]=b(b(r*b(a*y[t+132>>2]))*y[t+116>>2])+y[t+68>>2],y[t+72>>2]=b(b(r*b(o*y[t+136>>2]))*y[t+120>>2])+y[t+72>>2],o=y[i+88>>2],a=y[i+84>>2],y[t+80>>2]=b(b(r*y[t+96>>2])*y[i+80>>2])+y[t+80>>2],s=y[t+104>>2],y[t+84>>2]=b(a*b(r*y[t+100>>2]))+y[t+84>>2],y[t+88>>2]=b(o*b(r*s))+y[t+88>>2]),b(r)},o[83]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=0;return(r=y[i+128>>2])!=b(0)&&(_[4729]=_[4729]+1,n=y[i+96>>2],o=b(r-b(n*y[i+116>>2])),a=y[i+16>>2],s=y[i+20>>2],l=y[i+24>>2],r=y[i+108>>2],r=b(b(o-b(b(b(b(b(a*y[e+144>>2])+b(s*y[e+148>>2]))+b(l*y[e+152>>2]))+b(b(b(y[i>>2]*y[e+160>>2])+b(y[i+4>>2]*y[e+164>>2]))+b(y[i+8>>2]*y[e+168>>2])))*r))-b(r*b(b(b(b(y[i+48>>2]*y[t+144>>2])+b(y[i+52>>2]*y[t+148>>2]))+b(y[i+56>>2]*y[t+152>>2]))+b(b(b(y[i+32>>2]*y[t+160>>2])+b(y[i+36>>2]*y[t+164>>2]))+b(y[i+40>>2]*y[t+168>>2]))))),u=(c=b(n+r))<(o=y[i+120>>2]),y[i+96>>2]=u?o:c,n=u?b(o-n):r,_[e+240>>2]&&(y[e+144>>2]=b(y[e+112>>2]*b(n*b(a*y[e+128>>2])))+y[e+144>>2],y[e+148>>2]=b(b(n*b(s*y[e+132>>2]))*y[e+116>>2])+y[e+148>>2],y[e+152>>2]=b(b(n*b(l*y[e+136>>2]))*y[e+120>>2])+y[e+152>>2],r=y[i+72>>2],o=y[i+68>>2],y[e+160>>2]=b(b(n*y[e+96>>2])*y[i+64>>2])+y[e+160>>2],a=y[e+104>>2],y[e+164>>2]=b(o*b(n*y[e+100>>2]))+y[e+164>>2],y[e+168>>2]=b(r*b(n*a))+y[e+168>>2]),_[t+240>>2]&&(r=y[i+56>>2],o=y[i+52>>2],y[t+144>>2]=b(y[t+112>>2]*b(n*b(y[i+48>>2]*y[t+128>>2])))+y[t+144>>2],y[t+148>>2]=b(b(n*b(o*y[t+132>>2]))*y[t+116>>2])+y[t+148>>2],y[t+152>>2]=b(b(n*b(r*y[t+136>>2]))*y[t+120>>2])+y[t+152>>2],r=y[i+88>>2],o=y[i+84>>2],y[t+160>>2]=b(b(n*y[t+96>>2])*y[i+80>>2])+y[t+160>>2],a=y[t+104>>2],y[t+164>>2]=b(o*b(n*y[t+100>>2]))+y[t+164>>2],y[t+168>>2]=b(r*b(n*a))+y[t+168>>2])),b(n)},o[84]=Ye,o[85]=function(e){(e=Ye(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[86]=Hi,o[87]=function(e,t,i,n,r,a,s,l,c,u){return e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,s|=0,l|=0,c|=0,u|=0,B=u=B-16|0,o[_[4565]](2515),b(o[_[_[e>>2]+44>>2]](e,t,i,n,r,a,s,l,c)),b(o[_[_[e>>2]+48>>2]](e,t,i,n,r,a,s,l,c)),b(o[_[_[e>>2]+36>>2]](e,t,i,l)),o[_[4566]](),B=u+16|0,b(b(0))},o[88]=Hi,o[89]=function(e){_[232+(e|=0)>>2]=0},o[90]=Ve,o[91]=function(e,t,i,n){e|=0,t|=0,n|=0;var r=0;if((0|(i|=0))>=1)for(;X(e,_[(r<<2)+t>>2],n),(0|(r=r+1|0))!=(0|i););},o[92]=function(e,t,i,n,r,a,s,l,c){e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,l|=0;var u=b(0),h=b(0);e:if(!(!_[l+52>>2]|_[l+20>>2]<1))for(t=0;;){if(u=b(0),i=0,(0|(r=_[e+28>>2]))>=1)for(;h=u,a=_[e+16>>2],n=_[e+36>>2]+A(_[_[e+116>>2]+(i<<2)>>2],152)|0,u=b(o[_[e+220>>2]](a+A(_[n+144>>2],244)|0,A(_[n+148>>2],244)+a|0,n)),u=b(h+b(u*u)),(0|r)!=(0|(i=i+1|0)););if(u<=y[l+92>>2])break e;if((0|t)>=((i=_[l+20>>2])+-1|0))break e;if(!((0|(t=t+1|0))<(0|i)))break}},o[93]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,s=b(0),l=b(0),c=0,u=0,h=0,p=b(0),f=b(0),m=b(0),v=b(0),g=0,T=0;if(4&(t=_[n+72>>2])&&!((0|(c=_[e+28>>2]))<1))for(u=16&t,h=_[e+76>>2],g=_[e+36>>2],t=0;i=g+A(t,152)|0,r=_[i+132>>2],_[r+132>>2]=_[i+100>>2],i=h+A(_[i+140>>2],152)|0,_[r+136>>2]=_[i+100>>2],u&&(_[r+140>>2]=_[i+252>>2]),(0|c)!=(0|(t=t+1|0)););if((0|(g=_[e+48>>2]))>=1)for(T=_[e+56>>2],r=0;i=A(r,152)+T|0,c=_[i+132>>2],(t=_[c+44>>2])&&(u=_[c+28>>2],p=y[u+416>>2],f=y[i+24>>2],m=y[u+412>>2],v=y[i+20>>2],s=y[i+100>>2],l=b(b(1)/y[n+12>>2]),y[t>>2]=y[t>>2]+b(b(b(y[i+16>>2]*s)*y[u+408>>2])*l),y[t+4>>2]=b(b(m*b(s*v))*l)+y[t+4>>2],y[t+8>>2]=b(b(p*b(s*f))*l)+y[t+8>>2],h=_[c+32>>2],p=y[h+416>>2],f=y[i+56>>2],m=y[h+412>>2],v=y[i+52>>2],s=y[i+100>>2],l=b(b(1)/y[n+12>>2]),y[t+32>>2]=y[t+32>>2]+b(b(b(y[i+48>>2]*s)*y[h+408>>2])*l),y[t+36>>2]=b(b(m*b(s*v))*l)+y[t+36>>2],y[t+40>>2]=b(b(p*b(s*f))*l)+y[t+40>>2],p=y[u+612>>2],f=y[i+8>>2],m=y[u+608>>2],v=y[i+4>>2],s=y[i+100>>2],l=b(b(1)/y[n+12>>2]),y[t+16>>2]=y[t+16>>2]+b(b(b(y[i>>2]*y[u+604>>2])*s)*l),y[t+20>>2]=b(b(s*b(v*m))*l)+y[t+20>>2],y[t+24>>2]=b(b(s*b(f*p))*l)+y[t+24>>2],p=y[h+612>>2],f=y[i+40>>2],m=y[h+608>>2],v=y[i+36>>2],s=y[i+100>>2],l=b(b(1)/y[n+12>>2]),y[t+48>>2]=y[t+48>>2]+b(b(b(y[i+32>>2]*y[h+604>>2])*s)*l),y[t+52>>2]=b(b(s*b(v*m))*l)+y[t+52>>2],y[t+56>>2]=b(b(s*b(f*p))*l)+y[t+56>>2]),s=y[i+100>>2],y[c+36>>2]=s,b(x(s))>=y[c+16>>2]&&(a[c+20|0]=0),(0|g)!=(0|(r=r+1|0)););if((0|(r=_[e+8>>2]))>=1)for(u=_[e+16>>2],h=0;c=A(h,244),(i=_[240+(t=c+u|0)>>2])&&(_[n+52>>2]?(U(t,y[n+12>>2],y[n+60>>2]),u=_[e+16>>2],s=y[176+(t=c+u|0)>>2],i=_[t+240>>2],l=y[t+184>>2],p=y[t+180>>2]):(s=b(y[t+64>>2]+y[t+176>>2]),y[t+176>>2]=s,y[t+192>>2]=y[t+80>>2]+y[t+192>>2],p=b(y[t+68>>2]+y[t+180>>2]),y[t+180>>2]=p,l=b(y[t+72>>2]+y[t+184>>2]),y[t+184>>2]=l,y[t+196>>2]=y[t+84>>2]+y[t+196>>2],y[t+200>>2]=y[t+88>>2]+y[t+200>>2]),f=y[212+(t=c+u|0)>>2],m=y[t+216>>2],v=y[t+208>>2],_[i+384>>2]=0,y[i+372>>2]=s+v,_[i+304>>2]=_[i+304>>2]+1,y[i+380>>2]=l+m,y[i+376>>2]=p+f,t=c+_[e+16>>2]|0,s=y[t+228>>2],l=y[t+196>>2],p=y[t+232>>2],f=y[t+200>>2],m=y[t+224>>2],v=y[t+192>>2],t=_[t+240>>2],_[t+400>>2]=0,y[t+388>>2]=v+m,y[t+396>>2]=f+p,y[t+392>>2]=l+s,_[t+304>>2]=_[t+304>>2]+1,_[n+52>>2]&&(i=c+_[e+16>>2]|0,t=_[i+240>>2],_[t+304>>2]=_[t+304>>2]+1,r=_[i+12>>2],_[t+12>>2]=_[i+8>>2],_[t+16>>2]=r,r=_[i+4>>2],_[t+4>>2]=_[i>>2],_[t+8>>2]=r,r=_[i+28>>2],_[t+28>>2]=_[i+24>>2],_[t+32>>2]=r,r=_[i+20>>2],_[t+20>>2]=_[i+16>>2],_[t+24>>2]=r,r=_[i+36>>2],_[t+36>>2]=_[i+32>>2],_[t+40>>2]=r,r=_[i+44>>2],_[t+44>>2]=_[i+40>>2],_[t+48>>2]=r,r=_[i+60>>2],_[t+60>>2]=_[i+56>>2],_[t+64>>2]=r,r=_[i+52>>2],_[t+52>>2]=_[i+48>>2],_[t+56>>2]=r),u=_[e+16>>2],_[_[240+(c+u|0)>>2]+212>>2]=-1,r=_[e+8>>2]),(0|(h=h+1|0))<(0|r););return _[e+28>>2]>-1|_[e+32>>2]>-1||((t=_[e+36>>2])&&(d[e+40|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+36>>2]=0),_[e+32>>2]=0,_[e+36>>2]=0,a[e+40|0]=1),_[e+28>>2]=0,_[e+48>>2]>-1|_[e+52>>2]>-1||((t=_[e+56>>2])&&(d[e+60|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+56>>2]=0),_[e+52>>2]=0,_[e+56>>2]=0,a[e+60|0]=1),_[e+48>>2]=0,_[e+68>>2]>-1|_[e+72>>2]>-1||((t=_[e+76>>2])&&(d[e+80|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+76>>2]=0),_[e+72>>2]=0,_[e+76>>2]=0,a[e+80|0]=1),_[e+68>>2]=0,_[e+88>>2]>-1|_[e+92>>2]>-1||((t=_[e+96>>2])&&(d[e+100|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+96>>2]=0),_[e+92>>2]=0,_[e+96>>2]=0,a[e+100|0]=1),_[e+88>>2]=0,_[e+8>>2]>-1|_[e+12>>2]>-1||((t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+12>>2]=0,_[e+16>>2]=0,a[e+20|0]=1),_[e+8>>2]=0,b(b(0))},o[94]=function(e,t,i,n,r,s,l,c,u,h){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0,l|=0,c|=0,u|=0,h|=0;var p=b(0),f=b(0),m=0,v=0,g=b(0),x=0,T=0,S=0;if(1&a[u+72|0]){if(x=_[e+68>>2],v=_[e+28>>2],(0|(m=_[e+48>>2]))>=1){if(r=A(_[e+232>>2],1664525)+1013904223|0,1!=(0|m)&&(i=2,n=_[e+136>>2],s=_[n+4>>2],h=(r=A(r,1664525)+1013904223|0)^r>>>16,h^=h>>>8,h^=h>>>4,h=n+((1&((h^=h>>>2)>>>1^h))<<2)|0,_[n+4>>2]=_[h>>2],_[h>>2]=s,2!=(0|m)))for(;S=_[(s=n+(i<<2)|0)>>2],T=s,s=r=A(r,1664525)+1013904223|0,(i=i+1|0)>>>0>65536||(s=h=r>>>16^r,i>>>0>256||(s=h^=h>>>8,i>>>0>16||(s=h^=h>>>4,i>>>0>4||(s=h^h>>>2)))),s=((s>>>0)%(i>>>0)<<2)+n|0,_[T>>2]=_[s>>2],_[s>>2]=S,(0|i)!=(0|m););_[e+232>>2]=r}if(!(_[u+20>>2]<=(0|t))){if((0|v)>=1){if(r=A(_[e+232>>2],1664525)+1013904223|0,1!=(0|v)&&(i=2,n=_[e+116>>2],s=_[n+4>>2],h=(r=A(r,1664525)+1013904223|0)^r>>>16,h^=h>>>8,h^=h>>>4,h=n+((1&((h^=h>>>2)>>>1^h))<<2)|0,_[n+4>>2]=_[h>>2],_[h>>2]=s,2!=(0|v)))for(;h=_[(s=n+(i<<2)|0)>>2],T=s,s=r=A(r,1664525)+1013904223|0,(i=i+1|0)>>>0>65536||(s=m=r>>>16^r,i>>>0>256||(s=m^=m>>>8,i>>>0>16||(s=m^=m>>>4,i>>>0>4||(s=m^m>>>2)))),s=((s>>>0)%(i>>>0)<<2)+n|0,_[T>>2]=_[s>>2],_[s>>2]=h,(0|i)!=(0|v););_[e+232>>2]=r}if(!((0|x)<1)){if(r=A(_[e+232>>2],1664525)+1013904223|0,1!=(0|x)&&(i=2,n=_[e+156>>2],s=_[n+4>>2],h=(r=A(r,1664525)+1013904223|0)^r>>>16,h^=h>>>8,h^=h>>>4,h=n+((1&((h^=h>>>2)>>>1^h))<<2)|0,_[n+4>>2]=_[h>>2],_[h>>2]=s,2!=(0|x)))for(;m=_[(s=n+(i<<2)|0)>>2],h=s,s=r=A(r,1664525)+1013904223|0,(i=i+1|0)>>>0>65536||(s=v=r>>>16^r,i>>>0>256||(s=v^=v>>>8,i>>>0>16||(s=v^=v>>>4,i>>>0>4||(s=v^v>>>2)))),s=((s>>>0)%(i>>>0)<<2)+n|0,_[h>>2]=_[s>>2],_[s>>2]=m,(0|i)!=(0|x););_[e+232>>2]=r}}}if((0|(r=_[e+48>>2]))>=1)for(i=0;n=_[e+56>>2]+A(_[_[e+136>>2]+(i<<2)>>2],152)|0,_[n+136>>2]>(0|t)&&(f=p,r=_[e+16>>2],p=b(o[_[e+212>>2]](r+A(_[n+144>>2],244)|0,r+A(_[n+148>>2],244)|0,n)),p=b(f+b(p*p)),r=_[e+48>>2]),(0|(i=i+1|0))<(0|r););if(!(_[u+20>>2]<=(0|t))){if((0|c)>=1)for(i=0;n=_[(t=(i<<2)+l|0)>>2],d[n+20|0]&&(n=fn(e,_[n+28>>2],y[u+12>>2]),r=fn(e,_[_[t>>2]+32>>2],y[u+12>>2]),t=_[t>>2],s=A(n,244),n=_[e+16>>2],o[_[_[t>>2]+24>>2]](t,s+n|0,n+A(r,244)|0,y[u+12>>2])),(0|c)!=(0|(i=i+1|0)););n=_[e+28>>2];e:if(512&(t=_[u+72>>2])){if(!((0|n)<1))for(s=16&t?2:1,i=0;f=p,r=_[e+16>>2],t=_[e+36>>2]+A(_[_[e+116>>2]+(i<<2)>>2],152)|0,p=b(o[_[e+216>>2]](r+A(_[t+144>>2],244)|0,r+A(_[t+148>>2],244)|0,t)),p=b(f+b(p*p)),r=A(i,s)<<2,(l=(f=y[t+100>>2])>b(0)^1)||(t=_[e+76>>2]+A(_[r+_[e+156>>2]>>2],152)|0,g=y[t+104>>2],y[t+124>>2]=f*g,y[t+120>>2]=f*b(-g),g=p,c=_[e+16>>2],p=b(o[_[e+212>>2]](c+A(_[t+144>>2],244)|0,c+A(_[t+148>>2],244)|0,t)),p=b(g+b(p*p))),l|!(16&d[u+72|0])||(t=_[e+76>>2]+A(_[4+(r+_[e+156>>2]|0)>>2],152)|0,g=y[t+104>>2],y[t+124>>2]=f*g,y[t+120>>2]=f*b(-g),f=p,r=_[e+16>>2],p=b(o[_[e+212>>2]](r+A(_[t+144>>2],244)|0,r+A(_[t+148>>2],244)|0,t)),p=b(f+b(p*p))),(0|n)!=(0|(i=i+1|0)););}else{if((0|n)>=1)for(i=0;f=p,r=_[e+16>>2],t=_[e+36>>2]+A(_[_[e+116>>2]+(i<<2)>>2],152)|0,p=b(o[_[e+216>>2]](r+A(_[t+144>>2],244)|0,r+A(_[t+148>>2],244)|0,t)),p=b(f+b(p*p)),(0|n)!=(0|(i=i+1|0)););if((0|(i=_[e+68>>2]))<1)break e;for(n=0;t=_[e+76>>2]+A(_[_[e+156>>2]+(n<<2)>>2],152)|0,(f=y[100+(_[e+36>>2]+A(_[t+140>>2],152)|0)>>2])>b(0)&&(g=y[t+104>>2],y[t+124>>2]=f*g,y[t+120>>2]=f*b(-g),f=p,r=_[e+16>>2],p=b(o[_[e+212>>2]](r+A(_[t+144>>2],244)|0,r+A(_[t+148>>2],244)|0,t)),p=b(f+b(p*p))),(0|i)!=(0|(n=n+1|0)););}if(!((0|(i=_[e+88>>2]))<1))for(n=0;t=_[e+96>>2]+A(n,152)|0,(f=y[100+(_[e+36>>2]+A(_[t+140>>2],152)|0)>>2])>b(0)&&(g=f,f=y[t+104>>2],f=(g=b(g*f))>f?f:g,y[t+124>>2]=f,y[t+120>>2]=-f,f=p,r=_[e+16>>2],p=b(o[_[e+212>>2]](r+A(_[t+144>>2],244)|0,r+A(_[t+148>>2],244)|0,t)),p=b(f+b(p*p))),(0|i)!=(0|(n=n+1|0)););}return b(p)},o[95]=function(e,t,i,n,r,s,l,c,u){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0,l|=0,c|=0,u|=0;var h=0,p=0,f=0,m=0,v=b(0),g=0,T=0,S=b(0),E=b(0),C=0,w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=0,L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=0,H=b(0),j=0,Q=0,Z=0,K=0,J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0),ae=b(0),se=b(0),le=b(0),ce=b(0),ue=b(0),he=b(0),pe=b(0),fe=b(0),_e=b(0),de=b(0),me=b(0),ve=b(0);if(B=T=B-256|0,_[e+188>>2]=-1,o[_[4565]](2452),(0|(u=_[c+72>>2]))!=_[e+224>>2]&&(_[e+224>>2]=u,_[e+220>>2]=83,_[e+216>>2]=82,_[e+212>>2]=81),u=0,_[e+184>>2]=0,(0|i)>0)for(;_[_[(u<<2)+t>>2]+212>>2]=-1,(0|(u=u+1|0))!=(0|i););if((0|(f=_[e+12>>2]))<=(0|i)){if(u=0,(f=i+1|0)&&(_[5585]=_[5585]+1,u=0|o[_[4567]](A(f,244),16)),(0|(C=_[e+8>>2]))>=1)for(;p=(h=A(m,244))+u|0,h=h+_[e+16>>2]|0,N=_[h+4>>2],_[p>>2]=_[h>>2],_[p+4>>2]=N,g=_[h+12>>2],_[p+8>>2]=_[h+8>>2],_[p+12>>2]=g,g=_[h+28>>2],_[p+24>>2]=_[h+24>>2],_[p+28>>2]=g,g=_[h+20>>2],_[p+16>>2]=_[h+16>>2],_[p+20>>2]=g,g=_[h+44>>2],_[p+40>>2]=_[h+40>>2],_[p+44>>2]=g,g=_[h+36>>2],_[p+32>>2]=_[h+32>>2],_[p+36>>2]=g,g=_[h+52>>2],_[p+48>>2]=_[h+48>>2],_[p+52>>2]=g,g=_[h+60>>2],_[p+56>>2]=_[h+56>>2],_[p+60>>2]=g,Xi(p- -64|0,h- -64|0,180),(0|C)!=(0|(m=m+1|0)););(h=_[e+16>>2])&&(d[e+20|0]&&h&&(_[5586]=_[5586]+1,o[_[4568]](h)),_[e+16>>2]=0),_[e+16>>2]=u,_[e+12>>2]=f,a[e+20|0]=1}if(p=Pi(T,0,244),(0|(u=_[e+8>>2]))<=-1)for((0|f)<=-1&&((h=_[e+16>>2])&&(d[e+20|0]&&h&&(_[5586]=_[5586]+1,o[_[4568]](h)),_[e+16>>2]=0),_[e+12>>2]=0,_[e+16>>2]=0,a[e+20|0]=1),m=p- -64|0;f=_[p+4>>2],h=_[e+16>>2]+A(u,244)|0,_[h>>2]=_[p>>2],_[h+4>>2]=f,f=_[p+12>>2],_[h+8>>2]=_[p+8>>2],_[h+12>>2]=f,f=_[p+28>>2],_[h+24>>2]=_[p+24>>2],_[h+28>>2]=f,f=_[p+20>>2],_[h+16>>2]=_[p+16>>2],_[h+20>>2]=f,f=_[p+44>>2],_[h+40>>2]=_[p+40>>2],_[h+44>>2]=f,f=_[p+36>>2],_[h+32>>2]=_[p+32>>2],_[h+36>>2]=f,f=_[p+52>>2],_[h+48>>2]=_[p+48>>2],_[h+52>>2]=f,f=_[p+60>>2],_[h+56>>2]=_[p+56>>2],_[h+60>>2]=f,Xi(h- -64|0,m,180),f=(h=u+1|0)>>>0>=u>>>0,u=h,f;);if(_[e+8>>2]=0,(0|i)>=1)for(u=0;f=fn(e,_[(h=(u<<2)+t|0)>>2],y[c+12>>2]),!(m=_[h>>2])|!(2&_[m+252>>2])|y[m+404>>2]==b(0)||(T=_[e+16>>2],2&(h=_[m+564>>2])&&(q(p,m,y[c+84>>2]),w=y[m+364>>2],k=y[m+332>>2],P=y[m+348>>2],I=y[m+360>>2],F=y[m+328>>2],M=y[m+344>>2],h=T+A(f,244)|0,v=y[p>>2],S=y[p+4>>2],O=y[p+8>>2],E=y[c+12>>2],y[h+224>>2]=y[h+224>>2]-b(b(b(b(v*y[m+324>>2])+b(S*y[m+340>>2]))+b(O*y[m+356>>2]))*E),y[h+228>>2]=y[h+228>>2]-b(E*b(b(b(v*F)+b(S*M))+b(O*I))),y[h+232>>2]=y[h+232>>2]-b(E*b(b(b(v*k)+b(S*P))+b(O*w))),h=_[m+564>>2]),4&h&&(W(p,m,y[c+12>>2]),v=y[p+8>>2],S=y[p+4>>2],h=T+A(f,244)|0,y[h+224>>2]=y[p>>2]+y[h+224>>2],y[h+228>>2]=S+y[h+228>>2],y[h+232>>2]=v+y[h+232>>2],h=_[m+564>>2]),8&h&&(Y(p,m,y[c+12>>2]),v=y[p+8>>2],S=y[p+4>>2],h=T+A(f,244)|0,y[h+224>>2]=y[p>>2]+y[h+224>>2],y[h+228>>2]=S+y[h+228>>2],y[h+232>>2]=v+y[h+232>>2])),(0|(u=u+1|0))!=(0|i););if(u=0,(0|l)>0)for(;t=_[(u<<2)+s>>2],o[_[_[t>>2]+8>>2]](t),_[t+36>>2]=0,(0|(u=u+1|0))!=(0|l););if(!((0|(i=_[e+168>>2]))>=(0|l)|_[e+172>>2]>=(0|l))){if(l?(_[5585]=_[5585]+1,t=0|o[_[4567]](l<<3,16),i=_[e+168>>2]):t=0,(0|i)>=1)for(u=0;m=(h=u<<3)+t|0,h=h+_[e+176>>2]|0,f=_[h+4>>2],_[m>>2]=_[h>>2],_[m+4>>2]=f,(0|(u=u+1|0))!=(0|i););(i=_[e+176>>2])&&(d[e+180|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+176>>2]=0),_[e+176>>2]=t,_[e+172>>2]=l,a[e+180|0]=1}if(_[e+168>>2]=l,t=0,(0|l)>=1)for(u=0;m=_[e+176>>2],i=_[(f=(u<<2)+s|0)>>2],(h=_[i+44>>2])&&(_[h>>2]=0,_[h+4>>2]=0,_[h+56>>2]=0,_[h+60>>2]=0,_[h+48>>2]=0,_[h+52>>2]=0,_[h+40>>2]=0,_[h+44>>2]=0,_[h+32>>2]=0,_[h+36>>2]=0,_[h+24>>2]=0,_[h+28>>2]=0,_[h+16>>2]=0,_[h+20>>2]=0,_[h+8>>2]=0,_[h+12>>2]=0,i=_[f>>2]),h=m+(u<<3)|0,d[i+20|0]?(o[_[_[i>>2]+16>>2]](i,h),i=_[h>>2]):(_[h>>2]=0,_[h+4>>2]=0,i=0),t=i+t|0,(0|(u=u+1|0))!=(0|l););if(!((0|(i=_[e+48>>2]))>=(0|t)|_[e+52>>2]>=(0|t))){if(t?(_[5585]=_[5585]+1,m=0|o[_[4567]](A(t,152),16),i=_[e+48>>2]):m=0,(0|i)>=1)for(u=0;Xi((h=A(u,152))+m|0,h+_[e+56>>2]|0,152),(0|(u=u+1|0))!=(0|i););(i=_[e+56>>2])&&(d[e+60|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+56>>2]=0),_[e+56>>2]=m,_[e+52>>2]=t,a[e+60|0]=1}if(_[e+48>>2]=t,(0|l)>=1)for(u=_[e+176>>2];;){if(_[(N=(Q=V<<3)+u|0)>>2]){if(g=_[(j=(V<<2)+s|0)>>2],i=_[g+32>>2],t=_[e+56>>2],f=fn(e,u=_[g+28>>2],y[c+12>>2]),C=fn(e,i,y[c+12>>2]),Z=_[e+16>>2],(0|(T=(0|(h=_[g+24>>2]))>0?h:_[c+20>>2]))>_[e+184>>2]&&(_[e+184>>2]=T),m=t+A(K,152)|0,t=0,_[N>>2]>=1)for(;h=Pi(m+A(t,152)|0,0,152),_[h+120>>2]=-8388609,_[h+124>>2]=2139095039,_[h+148>>2]=C,_[h+144>>2]=f,_[h+96>>2]=0,_[h+100>>2]=0,_[h+136>>2]=T,(0|(t=t+1|0))<_[N>>2];);if(T=Z+A(f,244)|0,_[(t=T)+64>>2]=0,_[t+68>>2]=0,_[t+144>>2]=0,_[t+148>>2]=0,_[t+88>>2]=0,_[t+92>>2]=0,_[t+80>>2]=0,_[t+84>>2]=0,_[t+72>>2]=0,_[t+76>>2]=0,_[t+152>>2]=0,_[t+156>>2]=0,_[t+160>>2]=0,_[t+164>>2]=0,_[t+168>>2]=0,_[t+172>>2]=0,C=Z+A(C,244)|0,_[(t=C)+88>>2]=0,_[t+92>>2]=0,_[t+80>>2]=0,_[t+84>>2]=0,_[t+72>>2]=0,_[t+76>>2]=0,_[t+64>>2]=0,_[t+68>>2]=0,_[t+144>>2]=0,_[t+148>>2]=0,_[t+152>>2]=0,_[t+156>>2]=0,_[t+160>>2]=0,_[t+164>>2]=0,_[t+168>>2]=0,_[t+172>>2]=0,y[p>>2]=b(1)/y[c+12>>2],t=_[c+32>>2],_[p+28>>2]=m+112,_[p+24>>2]=38,_[p+20>>2]=m+32,_[p+16>>2]=m+48,_[p+12>>2]=m,_[p+8>>2]=m+16,_[p+4>>2]=t,_[m+116>>2]=_[c+40>>2],t=_[c+4>>2],_[p+40>>2]=m+124,_[p+36>>2]=m+120,_[p+32>>2]=m+116,_[p+48>>2]=t,_[p+44>>2]=_[c+20>>2],t=_[j>>2],o[_[_[t>>2]+20>>2]](t,p),_[N>>2]>=1)for(h=0;t=m+A(h,152)|0,v=y[_[j>>2]+16>>2],y[t+124>>2]>=v&&(y[t+124>>2]=v),v=b(-v),y[t+120>>2]<=v&&(y[t+120>>2]=v),_[t+132>>2]=g,f=_[g+28>>2],E=y[f+328>>2],w=y[f+332>>2],k=y[f+608>>2],P=y[f+348>>2],I=y[f+340>>2],F=y[f+344>>2],v=y[f+612>>2],O=y[f+364>>2],S=y[f+356>>2],M=y[f+360>>2],L=y[f+604>>2],R=y[f+324>>2],_[t+76>>2]=0,D=v,v=y[t>>2],z=b(S*v),S=y[t+4>>2],G=O,O=y[t+8>>2],y[t+72>>2]=D*b(b(z+b(M*S))+b(G*O)),y[t+68>>2]=k*b(b(b(v*I)+b(S*F))+b(O*P)),y[t+64>>2]=L*b(b(b(R*v)+b(E*S))+b(w*O)),f=_[g+32>>2],P=y[f+328>>2],I=y[f+332>>2],F=y[f+608>>2],M=y[f+348>>2],L=y[f+340>>2],R=y[f+344>>2],E=y[f+612>>2],k=y[f+364>>2],w=y[f+356>>2],U=y[f+360>>2],X=y[f+604>>2],z=y[f+324>>2],_[t+92>>2]=0,D=E,E=y[t+32>>2],H=b(w*E),w=y[t+36>>2],G=k,k=y[t+40>>2],y[t+88>>2]=D*b(b(H+b(U*w))+b(G*k)),y[t+84>>2]=F*b(b(b(E*L)+b(w*R))+b(k*M)),y[t+80>>2]=X*b(b(b(z*E)+b(P*w))+b(I*k)),P=b(0),I=y[t+16>>2],F=y[u+404>>2],M=y[t+20>>2],L=y[t+24>>2],D=b(b(b(b(I*b(I*F))+b(M*b(F*M)))+b(L*b(F*L)))+b(b(b(v*b(b(b(v*y[u+324>>2])+b(S*y[u+328>>2]))+b(O*y[u+332>>2])))+b(S*b(b(b(v*y[u+340>>2])+b(S*y[u+344>>2]))+b(O*y[u+348>>2]))))+b(O*b(b(b(v*y[u+356>>2])+b(S*y[u+360>>2]))+b(O*y[u+364>>2]))))),F=y[t+48>>2],R=y[i+404>>2],U=y[t+52>>2],X=y[t+56>>2],R=b(b(D+b(b(b(F*b(F*R))+b(U*b(R*U)))+b(X*b(R*X))))+b(b(b(E*b(b(b(E*y[i+324>>2])+b(w*y[i+328>>2]))+b(k*y[i+332>>2])))+b(w*b(b(b(E*y[i+340>>2])+b(w*y[i+344>>2]))+b(k*y[i+348>>2]))))+b(k*b(b(b(E*y[i+356>>2])+b(w*y[i+360>>2]))+b(k*y[i+364>>2]))))),R=b(x(R))>b(1.1920928955078125e-7)?b(b(1)/R):b(0),y[t+108>>2]=R,z=b(0),D=b(0),G=b(0),H=b(0),J=b(0),$=b(0),_[T+240>>2]&&($=y[T+232>>2],J=y[T+228>>2],H=y[T+224>>2],D=y[T+212>>2],G=y[T+208>>2],z=y[T+216>>2]),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),_[C+240>>2]&&(re=y[C+232>>2],ne=y[C+228>>2],ie=y[C+224>>2],ee=y[C+212>>2],te=y[C+208>>2],P=y[C+216>>2]),oe=y[u+380>>2],ae=y[u+372>>2],se=y[u+376>>2],le=y[u+396>>2],ce=y[u+388>>2],ue=y[u+392>>2],he=y[i+380>>2],pe=y[i+372>>2],fe=y[i+376>>2],_e=y[i+396>>2],de=y[i+388>>2],me=y[i+392>>2],ve=y[p+48>>2],_[t+100>>2]=0,y[t+112>>2]=b(R*y[t+112>>2])+b(R*b(b(0)-b(ve*b(b(b(b(b(I*b(G+ae))+b(M*b(D+se)))+b(L*b(z+oe)))+b(b(b(v*b(H+ce))+b(S*b(J+ue)))+b(O*b($+le))))+b(b(b(b(F*b(te+pe))+b(U*b(ee+fe)))+b(X*b(P+he)))+b(b(b(E*b(ie+de))+b(w*b(ne+me)))+b(k*b(re+_e)))))))),(0|(h=h+1|0))<_[N>>2];);u=_[e+176>>2]}if(K=_[u+Q>>2]+K|0,(0|(V=V+1|0))==(0|l))break}if(o[_[_[e>>2]+28>>2]](e,n,r,c),n=_[e+68>>2],i=_[e+28>>2],!((0|(h=_[e+128>>2]))>=(0|(r=_[e+48>>2]))|_[e+132>>2]>=(0|r))){u=0,t=0,r&&(_[5585]=_[5585]+1,t=0|o[_[4567]](r<<2,16),h=_[e+128>>2]),s=_[e+136>>2];e:{t:{if((0|h)>=1)for(;;)if(_[(l=u<<2)+t>>2]=_[s+l>>2],(0|h)==(0|(u=u+1|0)))break t;if(!s)break e}d[e+140|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[e+136>>2]=0}_[e+136>>2]=t,_[e+132>>2]=r,a[e+140|0]=1}if(_[e+128>>2]=r,16&d[c+72|0]){if(!((0|(h=_[e+108>>2]))>=(0|(l=i<<1))|_[e+112>>2]>=(0|l))){u=0,t=0,i&&(_[5585]=_[5585]+1,t=0|o[_[4567]](i<<3,16),h=_[e+108>>2]),s=_[e+116>>2];e:{t:{if((0|h)>=1)for(;;)if(_[(c=u<<2)+t>>2]=_[s+c>>2],(0|h)==(0|(u=u+1|0)))break t;if(!s)break e}d[e+120|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[e+116>>2]=0}_[e+116>>2]=t,_[e+112>>2]=l,a[e+120|0]=1}_[e+108>>2]=l}else{if(!((0|(h=_[e+108>>2]))>=(0|i)|_[e+112>>2]>=(0|i))){u=0,t=0,i&&(_[5585]=_[5585]+1,t=0|o[_[4567]](i<<2,16),h=_[e+108>>2]),s=_[e+116>>2];e:{t:{if((0|h)>=1)for(;;)if(_[(l=u<<2)+t>>2]=_[s+l>>2],(0|h)==(0|(u=u+1|0)))break t;if(!s)break e}d[e+120|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[e+116>>2]=0}_[e+116>>2]=t,_[e+112>>2]=i,a[e+120|0]=1}_[e+108>>2]=i}if(!((0|(h=_[e+148>>2]))>=(0|n)|_[e+152>>2]>=(0|n))){u=0,t=0,n&&(_[5585]=_[5585]+1,t=0|o[_[4567]](n<<2,16),h=_[e+148>>2]),s=_[e+156>>2];e:{t:{if((0|h)>=1)for(;;)if(_[(l=u<<2)+t>>2]=_[s+l>>2],(0|h)==(0|(u=u+1|0)))break t;if(!s)break e}d[e+160|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[e+156>>2]=0}_[e+156>>2]=t,_[e+152>>2]=n,a[e+160|0]=1}if(_[e+148>>2]=n,(0|r)>=1)for(t=_[e+136>>2],u=0;_[t+(u<<2)>>2]=u,(0|r)!=(0|(u=u+1|0)););if((0|i)>=1)for(t=_[e+116>>2],u=0;_[t+(u<<2)>>2]=u,(0|i)!=(0|(u=u+1|0)););if((0|n)>=1)for(e=_[e+156>>2],u=0;_[e+(u<<2)>>2]=u,(0|n)!=(0|(u=u+1|0)););return o[_[4566]](),B=p+256|0,b(b(0))},o[96]=function(e,t,i,n,r,a,s,l,c){e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,s|=0,l|=0,c|=0;var u,h=0,p=0,f=b(0),d=0;B=u=B-16|0,o[_[4565]](2481),o[_[_[e>>2]+32>>2]](e,t,i,n,r,a,s,l,c);e:if(!((0|(p=(0|(h=_[e+184>>2]))>(0|(p=_[l+20>>2]))?h:p))<1))for(d=p+-1|0,h=0;;){if(f=b(o[_[_[e>>2]+40>>2]](e,h,t,i,n,r,a,s,l,c)),y[e+228>>2]=f,(0|h)>=(0|d)|f<=y[l+92>>2])break e;if(!((0|(h=h+1|0))<(0|p)))break}return o[_[4566]](),B=u+16|0,b(b(0))},o[97]=ao,o[98]=function(e){var t;_[(e|=0)>>2]=2616,(t=_[e+296>>2])&&(d[e+300|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+296>>2]=0),_[e+296>>2]=0,_[e+288>>2]=0,_[e+292>>2]=0,a[e+300|0]=1,e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[99]=function(e){return 264},o[100]=ze,o[101]=function(e,t){var i,n=0,r=0,a=0,s=0,l=0;a=t|=0,s=0|o[_[_[(e|=0)>>2]+16>>2]](e),l=1,r=_[_[t>>2]+16>>2],n=0|o[r](0|a,0|s,0|l),l=t,s=n,a=0|o[_[_[e>>2]+20>>2]](e,_[n+8>>2],t),i=e,r=_[_[t>>2]+20>>2],o[r](0|l,0|s,0|a,1245859651,0|i)},o[102]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,a,s=0,l=b(0);B=n=B-96|0,r=_[_[e>>2]>>2],a=_[_[e+4>>2]>>2],o[_[_[t>>2]+24>>2]](t,r,a)&&(s=_[r+192>>2],_[n+88>>2]=-1,_[n+92>>2]=-1,_[n+84>>2]=r+4,_[n+80>>2]=r,_[n+76>>2]=s,_[n+72>>2]=0,s=_[a+192>>2],_[n+64>>2]=-1,_[n+68>>2]=-1,_[n+60>>2]=a+4,_[n+56>>2]=a,_[n+52>>2]=s,_[n+48>>2]=0,(_[e+8>>2]||(t=0|o[_[_[t>>2]+8>>2]](t,n+72|0,n+48|0,0,1),_[e+8>>2]=t,t))&&(_[32+(t=n+8|0)>>2]=0,_[t+12>>2]=n+48,_[t+8>>2]=n+72,_[t+4>>2]=0,_[t>>2]=5816,e=_[e+8>>2],1!=_[i+8>>2]?(l=b(o[_[_[e>>2]+12>>2]](e,r,a,i,t)),y[i+12>>2]>l&&(y[i+12>>2]=l)):o[_[_[e>>2]+8>>2]](e,n+72|0,n+48|0,i,t))),B=n+96|0},o[103]=function(e){var t;return _[(e|=0)>>2]=2708,(t=_[e+20>>2])&&(d[e+24|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+20>>2]=0),_[e+20>>2]=0,_[e+12>>2]=0,_[e+16>>2]=0,a[e+24|0]=1,0|e},o[104]=function(e){var t;_[(e|=0)>>2]=2708,(t=_[e+20>>2])&&(d[e+24|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+20>>2]=0),_[e+20>>2]=0,_[e+12>>2]=0,_[e+16>>2]=0,a[e+24|0]=1,Bi(e)},o[105]=function(e,t,i,n,r){var a,s;return e|=0,t|=0,i|=0,n|=0,r|=0,B=a=B-16|0,_[a+12>>2]=n,_[a+8>>2]=e,n=_[_[i+4>>2]+4>>2],s=_[_[t+4>>2]+4>>2],1!=(0|r)?(e=_[5260+((A(s,144)+e|0)+(n<<2)|0)>>2],e=0|o[_[_[e>>2]+8>>2]](e,a+8|0,t,i)):(e=_[76+((A(s,144)+e|0)+(n<<2)|0)>>2],e=0|o[_[_[e>>2]+8>>2]](e,a+8|0,t,i)),B=a+16|0,0|e},o[106]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=0,s=0,l=b(0),c=b(0),u=0,h=0;B=n=B-16|0,_[4734]=_[4734]+1,2&_[e+4>>2]?(s=_[t+192>>2],l=b(o[_[_[s>>2]+20>>2]](s,y[4561])),y[n+12>>2]=l,s=_[i+192>>2],c=b(o[_[_[s>>2]+20>>2]](s,y[4561])),y[n+8>>2]=c,s=l<c?n+12|0:n+8|0):s=18244,u=_[s>>2],l=y[i+184>>2],c=y[t+184>>2],r=_[e+72>>2];e:{if(s=_[r+12>>2])_[r+12>>2]=_[s>>2],_[r+8>>2]=_[r+8>>2]+-1;else{if(s=0,4&d[e+4|0])break e;_[5585]=_[5585]+1,s=0|o[_[4567]](868,16)}if(_[s>>2]=1025,_[s+168>>2]=0,_[(r=s)+160>>2]=0,_[r+164>>2]=0,_[r+152>>2]=0,_[r+156>>2]=0,_[r+144>>2]=0,_[r+148>>2]=0,_[r+136>>2]=0,_[r+140>>2]=0,_[r+128>>2]=0,_[r+132>>2]=0,_[r+120>>2]=0,_[r+124>>2]=0,_[r+328>>2]=0,_[r+332>>2]=0,_[r+336>>2]=0,_[r+340>>2]=0,_[r+344>>2]=0,_[r+348>>2]=0,_[r+352>>2]=0,_[r+356>>2]=0,_[r+360>>2]=0,_[r+364>>2]=0,_[r+368>>2]=0,_[r+372>>2]=0,_[r+376>>2]=0,_[r+536>>2]=0,_[r+540>>2]=0,_[r+544>>2]=0,_[r+548>>2]=0,_[r+552>>2]=0,_[r+556>>2]=0,_[r+560>>2]=0,_[r+564>>2]=0,_[r+568>>2]=0,_[r+572>>2]=0,_[r+576>>2]=0,_[r+580>>2]=0,_[r+584>>2]=0,_[r+792>>2]=0,_[r+784>>2]=0,_[r+788>>2]=0,_[r+776>>2]=0,_[r+780>>2]=0,_[r+768>>2]=0,_[r+772>>2]=0,_[r+760>>2]=0,_[r+764>>2]=0,_[r+752>>2]=0,_[r+756>>2]=0,_[r+744>>2]=0,_[r+748>>2]=0,_[r+836>>2]=t,_[r+840>>2]=i,_[r+844>>2]=0,_[r+848>>2]=u,y[r+852>>2]=c<l?c:l,i=_[e+12>>2],_[r+864>>2]=i,_[e+16>>2]==(0|i)&&!((0|i)>=(0|(h=i?i<<1:1)))){if(h?(_[5585]=_[5585]+1,u=0|o[_[4567]](h<<2,16),i=_[e+12>>2]):u=0,(0|i)>=1)for(t=0;_[(r=t<<2)+u>>2]=_[_[e+20>>2]+r>>2],(0|i)!=(0|(t=t+1|0)););(t=_[e+20>>2])&&(d[e+24|0]&&(t&&(_[5586]=_[5586]+1,o[_[4568]](t)),i=_[e+12>>2]),_[e+20>>2]=0),_[e+20>>2]=u,_[e+16>>2]=h,a[e+24|0]=1}_[_[e+20>>2]+(i<<2)>>2]=s,_[e+12>>2]=i+1}return B=n+16|0,0|s},o[107]=function(e,t){e|=0,t|=0;var i,n,r,a,s,l=0,c=0;if(_[4734]=_[4734]+-1,o[_[_[e>>2]+20>>2]](e,t),i=(l=_[t+864>>2])<<2,n=_[e+20>>2],a=_[(c=i+n|0)>>2],s=c,r=(c=_[e+12>>2]+-1|0)<<2,_[s>>2]=_[n+r>>2],_[_[e+20>>2]+r>>2]=a,_[_[_[e+20>>2]+i>>2]+864>>2]=l,_[e+12>>2]=c,t&&(e=_[e+72>>2],!((l=_[e+16>>2])>>>0>t>>>0|l+A(_[e>>2],_[e+4>>2])>>>0<=t>>>0)))return _[t>>2]=_[e+12>>2],_[e+12>>2]=t,void(_[e+8>>2]=_[e+8>>2]+1);t&&(_[5586]=_[5586]+1,o[_[4568]](t))},o[108]=function(e,t){e|=0;var i=0,n=0,r=0,a=0;if(B=e=B-16|0,(0|(i=_[844+(t|=0)>>2]))>=1)for(;i=A(n,208)+t|0,(r=_[i+120>>2])&&(a=_[4730])&&(o[a](r),_[i+120>>2]=0),(0|(n=n+1|0))<(0|(i=_[t+844>>2])););i&&(i=_[4733])&&(_[e+12>>2]=t,o[i](e+12|0)),_[t+844>>2]=0,B=e+16|0},o[109]=function(e,t,i){e|=0,i|=0;var n=0;e:{t:if(!((e=_[220+(t|=0)>>2]+-2|0)>>>0>3)){switch(e-1|0){case 0:case 1:break t}if(!((n=_[i+220>>2]+-2|0)>>>0>3))switch(e=0,n-1|0){case 0:case 1:break t;default:break e}}if(!_[t+280>>2]||o[_[_[t>>2]+12>>2]](t,i)){if(e=1,!_[i+280>>2])break e;if(o[_[_[i>>2]+12>>2]](i,t))break e}e=0}return 0|e},o[110]=function(e,t,i){if(e|=0,i|=0,e=0,!(4&(t=_[204+(t|=0)>>2])||4&(i=_[i+204>>2]))){if(!(3&t))return 1;e=!(3&i)}return 0|e},o[111]=function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+8>>2]=e,_[r+4>>2]=i,_[r>>2]=2816,o[_[_[t>>2]+48>>2]](t,r,n),B=r+16|0},o[112]=function(e){return _[12+(e|=0)>>2]},o[113]=function(e,t){return t|=0,_[_[20+(e|=0)>>2]+(t<<2)>>2]},o[114]=function(e){return _[12+(e|=0)>>2]?_[e+20>>2]:0},o[115]=lo,o[116]=lo,o[117]=function(e,t){var i;return t|=0,e=_[68+(e|=0)>>2],(i=_[e+12>>2])?(_[e+12>>2]=_[i>>2],_[e+8>>2]=_[e+8>>2]+-1,0|i):(_[5585]=_[5585]+1,0|o[_[4567]](t,16))},o[118]=function(e,t){e|=0;var i=0;if((t|=0)&&(e=_[e+68>>2],!((i=_[e+16>>2])>>>0>t>>>0|A(_[e>>2],_[e+4>>2])+i>>>0<=t>>>0)))return _[t>>2]=_[e+12>>2],_[e+12>>2]=t,void(_[e+8>>2]=_[e+8>>2]+1);t&&(_[5586]=_[5586]+1,o[_[4568]](t))},o[119]=Li,o[120]=Ii,o[121]=function(e,t){var i;return i=t|=0,t=_[8+(e|=0)>>2],o[_[t+64>>2]](i,t,_[e+4>>2]),0},o[122]=sn,o[123]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),a=b(0),s=b(0),l=0,c=b(0),u=b(0),h=b(0),p=b(0);B=n=B-32|0,l=_[i+12>>2],_[n+24>>2]=_[i+8>>2],_[n+28>>2]=l,l=_[i+4>>2],_[n+16>>2]=_[i>>2],_[n+20>>2]=l,r=y[n+16>>2],s=y[n+20>>2],a=y[n+24>>2],b(b(b(r*r)+b(s*s))+b(a*a))<b(14210854715202004e-30)&&(_[n+24>>2]=-1082130432,_[n+28>>2]=0,_[n+16>>2]=-1082130432,_[n+20>>2]=-1082130432,a=b(-1),s=b(-1),r=b(-1)),c=a,a=b(b(1)/b(w(b(b(b(r*r)+b(s*s))+b(a*a))))),y[n+24>>2]=c*a,y[n+20>>2]=s*a,y[n+16>>2]=r*a,sn(n,t,n+16|0);e:{t:if(!((i=_[t+4>>2])>>>0>13)){switch(i-1|0){case 7:r=b(y[t+32>>2]*y[t+16>>2]);break e;default:case 0:case 12:case 10:case 9:r=y[t+48>>2];break e;case 1:case 2:case 5:case 6:case 8:case 11:break t;case 3:case 4:}r=y[t+48>>2];break e}r=b(o[_[_[t>>2]+48>>2]](t))}s=y[n>>2],a=y[n+16>>2],c=y[n+4>>2],u=y[n+20>>2],h=y[n+8>>2],p=y[n+24>>2],_[e+12>>2]=0,y[e+8>>2]=h+b(r*p),y[e+4>>2]=c+b(r*u),y[e>>2]=s+b(r*a),B=n+32|0},o[124]=Li,o[125]=Ii,o[126]=function(e,t,i,n,r,a,s,l,c,u){e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,s|=0,l|=0,c|=0,u|=0;var h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),g=b(0);return B=u=B-80|0,h=y[r+52>>2],p=y[a+52>>2],f=y[r+56>>2],d=y[a+56>>2],m=y[r+48>>2],g=y[a+48>>2],e=0,_[u+76>>2]=0,y[u+64>>2]=g-m,y[u+72>>2]=d-f,y[u+68>>2]=p-h,t=1,(function(e,t,i,n,r,a){var s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=0,M=b(0),P=0,D=b(0),N=b(0),L=b(0),G=b(0),U=0,X=0;B=s=B-19040|0,_[a>>2]=0,_[a+4>>2]=0,_[a+32>>2]=0,_[a+24>>2]=0,_[a+28>>2]=0,_[a+16>>2]=0,_[a+20>>2]=0,_[a+8>>2]=0,_[a+12>>2]=0,_[s+18916>>2]=i,_[s+18912>>2]=e,l=y[n+20>>2],c=y[n+36>>2],u=y[t+20>>2],h=y[t+36>>2],p=y[n+24>>2],d=y[t+24>>2],f=y[n+40>>2],m=y[t+40>>2],g=y[n+32>>2],x=y[n>>2],T=y[n+16>>2],S=y[n+4>>2],E=y[t+32>>2],C=y[t>>2],w=y[t+16>>2],O=y[t+4>>2],k=y[n+8>>2],R=y[t+8>>2],_[s+18964>>2]=0,_[s+18948>>2]=0,_[s+18932>>2]=0,F=b(b(b(R*k)+b(d*p))+b(m*f)),y[s+18960>>2]=F,M=b(b(b(O*k)+b(u*p))+b(h*f)),y[s+18956>>2]=M,p=b(b(b(C*k)+b(w*p))+b(E*f)),y[s+18952>>2]=p,f=b(b(b(R*S)+b(d*l))+b(m*c)),y[s+18944>>2]=f,k=b(b(b(O*S)+b(u*l))+b(h*c)),y[s+18940>>2]=k,l=b(b(b(C*S)+b(w*l))+b(E*c)),y[s+18936>>2]=l,c=b(b(b(x*R)+b(T*d))+b(g*m)),y[s+18928>>2]=c,u=b(b(b(x*O)+b(T*u))+b(g*h)),y[s+18924>>2]=u,h=b(b(b(x*C)+b(T*w))+b(g*E)),y[s+18920>>2]=h,d=y[t+20>>2],m=y[t+36>>2],g=y[t+24>>2],x=y[t+52>>2],T=y[n+52>>2],S=y[t+40>>2],E=y[t+56>>2],C=y[n+56>>2],w=y[t>>2],O=y[t+16>>2],R=y[t+32>>2],D=y[t+4>>2],N=y[t+8>>2],L=y[t+48>>2],G=y[n+48>>2],_[s+19036>>2]=0,_[s+19028>>2]=0,_[s+19012>>2]=0,y[s+19008>>2]=F,y[s+19004>>2]=f,y[s+19e3>>2]=c,_[s+18996>>2]=0,y[s+18992>>2]=M,y[s+18988>>2]=k,y[s+18984>>2]=u,_[s+18980>>2]=0,y[s+18976>>2]=p,y[s+18972>>2]=l,l=b(G-L),c=b(T-x),u=b(C-E),y[s+19024>>2]=b(b(N*l)+b(g*c))+b(S*u),y[s+19020>>2]=b(b(l*D)+b(c*d))+b(u*m),y[s+19016>>2]=b(b(l*w)+b(c*O))+b(u*R),_[s+19032>>2]=123,y[s+18968>>2]=h,_[(e=s+18664|0)>>2]=0,_[e+4>>2]=0,_[s+18656>>2]=0,_[s+18660>>2]=0,_[s+18892>>2]=0,_[s+18896>>2]=0,_[s+18904>>2]=2,_[s+18672>>2]=0,l=y[r>>2],c=y[r+4>>2],u=y[r+8>>2],_[s+28>>2]=0,y[s+24>>2]=-u,y[s+20>>2]=-c,y[s+16>>2]=-l;e:if(!((e=Be(s+18528|0,s+18912|0,s+16|0)+-1|0)>>>0>1)){t:{if(e-1){for(_[(e=s+18520|0)>>2]=0,_[e+4>>2]=0,_[(e=s- -64|0)>>2]=0,_[e+4>>2]=0,_[s+72>>2]=0,_[s+18512>>2]=0,_[s+18516>>2]=0,_[s+18508>>2]=0,_[s+16>>2]=9,_[s+56>>2]=0,_[s+60>>2]=0,n=0;e=14296+(A(0-n|0,56)+s|0)|0,_[e+4200>>2]=0,i=_[s+18520>>2],_[e+4204>>2]=i,e=e+4156|0,i&&(_[i+44>>2]=e),_[s+18520>>2]=e,256!=(0|(n=n+1|0)););if(_[s+18524>>2]=256,l=y[r>>2],c=y[r+4>>2],u=y[r+8>>2],_[s+12>>2]=0,y[s+8>>2]=-u,y[s+4>>2]=-c,y[s>>2]=-l,9!=(0|z(s+16|0,s+18528|0,s))){if(!_[s+52>>2]){l=b(0),c=b(0),u=b(0);break t}for(u=b(0),n=0,c=b(0),l=b(0);e=_[s+19032>>2],i=s,r=_[s+19036>>2],I=_[s+18912>>2]+(r>>1)|0,U=I,X=_[4+(P=(s+16|0)+(n<<2)|0)>>2],1&r&&(e=_[e+_[I>>2]>>2]),o[e](i,U,X),h=y[P+20>>2],u=b(u+b(h*y[s+8>>2])),c=b(c+b(h*y[s+4>>2])),l=b(l+b(y[s>>2]*h)),(n=n+1|0)>>>0<v[s+52>>2];);break t}_[a>>2]=3;break e}_[a>>2]=2;break e}I=1,_[a>>2]=1,h=y[t+48>>2],p=y[t+8>>2],d=y[t>>2],f=y[t+4>>2],m=y[t+52>>2],g=y[t+24>>2],x=y[t+16>>2],T=y[t+20>>2],S=y[t+56>>2],E=y[t+40>>2],C=y[t+32>>2],w=y[t+36>>2],_[a+16>>2]=0,y[a+12>>2]=S+b(b(b(l*C)+b(c*w))+b(u*E)),y[a+8>>2]=m+b(b(b(l*x)+b(c*T))+b(u*g)),y[a+4>>2]=h+b(b(b(l*d)+b(c*f))+b(u*p)),m=y[t+48>>2],g=y[t+8>>2],x=y[t>>2],T=y[t+4>>2],S=y[t+52>>2],E=y[t+24>>2],C=y[t+16>>2],w=y[t+20>>2],O=y[t+56>>2],k=y[t+40>>2],R=y[t+32>>2],F=y[t+36>>2],p=y[s+60>>2],d=y[s- -64>>2],f=y[s+56>>2],h=y[s+72>>2],_[a+48>>2]=0,_[a+32>>2]=0,y[a+52>>2]=-h,y[a+44>>2]=-d,y[a+40>>2]=-p,y[a+36>>2]=-f,l=b(l-b(f*h)),c=b(c-b(h*p)),u=b(u-b(h*d)),y[a+28>>2]=O+b(b(b(R*l)+b(F*c))+b(k*u)),y[a+24>>2]=S+b(b(b(l*C)+b(c*w))+b(u*E)),y[a+20>>2]=m+b(b(b(l*x)+b(c*T))+b(u*g))}return B=s+19040|0,I}(i,r,n,a,u- -64|0,u+8|0)||(t=0,function(e,t,i,n,r,a){var s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),g=b(0),A=b(0),x=0,T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=0,D=0,N=b(0),L=b(0),z=b(0),G=b(0),U=0;if(B=s=B-544|0,_[a>>2]=0,_[a+4>>2]=0,_[a+32>>2]=0,_[a+24>>2]=0,_[a+28>>2]=0,_[a+16>>2]=0,_[a+20>>2]=0,_[a+8>>2]=0,_[a+12>>2]=0,_[s+388>>2]=i,_[s+384>>2]=e,u=y[n+20>>2],h=y[n+36>>2],p=y[t+20>>2],f=y[t+36>>2],d=y[n+24>>2],l=y[t+24>>2],c=y[n+40>>2],m=y[t+40>>2],g=y[n+32>>2],A=y[n>>2],T=y[n+16>>2],S=y[n+4>>2],E=y[t+32>>2],k=y[t>>2],O=y[t+16>>2],R=y[t+4>>2],C=y[n+8>>2],F=y[t+8>>2],_[s+436>>2]=0,_[s+420>>2]=0,_[s+404>>2]=0,I=b(b(b(F*C)+b(l*d))+b(m*c)),y[s+432>>2]=I,M=b(b(b(R*C)+b(p*d))+b(f*c)),y[s+428>>2]=M,d=b(b(b(k*C)+b(O*d))+b(E*c)),y[s+424>>2]=d,c=b(b(b(F*S)+b(l*u))+b(m*h)),y[s+416>>2]=c,C=b(b(b(R*S)+b(p*u))+b(f*h)),y[s+412>>2]=C,u=b(b(b(k*S)+b(O*u))+b(E*h)),y[s+408>>2]=u,h=b(b(b(A*F)+b(T*l))+b(g*m)),y[s+400>>2]=h,p=b(b(b(A*R)+b(T*p))+b(g*f)),y[s+396>>2]=p,f=b(b(b(A*k)+b(T*O))+b(g*E)),y[s+392>>2]=f,l=y[t+20>>2],m=y[t+36>>2],g=y[t+24>>2],A=y[t+52>>2],T=y[n+52>>2],S=y[t+40>>2],E=y[t+56>>2],k=y[n+56>>2],O=y[t>>2],R=y[t+16>>2],F=y[t+32>>2],N=y[t+4>>2],L=y[t+8>>2],z=y[t+48>>2],G=y[n+48>>2],_[s+508>>2]=0,_[s+500>>2]=0,_[s+484>>2]=0,y[s+480>>2]=I,y[s+476>>2]=c,y[s+472>>2]=h,_[s+468>>2]=0,y[s+464>>2]=M,y[s+460>>2]=C,y[s+456>>2]=p,_[s+452>>2]=0,y[s+448>>2]=d,y[s+444>>2]=u,u=b(G-z),h=b(T-A),p=b(k-E),y[s+496>>2]=b(b(L*u)+b(g*h))+b(S*p),y[s+492>>2]=b(b(u*N)+b(h*l))+b(p*m),y[s+488>>2]=b(b(u*O)+b(h*R))+b(p*F),_[s+504>>2]=122,y[s+440>>2]=f,_[s+136>>2]=0,_[s+140>>2]=0,_[s+128>>2]=0,_[s+132>>2]=0,_[s+364>>2]=0,_[s+368>>2]=0,_[s+376>>2]=2,_[s+144>>2]=0,e=Be(s,s+384|0,r))_[a>>2]=1==(0|e)?1:2;else{if(x=_[s+372>>2],_[x+32>>2])for(l=b(0),n=0,d=b(0),f=b(0),p=b(0),h=b(0),u=b(0);c=y[16+(r=(i=n<<2)+x|0)>>2],e=_[s+504>>2],x=s+528|0,P=_[s+508>>2],D=_[s+384>>2]+(P>>1)|0,U=D,r=_[r>>2],1&P&&(e=_[e+_[D>>2]>>2]),o[e](x,U,r),r=_[s+508>>2],e=_[s+388>>2]+(r>>1)|0,T=b(c*y[s+536>>2]),S=b(c*y[s+532>>2]),E=b(c*y[s+528>>2]),i=_[i+_[s+372>>2]>>2],m=y[i+8>>2],g=y[i>>2],A=b(-y[i+4>>2]),x=_[s+504>>2],x=1&r?_[_[e>>2]+x>>2]:x,l=b(l+T),d=b(d+S),f=b(f+E),_[s+524>>2]=0,y[s+520>>2]=b(b(y[s+428>>2]*A)-b(g*y[s+424>>2]))-b(m*y[s+432>>2]),y[s+516>>2]=b(b(y[s+412>>2]*A)-b(g*y[s+408>>2]))-b(m*y[s+416>>2]),y[s+512>>2]=b(b(y[s+396>>2]*A)-b(g*y[s+392>>2]))-b(m*y[s+400>>2]),o[x](s+528|0,e,s+512|0),m=y[s+528>>2],g=y[s+532>>2],A=y[s+536>>2],p=b(p+b(c*b(b(b(b(m*y[s+472>>2])+b(g*y[s+476>>2]))+b(A*y[s+480>>2]))+y[s+496>>2]))),h=b(h+b(c*b(b(b(b(m*y[s+456>>2])+b(g*y[s+460>>2]))+b(A*y[s+464>>2]))+y[s+492>>2]))),u=b(u+b(c*b(b(b(b(m*y[s+440>>2])+b(g*y[s+444>>2]))+b(A*y[s+448>>2]))+y[s+488>>2]))),n=n+1|0,x=_[s+372>>2],n>>>0<v[x+32>>2];);else u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),l=b(0);c=y[t+48>>2],m=y[t+8>>2],g=y[t>>2],A=y[t+4>>2],T=y[t+52>>2],S=y[t+24>>2],E=y[t+16>>2],k=y[t+20>>2],O=y[t+56>>2],R=y[t+40>>2],C=y[t+32>>2],F=y[t+36>>2],_[a+16>>2]=0,y[a+12>>2]=O+b(b(b(f*C)+b(d*F))+b(l*R)),y[a+8>>2]=T+b(b(b(f*E)+b(d*k))+b(l*S)),y[a+4>>2]=c+b(b(b(f*g)+b(d*A))+b(l*m)),m=y[t+48>>2],g=y[t+8>>2],A=y[t>>2],T=y[t+4>>2],S=y[t+52>>2],E=y[t+24>>2],k=y[t+16>>2],O=y[t+20>>2],R=y[t+56>>2],C=y[t+40>>2],F=y[t+32>>2],I=y[t+36>>2],f=b(f-u),d=b(d-h),l=b(l-p),c=b(w(b(b(b(f*f)+b(d*d))+b(l*l)))),y[a+52>>2]=c,_[a+48>>2]=0,_[a+32>>2]=0,M=l,l=c>b(9999999747378752e-20)?b(b(1)/c):b(1),y[a+44>>2]=M*l,y[a+40>>2]=d*l,y[a+36>>2]=f*l,y[a+28>>2]=R+b(b(b(u*F)+b(h*I))+b(p*C)),y[a+24>>2]=S+b(b(b(u*k)+b(h*O))+b(p*E)),y[a+20>>2]=m+b(b(b(u*A)+b(h*T))+b(p*g)),x=1}return B=s+544|0,x}(i,r,n,a,u- -64|0,u+8|0)))&&(e=_[u+16>>2],_[l>>2]=_[u+12>>2],_[l+4>>2]=e,e=_[u+24>>2],_[l+8>>2]=_[u+20>>2],_[l+12>>2]=e,e=_[u+40>>2],_[c+8>>2]=_[u+36>>2],_[c+12>>2]=e,e=_[u+32>>2],_[c>>2]=_[u+28>>2],_[c+4>>2]=e,e=_[u+56>>2],_[s+8>>2]=_[u+52>>2],_[s+12>>2]=e,e=_[u+48>>2],_[s>>2]=_[u+44>>2],_[s+4>>2]=e,e=t),B=u+80|0,0|e},o[127]=Li,o[128]=Ii,o[129]=on,o[130]=Ii,o[131]=function(e,t,i,n,r,s,l,c,u,h){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0,l|=0,c|=0,u|=0,h|=0;var p=b(0),f=b(0),m=0,v=b(0),g=0,A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=0,w=b(0),k=b(0),O=b(0),R=0,F=b(0),I=b(0),M=0,P=0,D=0,N=b(0),L=b(0),z=b(0),G=b(0);for(B=e=B-4240|0,D=_[i+4>>2]+-17>>>0<=1?_[n+4>>2]+-17>>>0<2:D;cr(),T=y[r+32>>2],S=y[r+16>>2],E=y[r>>2],A=y[r+36>>2],w=y[r+20>>2],k=y[r+4>>2],f=y[r+40>>2],p=y[r+24>>2],O=y[r+8>>2],_[12+(m=(C=R<<4)+(e+1264|0)|0)>>2]=0,v=y[C+18964>>2],x=b(-v),I=b(p*x),p=y[C+18960>>2],F=f,f=y[C+18968>>2],y[m+8>>2]=b(I-b(O*p))-b(F*f),y[m+4>>2]=b(b(w*x)-b(p*k))-b(f*A),y[m>>2]=b(b(S*x)-b(p*E))-b(f*T),x=y[s+40>>2],T=y[s+8>>2],S=y[s+24>>2],E=y[s+36>>2],A=y[s+4>>2],w=y[s+20>>2],k=y[s+32>>2],O=y[s>>2],F=y[s+16>>2],_[12+(C=C+(e+272|0)|0)>>2]=0,y[C>>2]=b(b(p*O)+b(v*F))+b(f*k),y[C+4>>2]=b(b(p*A)+b(v*w))+b(f*E),y[C+8>>2]=b(b(p*T)+b(v*S))+b(f*x),42!=(0|(R=R+1|0)););if(C=42,(0|(P=0|o[_[_[i>>2]+84>>2]](i)))>=1)for(R=0;o[_[_[i>>2]+88>>2]](i,R,e+3248|0),x=y[r+8>>2],T=y[r>>2],S=y[r+4>>2],E=y[r+24>>2],A=y[r+16>>2],w=y[r+20>>2],v=y[r+40>>2],p=y[r+32>>2],f=y[r+36>>2],_[e+3260>>2]=0,k=p,p=y[e+3248>>2],O=f,f=y[e+3252>>2],F=v,v=y[e+3256>>2],y[e+3256>>2]=b(b(k*p)+b(O*f))+b(F*v),y[e+3252>>2]=b(b(p*A)+b(f*w))+b(v*E),y[e+3248>>2]=b(b(T*p)+b(S*f))+b(x*v),cr(),M=_[e+3260>>2],_[(g=18968+(m=C<<4)|0)>>2]=_[e+3256>>2],_[g+4>>2]=M,M=_[e+3252>>2],_[(g=m+18960|0)>>2]=_[e+3248>>2],_[g+4>>2]=M,T=y[r+40>>2],S=y[r+24>>2],E=y[r+8>>2],A=y[r+36>>2],w=y[r+20>>2],k=y[r+4>>2],f=y[r+32>>2],p=y[r+16>>2],O=y[r>>2],_[12+(g=m+(e+1264|0)|0)>>2]=0,v=y[e+3252>>2],x=b(-v),I=b(p*x),p=y[e+3248>>2],F=f,f=y[e+3256>>2],y[g>>2]=b(I-b(O*p))-b(F*f),y[g+4>>2]=b(b(w*x)-b(p*k))-b(f*A),y[g+8>>2]=b(b(S*x)-b(p*E))-b(f*T),x=y[s+32>>2],T=y[s>>2],S=y[s+16>>2],E=y[s+36>>2],A=y[s+4>>2],w=y[s+20>>2],k=y[s+40>>2],O=y[s+8>>2],F=y[s+24>>2],_[12+(m=m+(e+272|0)|0)>>2]=0,y[m+8>>2]=b(b(p*O)+b(v*F))+b(f*k),y[m+4>>2]=b(b(p*A)+b(v*w))+b(f*E),y[m>>2]=b(b(p*T)+b(v*S))+b(f*x),C=C+1|0,(0|P)!=(0|(R=R+1|0)););if((0|(P=0|o[_[_[n>>2]+84>>2]](n)))>=1)for(R=0;o[_[_[n>>2]+88>>2]](n,R,e+3248|0),x=y[s+8>>2],T=y[s>>2],S=y[s+4>>2],E=y[s+24>>2],A=y[s+16>>2],w=y[s+20>>2],v=y[s+40>>2],p=y[s+32>>2],f=y[s+36>>2],_[e+3260>>2]=0,k=p,p=y[e+3248>>2],O=f,f=y[e+3252>>2],F=v,v=y[e+3256>>2],y[e+3256>>2]=b(b(k*p)+b(O*f))+b(F*v),y[e+3252>>2]=b(b(p*A)+b(f*w))+b(v*E),y[e+3248>>2]=b(b(T*p)+b(S*f))+b(x*v),cr(),M=_[e+3260>>2],_[(g=18968+(m=C<<4)|0)>>2]=_[e+3256>>2],_[g+4>>2]=M,M=_[e+3252>>2],_[(g=m+18960|0)>>2]=_[e+3248>>2],_[g+4>>2]=M,T=y[r+40>>2],S=y[r+24>>2],E=y[r+8>>2],A=y[r+36>>2],w=y[r+20>>2],k=y[r+4>>2],f=y[r+32>>2],p=y[r+16>>2],O=y[r>>2],_[12+(g=m+(e+1264|0)|0)>>2]=0,v=y[e+3252>>2],x=b(-v),I=b(p*x),p=y[e+3248>>2],F=f,f=y[e+3256>>2],y[g>>2]=b(I-b(O*p))-b(F*f),y[g+4>>2]=b(b(w*x)-b(p*k))-b(f*A),y[g+8>>2]=b(b(S*x)-b(p*E))-b(f*T),x=y[s+32>>2],T=y[s>>2],S=y[s+16>>2],E=y[s+36>>2],A=y[s+4>>2],w=y[s+20>>2],k=y[s+40>>2],O=y[s+8>>2],F=y[s+24>>2],_[12+(m=m+(e+272|0)|0)>>2]=0,y[m+8>>2]=b(b(p*O)+b(v*F))+b(f*k),y[m+4>>2]=b(b(p*A)+b(v*w))+b(f*E),y[m>>2]=b(b(p*T)+b(v*S))+b(f*x),C=C+1|0,(0|P)!=(0|(R=R+1|0)););if(o[_[_[i>>2]+76>>2]](i,e+1264|0,e+3248|0,C),o[_[_[n>>2]+76>>2]](n,e+272|0,e+2256|0,C),(0|C)<1)p=b(0xde0b6b000000000),f=b(0),w=b(0),v=b(0),k=b(0),x=b(0),O=b(0),F=b(0);else for(R=0,p=b(0xde0b6b000000000),F=b(0),O=b(0),x=b(0),k=b(0),v=b(0),w=b(0),f=b(0);cr(),T=y[18960+(m=R<<4)>>2],S=y[m+18964>>2],E=D?b(0):y[m+18968>>2],+b(b(b(T*T)+b(S*S))+b(E*E))>.01&&(A=y[(g=m+(e+2256|0)|0)>>2],I=y[g+4>>2],N=y[g+8>>2],L=y[(g=m+(e+3248|0)|0)>>2],z=y[g+4>>2],G=y[g+8>>2],(A=b(b(b(T*b(b(b(b(b(A*y[s>>2])+b(I*y[s+4>>2]))+b(N*y[s+8>>2]))+y[s+48>>2])-b(b(b(b(L*y[r>>2])+b(z*y[r+4>>2]))+b(G*y[r+8>>2]))+y[r+48>>2])))+b(S*b(b(b(b(b(A*y[s+16>>2])+b(I*y[s+20>>2]))+b(N*y[s+24>>2]))+y[s+52>>2])-b(b(b(b(L*y[r+16>>2])+b(z*y[r+20>>2]))+b(G*y[r+24>>2]))+y[r+52>>2]))))+b(E*b(D?0:b(b(b(b(A*y[s+32>>2])+b(I*y[s+36>>2]))+b(N*y[s+40>>2]))+y[s+56>>2])-b(b(b(b(L*y[r+32>>2])+b(z*y[r+36>>2]))+b(G*y[r+40>>2]))+y[r+56>>2])))))<p&&(F=y[m+18972>>2],w=f=T,k=v=S,O=x=E,p=A)),(0|(R=R+1|0))!=(0|C););return nr(i),nr(n),C=0,p<b(0)||(T=nr(i),S=nr(n),t=io(e+192|0,i,n,t,0),E=y[r+52>>2],A=y[r+56>>2],I=y[r+48>>2],n=_[r+12>>2],_[(i=e- -64|0)>>2]=_[r+8>>2],_[i+4>>2]=n,i=_[r+4>>2],_[e+56>>2]=_[r>>2],_[e+60>>2]=i,i=_[r+28>>2],_[e+80>>2]=_[r+24>>2],_[e+84>>2]=i,i=_[r+20>>2],_[e+72>>2]=_[r+16>>2],_[e+76>>2]=i,i=_[r+40>>2],n=_[r+44>>2],R=_[r+32>>2],r=_[r+36>>2],_[e+116>>2]=0,p=b(p+b(b(T+S)+b(.5))),y[e+112>>2]=A+b(O*p),y[e+108>>2]=E+b(k*p),_[e+96>>2]=i,_[e+100>>2]=n,y[e+104>>2]=I+b(w*p),_[e+88>>2]=R,_[e+92>>2]=r,i=_[s+12>>2],_[e+128>>2]=_[s+8>>2],_[e+132>>2]=i,i=_[s+4>>2],_[e+120>>2]=_[s>>2],_[e+124>>2]=i,i=_[s+28>>2],_[e+144>>2]=_[s+24>>2],_[e+148>>2]=i,i=_[s+20>>2],_[e+136>>2]=_[s+16>>2],_[e+140>>2]=i,i=_[s+44>>2],_[e+160>>2]=_[s+40>>2],_[e+164>>2]=i,i=_[s+36>>2],_[e+152>>2]=_[s+32>>2],_[e+156>>2]=i,i=_[s+60>>2],_[e+176>>2]=_[s+56>>2],_[e+180>>2]=i,i=_[s+52>>2],_[e+168>>2]=_[s+48>>2],_[e+172>>2]=i,_[e+184>>2]=1566444395,a[e+48|0]=0,_[e+8>>2]=3228,_[t+16>>2]=0,y[t+12>>2]=-O,y[t+8>>2]=-k,y[t+4>>2]=-w,on(t,e+56|0,e+8|0,h),(t=d[e+48|0])&&(T=y[e+44>>2],S=y[e+32>>2],E=y[e+36>>2],A=y[e+28>>2],_[c+12>>2]=0,p=b(p-T),y[c>>2]=A-b(w*p),y[c+8>>2]=E-b(O*p),y[c+4>>2]=S-b(k*p),i=_[e+40>>2],_[u+8>>2]=_[e+36>>2],_[u+12>>2]=i,i=_[e+32>>2],_[u>>2]=_[e+28>>2],_[u+4>>2]=i,y[l+12>>2]=F,y[l+8>>2]=x,y[l+4>>2]=v,y[l>>2]=f),C=0!=(0|t)),B=e+4240|0,0|C},o[132]=Li,o[133]=Ii,o[134]=Hi,o[135]=Hi,o[136]=function(e,t,i,n){e|=0,t|=0,i|=0,n=b(n);var r=0;r=_[t+4>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=r,r=_[t+12>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=r,t=_[i+4>>2],_[e+20>>2]=_[i>>2],_[e+24>>2]=t,t=_[i+12>>2],_[e+28>>2]=_[i+8>>2],_[e+32>>2]=t,a[e+40|0]=1,y[e+36>>2]=n},o[137]=Li,o[138]=Ii,o[139]=function(e,t,i,n,r){},o[140]=Bn,o[141]=hn,o[142]=Li,o[143]=ln,o[144]=function(e){var t=0,i=0;return _[(e|=0)>>2]=3664,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),0|e},o[145]=function(e){var t=0,i=0;_[(e|=0)>>2]=3664,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),Bi(e)},o[146]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=b(0),d=b(0),m=b(0),v=0;if(B=n=B-32|0,e=_[e+12>>2]){if(_[r+4>>2]=e,a=_[t+12>>2],h=_[i+12>>2],f=b(y[a+48>>2]-y[h+48>>2]),c=b(y[a+52>>2]-y[h+52>>2]),u=b(y[a+56>>2]-y[h+56>>2]),s=b(b(b(f*f)+b(c*c))+b(u*u)),a=_[i+4>>2],p=y[a+16>>2],l=y[a+32>>2],t=_[t+4>>2],d=y[t+16>>2],m=y[t+32>>2],(0|(a=_[e+844>>2]))>=1)for(t=0;a=e+A(t,208)|0,(h=_[a+120>>2])&&(v=_[4730])&&(o[v](h),_[a+120>>2]=0),(0|(t=t+1|0))<(0|(a=_[e+844>>2])););s=b(w(s)),p=b(l*p),l=b(m*d),a&&(t=_[4733])&&(_[n+16>>2]=e,o[t](n+16|0)),_[e+844>>2]=0,l=b(l+p),s>b(l+y[r+32>>2])||(_[n+24>>2]=0,_[n+28>>2]=0,_[n+16>>2]=1065353216,_[n+20>>2]=0,l=b(s-l),s>b(1.1920928955078125e-7)?(_[n+28>>2]=0,s=b(b(1)/s),u=b(u*s),y[n+24>>2]=u,c=b(c*s),y[n+20>>2]=c,s=b(f*s),y[n+16>>2]=s):(s=b(1),u=b(0),c=b(0)),e=_[i+12>>2],f=y[e+52>>2],d=y[e+56>>2],m=y[e+48>>2],_[n+12>>2]=0,y[n>>2]=m+b(p*s),y[n+8>>2]=d+b(p*u),y[n+4>>2]=f+b(p*c),o[_[_[r>>2]+16>>2]](r,n+16|0,n,l))}B=n+32|0},o[147]=Bn,o[148]=lr,o[149]=we,o[150]=function(e){Bi(we(e|=0))},o[151]=Ce,o[152]=sr,o[153]=function(e,t,i){var n;if(e|=0,!((n=8!=(0|(t|=0)))|8!=(0|(i|=0))))return _[e+56>>2];if(!(1!=(0|i)|n))return _[e+72>>2];if(!(1!=(0|t)|8!=(0|i)))return _[e+76>>2];if(!(t|i))return _[e+68>>2];if(!(28!=(0|i)|(0|t)>19))return _[e+84>>2];if(!(28!=(0|t)|(0|i)>19))return _[e+80>>2];e:{if((0|t)<=19){if((0|i)<=19)return _[e+28>>2];if(i+-21>>>0>8)break e;return _[e+32>>2]}if(!((0|i)>19|t+-21>>>0>8))return _[e+36>>2];if(31==(0|t))return 31==(0|i)?_[e+44>>2]:_[e+40>>2]}return 31==(0|i)?_[e+48>>2]:_[e+52>>2]},o[154]=function(e,t,i){var n;if(e|=0,!((n=8!=(0|(t|=0)))|8!=(0|(i|=0))))return _[e+56>>2];if(!(1!=(0|i)|n))return _[e+72>>2];if(!(1!=(0|t)|8!=(0|i)))return _[e+76>>2];if(!(28!=(0|i)|(0|t)>19))return _[e+84>>2];if(!(28!=(0|t)|(0|i)>19))return _[e+80>>2];e:{if((0|t)<=19){if((0|i)<=19)return _[e+28>>2];if(i+-21>>>0>8)break e;return _[e+32>>2]}if(!((0|i)>19|t+-21>>>0>8))return _[e+36>>2];if(31==(0|t))return 31==(0|i)?_[e+44>>2]:_[e+40>>2]}return 31==(0|i)?_[e+48>>2]:_[e+52>>2]},o[155]=Li,o[156]=Ii,o[157]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],xe(e=0|o[_[_[e>>2]+56>>2]](e,80),t,i,n,0),0|e},o[158]=Ii,o[159]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],xe(e=0|o[_[_[e>>2]+56>>2]](e,80),t,i,n,1),0|e},o[160]=Ii,o[161]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],Lr(e=0|o[_[_[e>>2]+56>>2]](e,84),t,i,n,0),0|e},o[162]=Ii,o[163]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],function(e,t,i,n){Lr(e,t,i,n,0),a[e+104|0]=1,_[e>>2]=9448,_[e+100>>2]=0,_[e+92>>2]=0,_[e+96>>2]=0,_[5585]=_[5585]+1,Ti(t=0|o[_[4567]](64,16)),_[e+84>>2]=t,_[e+108>>2]=_[_[i+4>>2]+72>>2],_[e+112>>2]=_[_[n+4>>2]+72>>2]}(e=0|o[_[_[e>>2]+56>>2]](e,116),t,i,n),0|e},o[164]=Ii,o[165]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],Lr(e=0|o[_[_[e>>2]+56>>2]](e,84),t,i,n,1),0|e},o[166]=Ii,o[167]=function(e,t,i,n){return e|=0,e=_[(t|=0)>>2],e=0|o[_[_[e>>2]+56>>2]](e,8),_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e>>2]=3496,0|e},o[168]=Ii,o[169]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],function(e,t,i,n){_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e>>2]=3588,_[e+12>>2]=0,a[e+8|0]=0,_[e>>2]=3664,t=_[e+4>>2],t=0|o[_[_[t>>2]+12>>2]](t,_[i+8>>2],_[n+8>>2]),a[e+8|0]=1,_[e+12>>2]=t}(e=0|o[_[_[e>>2]+56>>2]](e,16),t,i,n),0|e},o[170]=Ii,o[171]=function(e,t,i,n){e|=0,i|=0,n|=0;var r=0;return r=_[(t|=0)>>2],function(e,t,i,n,r,s){_[e>>2]=14344,_[e+4>>2]=_[i>>2],_[e>>2]=3588,a[e+16|0]=s,_[e+12>>2]=t,a[e+8|0]=0,_[e>>2]=8588,t||(t=_[e+4>>2],t=0|o[_[_[t>>2]+12>>2]](t,_[n+8>>2],_[r+8>>2]),a[e+8|0]=1,_[e+12>>2]=t)}(r=0|o[_[_[r>>2]+56>>2]](r,20),_[t+4>>2],t,i,n,d[e+4|0]),0|r},o[172]=Ii,o[173]=function(e,t,i,n){return e|=0,i|=0,n|=0,e=_[(t|=0)>>2],function(e,t,i,n){_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e>>2]=3588,_[e+12>>2]=0,a[e+8|0]=0,_[e>>2]=5744,t=_[e+4>>2],o[_[_[t>>2]+24>>2]](t,_[i+8>>2],_[n+8>>2])&&(t=_[e+4>>2],t=0|o[_[_[t>>2]+12>>2]](t,_[i+8>>2],_[n+8>>2]),a[e+8|0]=1,_[e+12>>2]=t)}(e=0|o[_[_[e>>2]+56>>2]](e,16),t,i,n),0|e},o[174]=Ii,o[175]=function(e,t,i,n){e|=0,i|=0,n|=0;var r=0;return r=_[(t|=0)>>2],function(e,t,i,n,r,s,l){_[e>>2]=14344,_[e+4>>2]=_[t>>2],_[e+24>>2]=l,_[e+20>>2]=s,a[e+16|0]=r,_[e+12>>2]=0,a[e+8|0]=0,_[e>>2]=4820,t=_[e+4>>2],s=r?n:i,i=r?i:n,o[_[_[t>>2]+24>>2]](t,_[s+8>>2],_[i+8>>2])&&(t=_[e+4>>2],t=0|o[_[_[t>>2]+12>>2]](t,_[s+8>>2],_[i+8>>2]),a[e+8|0]=1,_[e+12>>2]=t)}(r=0|o[_[_[r>>2]+56>>2]](r,28),t,i,n,d[e+4|0],_[e+8>>2],_[e+12>>2]),0|r},o[176]=Se,o[177]=function(e){Bi(Se(e|=0))},o[178]=function(e,t,i){e|=0,i|=0;var n,r=0,s=0,l=0;if((0|(n=_[8+(t|=0)>>2]))<1)i=0;else for(l=_[t+16>>2],i=0;r=_[(s<<2)+l>>2],3&d[r+204|0]||(_[r+208>>2]=i,i=i+1|0),_[r+268>>2]=1065353216,_[r+212>>2]=-1,(0|(s=s+1|0))<(0|n););!function(e,t){var i=0,n=0,r=0,s=0,l=0,c=0,u=0;if((0|(n=_[e+4>>2]))<(0|t)){if(_[e+8>>2]<(0|t)){if(t?(_[5585]=_[5585]+1,l=0|o[_[4567]](t<<3,16),i=_[e+4>>2]):i=n,(0|i)>=1)for(;c=(r=s<<3)+l|0,r=_[e+12>>2]+r|0,u=_[r+4>>2],_[c>>2]=_[r>>2],_[c+4>>2]=u,(0|i)!=(0|(s=s+1|0)););(i=_[e+12>>2])&&(d[e+16|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+12>>2]=0),_[e+12>>2]=l,a[e+16|0]=1,_[e+8>>2]=t}for(;i=_[e+12>>2]+(n<<3)|0,_[i>>2]=0,_[i+4>>2]=0,(0|(n=n+1|0))!=(0|t););}if(_[e+4>>2]=t,(0|t)>=1)for(e=_[e+12>>2],n=0;_[4+(i=e+(n<<3)|0)>>2]=1,_[i>>2]=n,(0|(n=n+1|0))!=(0|t););}(e+4|0,i),function(e,t){var i,n=0,r=0,a=0,s=0,l=0,c=0;if(t=_[t+68>>2],t=0|o[_[_[t>>2]+36>>2]](t),(i=0|o[_[_[t>>2]+36>>2]](t))&&(c=0|o[_[_[t>>2]+20>>2]](t),!((0|i)<1)))for(;;){if((n=_[_[(t=(l<<4)+c|0)>>2]>>2])&&!(!(t=_[_[t+4>>2]>>2])|7&_[n+204>>2]|7&d[t+204|0])){if(t=_[t+208>>2],a=_[e+16>>2],s=_[n+208>>2],(0|(n=_[(r=a+(s<<3)|0)>>2]))!=(0|s))for(;n=(n<<3)+a|0,_[r>>2]=_[n>>2],s=_[n>>2],(0|(n=_[(r=(s<<3)+a|0)>>2]))!=(0|s););if((0|(n=_[(r=(t<<3)+a|0)>>2]))!=(0|t))for(;t=(n<<3)+a|0,_[r>>2]=_[t>>2],t=_[t>>2],n=_[(r=(t<<3)+a|0)>>2],(0|t)!=(0|n););(0|t)!=(0|s)&&(_[(n=(s<<3)+a|0)>>2]=t,_[4+(t=(t<<3)+a|0)>>2]=_[t+4>>2]+_[n+4>>2])}if((0|(l=l+1|0))==(0|i))break}}(e,t)},o[179]=function(e,t){e|=0;var i,n=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0;if((0|(i=_[8+(t|=0)>>2]))>=1)for(u=_[t+16>>2],t=0;;){if(r=_[(o<<2)+u>>2],3&d[r+204|0])_[r+208>>2]=-1,_[r+212>>2]=-2;else{if(n=t,a=_[e+16>>2],(0|(l=_[(s=a+(c=t<<3)|0)>>2]))!=(0|t))for(;n=(l<<3)+a|0,_[s>>2]=_[n>>2],(0|(n=_[n>>2]))!=(0|(l=_[(s=(n<<3)+a|0)>>2])););_[r+208>>2]=n,_[4+(a+c|0)>>2]=o,_[r+212>>2]=-1,t=t+1|0}if(!((0|(o=o+1|0))<(0|i)))break}},o[180]=function(e){var t=0,i=0;return _[(e|=0)>>2]=4820,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),0|e},o[181]=function(e){var t=0,i=0;_[(e|=0)>>2]=4820,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),Bi(e)},o[182]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=b(0),m=0,v=b(0),g=b(0),A=b(0),T=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=0,H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=b(0),ae=b(0),se=b(0),le=b(0),ce=b(0);if(B=n=B-48|0,_[e+12>>2]){if(a=d[e+16|0],h=_[(V=a?t:i)+12>>2],T=y[h+56>>2],Q=y[h+52>>2],E=y[h+48>>2],a=_[(m=a?i:t)+12>>2],C=y[a+56>>2],U=y[a+52>>2],X=y[a+48>>2],m=_[m+4>>2],k=y[a+32>>2],I=y[a+16>>2],M=y[a>>2],R=y[a+36>>2],D=y[a+20>>2],N=y[a+4>>2],s=y[h+40>>2],l=y[h+24>>2],c=y[h+8>>2],u=y[h+36>>2],v=y[h+20>>2],f=y[h+4>>2],g=y[h+32>>2],O=y[a+40>>2],A=y[h+16>>2],L=y[a+24>>2],p=y[h>>2],z=y[a+8>>2],h=_[V+4>>2],F=y[h+60>>2],P=y[h+56>>2],G=y[h+52>>2],_[n+28>>2]=0,j=b(b(b(z*f)+b(L*v))+b(O*u)),P=b(-P),W=b(b(b(z*p)+b(L*A))+b(O*g)),O=b(b(b(z*c)+b(L*l))+b(O*s)),y[n+24>>2]=b(b(j*P)-b(G*W))-b(F*O),L=b(b(b(N*f)+b(D*v))+b(R*u)),z=b(b(b(N*p)+b(D*A))+b(R*g)),Y=b(b(b(N*c)+b(D*l))+b(R*s)),y[n+20>>2]=b(b(L*P)-b(G*z))-b(F*Y),q=b(b(b(M*f)+b(I*v))+b(k*u)),H=G,G=b(b(b(M*p)+b(I*A))+b(k*g)),R=F,F=b(b(b(M*c)+b(I*l))+b(k*s)),y[n+16>>2]=b(b(q*P)-b(H*G))-b(R*F),o[_[_[m>>2]+64>>2]](n+32|0,m,n+16|0),a=_[V+12>>2],P=y[a+48>>2],Z=y[a+32>>2],K=y[a+16>>2],J=y[a+8>>2],$=y[a+4>>2],ee=y[a>>2],te=y[a+56>>2],ie=y[a+52>>2],ne=y[a+40>>2],re=y[a+36>>2],oe=y[a+24>>2],ae=y[a+20>>2],se=y[h+68>>2],R=y[h+60>>2],D=y[h+52>>2],N=y[h+56>>2],k=y[n+40>>2],I=y[n+32>>2],M=y[n+36>>2],le=y[_[e+12>>2]+848>>2],_[r+4>>2]=_[e+12>>2],ce=b(b(b(X*c)+b(U*l))+b(C*s)),H=l,l=b(-Q),O=b(b(ce+b(b(b(H*l)-b(E*c))-b(T*s)))+b(b(b(F*I)+b(Y*M))+b(O*k))),g=b(b(b(b(b(X*p)+b(U*A))+b(C*g))+b(b(b(A*l)-b(E*p))-b(T*g)))+b(b(b(G*I)+b(z*M))+b(W*k))),v=b(b(b(b(b(X*f)+b(U*v))+b(C*u))+b(b(b(v*l)-b(E*f))-b(T*u)))+b(b(b(q*I)+b(L*M))+b(j*k))),(s=b(b(b(R*O)+b(b(D*g)+b(N*v)))-se))<le&&(a=_[V+12>>2],f=y[a+24>>2],A=y[a+20>>2],p=y[a+40>>2],T=y[a+36>>2],E=y[a+16>>2],C=y[a+32>>2],l=y[h+60>>2],U=y[a+8>>2],c=y[h+52>>2],X=y[a>>2],u=y[h+56>>2],k=y[a+4>>2],_[n+28>>2]=0,y[n+16>>2]=b(b(X*c)+b(k*u))+b(U*l),y[n+24>>2]=b(b(c*C)+b(u*T))+b(l*p),y[n+20>>2]=b(b(c*E)+b(u*A))+b(l*f),_[n+12>>2]=0,l=b(g-b(D*s)),c=b(v-b(N*s)),u=b(O-b(R*s)),y[n+8>>2]=b(b(b(l*Z)+b(c*re))+b(u*ne))+te,y[n+4>>2]=b(b(b(l*K)+b(c*ae))+b(u*oe))+ie,y[n>>2]=b(b(J*u)+b(b(ee*l)+b($*c)))+P,o[_[_[r>>2]+16>>2]](r,n+16|0,n,s)),!(_[m+4>>2]>6|_[_[r+4>>2]+844>>2]>=_[e+24>>2]||(l=y[h+60>>2],b(x(l))>b(.7071067690849304)?(s=y[h+56>>2],c=b(b(1)/b(w(b(b(l*l)+b(s*s))))),s=b(s*c),l=b(c*b(-l)),c=b(0)):(s=y[h+52>>2],c=y[h+56>>2],u=b(b(1)/b(w(b(b(s*s)+b(c*c))))),l=b(s*u),s=b(0),c=b(u*b(-c))),u=b(o[_[_[m>>2]+16>>2]](m)),a=0,f=Ji(u=b(b(S(b(y[4561]/u),b(.39269909262657166)))*b(.5))),m=_[e+20>>2],v=$i(u),(0|m)<1)))for(F=s,s=b(f/b(w(b(b(b(c*c)+b(l*l))+b(s*s))))),f=b(F*s),g=b(l*s),A=b(c*s);l=y[h+56>>2],u=y[h+52>>2],s=y[h+60>>2],c=b(b(b(b(6.2831854820251465)/b(0|m))*b(0|a))*b(.5)),p=b(Ji(c)/b(w(b(b(b(u*u)+b(l*l))+b(s*s))))),s=b(s*p),l=b(l*p),c=$i(c),u=b(u*p),p=b(b(f*s)+b(b(g*l)+b(b(v*c)+b(A*u)))),T=b(b(g*s)+b(b(b(A*c)-b(v*u))-b(f*l))),E=b(b(f*u)+b(b(b(g*c)-b(v*l))-b(A*s))),C=b(b(A*l)+b(b(b(f*c)-b(v*s))-b(g*u))),y[n+28>>2]=b(b(b(c*p)-b(u*T))-b(l*E))-b(s*C),y[n+24>>2]=b(b(l*T)+b(b(s*p)+b(c*C)))-b(u*E),y[n+20>>2]=b(b(u*C)+b(b(c*E)+b(l*p)))-b(s*T),y[n+16>>2]=b(b(s*E)+b(b(u*p)+b(c*T)))-b(l*C),Ri(e,n+16|0,t,i,r),(0|(a=a+1|0))<(0|(m=_[e+20>>2])););!d[e+8|0]|!_[_[e+12>>2]+844>>2]||(e=_[r+4>>2],_[e+844>>2]&&((0|(t=_[e+836>>2]))==(0|(i=_[_[r+8>>2]+8>>2]))?Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0)))}B=n+48|0},o[183]=Bn,o[184]=lr,o[185]=Li,o[186]=Ii,o[187]=Te,o[188]=be,o[189]=function(e){(e=be(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[190]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a,s,l,c,u=b(0);B=l=B-16|0,o[_[4565]](5062),c=d[e+76|0],a=_[(s=c?t:i)+4>>2],_[a+4>>2]+-21>>>0>8||_[_[(t=c?i:t)+4>>2]+4>>2]>19||(u=b(o[_[_[a>>2]+48>>2]](a)),_[r+4>>2]=_[e+72>>2],function(e,t,i,n,r,a){var s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0);B=s=B+-64|0,y[e+56>>2]=t,_[e+52>>2]=i,_[e+40>>2]=r,_[e+36>>2]=n,_[e+44>>2]=a,i=_[r+12>>2],l=y[i+52>>2],A=y[i+56>>2],r=_[n+12>>2],x=y[r+52>>2],T=y[r+56>>2],c=y[i+20>>2],u=y[i+36>>2],S=y[r+20>>2],E=y[r+36>>2],C=y[r+24>>2],h=y[i+24>>2],w=y[r+40>>2],p=y[i+40>>2],k=y[r+32>>2],f=y[i+32>>2],O=y[r>>2],d=y[i>>2],R=y[r+16>>2],m=y[i+16>>2],F=y[i+48>>2],I=y[r+48>>2],v=y[i+4>>2],M=y[r+4>>2],P=y[r+8>>2],g=y[i+8>>2],_[s+60>>2]=0,_[s+44>>2]=0,_[s+28>>2]=0,y[s+40>>2]=b(b(g*P)+b(h*C))+b(p*w),y[s+36>>2]=b(b(g*M)+b(h*S))+b(p*E),y[s+24>>2]=b(b(v*P)+b(c*C))+b(u*w),y[s+20>>2]=b(b(v*M)+b(c*S))+b(u*E),l=b(-l),y[s+56>>2]=b(b(b(h*l)-b(g*F))-b(p*A))+b(b(b(g*I)+b(h*x))+b(p*T)),y[s+52>>2]=b(b(b(c*l)-b(v*F))-b(u*A))+b(b(b(v*I)+b(c*x))+b(u*T)),_[s+12>>2]=0,y[s>>2]=b(b(d*O)+b(m*R))+b(f*k),y[s+32>>2]=b(b(g*O)+b(h*R))+b(p*k),y[s+16>>2]=b(b(v*O)+b(c*R))+b(u*k),y[s+8>>2]=b(b(d*P)+b(m*C))+b(f*w),y[s+4>>2]=b(b(d*M)+b(m*S))+b(f*E),y[s+48>>2]=b(b(b(m*l)-b(d*F))-b(f*A))+b(b(b(d*I)+b(m*x))+b(f*T)),i=_[n+4>>2],o[_[_[i>>2]+8>>2]](i,s,e+4|0,e+20|0),t=b(y[a+32>>2]+t),y[e+20>>2]=t+y[e+20>>2],y[e+24>>2]=t+y[e+24>>2],y[e+28>>2]=t+y[e+28>>2],y[e+4>>2]=y[e+4>>2]-t,y[e+8>>2]=y[e+8>>2]-t,y[e+12>>2]=y[e+12>>2]-t,B=s- -64|0}(i=e+8|0,u,n,t,s,r),t=_[t+8>>2],n=_[e+72>>2],_[n+840>>2]=_[s+8>>2],_[n+836>>2]=t,o[_[_[a>>2]+64>>2]](a,i,e+12|0,e+28|0),t=_[r+4>>2],_[t+844>>2]&&((0|(i=_[t+836>>2]))==(0|(n=_[_[r+8>>2]+8>>2]))?Di(t,i+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(t,_[_[r+12>>2]+8>>2]+4|0,n+4|0)),_[e+44>>2]=0,_[e+48>>2]=0),o[_[4566]](),B=l+16|0},o[191]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0);return B=n=B-240|0,K=b(1),r=d[e+76|0],a=b(y[(e=r?i:t)+116>>2]-y[e+52>>2]),s=b(a*a),a=b(y[e+120>>2]-y[e+56>>2]),s=b(s+b(a*a)),a=b(y[e+124>>2]-y[e+60>>2]),s=b(s+b(a*a)),a=y[e+276>>2],s<b(a*a)||(i=_[(t=r?t:i)+192>>2],_[i+4>>2]+-21>>>0>8||(F=y[e+92>>2],I=y[e+76>>2],M=y[e+108>>2],P=y[e+88>>2],D=y[e+72>>2],N=y[e+104>>2],L=y[e+100>>2],z=y[e+84>>2],G=y[e+68>>2],p=y[t+36>>2],f=y[t+20>>2],m=y[t+4>>2],U=y[e+28>>2],X=y[e+12>>2],V=y[e+44>>2],H=y[e+24>>2],j=y[e+8>>2],W=y[e+40>>2],Y=y[e+36>>2],q=y[e+20>>2],Q=y[e+4>>2],v=y[t+12>>2],C=y[e+116>>2],g=y[t+28>>2],s=y[e+120>>2],A=y[t+44>>2],w=y[e+124>>2],Z=b(b(b(v*C)+b(g*s))+b(A*w)),x=y[t+24>>2],k=b(-y[t+56>>2]),T=y[t+8>>2],S=y[t+52>>2],E=y[t+40>>2],O=y[t+60>>2],h=b(b(b(x*k)-b(T*S))-b(E*O)),a=b(h+b(b(b(T*C)+b(x*s))+b(E*w))),l=y[e+56>>2],c=y[e+52>>2],u=y[e+60>>2],_[n+236>>2]=0,J=b(b(b(g*k)-b(v*S))-b(A*O)),R=b(J+b(b(b(v*c)+b(g*l))+b(A*u))),y[n+232>>2]=R,h=b(h+b(b(b(T*c)+b(x*l))+b(E*u))),y[n+228>>2]=h,S=b(b(b(f*k)-b(m*S))-b(p*O)),l=b(S+b(b(b(m*c)+b(f*l))+b(p*u))),y[n+224>>2]=l,k=l,(c=b(S+b(b(b(m*C)+b(f*s))+b(p*w))))<l&&(y[n+224>>2]=c,k=c),C=h,a<h&&(y[n+228>>2]=a,C=a),(u=b(J+Z))<(s=R)&&(y[n+232>>2]=u,s=u),_[n+220>>2]=0,y[n+216>>2]=R,y[n+212>>2]=h,y[n+208>>2]=l,w=l,l<c&&(y[n+208>>2]=c,w=c),S=h,h<a&&(y[n+212>>2]=a,S=a),O=R,R<u&&(y[n+216>>2]=u,O=u),Z=s,s=y[e+272>>2],y[n+232>>2]=Z-s,y[n+228>>2]=C-s,y[n+224>>2]=k-s,y[n+216>>2]=s+O,y[n+212>>2]=s+S,y[n+208>>2]=s+w,_[n+128>>2]=0,y[n+124>>2]=u,y[n+120>>2]=a,y[n+116>>2]=c,_[n+112>>2]=0,y[n+108>>2]=b(b(v*I)+b(g*F))+b(A*M),y[n+104>>2]=b(b(v*D)+b(g*P))+b(A*N),y[n+100>>2]=b(b(v*G)+b(g*z))+b(A*L),_[n+96>>2]=0,y[n+92>>2]=b(b(T*I)+b(x*F))+b(E*M),y[n+88>>2]=b(b(T*D)+b(x*P))+b(E*N),y[n+84>>2]=b(b(T*G)+b(x*z))+b(E*L),_[n+80>>2]=0,y[n+76>>2]=b(b(m*I)+b(f*F))+b(p*M),y[n+72>>2]=b(b(m*D)+b(f*P))+b(p*N),_[n- -64>>2]=0,y[n+60>>2]=R,y[n+56>>2]=h,y[n+52>>2]=l,_[n+48>>2]=0,y[n+44>>2]=b(b(v*X)+b(g*U))+b(A*V),y[n+40>>2]=b(b(v*j)+b(g*H))+b(A*W),y[n+36>>2]=b(b(v*Q)+b(g*q))+b(A*Y),_[n+32>>2]=0,y[n+28>>2]=b(b(T*X)+b(x*U))+b(E*V),y[n+24>>2]=b(b(T*j)+b(x*H))+b(E*W),y[n+20>>2]=b(b(T*Q)+b(x*q))+b(E*Y),_[n+16>>2]=0,y[n+12>>2]=b(b(m*X)+b(f*U))+b(p*V),y[n+8>>2]=b(b(m*j)+b(f*H))+b(p*W),y[n+196>>2]=s,y[n+68>>2]=b(b(m*G)+b(f*z))+b(p*L),y[n+4>>2]=b(b(m*Q)+b(f*q))+b(p*Y),_[n>>2]=5416,_[n+200>>2]=_[e+268>>2],i&&(o[_[_[i>>2]+64>>2]](i,n,n+224|0,n+208|0),(a=y[n+200>>2])<y[e+268>>2]&&(y[e+268>>2]=a,K=a)))),B=n+240|0,b(K)},o[192]=function(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0;if(i=_[72+(e|=0)>>2]){if((0|(n=_[t+4>>2]))==_[t+8>>2]&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),n=_[t+4>>2]),(0|n)>=1)for(i=0;_[(l=i<<2)+s>>2]=_[_[t+12>>2]+l>>2],(0|(i=i+1|0))!=(0|n););(i=_[t+12>>2])&&(d[t+16|0]&&(i&&(_[5586]=_[5586]+1,o[_[4568]](i)),n=_[t+4>>2]),_[t+12>>2]=0),_[t+12>>2]=s,a[t+16|0]=1,_[t+8>>2]=r,i=_[e+72>>2]}_[_[t+12>>2]+(n<<2)>>2]=i,_[t+4>>2]=n+1}},o[193]=function(e){var t=0;return _[(e|=0)>>2]=5008,t=_[e+48>>2],o[_[_[t>>2]+20>>2]](t,_[e+64>>2]),t=_[e+48>>2],o[_[_[t>>2]+16>>2]](t,_[e+64>>2]),0|e},o[194]=function(e){var t=0;_[(e|=0)>>2]=5008,t=_[e+48>>2],o[_[_[t>>2]+20>>2]](t,_[e+64>>2]),t=_[e+48>>2],o[_[_[t>>2]+16>>2]](t,_[e+64>>2]),e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[195]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=0,s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=0,f=0;B=r=B-144|0,o[_[4565]](5020),((h=(l=y[t>>2])<(c=y[t+16>>2])?l:c)<(u=y[t+32>>2])?h:u)>y[e+20>>2]||y[(y[t+(a=(l>c^1)<<4)>>2]>u?a:32)+t>>2]<y[e+4>>2]||((h=(l=y[t+8>>2])<(c=y[(a=t+24|0)>>2])?l:c)<(u=y[(s=t+40|0)>>2])?h:u)>y[e+28>>2]||y[(y[(a=l>c?t+8|0:a)>>2]>u?a:s)>>2]<y[e+12>>2]||((h=(l=y[t+4>>2])<(c=y[(a=t+20|0)>>2])?l:c)<(u=y[(s=t+36|0)>>2])?h:u)>y[e+24>>2]||(a=l>c?t+4|0:a,_[_[_[e+36>>2]+4>>2]+4>>2]>19|y[(y[a>>2]>u?a:s)>>2]<y[e+8>>2]||(s=_[e+48>>2],f=rr(r+24|0),_[r+24>>2]=5212,_[r+28>>2]=1,a=_[t+12>>2],_[r+92>>2]=_[t+8>>2],_[r+96>>2]=a,a=_[t+4>>2],_[r+84>>2]=_[t>>2],_[r+88>>2]=a,a=_[t+28>>2],_[r+108>>2]=_[t+24>>2],_[r+112>>2]=a,a=_[t+20>>2],_[r+100>>2]=_[t+16>>2],_[r+104>>2]=a,a=_[t+44>>2],_[r+124>>2]=_[t+40>>2],_[r+128>>2]=a,a=_[t+36>>2],_[r+116>>2]=_[t+32>>2],_[r+120>>2]=a,_[r+72>>2]=_[e+56>>2],t=_[e+40>>2],a=_[t+12>>2],p=_[t+8>>2],_[r+20>>2]=n,_[r+16>>2]=i,_[r+8>>2]=p,_[r+12>>2]=a,_[r>>2]=t,_[r+4>>2]=r+24,t=_[e+36>>2],t=y[_[e+44>>2]+32>>2]>b(0)?0|o[_[_[s>>2]+8>>2]](s,t,r,0,2):0|o[_[_[s>>2]+8>>2]](s,t,r,_[e+64>>2],1),a=_[e+44>>2],p=_[a+8>>2],_[p+8>>2]!=_[_[e+40>>2]+8>>2]?(p=_[a+12>>2],_[a+12>>2]=r,o[_[_[a>>2]+12>>2]](a,i,n)):(_[a+8>>2]=r,o[_[_[a>>2]+8>>2]](a,i,n)),o[_[_[t>>2]+8>>2]](t,_[e+36>>2],r,_[e+52>>2],_[e+44>>2]),i=_[e+44>>2],_[(_[_[i+8>>2]+8>>2]==_[_[e+40>>2]+8>>2]?8:12)+i>>2]=p,o[_[_[t>>2]>>2]](t),o[_[_[s>>2]+60>>2]](s,t),Mn(f))),o[_[4566]](),B=r+144|0},o[196]=Mn,o[197]=ge,o[198]=ye,o[199]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0);B=n=B-96|0,_[n+44>>2]=0,_[n+48>>2]=0,_[n+56>>2]=0,_[n+60>>2]=0,_[n+52>>2]=1065353216,_[n+76>>2]=0,_[n+80>>2]=0,_[n+72>>2]=1065353216,_[n+84>>2]=0,_[n+88>>2]=0,_[n+92>>2]=0,_[n+36>>2]=0,_[n+40>>2]=0,_[n+32>>2]=1065353216,_[n+64>>2]=0,_[n+68>>2]=0,o[_[_[e>>2]+8>>2]](e,n+32|0,n+16|0,n),l=y[n>>2],c=y[n+16>>2],r=b(l-c),s=b(r*r),r=y[n+4>>2],u=y[n+20>>2],a=b(r-u),p=b(s+b(a*a)),a=y[n+8>>2],s=y[n+24>>2],h=b(a-s),y[i>>2]=b(w(b(p+b(h*h))))*b(.5),_[t+12>>2]=0,y[t+8>>2]=b(a+s)*b(.5),y[t+4>>2]=b(r+u)*b(.5),y[t>>2]=b(l+c)*b(.5),B=n+96|0},o[200]=function(e){e|=0;var t,i=b(0),n=b(0);return B=t=B-32|0,o[_[_[e>>2]+12>>2]](e,t+16|0,t+12|0),B=t+32|0,i=y[t+16>>2],n=b(i*i),i=y[t+20>>2],n=b(n+b(i*i)),i=y[t+24>>2],b(b(y[t+12>>2]+b(w(b(n+b(i*i))))))},o[201]=function(e,t){return e|=0,t=b(t),b(b(b(o[_[_[e>>2]+16>>2]](e))*t))},o[202]=Or,o[203]=function(e){return 16+(e|=0)|0},o[204]=Jr,o[205]=function(e){return 5372},o[206]=function(e,t){_[8+(e|=0)>>2]=1065353216,_[e+12>>2]=0,_[e>>2]=1065353216,_[e+4>>2]=1065353216},o[207]=Ae,o[208]=function(e){return b(y[48+(e|=0)>>2])},o[209]=function(e){return 52},o[210]=function(e,t,i){return gn(e|=0,t|=0,i|=0),_[t+28>>2]=_[e+32>>2],_[t+32>>2]=_[e+36>>2],_[t+36>>2]=_[e+40>>2],_[t+40>>2]=_[e+44>>2],_[t+12>>2]=_[e+16>>2],_[t+16>>2]=_[e+20>>2],_[t+20>>2]=_[e+24>>2],_[t+24>>2]=_[e+28>>2],e=_[e+48>>2],_[t+48>>2]=0,_[t+44>>2]=e,5381},o[211]=function(e,t){var i,n=0,r=0,a=0,s=0,l=0;a=t|=0,s=0|o[_[_[(e|=0)>>2]+52>>2]](e),l=1,r=_[_[t>>2]+16>>2],n=0|o[r](0|a,0|s,0|l),l=t,s=n,a=0|o[_[_[e>>2]+56>>2]](e,_[n+8>>2],t),i=e,r=_[_[t>>2]+20>>2],o[r](0|l,0|s,0|a,1346455635,0|i)},o[212]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),a=b(0),s=b(0),l=b(0);o[_[_[t>>2]+68>>2]](e,t,i),b(o[_[_[t>>2]+48>>2]](t))!=b(0)&&(r=y[i+4>>2],n=y[i>>2],a=y[i+8>>2],s=b(o[_[_[t>>2]+48>>2]](t)),l=n=(t=b(b(b(n*n)+b(r*r))+b(a*a))<b(14210854715202004e-30))?b(-1):n,a=t?b(-1):a,r=t?b(-1):r,n=b(b(1)/b(w(b(b(a*a)+b(b(n*n)+b(r*r)))))),y[e>>2]=y[e>>2]+b(s*b(l*n)),y[e+4>>2]=y[e+4>>2]+b(s*b(r*n)),y[e+8>>2]=y[e+8>>2]+b(s*b(a*n)))},o[213]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0);n=y[i>>2],r=y[i+4>>2],o=y[i+8>>2],a=b(b(b(n*y[t+76>>2])+b(r*y[t+80>>2]))+b(o*y[t+84>>2])),s=b(b(b(n*y[t+92>>2])+b(r*y[t+96>>2]))+b(o*y[t+100>>2])),n=b(b(b(n*y[t+60>>2])+b(r*y[t- -64>>2]))+b(o*y[t+68>>2])),i=_[4+(t=(t+60|0)+((n<a?a<s?2:1:(n<s)<<1)<<4)|0)>>2],_[e>>2]=_[t>>2],_[e+4>>2]=i,i=_[t+12>>2],_[e+8>>2]=_[t+8>>2],_[e+12>>2]=i},o[214]=function(e,t,i,n,r,a,s){e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,s|=0;var l,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0);B=l=B-48|0,p=y[t+36>>2],f=y[t+20>>2],d=y[t+40>>2],m=y[t+24>>2],v=y[t+4>>2],g=y[t+8>>2],c=y[i+8>>2],A=y[t+32>>2],u=y[i>>2],x=y[t>>2],h=y[i+4>>2],T=y[t+16>>2],_[l+44>>2]=0,y[l+32>>2]=b(b(x*u)+b(T*h))+b(A*c),y[l+40>>2]=b(b(u*g)+b(h*m))+b(c*d),y[l+36>>2]=b(b(u*v)+b(h*f))+b(c*p),o[_[_[e>>2]+64>>2]](l+16|0,e,l+32|0),g=y[t+56>>2],A=y[t+40>>2],x=y[t+36>>2],v=y[t+52>>2],T=y[t+24>>2],S=y[t+20>>2],E=y[t+32>>2],m=y[t+48>>2],C=y[t+8>>2],w=y[t>>2],k=y[t+4>>2],O=y[t+16>>2],c=y[l+24>>2],u=y[l+16>>2],h=y[l+20>>2],_[l+12>>2]=0,y[l+8>>2]=-y[l+40>>2],y[l+4>>2]=-y[l+36>>2],y[l>>2]=-y[l+32>>2],o[_[_[e>>2]+64>>2]](l+16|0,e,l),R=y[t+56>>2],F=y[t+40>>2],I=y[t+36>>2],M=y[t+52>>2],P=y[t+24>>2],D=y[t+20>>2],N=y[t+32>>2],L=y[t+48>>2],z=y[t+8>>2],G=y[t>>2],U=y[t+4>>2],X=y[t+16>>2],p=y[l+24>>2],f=y[l+16>>2],d=y[l+20>>2],m=b(m+b(b(b(u*w)+b(h*k))+b(c*C))),v=b(v+b(b(b(u*O)+b(h*S))+b(c*T))),c=b(g+b(b(b(u*E)+b(h*x))+b(c*A))),y[n>>2]=b(b(m*y[i>>2])+b(v*y[i+4>>2]))+b(c*y[i+8>>2]),u=b(L+b(b(b(f*G)+b(d*U))+b(p*z))),h=b(M+b(b(b(f*X)+b(d*D))+b(p*P))),p=b(R+b(b(b(f*N)+b(d*I))+b(p*F))),y[r>>2]=b(b(u*y[i>>2])+b(h*y[i+4>>2]))+b(p*y[i+8>>2]),_[s+12>>2]=0,y[s+8>>2]=p,y[s+4>>2]=h,y[s>>2]=u,_[a+12>>2]=0,y[a+8>>2]=c,y[a+4>>2]=v,y[a>>2]=m,(f=y[n>>2])>(d=y[r>>2])&&(y[n>>2]=d,y[r>>2]=f,_[s+12>>2]=0,y[s+8>>2]=c,y[s+4>>2]=v,y[s>>2]=m,_[a+12>>2]=0,y[a+8>>2]=p,y[a+4>>2]=h,y[a>>2]=u),B=l+48|0},o[215]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,o=b(0),a=0,s=0,l=b(0),c=b(0),u=0,h=b(0),p=b(0),f=0;if((0|n)>=1)for(f=e+60|0;a=(r=s<<4)+i|0,o=y[(r=t+r|0)>>2],l=y[r+4>>2],c=y[r+8>>2],h=b(b(b(o*y[e+76>>2])+b(l*y[e+80>>2]))+b(c*y[e+84>>2])),p=b(b(b(o*y[e+92>>2])+b(l*y[e+96>>2]))+b(c*y[e+100>>2])),o=b(b(b(o*y[e+60>>2])+b(l*y[e+64>>2]))+b(c*y[e+68>>2])),u=_[4+(r=((o<h?h<p?2:1:(o<p)<<1)<<4)+f|0)>>2],_[a>>2]=_[r>>2],_[a+4>>2]=u,u=_[r+12>>2],_[a+8>>2]=_[r+8>>2],_[a+12>>2]=u,(0|(s=s+1|0))!=(0|n););},o[216]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=0,x=0,T=b(0),S=b(0),E=b(0),C=b(0),w=0,k=0;for(B=r=B-80|0,C=b(o[_[_[e>>2]+48>>2]](e));_[r+72>>2]=0,_[r+76>>2]=0,_[r+64>>2]=0,_[r+68>>2]=0,_[(w=(A=x<<2)+(r- -64|0)|0)>>2]=1065353216,c=y[t+32>>2],u=y[t>>2],h=y[t+16>>2],p=y[t+36>>2],f=y[t+4>>2],d=y[t+20>>2],a=y[t+40>>2],s=y[t+8>>2],l=y[t+24>>2],_[r+44>>2]=0,m=s,s=y[r+64>>2],v=l,l=y[r+68>>2],g=a,a=y[r+72>>2],y[r+40>>2]=b(b(m*s)+b(v*l))+b(g*a),y[r+36>>2]=b(b(s*f)+b(l*d))+b(a*p),y[r+32>>2]=b(b(u*s)+b(h*l))+b(c*a),o[_[_[e>>2]+64>>2]](r+48|0,e,r+32|0),c=y[t+48>>2],u=y[t+8>>2],h=y[t>>2],p=y[t+4>>2],f=y[t+52>>2],d=y[t+24>>2],g=y[t+16>>2],T=y[t+20>>2],s=y[t+56>>2],a=y[t+40>>2],l=y[t+32>>2],S=y[t+36>>2],_[r+44>>2]=0,m=s,s=y[r+48>>2],E=b(l*s),l=y[r+52>>2],v=a,a=y[r+56>>2],y[r+40>>2]=m+b(b(E+b(S*l))+b(v*a)),y[r+36>>2]=f+b(b(b(s*g)+b(l*T))+b(a*d)),y[r+32>>2]=c+b(b(b(s*h)+b(l*p))+b(a*u)),k=(r+32|0)+A|0,y[n+A>>2]=C+y[k>>2],_[w>>2]=-1082130432,c=y[t+32>>2],u=y[t>>2],h=y[t+16>>2],p=y[t+36>>2],f=y[t+4>>2],d=y[t+20>>2],a=y[t+40>>2],s=y[t+8>>2],l=y[t+24>>2],_[r+12>>2]=0,m=s,s=y[r+64>>2],v=l,l=y[r+68>>2],g=a,a=y[r+72>>2],y[r+8>>2]=b(b(m*s)+b(v*l))+b(g*a),y[r+4>>2]=b(b(s*f)+b(l*d))+b(a*p),y[r>>2]=b(b(u*s)+b(h*l))+b(c*a),o[_[_[e>>2]+64>>2]](r+16|0,e,r),c=y[t+48>>2],u=y[t+8>>2],h=y[t>>2],p=y[t+4>>2],f=y[t+52>>2],d=y[t+24>>2],g=y[t+16>>2],T=y[t+20>>2],s=y[t+56>>2],a=y[t+40>>2],l=y[t+32>>2],S=y[t+36>>2],_[r+44>>2]=0,m=s,s=y[r+16>>2],E=b(l*s),l=y[r+20>>2],v=a,a=y[r+24>>2],y[r+40>>2]=m+b(b(E+b(S*l))+b(v*a)),y[r+36>>2]=f+b(b(b(s*g)+b(l*T))+b(a*d)),y[r+32>>2]=c+b(b(b(s*h)+b(l*p))+b(a*u)),y[i+A>>2]=y[k>>2]-C,3!=(0|(x=x+1|0)););B=r+80|0},o[217]=Ke,o[218]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0);a=y[e+92>>2],s=y[e+76>>2],l=y[e+80>>2],u=y[e+100>>2],r=y[e+68>>2],h=y[e+84>>2],c=y[e+96>>2],n=y[e- -64>>2],o=y[e+60>>2],_[i+12>>2]=0,s=b(s-o),c=b(c-n),l=b(l-n),o=b(a-o),p=n=b(b(s*c)-b(l*o)),f=b(n*n),n=b(u-r),a=b(h-r),r=b(b(l*n)-b(a*c)),n=b(b(a*o)-b(s*n)),o=b(b(1)/b(w(b(f+b(b(r*r)+b(n*n)))))),a=b(p*o),y[i+8>>2]=a,n=b(n*o),y[i+4>>2]=n,r=b(r*o),y[i>>2]=r,t&&(y[i+8>>2]=-a,y[i+4>>2]=-n,y[i>>2]=-r)},o[219]=function(e,t){e|=0,t|=0;var i,n=0,r=0,l=0,c=0,u=0,p=0,g=0,T=0,S=b(0),E=0,C=0,k=b(0),O=b(0),R=0,F=0,I=0,M=0,P=b(0),D=b(0),N=0,L=0,z=0,G=0,U=0,X=b(0),V=b(0);for(B=i=B-240|0,(n=_[e+56>>2])&&(o[_[_[n>>2]>>2]](n),(n=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](n))),_[5585]=_[5585]+1,function(e){_[e>>2]=9820,a[e+20|0]=1,_[e+16>>2]=0,a[e+40|0]=1,_[e+8>>2]=0,_[e+12>>2]=0,_[e+36>>2]=0,a[e+60|0]=1,_[e+28>>2]=0,_[e+32>>2]=0,_[e+56>>2]=0,_[e+48>>2]=0,_[e+52>>2]=0}(n=0|o[_[4567]](132,16)),_[e+56>>2]=n,_[i+228>>2]=0,a[i+232|0]=1,_[i+220>>2]=0,_[i+224>>2]=0;(0|E)<(0|o[_[_[e>>2]+96>>2]](e));){if((0|(n=r=_[i+220>>2]))==_[i+224>>2]&&!((0|(n=r))>=(0|(T=n?n<<1:1)))){l=0,p=0,T&&(_[5585]=_[5585]+1,p=0|o[_[4567]](T<<4,16),n=_[i+220>>2]),c=_[i+228>>2];e:{t:{if((0|n)>=1)for(;;)if(C=(g=l<<4)+p|0,L=_[4+(g=c+g|0)>>2],_[C>>2]=_[g>>2],_[C+4>>2]=L,I=_[g+12>>2],_[C+8>>2]=_[g+8>>2],_[C+12>>2]=I,(0|(l=l+1|0))==(0|n))break t;if(!c)break e}d[i+232|0]&&(c&&(_[5586]=_[5586]+1,o[_[4568]](c)),n=_[i+220>>2]),_[i+228>>2]=0}_[i+228>>2]=p,a[i+232|0]=1,_[i+224>>2]=T}_[i+220>>2]=n+1,c=_[i+156>>2],n=(r<<=4)+_[i+228>>2]|0,_[n>>2]=_[i+152>>2],_[n+4>>2]=c,T=_[i+164>>2],_[n+8>>2]=_[i+160>>2],_[n+12>>2]=T,o[_[_[e>>2]+108>>2]](e,E,r+_[i+228>>2]|0),E=E+1|0}a[i+188|0]=1,_[i+184>>2]=0,a[i+208|0]=1,_[i+176>>2]=0,_[i+180>>2]=0,_[i+204>>2]=0,_[i+196>>2]=0,_[i+200>>2]=0,_[i+164>>2]=0,a[i+168|0]=1,_[i+156>>2]=0,_[i+160>>2]=0;e:if(t){if(_[i+60>>2]=0,a[i+64|0]=1,_[i+52>>2]=0,_[i+56>>2]=0,function(e,t){var i,n=0,r=b(0),s=0,l=0,c=b(0),u=b(0),h=0,p=0,f=0,m=b(0),v=b(0),g=0,A=0,x=0,T=b(0),S=b(0),E=0,C=0,k=0,O=0,R=0,F=0,I=b(0);if((0|(i=_[e+4>>2]))>=1)for(;;){t:if(!((0|(A=(f=A)+1|0))>=(0|i)))for(R=g=(s=_[e+12>>2])+(f<<4)|0,n=A;;){i:if(!((0|(f=n+1|0))>=(0|i)))for(F=C=(n<<4)+s|0,x=f;;){for(m=y[g>>2],c=b(y[C>>2]-m),n=(x<<4)+s|0,r=y[g+4>>2],v=b(y[n+4>>2]-r),u=b(y[C+4>>2]-r),T=b(y[n>>2]-m),I=b(b(c*v)-b(u*T)),r=y[R+8>>2],m=b(y[F+8>>2]-r),r=b(y[n+8>>2]-r),T=b(b(m*T)-b(c*r)),m=b(b(u*r)-b(m*v)),r=b(1),k=0;;){c=b(I*r),v=b(m*r),u=b(T*r);n:if((r=b(b(c*c)+b(b(v*v)+b(u*u))))>b(9999999747378752e-20)){if(r=b(b(1)/b(w(r))),S=b(c*r),c=b(u*r),u=b(v*r),(0|(h=_[t+4>>2]))>=1)for(s=_[t+12>>2],n=0;;){if(b(b(b(u*y[(l=s+(n<<4)|0)>>2])+b(c*y[l+4>>2]))+b(S*y[l+8>>2]))>b(.9990000128746033))break n;if((0|h)==(0|(n=n+1|0)))break}if(r=b(b(b(u*y[g>>2])+b(c*y[g+4>>2]))+b(S*y[R+8>>2])),(0|(l=_[e+4>>2]))>=1)for(s=_[e+12>>2],n=0;;){if(b(b(b(b(b(u*y[(p=s+(n<<4)|0)>>2])+b(c*y[p+4>>2]))+b(S*y[p+8>>2]))-r)+b(-.009999999776482582))>b(0))break n;if((0|l)==(0|(n=n+1|0)))break}if(r=b(-r),_[t+8>>2]==(0|h)&&!((0|h)>=(0|(E=h?h<<1:1)))){if(s=0,O=0,E&&(_[5585]=_[5585]+1,O=0|o[_[4567]](E<<4,16),h=_[t+4>>2]),(0|h)>=1)for(;l=(n=s<<4)+O|0,p=n+_[t+12>>2]|0,n=_[p+4>>2],_[l>>2]=_[p>>2],_[l+4>>2]=n,n=_[p+12>>2],_[l+8>>2]=_[p+8>>2],_[l+12>>2]=n,(0|(s=s+1|0))!=(0|h););(n=_[t+12>>2])&&(d[t+16|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[t+12>>2]=0),_[t+12>>2]=O,a[t+16|0]=1,_[t+8>>2]=E,h=_[t+4>>2]}n=_[t+12>>2]+(h<<4)|0,y[n+12>>2]=r,y[n+8>>2]=S,y[n+4>>2]=c,y[n>>2]=u,_[t+4>>2]=_[t+4>>2]+1}if(r=b(-1),2==(0|(k=k+1|0)))break}if((0|(x=x+1|0))==(0|i))break i;s=_[e+12>>2]}if((0|i)==(0|f))break t;s=_[e+12>>2],n=f}if((0|i)==(0|A))break}}(i+216|0,i+48|0),_[i+140>>2]=0,a[i+144|0]=1,_[i+132>>2]=0,_[i+136>>2]=0,_[i+52>>2]>=1)for(c=0;;){if(t=_[i+60>>2]+(c<<4)|0,_[i+112>>2]=_[t+8>>2],n=_[t+4>>2],_[i+104>>2]=_[t>>2],_[i+108>>2]=n,S=b(y[t+12>>2]-b(o[_[_[e>>2]+48>>2]](e))),(0|(n=_[i+132>>2]))==_[i+136>>2]&&!((0|n)>=(0|(t=n?n<<1:1)))){if(l=0,p=0,t&&(_[5585]=_[5585]+1,p=0|o[_[4567]](t<<4,16),n=_[i+132>>2]),(0|n)>=1)for(;g=T=(r=l<<4)+p|0,r=r+_[i+140>>2]|0,C=_[r+4>>2],_[g>>2]=_[r>>2],_[g+4>>2]=C,g=_[r+12>>2],_[T+8>>2]=_[r+8>>2],_[T+12>>2]=g,(0|(l=l+1|0))!=(0|n););(n=_[i+140>>2])&&(d[i+144|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[i+140>>2]=0),_[i+140>>2]=p,a[i+144|0]=1,_[i+136>>2]=t,n=_[i+132>>2]}if(t=_[i+140>>2]+(n<<4)|0,n=_[i+108>>2],_[t>>2]=_[i+104>>2],_[t+4>>2]=n,n=_[i+112>>2],y[t+12>>2]=S,_[t+8>>2]=n,_[i+132>>2]=_[i+132>>2]+1,!((0|(c=c+1|0))<_[i+52>>2]))break}if(_[i+116>>2]=0,a[i+120|0]=1,_[i+108>>2]=0,_[i+112>>2]=0,function(e,t){var i,n=0,r=0,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=0,f=b(0),m=b(0),v=b(0),g=0,A=0,T=0,S=0,E=0,C=0,w=0,k=0,O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=0,B=0,N=0;if((0|(i=_[e+4>>2]))>=1)for(;;){t:if(!((0|(S=(n=S)+1|0))>=(0|i)))for(B=E=(r=_[e+12>>2])+(n<<4)|0,n=S;;){i:if(!((0|(C=n+1|0))>=(0|i)))for(N=w=(n<<4)+r|0,k=C;;){l=y[4+(n=(k<<4)+r|0)>>2],c=y[w>>2],f=y[w+4>>2],m=y[n>>2],v=b(b(l*c)-b(f*m)),u=y[n+8>>2],O=y[w+8>>2],R=b(b(f*u)-b(O*l)),F=b(b(O*m)-b(u*c));n:if(b(b(v*v)+b(b(R*R)+b(F*F)))>b(9999999747378752e-20)&&(s=y[E+4>>2],h=y[E>>2],I=b(b(m*s)-b(l*h)),M=l,l=y[E+8>>2],P=b(b(M*l)-b(u*s)),m=b(b(u*h)-b(m*l)),b(b(I*I)+b(b(P*P)+b(m*m)))>b(9999999747378752e-20)&&(u=b(b(f*h)-b(c*s)),f=b(b(O*s)-b(f*l)),c=b(b(c*l)-b(O*h)),b(b(u*u)+b(b(f*f)+b(c*c)))>b(9999999747378752e-20)&&(s=b(b(l*v)+b(b(s*F)+b(R*h))),b(x(s))>b(9.999999974752427e-7))))){if(s=b(b(-1)/s),h=y[n+12>>2],l=y[B+12>>2],M=b(v*l),v=y[N+12>>2],u=b(s*b(b(u*h)+b(M+b(I*v)))),c=b(s*b(b(c*h)+b(b(F*l)+b(m*v)))),s=b(s*b(b(f*h)+b(b(R*l)+b(P*v)))),n=0,(0|(A=_[e+4>>2]))>0)for(;;){if(b(b(y[12+(p=(n<<4)+r|0)>>2]+b(b(b(s*y[p>>2])+b(c*y[p+4>>2]))+b(u*y[p+8>>2])))+b(-.009999999776482582))>b(0))break n;if((0|A)==(0|(n=n+1|0)))break}if((0|(r=_[t+4>>2]))==_[t+8>>2]&&!((0|r)>=(0|(p=r?r<<1:1)))){if(n=0,A=0,p&&(_[5585]=_[5585]+1,A=0|o[_[4567]](p<<4,16),r=_[t+4>>2]),(0|r)>=1)for(;T=(g=n<<4)+A|0,g=g+_[t+12>>2]|0,D=_[g+4>>2],_[T>>2]=_[g>>2],_[T+4>>2]=D,D=_[g+12>>2],_[T+8>>2]=_[g+8>>2],_[T+12>>2]=D,(0|r)!=(0|(n=n+1|0)););(n=_[t+12>>2])&&(d[t+16|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[t+12>>2]=0),_[t+12>>2]=A,a[t+16|0]=1,_[t+8>>2]=p,r=_[t+4>>2]}n=_[t+12>>2]+(r<<4)|0,_[n+12>>2]=0,y[n+8>>2]=u,y[n+4>>2]=c,y[n>>2]=s,_[t+4>>2]=_[t+4>>2]+1}if((0|(k=k+1|0))==(0|i))break i;r=_[e+12>>2]}if((0|i)==(0|C))break t;r=_[e+12>>2],n=C}if((0|i)==(0|S))break}}(i+128|0,i+104|0),_i(i+152|0,_[i+116>>2],_[i+108>>2]),(t=_[i+116>>2])&&(d[i+120|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[i+116>>2]=0),(t=_[i+140>>2])&&(d[i+144|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[i+140>>2]=0),!(t=_[i+60>>2]))break e;d[i+64|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[i+60>>2]=0}else _i(i+152|0,_[i+228>>2],_[i+220>>2]);if(r=0,t=0,!((0|(T=_[i+196>>2]))<1)){for(_[5585]=_[5585]+1,U=0|o[_[4567]](T<<4,16),l=0;n=_[i+52>>2],_[(t=(l<<4)+U|0)>>2]=_[i+48>>2],_[t+4>>2]=n,n=_[i+60>>2],_[t+8>>2]=_[i+56>>2],_[t+12>>2]=n,(0|T)!=(0|(l=l+1|0)););t=U}L=t,_[i+140>>2]=0,a[i+144|0]=1,_[i+132>>2]=0,_[i+136>>2]=0,a[i+63|0]=0,a[i+64|0]=0,a[i+65|0]=0,a[i+66|0]=0,_[i+56>>2]=0,_[i+60>>2]=0,_[i+48>>2]=0,_[i+52>>2]=0;e:{if((0|T)<=-1)for(u=T;;){if(t=A(u,36)+r|0,(r=_[(n=t)+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[n+12>>2]=0),a[t+16|0]=1,_[n+12>>2]=0,_[t+4>>2]=0,_[t+8>>2]=0,(t=u+1|0)>>>0<u>>>0)break e;r=_[i+140>>2],u=t}if(T)for(la(i+128|0,T),r=n=i+48|3;t=_[i+140>>2]+A(u,36)|0,_[t+4>>2]=0,_[t+8>>2]=0,a[t+16|0]=1,_[t+12>>2]=0,c=d[n+4|0]|d[n+5|0]<<8|d[n+6|0]<<16|d[n+7|0]<<24,g=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a[t+20|0]=g,a[t+21|0]=g>>>8,a[t+22|0]=g>>>16,a[t+23|0]=g>>>24,a[t+24|0]=c,a[t+25|0]=c>>>8,a[t+26|0]=c>>>16,a[t+27|0]=c>>>24,c=d[r+12|0]|d[r+13|0]<<8|d[r+14|0]<<16|d[r+15|0]<<24,g=d[r+8|0]|d[r+9|0]<<8|d[r+10|0]<<16|d[r+11|0]<<24,a[t+28|0]=g,a[t+29|0]=g>>>8,a[t+30|0]=g>>>16,a[t+31|0]=g>>>24,a[t+32|0]=c,a[t+33|0]=c>>>8,a[t+34|0]=c>>>16,a[t+35|0]=c>>>24,(0|T)!=(0|(u=u+1|0)););}if(_[i+132>>2]=T,c=_[e+56>>2],(0|(l=_[c+8>>2]))<(0|(g=_[i+156>>2]))){if(_[c+12>>2]<(0|g)){if(g?(_[5585]=_[5585]+1,n=0|o[_[4567]](g<<4,16),t=_[c+8>>2]):(n=0,t=l),(0|t)>=1)for(r=0;C=(u=r<<4)+n|0,u=u+_[c+16>>2]|0,p=_[u+4>>2],_[C>>2]=_[u>>2],_[C+4>>2]=p,I=_[u+12>>2],_[C+8>>2]=_[u+8>>2],_[C+12>>2]=I,(0|t)!=(0|(r=r+1|0)););(t=_[c+16>>2])&&(d[c+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[c+16>>2]=0),_[c+16>>2]=n,_[c+12>>2]=g,a[c+20|0]=1}for(;n=_[i+52>>2],t=_[c+16>>2]+(l<<4)|0,_[t>>2]=_[i+48>>2],_[t+4>>2]=n,n=_[i+60>>2],_[t+8>>2]=_[i+56>>2],_[t+12>>2]=n,(0|g)!=(0|(l=l+1|0)););}if(_[c+8>>2]=g,l=0,(0|g)>0)for(;t=(n=l<<4)+_[_[e+56>>2]+16>>2]|0,n=n+_[i+164>>2]|0,r=_[n+4>>2],_[t>>2]=_[n>>2],_[t+4>>2]=r,r=_[n+12>>2],_[t+8>>2]=_[n+8>>2],_[t+12>>2]=r,(0|g)!=(0|(l=l+1|0)););if((0|T)>=1)for(g=0;;){for(c=0,p=M=_[i+184>>2]+A(_[_[i+204>>2]+(g<<2)>>2],12)|0;;){if(F=_[8+(A(_[p+4>>2],12)+p|0)>>2],u=t=(E=A(g,36))+_[i+140>>2]|0,(0|(r=_[t+4>>2]))==_[t+8>>2]&&!((0|r)>=(0|(I=r?r<<1:1)))){l=0,n=0,I&&(_[5585]=_[5585]+1,n=0|o[_[4567]](I<<2,16),r=_[u+4>>2]),C=_[t+12>>2];e:{t:{if((0|r)>=1)for(;;)if(_[(R=l<<2)+n>>2]=_[C+R>>2],(0|(l=l+1|0))==(0|r))break t;if(!C)break e}d[t+16|0]&&C&&(_[5586]=_[5586]+1,o[_[4568]](C)),_[t+12>>2]=0,r=_[u+4>>2]}a[t+16|0]=1,_[t+12>>2]=n,_[t+8>>2]=I}if(_[_[t+12>>2]+(r<<2)>>2]=F,_[u+4>>2]=_[u+4>>2]+1,(0|c)<=1&&(n=_[i+164>>2],S=y[4+(t=n+(F<<4)|0)>>2],n=n+(_[p+8>>2]<<4)|0,k=y[n+4>>2],O=y[t>>2],P=y[n>>2],D=y[t+8>>2],X=y[n+8>>2],_[12+(t=(i+48|0)+(c<<4)|0)>>2]=0,O=b(P-O),k=b(k-S),P=b(X-D),S=b(b(1)/b(w(b(b(b(O*O)+b(k*k))+b(P*P))))),y[t+8>>2]=P*S,y[t+4>>2]=k*S,y[t>>2]=O*S,c=c+1|0),t=A(_[p+4>>2],12)+p|0,(0|M)==(0|(p=A(_[t>>2],12)+t|0)))break}if(2!=(0|c)?(_[(t=(g<<4)+L|0)>>2]=0,_[t+4>>2]=0,_[t+8>>2]=0,_[t+12>>2]=0,u=_[i+140>>2]):(S=y[i+52>>2],O=y[i+68>>2],k=y[i+64>>2],P=y[i+56>>2],D=y[i+48>>2],X=y[i+72>>2],_[12+(t=(g<<4)+L|0)>>2]=0,V=b(b(O*D)-b(S*k)),O=b(b(S*X)-b(P*O)),k=b(b(P*k)-b(X*D)),S=b(b(1)/b(w(b(b(V*V)+b(b(O*O)+b(k*k)))))),y[t+8>>2]=V*S,y[t+4>>2]=k*S,S=b(O*S),y[t>>2]=S,u=_[i+140>>2],y[20+(n=E+u|0)>>2]=S,_[n+24>>2]=_[t+4>>2],t=_[t+8>>2],_[n+32>>2]=1900671690,_[n+28>>2]=t),(0|(r=_[4+(t=u+E|0)>>2]))<1)S=b(1.0000000150474662e30);else for(c=_[t+12>>2],O=y[8+(n=(g<<4)+L|0)>>2],k=y[n+4>>2],P=y[n>>2],u=_[_[e+56>>2]+16>>2],S=b(1.0000000150474662e30),l=0;n=u+(_[c+(l<<2)>>2]<<4)|0,S=S>(D=b(b(b(y[n>>2]*P)+b(y[n+4>>2]*k))+b(y[n+8>>2]*O)))?D:S,(0|(l=l+1|0))<(0|r););if(y[t+32>>2]=-S,(0|T)==(0|(g=g+1|0)))break}if(T=0,_[i+132>>2]<=0)I=0;else{for(C=0,I=0,n=0;;){if((0|n)==(0|T))if((0|T)>=(0|(n=T?T<<1:1)))n=T;else{l=0,r=0,n&&(_[5585]=_[5585]+1,r=0|o[_[4567]](n<<2,16));e:{t:{if(T)for(;;)if(_[(t=l<<2)+r>>2]=_[t+C>>2],(0|T)==(0|(l=l+1|0)))break t;if(!C){n=1;break e}}I&&(_[5586]=_[5586]+1,o[_[4568]](I))}I=r,C=r}if(_[(T<<2)+C>>2]=T,!((0|(T=T+1|0))<_[i+132>>2]))break}for(;;){n=_[((t=T+-1|0)<<2)+C>>2],_[5585]=_[5585]+1,g=0|o[_[4567]](4,16),_[g>>2]=n;e:{if((0|t)<1)T=t,t=g,F=1;else{for(n=(l=_[i+140>>2])+A(n,36)|0,S=y[n+20>>2],O=y[n+28>>2],k=y[n+24>>2],p=T+-2|0,r=1,T=t,n=g,F=1;;){u=_[(p<<2)+C>>2],t=A(u,36)+l|0;t:if(b(b(b(S*y[t+20>>2])+b(k*y[t+24>>2]))+b(O*y[t+28>>2]))>b(.9990000128746033)){if((0|r)!=(0|F)||(0|r)>=(0|(c=r?r<<1:1)))c=r,t=n;else{l=0,t=0,c&&(_[5585]=_[5585]+1,t=0|o[_[4567]](c<<2,16));i:{n:{if((0|r)>=1)for(;;)if(_[(E=l<<2)+t>>2]=_[g+E>>2],(0|(l=l+1|0))==(0|r))break n;if(!g)break i}n&&(_[5586]=_[5586]+1,o[_[4568]](n))}g=t}if(_[(F<<2)+g>>2]=u,F=F+1|0,l=0,!((0|T)<1)){for(;;){if((0|u)!=_[(n=(l<<2)+C|0)>>2]){if((0|T)!=(0|(l=l+1|0)))continue;break t}break}(0|T)<=(0|l)||(r=n,n=((T=T+-1|0)<<2)+C|0,_[r>>2]=_[n>>2],_[n>>2]=u)}}else c=r,t=n;if(!((0|p)>=1))break;p=p+-1|0,l=_[i+140>>2],n=t,r=c}if((0|F)>1){for(u=0,_[i+116>>2]=0,a[i+120|0]=1,_[i+108>>2]=0,_[i+112>>2]=0,_[i+40>>2]=0,_[i+44>>2]=0,_[i+32>>2]=0,_[i+36>>2]=0,S=b(0),O=b(0),k=b(0),n=0;;){if(r=_[i+140>>2]+A(_[(n<<2)+g>>2],36)|0,P=y[r+24>>2],D=y[r+28>>2],y[i+32>>2]=y[r+20>>2]+k,y[i+40>>2]=D+S,y[i+36>>2]=P+O,(0|(p=_[r+4>>2]))>=1)for(E=0;;){z=_[_[r+12>>2]+(E<<2)>>2],c=_[_[e+56>>2]+16>>2]+(z<<4)|0,l=_[c+12>>2],_[i+16>>2]=_[c+8>>2],_[i+20>>2]=l,l=_[c+4>>2],_[i+8>>2]=_[c>>2],_[i+12>>2]=l;t:{if((0|u)>=1)for(l=0,c=_[i+116>>2];;){if((0|z)==_[20+(c+A(l,24)|0)>>2])break t;if(!((0|(l=l+1|0))<(0|u)))break}if(c=_[i+20>>2],_[i+56>>2]=_[i+16>>2],_[i+60>>2]=c,c=_[i+12>>2],_[i+48>>2]=_[i+8>>2],_[i+52>>2]=c,_[i+112>>2]==(0|u)&&!((0|u)>=(0|(N=u?u<<1:1)))){l=0,c=0,N&&(_[5585]=_[5585]+1,c=0|o[_[4567]](A(N,24),16),u=_[i+108>>2]),M=_[i+116>>2];i:{n:{if((0|u)>=1)for(;;)if(R=(p=A(l,24))+c|0,G=_[4+(p=p+M|0)>>2],_[R>>2]=_[p>>2],_[R+4>>2]=G,G=_[p+20>>2],_[R+16>>2]=_[p+16>>2],_[R+20>>2]=G,G=_[p+12>>2],_[R+8>>2]=_[p+8>>2],_[R+12>>2]=G,(0|u)==(0|(l=l+1|0)))break n;if(!M)break i}d[i+120|0]&&(M&&(_[5586]=_[5586]+1,o[_[4568]](M)),u=_[i+108>>2]),_[i+116>>2]=0}_[i+116>>2]=c,a[i+120|0]=1,_[i+112>>2]=N}c=_[i+116>>2]+A(u,24)|0,u=_[i+52>>2],_[c>>2]=_[i+48>>2],_[c+4>>2]=u,u=_[i+60>>2],l=_[i+56>>2],p=_[i- -64>>2],_[c+20>>2]=z,_[c+16>>2]=p,_[c+8>>2]=l,_[c+12>>2]=u,u=_[i+108>>2]+1|0,_[i+108>>2]=u,p=_[r+4>>2]}if(!((0|(E=E+1|0))<(0|p)))break}if(S=y[i+40>>2],O=y[i+36>>2],k=y[i+32>>2],(0|F)==(0|(n=n+1|0)))break}if(_[i+60>>2]=0,a[i+64|0]=1,_[i+52>>2]=0,_[i+56>>2]=0,n=_[i+140>>2]+A(_[g>>2],36)|0,_[i+68>>2]=_[n+20>>2],_[i+72>>2]=_[n+24>>2],_[i+76>>2]=_[n+28>>2],_[i+80>>2]=_[n+32>>2],P=k,k=b(b(1)/b(w(b(b(b(k*k)+b(O*O))+b(S*S))))),y[i+32>>2]=P*k,y[i+36>>2]=O*k,y[i+40>>2]=S*k,_[i+20>>2]=0,a[i+24|0]=1,_[i+12>>2]=0,_[i+16>>2]=0,gi(i+104|0,i+8|0,i+32|0),_[i+12>>2]<=0)u=_[i+108>>2];else for(n=0,c=_[i+52>>2];;){if(M=(E=A(n,24))+_[i+20>>2]|0,_[i+56>>2]==(0|c)&&!((0|c)>=(0|(p=c?c<<1:1)))){l=0,r=0,p&&(_[5585]=_[5585]+1,r=0|o[_[4567]](p<<2,16),c=_[i+52>>2]),u=_[i+60>>2];t:{i:{if((0|c)>=1)for(;;)if(_[(R=l<<2)+r>>2]=_[u+R>>2],(0|c)==(0|(l=l+1|0)))break i;if(!u)break t}d[i+64|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[i+60>>2]=0,c=_[i+52>>2]}_[i+60>>2]=r,a[i+64|0]=1,_[i+56>>2]=p}_[_[i+60>>2]+(c<<2)>>2]=_[M+20>>2],c=_[i+52>>2]+1|0,_[i+52>>2]=c;t:if(!((0|(u=_[i+108>>2]))<1)){for(r=_[20+(E+_[i+20>>2]|0)>>2],l=0,p=_[i+116>>2];;){if(E=p+A(l,24)|0,(0|r)!=_[E+20>>2]){if((0|(l=l+1|0))<(0|u))continue;break t}break}_[E+20>>2]=-1}if(!((0|(n=n+1|0))<_[i+12>>2]))break}t:{if((0|u)>=1)for(c=0,E=_[i+140>>2],p=_[i+132>>2],M=_[i+116>>2];;){if(-1!=(0|(R=_[20+(M+A(c,24)|0)>>2]))&&(r=0,!((0|p)<1)))for(;;){l=0;i:{if((0|F)>0)for(;;){if(_[(l<<2)+g>>2]==(0|r))break i;if((0|F)==(0|(l=l+1|0)))break}if(n=E+A(r,36)|0,!((0|(N=_[n+4>>2]))<1))for(z=_[n+12>>2],l=0;;){if(n=1,(0|R)==_[z+(l<<2)>>2])break t;if(!((0|(l=l+1|0))<(0|N)))break}}if((0|p)==(0|(r=r+1|0)))break}if(!((0|(c=c+1|0))<(0|u)))break}aa(_[e+56>>2]+24|0,i+48|0),n=0}if((r=_[i+20>>2])&&(d[i+24|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+20>>2]=0),(r=_[i+60>>2])&&(d[i+64|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+60>>2]=0),(r=_[i+116>>2])&&(d[i+120|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+116>>2]=0),!(n&(0|F)>0))break e}else if(n=1!=(0|F),F=1,n)break e}for(E=0;;){if(n=_[(E<<2)+g>>2],_[i+60>>2]=0,_[i+52>>2]=0,_[i+56>>2]=0,r=_[i+140>>2],a[i+64|0]=1,n=r+A(n,36)|0,(0|(r=_[n+4>>2]))>=1){_[5585]=_[5585]+1,p=r<<2,u=0|o[_[4567]](p,16),l=0,c=_[i+60>>2];t:{i:{if((0|(M=_[i+52>>2]))>=1)for(;;)if(_[(R=l<<2)+u>>2]=_[c+R>>2],(0|M)==(0|(l=l+1|0)))break i;if(!c)break t}d[i+64|0]&&c&&(_[5586]=_[5586]+1,o[_[4568]](c))}for(_[i+60>>2]=u,a[i+64|0]=1,_[i+56>>2]=r,l=0,Pi(u,0,p),_[i+52>>2]=r,c=_[n+12>>2],u=_[i+60>>2];_[(p=l<<2)+u>>2]=_[c+p>>2],(0|r)!=(0|(l=l+1|0)););}else _[i+52>>2]=r;if(r=_[n+24>>2],_[i+68>>2]=_[n+20>>2],_[i+72>>2]=r,r=_[n+32>>2],_[i+76>>2]=_[n+28>>2],_[i+80>>2]=r,aa(_[e+56>>2]+24|0,i+48|0),(n=_[i+60>>2])&&(d[i+64|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[i+60>>2]=0),!((0|(E=E+1|0))<(0|F)))break}}if(g&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),!T)break}T=C}if(function(e){var t,i=0,n=0,r=0,l=b(0),c=b(0),u=0,p=b(0),g=0,T=b(0),S=b(0),E=b(0),C=0,k=b(0),O=b(0),R=0,F=b(0),I=0,M=0,P=0,D=0,N=b(0),L=b(0),z=0,G=0,U=0,X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0);if(B=t=B-96|0,a[t+52|0]=1,_[t+48>>2]=0,a[t+72|0]=1,_[t+40>>2]=0,_[t+44>>2]=0,_[t+68>>2]=0,a[t+92|0]=1,_[t+60>>2]=0,_[t+64>>2]=0,_[t+88>>2]=0,_[t+80>>2]=0,_[t+84>>2]=0,_[t+28>>2]=0,a[t+32|0]=1,_[t+20>>2]=0,_[t+24>>2]=0,_[e+72>>2]=0,_[e+76>>2]=0,_[e+64>>2]=0,_[e+68>>2]=0,!((0|(i=_[e+28>>2]))<1)){for(;;){if(n=_[e+36>>2],z=A(g,36),(0|(G=_[4+(n+z|0)>>2]))>=1){for(I=0;;){i=_[12+(n+z|0)>>2],n=_[i+(I<<2)>>2],u=_[i+(((D=(0|G)==(0|(I=I+1|0)))?0:I)<<2)>>2],f[t+10>>1]=u,f[t+8>>1]=n,M=0,(0|(r=u<<16>>16))>(0|(i=n<<16>>16))&&(f[t+10>>1]=n,f[t+8>>1]=u,r=n,i=u);e:if(!((n=(u=r<<16)+(C=i<<16>>16)&_[t+64>>2]+-1)>>>0>=v[t+20>>2])&&-1!=(0|(n=_[_[t+28>>2]+(n<<2)>>2]))){for(R=_[t+48>>2],P=_[t+88>>2];;){if(m[2+(U=(n<<=2)+P|0)>>1]!=(65535&r)||m[U>>1]!=(65535&i)){if(-1!=(0|(n=_[n+R>>2])))continue;break e}break}M=n+_[t+68>>2]|0}r=_[e+16>>2],i=r+(u>>16<<4)|0,r=r+(C<<4)|0,l=b(y[i+8>>2]-y[r+8>>2]),c=b(y[i>>2]-y[r>>2]),p=b(y[i+4>>2]-y[r+4>>2]),S=b(b(1)/b(w(b(b(b(c*c)+b(p*p))+b(l*l))))),l=b(l*S),p=b(p*S),c=b(c*S);e:{if((0|(i=_[e+48>>2]))>=1)for(u=_[e+56>>2],n=0;;){if(S=y[8+(r=u+(n<<4)|0)>>2],k=y[r>>2],E=y[r+4>>2],(+b(x(b(S-l)))>1e-6^1?!(+b(x(b(k-c)))>1e-6|+b(x(b(E-p)))>1e-6):0)|(+b(x(b(l+S)))>1e-6^1?!(+b(x(b(c+k)))>1e-6|+b(x(b(p+E)))>1e-6):0))break e;if(!((0|(n=n+1|0))<(0|i)))break}if(_[e+52>>2]==(0|i)&&!((0|i)>=(0|(r=i?i<<1:1)))){if(n=0,u=0,r&&(_[5585]=_[5585]+1,u=0|o[_[4567]](r<<4,16),i=_[e+48>>2]),(0|i)>=1)for(;R=(C=n<<4)+u|0,C=C+_[e+56>>2]|0,U=_[C+4>>2],_[R>>2]=_[C>>2],_[R+4>>2]=U,P=_[C+12>>2],_[R+8>>2]=_[C+8>>2],_[R+12>>2]=P,(0|(n=n+1|0))!=(0|i););(i=_[e+56>>2])&&(d[e+60|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+56>>2]=0),_[e+56>>2]=u,a[e+60|0]=1,_[e+52>>2]=r,i=_[e+48>>2]}i=_[e+56>>2]+(i<<4)|0,_[i+12>>2]=0,y[i+8>>2]=l,y[i+4>>2]=p,y[i>>2]=c,_[e+48>>2]=_[e+48>>2]+1}if(M?f[M+2>>1]=g:(f[t>>1]=g,f[t+2>>1]=65535,Ai(t+16|0,t+8|0,t)),D)break;n=_[e+36>>2]}i=_[e+28>>2]}if(!((0|(g=g+1|0))<(0|i)))break}if(u=0,!((0|i)<1))for(u=(0|i)>0,r=_[e+16>>2],z=_[e+36>>2],g=0;;){if(n=z+A(g,36)|0,(0|(I=_[n+4>>2]))>=3)for(G=I+-1|0,M=_[n+12>>2],C=r+(_[M>>2]<<4)|0,P=C,c=y[e+72>>2],S=y[e+68>>2],E=y[e+64>>2],n=1;D=r+(_[M+(n<<2)>>2]<<4)|0,l=y[D+8>>2],R=r+(_[M+((0|(n=n+1|0))%(0|I)<<2)>>2]<<4)|0,p=y[R+8>>2],k=y[C>>2],X=y[D>>2],V=b(k-X),T=y[C+4>>2],H=y[R+4>>2],L=b(T-H),j=y[D+4>>2],F=b(T-j),W=y[R>>2],Y=b(k-W),N=b(b(V*L)-b(F*Y)),Z=F,F=y[P+8>>2],q=b(F-p),Q=b(F-l),L=b(b(Z*q)-b(Q*L)),p=b(b(b(F+l)+p)*b(.3333333432674408)),l=b(b(Q*Y)-b(V*q)),l=b(b(w(b(b(N*N)+b(b(L*L)+b(l*l)))))*b(.5)),c=b(c+b(p*l)),y[e+72>>2]=c,S=b(S+b(b(b(H+b(T+j))*b(.3333333432674408))*l)),y[e+68>>2]=S,E=b(E+b(b(b(W+b(k+X))*b(.3333333432674408))*l)),y[e+64>>2]=E,O=b(O+l),(0|n)!=(0|G););if((0|(g=g+1|0))==(0|i))break}}if(_[e+96>>2]=2139095039,l=b(b(1)/O),S=b(l*y[e+64>>2]),y[e+64>>2]=S,E=b(l*y[e+68>>2]),y[e+68>>2]=E,O=b(l*y[e+72>>2]),y[e+72>>2]=O,l=b(34028234663852886e22),p=b(34028234663852886e22),u)for(u=_[e+36>>2],r=0;n=u+A(r,36)|0,(c=b(x(b(y[n+32>>2]+b(b(b(S*y[n+20>>2])+b(E*y[n+24>>2]))+b(O*y[n+28>>2]))))))<p&&(y[e+96>>2]=c,p=c),(0|(r=r+1|0))!=(0|i););if((0|(r=_[e+8>>2]))<1)k=b(-34028234663852886e22),c=b(34028234663852886e22),S=b(34028234663852886e22),E=b(-34028234663852886e22),O=b(-34028234663852886e22);else for(u=_[e+16>>2],S=b(34028234663852886e22),O=b(-34028234663852886e22),n=0,E=b(-34028234663852886e22),k=b(-34028234663852886e22),c=b(34028234663852886e22);T=y[8+(i=u+(n<<4)|0)>>2],O=T>O?T:O,S=T<S?T:S,T=y[i+4>>2],E=T>E?T:E,c=T<c?T:c,T=y[i>>2],k=T>k?T:k,l=T<l?T:l,(0|(n=n+1|0))<(0|r););n=0,_[e+128>>2]=0,T=b(O-S),y[e+124>>2]=T,N=b(E-c),y[e+120>>2]=N,i=e+116|0,F=b(k-l),y[i>>2]=F,_[e+112>>2]=0,y[e+108>>2]=S+O,y[e+104>>2]=c+E,y[e+100>>2]=l+k,c=y[(u=(P=i)+(r=(i=F<N?N<T?2:1:(F<T)<<1)<<2)|0)>>2],l=b(p/b(1.7320507764816284)),y[e+84>>2]=l,y[e+88>>2]=l,y[e+80>>2]=l,r=r+(e+80|0)|0,p=b(y[u>>2]*b(.5)),y[r>>2]=p,c=b(b(b(c*b(.5))-l)*b(.0009765625));e:{t:{for(;;){if(Fr(e))break t;if(p=b(p-c),y[r>>2]=p,1024==(0|(n=n+1|0)))break}y[e+84>>2]=l,y[e+88>>2]=l,y[e+80>>2]=l;break e}if(n=1,u=_[(i=(g=e+80|0)+((1<<(r=1<<i&3)&3)<<2)|0)>>2],r=_[(g=g+(r<<2)|0)>>2],c=b(b(y[e+96>>2]-l)*b(.0009765625)),y[g>>2]=c+y[g>>2],l=b(c+y[i>>2]),y[i>>2]=l,Fr(e)){for(;;){if(p=l,1024==(0|n))break e;if(r=_[g>>2],y[g>>2]=c+y[g>>2],l=b(c+y[i>>2]),y[i>>2]=l,n=n+1|0,!Fr(e))break}h(p),u=s(0)}_[g>>2]=r,_[i>>2]=u}Ba(t+16|0),B=t+96|0}(_[e+56>>2]),T&&I&&(_[5586]=_[5586]+1,o[_[4568]](I)),(0|(r=_[i+132>>2]))>=1)for(u=0;e=_[i+140>>2]+A(u,36)|0,(n=_[(t=e)+12>>2])&&(d[e+16|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[t+12>>2]=0),a[e+16|0]=1,_[t+12>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,(0|r)!=(0|(u=u+1|0)););return(e=_[i+140>>2])&&(d[i+144|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[i+140>>2]=0),L&&U&&(_[5586]=_[5586]+1,o[_[4568]](U)),function(e){var t=0;(t=_[e+52>>2])&&(d[e+56|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+52>>2]=0),_[e+52>>2]=0,_[e+44>>2]=0,_[e+48>>2]=0,a[e+56|0]=1,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1,(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=0,a[e+16|0]=1,_[e+4>>2]=0,_[e+8>>2]=0}(i+152|0),(e=_[i+228>>2])&&(d[i+232|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[i+228>>2]=0),B=i+240|0,1},o[220]=ve,o[221]=ve,o[222]=function(e,t,i,n){t|=0,i|=0,n|=0,o[_[_[(e|=0)>>2]+108>>2]](e,t,i),o[_[_[e>>2]+108>>2]](e,(t+1|0)%3|0,n)},o[223]=function(e,t,i){i|=0,t=_[72+(e=((t|=0)<<4)+(e|=0)|0)>>2],_[i+8>>2]=_[e+68>>2],_[i+12>>2]=t,t=_[e+64>>2],_[i>>2]=_[e+60>>2],_[i+4>>2]=t},o[224]=Ve,o[225]=function(e,t,i,n){t|=0,i|=0,n|=0,o[_[_[(e|=0)>>2]+124>>2]](e,n,t,i)},o[226]=function(e,t,i){e|=0,t|=0,i=b(i);var n,r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=0,g=0;B=n=B-32|0,r=y[e+60>>2],s=b(y[e+76>>2]-r),a=y[e- -64>>2],l=b(y[e+96>>2]-a),u=b(y[e+80>>2]-a),h=b(y[e+92>>2]-r),p=c=b(b(s*l)-b(u*h)),m=b(c*c),d=u,u=y[e+68>>2],c=b(y[e+100>>2]-u),f=b(y[e+84>>2]-u),l=b(b(d*c)-b(f*l)),s=b(b(f*h)-b(s*c)),h=b(b(1)/b(w(b(m+b(b(l*l)+b(s*s)))))),c=b(p*h),l=b(l*h),s=b(s*h);e:if(!((r=b(b(b(y[t+8>>2]*c)+b(b(y[t>>2]*l)+b(y[t+4>>2]*s)))-b(b(u*c)+b(b(r*l)+b(a*s)))))>=(u=b(-i))^1|r<=i^1)){for(;;){if(o[_[_[e>>2]+104>>2]](e,v,n+16|0,n),h=y[n+16>>2],r=b(y[n>>2]-h),f=y[n+20>>2],a=b(y[n+4>>2]-f),p=i=b(b(s*r)-b(l*a)),m=b(i*i),i=b(c*a),d=y[n+24>>2],a=b(y[n+8>>2]-d),i=b(i-b(s*a)),r=b(b(l*a)-b(c*r)),a=b(b(1)/b(w(b(m+b(b(i*i)+b(r*r)))))),p=b(p*a),i=b(i*a),r=b(r*a),b(b(b(y[t+8>>2]*p)+b(b(y[t>>2]*i)+b(y[t+4>>2]*r)))-b(b(d*p)+b(b(h*i)+b(f*r))))<u)break e;if(3==(0|(v=v+1|0)))break}g=1}return B=n+32|0,0|g},o[227]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0);s=y[e+92>>2],l=y[e+76>>2],c=y[e+80>>2],h=y[e+100>>2],a=y[e+68>>2],p=y[e+84>>2],u=y[e+96>>2],r=y[e- -64>>2],o=y[e+60>>2],_[i+12>>2]=0,l=b(l-o),u=b(u-r),c=b(c-r),o=b(s-o),f=r=b(b(l*u)-b(c*o)),d=b(r*r),r=b(h-a),s=b(p-a),a=b(b(c*r)-b(s*u)),r=b(b(s*o)-b(l*r)),o=b(b(1)/b(w(b(d+b(b(a*a)+b(r*r)))))),y[i+8>>2]=f*o,y[i+4>>2]=r*o,y[i>>2]=a*o,t=_[e+72>>2],_[n+8>>2]=_[e+68>>2],_[n+12>>2]=t,t=_[e+64>>2],_[n>>2]=_[e+60>>2],_[n+4>>2]=t},o[228]=Li,o[229]=Ii,o[230]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,s=b(0);B=i=B-800|0,o[_[4565]](5600),_[i+740>>2]=0,_[i+744>>2]=0,_[i+752>>2]=0,_[i+756>>2]=0,_[i+748>>2]=1065353216,_[i+772>>2]=0,_[i+776>>2]=0,_[i+768>>2]=1065353216,_[i+780>>2]=0,_[i+784>>2]=0,_[i+788>>2]=0,_[i+732>>2]=0,_[i+736>>2]=0,_[i+728>>2]=1065353216,_[i+760>>2]=0,_[i+764>>2]=0,_[i+720>>2]=0,_[i+724>>2]=0,_[i+552>>2]=5624,_[i+716>>2]=_[e+200>>2],n=_[e+196>>2],nn(i+496|0),_[i+524>>2]=0,_[i+528>>2]=0,_[i+520>>2]=1065353216,_[i+532>>2]=0,_[i+536>>2]=0,_[i+540>>2]=0,_[i+512>>2]=1065353216,_[i+516>>2]=1065353216,_[i+496>>2]=9868,_[i+548>>2]=0,_[i+544>>2]=n,_[i+528>>2]=n,_[i+500>>2]=8,n=rr(i+384|0),_[i+388>>2]=1,_[i+384>>2]=5212,r=_[t+12>>2],_[i+452>>2]=_[t+8>>2],_[i+456>>2]=r,r=_[t+4>>2],_[i+444>>2]=_[t>>2],_[i+448>>2]=r,r=_[t+20>>2],_[i+460>>2]=_[t+16>>2],_[i+464>>2]=r,r=_[t+28>>2],_[i+468>>2]=_[t+24>>2],_[i+472>>2]=r,r=_[t+36>>2],_[i+476>>2]=_[t+32>>2],_[i+480>>2]=r,r=_[t+44>>2],_[i+484>>2]=_[t+40>>2],_[i+488>>2]=r,a[i+356|0]=0,_[i+332>>2]=953267991,_[12+(t=i+8|0)>>2]=i+384,_[t+8>>2]=i+496,_[t+4>>2]=i+24,_[t>>2]=4920,Te(t,e+4|0,e+68|0,i+728|0,i+728|0,i+552|0)&&(s=y[i+716>>2],y[e+200>>2]>s&&(y[e+200>>2]=s)),Mn(n),o[_[4566]](),B=i+800|0},o[231]=me,o[232]=hn,o[233]=Hi,o[234]=Li,o[235]=Ii,o[236]=Ii,o[237]=de,o[238]=function(e){var t=0,i=0;return _[(e|=0)>>2]=5744,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),0|e},o[239]=function(e){var t=0,i=0;_[(e|=0)>>2]=5744,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),Bi(e)},o[240]=function(e,t,i,n,r){t|=0,i|=0,n|=0,r|=0;var o,a=0,s=0,l=0,c=0;B=o=B-160|0,(a=_[12+(e|=0)>>2])&&(s=_[i+4>>2],l=_[t+4>>2],_[r+4>>2]=a,_[o+152>>2]=1566444395,t=_[t+12>>2],a=_[t+12>>2],_[o+32>>2]=_[t+8>>2],_[o+36>>2]=a,a=_[t+4>>2],_[o+24>>2]=_[t>>2],_[o+28>>2]=a,a=_[t+28>>2],_[o+48>>2]=_[t+24>>2],_[o+52>>2]=a,a=_[t+20>>2],_[o+40>>2]=_[t+16>>2],_[o+44>>2]=a,c=_[t+44>>2],_[(a=o- -64|0)>>2]=_[t+40>>2],_[a+4>>2]=c,a=_[t+36>>2],_[o+56>>2]=_[t+32>>2],_[o+60>>2]=a,a=_[t+60>>2],_[o+80>>2]=_[t+56>>2],_[o+84>>2]=a,a=_[t+52>>2],_[o+72>>2]=_[t+48>>2],_[o+76>>2]=a,t=_[i+12>>2],i=_[t+12>>2],_[o+96>>2]=_[t+8>>2],_[o+100>>2]=i,i=_[t+4>>2],_[o+88>>2]=_[t>>2],_[o+92>>2]=i,i=_[t+20>>2],_[o+104>>2]=_[t+16>>2],_[o+108>>2]=i,i=_[t+28>>2],_[o+112>>2]=_[t+24>>2],_[o+116>>2]=i,i=_[t+36>>2],_[o+120>>2]=_[t+32>>2],_[o+124>>2]=i,i=_[t+44>>2],_[o+128>>2]=_[t+40>>2],_[o+132>>2]=i,i=_[t+52>>2],_[o+136>>2]=_[t+48>>2],_[o+140>>2]=i,i=_[t+60>>2],_[o+144>>2]=_[t+56>>2],_[o+148>>2]=i,_[8+(t=o+8|0)>>2]=s,_[t+4>>2]=l,_[t>>2]=5692,de(t,o+24|0,r,_[n+20>>2],0),d[e+8|0]&&(e=_[r+4>>2],_[e+844>>2]&&((0|(t=_[e+836>>2]))==(0|(i=_[_[r+8>>2]+8>>2]))?Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0)))),B=o+160|0},o[241]=Bn,o[242]=lr,o[243]=Ii,o[244]=function(e,t,i){t|=0,i|=0,_[24+(e|=0)>>2]=i,_[e+16>>2]=t},o[245]=function(e,t,i){t|=0,i|=0,_[28+(e|=0)>>2]=i,_[e+20>>2]=t},o[246]=function(e,t,i,n){e|=0,t|=0,i|=0,n=b(n);var r,a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=0,f=b(0),m=0,v=0,g=0,T=b(0),C=0,k=0,O=0,R=0,F=b(0),I=b(0),M=b(0),P=b(0),D=0,N=0,L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0);if(B=r=B-208|0,!(y[_[e+4>>2]+848>>2]<n)){T=y[i+8>>2],c=b(b(y[t+8>>2]*n)+T),F=y[i+4>>2],u=b(b(y[t+4>>2]*n)+F),I=y[i>>2],f=b(b(y[t>>2]*n)+I),m=_[e+4>>2],N=_[m+844>>2],(v=(0|(p=_[m+836>>2]))==(0|(R=_[_[e+8>>2]+8>>2])))?(s=b(f-y[p+52>>2]),l=b(u-y[p+56>>2]),h=b(c-y[p+60>>2]),M=b(b(b(s*y[p+12>>2])+b(l*y[p+28>>2]))+b(h*y[p+44>>2])),P=b(b(b(s*y[p+8>>2])+b(l*y[p+24>>2]))+b(h*y[p+40>>2])),s=b(b(b(s*y[p+4>>2])+b(l*y[p+20>>2]))+b(h*y[p+36>>2])),a=_[_[e+12>>2]+8>>2]):(a=_[_[e+12>>2]+8>>2],s=b(f-y[a+52>>2]),l=b(u-y[a+56>>2]),h=b(c-y[a+60>>2]),M=b(b(b(s*y[a+12>>2])+b(l*y[a+28>>2]))+b(h*y[a+44>>2])),P=b(b(b(s*y[a+8>>2])+b(l*y[a+24>>2]))+b(h*y[a+40>>2])),s=b(b(b(s*y[a+4>>2])+b(l*y[a+20>>2]))+b(h*y[a+36>>2])),a=R),L=y[a+20>>2],z=y[a+36>>2],G=y[a+40>>2],U=y[a+8>>2],X=y[a+24>>2],V=y[a+44>>2],H=y[a+60>>2],l=y[a+12>>2],h=y[a+52>>2],j=y[a+28>>2],W=y[a+56>>2],Y=y[a+4>>2],_[r+28>>2]=0,q=l,l=b(I-h),h=b(F-W),T=b(T-H),y[r+24>>2]=b(b(q*l)+b(j*h))+b(V*T),y[r+20>>2]=b(b(l*U)+b(h*X))+b(T*G),_[r+12>>2]=0,y[r+8>>2]=M,y[r+4>>2]=P,y[r>>2]=s,y[r+16>>2]=b(b(l*Y)+b(h*L))+b(T*z),a=_[t+12>>2],_[r+72>>2]=_[t+8>>2],_[r+76>>2]=a,a=_[t>>2],t=_[t+4>>2],_[r+92>>2]=0,_[r+96>>2]=0,_[r+124>>2]=0,_[r+128>>2]=0,_[r+132>>2]=0,_[r+136>>2]=0,_[r+140>>2]=0,_[r+144>>2]=0,_[r+148>>2]=0,_[r+152>>2]=0,_[r+156>>2]=0,_[r+160>>2]=0,_[r+164>>2]=0,y[r+52>>2]=u,y[r+56>>2]=c,_[r+60>>2]=0,_[r+64>>2]=a,_[r+68>>2]=t,_[r+84>>2]=0,_[r+88>>2]=0,y[r+80>>2]=n,_[r+116>>2]=0,_[r+120>>2]=0,y[r+48>>2]=f,t=_[i+12>>2],_[r+40>>2]=_[i+8>>2],_[r+44>>2]=t,t=_[i+4>>2],_[r+32>>2]=_[i>>2],_[r+36>>2]=t,C=function(e,t){var i,n=b(0),r=b(0),o=0,a=0,s=b(0),l=b(0),c=b(0),u=b(0);if((0|(i=_[e+844>>2]))<1)a=-1;else for(l=y[t+8>>2],c=y[t+4>>2],u=y[t>>2],r=y[e+848>>2],r=b(r*r),t=0,a=-1;o=A(t,208)+e|0,n=b(y[o+4>>2]-u),s=b(n*n),n=b(y[o+8>>2]-c),s=b(s+b(n*n)),n=b(y[o+12>>2]-l),r=(o=(n=b(s+b(n*n)))<r)?n:r,a=o?t:a,(0|i)!=(0|(t=t+1|0)););return a}(m,r),t=_[e+12>>2],a=_[t+8>>2],i=_[e+8>>2],m=_[i+8>>2],v?(_[r+100>>2]=_[e+16>>2],_[r+104>>2]=_[e+20>>2],k=_[e+24>>2],_[r+108>>2]=k,O=_[e+28>>2],_[r+112>>2]=O,g=_[_[i>>2]+4>>2],_[r+200>>2]=g,v=_[_[t>>2]+4>>2],i=m,t=a):(_[r+100>>2]=_[e+20>>2],_[r+104>>2]=_[e+16>>2],k=_[e+28>>2],_[r+108>>2]=k,O=_[e+24>>2],_[r+112>>2]=O,g=_[_[t>>2]+4>>2],_[r+200>>2]=g,v=_[_[i>>2]+4>>2],i=a,t=m),_[r+204>>2]=v,n=y[i+236>>2],c=y[i+232>>2],u=y[i+228>>2];e:if(!((D=_[g+4>>2]+-21|0)>>>0>10)){switch(D-1|0){case 9:if(!d[g+140|0])break e;c=y[(i=k<<2)+_[g+132>>2]>>2],u=y[i+_[g+92>>2]>>2],n=y[i+_[g+112>>2]>>2];break e;case 0:case 1:case 3:case 5:case 6:case 7:case 8:break e}i=_[i+192>>2],31!=_[i+4>>2]|!d[i+140|0]||(g=_[g+12>>2]<<2,c=y[g+_[i+132>>2]>>2],u=y[g+_[i+92>>2]>>2],n=y[g+_[i+112>>2]>>2])}f=y[t+236>>2],s=y[t+232>>2],l=y[t+228>>2];e:if(!((i=_[v+4>>2]+-21|0)>>>0>10)){switch(i-1|0){case 9:if(!d[v+140|0])break e;s=y[(t=O<<2)+_[v+132>>2]>>2],l=y[t+_[v+92>>2]>>2],f=y[t+_[v+112>>2]>>2];break e;case 0:case 1:case 3:case 5:case 6:case 7:case 8:break e}t=_[t+192>>2],31!=_[t+4>>2]|!d[t+140|0]||(i=_[v+12>>2]<<2,s=y[i+_[t+132>>2]>>2],l=y[i+_[t+92>>2]>>2],f=y[i+_[t+112>>2]>>2])}i=e+4|0,y[r+96>>2]=c*s,y[r+84>>2]=u*l,y[r+88>>2]=n*f,y[r+92>>2]=S(b(E(b(b(y[m+240>>2]*y[a+228>>2])+b(y[a+240>>2]*y[m+228>>2])),b(-10))),b(10)),n=y[r+72>>2],b(x(n))>b(.7071067690849304)?(l=y[r+68>>2],c=b(b(n*n)+b(l*l)),s=b(b(1)/b(w(c))),c=b(c*s),h=y[r+64>>2],u=b(s*b(-n)),f=b(h*u),n=b(l*s),s=b(n*b(-h)),l=b(0)):(u=y[r+64>>2],s=y[r+68>>2],f=b(b(u*u)+b(s*s)),c=b(b(1)/b(w(f))),f=b(f*c),l=b(c*b(-s)),s=b(n*l),u=b(u*c),c=b(u*b(-n)),n=b(0)),y[r+192>>2]=f,y[r+188>>2]=s,y[r+176>>2]=n,y[r+172>>2]=u,y[r+184>>2]=c,y[r+168>>2]=l,t=_[i>>2],(0|C)>=0?(a=t=t+A(C,208)|0,n=y[t+144>>2],s=y[t+140>>2],c=y[t+136>>2],m=_[t+168>>2],16&d[r+128|0]&&(u=b(b(c*y[t+88>>2])+b(0)),!(b(b(s*s)+b(n*n))>b(u*u)))||(v=_[t+120>>2],Xi(t+4|0,r,208),_[t+120>>2]=v,y[t+136>>2]=c,y[t+140>>2]=s,y[a+144>>2]=n),_[t+168>>2]=m):C=Xe(t,r),(a=_[4989])&&(t=e+12|0,e=e+8|0,(8&d[_[_[t>>2]+8>>2]+204|0]||8&d[_[_[e>>2]+8>>2]+204|0])&&(m=(0|p)!=(0|R),o[a](4+(_[i>>2]+A(C,208)|0)|0,_[(m?t:e)>>2],_[r+100>>2],_[r+108>>2],_[(m?e:t)>>2],_[r+104>>2],_[r+112>>2]))),N||(e=_[4732])&&o[e](i)}B=r+208|0},o[247]=Ii,o[248]=qr,o[249]=Ii,o[250]=Hi,o[251]=Hi,o[252]=function(e,t,i,n){e|=0,t|=0,i|=0,n=b(n);var r=0;y[e+36>>2]>n&&(a[e+40|0]=1,r=_[t+4>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=r,r=_[t+12>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=r,t=_[i+4>>2],_[e+20>>2]=_[i>>2],_[e+24>>2]=t,t=_[i+12>>2],_[e+28>>2]=_[i+8>>2],_[e+32>>2]=t,y[e+36>>2]=n)},o[253]=Ii,o[254]=fe,o[255]=ln,o[256]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0),R=b(0);B=r=B-32|0,g=y[t+24>>2],O=y[t+40>>2],A=y[t+36>>2],c=y[t+20>>2],p=y[t+8>>2],x=y[t+16>>2],d=y[t+4>>2],T=y[t+32>>2],m=y[t>>2],_[r+28>>2]=0,s=b(x-m),u=b(A-d),l=b(c-d),f=b(T-m),a=b(b(s*u)-b(l*f)),y[r+24>>2]=a,h=b(g-p),C=b(h*f),f=b(O-p),s=b(C-b(s*f)),y[r+20>>2]=s,u=b(b(l*f)-b(h*u)),y[r+16>>2]=u,v=y[e+4>>2],h=y[e+8>>2],S=y[e+12>>2],l=b(b(p*a)+b(b(m*u)+b(d*s))),f=b(b(b(b(u*v)+b(s*h))+b(a*S))-l),k=y[e+20>>2],E=y[e+24>>2],R=y[e+28>>2],l=b(b(b(b(u*k)+b(s*E))+b(a*R))-l),b(f*l)>=b(0)||1&(t=_[e+36>>2])&&f<=b(0)||(l=b(f/b(f-l)))<y[e+40>>2]&&(C=h,h=b(b(1)-l),E=b(b(E*l)+b(C*h)),c=b(c-E),v=b(b(k*l)+b(v*h)),m=b(m-v),d=b(d-E),x=b(x-v),h=b(b(R*l)+b(S*h)),g=b(g-h),p=b(p-h),k=b(b(a*a)+b(b(u*u)+b(s*s))),S=b(k*b(-9999999747378752e-20)),b(b(a*b(b(c*m)-b(d*x)))+b(b(u*b(b(d*g)-b(p*c)))+b(s*b(b(p*x)-b(g*m)))))>=S&&(A=b(A-E),T=b(T-v),v=b(a*b(b(A*x)-b(c*T))),C=c,c=b(O-h),b(v+b(b(u*b(b(C*c)-b(g*A)))+b(s*b(b(g*T)-b(c*x)))))>=S^1|b(b(a*b(b(d*T)-b(A*m)))+b(b(u*b(b(A*p)-b(c*d)))+b(s*b(b(c*m)-b(p*T)))))>=S^1||(c=a,a=b(b(1)/b(w(k))),p=b(c*a),y[r+24>>2]=p,s=b(s*a),y[r+20>>2]=s,a=b(u*a),y[r+16>>2]=a,2&t|f<=b(0)^1?y[e+40>>2]=o[_[_[e>>2]+12>>2]](e,r+16|0,l,i,n):(_[r+12>>2]=0,y[r+8>>2]=-p,y[r+4>>2]=-s,y[r>>2]=-a,y[e+40>>2]=o[_[_[e>>2]+12>>2]](e,r,l,i,n))))),B=r+32|0},o[257]=ln,o[258]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s,l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0);B=r=B-688|0,s=rr(r+576|0),_[r+580>>2]=1,_[r+576>>2]=5212,l=_[t+12>>2],_[r+644>>2]=_[t+8>>2],_[r+648>>2]=l,l=_[t+4>>2],_[r+636>>2]=_[t>>2],_[r+640>>2]=l,l=_[t+28>>2],_[r+660>>2]=_[t+24>>2],_[r+664>>2]=l,l=_[t+20>>2],_[r+652>>2]=_[t+16>>2],_[r+656>>2]=l,l=_[t+44>>2],_[r+676>>2]=_[t+40>>2],_[r+680>>2]=l,l=_[t+36>>2],_[r+668>>2]=_[t+32>>2],_[r+672>>2]=l,_[r+624>>2]=_[e+204>>2],a[r+548|0]=0,_[r+524>>2]=953267991,_[r+208>>2]=2952,l=_[e+4>>2],_[20+(t=r+184|0)>>2]=0,_[t+16>>2]=r+576,_[t+12>>2]=l,_[t+8>>2]=r+208,_[t+4>>2]=r+216,_[t>>2]=5988,_[r+8>>2]=5624,_[r+172>>2]=1065353216,_[r+176>>2]=0,_[r+180>>2]=_[e+208>>2],fe(l=t,e+8|0,e+72|0,t=e+136|0,t,r+8|0)&&(u=y[r+140>>2],h=y[r+144>>2],c=y[r+148>>2],(p=b(b(b(u*u)+b(h*h))+b(c*c)))>b(9999999747378752e-20)&&(f=y[r+172>>2])<y[e+200>>2]&&(d=c,c=b(b(1)/b(w(p))),y[r+148>>2]=d*c,y[r+144>>2]=h*c,y[r+140>>2]=u*c,b(o[_[_[e>>2]+12>>2]](e,r+140|0,r+156|0,f,i,n)))),Mn(s),B=r+688|0},o[259]=Wr,o[260]=function(e){Bi(Wr(e|=0))},o[261]=La,o[262]=ue,o[263]=jr,o[264]=function(e,t){e|=0,o[_[_[(t|=0)>>2]+32>>2]](t),Na(e,t),o[_[_[t>>2]+36>>2]](t)},o[265]=Ii,o[266]=Da,o[267]=Ii,o[268]=Da,o[269]=Li,o[270]=Ii,o[271]=Hi,o[272]=function(e,t){le(e|=0,_[36+(t|=0)>>2])},o[273]=function(e,t,i){e|=0,t|=0,i=b(i),o[_[_[e>>2]+12>>2]](e,t)},o[274]=Pa,o[275]=Pa,o[276]=Ii,o[277]=function(e,t){return t|=0,e=_[24+(e|=0)>>2],0|o[_[_[e>>2]+8>>2]](e,t)},o[278]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,a=0,s=b(0);return B=n=B-16|0,a=_[e+28>>2],_[n+12>>2]=a,_[n+8>>2]=a,(r=_[t+4>>2])?(_[r+4>>2]=a,_[r>>2]=a):_[t+4>>2]=n+8,a=_[e+24>>2],s=b(o[_[_[a>>2]+12>>2]](a,t,i)),_[e+4>>2]=_[_[e+24>>2]+4>>2],B=n+16|0,b(s)},o[279]=Ii,o[280]=Ma,o[281]=Ii,o[282]=Ma,o[283]=Ii,o[284]=function(e,t){e|=0;var i,n,r=0;B=i=B+-64|0,n=_[36+(t|=0)>>2],t=_[_[e+24>>2]+28>>2]+A(n,80)|0,r=_[t+12>>2],_[i+8>>2]=_[t+8>>2],_[i+12>>2]=r,r=_[t+4>>2],_[i>>2]=_[t>>2],_[i+4>>2]=r,r=_[t+28>>2],_[i+24>>2]=_[t+24>>2],_[i+28>>2]=r,r=_[t+20>>2],_[i+16>>2]=_[t+16>>2],_[i+20>>2]=r,r=_[t+44>>2],_[i+40>>2]=_[t+40>>2],_[i+44>>2]=r,r=_[t+36>>2],_[i+32>>2]=_[t+32>>2],_[i+36>>2]=r,r=_[t+60>>2],_[i+56>>2]=_[t+56>>2],_[i+60>>2]=r,r=_[t+52>>2],_[i+48>>2]=_[t+48>>2],_[i+52>>2]=r,Ga(e,n,i,_[t+64>>2]),B=i- -64|0},o[285]=Ii,o[286]=function(e,t){return t|=0,e=_[16+(e|=0)>>2],0|o[_[_[e>>2]+8>>2]](e,t)},o[287]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,a=b(0);return B=n=B-16|0,_[n+8>>2]=-1,_[n+12>>2]=_[e+20>>2],_[t+4>>2]||(_[t+4>>2]=n+8),r=_[e+16>>2],a=b(o[_[_[r>>2]+12>>2]](r,t,i)),_[e+4>>2]=_[_[e+16>>2]+4>>2],B=n+16|0,b(a)},o[288]=Li,o[289]=Ii,o[290]=function(e,t){t|=0;var i,n=0,r=0,a=0;return B=i=B-32|0,n=_[216+(e|=0)>>2],y[n+4>>2]!=b(0)&&(r=1,t=_[t>>2],o[_[_[n>>2]+8>>2]](n,_[t+188>>2])&&(n=_[e+216>>2],a=_[t+192>>2],_[i+24>>2]=-1,_[i+28>>2]=-1,_[i+20>>2]=t+4,_[i+16>>2]=t,_[i+12>>2]=a,_[i+8>>2]=0,ce(e+68|0,e+132|0,i+8|0,n))),B=i+32|0,0|r},o[291]=Ii,o[292]=function(e,t){e|=0,t|=0;var i,n=0,r=0,a=b(0),s=0,l=0;return B=i=B-32|0,n=_[e+184>>2],y[n+4>>2]!=b(0)&&(r=1,t=_[t>>2],o[_[_[n>>2]+8>>2]](n,_[t+188>>2])&&(a=y[e+188>>2],n=_[e+184>>2],s=_[e+192>>2],l=_[t+192>>2],_[i+24>>2]=-1,_[i+28>>2]=-1,_[i+20>>2]=t+4,_[i+16>>2]=t,_[i+12>>2]=l,_[i+8>>2]=0,se(s,e+36|0,e+100|0,i+8|0,n,a))),B=i+32|0,0|r},o[293]=Li,o[294]=Ii,o[295]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),k=b(0),O=b(0);B=i=B-96|0,r=y[e+76>>2],a=y[e+36>>2],u=y[e+32>>2],h=y[e+80>>2],d=y[e+52>>2],m=y[e+44>>2],v=y[e+48>>2],p=y[e+84>>2],f=y[e+68>>2],S=y[e+60>>2],E=y[e- -64>>2],C=y[e+28>>2],s=y[t+8>>2],l=y[t>>2],c=y[t+4>>2],_[i+92>>2]=0,A=b(p+b(b(b(l*S)+b(c*E))+b(s*f))),y[i+88>>2]=A,x=b(h+b(b(b(l*m)+b(c*v))+b(s*d))),y[i+84>>2]=x,T=b(r+b(b(b(l*C)+b(c*u))+b(s*a))),y[i+80>>2]=T,s=y[t+20>>2],l=y[t+24>>2],c=y[t+16>>2],_[i+76>>2]=0,k=b(p+b(b(b(S*c)+b(E*s))+b(f*l))),y[i+72>>2]=k,O=b(h+b(b(b(m*c)+b(v*s))+b(d*l))),y[i+68>>2]=O,g=b(r+b(b(b(C*c)+b(u*s))+b(a*l))),y[i+64>>2]=g,s=y[t+36>>2],l=y[t+40>>2],c=y[t+32>>2],_[i+60>>2]=0,p=b(p+b(b(b(S*c)+b(E*s))+b(f*l))),y[i+56>>2]=p,h=b(h+b(b(b(m*c)+b(v*s))+b(d*l))),y[i+52>>2]=h,r=b(r+b(b(b(C*c)+b(u*s))+b(a*l))),y[i+48>>2]=r,_[i+44>>2]=0,d=b(b(b(A+k)+p)*b(.3333333432674408)),y[i+40>>2]=d,m=b(b(b(x+O)+h)*b(.3333333432674408)),y[i+36>>2]=m,v=b(b(b(T+g)+r)*b(.3333333432674408)),y[i+32>>2]=v,t=_[e+8>>2],16384&o[_[_[t>>2]+56>>2]](t)&&(a=y[i+80>>2],_[i+24>>2]=0,_[i+28>>2]=0,_[i+16>>2]=1065353216,_[i+20>>2]=1065353216,t=_[e+8>>2],_[i+12>>2]=0,u=b(g-a),h=b(h-x),f=b(O-x),a=b(r-a),T=r=b(b(u*h)-b(f*a)),g=b(r*r),p=b(p-A),r=b(f*p),f=b(k-A),r=b(r-b(f*h)),a=b(b(f*a)-b(u*p)),u=b(b(1)/b(w(b(g+b(b(r*r)+b(a*a)))))),y[i+8>>2]=b(T*u)+d,y[i+4>>2]=m+b(a*u),y[i>>2]=v+b(r*u),o[_[_[t>>2]+16>>2]](t,i+32|0,i,i+16|0)),n=_[e+8>>2],t=e+12|0,o[_[_[n>>2]+16>>2]](n,i+80|0,i- -64|0,t),n=_[e+8>>2],o[_[_[n>>2]+16>>2]](n,i- -64|0,i+48|0,t),e=_[e+8>>2],o[_[_[e>>2]+16>>2]](e,i+48|0,i+80|0,t),B=i+96|0},o[296]=function(e,t,i,n){t|=0,i|=0,n|=0,o[_[_[(e|=0)>>2]+8>>2]](e,t,i,n)},o[297]=function(e){return(e|=0)-4|0},o[298]=function(e){Bi((e|=0)-4|0)},o[299]=function(e,t,i,n){t|=0,i|=0,n|=0,o[_[_[(e=(e|=0)-4|0)>>2]+8>>2]](e,t,i,n)},o[300]=Ii,o[301]=Ia,o[302]=function(e){var t=0,i=0;return _[(e|=0)>>2]=8588,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),0|e},o[303]=function(e){var t=0,i=0;_[(e|=0)>>2]=8588,d[e+8|0]&&(t=_[e+12>>2])&&(i=_[e+4>>2],o[_[_[i>>2]+16>>2]](i,t)),Bi(e)},o[304]=function(e,t,i,n,r){t|=0,i|=0,n|=0,r|=0;var o,a=0,s=0,l=0,c=0;B=o=B-160|0,(a=_[12+(e|=0)>>2])&&(s=d[e+16|0],c=_[(l=s?t:i)+4>>2],s=_[(t=s?i:t)+4>>2],_[r+4>>2]=a,y[12+(i=o+144|0)>>2]=y[a+848>>2]+y[r+32>>2],_[i+8>>2]=c,_[i+4>>2]=s,_[i>>2]=8528,_[o+136>>2]=1566444395,t=_[t+12>>2],a=_[t+12>>2],_[o+16>>2]=_[t+8>>2],_[o+20>>2]=a,a=_[t+4>>2],_[o+8>>2]=_[t>>2],_[o+12>>2]=a,a=_[t+28>>2],_[o+32>>2]=_[t+24>>2],_[o+36>>2]=a,a=_[t+20>>2],_[o+24>>2]=_[t+16>>2],_[o+28>>2]=a,a=_[t+44>>2],_[o+48>>2]=_[t+40>>2],_[o+52>>2]=a,a=_[t+36>>2],_[o+40>>2]=_[t+32>>2],_[o+44>>2]=a,s=_[t+60>>2],_[(a=o- -64|0)>>2]=_[t+56>>2],_[a+4>>2]=s,a=_[t+52>>2],_[o+56>>2]=_[t+48>>2],_[o+60>>2]=a,t=_[l+12>>2],a=_[t+12>>2],_[o+80>>2]=_[t+8>>2],_[o+84>>2]=a,a=_[t+4>>2],_[o+72>>2]=_[t>>2],_[o+76>>2]=a,a=_[t+20>>2],_[o+88>>2]=_[t+16>>2],_[o+92>>2]=a,a=_[t+28>>2],_[o+96>>2]=_[t+24>>2],_[o+100>>2]=a,a=_[t+36>>2],_[o+104>>2]=_[t+32>>2],_[o+108>>2]=a,a=_[t+44>>2],_[o+112>>2]=_[t+40>>2],_[o+116>>2]=a,a=_[t+52>>2],_[o+120>>2]=_[t+48>>2],_[o+124>>2]=a,a=_[t+60>>2],_[o+128>>2]=_[t+56>>2],_[o+132>>2]=a,Ia(i,o+8|0,r,_[n+20>>2],d[e+16|0]),d[e+8|0]&&(e=_[r+4>>2],_[e+844>>2]&&((0|(t=_[e+836>>2]))==(0|(i=_[_[r+8>>2]+8>>2]))?Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0)))),B=o+160|0},o[305]=Bn,o[306]=lr,o[307]=Li,o[308]=Ii,o[309]=function(e,t,i,n){var r,s;return e|=0,i|=0,n|=0,i=_[(t|=0)>>2],i=0|o[_[_[i>>2]+56>>2]](i,72),n=_[t+4>>2],r=_[e+12>>2],s=_[e+16>>2],e=_[e+8>>2],_[i>>2]=14344,_[i+4>>2]=_[t>>2],_[i>>2]=3588,a[i+28|0]=1,_[i+8>>2]=e,_[i>>2]=8688,_[i+24>>2]=0,a[i+48|0]=1,_[i+16>>2]=0,_[i+20>>2]=0,_[i+44>>2]=0,_[i+64>>2]=r,_[i+68>>2]=s,a[i+60|0]=0,_[i+56>>2]=n,a[i+52|0]=0,_[i+36>>2]=0,_[i+40>>2]=0,0|i},o[310]=Ra,o[311]=function(e){Bi(Ra(e|=0))},o[312]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var s,l=0,c=0,u=b(0),h=b(0),p=0,f=0,m=b(0),v=b(0),g=0,T=0,E=0,C=0,k=b(0),O=0,R=b(0),F=b(0),I=b(0),M=0,P=0,D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=0,X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=b(0),J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0),oe=0,ae=b(0),se=b(0);B=s=B-928|0,(l=_[e+56>>2])||(l=_[e+4>>2],l=0|o[_[_[l>>2]+12>>2]](l,_[t+8>>2],_[i+8>>2]),a[e+52|0]=1,_[e+56>>2]=l),_[r+4>>2]=l,c=_[i+4>>2];e:{t:if(E=_[t+4>>2],!((p=_[E+4>>2]+-8|0)>>>0>2)){switch(p-1|0){case 1:if((p=_[c+4>>2]+-8|0)>>>0>2)break t;switch(p-1|0){case 1:if(n=E+32|0,e=_[E+56>>2],u=y[n+(e<<2)>>2],v=y[n+((e+2|0)%3<<2)>>2],n=_[c+56>>2],c=c+32|0,h=y[l+848>>2],(u=Gr(s+432|0,s+8|0,u,v,y[(n<<2)+c>>2],y[c+((n+2|0)%3<<2)>>2],e,n,_[t+12>>2],_[i+12>>2],h))<h&&o[_[_[r>>2]+16>>2]](r,s+432|0,s+8|0,u),e=_[r+4>>2],!_[e+844>>2])break e;if((0|(t=_[e+836>>2]))!=(0|(i=_[_[r+8>>2]+8>>2]))){Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0);break e}Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0);break e;case 0:break t}if(n=E+32|0,e=_[E+56>>2],h=y[l+848>>2],(u=Gr(s+432|0,s+8|0,y[n+(e<<2)>>2],y[n+((e+2|0)%3<<2)>>2],b(0),b(y[c+32>>2]*y[c+16>>2]),e,1,_[t+12>>2],_[i+12>>2],h))<h&&o[_[_[r>>2]+16>>2]](r,s+432|0,s+8|0,u),e=_[r+4>>2],!_[e+844>>2])break e;if((0|(t=_[e+836>>2]))!=(0|(i=_[_[r+8>>2]+8>>2]))){Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0);break e}Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0);break e;case 0:break t}if(10==_[c+4>>2]){if(n=c+32|0,e=_[c+56>>2],h=y[l+848>>2],(u=Gr(s+432|0,s+8|0,b(0),b(y[E+32>>2]*y[E+16>>2]),y[n+(e<<2)>>2],y[n+((e+2|0)%3<<2)>>2],1,e,_[t+12>>2],_[i+12>>2],h))<h&&o[_[_[r>>2]+16>>2]](r,s+432|0,s+8|0,u),e=_[r+4>>2],!_[e+844>>2])break e;if((0|(t=_[e+836>>2]))!=(0|(i=_[_[r+8>>2]+8>>2]))){Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0);break e}Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0);break e}}if(_[s+920>>2]=1566444395,a[s+764|0]=0,_[s+740>>2]=953267991,M=io(s+352|0,E,c,s+432|0,_[e+8>>2]),_[M+32>>2]=c,_[M+28>>2]=E,h=b(b(b(b(o[_[_[E>>2]+48>>2]](E))+b(o[_[_[c>>2]+48>>2]](c)))+y[_[e+56>>2]+848>>2])+y[r+32>>2]),y[s+920>>2]=h*h,l=_[t+12>>2],p=_[l+12>>2],_[s+800>>2]=_[l+8>>2],_[s+804>>2]=p,p=_[l+4>>2],_[s+792>>2]=_[l>>2],_[s+796>>2]=p,p=_[l+28>>2],_[s+816>>2]=_[l+24>>2],_[s+820>>2]=p,p=_[l+20>>2],_[s+808>>2]=_[l+16>>2],_[s+812>>2]=p,p=_[l+44>>2],_[s+832>>2]=_[l+40>>2],_[s+836>>2]=p,p=_[l+36>>2],_[s+824>>2]=_[l+32>>2],_[s+828>>2]=p,p=_[l+60>>2],_[s+848>>2]=_[l+56>>2],_[s+852>>2]=p,p=_[l+52>>2],_[s+840>>2]=_[l+48>>2],_[s+844>>2]=p,l=_[i+12>>2],p=_[l+12>>2],_[s+864>>2]=_[l+8>>2],_[s+868>>2]=p,p=_[l+4>>2],_[s+856>>2]=_[l>>2],_[s+860>>2]=p,g=_[l+20>>2],_[(p=s+872|0)>>2]=_[l+16>>2],_[p+4>>2]=g,C=_[l+28>>2],_[s+880>>2]=_[l+24>>2],_[s+884>>2]=C,T=_[l+36>>2],_[(g=C=s+888|0)>>2]=_[l+32>>2],_[g+4>>2]=T,g=_[l+44>>2],_[s+896>>2]=_[l+40>>2],_[s+900>>2]=g,O=_[l+52>>2],_[(g=s+904|0)>>2]=_[l+48>>2],_[g+4>>2]=O,T=_[l+60>>2],_[s+912>>2]=_[l+56>>2],_[s+916>>2]=T,!((0|(T=_[E+4>>2]))>6)&&!((0|(l=_[c+4>>2]))>6)&&(_[s+344>>2]=8808,h=b(0),T&&(h=b(o[_[_[E>>2]+48>>2]](E)),l=_[c+4>>2]),l&&(u=b(o[_[_[c>>2]+48>>2]](c))),a[s+44|0]=0,y[s+36>>2]=u,y[s+32>>2]=h,_[s+12>>2]=r,_[s+8>>2]=8984,_[E+56>>2])){if(_[c+56>>2]){u=y[_[e+56>>2]+848>>2];t:{i:{if(d[n+24|0]){if(h=b(-1.0000000150474662e30),function(e,t,i,n,r,a){var s,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=0,T=b(0),S=0,E=b(0),C=b(0),k=0,O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=0,L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=0,J=b(0),$=b(0),ee=b(0),te=b(0),ie=b(0),ne=b(0),re=b(0);B=s=B-112|0,_[4993]=_[4993]+1,z=y[i+52>>2],u=y[i+20>>2],v=y[i+24>>2],G=y[n+52>>2],T=y[n+20>>2],E=y[n+24>>2],U=y[i+56>>2],c=y[i+36>>2],l=y[e+68>>2],f=y[i+40>>2],C=y[e+72>>2],I=y[n+56>>2],h=y[n+36>>2],M=y[t+68>>2],m=y[n+40>>2],P=y[t+72>>2],X=y[i+48>>2],D=y[i+8>>2],V=y[i>>2],H=y[i+4>>2],Q=y[n+48>>2],Z=y[n+8>>2],j=y[n>>2],W=y[n+4>>2],O=y[i+16>>2],Y=y[n+16>>2],R=y[i+32>>2],F=y[e+64>>2],q=y[n+32>>2],p=y[t+64>>2],_[s+28>>2]=0,U=b(b(U+b(b(b(F*R)+b(l*c))+b(C*f)))-b(I+b(b(b(p*q)+b(M*h))+b(P*m)))),y[s+24>>2]=U,z=b(b(z+b(b(b(F*O)+b(l*u))+b(C*v)))-b(G+b(b(b(p*Y)+b(M*T))+b(P*E)))),y[s+20>>2]=z,G=b(b(X+b(b(b(F*V)+b(l*H))+b(C*D)))-b(Q+b(b(b(p*j)+b(M*W))+b(P*Z)))),y[s+16>>2]=G,l=b(34028234663852886e22);n:{r:{o:{a:{s:{l:if(!((0|(N=_[e+28>>2]))<1))for(;;){if(S=_[e+36>>2]+A(g,36)|0,C=y[S+28>>2],M=y[S+24>>2],P=y[S+20>>2],F=y[i>>2],p=y[i+4>>2],_[s+12>>2]=0,c=b(b(b(P*R)+b(M*c))+b(C*f)),y[s+8>>2]=c,u=b(b(b(P*O)+b(M*u))+b(C*v)),y[s+4>>2]=u,v=b(b(b(P*F)+b(M*p))+b(C*D)),y[s>>2]=v,b(b(b(v*G)+b(u*z))+b(c*U))<b(0)&&(y[s+8>>2]=-c,y[s+4>>2]=-u,y[s>>2]=-v),_[4991]=_[4991]+1,!d[18256]||Xr(i,n,s+16|0,s,e,t,l)){if(k=0,_[4992]=_[4992]+1,bn(e,i,s,s+108|0,s+104|0,s+80|0,s- -64|0),bn(t,n,s,s+100|0,s+96|0,s+48|0,s+32|0),u=y[s+104>>2],v=y[s+100>>2],u<v||(c=y[s+96>>2],f=y[s+108>>2],c<f||(T=b(u-v),u=b(c-f),T=T<u?T:u,k=1)),!k)break s;T<l&&(S=_[s+4>>2],_[r>>2]=_[s>>2],_[r+4>>2]=S,S=_[s+12>>2],_[r+8>>2]=_[s+8>>2],_[r+12>>2]=S,l=T)}if((0|N)==(0|(g=g+1|0)))break l;f=y[i+40>>2],c=y[i+36>>2],R=y[i+32>>2],v=y[i+24>>2],u=y[i+20>>2],O=y[i+16>>2],D=y[i+8>>2]}if((0|(N=_[t+28>>2]))>=1)for(g=0;;){if(S=_[t+36>>2]+A(g,36)|0,u=y[S+28>>2],v=y[S+20>>2],c=y[S+24>>2],M=y[n+8>>2],P=y[n>>2],D=y[n+4>>2],C=y[n+24>>2],O=y[n+16>>2],R=y[n+20>>2],f=y[n+40>>2],F=y[n+32>>2],p=y[n+36>>2],_[s+12>>2]=0,f=b(b(b(v*F)+b(c*p))+b(u*f)),y[s+8>>2]=f,C=b(b(b(v*O)+b(c*R))+b(u*C)),y[s+4>>2]=C,u=b(b(b(v*P)+b(c*D))+b(u*M)),y[s>>2]=u,b(b(b(u*G)+b(C*z))+b(f*U))<b(0)&&(y[s+8>>2]=-f,y[s+4>>2]=-C,y[s>>2]=-u),_[4991]=_[4991]+1,!d[18256]||Xr(i,n,s+16|0,s,e,t,l)){if(k=0,_[4992]=_[4992]+1,bn(e,i,s,s+108|0,s+104|0,s+80|0,s- -64|0),bn(t,n,s,s+100|0,s+96|0,s+48|0,s+32|0),u=y[s+104>>2],v=y[s+100>>2],u<v||(c=y[s+96>>2],f=y[s+108>>2],c<f||(T=b(u-v),u=b(c-f),T=T<u?T:u,k=1)),!k)break s;T<l&&(S=_[s+4>>2],_[r>>2]=_[s>>2],_[r+4>>2]=S,S=_[s+12>>2],_[r+8>>2]=_[s+8>>2],_[r+12>>2]=S,l=T)}if((0|N)==(0|(g=g+1|0)))break}if((0|(g=_[e+48>>2]))>=1)break a;N=-1,T=b(0),u=b(0),v=b(0),c=b(0),f=b(0),C=b(0),K=-1;break o}n=0;break n}for(k=_[t+48>>2],K=-1,S=0,N=-1,C=b(0),f=b(0),c=b(0),v=b(0),u=b(0),T=b(0);;){if((0|k)>=1){for(g=_[e+56>>2]+(S<<4)|0,D=y[g>>2],O=y[g+4>>2],R=y[g+8>>2],M=b(b(b(D*y[i+32>>2])+b(O*y[i+36>>2]))+b(R*y[i+40>>2])),P=b(b(b(D*y[i+16>>2])+b(O*y[i+20>>2]))+b(R*y[i+24>>2])),D=b(b(b(D*y[i>>2])+b(O*y[i+4>>2]))+b(R*y[i+8>>2])),g=0;;){if(k=_[t+56>>2]+(g<<4)|0,F=y[k+8>>2],E=y[k>>2],I=y[k+4>>2],L=y[n+40>>2],ee=y[n+32>>2],te=y[n+36>>2],O=y[n+24>>2],R=y[n+16>>2],p=y[n+20>>2],ie=y[n+8>>2],ne=y[n>>2],re=y[n+4>>2],_[s+12>>2]=0,O=b(b(b(E*R)+b(I*p))+b(F*O)),R=b(b(b(E*ne)+b(I*re))+b(F*ie)),p=b(b(D*O)-b(P*R)),y[s+8>>2]=p,F=b(b(b(E*ee)+b(I*te))+b(F*L)),E=b(b(M*R)-b(D*F)),y[s+4>>2]=E,I=b(b(P*F)-b(M*O)),y[s>>2]=I,(!(+b(x(p))>1e-6^1)||+b(x(I))>1e-6|+b(x(E))>1e-6)&&(L=p,p=b(b(1)/b(w(b(b(p*p)+b(b(I*I)+b(E*E)))))),L=b(L*p),y[s+8>>2]=L,E=b(E*p),y[s+4>>2]=E,p=b(I*p),y[s>>2]=p,b(b(b(p*G)+b(E*z))+b(U*L))<b(0)&&(y[s+8>>2]=-L,y[s+4>>2]=-E,y[s>>2]=-p),_[4991]=_[4991]+1,!d[18256]||Xr(i,n,s+16|0,s,e,t,l))){if(k=0,_[4992]=_[4992]+1,bn(e,i,s,s+108|0,s+104|0,s+80|0,s- -64|0),bn(t,n,s,s+100|0,s+96|0,s+48|0,s+32|0),p=y[s+104>>2],E=y[s+100>>2],p<E||(I=y[s+96>>2],L=y[s+108>>2],I<L||(h=b(p-E),p=b(I-L),h<p?(k=1,H=y[s+56>>2],Q=y[s+52>>2],Z=y[s+48>>2],m=y[s+72>>2],X=y[s+68>>2],V=y[s+64>>2]):(k=1,H=y[s+40>>2],Q=y[s+36>>2],Z=y[s+32>>2],m=y[s+88>>2],X=y[s+84>>2],V=y[s+80>>2],h=p))),!k)break r;h<l&&(N=_[s+4>>2],_[r>>2]=_[s>>2],_[r+4>>2]=N,N=_[s+12>>2],_[r+8>>2]=_[s+8>>2],_[r+12>>2]=N,T=Z,u=Q,v=H,c=V,f=X,C=m,j=R,W=O,Y=F,q=D,J=P,$=M,N=S,K=g,l=h)}if(g=g+1|0,k=_[t+48>>2],!((0|g)<(0|k)))break}g=_[e+48>>2]}if(!((0|(S=S+1|0))<(0|g)))break}}if(!((N|K)<0)){X=b(T-c),V=b(u-f),H=b(v-C),m=b(b(b(X*j)+b(V*W))+b(H*Y)),f=b(b(b(X*q)+b(V*J))+b(H*$)),l=b(0),c=b(b(b(j*q)+b(W*J))+b(Y*$)),(h=b(b(1)-b(c*c)))!=b(0)&&(l=b(-1.0000000150474662e30),(h=b(b(f-b(m*c))/h))<b(-1.0000000150474662e30)||(l=h)>b(1.0000000150474662e30)&&(l=b(1.0000000150474662e30)));o:if((m=b(b(c*l)-m))<b(-1.0000000150474662e30)){if((h=b(f+b(c*b(-1.0000000150474662e30))))<b(-1.0000000150474662e30)){m=b(-1.0000000150474662e30),l=b(-1.0000000150474662e30);break o}if(l=b(1.0000000150474662e30),!(h>b(1.0000000150474662e30))){m=b(-1.0000000150474662e30),l=h;break o}m=b(-1.0000000150474662e30)}else m>b(1.0000000150474662e30)&&(l=b(-1.0000000150474662e30),m=b(1.0000000150474662e30),(h=b(f+b(c*b(1.0000000150474662e30))))<b(-1.0000000150474662e30)||(l=h)>b(1.0000000150474662e30)&&(l=b(1.0000000150474662e30)));_[s+92>>2]=0,f=b(Y*m),h=b(f+b(H-b($*l))),y[s+88>>2]=h,W=b(W*m),c=b(W+b(V-b(J*l))),y[s+84>>2]=c,j=b(j*m),l=b(j+b(X-b(q*l))),y[s+80>>2]=l,(m=b(b(h*h)+b(b(l*l)+b(c*c))))>b(1.1920928955078125e-7)&&(p=h,Y=b(w(m)),h=b(b(1)/Y),m=b(p*h),y[s+88>>2]=m,c=b(c*h),y[s+84>>2]=c,l=b(l*h),y[s+80>>2]=l,b(b(b(l*G)+b(c*z))+b(m*U))<b(0)&&(y[s+88>>2]=-m,y[s+84>>2]=-c,y[s+80>>2]=-l),_[s+76>>2]=0,y[s+72>>2]=v+f,y[s+68>>2]=u+W,y[s+64>>2]=T+j,o[_[_[a>>2]+16>>2]](a,s+80|0,s- -64|0,b(-Y)))}if(n=1,l=y[r>>2],T=y[r+4>>2],h=y[r+8>>2],!(b(b(b(G*l)+b(z*T))+b(U*h))<b(0)))break n;_[r+12>>2]=0,y[r+8>>2]=-h,y[r+4>>2]=-T,y[r>>2]=-l;break n}n=0}return B=s+112|0,n}(_[E+56>>2],_[c+56>>2],_[t+12>>2],_[i+12>>2],s+248|0,r))break i;break t}if(on(M,s+792|0,s+8|0,_[n+20>>2]),n=_[s+28>>2],_[s+256>>2]=_[s+24>>2],_[s+260>>2]=n,n=_[s+20>>2],_[s+248>>2]=_[s+16>>2],_[s+252>>2]=n,h=y[s+40>>2],!d[s+44|0]|h<b(0)^1)break t}if((0|(l=_[e+16>>2]))<=-1)for(_[e+20>>2]<=-1&&((n=_[e+24>>2])&&(d[e+28|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+24>>2]=0),_[e+20>>2]=0,_[e+24>>2]=0,a[e+28|0]=1);M=_[s+332>>2],n=_[e+24>>2]+(l<<4)|0,_[(p=n)>>2]=_[s+328>>2],_[p+4>>2]=M,p=_[s+340>>2],_[n+8>>2]=_[s+336>>2],_[n+12>>2]=p,p=(n=l+1|0)>>>0>=l>>>0,l=n,p;);_[e+16>>2]=0,function(e,t,i,n,r,s,l,c,u,h){var p,f,m,v=0,g=b(0),x=b(0),T=0,S=b(0),E=b(0),C=0,k=0,O=0,R=b(0),F=0,I=0,M=0,P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0);if(B=p=B-32|0,g=y[e+8>>2],x=y[e>>2],S=y[e+4>>2],_[p+28>>2]=_[e+12>>2],E=g,g=b(b(1)/b(w(b(b(b(x*x)+b(S*S))+b(g*g))))),R=b(E*g),y[p+24>>2]=R,P=b(S*g),y[p+20>>2]=P,D=b(x*g),y[p+16>>2]=D,F=-1,(0|(T=_[i+28>>2]))>=1)for(N=y[r+40>>2],L=y[r+36>>2],z=y[r+24>>2],G=y[r+20>>2],k=_[i+36>>2],U=y[r+32>>2],X=y[r+16>>2],V=y[r+8>>2],H=y[r+4>>2],j=y[r>>2],e=0,g=b(-34028234663852886e22);v=k+A(e,36)|0,x=y[v+20>>2],S=y[v+24>>2],E=y[v+28>>2],x=b(b(b(D*b(b(b(x*j)+b(S*H))+b(E*V)))+b(P*b(b(b(x*X)+b(S*G))+b(E*z))))+b(R*b(b(b(x*U)+b(S*L))+b(E*N)))),g=(v=x>g)?x:g,F=v?e:F,(0|(e=e+1|0))<(0|T););if((0|(e=_[c+4>>2]))<=-1)for(_[c+8>>2]<=-1&&((v=_[c+12>>2])&&(d[c+16|0]&&v&&(_[5586]=_[5586]+1,o[_[4568]](v)),_[c+12>>2]=0),a[c+16|0]=1,_[c+8>>2]=0,_[c+12>>2]=0);T=_[p+4>>2],v=_[c+12>>2]+(e<<4)|0,_[v>>2]=_[p>>2],_[v+4>>2]=T,T=_[p+12>>2],_[v+8>>2]=_[p+8>>2],_[v+12>>2]=T,T=(v=e+1|0)>>>0>=e>>>0,e=v,T;);if(_[c+4>>2]=0,f=_[i+36>>2]+A(F,36)|0,(0|(m=_[f+4>>2]))>=1)for(v=0,T=0;;){if(e=_[i+16>>2]+(_[_[f+12>>2]+(T<<2)>>2]<<4)|0,g=y[e>>2],x=y[e+4>>2],S=y[e+8>>2],E=b(b(b(b(g*y[r+32>>2])+b(x*y[r+36>>2]))+b(S*y[r+40>>2]))+y[r+56>>2]),R=b(b(b(b(g*y[r+16>>2])+b(x*y[r+20>>2]))+b(S*y[r+24>>2]))+y[r+52>>2]),g=b(b(b(b(g*y[r>>2])+b(x*y[r+4>>2]))+b(S*y[r+8>>2]))+y[r+48>>2]),_[c+8>>2]==(0|v)&&!((0|v)>=(0|(k=v?v<<1:1)))){if(e=0,I=0,k&&(_[5585]=_[5585]+1,I=0|o[_[4567]](k<<4,16),v=_[c+4>>2]),(0|v)>=1)for(;O=(C=e<<4)+I|0,C=C+_[c+12>>2]|0,M=_[C+4>>2],_[O>>2]=_[C>>2],_[O+4>>2]=M,M=_[C+12>>2],_[O+8>>2]=_[C+8>>2],_[O+12>>2]=M,(0|v)!=(0|(e=e+1|0)););(e=_[c+12>>2])&&(d[c+16|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[c+12>>2]=0),_[c+12>>2]=I,a[c+16|0]=1,_[c+8>>2]=k,v=_[c+4>>2]}if(e=_[c+12>>2]+(v<<4)|0,_[e+12>>2]=0,y[e+8>>2]=E,y[e+4>>2]=R,y[e>>2]=g,v=_[c+4>>2]+1|0,_[c+4>>2]=v,(0|m)==(0|(T=T+1|0)))break}(0|F)>-1&&Fa(p+16|0,t,n,c,u,s,l,h),B=p+32|0}(s+248|0,_[E+56>>2],_[c+56>>2],_[t+12>>2],_[i+12>>2],b(h-u),u,e+12|0,e+32|0,r)}if(!d[e+52|0])break e;if(e=_[r+4>>2],!_[e+844>>2])break e;if((0|(t=_[e+836>>2]))!=(0|(i=_[_[r+8>>2]+8>>2]))){Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0);break e}Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0);break e}if(1==_[c+4>>2]){if(l=0,_[s+260>>2]=0,_[s+252>>2]=0,_[s+256>>2]=0,a[s+264|0]=1,h=y[c+60>>2],p=_[i+12>>2],u=y[c- -64>>2],m=y[c+68>>2],v=b(b(b(h*y[p+32>>2])+b(u*y[p+36>>2]))+b(m*y[p+40>>2])),R=y[p+56>>2],z=b(b(b(h*y[p+16>>2])+b(u*y[p+20>>2]))+b(m*y[p+24>>2])),G=y[p+52>>2],h=b(b(b(h*y[p>>2])+b(u*y[p+4>>2]))+b(m*y[p+8>>2])),u=y[p+48>>2],_[5585]=_[5585]+1,p=0|o[_[4567]](16,16),(0|(T=_[s+252>>2]))>=1)for(;g=(C=l<<4)+p|0,C=C+_[s+260>>2]|0,P=_[C+4>>2],_[g>>2]=_[C>>2],_[g+4>>2]=P,O=_[C+12>>2],_[g+8>>2]=_[C+8>>2],_[g+12>>2]=O,(0|T)!=(0|(l=l+1|0)););if((l=_[s+260>>2])&&(d[s+264|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[s+260>>2]=0),a[s+264|0]=1,_[s+256>>2]=1,l=_[s+252>>2],_[s+260>>2]=p,_[12+(l=p+(l<<4)|0)>>2]=0,y[l+8>>2]=v+R,y[l+4>>2]=z+G,y[l>>2]=h+u,p=_[s+252>>2]+1|0,_[s+252>>2]=p,h=y[c+76>>2],l=_[i+12>>2],u=y[c+80>>2],m=y[c+84>>2],v=b(b(b(b(h*y[l>>2])+b(u*y[l+4>>2]))+b(m*y[l+8>>2]))+y[l+48>>2]),R=b(b(b(b(h*y[l+32>>2])+b(u*y[l+36>>2]))+b(m*y[l+40>>2]))+y[l+56>>2]),h=b(b(b(b(h*y[l+16>>2])+b(u*y[l+20>>2]))+b(m*y[l+24>>2]))+y[l+52>>2]),_[s+256>>2]==(0|p)&&!((0|p)>=(0|(g=p?p<<1:1)))){if(l=0,C=0,g&&(_[5585]=_[5585]+1,C=0|o[_[4567]](g<<4,16),p=_[s+252>>2]),(0|p)>=1)for(;O=(T=l<<4)+C|0,T=T+_[s+260>>2]|0,U=_[T+4>>2],_[O>>2]=_[T>>2],_[O+4>>2]=U,P=_[T+12>>2],_[O+8>>2]=_[T+8>>2],_[O+12>>2]=P,(0|p)!=(0|(l=l+1|0)););(l=_[s+260>>2])&&(d[s+264|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[s+260>>2]=0),_[s+260>>2]=C,a[s+264|0]=1,_[s+256>>2]=g,p=_[s+252>>2]}if(l=_[s+260>>2]+(p<<4)|0,_[l+12>>2]=0,y[l+8>>2]=R,y[l+4>>2]=h,y[l>>2]=v,p=_[s+252>>2]+1|0,_[s+252>>2]=p,h=y[c+92>>2],i=_[i+12>>2],u=y[c+96>>2],m=y[c+100>>2],v=b(b(b(b(h*y[i>>2])+b(u*y[i+4>>2]))+b(m*y[i+8>>2]))+y[i+48>>2]),R=b(b(b(b(h*y[i+32>>2])+b(u*y[i+36>>2]))+b(m*y[i+40>>2]))+y[i+56>>2]),h=b(b(b(b(h*y[i+16>>2])+b(u*y[i+20>>2]))+b(m*y[i+24>>2]))+y[i+52>>2]),_[s+256>>2]==(0|p)&&!((0|p)>=(0|(i=p?p<<1:1)))){if(l=0,C=0,i&&(_[5585]=_[5585]+1,C=0|o[_[4567]](i<<4,16),p=_[s+252>>2]),(0|p)>=1)for(;T=(g=l<<4)+C|0,g=g+_[s+260>>2]|0,P=_[g+4>>2],_[T>>2]=_[g>>2],_[T+4>>2]=P,O=_[g+12>>2],_[T+8>>2]=_[g+8>>2],_[T+12>>2]=O,(0|p)!=(0|(l=l+1|0)););(l=_[s+260>>2])&&(d[s+264|0]&&l&&(_[5586]=_[5586]+1,o[_[4568]](l)),_[s+260>>2]=0),_[s+260>>2]=C,a[s+264|0]=1,_[s+256>>2]=i,p=_[s+252>>2]}if(i=_[s+260>>2]+(p<<4)|0,_[i+12>>2]=0,y[i+8>>2]=R,y[i+4>>2]=h,y[i>>2]=v,_[s+252>>2]=_[s+252>>2]+1,h=y[_[e+56>>2]+848>>2],on(M,s+792|0,s+344|0,_[n+20>>2]),u=y[M+4>>2],m=y[M+8>>2],v=y[M+12>>2],(R=b(b(b(u*u)+b(m*m))+b(v*v)))>b(1.1920928955078125e-7)){if(_[s+340>>2]=0,k=v,v=b(b(1)/R),y[s+336>>2]=k*v,y[s+332>>2]=m*v,y[s+328>>2]=u*v,u=b(b(y[M+56>>2]-b(o[_[_[E>>2]+48>>2]](E)))-b(o[_[_[c>>2]+48>>2]](c))),(0|(l=_[e+36>>2]))<=-1)for(_[e+40>>2]<=-1&&((i=_[e+44>>2])&&(d[e+48|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+44>>2]=0),_[e+40>>2]=0,_[e+44>>2]=0,a[e+48|0]=1);c=_[s+316>>2],i=_[e+44>>2]+(l<<4)|0,_[i>>2]=_[s+312>>2],_[i+4>>2]=c,n=_[s+324>>2],_[i+8>>2]=_[s+320>>2],_[i+12>>2]=n,n=(i=l+1|0)>>>0>=l>>>0,l=i,n;);_[e+36>>2]=0,Fa(s+328|0,_[E+56>>2],_[t+12>>2],s+248|0,e+32|0,b(u-h),h,r)}if(d[e+52|0]&&(e=_[r+4>>2],_[e+844>>2]&&((0|(t=_[e+836>>2]))==(0|(i=_[_[r+8>>2]+8>>2]))?Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0))),!(e=_[s+260>>2]))break e;d[s+264|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[s+260>>2]=0;break e}}if(on(M,s+792|0,r,_[n+20>>2]),!(!_[e+64>>2]|_[_[r+4>>2]+844>>2]>=_[e+68>>2])&&(h=y[M+4>>2],u=y[M+8>>2],m=y[M+12>>2],(v=b(b(b(h*h)+b(u*u))+b(m*m)))>b(1.1920928955078125e-7)&&(T=s+856|0,O=s+840|0,P=s+824|0,U=s+808|0,k=u,u=b(b(1)/v),R=b(k*u),ie=b(h*u),W=b(m*u),b(x(W))>b(.7071067690849304)?(h=b(b(1)/b(w(b(b(W*W)+b(R*R))))),u=b(R*h),h=b(h*b(-W)),m=b(0)):(u=b(b(1)/b(w(b(b(ie*ie)+b(R*R))))),h=b(ie*u),m=b(u*b(-R)),u=b(0)),v=b(o[_[_[E>>2]+16>>2]](E)),z=b(o[_[_[c>>2]+16>>2]](c)),G=y[4561],c=_[(l=(E=v<z)?s+792|0:T)+12>>2],_[s+256>>2]=_[l+8>>2],_[s+260>>2]=c,c=_[l+4>>2],_[s+248>>2]=_[l>>2],_[s+252>>2]=c,c=_[(l=E?U:p)+12>>2],_[s+272>>2]=_[l+8>>2],_[s+276>>2]=c,c=_[l+4>>2],_[s+264>>2]=_[l>>2],_[s+268>>2]=c,c=_[(l=E?P:C)+12>>2],_[s+288>>2]=_[l+8>>2],_[s+292>>2]=c,c=_[l+4>>2],_[s+280>>2]=_[l>>2],_[s+284>>2]=c,c=_[(l=E?O:g)+12>>2],_[s+304>>2]=_[l+8>>2],_[s+308>>2]=c,c=_[l+4>>2],_[s+296>>2]=_[l>>2],_[s+300>>2]=c,!((0|(c=_[e+64>>2]))<1))))for(k=u,v=b(b(S(b(G/(E?v:z)),b(.39269909262657166)))*b(.5)),ae=b(b(b(m*m)+b(h*h))+b(u*u)),u=b(Ji(v)/b(w(ae))),z=b(k*u),G=b(h*u),H=b(m*u),j=$i(v),se=b(w(b(b(W*W)+b(b(ie*ie)+b(R*R))))),oe=s- -64|0,l=0;ae>b(1.1920928955078125e-7)&&(v=b(b(b(b(6.2831854820251465)/b(0|c))*b(0|l))*b(.5)),m=b(Ji(v)/se),h=b(W*m),u=b(R*m),m=b(ie*m),v=$i(v),E?(c=_[t+12>>2],Y=y[c+36>>2],q=y[c+20>>2],Q=y[c+40>>2],Z=y[c+24>>2],K=y[c+32>>2],J=y[c>>2],$=y[c+16>>2],ee=y[c+4>>2],te=y[c+8>>2],_[s+836>>2]=0,_[s+820>>2]=0,_[s+804>>2]=0,F=b(b(z*m)+b(b(b(G*v)-b(j*u))-b(H*h))),D=b(b(z*h)+b(b(G*u)+b(b(j*v)+b(H*m)))),N=b(b(G*h)+b(b(b(H*v)-b(j*m))-b(z*u))),L=b(b(H*u)+b(b(b(z*v)-b(j*h))-b(G*m))),k=b(b(b(h*F)+b(b(m*D)+b(v*N)))-b(u*L)),I=b(b(b(b(v*D)-b(m*N))-b(u*F))-b(h*L)),V=b(b(b(u*N)+b(b(h*D)+b(v*L)))-b(m*F)),h=b(b(b(m*L)+b(b(v*F)+b(u*D)))-b(h*N)),u=b(b(2)/b(b(I*I)+b(b(V*V)+b(b(k*k)+b(h*h))))),m=b(V*u),D=b(k*m),v=b(h*u),N=b(I*v),F=b(D-N),L=b(h*m),X=b(k*u),ne=b(I*X),u=b(L+ne),X=b(k*X),re=b(h*v),h=b(b(1)-b(X+re)),y[s+832>>2]=b(b(te*F)+b(Z*u))+b(Q*h),y[s+828>>2]=b(b(F*ee)+b(u*q))+b(h*Y),y[s+824>>2]=b(b(F*J)+b(u*$))+b(h*K),v=b(k*v),k=b(I*m),h=b(v+k),I=b(V*m),u=b(b(1)-b(X+I)),m=b(L-ne),y[s+816>>2]=b(b(te*h)+b(Z*u))+b(Q*m),y[s+812>>2]=b(b(h*ee)+b(u*q))+b(m*Y),y[s+808>>2]=b(b(h*J)+b(u*$))+b(m*K),h=b(b(1)-b(re+I)),u=b(v-k),m=b(D+N),y[s+800>>2]=b(b(te*h)+b(Z*u))+b(Q*m),y[s+796>>2]=b(b(h*ee)+b(u*q))+b(m*Y),y[s+792>>2]=b(b(h*J)+b(u*$))+b(m*K),c=_[i+12>>2],f=_[c+4>>2],_[T>>2]=_[c>>2],_[T+4>>2]=f,f=_[c+12>>2],_[T+8>>2]=_[c+8>>2],_[T+12>>2]=f,f=_[c+28>>2],_[p+8>>2]=_[c+24>>2],_[p+12>>2]=f,f=_[c+20>>2],_[p>>2]=_[c+16>>2],_[p+4>>2]=f,f=_[c+44>>2],_[C+8>>2]=_[c+40>>2],_[C+12>>2]=f,f=_[c+36>>2],_[C>>2]=_[c+32>>2],_[C+4>>2]=f,f=_[c+60>>2],_[g+8>>2]=_[c+56>>2],_[g+12>>2]=f,f=_[c+52>>2],_[g>>2]=_[c+48>>2],_[g+4>>2]=f):(c=_[t+12>>2],f=_[c+12>>2],_[s+800>>2]=_[c+8>>2],_[s+804>>2]=f,f=_[c+4>>2],_[s+792>>2]=_[c>>2],_[s+796>>2]=f,f=_[c+28>>2],_[U+8>>2]=_[c+24>>2],_[U+12>>2]=f,f=_[c+20>>2],_[U>>2]=_[c+16>>2],_[U+4>>2]=f,f=_[c+44>>2],_[P+8>>2]=_[c+40>>2],_[P+12>>2]=f,f=_[c+36>>2],_[P>>2]=_[c+32>>2],_[P+4>>2]=f,f=_[c+60>>2],_[O+8>>2]=_[c+56>>2],_[O+12>>2]=f,f=_[c+52>>2],_[O>>2]=_[c+48>>2],_[O+4>>2]=f,c=_[i+12>>2],Y=y[c+36>>2],q=y[c+20>>2],Q=y[c+40>>2],Z=y[c+24>>2],K=y[c+32>>2],J=y[c>>2],$=y[c+16>>2],ee=y[c+4>>2],te=y[c+8>>2],_[s+900>>2]=0,_[s+884>>2]=0,_[s+868>>2]=0,F=b(b(z*m)+b(b(b(G*v)-b(j*u))-b(H*h))),D=b(b(z*h)+b(b(G*u)+b(b(j*v)+b(H*m)))),N=b(b(G*h)+b(b(b(H*v)-b(j*m))-b(z*u))),L=b(b(H*u)+b(b(b(z*v)-b(j*h))-b(G*m))),k=b(b(b(h*F)+b(b(m*D)+b(v*N)))-b(u*L)),I=b(b(b(b(v*D)-b(m*N))-b(u*F))-b(h*L)),V=b(b(b(u*N)+b(b(h*D)+b(v*L)))-b(m*F)),h=b(b(b(m*L)+b(b(v*F)+b(u*D)))-b(h*N)),u=b(b(2)/b(b(I*I)+b(b(V*V)+b(b(k*k)+b(h*h))))),m=b(V*u),D=b(k*m),v=b(h*u),N=b(I*v),F=b(D-N),L=b(h*m),X=b(k*u),ne=b(I*X),u=b(L+ne),X=b(k*X),re=b(h*v),h=b(b(1)-b(X+re)),y[s+896>>2]=b(b(te*F)+b(Z*u))+b(Q*h),y[s+892>>2]=b(b(F*ee)+b(u*q))+b(h*Y),y[s+888>>2]=b(b(F*J)+b(u*$))+b(h*K),v=b(k*v),k=b(I*m),h=b(v+k),I=b(V*m),u=b(b(1)-b(X+I)),m=b(L-ne),y[s+880>>2]=b(b(te*h)+b(Z*u))+b(Q*m),y[s+876>>2]=b(b(h*ee)+b(u*q))+b(m*Y),y[s+872>>2]=b(b(h*J)+b(u*$))+b(m*K),h=b(b(1)-b(re+I)),u=b(v-k),m=b(D+N),y[s+864>>2]=b(b(te*h)+b(Z*u))+b(Q*m),y[s+860>>2]=b(b(h*ee)+b(u*q))+b(m*Y),y[s+856>>2]=b(b(h*J)+b(u*$))+b(m*K)),c=_[n+20>>2],_[s+44>>2]=r,_[s+8>>2]=9168,_[s+40>>2]=0,f=_[s+804>>2],_[s+56>>2]=_[s+800>>2],_[s+60>>2]=f,f=_[s+796>>2],_[s+48>>2]=_[s+792>>2],_[s+52>>2]=f,f=_[U+12>>2],_[oe+8>>2]=_[U+8>>2],_[oe+12>>2]=f,f=_[U+4>>2],_[oe>>2]=_[U>>2],_[oe+4>>2]=f,f=_[P+12>>2],_[s+88>>2]=_[P+8>>2],_[s+92>>2]=f,f=_[P+4>>2],_[s+80>>2]=_[P>>2],_[s+84>>2]=f,f=_[O+12>>2],_[s+104>>2]=_[O+8>>2],_[s+108>>2]=f,f=_[O+4>>2],_[s+96>>2]=_[O>>2],_[s+100>>2]=f,f=_[T+12>>2],_[s+120>>2]=_[T+8>>2],_[s+124>>2]=f,f=_[T+4>>2],_[s+112>>2]=_[T>>2],_[s+116>>2]=f,f=_[p+12>>2],_[s+136>>2]=_[p+8>>2],_[s+140>>2]=f,f=_[p+4>>2],_[s+128>>2]=_[p>>2],_[s+132>>2]=f,f=_[C+12>>2],_[s+152>>2]=_[C+8>>2],_[s+156>>2]=f,f=_[C+4>>2],_[s+144>>2]=_[C>>2],_[s+148>>2]=f,f=_[g+12>>2],_[s+168>>2]=_[g+8>>2],_[s+172>>2]=f,f=_[g+4>>2],_[s+160>>2]=_[g>>2],_[s+164>>2]=f,f=_[s+260>>2],_[s+184>>2]=_[s+256>>2],_[s+188>>2]=f,f=_[s+252>>2],_[s+176>>2]=_[s+248>>2],_[s+180>>2]=f,f=_[s+276>>2],_[s+200>>2]=_[s+272>>2],_[s+204>>2]=f,f=_[s+268>>2],_[s+192>>2]=_[s+264>>2],_[s+196>>2]=f,f=_[s+292>>2],_[s+216>>2]=_[s+288>>2],_[s+220>>2]=f,f=_[s+284>>2],_[s+208>>2]=_[s+280>>2],_[s+212>>2]=f,f=_[s+300>>2],_[s+224>>2]=_[s+296>>2],_[s+228>>2]=f,f=_[s+308>>2],_[s+232>>2]=_[s+304>>2],_[s+236>>2]=f,_[s+244>>2]=c,a[s+240|0]=E,on(M,s+792|0,s+8|0,c),c=_[e+64>>2]),(0|(l=l+1|0))<(0|c););d[e+52|0]&&(e=_[r+4>>2],_[e+844>>2]&&((0|(t=_[e+836>>2]))==(0|(i=_[_[r+8>>2]+8>>2]))?Di(e,t+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(e,_[_[r+12>>2]+8>>2]+4|0,i+4|0)))}B=s+928|0},o[313]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var o=b(0),s=b(0),l=b(0),c=0,u=0,h=0,p=0;return B=e=B-608|0,s=b(y[t+116>>2]-y[t+52>>2]),o=b(s*s),s=b(y[t+120>>2]-y[t+56>>2]),o=b(o+b(s*s)),s=b(y[t+124>>2]-y[t+60>>2]),o=b(o+b(s*s)),s=y[t+276>>2],o<b(s*s)&&(s=b(1),o=b(y[i+116>>2]-y[i+52>>2]),l=b(o*o),o=b(y[i+120>>2]-y[i+56>>2]),l=b(l+b(o*o)),o=b(y[i+124>>2]-y[i+60>>2]),l=b(l+b(o*o)),o=y[i+276>>2],l<b(o*o))||(s=b(1),d[19976]||(n=_[t+192>>2],r=_[i+272>>2],nn(e+552|0),_[e+580>>2]=0,_[e+584>>2]=0,_[e+576>>2]=1065353216,_[e+588>>2]=0,_[e+592>>2]=0,_[e+596>>2]=0,_[e+568>>2]=1065353216,_[e+572>>2]=1065353216,_[e+556>>2]=8,_[e+552>>2]=9868,_[e+604>>2]=0,_[e+600>>2]=r,_[e+584>>2]=r,_[e+548>>2]=0,_[e+540>>2]=1566444395,_[e+544>>2]=0,_[e+376>>2]=5624,a[e+348|0]=0,_[e+324>>2]=953267991,_[e+12>>2]=e+552,_[e+8>>2]=n,_[e+4>>2]=e+16,_[e>>2]=5876,c=t+4|0,u=t+68|0,h=i+4|0,r=i+68|0,s=b(1),qr(e,c,u,h,r,e+376|0)&&(o=y[e+540>>2],y[t+268>>2]>o&&(y[t+268>>2]=o),y[i+268>>2]>o&&(y[i+268>>2]=o),s=b(1),o<b(1)&&(s=o)),n=_[i+192>>2],p=_[t+272>>2],nn(e+552|0),_[e+580>>2]=0,_[e+584>>2]=0,_[e+576>>2]=1065353216,_[e+588>>2]=0,_[e+592>>2]=0,_[e+596>>2]=0,_[e+568>>2]=1065353216,_[e+572>>2]=1065353216,_[e+556>>2]=8,_[e+552>>2]=9868,_[e+604>>2]=0,_[e+600>>2]=p,_[e+584>>2]=p,_[e+548>>2]=0,_[e+540>>2]=1566444395,_[e+544>>2]=0,_[e+376>>2]=5624,a[e+348|0]=0,_[e+324>>2]=953267991,_[e+12>>2]=n,_[e+8>>2]=e+552,_[e+4>>2]=e+16,_[e>>2]=5876,qr(e,c,u,h,r,e+376|0)&&(o=y[e+540>>2],y[t+268>>2]>o&&(y[t+268>>2]=o),y[i+268>>2]>o&&(y[i+268>>2]=o),s>o&&(s=o)))),B=e+608|0,b(s)},o[314]=function(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0;if(!(!(i=_[56+(e|=0)>>2])|!d[e+52|0])){if((0|(n=_[t+4>>2]))==_[t+8>>2]&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(_[5585]=_[5585]+1,s=0|o[_[4567]](r<<2,16),n=_[t+4>>2]),(0|n)>=1)for(i=0;_[(l=i<<2)+s>>2]=_[_[t+12>>2]+l>>2],(0|(i=i+1|0))!=(0|n););(i=_[t+12>>2])&&(d[t+16|0]&&(i&&(_[5586]=_[5586]+1,o[_[4568]](i)),n=_[t+4>>2]),_[t+12>>2]=0),_[t+12>>2]=s,a[t+16|0]=1,_[t+8>>2]=r,i=_[e+56>>2]}_[_[t+12>>2]+(n<<2)>>2]=i,_[t+4>>2]=n+1}},o[315]=Ii,o[316]=Hi,o[317]=Hi,o[318]=function(e,t,i,n){n=b(n)},o[319]=Ii,o[320]=Hi,o[321]=Hi,o[322]=function(e,t,i,n){e|=0,t|=0,i|=0,n=b(n);var r,s=b(0),l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0);B=r=B-16|0,y[e+32>>2]=n,l=_[t+4>>2],_[e+8>>2]=_[t>>2],_[e+12>>2]=l,l=_[t+12>>2],_[e+16>>2]=_[t+8>>2],_[e+20>>2]=l,c=y[t+8>>2],u=y[i>>2],h=y[t>>2],p=y[i+4>>2],f=y[t+4>>2],d=y[i+8>>2],s=y[e+28>>2],_[r+12>>2]=0,y[r+8>>2]=d-b(s*c),y[r+4>>2]=p-b(s*f),y[r>>2]=u-b(h*s),n=b(b(s+y[e+24>>2])+n),y[e+32>>2]=n,n<b(0)&&(a[e+36|0]=1),e=_[e+4>>2],o[_[_[e>>2]+16>>2]](e,t,r,n),B=r+16|0},o[323]=Ii,o[324]=function(e,t,i,n){e|=0,t|=0,i|=0,n=b(n);var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0);B=r=B-16|0,I=y[t+8>>2],R=y[i+8>>2],p=b(b(I*n)+R),M=y[t+4>>2],F=y[i+4>>2],P=b(b(M*n)+F),D=y[t>>2],a=b(D*n),n=y[i>>2],N=b(a+n),d[e+232|0]?(g=y[e+56>>2],f=b(-y[e+92>>2]),A=y[e+40>>2],h=y[e+88>>2],u=y[e+72>>2],a=y[e+96>>2],E=b(b(b(g*f)-b(A*h))-b(u*a)),s=y[e+200>>2],x=y[e+60>>2],T=y[e+44>>2],m=y[e+76>>2],k=b(b(b(x*f)-b(T*h))-b(m*a)),l=y[e+204>>2],S=y[e- -64>>2],c=b(S*f),f=y[e+48>>2],c=b(c-b(f*h)),h=y[e+80>>2],C=b(c-b(h*a)),a=y[e+208>>2],c=b(b(b(b(b(E*s)+b(k*l))+b(C*a))+y[e+224>>2])+b(b(p*b(b(b(u*s)+b(m*l))+b(h*a)))+b(b(N*b(b(b(A*s)+b(T*l))+b(f*a)))+b(P*b(b(b(g*s)+b(x*l))+b(S*a)))))),s=y[e+168>>2],l=y[e+172>>2],a=y[e+176>>2],s=b(b(b(p*b(b(b(u*s)+b(m*l))+b(h*a)))+b(b(N*b(b(b(A*s)+b(T*l))+b(f*a)))+b(P*b(b(b(g*s)+b(x*l))+b(S*a)))))+b(b(b(b(s*E)+b(k*l))+b(C*a))+y[e+216>>2])),l=b(D*b(s-n)),a=p,n=y[e+184>>2],p=y[e+188>>2],m=b(b(u*n)+b(m*p)),u=y[e+192>>2],p=b(b(b(a*b(m+b(h*u)))+b(b(N*b(b(b(A*n)+b(T*p))+b(f*u)))+b(P*b(b(b(g*n)+b(x*p))+b(S*u)))))+b(b(b(b(E*n)+b(k*p))+b(C*u))+y[e+220>>2])),n=b(b(l+b(M*b(p-F)))+b(I*b(c-R))),y[r+8>>2]=c+b(I*n),y[r+4>>2]=p+b(M*n),y[r>>2]=s+b(D*n)):(G=y[e+224>>2],g=y[e+208>>2],A=y[e+200>>2],u=y[e+204>>2],U=y[e+216>>2],s=y[e+172>>2],x=y[e+176>>2],T=y[e+168>>2],m=y[e+120>>2],c=b(-y[e+156>>2]),l=y[e+104>>2],w=y[e+152>>2],S=y[e+136>>2],O=y[e+160>>2],f=b(b(b(m*c)-b(l*w))-b(S*O)),h=y[e+124>>2],a=y[e+108>>2],E=y[e+140>>2],k=b(b(b(h*c)-b(a*w))-b(E*O)),C=y[e+128>>2],v=b(C*c),c=y[e+112>>2],v=b(v-b(c*w)),w=y[e+144>>2],O=b(v-b(w*O)),v=y[e+184>>2],L=y[e+188>>2],z=y[e+192>>2],v=b(b(b(R*b(b(b(S*v)+b(E*L))+b(w*z)))+b(b(n*b(b(b(l*v)+b(a*L))+b(c*z)))+b(F*b(b(b(m*v)+b(h*L))+b(C*z)))))+b(b(b(b(f*v)+b(k*L))+b(O*z))+y[e+220>>2])),y[r+4>>2]=v,s=b(b(b(R*b(b(b(S*T)+b(E*s))+b(w*x)))+b(b(n*b(b(b(l*T)+b(a*s))+b(c*x)))+b(F*b(b(b(m*T)+b(h*s))+b(C*x)))))+b(U+b(b(b(T*f)+b(k*s))+b(O*x)))),y[r>>2]=s,n=b(b(G+b(b(b(f*A)+b(k*u))+b(O*g)))+b(b(R*b(b(b(S*A)+b(E*u))+b(w*g)))+b(b(n*b(b(b(l*A)+b(a*u))+b(c*g)))+b(F*b(b(b(m*A)+b(h*u))+b(C*g)))))),y[r+8>>2]=n,n=b(b(b(D*b(N-s))+b(M*b(P-v)))+b(I*b(p-n)))),_[r+12>>2]=0,e=_[e+36>>2],o[_[_[e>>2]+16>>2]](e,t,r,n),B=r+16|0},o[325]=Nr,o[326]=function(e){Bi(Nr(e|=0))},o[327]=ka,o[328]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var a,s,l,c,u,h,p,f=0,m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=0,F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),B=b(0),N=b(0),L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0);if((0|(a=_[e+52>>2]))<1)return b(b(1));for(s=(f=d[e+68|0])?t:i,l=_[(t=f?i:t)- -64>>2],X=y[t+60>>2],V=y[t+56>>2],H=y[t+52>>2],c=_[t+48>>2],v=y[t+44>>2],g=y[t+40>>2],x=y[t+36>>2],u=_[t+32>>2],T=y[t+28>>2],S=y[t+24>>2],E=y[t+20>>2],h=_[t+16>>2],C=y[t+12>>2],w=y[t+8>>2],R=_[t+304>>2],k=y[t+4>>2],p=_[t+192>>2],O=b(1),f=0;i=_[p+28>>2]+A(f,80)|0,m=y[i+56>>2],F=y[i+52>>2],I=y[i+48>>2],M=y[i+36>>2],P=y[i+20>>2],D=y[i+4>>2],B=y[i+40>>2],N=y[i+24>>2],L=y[i+8>>2],z=y[i+32>>2],G=y[i>>2],U=y[i+16>>2],_[t+64>>2]=0,_[t+48>>2]=0,_[t+32>>2]=0,_[t+16>>2]=0,_[t+304>>2]=R+1,y[t+36>>2]=b(b(x*G)+b(g*U))+b(v*z),y[t+20>>2]=b(b(E*G)+b(S*U))+b(T*z),y[t+4>>2]=b(b(k*G)+b(w*U))+b(C*z),y[t+44>>2]=b(b(x*L)+b(g*N))+b(v*B),y[t+40>>2]=b(b(x*D)+b(g*P))+b(v*M),y[t+28>>2]=b(b(E*L)+b(S*N))+b(T*B),y[t+24>>2]=b(b(E*D)+b(S*P))+b(T*M),y[t+12>>2]=b(b(k*L)+b(w*N))+b(C*B),y[t+8>>2]=b(b(k*D)+b(w*P))+b(C*M),y[t+60>>2]=X+b(b(b(x*I)+b(g*F))+b(v*m)),y[t+56>>2]=V+b(b(b(E*I)+b(S*F))+b(T*m)),y[t+52>>2]=H+b(b(b(k*I)+b(w*F))+b(C*m)),i=_[_[e+60>>2]+(f<<2)>>2],m=b(o[_[_[i>>2]+12>>2]](i,t,s,n,r)),_[t+64>>2]=l,y[t+60>>2]=X,y[t+56>>2]=V,y[t+52>>2]=H,_[t+48>>2]=c,y[t+44>>2]=v,y[t+40>>2]=g,y[t+36>>2]=x,_[t+32>>2]=u,y[t+28>>2]=T,y[t+24>>2]=S,y[t+20>>2]=E,_[t+16>>2]=h,y[t+12>>2]=C,y[t+8>>2]=w,y[t+4>>2]=k,R=_[t+304>>2]+1|0,_[t+304>>2]=R,O=m<O?m:O,(0|a)!=(0|(f=f+1|0)););return b(O)},o[329]=function(e,t){t|=0;var i=0,n=0,r=0;if((0|(i=_[52+(e|=0)>>2]))>=1)for(;(r=_[_[e+60>>2]+(n<<2)>>2])&&(o[_[_[r>>2]+16>>2]](r,t),i=_[e+52>>2]),(0|(n=n+1|0))<(0|i););},o[330]=Ii,o[331]=function(e,t){var i,n;t|=0,i=e|=0,n=_[_[_[e+4>>2]+4>>2]+28>>2],e=_[t+36>>2],wa(i,_[64+(n+A(e,80)|0)>>2],e)},o[332]=Ca,o[333]=function(e){Bi(Ca(e|=0))},o[334]=function(e,t,i){e|=0,t|=0,i|=0;var n=0,r=0,o=0,a=0,s=0,l=0,c=0,u=0;_[4996]=_[4996]+1,s=_[e+36>>2],n=A((n=((n=i<<16|t)<<15^-1)+n|0)>>>10^n,9),n=((n^=n>>>6)<<11^-1)+n|0,o=s+((_[e+12>>2]+-1&(n>>>16^n))<<2)|0;e:if(-1!=(0|(n=_[o>>2]))){for(a=_[e+16>>2],r=n;;){if(l=a+A(r,12)|0,_[l+4>>2]!=(0|i)||_[l>>2]!=(0|t)){if(-1!=(0|(r=_[_[e+56>>2]+(r<<2)>>2])))continue;break e}break}u=_[8+(a+A(r,12)|0)>>2],i=_[e+56>>2];t:{i:{if((0|n)!=(0|r)){for(;(0|r)!=(0|(n=_[i+((t=n)<<2)>>2])););if(n=c=_[i+(r<<2)>>2],-1==(0|t))break i;_[i+(t<<2)>>2]=c;break t}n=_[i+(r<<2)>>2]}_[o>>2]=n}if((0|(o=_[e+8>>2]+-1|0))==(0|r))return _[e+8>>2]=r,0|u;t:{if(a=a+A(o,12)|0,t=_[a+4>>2]<<16|_[a>>2],t=A((t=(t<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,c=_[e+12>>2]+-1&(t>>>16^t),(0|o)!=(0|(n=_[(s=s+(c<<2)|0)>>2]))){for(;(0|o)!=(0|(n=_[i+((t=n)<<2)>>2])););if(n=_[i+(o<<2)>>2],-1!=(0|t)){_[i+(t<<2)>>2]=n;break t}}else n=_[i+(o<<2)>>2];_[s>>2]=n}t=_[a+4>>2],_[l>>2]=_[a>>2],_[l+4>>2]=t,_[l+8>>2]=_[a+8>>2],t=_[e+36>>2]+(c<<2)|0,_[_[e+56>>2]+(r<<2)>>2]=_[t>>2],_[t>>2]=r,_[e+8>>2]=_[e+8>>2]+-1}return 0|u},o[335]=function(e,t,i){return e|=0,t|=0,i|=0,_[4997]=_[4997]+1,0|xi(e,t,i)},o[336]=sr,o[337]=Ta,o[338]=function(e){Bi(Ta(e|=0))},o[339]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var s,l=0,c=0,u=0,h=0,p=0,f=0,m=b(0),v=b(0),g=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=0,F=b(0),I=b(0),M=0,P=b(0),D=0,N=0,L=b(0),z=b(0),G=b(0),U=b(0),X=b(0),V=b(0),H=b(0),j=b(0),W=b(0),Y=b(0),q=b(0),Q=b(0),Z=b(0),K=0,J=0,$=b(0),ee=0,te=0,ie=0,ne=b(0),re=b(0),oe=b(0),ae=b(0),se=b(0);if(B=s=B-3584|0,ee=_[t+4>>2],(N=_[ee+68>>2])&&(te=_[i+4>>2],R=_[te+68>>2])){if(_[te+72>>2]!=_[e+112>>2]||_[ee+72>>2]!=_[e+108>>2]){if(u=_[e+84>>2],(0|(h=_[u+8>>2]))>=1){for(;(p=_[8+(_[u+16>>2]+A(c,12)|0)>>2])&&(o[_[_[p>>2]>>2]](p),l=_[e+4>>2],o[_[_[l>>2]+60>>2]](l,p)),(0|h)!=(0|(c=c+1|0)););u=_[e+84>>2]}Sa(u),_[e+108>>2]=_[ee+72>>2],_[e+112>>2]=_[te+72>>2]}_[s+84>>2]=0,a[s+88|0]=1,_[s+76>>2]=0,_[s+80>>2]=0,Gn(s+112|0),Gn(s+980|0),Gn(s+1848|0),Gn(s+2716|0),(u=_[s+84>>2])&&(d[s+88|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[s+84>>2]=0),_[s+76>>2]=0,_[s+80>>2]=4,_[s+84>>2]=s+112,a[s+88|0]=0,h=_[e+84>>2];e:{if((0|(f=_[h+8>>2]))<=0)c=s+112|0;else{for(p=0;;){if(u=_[8+(_[h+16>>2]+A(p,12)|0)>>2]){if(o[_[_[u>>2]+16>>2]](u,s+72|0),f=0,(0|(c=_[s+76>>2]))>0)for(;l=_[_[s+84>>2]+(f<<2)>>2],_[l+844>>2]&&(_[r+4>>2]=l,(0|(c=_[l+836>>2]))==(0|(u=_[_[r+8>>2]+8>>2]))?Di(l,c+4|0,_[_[r+12>>2]+8>>2]+4|0):Di(l,_[_[r+12>>2]+8>>2]+4|0,u+4|0),_[r+4>>2]=0,c=_[s+76>>2]),(0|(f=f+1|0))<(0|c););if((0|c)<=-1)for(_[s+80>>2]<=-1&&((u=_[s+84>>2])&&(d[s+88|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[s+84>>2]=0),a[s+88|0]=1,_[s+80>>2]=0,_[s+84>>2]=0);_[_[s+84>>2]+(c<<2)>>2]=0,l=(u=c+1|0)>>>0<c>>>0,c=u,!l;);_[s+76>>2]=0,f=_[h+8>>2]}if(!((0|(p=p+1|0))<(0|f)))break}if(!(c=_[s+84>>2]))break e}d[s+88|0]&&c&&(_[5586]=_[5586]+1,o[_[4568]](c)),_[s+84>>2]=0}if(c=_[e+4>>2],u=_[e+84>>2],_[s+104>>2]=_[e+72>>2],_[s+100>>2]=u,_[s+92>>2]=n,_[s+88>>2]=c,_[s+76>>2]=0,_[s+72>>2]=9528,_[s+96>>2]=r,_[s+80>>2]=t,_[s+84>>2]=i,(u=_[N>>2])&&(n=_[R>>2])){for(l=_[t+12>>2],k=y[l+24>>2],m=b(-y[l+52>>2]),w=y[l+8>>2],g=y[l+48>>2],O=y[l+40>>2],S=y[l+56>>2],c=_[i+12>>2],E=y[c+48>>2],T=y[c+52>>2],v=y[c+56>>2],oe=b(b(b(b(k*m)-b(w*g))-b(O*S))+b(b(b(w*E)+b(k*T))+b(O*v))),F=y[l+20>>2],P=y[l+4>>2],I=y[l+36>>2],ae=b(b(b(b(F*m)-b(P*g))-b(I*S))+b(b(b(P*E)+b(F*T))+b(I*v))),U=y[c+40>>2],L=y[c+24>>2],X=y[c+8>>2],z=y[c+36>>2],V=y[c+20>>2],G=y[c+4>>2],Z=y[l+16>>2],C=b(Z*m),m=y[l>>2],C=b(C-b(m*g)),g=y[l+32>>2],se=b(b(C-b(g*S))+b(b(b(m*E)+b(Z*T))+b(g*v))),E=y[c+16>>2],T=y[c>>2],v=y[c+32>>2],$=y[r+32>>2],_[s+116>>2]=n,_[s+112>>2]=u,C=b(b(b(w*X)+b(k*L))+b(O*U)),Y=b(x(C)),H=b(b(b(w*G)+b(k*V))+b(O*z)),q=b(x(H)),j=b(b(b(w*T)+b(k*E))+b(O*v)),Q=b(x(j)),W=b(b(b(P*X)+b(F*L))+b(I*U)),k=b(x(W)),w=b(b(b(P*G)+b(F*V))+b(I*z)),O=b(x(w)),F=b(b(b(P*T)+b(F*E))+b(I*v)),P=b(x(F)),I=b(b(b(m*X)+b(Z*L))+b(g*U)),U=b(x(I)),L=b(b(b(m*G)+b(Z*V))+b(g*z)),X=b(x(L)),z=b(b(b(m*T)+b(Z*E))+b(g*v)),V=b(x(z)),n=124,l=0,R=128,p=s+112|0,N=128,f=1;;){e:{t:{i:{if(D=_[(u=(ie=(K=f+-1|0)<<3)+p|0)>>2],M=_[u+4>>2],G=y[M+16>>2],m=y[M>>2],ne=b(b(b(G-m)*b(.5))+b(0)),g=y[M+20>>2],S=y[M+4>>2],re=b(b(b(g-S)*b(.5))+b(0)),E=y[M+24>>2],v=y[M+8>>2],Z=b(b(b(E-v)*b(.5))+b(0)),T=b(b(b(V*ne)+b(X*re))+b(U*Z)),m=b(b(G+m)*b(.5)),S=b(b(g+S)*b(.5)),E=b(b(E+v)*b(.5)),v=b(se+b(b(b(z*m)+b(L*S))+b(I*E))),!(y[D>>2]<=b($+b(T+v))^1|y[D+16>>2]>=b(b(v-T)-$)^1||(T=b(b(b(P*ne)+b(O*re))+b(k*Z)),v=b(ae+b(b(b(F*m)+b(w*S))+b(W*E))),y[D+4>>2]<=b($+b(T+v))^1|y[D+20>>2]>=b(b(v-T)-$)^1||(T=b(b(b(Q*ne)+b(q*re))+b(Y*Z)),v=b(oe+b(b(b(j*m)+b(H*S))+b(C*E))),y[D+8>>2]<=b($+b(T+v))^1|y[D+24>>2]>=b(b(v-T)-$)^1)))){if((0|K)<=(0|n))u=R,h=p,c=l;else{n:if((0|R)>=(0|(u=R<<1))|(0|N)>=(0|u))h=p,c=l;else{r:{o:{if(R){if(_[5585]=_[5585]+1,h=0|o[_[4567]](R<<4,16),!((0|R)<1)){for(n=0;J=(c=n<<3)+h|0,c=_[4+(N=c+p|0)>>2],_[J>>2]=_[N>>2],_[J+4>>2]=c,(0|R)!=(0|(n=n+1|0)););if(!(255&l))break r;break o}}else h=0;if(c=1,!p)break r;if(N=u,!(255&l))break n}p&&(_[5586]=_[5586]+1,o[_[4568]](p))}c=1,N=u}n=u+-4|0}if(l=_[M+40>>2],_[D+40>>2]){if(p=_[D+36>>2],l){_[4+(l=h+ie|0)>>2]=_[M+36>>2],_[l>>2]=p,l=_[D+40>>2],_[4+(p=(f<<3)+h|0)>>2]=_[M+36>>2],_[p>>2]=l,l=_[D+36>>2],_[p+12>>2]=_[M+40>>2],_[p+8>>2]=l,l=_[D+40>>2],_[p+20>>2]=_[M+40>>2],_[p+16>>2]=l,f=f+3|0;break t}_[4+(l=h+ie|0)>>2]=M,_[l>>2]=p,p=_[D+40>>2],_[4+(l=(f<<3)+h|0)>>2]=M,_[l>>2]=p;break i}if(l){_[4+(l=h+ie|0)>>2]=_[M+36>>2],_[l>>2]=D,_[4+(l=(f<<3)+h|0)>>2]=_[M+40>>2],_[l>>2]=D;break i}o[_[_[s+72>>2]+8>>2]](s+72|0,D,M),R=u,p=h,l=c}f=K;break e}f=f+1|0}R=u,p=h,l=c}if(!f)break}!p|!(255&l)||p&&(_[5586]=_[5586]+1,o[_[4568]](p))}if(J=_[e+84>>2],_[J+8>>2]>=1)for(N=0;;){if(n=(u=A(N,12))+_[J+16>>2]|0,(c=_[n+8>>2])&&(h=_[ee+28>>2]+A(_[n>>2],80)|0,n=_[h+64>>2],l=_[t+12>>2],E=y[l+52>>2],T=y[l+56>>2],F=y[h+48>>2],P=y[h+52>>2],I=y[h+56>>2],U=y[h+4>>2],L=y[h+20>>2],X=y[h+36>>2],z=y[h+8>>2],V=y[h+24>>2],G=y[h+40>>2],Y=y[l+20>>2],H=y[l+24>>2],m=y[h>>2],q=y[l+36>>2],g=y[h+16>>2],j=y[l+40>>2],S=y[h+32>>2],v=y[l+48>>2],Q=y[l+8>>2],W=y[l>>2],k=y[l+4>>2],w=y[l+16>>2],O=y[l+32>>2],_[s+172>>2]=0,_[s+156>>2]=0,_[s+140>>2]=0,_[s+124>>2]=0,y[s+144>>2]=b(b(O*m)+b(q*g))+b(j*S),y[s+128>>2]=b(b(w*m)+b(Y*g))+b(H*S),y[s+112>>2]=b(b(W*m)+b(k*g))+b(Q*S),y[s+152>>2]=b(b(O*z)+b(q*V))+b(j*G),y[s+148>>2]=b(b(O*U)+b(q*L))+b(j*X),y[s+136>>2]=b(b(w*z)+b(Y*V))+b(H*G),y[s+132>>2]=b(b(w*U)+b(Y*L))+b(H*X),y[s+120>>2]=b(b(W*z)+b(k*V))+b(Q*G),y[s+116>>2]=b(b(W*U)+b(k*L))+b(Q*X),y[s+168>>2]=T+b(b(b(O*F)+b(q*P))+b(j*I)),y[s+164>>2]=E+b(b(b(w*F)+b(Y*P))+b(H*I)),y[s+160>>2]=v+b(b(b(W*F)+b(k*P))+b(Q*I)),o[_[_[n>>2]+8>>2]](n,s+112|0,s+56|0,s+40|0),C=y[r+32>>2],y[s+56>>2]=y[s+56>>2]-C,y[s+60>>2]=y[s+60>>2]-C,y[s+64>>2]=y[s+64>>2]-C,y[s+40>>2]=C+y[s+40>>2],y[s+44>>2]=C+y[s+44>>2],y[s+48>>2]=C+y[s+48>>2],h=_[te+28>>2]+A(_[4+(u+_[J+16>>2]|0)>>2],80)|0,n=_[h+64>>2],l=_[i+12>>2],E=y[l+52>>2],T=y[l+56>>2],F=y[h+48>>2],P=y[h+52>>2],I=y[h+56>>2],U=y[h+4>>2],L=y[h+20>>2],X=y[h+36>>2],z=y[h+8>>2],V=y[h+24>>2],G=y[h+40>>2],Y=y[l+20>>2],H=y[l+24>>2],m=y[h>>2],q=y[l+36>>2],g=y[h+16>>2],j=y[l+40>>2],S=y[h+32>>2],v=y[l+48>>2],Q=y[l+8>>2],W=y[l>>2],k=y[l+4>>2],w=y[l+16>>2],O=y[l+32>>2],_[s+172>>2]=0,_[s+156>>2]=0,_[s+140>>2]=0,_[s+124>>2]=0,y[s+144>>2]=b(b(O*m)+b(q*g))+b(j*S),y[s+128>>2]=b(b(w*m)+b(Y*g))+b(H*S),y[s+112>>2]=b(b(W*m)+b(k*g))+b(Q*S),y[s+152>>2]=b(b(O*z)+b(q*V))+b(j*G),y[s+148>>2]=b(b(O*U)+b(q*L))+b(j*X),y[s+136>>2]=b(b(w*z)+b(Y*V))+b(H*G),y[s+132>>2]=b(b(w*U)+b(Y*L))+b(H*X),y[s+120>>2]=b(b(W*z)+b(k*V))+b(Q*G),y[s+116>>2]=b(b(W*U)+b(k*L))+b(Q*X),y[s+168>>2]=T+b(b(b(O*F)+b(q*P))+b(j*I)),y[s+164>>2]=E+b(b(b(w*F)+b(Y*P))+b(H*I)),y[s+160>>2]=v+b(b(b(W*F)+b(k*P))+b(Q*I)),o[_[_[n>>2]+8>>2]](n,s+112|0,s+24|0,s+8|0),m=b(y[s+24>>2]-C),y[s+24>>2]=m,g=b(y[s+28>>2]-C),y[s+28>>2]=g,S=b(y[s+32>>2]-C),y[s+32>>2]=S,E=b(C+y[s+8>>2]),y[s+8>>2]=E,T=b(C+y[s+16>>2]),y[s+16>>2]=T,v=b(C+y[s+12>>2]),y[s+12>>2]=v,y[s+44>>2]<g|y[s+60>>2]>v|y[s+40>>2]<m|y[s+56>>2]>E||y[s+64>>2]>T||y[s+48>>2]<S)){if(o[_[_[c>>2]>>2]](c),n=_[e+4>>2],o[_[_[n>>2]+60>>2]](n,c),n=u+_[J+16>>2]|0,h=_[n+4>>2],l=_[n>>2],(0|(f=_[e+92>>2]))==_[e+96>>2]&&!((0|f)>=(0|(K=f?f<<1:1)))){if(c=0,n=0,K&&(_[5585]=_[5585]+1,n=0|o[_[4567]](A(K,12),16),f=_[e+92>>2]),(0|f)>=1)for(;R=(u=A(c,12))+n|0,p=u+_[e+100>>2]|0,u=_[p+4>>2],_[R>>2]=_[p>>2],_[R+4>>2]=u,_[R+8>>2]=_[p+8>>2],(0|f)!=(0|(c=c+1|0)););(u=_[e+100>>2])&&(d[e+104|0]&&u&&(_[5586]=_[5586]+1,o[_[4568]](u)),_[e+100>>2]=0),_[e+100>>2]=n,a[e+104|0]=1,_[e+96>>2]=K,f=_[e+92>>2]}n=_[e+100>>2]+A(f,12)|0,_[n+8>>2]=0,_[n+4>>2]=h,_[n>>2]=l,_[e+92>>2]=_[e+92>>2]+1}if(!((0|(N=N+1|0))<_[J+8>>2]))break}if(_[e+92>>2]>=1)for(c=0;i=_[e+84>>2],t=_[e+100>>2]+A(c,12)|0,o[_[_[i>>2]+8>>2]](i,_[t>>2],_[t+4>>2]),(0|(c=c+1|0))<_[e+92>>2];);(t=_[e+100>>2])&&(d[e+104|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+100>>2]=0),_[e+100>>2]=0,_[e+92>>2]=0,_[e+96>>2]=0,a[e+104|0]=1}else ka(e,t,i,n,r);B=s+3584|0},o[340]=function(e,t,i,n,r){return b(b(0))},o[341]=function(e,t){t|=0;var i,n=0,r=0;if(i=_[84+(e|=0)>>2],(0|(n=_[i+8>>2]))>=1)for(e=0;(r=_[8+(_[i+16>>2]+A(e,12)|0)>>2])&&(o[_[_[r>>2]+16>>2]](r,t),n=_[i+8>>2]),(0|(e=e+1|0))<(0|n););},o[342]=Ii,o[343]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,a,s,l,c,u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),x=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=0,N=0,L=b(0),z=b(0),G=b(0);B=n=B-256|0,o[_[4565]](9604),_[e+4>>2]=_[e+4>>2]+1,r=_[i+36>>2],s=A(r,80),l=_[e+12>>2],c=_[l+4>>2],D=_[64+(s+_[c+28>>2]|0)>>2],i=_[e+8>>2],a=_[t+36>>2],t=_[_[i+4>>2]+28>>2]+A(a,80)|0,N=_[t+64>>2],i=_[i+12>>2],L=y[i+52>>2],z=y[i+56>>2],h=y[i+24>>2],u=y[i+20>>2],p=y[i+40>>2],f=y[i+36>>2],G=y[i+48>>2],d=y[i+8>>2],m=y[i>>2],v=y[i+4>>2],g=y[i+16>>2],x=y[i+32>>2],T=y[t+32>>2],S=y[t>>2],E=y[t+16>>2],C=y[t+56>>2],w=y[t+48>>2],k=y[t+52>>2],O=y[t+36>>2],R=y[t+4>>2],F=y[t+20>>2],I=y[t+40>>2],M=y[t+8>>2],P=y[t+24>>2],i=0,_[n+244>>2]=0,_[n+228>>2]=0,_[n+212>>2]=0,y[n+224>>2]=b(b(x*M)+b(f*P))+b(p*I),y[n+220>>2]=b(b(x*R)+b(f*F))+b(p*O),y[n+208>>2]=b(b(g*M)+b(u*P))+b(h*I),y[n+204>>2]=b(b(g*R)+b(u*F))+b(h*O),y[n+240>>2]=z+b(b(b(x*w)+b(f*k))+b(p*C)),y[n+236>>2]=L+b(b(b(g*w)+b(u*k))+b(h*C)),_[n+196>>2]=0,y[n+216>>2]=b(b(x*S)+b(f*E))+b(p*T),y[n+200>>2]=b(b(g*S)+b(u*E))+b(h*T),y[n+192>>2]=b(b(m*M)+b(v*P))+b(d*I),y[n+188>>2]=b(b(m*R)+b(v*F))+b(d*O),y[n+184>>2]=b(b(m*S)+b(v*E))+b(d*T),y[n+232>>2]=G+b(b(b(m*w)+b(v*k))+b(d*C)),t=_[l+12>>2],L=y[t+52>>2],z=y[t+56>>2],h=y[t+24>>2],u=y[t+20>>2],p=y[t+40>>2],f=y[t+36>>2],G=y[t+48>>2],d=y[t+8>>2],m=y[t>>2],v=y[t+4>>2],g=y[t+16>>2],x=y[t+32>>2],t=_[c+28>>2]+s|0,T=y[t+32>>2],S=y[t>>2],E=y[t+16>>2],C=y[t+56>>2],w=y[t+48>>2],k=y[t+52>>2],O=y[t+36>>2],R=y[t+4>>2],F=y[t+20>>2],I=y[t+40>>2],M=y[t+8>>2],P=y[t+24>>2],_[n+180>>2]=0,_[n+164>>2]=0,_[n+148>>2]=0,y[n+160>>2]=b(b(x*M)+b(f*P))+b(p*I),y[n+156>>2]=b(b(x*R)+b(f*F))+b(p*O),y[n+144>>2]=b(b(g*M)+b(u*P))+b(h*I),y[n+140>>2]=b(b(g*R)+b(u*F))+b(h*O),y[n+176>>2]=z+b(b(b(x*w)+b(f*k))+b(p*C)),y[n+172>>2]=L+b(b(b(g*w)+b(u*k))+b(h*C)),_[n+132>>2]=0,y[n+152>>2]=b(b(x*S)+b(f*E))+b(p*T),y[n+136>>2]=b(b(g*S)+b(u*E))+b(h*T),y[n+128>>2]=b(b(m*M)+b(v*P))+b(d*I),y[n+124>>2]=b(b(m*R)+b(v*F))+b(d*O),y[n+120>>2]=b(b(m*S)+b(v*E))+b(d*T),y[n+168>>2]=G+b(b(b(m*w)+b(v*k))+b(d*C)),o[_[_[N>>2]+8>>2]](N,n+184|0,n+104|0,n+88|0),o[_[_[D>>2]+8>>2]](D,n+120|0,n+72|0,n+56|0),u=y[_[e+24>>2]+32>>2],h=b(y[n+104>>2]-u),y[n+104>>2]=h,y[n+108>>2]=y[n+108>>2]-u,y[n+112>>2]=y[n+112>>2]-u,y[n+88>>2]=u+y[n+88>>2],y[n+92>>2]=u+y[n+92>>2],y[n+96>>2]=u+y[n+96>>2];e:{if(t=_[4999]){if(!o[t](N,D))break e;h=y[n+104>>2]}y[n+88>>2]<y[n+72>>2]|h>y[n+56>>2]||(i=1),t=0,t=y[n+96>>2]<y[n+80>>2]|y[n+112>>2]>y[n+64>>2]?t:i,y[n+92>>2]<y[n+76>>2]|y[n+108>>2]>y[n+60>>2]|1^t||(t=_[e+8>>2],i=_[t+8>>2],_[n+48>>2]=-1,_[n+40>>2]=i,_[n+36>>2]=N,_[n+32>>2]=t,_[n+44>>2]=n+184,_[n+52>>2]=a,t=_[e+12>>2],i=_[t+8>>2],_[n+24>>2]=-1,_[n+16>>2]=i,_[n+12>>2]=D,_[n+8>>2]=t,_[n+20>>2]=n+120,_[n+28>>2]=r,t=function(e,t,i){var n=0,r=0,o=0;_[4998]=_[4998]+1,n=((n=(n=A((n=((n=i<<16|t)<<15^-1)+n|0)>>>10^n,9))>>>6^n)<<11^-1)+n|0;t:{if(!((0|(n=_[e+12>>2]+-1&(n>>>16^n)))>=_[e+28>>2])&&-1!=(0|(n=_[_[e+36>>2]+(n<<2)>>2])))for(o=_[e+16>>2];;){if(r=A(n,12)+o|0,_[r+4>>2]==(0|i)&&_[r>>2]==(0|t))break t;if(-1==(0|(n=_[_[e+56>>2]+(n<<2)>>2])))break}r=0}return r}(_[e+28>>2],a,r),y[_[e+24>>2]+32>>2]>b(0)?(t=_[e+16>>2],i=0|o[_[_[t>>2]+8>>2]](t,n+32|0,n+8|0,0,2)):t?i=_[t+8>>2]:(t=_[e+16>>2],i=0|o[_[_[t>>2]+8>>2]](t,n+32|0,n+8|0,_[e+32>>2],1),t=_[e+28>>2],_[8+(0|o[_[_[t>>2]+12>>2]](t,a,r))>>2]=i),t=_[e+24>>2],D=_[t+12>>2],N=_[t+8>>2],_[t+12>>2]=n+8,_[t+8>>2]=n+32,o[_[_[t>>2]+8>>2]](t,-1,a),t=_[e+24>>2],o[_[_[t>>2]+12>>2]](t,-1,r),o[_[_[i>>2]+8>>2]](i,n+32|0,n+8|0,_[e+20>>2],_[e+24>>2]),e=_[e+24>>2],_[e+8>>2]=N,_[e+12>>2]=D)}o[_[4566]](),B=n+256|0},o[344]=hn,o[345]=ba,o[346]=function(e){(e=ba(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[347]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0);a=y[e+44>>2],c=y[e+60>>2],r=_[e+20>>2],s=y[e+40>>2],u=y[e+56>>2],l=y[e+36>>2],h=y[e+52>>2],O=b(o[_[_[e>>2]+48>>2]](e)),R=b(o[_[_[e>>2]+48>>2]](e)),F=b(o[_[_[e>>2]+48>>2]](e)),I=y[t+52>>2],p=y[t+24>>2],g=y[t+20>>2],f=y[t+56>>2],A=y[t+40>>2],T=y[t+36>>2],M=y[t+48>>2],S=y[t+8>>2],E=y[t>>2],C=y[t+4>>2],w=y[t+16>>2],k=y[t+32>>2],_[i+12>>2]=0,d=f,f=b(r?b(h+l)*b(.5):0),m=b(r?b(u+s)*b(.5):0),v=b(r?b(c+a)*b(.5):0),d=b(d+b(b(b(k*f)+b(T*m))+b(A*v))),l=b(O+b(r?b(h-l)*b(.5):0)),s=b(R+b(r?b(u-s)*b(.5):0)),a=b(F+b(r?b(c-a)*b(.5):0)),c=b(b(b(l*b(x(k)))+b(s*b(x(T))))+b(a*b(x(A)))),y[i+8>>2]=d-c,u=b(I+b(b(b(f*w)+b(m*g))+b(v*p))),h=b(b(b(l*b(x(w)))+b(s*b(x(g))))+b(a*b(x(p)))),y[i+4>>2]=u-h,p=b(M+b(b(b(f*E)+b(m*C))+b(v*S))),a=b(b(b(l*b(x(E)))+b(s*b(x(C))))+b(a*b(x(S)))),y[i>>2]=p-a,_[n+12>>2]=0,y[n+8>>2]=c+d,y[n+4>>2]=h+u,y[n>>2]=a+p},o[348]=function(e,t){e|=0,t|=0;var i,n=0,r=0,a=0,s=0,l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0);if(B=i=B-144|0,_[e+20>>2]>=1)for(a=i- -64|0;n=(s=A(l,80))+_[e+28>>2]|0,r=_[n+12>>2],_[i+24>>2]=_[n+8>>2],_[i+28>>2]=r,r=_[n+4>>2],_[i+16>>2]=_[n>>2],_[i+20>>2]=r,r=_[n+28>>2],_[i+40>>2]=_[n+24>>2],_[i+44>>2]=r,r=_[n+20>>2],_[i+32>>2]=_[n+16>>2],_[i+36>>2]=r,r=_[n+44>>2],_[i+56>>2]=_[n+40>>2],_[i+60>>2]=r,r=_[n+36>>2],_[i+48>>2]=_[n+32>>2],_[i+52>>2]=r,r=_[n+60>>2],_[a+8>>2]=_[n+56>>2],_[a+12>>2]=r,r=_[n+52>>2],_[a>>2]=_[n+48>>2],_[a+4>>2]=r,n=_[n+64>>2],n=0|o[_[_[n>>2]+28>>2]](n),_[i+8>>2]=_[n+8>>2],r=_[n+4>>2],_[i>>2]=_[n>>2],_[i+4>>2]=r,c=y[e+148>>2],u=y[t+4>>2],h=y[e+144>>2],p=y[t>>2],y[i+8>>2]=b(y[i+8>>2]*y[t+8>>2])/y[e+152>>2],_[i+12>>2]=0,y[i>>2]=b(p*y[i>>2])/h,y[i+4>>2]=b(u*y[i+4>>2])/c,n=_[64+(_[e+28>>2]+s|0)>>2],o[_[_[n>>2]+24>>2]](n,i),c=y[e+144>>2],u=y[t>>2],h=y[e+148>>2],p=y[t+4>>2],f=y[e+152>>2],d=y[t+8>>2],_[i+76>>2]=0,y[i+72>>2]=b(d*y[i+72>>2])/f,y[i+68>>2]=b(p*y[i+68>>2])/h,y[i+64>>2]=b(u*y[i+64>>2])/c,r=_[i+20>>2],n=_[e+28>>2]+s|0,_[n>>2]=_[i+16>>2],_[n+4>>2]=r,r=_[i+28>>2],_[n+8>>2]=_[i+24>>2],_[n+12>>2]=r,r=_[i+44>>2],_[n+24>>2]=_[i+40>>2],_[n+28>>2]=r,r=_[i+36>>2],_[n+16>>2]=_[i+32>>2],_[n+20>>2]=r,r=_[i+60>>2],_[n+40>>2]=_[i+56>>2],_[n+44>>2]=r,r=_[i+52>>2],_[n+32>>2]=_[i+48>>2],_[n+36>>2]=r,r=_[a+12>>2],_[n+56>>2]=_[a+8>>2],_[n+60>>2]=r,r=_[a+4>>2],_[n+48>>2]=_[a>>2],_[n+52>>2]=r,_[e+68>>2]&&(n=_[64+(_[e+28>>2]+s|0)>>2],o[_[_[n>>2]+8>>2]](n,i+16|0,i+128|0,i+112|0),n=_[i+140>>2],_[i+88>>2]=_[i+136>>2],_[i+92>>2]=n,n=_[i+132>>2],_[i+80>>2]=_[i+128>>2],_[i+84>>2]=n,n=_[i+124>>2],_[i+104>>2]=_[i+120>>2],_[i+108>>2]=n,n=_[i+116>>2],_[i+96>>2]=_[i+112>>2],_[i+100>>2]=n,Sr(_[e+68>>2],_[76+(_[e+28>>2]+s|0)>>2],i+80|0)),(0|(l=l+1|0))<_[e+20>>2];);n=_[t+4>>2],_[e+144>>2]=_[t>>2],_[e+148>>2]=n,n=_[t+12>>2],_[e+152>>2]=_[t+8>>2],_[e+156>>2]=n,o[_[_[e>>2]+68>>2]](e),B=i+144|0},o[349]=function(e){return 144+(e|=0)|0},o[350]=function(e,t,i){e|=0,t=b(t),i|=0;var n,r=b(0),a=b(0),s=b(0),l=b(0);B=n=B-96|0,_[n+44>>2]=0,_[n+48>>2]=0,_[n+56>>2]=0,_[n+60>>2]=0,_[n+52>>2]=1065353216,_[n+76>>2]=0,_[n+80>>2]=0,_[n+72>>2]=1065353216,_[n+84>>2]=0,_[n+88>>2]=0,_[n+92>>2]=0,_[n+36>>2]=0,_[n+40>>2]=0,_[n+32>>2]=1065353216,_[n+64>>2]=0,_[n+68>>2]=0,o[_[_[e>>2]+8>>2]](e,n+32|0,n+16|0,n),r=y[n+24>>2],l=y[n+8>>2],t=b(t/b(12)),a=b(b(y[n>>2]-y[n+16>>2])*b(.5)),a=b(a+a),a=b(a*a),s=b(b(y[n+4>>2]-y[n+20>>2])*b(.5)),s=b(s+s),s=b(s*s),y[i+8>>2]=t*b(a+s),r=b(b(l-r)*b(.5)),r=b(r+r),r=b(r*r),y[i+4>>2]=t*b(a+r),y[i>>2]=t*b(s+r),B=n+96|0},o[351]=function(e){return 9800},o[352]=function(e,t){e|=0,t=b(t),y[e+76>>2]=t},o[353]=function(e){return b(y[76+(e|=0)>>2])},o[354]=function(e){return 24},o[355]=function(e,t,i){var n=0,r=0,a=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0;if(gn(e|=0,t|=0,i|=0),_[t+20>>2]=_[e+76>>2],n=_[e+20>>2],_[t+12>>2]=0,_[t+16>>2]=n,n){if(s=0|o[_[_[i>>2]+16>>2]](i,76,n),n=_[s+8>>2],_[t+12>>2]=o[_[_[i>>2]+28>>2]](i,n),_[t+16>>2]>0)for(;a=(r=A(l,80))+_[e+28>>2]|0,_[n+72>>2]=_[a+72>>2],_[n+64>>2]=o[_[_[i>>2]+28>>2]](i,_[a+64>>2]),o[_[_[i>>2]+24>>2]](i,_[64+(r+_[e+28>>2]|0)>>2])||(a=_[64+(r+_[e+28>>2]|0)>>2],h=i,p=0|o[_[_[a>>2]+52>>2]](a),f=1,u=_[_[i>>2]+16>>2],a=0|o[u](0|h,0|p,0|f),c=_[64+(r+_[e+28>>2]|0)>>2],f=i,p=a,h=0|o[_[_[c>>2]+56>>2]](c,_[a+8>>2],i),d=1346455635,m=_[64+(r+_[e+28>>2]|0)>>2],u=_[_[i>>2]+20>>2],o[u](0|f,0|p,0|h,0|d,0|m)),r=r+_[e+28>>2]|0,_[n+68>>2]=_[r+68>>2],_[n>>2]=_[r>>2],_[n+4>>2]=_[r+4>>2],_[n+8>>2]=_[r+8>>2],_[n+12>>2]=_[r+12>>2],_[n+16>>2]=_[r+16>>2],_[n+20>>2]=_[r+20>>2],_[n+24>>2]=_[r+24>>2],_[n+28>>2]=_[r+28>>2],_[n+32>>2]=_[r+32>>2],_[n+36>>2]=_[r+36>>2],_[n+40>>2]=_[r+40>>2],_[n+44>>2]=_[r+44>>2],_[n+48>>2]=_[r+48>>2],_[n+52>>2]=_[r+52>>2],_[n+56>>2]=_[r+56>>2],_[n+60>>2]=_[r+60>>2],n=n+76|0,(0|(l=l+1|0))<_[t+16>>2];);o[_[_[i>>2]+20>>2]](i,s,9724,1497453121,_[s+8>>2])}return 9749},o[356]=function(e,t){t|=0;var i=0;if(_[72+(e|=0)>>2]=_[e+72>>2]+1,(0|(i=_[e+20>>2]))>=1)for(;i=i+-1|0,_[64+(_[e+28>>2]+A(i,80)|0)>>2]==(0|t)&&ga(e,i),(0|i)>0;);o[_[_[e>>2]+68>>2]](e)},o[357]=function(e){e|=0;var t,i=b(0),n=0,r=0,a=0;if(B=t=B-32|0,_[e+52>>2]=-581039253,_[e+56>>2]=-581039253,_[e+36>>2]=1566444395,_[e+40>>2]=1566444395,_[e+60>>2]=-581039253,_[e+64>>2]=0,_[e+44>>2]=1566444395,_[e+48>>2]=0,_[e+20>>2]>=1)for(;r=_[e+28>>2]+A(n,80)|0,a=_[r+64>>2],o[_[_[a>>2]+8>>2]](a,r,t+16|0,t),i=y[t+16>>2],y[e+36>>2]>i&&(y[e+36>>2]=i),i=y[t>>2],y[e+52>>2]<i&&(y[e+52>>2]=i),i=y[t+20>>2],y[e+40>>2]>i&&(y[e+40>>2]=i),i=y[t+4>>2],y[e+56>>2]<i&&(y[e+56>>2]=i),i=y[t+24>>2],y[e+44>>2]>i&&(y[e+44>>2]=i),i=y[t+8>>2],y[e+60>>2]<i&&(y[e+60>>2]=i),(0|(n=n+1|0))<_[e+20>>2];);B=t+32|0},o[358]=ya,o[359]=function(e){(e=ya(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[360]=Li,o[361]=Pn,o[362]=ma,o[363]=function(e,t,i){e|=0,t=b(t),i|=0;var n=b(0),r=b(0);n=b(o[_[_[e>>2]+48>>2]](e)),r=b(o[_[_[e>>2]+48>>2]](e)),_[i+12>>2]=0,t=b(r*b(n*b(t*b(.4000000059604645)))),y[i+8>>2]=t,y[i+4>>2]=t,y[i>>2]=t},o[364]=function(e){return 9988},o[365]=Ae,o[366]=function(e){return b(b(y[32+(e|=0)>>2]*y[e+16>>2]))},o[367]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),a=b(0),s=b(0),l=0,c=b(0),u=b(0);B=n=B-16|0,o[_[_[t>>2]+68>>2]](n,t,i),l=_[n+12>>2],_[e+8>>2]=_[n+8>>2],_[e+12>>2]=l,l=_[n+4>>2],_[e>>2]=_[n>>2],_[e+4>>2]=l,a=y[i+4>>2],r=y[i>>2],s=y[i+8>>2],c=b(o[_[_[t>>2]+48>>2]](t)),u=r=(t=b(b(b(r*r)+b(a*a))+b(s*s))<b(14210854715202004e-30))?b(-1):r,s=t?b(-1):s,a=t?b(-1):a,r=b(b(1)/b(w(b(b(s*s)+b(b(r*r)+b(a*a)))))),y[e>>2]=y[e>>2]+b(c*b(u*r)),y[e+4>>2]=y[e+4>>2]+b(c*b(a*r)),y[e+8>>2]=y[e+8>>2]+b(c*b(s*r)),B=n+16|0},o[368]=function(e,t,i){_[(e|=0)>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0},o[369]=function(e,t,i,n){i|=0,(0|(n|=0))>=1&&Pi(i,0,n<<4)},o[370]=da,o[371]=Hi,o[372]=function(e){var t=0;return _[(e|=0)>>2]=10004,d[e+65|0]&&(t=_[e+56>>2],o[_[_[t>>2]>>2]](t),(t=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),0|e},o[373]=function(e){var t=0;_[(e|=0)>>2]=10004,d[e+65|0]&&(t=_[e+56>>2],o[_[_[t>>2]>>2]](t),(t=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[374]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),B=b(0);m=y[e+28>>2],E=y[e+44>>2],C=y[e+24>>2],w=y[e+40>>2],s=y[e+20>>2],k=y[e+36>>2],O=b(o[_[_[e>>2]+48>>2]](e)),R=b(o[_[_[e>>2]+48>>2]](e)),F=b(o[_[_[e>>2]+48>>2]](e)),I=y[t+52>>2],l=y[t+24>>2],c=y[t+20>>2],u=y[t+56>>2],h=y[e+24>>2],p=y[e+40>>2],v=y[e+28>>2],M=y[e+44>>2],f=y[t+40>>2],r=y[t+36>>2],P=y[t+48>>2],g=y[t+8>>2],A=y[t>>2],T=y[t+4>>2],S=y[t+16>>2],D=y[e+20>>2],B=y[e+36>>2],a=y[t+32>>2],_[i+12>>2]=0,d=u,u=b(b(B+D)*b(.5)),h=b(b(p+h)*b(.5)),p=b(b(M+v)*b(.5)),v=b(d+b(b(b(a*u)+b(r*h))+b(f*p))),s=b(O+b(b(k-s)*b(.5))),d=b(s*b(x(a))),a=b(R+b(b(w-C)*b(.5))),d=b(d+b(a*b(x(r)))),r=b(F+b(b(E-m)*b(.5))),f=b(d+b(r*b(x(f)))),y[i+8>>2]=v-f,m=b(I+b(b(b(u*S)+b(h*c))+b(p*l))),l=b(b(b(s*b(x(S)))+b(a*b(x(c))))+b(r*b(x(l)))),y[i+4>>2]=m-l,c=b(P+b(b(b(u*A)+b(h*T))+b(p*g))),r=b(b(b(s*b(x(A)))+b(a*b(x(T))))+b(r*b(x(g)))),y[i>>2]=c-r,_[n+12>>2]=0,y[n+8>>2]=f+v,y[n+4>>2]=l+m,y[n>>2]=r+c},o[375]=function(e,t){e|=0,t|=0;var i=b(0),n=0,r=b(0);n=0|o[_[_[e>>2]+28>>2]](e),i=b(y[n>>2]-y[t>>2]),r=b(i*i),i=b(y[n+4>>2]-y[t+4>>2]),r=b(r+b(i*i)),i=b(y[n+8>>2]-y[t+8>>2]),b(r+b(i*i))>b(1.1920928955078125e-7)&&(ha(e,t),d[e+65|0]&&(t=_[e+56>>2],o[_[_[t>>2]>>2]](t),(t=_[e+56>>2])&&(_[5586]=_[5586]+1,o[_[4568]](t))),_[5585]=_[5585]+1,n=ta(t=0|o[_[4567]](172,16)),_[e+56>>2]=t,ea(n,_[e+52>>2],d[e+64|0],e+20|0,e+36|0),a[e+65|0]=1)},o[376]=function(e){return _[52+(e|=0)>>2]+4|0},o[377]=Jr,o[378]=function(e){return 10612},o[379]=function(e,t){e|=0,t=b(t),y[e+16>>2]=t},o[380]=function(e){return b(y[16+(e|=0)>>2])},o[381]=Rr,o[382]=function(e,t,i){var n=0,r=0,a=0,s=0,l=0,c=0,u=0,h=0;gn(e|=0,t|=0,i|=0),n=_[e+52>>2],o[_[_[n>>2]+56>>2]](n,t+12|0,i),_[t+52>>2]=_[e+16>>2];e:if(!_[e+56>>2]||1&o[_[_[i>>2]+52>>2]](i))_[t+40>>2]=0,_[t+44>>2]=0;else{if(n=0|o[_[_[i>>2]+24>>2]](i,_[e+56>>2])){_[t+44>>2]=0,_[t+40>>2]=n;break e}n=0|o[_[_[i>>2]+28>>2]](i,_[e+56>>2]),_[t+44>>2]=0,_[t+40>>2]=n,n=_[e+56>>2],s=i,l=0|o[_[_[n>>2]+12>>2]](n),c=1,a=_[_[i>>2]+16>>2],n=0|o[a](0|s,0|l,0|c),r=_[e+56>>2],c=i,l=n,s=0|o[_[_[r>>2]+16>>2]](r,_[n+8>>2],i),u=1213612625,h=_[e+56>>2],a=_[_[i>>2]+20>>2],o[a](0|c,0|l,0|s,0|u,0|h)}e:if(!_[e+60>>2]||2&o[_[_[i>>2]+52>>2]](i))_[t+48>>2]=0;else{if(n=0|o[_[_[i>>2]+24>>2]](i,_[e+60>>2])){_[t+48>>2]=n;break e}_[t+48>>2]=o[_[_[i>>2]+28>>2]](i,_[e+60>>2]),n=_[e+60>>2],h=i,u=0|o[_[_[n>>2]+8>>2]](n),s=1,a=_[_[i>>2]+16>>2],n=0|o[a](0|h,0|u,0|s),r=_[e+60>>2],s=i,u=n,h=0|o[_[_[r>>2]+12>>2]](r,_[n+8>>2],i),l=1346456916,c=_[e+60>>2],a=_[_[i>>2]+20>>2],o[a](0|s,0|u,0|h,0|l,0|c)}return _[t+56>>2]=0,10088},o[383]=function(e,t,i,n){var r,o;t|=0,i|=0,n|=0,B=r=B+-64|0,o=_[52+(e|=0)>>2],_[r+60>>2]=0,_[r+8>>2]=t,_[r+4>>2]=o,_[r>>2]=10476,mi(_[e+56>>2],r,i,n),B=r- -64|0},o[384]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=0,a=b(0),s=b(0),l=b(0),c=b(0);B=n=B-160|0,_[n+152>>2]=0,_[n+144>>2]=0,_[n+148>>2]=0,_[n+136>>2]=0,_[n+140>>2]=0,_[n+44>>2]=0,_[n+48>>2]=0,_[n+56>>2]=0,_[n+60>>2]=0,_[(r=n- -64|0)>>2]=0,_[r+4>>2]=0,_[n+76>>2]=0,_[n+80>>2]=0,_[n+72>>2]=1065353216,_[n+84>>2]=0,_[n+88>>2]=0,_[n+92>>2]=1065353216,_[n+96>>2]=0,r=_[n+144>>2],_[n+100>>2]=_[n+140>>2],_[n+104>>2]=r,r=_[n+152>>2],_[n+108>>2]=_[n+148>>2],_[n+112>>2]=r,_[n+36>>2]=0,_[n+40>>2]=0,_[n+32>>2]=10892,_[n+52>>2]=1065353216,_[n+116>>2]=-581039253,a=y[i+4>>2],s=y[i>>2],l=y[i+8>>2],_[n+132>>2]=0,c=b(l*b(0)),y[n+124>>2]=b(a+b(s*y[n+56>>2]))+c,a=b(a*b(0)),y[n+128>>2]=l+b(b(s*y[n+60>>2])+a),y[n+120>>2]=b(s+a)+c,_[n+24>>2]=1566444395,_[n+28>>2]=0,_[n+16>>2]=1566444395,_[n+20>>2]=1566444395,_[n+8>>2]=-581039253,_[n+12>>2]=0,_[n>>2]=-581039253,_[n+4>>2]=-581039253,o[_[_[t>>2]+64>>2]](t,n+32|0,n,n+16|0),t=_[n+48>>2],_[e+8>>2]=_[n+44>>2],_[e+12>>2]=t,t=_[n+40>>2],_[e>>2]=_[n+36>>2],_[e+4>>2]=t,B=n+160|0},o[385]=function(e,t,i){e|=0,i|=0,o[_[_[(t|=0)>>2]+68>>2]](e,t,i)},o[386]=function(e,t){t|=0;var i=0,n=0,r=0,a=0,s=0,l=0,c=0,u=0;(i=_[56+(e|=0)>>2])&&(a=t,s=0|o[_[_[i>>2]+12>>2]](i),l=1,r=_[_[t>>2]+16>>2],i=0|o[r](0|a,0|s,0|l),n=_[e+56>>2],l=t,s=i,a=0|o[_[_[n>>2]+16>>2]](n,_[i+8>>2],t),c=1213612625,u=_[e+56>>2],r=_[_[t>>2]+20>>2],o[r](0|l,0|s,0|a,0|c,0|u))},o[387]=function(e,t){t|=0;var i=0,n=0,r=0,a=0,s=0,l=0,c=0,u=0;(i=_[60+(e|=0)>>2])&&(a=t,s=0|o[_[_[i>>2]+8>>2]](i),l=1,r=_[_[t>>2]+16>>2],i=0|o[r](0|a,0|s,0|l),n=_[e+60>>2],l=t,s=i,a=0|o[_[_[n>>2]+12>>2]](n,_[i+8>>2],t),c=1346456916,u=_[e+60>>2],r=_[_[t>>2]+20>>2],o[r](0|l,0|s,0|a,0|c,0|u))},o[388]=Li,o[389]=Ii,o[390]=fa,o[391]=Ii,o[392]=fa,o[393]=Ii,o[394]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,a,s,l,c,u=0,h=0,p=0,f=0,v=b(0),x=b(0),T=b(0),S=b(0),E=0;B=n=B-32|0,_[e+60>>2]=_[e+60>>2]+1,f=_[e+4>>2],o[_[_[f>>2]+16>>2]](f,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0,n+8|0,n+4|0,n,t),a=_[n+12>>2]+A(_[n+8>>2],i)|0,s=_[n+20>>2],f=(r=_[e+4>>2])+12|0,h=p=_[n+28>>2];e:if((u=(l=_[n>>2])+-2|0)>>>0<=1){if(E=m[a+4>>1],!(u-1))break e;E=_[a+8>>2]}else E=d[a+2|0];c=_[n+16>>2],u=h+A(E,c)|0,s?(v=b(y[r+8>>2]*b(g[u+8>>3])),x=b(y[r+4>>2]*b(g[u>>3])),T=b(g[u+16>>3]),h=f):(v=b(y[u+4>>2]*y[r+8>>2]),x=b(y[u>>2]*y[r+4>>2]),T=y[r+12>>2],h=u+8|0),S=y[h>>2],_[e+56>>2]=0,y[e+48>>2]=v,y[e+44>>2]=x,y[e+52>>2]=S*T;e:if((u=l+-2|0)>>>0<=1){if(h=_[a+4>>2],u-1)break e;h=m[a+2>>1]}else h=d[a+1|0];u=A(h,c)+p|0,s?(v=b(y[r+8>>2]*b(g[u+8>>3])),x=b(y[r+4>>2]*b(g[u>>3])),T=b(g[u+16>>3]),h=f):(v=b(y[u+4>>2]*y[r+8>>2]),x=b(y[u>>2]*y[r+4>>2]),T=y[r+12>>2],h=u+8|0),S=y[h>>2],_[e+40>>2]=0,y[e+32>>2]=v,y[e+28>>2]=x,y[e+36>>2]=S*T;e:if((u=l+-2|0)>>>0<=1){if(h=_[a>>2],u-1)break e;h=m[a>>1]}else h=d[0|a];p=A(h,c)+p|0,s?(T=b(g[p+16>>3]),v=b(y[r+8>>2]*b(g[p+8>>3])),x=b(y[r+4>>2]*b(g[p>>3]))):(f=p+8|0,T=y[r+12>>2],v=b(y[p+4>>2]*y[r+8>>2]),x=b(y[p>>2]*y[r+4>>2])),S=y[f>>2],_[e+24>>2]=0,y[e+16>>2]=v,y[(f=e+12|0)>>2]=x,y[e+20>>2]=S*T,p=_[e+8>>2],o[_[_[p>>2]+8>>2]](p,f,t,i),e=_[e+4>>2],o[_[_[e>>2]+24>>2]](e,t),B=n+32|0},o[395]=Li,o[396]=Pn,o[397]=ha,o[398]=function(e){return 10940},o[399]=ca,o[400]=gn,o[401]=function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-48|0,_[r+12>>2]=t,_[r+8>>2]=10756,t=_[i+12>>2],_[r+24>>2]=_[i+8>>2],_[r+28>>2]=t,t=_[i+4>>2],_[r+16>>2]=_[i>>2],_[r+20>>2]=t,t=_[n+12>>2],_[r+40>>2]=_[n+8>>2],_[r+44>>2]=t,t=_[n+4>>2],_[r+32>>2]=_[n>>2],_[r+36>>2]=t,e=_[e+52>>2],o[_[_[e>>2]+8>>2]](e,r+8|0,i,n),B=r+48|0},o[402]=Li,o[403]=Ii,o[404]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,a=b(0),s=b(0),l=b(0),c=b(0),u=0;((c=(a=y[t>>2])<(s=y[t+16>>2])?a:s)<(l=y[t+32>>2])?c:l)>y[e+24>>2]||y[(y[t+(r=(a>s^1)<<4)>>2]>l?r:32)+t>>2]<y[e+8>>2]||((c=(a=y[t+8>>2])<(s=y[(r=t+24|0)>>2])?a:s)<(l=y[(u=t+40|0)>>2])?c:l)>y[e+32>>2]||y[(y[(r=a>s?t+8|0:r)>>2]>l?r:u)>>2]<y[e+16>>2]||((c=(a=y[t+4>>2])<(s=y[(r=t+20|0)>>2])?a:s)<(l=y[(u=t+36|0)>>2])?c:l)>y[e+28>>2]||y[(y[(r=a>s?t+4|0:r)>>2]>l?r:u)>>2]<y[e+12>>2]||(e=_[e+4>>2],o[_[_[e>>2]+8>>2]](e,t,i,n))},o[405]=Ii,o[406]=function(e,t,i,n){e|=0,t|=0,i|=0;var r=b(0),o=b(0),a=b(0),s=b(0),l=b(0);a=y[e+88>>2],s=y[e+92>>2],l=y[e+96>>2],(r=b(b(b(a*y[t>>2])+b(s*y[t+4>>2]))+b(l*y[t+8>>2])))>(o=y[e+84>>2])&&(y[e+84>>2]=r,i=_[t+12>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=i,i=_[t+4>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=i,o=r),(r=b(b(b(a*y[t+16>>2])+b(s*y[t+20>>2]))+b(l*y[t+24>>2])))>o&&(y[e+84>>2]=r,i=_[t+28>>2],_[e+12>>2]=_[t+24>>2],_[e+16>>2]=i,i=_[t+20>>2],_[e+4>>2]=_[t+16>>2],_[e+8>>2]=i,o=r),(r=b(b(b(a*y[t+32>>2])+b(s*y[t+36>>2]))+b(l*y[t+40>>2])))>o&&(y[e+84>>2]=r,i=_[t+44>>2],_[e+12>>2]=_[t+40>>2],_[e+16>>2]=i,i=_[t+36>>2],_[e+4>>2]=_[t+32>>2],_[e+8>>2]=i)},o[407]=ln,o[408]=ye,o[409]=function(e,t,i){e|=0,t=b(t),i|=0;var n,r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);B=n=B-96|0,r=b(o[_[_[e>>2]+48>>2]](e)),_[n+44>>2]=0,_[n+48>>2]=0,_[n+56>>2]=0,_[n+60>>2]=0,_[n+52>>2]=1065353216,_[n+76>>2]=0,_[n+80>>2]=0,_[n+72>>2]=1065353216,_[n+84>>2]=0,_[n+88>>2]=0,_[n+92>>2]=0,_[n+36>>2]=0,_[n+40>>2]=0,_[n+32>>2]=1065353216,_[n+64>>2]=0,_[n+68>>2]=0,o[_[_[e>>2]+8>>2]](e,n+32|0,n+16|0,n),l=y[n+24>>2],c=y[n+8>>2],a=y[n+16>>2],s=y[n>>2],u=y[n+20>>2],h=y[n+4>>2],_[i+12>>2]=0,t=b(t*b(.0833333283662796)),a=b(r+b(b(s-a)*b(.5))),a=b(a+a),a=b(a*a),s=b(r+b(b(h-u)*b(.5))),s=b(s+s),s=b(s*s),y[i+8>>2]=t*b(a+s),r=b(r+b(b(c-l)*b(.5))),r=b(r+r),r=b(r*r),y[i+4>>2]=t*b(a+r),y[i>>2]=t*b(s+r),B=n+96|0},o[410]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=0,a=b(0),s=b(0),l=b(0),c=b(0),u=0,h=0,p=0,f=b(0),d=b(0),m=b(0);if(B=n=B-2048|0,_[e>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,l=y[i>>2],a=y[i+4>>2],c=y[i+8>>2],s=b(b(b(l*l)+b(a*a))+b(c*c)),f=b(1),s<b(9999999747378752e-20)||(s=b(b(1)/b(w(s))),d=b(c*s),m=b(a*s),f=b(l*s)),s=f,(0|o[_[_[t>>2]+96>>2]](t))>=1)for(c=b(-0xde0b6b000000000);;){if(u=128,((0|o[_[_[t>>2]+96>>2]](t))-h|0)>127||(0|(u=(0|o[_[_[t>>2]+96>>2]](t))-h|0))>=1){for(i=0,r=0;o[_[_[t>>2]+108>>2]](t,r,(r<<4)+n|0),(0|u)!=(0|(r=r+1|0)););for(p=-1,a=b(-34028234663852886e22);a=(r=(l=b(b(b(s*y[(r=(i<<4)+n|0)>>2])+b(m*y[r+4>>2]))+b(d*y[r+8>>2])))>a)?l:a,p=r?i:p,(0|u)!=(0|(i=i+1|0)););}else a=b(-34028234663852886e22),p=-1;if(a>c&&(i=_[12+(r=(p<<4)+n|0)>>2],_[e+8>>2]=_[r+8>>2],_[e+12>>2]=i,i=_[r+4>>2],_[e>>2]=_[r>>2],_[e+4>>2]=i,c=a),!((0|(h=h+128|0))<(0|o[_[_[t>>2]+96>>2]](t))))break}B=n+2048|0},o[411]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=0,s=0,l=b(0),c=0,u=0,h=0,p=0,f=0,d=0,m=0,v=b(0),g=0,A=b(0),x=b(0),T=b(0);if(B=r=B-2048|0,!((0|n)<=0)){for(;_[12+((a<<4)+i|0)>>2]=-581039253,(0|(a=a+1|0))!=(0|n););if(!((0|n)<1))for(;;){if((0|o[_[_[e>>2]+96>>2]](e))>=1)for(m=u=(a=f<<4)+i|0,g=d=t+a|0,h=0;;){if(p=128,((0|o[_[_[e>>2]+96>>2]](e))-h|0)>127||(0|(p=(0|o[_[_[e>>2]+96>>2]](e))-h|0))>=1){for(a=0;o[_[_[e>>2]+108>>2]](e,a,(a<<4)+r|0),(0|p)!=(0|(a=a+1|0)););for(A=y[g+8>>2],x=y[d+4>>2],T=y[d>>2],a=0,s=-1,l=b(-34028234663852886e22);l=(c=(v=b(b(b(T*y[(c=(a<<4)+r|0)>>2])+b(x*y[c+4>>2]))+b(A*y[c+8>>2])))>l)?v:l,s=c?a:s,(0|p)!=(0|(a=a+1|0)););}else l=b(-34028234663852886e22),s=-1;if(l>y[m+12>>2]&&(s=_[12+(a=(s<<4)+r|0)>>2],_[u+8>>2]=_[a+8>>2],_[u+12>>2]=s,s=_[a+4>>2],_[u>>2]=_[a>>2],_[u+4>>2]=s,y[m+12>>2]=l),!((0|(h=h+128|0))<(0|o[_[_[e>>2]+96>>2]](e))))break}if((0|(f=f+1|0))==(0|n))break}}B=r+2048|0},o[412]=Li,o[413]=Pn,o[414]=ma,o[415]=function(e,t){e|=0;var i=0;i=_[4+(t|=0)>>2],_[e+20>>2]=_[t>>2],_[e+24>>2]=i,i=_[t+12>>2],_[e+28>>2]=_[t+8>>2],_[e+32>>2]=i},o[416]=function(e){return 20+(e|=0)|0},o[417]=function(e,t,i){t=b(t)},o[418]=function(e){return 11232},o[419]=function(e,t,i,n){},o[420]=ln,o[421]=ln,o[422]=Pn,o[423]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,o=b(0),a=0,s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0);r=e+32|0,a=_[e+56>>2],o=y[r+((a+2|0)%3<<2)>>2],_[12+(e=B-16|0)>>2]=0,y[e+8>>2]=o,y[e+4>>2]=o,y[e>>2]=o,y[(a<<=2)+e>>2]=o+y[a+r>>2],h=y[t+52>>2],s=y[t+24>>2],d=y[t+20>>2],p=y[t+56>>2],l=y[t+40>>2],m=y[t+36>>2],f=y[t+48>>2],v=y[t+8>>2],g=y[t>>2],A=y[t+4>>2],T=y[t+16>>2],S=y[t+32>>2],o=y[e+8>>2],c=y[e>>2],u=y[e+4>>2],_[i+12>>2]=0,l=b(b(b(c*b(x(S)))+b(u*b(x(m))))+b(o*b(x(l)))),y[i+8>>2]=p-l,s=b(b(b(c*b(x(T)))+b(u*b(x(d))))+b(o*b(x(s)))),y[i+4>>2]=h-s,o=b(b(b(c*b(x(g)))+b(u*b(x(A))))+b(o*b(x(v)))),y[i>>2]=f-o,_[n+12>>2]=0,y[n+8>>2]=p+l,y[n+4>>2]=h+s,y[n>>2]=f+o},o[424]=function(e,t){e|=0,t|=0;var i,n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);n=y[e+16>>2],r=y[(i=e+32|0)>>2],o=y[e+20>>2],a=y[e+36>>2],s=y[e+24>>2],l=y[e+40>>2],Or(e,t),c=y[t>>2],u=y[t+4>>2],h=y[t+8>>2],_[e+44>>2]=0,y[e+40>>2]=h*b(l/s),y[e+36>>2]=u*b(a/o),y[i>>2]=c*b(r/n),_[e+48>>2]=_[((_[e+56>>2]+2|0)%3<<2)+i>>2]},o[425]=function(e,t,i){e|=0,t=b(t),i|=0;var n,r=b(0),o=b(0),a=b(0),s=0,l=0;n=e+32|0,l=_[e+56>>2],s=_[n+((l+2|0)%3<<2)>>2],_[12+(e=B-16|0)>>2]=0,_[e+8>>2]=s,_[e+4>>2]=s,_[e>>2]=s,y[(l=(s=l<<2)+e|0)>>2]=y[s+n>>2]+y[l>>2],r=y[e+8>>2],t=b(t*b(.0833333283662796)),o=y[e>>2],o=b(o+o),o=b(o*o),a=y[e+4>>2],a=b(a+a),a=b(a*a),y[i+8>>2]=t*b(o+a),r=b(r+r),r=b(r*r),y[i+4>>2]=t*b(o+r),y[i>>2]=t*b(a+r)},o[426]=function(e){return 11760},o[427]=oa,o[428]=me,o[429]=Rr,o[430]=function(e,t,i){return gn(e|=0,t|=0,i|=0),_[t+28>>2]=_[e+32>>2],_[t+32>>2]=_[e+36>>2],_[t+36>>2]=_[e+40>>2],_[t+40>>2]=_[e+44>>2],_[t+12>>2]=_[e+16>>2],_[t+16>>2]=_[e+20>>2],_[t+20>>2]=_[e+24>>2],_[t+24>>2]=_[e+28>>2],i=_[e+48>>2],_[t+48>>2]=0,_[t+44>>2]=i,e=_[e+56>>2],_[t+56>>2]=0,_[t+52>>2]=e,11773},o[431]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0);n=B-16|0,_[e>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,a=y[i>>2],c=y[i+4>>2],o=y[i+8>>2],(s=b(b(b(a*a)+b(c*c))+b(o*o)))<b(9999999747378752e-20)?(s=b(0),a=b(1)):(l=o,o=b(b(1)/b(w(s))),u=b(l*o),s=b(c*o),a=b(a*o)),_[n+8>>2]=0,_[n+12>>2]=0,_[n>>2]=0,_[n+4>>2]=0,r=(i=_[t+56>>2]<<2)+n|0,h=y[32+(t+i|0)>>2],y[r>>2]=h,c=b(-0xde0b6b000000000),p=y[n>>2],f=y[n+4>>2],l=y[n+8>>2],(o=b(b(b(a*p)+b(s*f))+b(u*l)))>b(-0xde0b6b000000000)&&(_[e+12>>2]=_[n+12>>2],y[e+8>>2]=l,y[e+4>>2]=f,y[e>>2]=p,c=o),_[n+8>>2]=0,_[n+12>>2]=0,_[n>>2]=0,_[n+4>>2]=0,y[r>>2]=-h,l=a,a=y[n>>2],o=y[n+4>>2],l=b(b(l*a)+b(s*o)),s=y[n+8>>2],b(l+b(u*s))>c&&(_[e+12>>2]=_[n+12>>2],y[e+8>>2]=s,y[e+4>>2]=o,y[e>>2]=a)},o[432]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,o=0,a=0,s=b(0),l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=0,d=b(0),m=b(0),v=b(0),g=b(0);if(r=B-16|0,(0|n)>=1)for(;_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,l=(o=(a=_[e+56>>2])<<2)+r|0,c=y[32+(o=e+o|0)>>2],_[l>>2]=_[o+32>>2],p=y[r>>2],s=y[(o=(l=f<<4)+t|0)>>2],v=y[r+4>>2],d=y[o+4>>2],g=y[r+8>>2],m=y[o+8>>2],u=b(b(b(p*s)+b(v*d))+b(g*m)),h=b(-0xde0b6b000000000),u>b(-0xde0b6b000000000)&&(_[12+(a=i+l|0)>>2]=_[r+12>>2],y[a+8>>2]=g,y[a+4>>2]=v,y[a>>2]=p,m=y[o+8>>2],d=y[o+4>>2],s=y[o>>2],a=_[e+56>>2],c=y[32+((a<<2)+e|0)>>2],h=u),p=h,_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,y[(a<<2)+r>>2]=-c,c=y[r>>2],u=y[r+4>>2],h=b(b(c*s)+b(u*d)),s=y[r+8>>2],b(h+b(s*m))>p&&(_[12+(o=i+l|0)>>2]=_[r+12>>2],y[o+8>>2]=s,y[o+4>>2]=u,y[o>>2]=c),(0|(f=f+1|0))!=(0|n););},o[433]=Li,o[434]=ln,o[435]=ge,o[436]=ra,o[437]=na,o[438]=function(e,t,i){e|=0,t=b(t),i|=0;var n=b(0),r=b(0),a=b(0),s=b(0),l=b(0),c=b(0);n=y[e+40>>2],r=y[e+36>>2],a=y[e+32>>2],s=b(o[_[_[e>>2]+48>>2]](e)),l=b(o[_[_[e>>2]+48>>2]](e)),c=b(o[_[_[e>>2]+48>>2]](e)),_[i+12>>2]=0,t=b(t/b(12)),a=b(a+s),a=b(a+a),a=b(a*a),r=b(r+l),r=b(r+r),r=b(r*r),y[i+8>>2]=t*b(a+r),n=b(n+c),n=b(n+n),n=b(n*n),y[i+4>>2]=t*b(a+n),y[i>>2]=t*b(r+n)},o[439]=function(e){return 12064},o[440]=ir,o[441]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0);n=y[t+36>>2],r=y[t+40>>2],a=y[t+32>>2],s=b(o[_[_[t>>2]+48>>2]](t)),l=b(o[_[_[t>>2]+48>>2]](t)),c=b(o[_[_[t>>2]+48>>2]](t)),u=y[i>>2],h=y[i+4>>2],p=y[i+8>>2],_[e+12>>2]=0,r=b(r+c),y[e+8>>2]=p>=b(0)?r:b(-r),n=b(n+l),y[e+4>>2]=h>=b(0)?n:b(-n),n=b(a+s),y[e>>2]=u>=b(0)?n:b(-n)},o[442]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0);n=y[t+32>>2],r=y[t+36>>2],o=y[t+40>>2],a=y[i>>2],s=y[i+4>>2],l=y[i+8>>2],_[e+12>>2]=0,y[e+8>>2]=l>=b(0)?o:b(-o),y[e+4>>2]=s>=b(0)?r:b(-r),y[e>>2]=a>=b(0)?n:b(-n)},o[443]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,o=0,a=b(0),s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0);if((0|n)>=1)for(;a=y[e+32>>2],u=y[(r=(s=o<<4)+t|0)>>2],l=y[e+36>>2],h=y[r+4>>2],c=y[e+40>>2],p=y[r+8>>2],_[12+(r=i+s|0)>>2]=0,y[r+8>>2]=p>=b(0)?c:b(-c),y[r+4>>2]=h>=b(0)?l:b(-l),y[r>>2]=u>=b(0)?a:b(-a),(0|(o=o+1|0))!=(0|n););},o[444]=ia,o[445]=function(e,t,i){e|=0,i|=0,(t|=0)>>>0<=5&&(_[i+12>>2]=0,e=t<<2,_[i+8>>2]=_[e+12116>>2],_[i+4>>2]=_[e+12092>>2],_[i>>2]=_[e+12068>>2])},o[446]=function(e){return 8},o[447]=ca,o[448]=function(e,t,i,n){i|=0,n|=0;var r,a=0;r=e|=0,(t|=0)>>>0<=11?(a=_[12188+(t<<=2)>>2],t=_[t+12140>>2]):t=0,o[_[_[e>>2]+108>>2]](r,t,i),o[_[_[e>>2]+108>>2]](e,a,n)},o[449]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),a=b(0),s=b(0),l=b(0),c=b(0);r=y[e+40>>2],n=y[e+36>>2],a=y[e+32>>2],s=b(o[_[_[e>>2]+48>>2]](e)),l=b(o[_[_[e>>2]+48>>2]](e)),c=b(o[_[_[e>>2]+48>>2]](e)),_[i+12>>2]=0,n=b(n+l),e=t>>>1&1,y[i+4>>2]=b(n*b(1^e))-b(n*b(0|e)),n=b(a+s),e=1&t,y[i>>2]=b(n*b(1^e))-b(n*b(0|e)),r=b(r+c),e=t>>>2&1,y[i+8>>2]=b(r*b(1^e))-b(r*b(0|e))},o[450]=ia,o[451]=function(e,t,i,n){var r,a,s;t|=0,i|=0,n|=0,B=r=B-48|0,o[_[_[(e|=0)>>2]+124>>2]](e,r+32|0,n),n=_[r+32>>2],a=_[r+36>>2],s=_[r+40>>2],_[t+12>>2]=0,_[t+8>>2]=s,_[t+4>>2]=a,_[t>>2]=n,_[r+12>>2]=0,_[r+8>>2]=-2147483648^s,_[r+4>>2]=-2147483648^a,_[r>>2]=-2147483648^n,o[_[_[e>>2]+64>>2]](r+16|0,e,r),e=_[r+28>>2],_[i+8>>2]=_[r+24>>2],_[i+12>>2]=e,e=_[r+20>>2],_[i>>2]=_[r+16>>2],_[i+4>>2]=e,B=r+48|0},o[452]=function(e,t,i){e|=0,t|=0,i=b(i);var n=b(0),r=b(0),o=0;return n=y[t>>2],r=y[e+32>>2],n<=b(r+i)^1|n>=b(b(-r)-i)^1||(n=y[t+4>>2],r=y[e+36>>2],n<=b(r+i)^1|n>=b(b(-r)-i)^1||(n=y[t+8>>2],r=y[e+40>>2],n<=b(r+i)&&(o=n>=b(b(-r)-i)))),0|o},o[453]=function(e,t,i){e|=0,t|=0,i|=0;var n=0,r=b(0),o=b(0),a=b(0);if(i>>>0<=5){o=y[e+40>>2],a=y[e+36>>2],r=y[e+32>>2],e=1065353216,n=i;e:{t:{i:{n:switch(i-1|0){case 0:i=0,e=-1082130432,n=0;break e;case 1:i=1065353216;break t;case 2:i=-1082130432;break t;case 3:n=1065353216;break i;case 4:break n;default:break e}n=-1082130432}e=0,r=o,i=0;break e}e=0,r=a,n=0}_[t>>2]=e,y[t+12>>2]=-r,_[t+8>>2]=n,_[t+4>>2]=i}},o[454]=function(e){return Zn(e|=0),0|e},o[455]=function(e){Zn(e|=0),e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[456]=No,o[457]=function(e){return 84},o[458]=function(e,t,i){e|=0,i|=0;var n=0,r=0,a=0,s=0,l=0,c=0;if(_[16+(t|=0)>>2]=_[e+20>>2],_[t+20>>2]=_[e+24>>2],_[t+24>>2]=_[e+28>>2],_[t+28>>2]=_[e+32>>2],_[t>>2]=_[e+4>>2],_[t+4>>2]=_[e+8>>2],_[t+8>>2]=_[e+12>>2],_[t+12>>2]=_[e+16>>2],_[t+32>>2]=_[e+36>>2],_[t+36>>2]=_[e+40>>2],_[t+40>>2]=_[e+44>>2],_[t+44>>2]=_[e+48>>2],_[t+48>>2]=_[e+56>>2],_[t+52>>2]=d[e+60|0],n=_[e+88>>2],_[t+56>>2]=n,n){if(n=0|o[_[_[i>>2]+28>>2]](i,_[e+96>>2]),_[t+64>>2]=n,n){if(s=_[e+88>>2],l=0|o[_[_[i>>2]+16>>2]](i,48,s),r=_[e+96>>2],(0|s)>=1)for(n=_[l+8>>2];r=(a<<6)+r|0,_[n+16>>2]=_[r+16>>2],_[n+20>>2]=_[r+20>>2],_[n+24>>2]=_[r+24>>2],_[n+28>>2]=_[r+28>>2],_[n>>2]=_[r>>2],_[n+4>>2]=_[r+4>>2],_[n+8>>2]=_[r+8>>2],_[n+12>>2]=_[r+12>>2],_[n+32>>2]=_[r+32>>2],_[n+36>>2]=_[r+36>>2],r=_[r+40>>2],_[n+44>>2]=0,_[n+40>>2]=r,n=n+48|0,r=_[e+96>>2],(0|s)!=(0|(a=a+1|0)););o[_[_[i>>2]+20>>2]](i,l,14220,1497453121,r)}}else _[t+64>>2]=0;if(n=_[e+128>>2],_[t+60>>2]=n,n){if(n=0|o[_[_[i>>2]+28>>2]](i,_[e+136>>2]),_[t+68>>2]=n,n){if(s=_[e+128>>2],l=0|o[_[_[i>>2]+16>>2]](i,16,s),c=_[e+136>>2],(0|s)>=1)for(n=_[l+8>>2],a=0;r=(a<<4)+c|0,_[n+12>>2]=_[r+12>>2],f[n+6>>1]=m[r+6>>1],f[n+8>>1]=m[r+8>>1],f[n+10>>1]=m[r+10>>1],f[n>>1]=m[r>>1],f[n+2>>1]=m[r+2>>1],f[n+4>>1]=m[r+4>>1],n=n+16|0,(0|s)!=(0|(a=a+1|0)););o[_[_[i>>2]+20>>2]](i,l,14243,1497453121,c)}}else _[t+68>>2]=0;if(_[t+76>>2]=_[e+144>>2],n=_[e+152>>2],_[t+80>>2]=n,!n)return _[t+72>>2]=0,14287;if(n=t,t=0|o[_[_[i>>2]+28>>2]](i,_[e+160>>2]),_[n+72>>2]=t,t){if(r=_[e+152>>2],a=0|o[_[_[i>>2]+16>>2]](i,20,r),s=_[e+160>>2],(0|r)>=1)for(n=_[a+8>>2],e=0;t=s+(e<<5)|0,f[n+14>>1]=m[t+6>>1],f[n+16>>1]=m[t+8>>1],f[n+18>>1]=m[t+10>>1],f[n+8>>1]=m[t>>1],f[n+10>>1]=m[t+2>>1],f[n+12>>1]=m[t+4>>1],_[n>>2]=_[t+12>>2],_[n+4>>2]=_[t+16>>2],n=n+20|0,(0|r)!=(0|(e=e+1|0)););o[_[_[i>>2]+20>>2]](i,a,14266,1497453121,s)}return 14287},o[459]=function(e,t){t|=0;var i,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0;if(B=i=B+-64|0,_[20+(e|=0)>>2]=_[t+16>>2],_[e+24>>2]=_[t+20>>2],_[e+28>>2]=_[t+24>>2],_[e+32>>2]=_[t+28>>2],_[e+4>>2]=_[t>>2],_[e+8>>2]=_[t+4>>2],_[e+12>>2]=_[t+8>>2],_[e+16>>2]=_[t+12>>2],_[e+36>>2]=_[t+32>>2],_[e+40>>2]=_[t+36>>2],_[e+44>>2]=_[t+40>>2],_[e+48>>2]=_[t+44>>2],_[e+56>>2]=_[t+48>>2],a[e+60|0]=0!=_[t+52>>2],h=_[t+56>>2],_[(r=i)+56>>2]=0,_[r+60>>2]=0,_[r+48>>2]=0,_[r+52>>2]=0,_[r+40>>2]=0,_[r+44>>2]=0,_[r+32>>2]=0,_[r+36>>2]=0,_[r+24>>2]=0,_[r+28>>2]=0,_[r+16>>2]=0,_[r+20>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,(0|(u=_[e+88>>2]))<(0|h)){if(_[e+92>>2]<(0|h)){if(h?(_[5585]=_[5585]+1,p=0|o[_[4567]](h<<6,16),r=_[e+88>>2]):r=u,(0|r)>=1)for(;c=(n=s<<6)+p|0,l=n+_[e+96>>2]|0,n=_[l+4>>2],_[c>>2]=_[l>>2],_[c+4>>2]=n,n=_[l+60>>2],_[c+56>>2]=_[l+56>>2],_[c+60>>2]=n,n=_[l+52>>2],_[c+48>>2]=_[l+48>>2],_[c+52>>2]=n,n=_[l+44>>2],_[c+40>>2]=_[l+40>>2],_[c+44>>2]=n,n=_[l+36>>2],_[c+32>>2]=_[l+32>>2],_[c+36>>2]=n,n=_[l+28>>2],_[c+24>>2]=_[l+24>>2],_[c+28>>2]=n,n=_[l+20>>2],_[c+16>>2]=_[l+16>>2],_[c+20>>2]=n,n=_[l+12>>2],_[c+8>>2]=_[l+8>>2],_[c+12>>2]=n,(0|r)!=(0|(s=s+1|0)););(r=_[e+96>>2])&&(d[e+100|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+96>>2]=0),_[e+96>>2]=p,_[e+92>>2]=h,a[e+100|0]=1}for(;s=_[(r=i)+4>>2],n=_[e+96>>2]+(u<<6)|0,_[n>>2]=_[r>>2],_[n+4>>2]=s,s=_[r+60>>2],_[n+56>>2]=_[r+56>>2],_[n+60>>2]=s,s=_[r+52>>2],_[n+48>>2]=_[r+48>>2],_[n+52>>2]=s,s=_[r+44>>2],_[n+40>>2]=_[r+40>>2],_[n+44>>2]=s,s=_[r+36>>2],_[n+32>>2]=_[r+32>>2],_[n+36>>2]=s,s=_[r+28>>2],_[n+24>>2]=_[r+24>>2],_[n+28>>2]=s,s=_[r+20>>2],_[n+16>>2]=_[r+16>>2],_[n+20>>2]=s,s=_[r+12>>2],_[n+8>>2]=_[r+8>>2],_[n+12>>2]=s,(0|h)!=(0|(u=u+1|0)););}if(_[e+88>>2]=h,(0|h)>=1)for(r=_[e+96>>2],s=_[t+64>>2],u=0;_[16+(n=r+(u<<6)|0)>>2]=_[s+16>>2],_[n+20>>2]=_[s+20>>2],_[n+24>>2]=_[s+24>>2],_[n+28>>2]=_[s+28>>2],_[n>>2]=_[s>>2],_[n+4>>2]=_[s+4>>2],_[n+8>>2]=_[s+8>>2],_[n+12>>2]=_[s+12>>2],_[n+32>>2]=_[s+32>>2],_[n+36>>2]=_[s+36>>2],_[n+40>>2]=_[s+40>>2],s=s+48|0,(0|h)!=(0|(u=u+1|0)););if(l=_[t+60>>2],_[i+8>>2]=0,_[i+12>>2]=0,_[i>>2]=0,_[i+4>>2]=0,(0|(s=_[e+128>>2]))<(0|l)){if(_[e+132>>2]<(0|l)){if(l?(_[5585]=_[5585]+1,p=0|o[_[4567]](l<<4,16),r=_[e+128>>2]):(p=0,r=s),(0|r)>=1)for(u=0;h=(n=u<<4)+p|0,c=n+_[e+136>>2]|0,n=_[c+4>>2],_[h>>2]=_[c>>2],_[h+4>>2]=n,n=_[c+12>>2],_[h+8>>2]=_[c+8>>2],_[h+12>>2]=n,(0|r)!=(0|(u=u+1|0)););(r=_[e+136>>2])&&(d[e+140|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+136>>2]=0),_[e+136>>2]=p,_[e+132>>2]=l,a[e+140|0]=1}for(;r=_[i+4>>2],n=_[e+136>>2]+(s<<4)|0,_[n>>2]=_[i>>2],_[n+4>>2]=r,r=_[i+12>>2],_[n+8>>2]=_[i+8>>2],_[n+12>>2]=r,(0|l)!=(0|(s=s+1|0)););}if(_[e+128>>2]=l,(0|l)>=1)for(r=_[e+136>>2],s=_[t+68>>2],u=0;_[12+(n=r+(u<<4)|0)>>2]=_[s+12>>2],f[n+6>>1]=m[s+6>>1],f[n+8>>1]=m[s+8>>1],f[n+10>>1]=m[s+10>>1],f[n>>1]=m[s>>1],f[n+2>>1]=m[s+2>>1],f[n+4>>1]=m[s+4>>1],s=s+16|0,(0|l)!=(0|(u=u+1|0)););if(_[e+144>>2]=_[t+76>>2],(0|(u=_[e+152>>2]))<(0|(l=_[t+80>>2]))){if(_[e+156>>2]<(0|l)){if(l?(_[5585]=_[5585]+1,p=0|o[_[4567]](l<<5,16),r=_[e+152>>2]):(p=0,r=u),(0|r)>=1)for(s=0;h=(n=s<<5)+p|0,c=n+_[e+160>>2]|0,n=_[c+4>>2],_[h>>2]=_[c>>2],_[h+4>>2]=n,n=_[c+28>>2],_[h+24>>2]=_[c+24>>2],_[h+28>>2]=n,n=_[c+20>>2],_[h+16>>2]=_[c+16>>2],_[h+20>>2]=n,n=_[c+12>>2],_[h+8>>2]=_[c+8>>2],_[h+12>>2]=n,(0|r)!=(0|(s=s+1|0)););(r=_[e+160>>2])&&(d[e+164|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+160>>2]=0),_[e+160>>2]=p,_[e+156>>2]=l,a[e+164|0]=1}for(;r=_[i+4>>2],n=_[e+160>>2]+(u<<5)|0,_[n>>2]=_[i>>2],_[n+4>>2]=r,r=_[i+28>>2],_[n+24>>2]=_[i+24>>2],_[n+28>>2]=r,r=_[i+20>>2],_[n+16>>2]=_[i+16>>2],_[n+20>>2]=r,r=_[i+12>>2],_[n+8>>2]=_[i+8>>2],_[n+12>>2]=r,(0|l)!=(0|(u=u+1|0)););}if(_[e+152>>2]=l,(0|l)>=1)for(r=_[e+160>>2],s=_[t+72>>2],e=0;f[6+(t=r+(e<<5)|0)>>1]=m[s+14>>1],f[t+8>>1]=m[s+16>>1],f[t+10>>1]=m[s+18>>1],f[t>>1]=m[s+8>>1],f[t+2>>1]=m[s+10>>1],f[t+4>>1]=m[s+12>>1],_[t+12>>2]=_[s>>2],_[t+16>>2]=_[s+4>>2],s=s+20|0,(0|l)!=(0|(e=e+1|0)););B=i- -64|0},o[460]=function(e,t){t|=0;var i,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0;if(B=i=B+-64|0,y[20+(e|=0)>>2]=g[t+32>>3],y[e+24>>2]=g[t+40>>3],y[e+28>>2]=g[t+48>>3],y[e+32>>2]=g[t+56>>3],y[e+4>>2]=g[t>>3],y[e+8>>2]=g[t+8>>3],y[e+12>>2]=g[t+16>>3],y[e+16>>2]=g[t+24>>3],y[e+36>>2]=g[t+64>>3],y[e+40>>2]=g[t+72>>3],y[e+44>>2]=g[t+80>>3],y[e+48>>2]=g[t+88>>3],_[e+56>>2]=_[t+96>>2],a[e+60|0]=0!=_[t+100>>2],h=_[t+104>>2],_[(r=i)+56>>2]=0,_[r+60>>2]=0,_[r+48>>2]=0,_[r+52>>2]=0,_[r+40>>2]=0,_[r+44>>2]=0,_[r+32>>2]=0,_[r+36>>2]=0,_[r+24>>2]=0,_[r+28>>2]=0,_[r+16>>2]=0,_[r+20>>2]=0,_[r+8>>2]=0,_[r+12>>2]=0,_[r>>2]=0,_[r+4>>2]=0,(0|(u=_[e+88>>2]))<(0|h)){if(_[e+92>>2]<(0|h)){if(h?(_[5585]=_[5585]+1,p=0|o[_[4567]](h<<6,16),r=_[e+88>>2]):r=u,(0|r)>=1)for(;c=(n=s<<6)+p|0,l=n+_[e+96>>2]|0,n=_[l+4>>2],_[c>>2]=_[l>>2],_[c+4>>2]=n,n=_[l+60>>2],_[c+56>>2]=_[l+56>>2],_[c+60>>2]=n,n=_[l+52>>2],_[c+48>>2]=_[l+48>>2],_[c+52>>2]=n,n=_[l+44>>2],_[c+40>>2]=_[l+40>>2],_[c+44>>2]=n,n=_[l+36>>2],_[c+32>>2]=_[l+32>>2],_[c+36>>2]=n,n=_[l+28>>2],_[c+24>>2]=_[l+24>>2],_[c+28>>2]=n,n=_[l+20>>2],_[c+16>>2]=_[l+16>>2],_[c+20>>2]=n,n=_[l+12>>2],_[c+8>>2]=_[l+8>>2],_[c+12>>2]=n,(0|r)!=(0|(s=s+1|0)););(r=_[e+96>>2])&&(d[e+100|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+96>>2]=0),_[e+96>>2]=p,_[e+92>>2]=h,a[e+100|0]=1}for(;s=_[(r=i)+4>>2],n=_[e+96>>2]+(u<<6)|0,_[n>>2]=_[r>>2],_[n+4>>2]=s,s=_[r+60>>2],_[n+56>>2]=_[r+56>>2],_[n+60>>2]=s,s=_[r+52>>2],_[n+48>>2]=_[r+48>>2],_[n+52>>2]=s,s=_[r+44>>2],_[n+40>>2]=_[r+40>>2],_[n+44>>2]=s,s=_[r+36>>2],_[n+32>>2]=_[r+32>>2],_[n+36>>2]=s,s=_[r+28>>2],_[n+24>>2]=_[r+24>>2],_[n+28>>2]=s,s=_[r+20>>2],_[n+16>>2]=_[r+16>>2],_[n+20>>2]=s,s=_[r+12>>2],_[n+8>>2]=_[r+8>>2],_[n+12>>2]=s,(0|h)!=(0|(u=u+1|0)););}if(_[e+88>>2]=h,(0|h)>=1)for(r=_[e+96>>2],s=_[t+112>>2],u=0;y[16+(n=r+(u<<6)|0)>>2]=g[s+32>>3],y[n+20>>2]=g[s+40>>3],y[n+24>>2]=g[s+48>>3],y[n+28>>2]=g[s+56>>3],y[n>>2]=g[s>>3],y[n+4>>2]=g[s+8>>3],y[n+8>>2]=g[s+16>>3],y[n+12>>2]=g[s+24>>3],_[n+32>>2]=_[s+64>>2],_[n+36>>2]=_[s+68>>2],_[n+40>>2]=_[s+72>>2],s=s+80|0,(0|h)!=(0|(u=u+1|0)););if(l=_[t+108>>2],_[i+8>>2]=0,_[i+12>>2]=0,_[i>>2]=0,_[i+4>>2]=0,(0|(s=_[e+128>>2]))<(0|l)){if(_[e+132>>2]<(0|l)){if(l?(_[5585]=_[5585]+1,p=0|o[_[4567]](l<<4,16),r=_[e+128>>2]):(p=0,r=s),(0|r)>=1)for(u=0;h=(n=u<<4)+p|0,c=n+_[e+136>>2]|0,n=_[c+4>>2],_[h>>2]=_[c>>2],_[h+4>>2]=n,n=_[c+12>>2],_[h+8>>2]=_[c+8>>2],_[h+12>>2]=n,(0|r)!=(0|(u=u+1|0)););(r=_[e+136>>2])&&(d[e+140|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+136>>2]=0),_[e+136>>2]=p,_[e+132>>2]=l,a[e+140|0]=1}for(;r=_[i+4>>2],n=_[e+136>>2]+(s<<4)|0,_[n>>2]=_[i>>2],_[n+4>>2]=r,r=_[i+12>>2],_[n+8>>2]=_[i+8>>2],_[n+12>>2]=r,(0|l)!=(0|(s=s+1|0)););}if(_[e+128>>2]=l,(0|l)>=1)for(r=_[e+136>>2],s=_[t+116>>2],u=0;_[12+(n=r+(u<<4)|0)>>2]=_[s+12>>2],f[n+6>>1]=m[s+6>>1],f[n+8>>1]=m[s+8>>1],f[n+10>>1]=m[s+10>>1],f[n>>1]=m[s>>1],f[n+2>>1]=m[s+2>>1],f[n+4>>1]=m[s+4>>1],s=s+16|0,(0|l)!=(0|(u=u+1|0)););if(_[e+144>>2]=_[t+120>>2],(0|(u=_[e+152>>2]))<(0|(l=_[t+124>>2]))){if(_[e+156>>2]<(0|l)){if(l?(_[5585]=_[5585]+1,p=0|o[_[4567]](l<<5,16),r=_[e+152>>2]):(p=0,r=u),(0|r)>=1)for(s=0;h=(n=s<<5)+p|0,c=n+_[e+160>>2]|0,n=_[c+4>>2],_[h>>2]=_[c>>2],_[h+4>>2]=n,n=_[c+28>>2],_[h+24>>2]=_[c+24>>2],_[h+28>>2]=n,n=_[c+20>>2],_[h+16>>2]=_[c+16>>2],_[h+20>>2]=n,n=_[c+12>>2],_[h+8>>2]=_[c+8>>2],_[h+12>>2]=n,(0|r)!=(0|(s=s+1|0)););(r=_[e+160>>2])&&(d[e+164|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+160>>2]=0),_[e+160>>2]=p,_[e+156>>2]=l,a[e+164|0]=1}for(;r=_[i+4>>2],n=_[e+160>>2]+(u<<5)|0,_[n>>2]=_[i>>2],_[n+4>>2]=r,r=_[i+28>>2],_[n+24>>2]=_[i+24>>2],_[n+28>>2]=r,r=_[i+20>>2],_[n+16>>2]=_[i+16>>2],_[n+20>>2]=r,r=_[i+12>>2],_[n+8>>2]=_[i+8>>2],_[n+12>>2]=r,(0|l)!=(0|(u=u+1|0)););}if(_[e+152>>2]=l,(0|l)>=1)for(r=_[e+160>>2],s=_[t+128>>2],e=0;f[6+(t=r+(e<<5)|0)>>1]=m[s+14>>1],f[t+8>>1]=m[s+16>>1],f[t+10>>1]=m[s+18>>1],f[t>>1]=m[s+8>>1],f[t+2>>1]=m[s+10>>1],f[t+4>>1]=m[s+12>>1],_[t+12>>2]=_[s>>2],_[t+16>>2]=_[s+4>>2],s=s+20|0,(0|l)!=(0|(e=e+1|0)););B=i- -64|0},o[461]=function(e,t,i,n){return 0|No(e|=0,t|=0,i|=0,n|=0)},o[462]=Ii,o[463]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s=b(0),c=0,u=0,h=0,m=b(0),v=0,g=b(0),A=0,x=0,T=0,S=b(0),E=b(0),C=b(0),w=b(0),k=0,O=0,R=0,F=b(0),I=b(0),M=b(0);if(u=_[t+40>>2],c=_[t+24>>2],v=_[t+8>>2],A=(S=y[t+8>>2])<b(0xde0b6b000000000)?v:1566444395,A=(g=y[t+24>>2])<(l(0,A),p())?c:A,l(0,(m=y[t+40>>2])<(l(0,A),p())?u:A),s=p(),h=u,u=g>(l(0,u=S>b(-0xde0b6b000000000)?v:-581039253),p())?c:u,l(0,m>(l(0,u),p())?h:u),S=p(),v=b(S-s)<b(.0020000000949949026),u=_[e+8>>2],F=y[u+12>>2],I=y[u+44>>2],A=65534&(c=(s=b(b((v?b(s+b(-.0010000000474974513)):s)-F)*I))<b(4294967296)&s>=b(0)?~~s>>>0:0),c=_[t+36>>2],x=_[t+20>>2],k=_[t+4>>2],h=(g=y[t+4>>2])<b(0xde0b6b000000000)?k:1566444395,h=(m=y[t+20>>2])<(l(0,h),p())?x:h,l(0,(E=y[t+36>>2])<(l(0,h),p())?c:h),s=p(),h=c,c=m>(l(0,c=g>b(-0xde0b6b000000000)?k:-581039253),p())?x:c,l(0,E>(l(0,c),p())?h:c),g=p(),x=b(g-s)<b(.0020000000949949026),E=y[u+8>>2],M=y[u+40>>2],k=65534&(c=(s=b(b((x?b(s+b(-.0010000000474974513)):s)-E)*M))<b(4294967296)&s>=b(0)?~~s>>>0:0),c=_[t+32>>2],h=_[t+16>>2],O=_[t>>2],T=(m=y[t>>2])<b(0xde0b6b000000000)?O:1566444395,T=(C=y[t+16>>2])<(l(0,T),p())?h:T,l(0,(w=y[t+32>>2])<(l(0,T),p())?c:T),s=p(),t=C>(l(0,t=m>b(-0xde0b6b000000000)?O:-581039253),p())?h:t,l(0,w>(l(0,t),p())?c:t),m=p(),c=b(m-s)<b(.0020000000949949026),C=y[u+4>>2],w=y[u+36>>2],h=65534&(t=(s=b(b((c?b(s+b(-.0010000000474974513)):s)-C)*w))<b(4294967296)&s>=b(0)?~~s>>>0:0),O=1|(t=(s=b(b(b((v?b(S+b(.0010000000474974513)):S)-F)*I)+b(1)))<b(4294967296)&s>=b(0)?~~s>>>0:0),x=1|(t=(s=b(b(b((x?b(g+b(.0010000000474974513)):g)-E)*M)+b(1)))<b(4294967296)&s>=b(0)?~~s>>>0:0),T=1|(t=(s=b(b(b((c?b(m+b(.0010000000474974513)):m)-C)*w)+b(1)))<b(4294967296)&s>=b(0)?~~s>>>0:0),r=i<<21|n,e=_[e+4>>2],(0|(i=_[e+4>>2]))==_[e+8>>2]&&!((0|i)>=(0|(n=i?i<<1:1)))){if(n?(_[5585]=_[5585]+1,u=0|o[_[4567]](n<<4,16),i=_[e+4>>2]):u=0,(0|i)>=1)for(t=0;v=(c=t<<4)+u|0,c=c+_[e+12>>2]|0,R=_[c+4>>2],_[v>>2]=_[c>>2],_[v+4>>2]=R,R=_[c+12>>2],_[v+8>>2]=_[c+8>>2],_[v+12>>2]=R,(0|i)!=(0|(t=t+1|0)););(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=u,a[e+16|0]=1,_[e+8>>2]=n,i=_[e+4>>2]}t=_[e+12>>2]+(i<<4)|0,_[t+12>>2]=r,f[t+6>>1]=T,f[t+4>>1]=A,f[t+2>>1]=k,f[t>>1]=h,f[t+10>>1]=O,f[t+8>>1]=x,_[e+4>>2]=_[e+4>>2]+1},o[464]=Ii,o[465]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s,c,u,h,f=0,m=0,v=0,g=0,A=b(0),x=b(0),T=b(0),S=b(0),E=0,C=0,w=0,k=0,O=0,R=b(0),F=b(0),I=b(0),M=b(0),P=b(0),D=b(0),N=b(0);if(B=r=B-32|0,x=y[t+44>>2],T=y[t+28>>2],D=(A=(A=(S=y[t+12>>2])>b(0)?S:b(0))<T?T:A)<x?x:A,N=x<(A=T<(A=S<b(0)?S:b(0))?T:A)?x:A,s=_[t+40>>2],f=_[t+24>>2],k=_[t+8>>2],m=(R=y[t+8>>2])>b(-0xde0b6b000000000)?k:-581039253,m=(F=y[t+24>>2])>(l(0,m),p())?f:m,c=(I=y[t+40>>2])>(l(0,m),p())?s:m,v=_[t+36>>2],g=_[t+20>>2],O=_[t+4>>2],m=(M=y[t+4>>2])>b(-0xde0b6b000000000)?O:-581039253,m=(P=y[t+20>>2])>(l(0,m),p())?g:m,u=(x=y[t+36>>2])>(l(0,m),p())?v:m,E=_[t+32>>2],w=_[t+16>>2],C=_[t>>2],m=(T=y[t>>2])>b(-0xde0b6b000000000)?C:-581039253,m=(S=y[t+16>>2])>(l(0,m),p())?w:m,h=(A=y[t+32>>2])>(l(0,m),p())?E:m,t=F<(l(0,t=R<b(0xde0b6b000000000)?k:1566444395),p())?f:t,k=I<(l(0,t),p())?s:t,t=P<(l(0,t=M<b(0xde0b6b000000000)?O:1566444395),p())?g:t,O=x<(l(0,t),p())?v:t,t=S<(l(0,t=T<b(0xde0b6b000000000)?C:1566444395),p())?w:t,m=A<(l(0,t),p())?E:t,g=_[e+4>>2],(0|(t=_[g+4>>2]))==_[g+8>>2]&&!((0|t)>=(0|(E=t?t<<1:1)))){if(E?(_[5585]=_[5585]+1,w=0|o[_[4567]](E<<6,16),t=_[g+4>>2]):w=0,(0|t)>=1)for(C=0;f=(e=C<<6)+w|0,v=e+_[g+12>>2]|0,e=_[v+4>>2],_[f>>2]=_[v>>2],_[f+4>>2]=e,e=_[v+60>>2],_[f+56>>2]=_[v+56>>2],_[f+60>>2]=e,e=_[v+52>>2],_[f+48>>2]=_[v+48>>2],_[f+52>>2]=e,e=_[v+44>>2],_[f+40>>2]=_[v+40>>2],_[f+44>>2]=e,e=_[v+36>>2],_[f+32>>2]=_[v+32>>2],_[f+36>>2]=e,e=_[v+28>>2],_[f+24>>2]=_[v+24>>2],_[f+28>>2]=e,e=_[v+20>>2],_[f+16>>2]=_[v+16>>2],_[f+20>>2]=e,e=_[v+12>>2],_[f+8>>2]=_[v+8>>2],_[f+12>>2]=e,(0|(C=C+1|0))!=(0|t););(e=_[g+12>>2])&&(d[g+16|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[g+12>>2]=0),_[g+12>>2]=w,a[g+16|0]=1,_[g+8>>2]=E,t=_[g+4>>2]}t=_[g+12>>2]+(t<<6)|0,_[t+40>>2]=n,_[t+36>>2]=i,_[t+32>>2]=-1,_[t+16>>2]=h,y[t+12>>2]=N,_[t+8>>2]=k,_[t+4>>2]=O,_[t>>2]=m,y[t+28>>2]=D,_[t+24>>2]=c,_[t+20>>2]=u,e=_[r+16>>2],_[t+44>>2]=_[r+12>>2],_[t+48>>2]=e,e=_[r+24>>2],_[t+52>>2]=_[r+20>>2],_[t+56>>2]=e,_[t+60>>2]=_[r+28>>2],_[g+4>>2]=_[g+4>>2]+1,B=r+32|0},o[466]=function(e){return _[(e|=0)>>2]=12572,0|e},o[467]=function(e){_[(e|=0)>>2]=12572,e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[468]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),d=b(0),m=b(0),v=b(0),g=b(0),A=b(0),T=b(0),S=b(0),E=b(0),C=b(0),w=b(0),k=b(0),O=b(0),R=b(0),F=b(0),I=b(0);u=y[t+56>>2],f=y[t+36>>2],d=y[t+40>>2],h=y[t+52>>2],s=y[t+20>>2],l=y[e+116>>2],a=y[e+24>>2],c=y[e+40>>2],m=y[t+24>>2],v=y[e+120>>2],g=y[e+28>>2],A=y[e+44>>2],T=y[t+32>>2],p=y[t+48>>2],S=y[t>>2],E=y[t+4>>2],C=y[t+8>>2],w=y[t+16>>2],r=y[e+112>>2],k=y[e+20>>2],O=y[e+36>>2],R=b(o[_[_[e>>2]+48>>2]](e)),F=b(o[_[_[e>>2]+48>>2]](e)),I=b(o[_[_[e>>2]+48>>2]](e)),_[i+12>>2]=0,r=b(b(r*b(O-k))*b(.5)),l=b(b(l*b(c-a))*b(.5)),a=b(b(r*b(x(w)))+b(l*b(x(s)))),s=b(b(v*b(A-g))*b(.5)),a=b(F+b(a+b(s*b(x(m))))),y[i+4>>2]=h-a,c=b(R+b(b(b(r*b(x(S)))+b(l*b(x(E))))+b(s*b(x(C))))),y[i>>2]=p-c,r=b(I+b(b(b(r*b(x(T)))+b(l*b(x(f))))+b(s*b(x(d))))),y[i+8>>2]=u-r,_[n+12>>2]=0,y[n+8>>2]=u+r,y[n+4>>2]=h+a,y[n>>2]=p+c},o[469]=function(e,t){e|=0;var i=0;i=_[4+(t|=0)>>2],_[e+112>>2]=_[t>>2],_[e+116>>2]=i,i=_[t+12>>2],_[e+120>>2]=_[t+8>>2],_[e+124>>2]=i},o[470]=function(e){return 112+(e|=0)|0},o[471]=Jr,o[472]=function(e){return 12684},o[473]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=0,p=b(0),f=0,m=0,v=b(0),g=0,A=0,T=0,S=0,E=0,C=0,w=0;B=r=B-48|0,p=y[e+44>>2],s=y[e+28>>2],c=b(b(1)/y[e+120>>2]),u=y[e+60>>2],m=((a=p<(a=(a=b(b(c*y[n+8>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,g=x(m)<2147483648?~~m:-2147483648,m=((a=p<(a=(a=b(b(c*y[i+8>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,C=x(m)<2147483648?~~m:-2147483648,p=y[e+40>>2],s=y[e+24>>2],c=b(b(1)/y[e+116>>2]),u=y[e+56>>2],m=((a=p<(a=(a=b(b(c*y[n+4>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,h=x(m)<2147483648?~~m:-2147483648,m=((a=p<(a=(a=b(b(c*y[i+4>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,f=x(m)<2147483648?~~m:-2147483648,p=y[e+36>>2],s=y[e+20>>2],c=b(b(1)/y[e+112>>2]),u=y[e+52>>2],m=((a=p<(a=(a=b(b(c*y[n>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,n=x(m)<2147483648?~~m:-2147483648,m=((a=p<(a=(a=b(b(c*y[i>>2])+u))<s?s:a)?p:a)<b(0)?-.5:.5)+ +a,i=x(m)<2147483648?~~m:-2147483648,A=_[e+72>>2]+-1|0,T=_[e+68>>2]+-1|0;e:if((E=_[e+108>>2])>>>0>2)g=0,f=0;else{switch(g=g+1|0,C=C+-1|0,h=h+1|0,f=f+-1|0,n=n+1|0,i=i+-1|0,E-1|0){default:A=(0|g)<(0|A)?g:A,T=(0|h)<(0|T)?h:T,g=(0|f)>0?f:0,f=(0|C)>0?C:0;break e;case 0:A=(0|g)<(0|A)?g:A,T=(0|n)<(0|T)?n:T,g=(0|i)>0?i:0,f=(0|C)>0?C:0;break e;case 1:}A=(0|h)<(0|A)?h:A,T=(0|n)<(0|T)?n:T,g=(0|i)>0?i:0,f=(0|f)>0?f:0}if((0|f)<(0|A))for(;;){if(C=A,(0|g)>=(0|T))f=f+1|0;else{for(w=1&f,v=b(0|(E=f+1|0)),p=b(0|f),i=g;;){if(!d[e+106|0]|w&&!(d[e+104|0]|(i+f&1?0:d[e+105|0]))){s=b(o[_[_[e>>2]+68>>2]](e,i,f)),n=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+8>>2],s=y[r+4>>2],a=y[r>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+12>>2]=0,a=b(s-a),y[r>>2]=a,l=b(p-b(u*b(.5))),y[r+8>>2]=l,s=b(b(0|i)-b(c*b(.5))),y[r+4>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+12>>2]=0,s=b(s-a),y[r+4>>2]=s,l=b(p-b(u*b(.5))),y[r+8>>2]=l,a=b(b(0|i)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+12>>2]=0,l=b(s-a),y[r+8>>2]=l,s=b(p-b(u*b(.5))),y[r+4>>2]=s,a=b(b(0|i)-b(c*b(.5)))}y[n>>2]=a}y[r>>2]=a*y[e+112>>2],y[r+4>>2]=s*y[e+116>>2],y[r+8>>2]=l*y[e+120>>2],s=b(o[_[_[e>>2]+68>>2]](e,i,E)),n=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+24>>2],s=y[r+20>>2],a=y[r+16>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+28>>2]=0,a=b(s-a),y[r+16>>2]=a,l=b(v-b(u*b(.5))),y[r+24>>2]=l,s=b(b(0|i)-b(c*b(.5))),y[r+20>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+28>>2]=0,s=b(s-a),y[r+20>>2]=s,l=b(v-b(u*b(.5))),y[r+24>>2]=l,a=b(b(0|i)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+28>>2]=0,l=b(s-a),y[r+24>>2]=l,s=b(v-b(u*b(.5))),y[r+20>>2]=s,a=b(b(0|i)-b(c*b(.5)))}y[n+16>>2]=a}y[r+16>>2]=a*y[e+112>>2],y[r+20>>2]=s*y[e+116>>2],y[r+24>>2]=l*y[e+120>>2],n=i+1|0,s=b(o[_[_[e>>2]+68>>2]](e,n,f)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+40>>2],s=y[r+36>>2],a=y[r+32>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+44>>2]=0,a=b(s-a),y[r+32>>2]=a,l=b(p-b(u*b(.5))),y[r+40>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+36>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+44>>2]=0,s=b(s-a),y[r+36>>2]=s,l=b(p-b(u*b(.5))),y[r+40>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+44>>2]=0,l=b(s-a),y[r+40>>2]=l,s=b(p-b(u*b(.5))),y[r+36>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S+32>>2]=a}y[r+32>>2]=a*y[e+112>>2],y[r+36>>2]=s*y[e+116>>2],y[r+40>>2]=l*y[e+120>>2],o[_[_[t>>2]+8>>2]](t,r,i,f),s=b(o[_[_[e>>2]+68>>2]](e,n,f)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+8>>2],s=y[r+4>>2],a=y[r>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+12>>2]=0,a=b(s-a),y[r>>2]=a,l=b(p-b(u*b(.5))),y[r+8>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+4>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+12>>2]=0,s=b(s-a),y[r+4>>2]=s,l=b(p-b(u*b(.5))),y[r+8>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+12>>2]=0,l=b(s-a),y[r+8>>2]=l,s=b(p-b(u*b(.5))),y[r+4>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S>>2]=a}y[r>>2]=a*y[e+112>>2],y[r+4>>2]=s*y[e+116>>2],y[r+8>>2]=l*y[e+120>>2],s=b(o[_[_[e>>2]+68>>2]](e,n,E)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+40>>2],s=y[r+36>>2],a=y[r+32>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+44>>2]=0,a=b(s-a),y[r+32>>2]=a,l=b(v-b(u*b(.5))),y[r+40>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+36>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+44>>2]=0,s=b(s-a),y[r+36>>2]=s,l=b(v-b(u*b(.5))),y[r+40>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+44>>2]=0,l=b(s-a),y[r+40>>2]=l,s=b(v-b(u*b(.5))),y[r+36>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S+32>>2]=a}}else{s=b(o[_[_[e>>2]+68>>2]](e,i,f)),n=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+8>>2],s=y[r+4>>2],a=y[r>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+12>>2]=0,a=b(s-a),y[r>>2]=a,l=b(p-b(u*b(.5))),y[r+8>>2]=l,s=b(b(0|i)-b(c*b(.5))),y[r+4>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+12>>2]=0,s=b(s-a),y[r+4>>2]=s,l=b(p-b(u*b(.5))),y[r+8>>2]=l,a=b(b(0|i)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+12>>2]=0,l=b(s-a),y[r+8>>2]=l,s=b(p-b(u*b(.5))),y[r+4>>2]=s,a=b(b(0|i)-b(c*b(.5)))}y[n>>2]=a}y[r>>2]=a*y[e+112>>2],y[r+4>>2]=s*y[e+116>>2],y[r+8>>2]=l*y[e+120>>2],s=b(o[_[_[e>>2]+68>>2]](e,i,E)),n=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+24>>2],s=y[r+20>>2],a=y[r+16>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+28>>2]=0,a=b(s-a),y[r+16>>2]=a,l=b(v-b(u*b(.5))),y[r+24>>2]=l,s=b(b(0|i)-b(c*b(.5))),y[r+20>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+28>>2]=0,s=b(s-a),y[r+20>>2]=s,l=b(v-b(u*b(.5))),y[r+24>>2]=l,a=b(b(0|i)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+28>>2]=0,l=b(s-a),y[r+24>>2]=l,s=b(v-b(u*b(.5))),y[r+20>>2]=s,a=b(b(0|i)-b(c*b(.5)))}y[n+16>>2]=a}y[r+16>>2]=a*y[e+112>>2],y[r+20>>2]=s*y[e+116>>2],y[r+24>>2]=l*y[e+120>>2],n=i+1|0,s=b(o[_[_[e>>2]+68>>2]](e,n,E)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+40>>2],s=y[r+36>>2],a=y[r+32>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+44>>2]=0,a=b(s-a),y[r+32>>2]=a,l=b(v-b(u*b(.5))),y[r+40>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+36>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+44>>2]=0,s=b(s-a),y[r+36>>2]=s,l=b(v-b(u*b(.5))),y[r+40>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+44>>2]=0,l=b(s-a),y[r+40>>2]=l,s=b(v-b(u*b(.5))),y[r+36>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S+32>>2]=a}y[r+32>>2]=a*y[e+112>>2],y[r+36>>2]=s*y[e+116>>2],y[r+40>>2]=l*y[e+120>>2],o[_[_[t>>2]+8>>2]](t,r,i,f),s=b(o[_[_[e>>2]+68>>2]](e,n,E)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+24>>2],s=y[r+20>>2],a=y[r+16>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+28>>2]=0,a=b(s-a),y[r+16>>2]=a,l=b(v-b(u*b(.5))),y[r+24>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+20>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+28>>2]=0,s=b(s-a),y[r+20>>2]=s,l=b(v-b(u*b(.5))),y[r+24>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+28>>2]=0,l=b(s-a),y[r+24>>2]=l,s=b(v-b(u*b(.5))),y[r+20>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S+16>>2]=a}y[r+16>>2]=a*y[e+112>>2],y[r+20>>2]=s*y[e+116>>2],y[r+24>>2]=l*y[e+120>>2],s=b(o[_[_[e>>2]+68>>2]](e,n,f)),S=r;e:{t:{i:{n:{r:{if((h=_[e+108>>2])>>>0<=2)switch(h-1|0){case 1:break i;case 0:break n;default:break r}l=y[r+40>>2],s=y[r+36>>2],a=y[r+32>>2];break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+52>>2],_[r+44>>2]=0,a=b(s-a),y[r+32>>2]=a,l=b(p-b(u*b(.5))),y[r+40>>2]=l,s=b(b(0|n)-b(c*b(.5))),y[r+36>>2]=s;break e}c=y[e+84>>2],u=y[e+88>>2],a=y[e+56>>2],_[r+44>>2]=0,s=b(s-a),y[r+36>>2]=s,l=b(p-b(u*b(.5))),y[r+40>>2]=l,a=b(b(0|n)-b(c*b(.5)));break t}c=y[e+84>>2],u=y[e+88>>2],a=y[e+60>>2],_[r+44>>2]=0,l=b(s-a),y[r+40>>2]=l,s=b(p-b(u*b(.5))),y[r+36>>2]=s,a=b(b(0|n)-b(c*b(.5)))}y[S+32>>2]=a}}if(y[r+32>>2]=a*y[e+112>>2],y[r+36>>2]=s*y[e+116>>2],y[r+40>>2]=l*y[e+120>>2],o[_[_[t>>2]+8>>2]](t,r,i,f),i=n,(0|n)==(0|T))break}f=E}if((0|C)==(0|f))break}B=r+48|0},o[474]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0);e:if(!((n=_[e+100>>2])>>>0>5)){switch(n-1|0){default:return b(y[_[e+96>>2]+(A(_[e+68>>2],i)+t<<2)>>2]);case 4:return b(b(y[e+92>>2]*b(d[_[e+96>>2]+(A(_[e+68>>2],i)+t|0)|0])));case 0:case 1:case 3:break e;case 2:}r=b(y[e+92>>2]*b(f[_[e+96>>2]+(A(_[e+68>>2],i)+t<<1)>>1]))}return b(r)},o[475]=Pn,o[476]=ra,o[477]=na,o[478]=function(e,t,i){e|=0,t=b(t),i|=0;var n,r=b(0),a=b(0),s=b(0),l=b(0),c=0;B=n=B-16|0,c=_[e+44>>2],_[n+8>>2]=_[e+40>>2],_[n+12>>2]=c,c=_[e+36>>2],_[n>>2]=_[e+32>>2],_[n+4>>2]=c,r=b(o[_[_[e>>2]+48>>2]](e)),l=b(o[_[_[e>>2]+48>>2]](e)),y[n+8>>2]=b(o[_[_[e>>2]+48>>2]](e))+y[n+8>>2],y[n>>2]=r+y[n>>2],y[n+4>>2]=l+y[n+4>>2],r=b(t*b(.5)),l=b(t*b(.25)),t=b(t/b(12));e:{t:if(!((e=_[e+56>>2])>>>0>2)){switch(e-1|0){default:s=r,r=y[n+4>>2],a=b(r*r),r=b(s*a),s=t,t=y[n>>2],s=a=b(b(l*a)+b(s*b(t*b(t*b(4)))));break e;case 0:break t;case 1:}a=r,r=y[n>>2],r=b(r*r),s=b(a*r),a=t,t=y[n+8>>2],a=r=b(b(l*r)+b(a*b(t*b(t*b(4)))));break e}a=r,r=y[n>>2],r=b(r*r),a=b(a*r),s=t,t=y[n+4>>2],s=r=b(b(l*r)+b(s*b(t*b(t*b(4)))))}_[i+12>>2]=0,y[i+8>>2]=s,y[i+4>>2]=a,y[i>>2]=r,B=n+16|0},o[479]=function(e){return 12832},o[480]=oa,o[481]=ir,o[482]=Rr,o[483]=function(e,t,i){return gn(e|=0,t|=0,i|=0),_[t+28>>2]=_[e+32>>2],_[t+32>>2]=_[e+36>>2],_[t+36>>2]=_[e+40>>2],_[t+40>>2]=_[e+44>>2],_[t+12>>2]=_[e+16>>2],_[t+16>>2]=_[e+20>>2],_[t+20>>2]=_[e+24>>2],_[t+24>>2]=_[e+28>>2],i=_[e+48>>2],_[t+48>>2]=0,_[t+44>>2]=i,e=_[e+56>>2],_[t+56>>2]=0,_[t+52>>2]=e,12842},o[484]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),a=b(0),s=b(0),l=0,c=b(0),u=b(0);B=n=B-16|0,o[_[_[t>>2]+68>>2]](n,t,i),l=_[n+12>>2],_[e+8>>2]=_[n+8>>2],_[e+12>>2]=l,l=_[n+4>>2],_[e>>2]=_[n>>2],_[e+4>>2]=l,b(o[_[_[t>>2]+48>>2]](t))!=b(0)&&(a=y[i+4>>2],r=y[i>>2],s=y[i+8>>2],c=b(o[_[_[t>>2]+48>>2]](t)),u=r=(t=b(b(b(r*r)+b(a*a))+b(s*s))<b(14210854715202004e-30))?b(-1):r,s=t?b(-1):s,a=t?b(-1):a,r=b(b(1)/b(w(b(b(s*s)+b(b(r*r)+b(a*a)))))),y[e>>2]=y[e>>2]+b(c*b(u*r)),y[e+4>>2]=y[e+4>>2]+b(c*b(a*r)),y[e+8>>2]=y[e+8>>2]+b(c*b(s*r))),B=n+16|0},o[485]=function(e,t,i){e|=0,t|=0,i|=0;var n=b(0),r=b(0),o=b(0),a=b(0),s=b(0),l=b(0);n=y[t+36>>2],r=y[t+32>>2],o=y[i>>2],a=y[i+8>>2],(s=b(w(b(b(o*o)+b(a*a)))))==b(0)||(r=b(r/s),l=b(a*r),r=b(o*r)),n=y[i+4>>2]<b(0)?b(-n):n,y[e+8>>2]=l,y[e+4>>2]=n,y[e>>2]=r},o[486]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,o=b(0),a=b(0),s=b(0),l=0,c=b(0),u=0,h=b(0);if((0|n)>=1)for(;o=y[e+36>>2],a=y[e+32>>2],c=y[(r=(u=l<<4)+t|0)>>2],s=y[r+8>>2],(h=b(w(b(b(c*c)+b(s*s)))))==b(0)?(s=b(0),o=y[r+4>>2]<b(0)?b(-o):o):(a=b(a/h),s=b(s*a),a=b(c*a),o=y[r+4>>2]<b(0)?b(-o):o),y[8+(r=i+u|0)>>2]=s,y[r+4>>2]=o,y[r>>2]=a,(0|(l=l+1|0))!=(0|n););},o[487]=function(e){e|=0;var t=b(0),i=b(0);return t=y[e+32>>2],i=b(o[_[_[e>>2]+48>>2]](e)),b(o[_[_[e>>2]+48>>2]](e)),b(o[_[_[e>>2]+48>>2]](e)),b(b(t+i))},o[488]=Jo,o[489]=function(e){var t;_[(e|=0)>>2]=13052,(t=_[e+32>>2])&&(d[e+36|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+32>>2]=0),_[e+32>>2]=0,_[e+24>>2]=0,_[e+28>>2]=0,a[e+36|0]=1,e&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[490]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,a=0,s=0,l=0,c=0,u=b(0),h=b(0),p=b(0),f=b(0),v=b(0),x=b(0),T=0,S=0,E=0,C=0;if(B=i=B-80|0,(0|(r=0|o[_[_[e>>2]+28>>2]](e)))>=1)for(u=y[e+12>>2],h=y[e+8>>2],p=y[e+4>>2];;){o[_[_[e>>2]+16>>2]](e,i+76|0,i+52|0,i- -64|0,i+56|0,i+72|0,i+68|0,i+48|0,i+60|0,C);e:if(!((n=_[i+64>>2])>>>0>1))if(n-1){if((n=_[i+60>>2]+-2|0)>>>0>3)break e;switch(n-1|0){default:if(n=0,_[i+48>>2]<1)break e;for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,_[a>>2])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+12>>2]=0,y[i+8>>2]=u*x,y[i+4>>2]=h*v,y[i>>2]=p*f,s=l+A(c,_[a+4>>2])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+28>>2]=0,y[i+24>>2]=u*x,y[i+20>>2]=h*v,y[i+16>>2]=p*f,a=l+A(c,_[a+8>>2])|0,f=y[a>>2],v=y[a+4>>2],x=y[a+8>>2],_[i+44>>2]=0,y[i+40>>2]=u*x,y[i+36>>2]=h*v,y[i+32>>2]=p*f,o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);break e;case 0:if(n=0,_[i+48>>2]<=0)break e;for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,m[a>>1])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+12>>2]=0,y[i+8>>2]=u*x,y[i+4>>2]=h*v,y[i>>2]=p*f,s=l+A(c,m[a+2>>1])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+28>>2]=0,y[i+24>>2]=u*x,y[i+20>>2]=h*v,y[i+16>>2]=p*f,a=l+A(c,m[a+4>>1])|0,f=y[a>>2],v=y[a+4>>2],x=y[a+8>>2],_[i+44>>2]=0,y[i+40>>2]=u*x,y[i+36>>2]=h*v,y[i+32>>2]=p*f,o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);break e;case 1:break e;case 2:}if(n=0,_[i+48>>2]<=0)break e;for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,d[0|a])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+12>>2]=0,y[i+8>>2]=u*x,y[i+4>>2]=h*v,y[i>>2]=p*f,s=l+A(c,d[a+1|0])|0,f=y[s>>2],v=y[s+4>>2],x=y[s+8>>2],_[i+28>>2]=0,y[i+24>>2]=u*x,y[i+20>>2]=h*v,y[i+16>>2]=p*f,a=l+A(c,d[a+2|0])|0,f=y[a>>2],v=y[a+4>>2],x=y[a+8>>2],_[i+44>>2]=0,y[i+40>>2]=u*x,y[i+36>>2]=h*v,y[i+32>>2]=p*f,o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);}else if(!((n=_[i+60>>2]+-2|0)>>>0>3)){t:switch(n-1|0){default:if(n=0,_[i+48>>2]<1)break e;for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,_[a>>2])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+12>>2]=0,y[i+8>>2]=u*b(E),y[i+4>>2]=h*b(S),y[i>>2]=p*b(T),s=l+A(c,_[a+4>>2])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+28>>2]=0,y[i+24>>2]=u*b(E),y[i+20>>2]=h*b(S),y[i+16>>2]=p*b(T),a=l+A(c,_[a+8>>2])|0,T=g[a>>3],S=g[a+8>>3],E=g[a+16>>3],_[i+44>>2]=0,y[i+40>>2]=u*b(E),y[i+36>>2]=h*b(S),y[i+32>>2]=p*b(T),o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);break e;case 0:if(n=0,_[i+48>>2]<=0)break e;for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,m[a>>1])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+12>>2]=0,y[i+8>>2]=u*b(E),y[i+4>>2]=h*b(S),y[i>>2]=p*b(T),s=l+A(c,m[a+2>>1])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+28>>2]=0,y[i+24>>2]=u*b(E),y[i+20>>2]=h*b(S),y[i+16>>2]=p*b(T),a=l+A(c,m[a+4>>1])|0,T=g[a>>3],S=g[a+8>>3],E=g[a+16>>3],_[i+44>>2]=0,y[i+40>>2]=u*b(E),y[i+36>>2]=h*b(S),y[i+32>>2]=p*b(T),o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);break e;case 2:break t;case 1:break e}if(n=0,!(_[i+48>>2]<=0))for(;l=_[i+76>>2],c=_[i+56>>2],a=_[i+72>>2]+A(_[i+68>>2],n)|0,s=l+A(c,d[0|a])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+12>>2]=0,y[i+8>>2]=u*b(E),y[i+4>>2]=h*b(S),y[i>>2]=p*b(T),s=l+A(c,d[a+1|0])|0,T=g[s>>3],S=g[s+8>>3],E=g[s+16>>3],_[i+28>>2]=0,y[i+24>>2]=u*b(E),y[i+20>>2]=h*b(S),y[i+16>>2]=p*b(T),a=l+A(c,d[a+2|0])|0,T=g[a>>3],S=g[a+8>>3],E=g[a+16>>3],_[i+44>>2]=0,y[i+40>>2]=u*b(E),y[i+36>>2]=h*b(S),y[i+32>>2]=p*b(T),o[_[_[t>>2]+8>>2]](t,i,C,n),(0|(n=n+1|0))<_[i+48>>2];);}if(o[_[_[e>>2]+24>>2]](e,C),(0|r)==(0|(C=C+1|0)))break}B=i+80|0},o[491]=Ko,o[492]=Ko,o[493]=hn,o[494]=hn,o[495]=function(e){return _[24+(e|=0)>>2]},o[496]=hn,o[497]=hn,o[498]=function(e){return 1==_[48+(e|=0)>>2]|0},o[499]=function(e,t,i){e|=0,i|=0;var n=0;n=_[4+(t|=0)>>2],_[e+52>>2]=_[t>>2],_[e+56>>2]=n,n=_[t+12>>2],_[e+60>>2]=_[t+8>>2],_[e+64>>2]=n,t=_[i+4>>2],_[e+68>>2]=_[i>>2],_[e+72>>2]=t,t=_[i+12>>2],_[e+76>>2]=_[i+8>>2],_[e+80>>2]=t,_[e+48>>2]=1},o[500]=function(e,t,i){t|=0,i|=0;var n=0;n=_[56+(e|=0)>>2],_[t>>2]=_[e+52>>2],_[t+4>>2]=n,n=_[e+64>>2],_[t+8>>2]=_[e+60>>2],_[t+12>>2]=n,t=_[e+80>>2],_[i+8>>2]=_[e+76>>2],_[i+12>>2]=t,t=_[e+72>>2],_[i>>2]=_[e+68>>2],_[i+4>>2]=t},o[501]=function(e){return 28},o[502]=function(e,t,i){t|=0,i|=0;var n,r=0,s=0,l=0,c=0,u=0,h=0,p=0,v=0,y=0,g=0,b=0,x=0,T=0;if(B=n=B-32|0,r=0|o[_[_[(e|=0)>>2]+28>>2]](e),_[t>>2]=0,_[t+20>>2]=r,r){if(g=0|o[_[_[i>>2]+16>>2]](i,32,r),u=_[g+8>>2],_[t>>2]=o[_[_[i>>2]+28>>2]](i,u),(0|(T=0|o[_[_[e>>2]+28>>2]](e)))>0)for(;;){o[_[_[e>>2]+16>>2]](e,n+28|0,n+4|0,n+16|0,n+8|0,n+24|0,n+20|0,n,n+12|0,y),r=_[n>>2],_[u+24>>2]=r,s=_[n+4>>2],_[u>>2]=0,_[u+4>>2]=0,_[u+28>>2]=s,_[u+8>>2]=0,_[u+12>>2]=0,_[u+16>>2]=0,_[u+20>>2]=0;e:if(!((s=_[n+12>>2]+-2|0)>>>0>3)){switch(s-1|0){default:if(!r)break e;if(s=0|o[_[_[i>>2]+16>>2]](i,4,A(r,3)),h=_[s+8>>2],_[u+8>>2]=o[_[_[i>>2]+28>>2]](i,h),_[n>>2]>=1)for(r=0,p=_[n+24>>2];c=h+A(r,12)|0,l=p+A(_[n+20>>2],r)|0,_[c>>2]=_[l>>2],_[c+4>>2]=_[l+4>>2],_[c+8>>2]=_[l+8>>2],(0|(r=r+1|0))<_[n>>2];);o[_[_[i>>2]+20>>2]](i,s,12862,1497453121,_[s+8>>2]);break e;case 0:if(!r)break e;if(c=0|o[_[_[i>>2]+16>>2]](i,8,r),h=_[c+8>>2],_[u+12>>2]=o[_[_[i>>2]+28>>2]](i,h),r=0,_[n>>2]>=1)for(;s=h+(r<<3)|0,l=_[n+24>>2]+A(_[n+20>>2],r)|0,f[s>>1]=m[l>>1],f[s+2>>1]=m[l+2>>1],l=m[l+4>>1],f[s+6>>1]=0,f[s+4>>1]=l,(0|(r=r+1|0))<_[n>>2];);o[_[_[i>>2]+20>>2]](i,c,12877,1497453121,_[c+8>>2]);break e;case 1:break e;case 2:}if(r){if(c=0|o[_[_[i>>2]+16>>2]](i,4,r),h=_[c+8>>2],_[u+16>>2]=o[_[_[i>>2]+28>>2]](i,h),r=0,_[n>>2]>=1)for(;s=h+(r<<2)|0,l=_[n+24>>2]+A(_[n+20>>2],r)|0,a[0|s]=d[0|l],a[s+1|0]=d[l+1|0],l=d[l+2|0],a[s+3|0]=0,a[s+2|0]=l,(0|(r=r+1|0))<_[n>>2];);o[_[_[i>>2]+20>>2]](i,c,12904,1497453121,_[c+8>>2])}}e:if(!((r=_[n+16>>2])>>>0>1))if(r-1){if(!(r=_[n+4>>2]))break e;if(s=0|o[_[_[i>>2]+16>>2]](i,16,r),h=_[s+8>>2],_[u>>2]=o[_[_[i>>2]+28>>2]](i,h),(0|(p=_[n+4>>2]))>=1)for(r=0,b=_[n+8>>2],x=_[n+28>>2];c=h+(r<<4)|0,l=x+A(r,b)|0,_[c>>2]=_[l>>2],_[c+4>>2]=_[l+4>>2],_[c+8>>2]=_[l+8>>2],(0|(r=r+1|0))<(0|p););o[_[_[i>>2]+20>>2]](i,s,12927,1497453121,_[s+8>>2])}else if(r=_[n+4>>2]){if(l=0|o[_[_[i>>2]+16>>2]](i,32,r),h=_[l+8>>2],_[u+4>>2]=o[_[_[i>>2]+28>>2]](i,h),(0|(p=_[n+4>>2]))>=1)for(r=0,b=_[n+8>>2],x=_[n+28>>2];c=x+A(r,b)|0,v=_[c+4>>2],_[(s=h+(r<<5)|0)>>2]=_[c>>2],_[s+4>>2]=v,v=_[c+12>>2],_[s+8>>2]=_[c+8>>2],_[s+12>>2]=v,v=_[c+20>>2],_[s+16>>2]=_[c+16>>2],_[s+20>>2]=v,(0|(r=r+1|0))<(0|p););o[_[_[i>>2]+20>>2]](i,l,12946,1497453121,_[l+8>>2])}if(o[_[_[e>>2]+24>>2]](e,y),u=u+32|0,(0|T)==(0|(y=y+1|0)))break}o[_[_[i>>2]+20>>2]](i,g,12966,1497453121,_[g+8>>2])}return _[t+24>>2]=0,_[t+4>>2]=_[e+4>>2],_[t+8>>2]=_[e+8>>2],_[t+12>>2]=_[e+12>>2],_[t+16>>2]=_[e+16>>2],B=n+32|0,12981},o[503]=Qo,o[504]=function(e){(e=Qo(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[505]=function(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0,c=0;e:{if(d[165+(e|=0)|0]){if(_[e+92>>2]>=(0|t))break e;if(t?(_[5585]=_[5585]+1,r=0|o[_[4567]](t<<4,16)):r=0,(0|(l=_[e+88>>2]))>=1)for(;s=(n=i<<4)+r|0,n=n+_[e+96>>2]|0,c=_[n+4>>2],_[s>>2]=_[n>>2],_[s+4>>2]=c,c=_[n+12>>2],_[s+8>>2]=_[n+8>>2],_[s+12>>2]=c,(0|l)!=(0|(i=i+1|0)););return(i=_[e+96>>2])&&(d[e+100|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+96>>2]=0),_[e+96>>2]=r,_[e+92>>2]=t,void(a[e+100|0]=1)}if(!(_[e+112>>2]>=(0|t))){t&&(_[5585]=_[5585]+1,n=0|o[_[4567]](t<<2,16)),r=_[e+116>>2];t:{i:{if((0|(s=_[e+108>>2]))>=1)for(;;)if(_[(l=i<<2)+n>>2]=_[r+l>>2],(0|s)==(0|(i=i+1|0)))break i;if(!r)break t}d[e+120|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[e+116>>2]=0}_[e+116>>2]=n,_[e+112>>2]=t,a[e+120|0]=1}}},o[506]=function(e,t){t|=0;var i=0,n=0,r=0,s=0,l=0;e:{if(d[164+(e|=0)|0]){if(_[e+132>>2]>=(0|t))break e;t&&(_[5585]=_[5585]+1,r=0|o[_[4567]](t<<2,16)),i=_[e+136>>2];t:{i:{if((0|(s=_[e+128>>2]))>=1)for(;;)if(_[(l=n<<2)+r>>2]=_[i+l>>2],(0|s)==(0|(n=n+1|0)))break i;if(!i)break t}d[e+140|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+136>>2]=0}return _[e+136>>2]=r,_[e+132>>2]=t,void(a[e+140|0]=1)}if(!(_[e+152>>2]>=(0|t))){t&&(_[5585]=_[5585]+1,r=0|o[_[4567]](t<<1,16)),i=_[e+156>>2];t:{i:{if((0|(s=_[e+148>>2]))>=1)for(;;)if(f[(l=n<<1)+r>>1]=m[i+l>>1],(0|s)==(0|(n=n+1|0)))break i;if(!i)break t}d[e+160|0]&&i&&(_[5586]=_[5586]+1,o[_[4568]](i)),_[e+156>>2]=0}_[e+156>>2]=r,_[e+152>>2]=t,a[e+160|0]=1}}},o[507]=Yo,o[508]=function(e){(e=Yo(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[509]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=0;_[5002]=_[5002]+1;e:{t:{if(n=_[e+24>>2]){if(o[_[_[n>>2]+8>>2]](n,t,i))break t;break e}if(!(_[i+8>>2]&_[t+4>>2])|!(_[t+8>>2]&_[i+4>>2]))break e}r=function(e,t,i){var n,r,s,l=0,c=0,u=0,h=0,p=0,f=0,m=0;l=_[t+12>>2]>_[i+12>>2],f=_[(n=l?t:i)+12>>2],u=_[(r=l?i:t)+12>>2],t=A((t=((t=f<<16|u)<<15^-1)+t|0)>>>10^t,9),s=(t=((t^=t>>>6)<<11^-1)+t|0)>>>16^t,l=_[e+12>>2],m=s&l+-1;t:{if(-1!=(0|(t=_[_[e+40>>2]+(m<<2)>>2])))for(c=_[e+16>>2];;){if(i=(h=t<<4)+c|0,(0|f)==_[_[4+(c+h|0)>>2]+12>>2]&&(0|u)==_[_[i>>2]+12>>2])break t;if(-1==(0|(t=_[_[e+60>>2]+(t<<2)>>2])))break}if(t=l,u=_[e+8>>2],(0|t)==(0|(i=u))&&(i=l,!((0|t)>=(0|(c=t?t<<1:1))))){if(c?(_[5585]=_[5585]+1,i=0|o[_[4567]](c<<4,16),t=_[e+8>>2]):(i=0,t=l),(0|(f=t))>=1)for(t=0;h=(p=t<<4)+i|0,p=p+_[e+16>>2]|0,_[h>>2]=_[p>>2],_[h+4>>2]=_[p+4>>2],_[h+8>>2]=_[p+8>>2],_[h+12>>2]=_[p+12>>2],(0|f)!=(0|(t=t+1|0)););(t=_[e+16>>2])&&(d[e+20|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+16>>2]=0),_[e+16>>2]=i,_[e+12>>2]=c,a[e+20|0]=1,i=_[e+8>>2],t=c}_[e+8>>2]=i+1,c=_[e+16>>2],(i=_[e+68>>2])&&(o[_[_[i>>2]+8>>2]](i,r,n),t=_[e+12>>2]),i=c+(u<<4)|0,(0|l)<(0|t)&&(qo(e),m=_[e+12>>2]+-1&s),l=_[r+12>>2]<_[n+12>>2],_[i>>2]=l?r:n,_[8+(t=c+(u<<4)|0)>>2]=0,_[t+12>>2]=0,_[t+4>>2]=l?n:r,t=_[e+60>>2]+(u<<2)|0,e=_[e+40>>2]+(m<<2)|0,_[t>>2]=_[e>>2],_[e>>2]=u}return i}(e,t,i)}return 0|r},o[510]=function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r=0,a=0,s=0,l=0,c=0,u=0,h=0;_[5001]=_[5001]+1,r=_[t+12>>2]>_[i+12>>2],a=_[(l=r?t:i)+12>>2],s=_[(c=r?i:t)+12>>2],t=A((t=((t=a<<16|s)<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,u=_[e+12>>2]+-1&(t>>>16^t);e:if(-1!=(0|(t=_[_[e+40>>2]+(u<<2)>>2]))){for(r=_[e+16>>2];;){if((0|a)!=_[_[4+(i=r+(t<<4)|0)>>2]+12>>2]||(0|s)!=_[_[i>>2]+12>>2]){if(-1!=(0|(t=_[_[e+60>>2]+(t<<2)>>2])))continue;break e}break}o[_[_[e>>2]+32>>2]](e,i,n),h=_[12+(r+(t<<4)|0)>>2],a=_[e+60>>2];t:{if(s=_[e+40>>2]+(u<<2)|0,(0|(t=_[s>>2]))!=(0|(r=i-_[e+16>>2]>>4))){for(;i=t,(0|r)!=(0|(t=_[a+(t<<2)>>2])););if(t=_[a+(r<<2)>>2],-1!=(0|i)){_[a+(i<<2)>>2]=t;break t}}else t=_[a+(r<<2)>>2];_[s>>2]=t}if(a=_[e+8>>2]+-1|0,(t=_[e+68>>2])&&o[_[_[t>>2]+12>>2]](t,c,l,n),(0|a)==(0|r))return _[e+8>>2]=_[e+8>>2]+-1,0|h;l=_[e+60>>2];t:{if(c=_[e+16>>2],t=_[_[4+(n=c+(a<<4)|0)>>2]+12>>2]<<16|_[_[n>>2]+12>>2],t=A((t=(t<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,s=_[e+12>>2]+-1&(t>>>16^t),u=_[e+40>>2]+(s<<2)|0,(0|a)!=(0|(t=_[u>>2]))){for(;i=t,(0|a)!=(0|(t=_[l+(t<<2)>>2])););if(t=_[l+(a<<2)>>2],-1!=(0|i)){_[l+(i<<2)>>2]=t;break t}}else t=_[l+(a<<2)>>2];_[u>>2]=t}i=_[n+4>>2],_[(t=c+(r<<4)|0)>>2]=_[n>>2],_[t+4>>2]=i,i=_[n+12>>2],_[t+8>>2]=_[n+8>>2],_[t+12>>2]=i,t=_[e+40>>2]+(s<<2)|0,_[_[e+60>>2]+(r<<2)>>2]=_[t>>2],_[t>>2]=r,_[e+8>>2]=_[e+8>>2]+-1}return 0|h},o[511]=function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=t,_[n+8>>2]=13660,o[_[_[e>>2]+48>>2]](e,n+8|0,i),B=n+16|0},o[512]=sr,o[513]=sr,o[514]=function(e){return 4+(e|=0)|0},o[515]=function(e,t,i){e|=0,t|=0,(i|=0)&&(e=_[t+8>>2])&&(o[_[_[e>>2]>>2]](e),o[_[_[i>>2]+60>>2]](i,_[t+8>>2]),_[t+8>>2]=0)},o[516]=Ce,o[517]=function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=i,_[n+8>>2]=e,_[n+4>>2]=t,_[n>>2]=13516,o[_[_[e>>2]+48>>2]](e,n,i),B=n+16|0},o[518]=function(e,t){t|=0,_[24+(e|=0)>>2]=t},o[519]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=0,a=0;if(B=n=B-16|0,o[_[4565]](13332),_[e+8>>2]>=1)for(;a=_[e+16>>2]+(r<<4)|0,o[_[_[t>>2]+8>>2]](t,a)?(o[_[_[e>>2]+12>>2]](e,_[a>>2],_[a+4>>2],i),_[5e3]=_[5e3]+-1):r=r+1|0,(0|r)<_[e+8>>2];);o[_[4566]](),B=n+16|0},o[520]=function(e,t,i){e|=0,t|=0,i|=0;var n,r,o=0,a=0;_[5003]=_[5003]+1,o=_[t+12>>2]>_[i+12>>2],n=_[(o?t:i)+12>>2],r=_[(o?i:t)+12>>2],t=A((t=((t=r|n<<16)<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0;e:{if(!((0|(t=_[e+12>>2]+-1&(t>>>16^t)))>=_[e+32>>2])&&-1!=(0|(t=_[_[e+40>>2]+(t<<2)>>2])))for(i=_[e+16>>2];;){if(o=i+(a=t<<4)|0,_[_[4+(i+a|0)>>2]+12>>2]==(0|n)&&_[_[o>>2]+12>>2]==(0|r))break e;if(-1==(0|(t=_[_[e+60>>2]+(t<<2)>>2])))break}o=0}return 0|o},o[521]=da,o[522]=function(e,t){t|=0,_[68+(e|=0)>>2]=t},o[523]=function(e,t){e|=0,t|=0;var i,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0;if(B=i=B-32|0,_[i+20>>2]=0,_[i+12>>2]=0,_[i+16>>2]=0,a[i+24|0]=1,!(_[e+8>>2]<1)){for(;;){if(s=_[e+16>>2]+(h<<4)|0,(0|n)==(0|r))if((0|r)>=(0|(n=r?r<<1:1)))n=r;else{if(c=0,p=0,n&&(_[5585]=_[5585]+1,p=0|o[_[4567]](n<<4,16),r=_[i+12>>2]),(0|r)>=1)for(;u=(l=c<<4)+p|0,l=l+_[i+20>>2]|0,_[u>>2]=_[l>>2],_[u+4>>2]=_[l+4>>2],_[u+8>>2]=_[l+8>>2],_[u+12>>2]=_[l+12>>2],(0|(c=c+1|0))!=(0|r););(r=_[i+20>>2])&&(d[i+24|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+20>>2]=0),_[i+20>>2]=p,a[i+24|0]=1,_[i+16>>2]=n,n=_[i+12>>2]}if(n=_[i+20>>2]+(n<<4)|0,_[n>>2]=_[s>>2],_[n+4>>2]=_[s+4>>2],_[n+8>>2]=_[s+8>>2],_[n+12>>2]=_[s+12>>2],n=(s=_[i+12>>2])+1|0,_[i+12>>2]=n,!((0|(h=h+1|0))<_[e+8>>2]))break;r=_[i+16>>2]}if(r=0,!((0|s)<0))for(;n=_[i+20>>2]+(r<<4)|0,o[_[_[e>>2]+12>>2]](e,_[n>>2],_[n+4>>2],t),(0|(r=r+1|0))<(0|(n=_[i+12>>2])););}if(_[e+52>>2]>=1){for(t=_[e+60>>2],n=0;_[t+(n<<2)>>2]=-1,(0|(n=n+1|0))<_[e+52>>2];);n=_[i+12>>2]}if((0|n)>=2&&(Jn(i+8|0,i,0,n+-1|0),n=_[i+12>>2]),r=_[i+20>>2],(0|n)>=1)for(n=0;t=(n<<4)+r|0,o[_[_[e>>2]+8>>2]](e,_[t>>2],_[t+4>>2]),r=_[i+20>>2],(0|(n=n+1|0))<_[i+12>>2];);r&&(d[i+24|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[i+20>>2]=0),B=i+32|0},o[524]=Ii,o[525]=function(e,t){t|=0;var i=0;return(0|(i=_[4+(e|=0)>>2]))!=_[t+4>>2]&&(0|i)!=_[t>>2]||(i=_[e+8>>2],o[_[_[i>>2]+32>>2]](i,t,_[e+12>>2])),0},o[526]=Ii,o[527]=function(e,t){return t|=0,(0|(e=_[4+(e|=0)>>2]))==_[t>>2]|(0|e)==_[t+4>>2]},o[528]=jo,o[529]=function(e){Bi(jo(e|=0))},o[530]=function(e,t,i,n,r,a,s,l){return e|=0,t|=0,i|=0,n|=0,r|=0,a|=0,s|=0,l|=0,B=l=B-48|0,_[5585]=_[5585]+1,n=0|o[_[4567]](64,16),_[n>>2]=r,_[n+8>>2]=s,_[n+4>>2]=a,r=_[t+4>>2],_[n+16>>2]=_[t>>2],_[n+20>>2]=r,r=_[t+12>>2],_[n+24>>2]=_[t+8>>2],_[n+28>>2]=r,r=_[i+4>>2],_[n+32>>2]=_[i>>2],_[n+36>>2]=r,r=_[i+12>>2],_[n+40>>2]=_[i+8>>2],_[n+44>>2]=r,_[n+52>>2]=0,_[n+56>>2]=0,r=_[t+12>>2],_[l+24>>2]=_[t+8>>2],_[l+28>>2]=r,r=_[t+4>>2],_[l+16>>2]=_[t>>2],_[l+20>>2]=r,t=_[i+12>>2],_[l+40>>2]=_[i+8>>2],_[l+44>>2]=t,t=_[i+4>>2],_[l+32>>2]=_[i>>2],_[l+36>>2]=t,_[n+60>>2]=_[e+104>>2],t=_[e+148>>2]+1|0,_[e+148>>2]=t,_[n+12>>2]=t,_[n+48>>2]=jn(e+4|0,l+16|0,n),t=_[e+104>>2],_[n+52>>2]=0,t=(t<<2)+e|0,_[n+56>>2]=_[t+84>>2],(i=_[t+84>>2])&&(_[i+52>>2]=n),_[t+84>>2]=n,d[e+153|0]||(_[l+8>>2]=n,_[l>>2]=13952,_[l+4>>2]=e,Dn(_[e+4>>2],l+16|0,l),Dn(_[e+44>>2],l+16|0,l)),B=l+48|0,0|n},o[531]=function(e,t,i){e|=0,i|=0;var n,r=0;Hn(2==_[60+(t|=0)>>2]?e+44|0:e+4|0,_[t+48>>2]),n=_[t+56>>2],r=(r=_[t+52>>2])?r+56|0:84+((_[t+60>>2]<<2)+e|0)|0,_[r>>2]=n,(r=_[t+56>>2])&&(_[r+52>>2]=_[t+52>>2]),r=_[e+96>>2],o[_[_[r>>2]+16>>2]](r,t,i),t&&(_[5586]=_[5586]+1,o[_[4568]](t)),a[e+154|0]=1},o[532]=function(e,t,i,n,r){e|=0,t|=0,i|=0,n|=0,r|=0;var o,s=0,l=0,c=b(0),u=b(0),h=b(0),p=b(0),f=b(0),m=b(0),v=b(0),g=b(0),A=b(0),x=b(0);B=r=B-48|0,s=_[i+12>>2],_[r+24>>2]=_[i+8>>2],_[r+28>>2]=s,s=_[i+4>>2],_[r+16>>2]=_[i>>2],_[r+20>>2]=s,l=_[(s=n)+12>>2],_[r+40>>2]=_[s+8>>2],_[r+44>>2]=l,l=_[s+4>>2],_[r+32>>2]=_[s>>2],_[r+36>>2]=l;e:if(2!=_[t+60>>2])if(l=1,_[e+128>>2]=_[e+128>>2]+1,s=_[t+48>>2],y[s>>2]<=y[r+32>>2]^1|y[s+16>>2]>=y[r+16>>2]^1|y[s+4>>2]<=y[r+36>>2]^1|y[s+20>>2]>=y[r+20>>2]^1||y[s+8>>2]<=y[r+40>>2]^1|y[s+24>>2]>=y[r+24>>2]^1)Sr(e+4|0,s,r+16|0),_[e+132>>2]=_[e+132>>2]+1;else{if(p=y[t+20>>2],f=y[t+24>>2],v=y[i>>2],g=y[i+4>>2],A=y[i+8>>2],m=y[t+16>>2],u=y[t+36>>2],h=y[t+40>>2],x=y[t+32>>2],c=y[e+100>>2],_[r+12>>2]=0,h=b(c*b(b(h-f)*b(.5))),y[r+8>>2]=h,u=b(c*b(b(u-p)*b(.5))),y[r+4>>2]=u,c=b(c*b(b(x-m)*b(.5))),y[r>>2]=c,b(v-m)<b(0)&&(y[r>>2]=-c),b(g-p)<b(0)&&(y[r+4>>2]=-u),b(A-f)<b(0)&&(y[r+8>>2]=-h),l=0,!function(e,t,i,n){var r=0,o=b(0),a=b(0),s=0,l=b(0),c=b(0),u=b(0),h=b(0),p=b(0),f=0;a=y[i>>2];t:{if(y[t>>2]<=a){if(o=y[i+4>>2],!(y[t+4>>2]<=o^1|y[t+8>>2]<=y[i+8>>2]^1|y[t+16>>2]>=y[i+16>>2]^1|y[t+20>>2]>=y[i+20>>2]^1)&&(r=0,y[t+24>>2]>=y[i+24>>2]))break t}else o=y[i+4>>2];o=b(o-b(.05000000074505806)),y[i+4>>2]=o,a=b(a-b(.05000000074505806)),y[i>>2]=a,l=b(y[i+8>>2]-b(.05000000074505806)),y[i+8>>2]=l,c=b(y[i+16>>2]+b(.05000000074505806)),y[i+16>>2]=c,u=b(y[i+20>>2]+b(.05000000074505806)),y[i+20>>2]=u,h=b(y[i+24>>2]+b(.05000000074505806)),y[i+24>>2]=h,r=(p=y[n>>2])>b(0),y[(r<<4)+i>>2]=(r?c:a)+p,r=(a=y[n+4>>2])>b(0),y[(r?20:4)+i>>2]=(r?u:o)+a,n=(o=y[n+8>>2])>b(0),y[(n?24:8)+i>>2]=(n?h:l)+o;i:if(n=Yn(e,t))if((0|(s=_[e+8>>2]))>=0){if(!s)break i;for(;;){if(!(r=_[n+32>>2]))break i;if(n=r,(0|(f=f+1|0))==(0|s))break}}else n=_[e>>2];else n=0;r=_[i+4>>2],_[t>>2]=_[i>>2],_[t+4>>2]=r,r=_[i+28>>2],_[t+24>>2]=_[i+24>>2],_[t+28>>2]=r,r=_[i+20>>2],_[t+16>>2]=_[i+16>>2],_[t+20>>2]=r,r=_[i+12>>2],_[t+8>>2]=_[i+8>>2],_[t+12>>2]=r,Wn(e,n,t),r=1}return r}(e+4|0,s,r+16|0,r))break e;l=1,_[e+132>>2]=_[e+132>>2]+1}else Hn(e+44|0,_[t+48>>2]),_[t+48>>2]=jn(e+4|0,r+16|0,t),l=1;o=_[t+56>>2],s=(s=_[t+52>>2])?s+56|0:84+((_[t+60>>2]<<2)+e|0)|0,_[s>>2]=o,(s=_[t+56>>2])&&(_[s+52>>2]=_[t+52>>2]),s=_[i+4>>2],_[t+16>>2]=_[i>>2],_[t+20>>2]=s,s=_[i+12>>2],_[t+24>>2]=_[i+8>>2],_[t+28>>2]=s,i=_[n+4>>2],_[t+32>>2]=_[n>>2],_[t+36>>2]=i,i=_[n+12>>2],_[t+40>>2]=_[n+8>>2],_[t+44>>2]=i,i=_[e+104>>2],_[t+60>>2]=i,_[t+52>>2]=0,i=(i<<2)+e|0,_[t+56>>2]=_[i+84>>2],(n=_[i+84>>2])&&(_[n+52>>2]=t),_[i+84>>2]=t,l&&(a[e+154|0]=1,d[e+153|0]||(_[r>>2]=13952,_[r+4>>2]=e,$n(e+44|0,_[e+44>>2],_[t+48>>2],r),$n(e+4|0,_[e+4>>2],_[t+48>>2],r))),B=r+48|0},o[533]=function(e,t,i,n){e|=0,i|=0,n|=0,e=_[20+(t|=0)>>2],_[i>>2]=_[t+16>>2],_[i+4>>2]=e,e=_[t+28>>2],_[i+8>>2]=_[t+24>>2],_[i+12>>2]=e,e=_[t+44>>2],_[n+8>>2]=_[t+40>>2],_[n+12>>2]=e,e=_[t+36>>2],_[n>>2]=_[t+32>>2],_[n+4>>2]=e},o[534]=function(e,t,i,n,r,o){var a,s,l;e|=0,t|=0,i|=0,n|=0,r|=0,o|=0,B=i=B-16|0,_[i+8>>2]=14024,_[i+12>>2]=n,a=n+4|0,s=n+20|0,l=_[e+168>>2],Ho(_[e+4>>2],t,a,s,y[n+32>>2],r,o,l,i+8|0),Ho(_[e+44>>2],t,a,s,y[n+32>>2],r,o,l,i+8|0),B=i+16|0},o[535]=function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-48|0,_[r+44>>2]=n,_[r+40>>2]=14096,n=_[t+12>>2],_[r+16>>2]=_[t+8>>2],_[r+20>>2]=n,n=_[t+4>>2],_[r+8>>2]=_[t>>2],_[r+12>>2]=n,t=_[i+12>>2],_[r+32>>2]=_[i+8>>2],_[r+36>>2]=t,t=_[i+4>>2],_[r+24>>2]=_[i>>2],_[r+28>>2]=t,Dn(_[e+4>>2],r+8|0,r+40|0),Dn(_[e+44>>2],r+8|0,r+40|0),B=r+48|0},o[536]=function(e,t){(function(e,t){var i,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=b(0);if(B=i=B-32|0,Po(c=e+4|0,1+((0|A(_[e+112>>2],_[e+16>>2]))/100|0)|0),_[e+124>>2]&&(Po(e+44|0,n=1+((0|A(_[e+108>>2],_[e+56>>2]))/100|0)|0),n=_[e+124>>2]-n|0,_[e+124>>2]=(0|n)>0?n:0),n=(_[e+104>>2]+1|0)%2|0,_[e+104>>2]=n,r=_[84+((n<<2)+e|0)>>2]){for(l=e+44|0;n=_[r+56>>2],u=(s=_[r+52>>2])?s+56|0:84+((_[r+60>>2]<<2)+e|0)|0,_[u>>2]=n,(s=_[r+56>>2])&&(_[s+52>>2]=_[r+52>>2]),_[r+52>>2]=0,_[r+56>>2]=_[e+92>>2],(s=_[e+92>>2])&&(_[s+52>>2]=r),_[e+92>>2]=r,Hn(c,_[r+48>>2]),s=_[r+28>>2],_[i+8>>2]=_[r+24>>2],_[i+12>>2]=s,s=_[r+20>>2],_[i>>2]=_[r+16>>2],_[i+4>>2]=s,s=_[r+44>>2],_[i+24>>2]=_[r+40>>2],_[i+28>>2]=s,s=_[r+36>>2],_[i+16>>2]=_[r+32>>2],_[i+20>>2]=s,s=jn(l,i,r),_[r+60>>2]=2,_[r+48>>2]=s,r=n;);a[e+154|0]=1,_[e+124>>2]=_[e+56>>2]}if(_[i>>2]=13952,_[i+4>>2]=e,d[e+153|0]&&($n(c,_[e+4>>2],_[e+44>>2],i),d[e+153|0]&&$n(c,n=_[c>>2],n,i)),d[e+154|0]&&(n=_[e+96>>2],c=0|o[_[_[n>>2]+28>>2]](n),!((0|(l=_[c+4>>2]))<1))){s=e+144|0;e:{if((0|(u=(0|l)<(0|(n=(0|(r=_[e+120>>2]))>(0|(n=(0|A(_[e+116>>2],l))/100|0))?r:n))?l:n))>=1){for(r=0;n=_[c+12>>2]+((_[e+144>>2]+r|0)%(0|l)<<4)|0,l=_[n>>2],h=_[l+48>>2],s=_[n+4>>2],n=_[s+48>>2],!(y[h>>2]<=y[n+16>>2]^1|y[h+16>>2]>=y[n>>2]^1|y[h+4>>2]<=y[n+20>>2]^1|y[h+20>>2]>=y[n+4>>2]^1)&&y[h+8>>2]<=y[n+24>>2]&&y[h+24>>2]>=y[n+8>>2]||(n=_[e+96>>2],o[_[_[n>>2]+12>>2]](n,l,s,t),r=r+-1|0,u=u+-1|0),l=_[c+4>>2],(0|(r=r+1|0))<(0|u););if(s=e+144|0,t=0,(0|l)<=0)break e}t=(_[s>>2]+u|0)%(0|l)|0}_[s>>2]=t}a[e+154|0]=0,_[e+120>>2]=1,_[e+140>>2]=_[e+140>>2]+1,r=_[e+132>>2],t=e,n=_[e+128>>2],p=b(0),n&&(p=b(b(r>>>0)/b(n>>>0))),y[t+136>>2]=p,_[e+132>>2]=r>>>1,_[e+128>>2]=n>>>1,B=i+32|0})(e|=0,t|=0),function(e,t){var i,n=0,r=0,s=0,l=0,c=0,u=0,h=0,p=0,f=0;if(B=i=B-16|0,n=_[e+96>>2],o[_[_[n>>2]+56>>2]](n)){if(n=_[e+96>>2],r=0|o[_[_[n>>2]+28>>2]](n),(0|(n=_[r+4>>2]))>=2&&(Jn(r,i+8|0,0,n+-1|0),n=_[r+4>>2]),(0|n)>=1){for(;p=_[r+12>>2]+(f<<4)|0,l=_[p+4>>2],u=c,c=_[p>>2],((0|s)!=(0|l)||(0|u)!=(0|c))&&(s=_[c+48>>2],u=_[l+48>>2],!(y[s>>2]<=y[u+16>>2]^1|y[s+16>>2]>=y[u>>2]^1|y[s+4>>2]<=y[u+20>>2]^1|y[s+20>>2]>=y[u+4>>2]^1)&&y[s+8>>2]<=y[u+24>>2]&&y[s+24>>2]>=y[u+8>>2])||(n=_[e+96>>2],o[_[_[n>>2]+32>>2]](n,p,t),_[p>>2]=0,_[p+4>>2]=0,h=h+1|0,n=_[r+4>>2]),s=l,(0|(f=f+1|0))<(0|n););if((0|n)>=2&&(Jn(r,i,0,n+-1|0),n=_[r+4>>2]),l=n-h|0,(0|h)<=-1){if(_[r+8>>2]<(0|l)){if(l?(_[5585]=_[5585]+1,h=0|o[_[4567]](l<<4,16),e=_[r+4>>2]):(h=0,e=n),(0|e)>=1)for(t=0;c=(s=t<<4)+h|0,s=s+_[r+12>>2]|0,_[c>>2]=_[s>>2],_[c+4>>2]=_[s+4>>2],_[c+8>>2]=_[s+8>>2],_[c+12>>2]=_[s+12>>2],(0|e)!=(0|(t=t+1|0)););(e=_[r+12>>2])&&(d[r+16|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[r+12>>2]=0),_[r+12>>2]=h,a[r+16|0]=1,_[r+8>>2]=l}for(;e=_[r+12>>2]+(n<<4)|0,_[e>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,(0|l)!=(0|(n=n+1|0)););}n=l}_[r+4>>2]=n}B=i+16|0}(e,t)},o[537]=Xo,o[538]=Xo,o[539]=function(e,t,i){e|=0,t|=0,i|=0;var n,r=b(0),o=b(0),a=b(0),s=b(0),l=b(0),c=b(0),u=b(0),h=b(0);n=_[e+44>>2];e:if(e=_[e+4>>2]){if(a=y[e>>2],n){if(s=(r=y[e+20>>2])>(o=y[n+20>>2])?r:o,l=(r=y[e+8>>2])<(o=y[n+8>>2])?r:o,c=(r=y[e+4>>2])<(o=y[n+4>>2])?r:o,u=(r=y[e+16>>2])>(o=y[n+16>>2])?r:o,a=a<(r=y[n>>2])?a:r,!((r=y[e+24>>2])>(o=y[n+24>>2]))){r=o;break e}break e}o=y[e+28>>2],r=y[e+24>>2],s=y[e+20>>2],u=y[e+16>>2],h=y[e+12>>2],l=y[e+8>>2],c=y[e+4>>2]}else n&&(o=y[n+28>>2],r=y[n+24>>2],s=y[n+20>>2],u=y[n+16>>2],h=y[n+12>>2],l=y[n+8>>2],c=y[n+4>>2],a=y[n>>2]);y[t+12>>2]=h,y[t+8>>2]=l,y[t+4>>2]=c,y[t>>2]=a,y[i+12>>2]=o,y[i+8>>2]=r,y[i+4>>2]=s,y[i>>2]=u},o[540]=function(e,t){_[16+(e|=0)>>2]==(0-_[e+56>>2]|0)&&(Do(e+4|0),Do(e+44|0),a[e+153|0]=256,a[e+154|0]=1,_[e+124>>2]=0,_[e+104>>2]=0,_[e+116>>2]=10,_[e+120>>2]=1,_[e+108>>2]=1,_[e+112>>2]=0,_[e+84>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,_[e+136>>2]=0,_[e+140>>2]=0,_[e+144>>2]=0,_[e+148>>2]=0)},o[541]=Kn,o[542]=Ii,o[543]=function(e,t,i){e|=0;var n=0;(0|(t|=0))!=(0|(i|=0))&&(n=_[_[e+4>>2]+96>>2],o[_[_[n>>2]+8>>2]](n,_[t+36>>2],_[i+36>>2]),e=_[e+4>>2],_[e+120>>2]=_[e+120>>2]+1)},o[544]=function(e,t){t|=0,o[_[_[(e|=0)>>2]+8>>2]](e,t,_[_[e+8>>2]+48>>2])},o[545]=Ii,o[546]=Uo,o[547]=Ii,o[548]=Uo,o[549]=Zn,o[550]=function(e){(e=Zn(e|=0))&&(_[5586]=_[5586]+1,o[_[4568]](e))},o[551]=ln,o[552]=function(e){e|=0,(e=_[5005])&&Bi(e)},o[553]=function(e){for(e|=0,e=22336;Tr(e=e+-36|0),20032!=(0|e););},o[554]=Kn,o[555]=function(){},o[556]=function(e,t){e|=0,t|=0;var i=0;return(e=0|o[_[4569]](3+(e+t|0)|0))&&(_[(i=3+(e+t|0)&0-t)-4>>2]=e),0|i},o[557]=function(e){(e|=0)&&o[_[4570]](_[e+-4>>2])},o[558]=function(e){return 0|So(e|=0)},o[559]=Ii,o[560]=function(e,t,i,n,r,o){e|=0,t=+t,i|=0,n|=0,r|=0,o|=0;var h,p=0,f=0,m=0,v=0,y=0,g=0,b=0,T=0,S=0,E=0,C=0,w=0,k=0,O=0,R=0,F=0,I=0,M=0,P=0,D=0;if(B=h=B-560|0,_[h+44>>2]=0,u(+t),p=0|s(1),P=1,D=s(0)>>>0>4294967295?0:1,((0|p)<-1?P:(0|p)<=-1&&D)?(u(+(t=-t)),p=0|s(1),R=1,F=14880):2048&r?(R=1,F=14883):F=(R=1&r)?14886:14881,2146435072!=(2146435072&p))if(t=function e(t,i){var n,r,o=0;if(u(+t),o=0|s(1),n=0|s(0),r=o,2047!=(0|(o=o>>>20&2047))){if(!o)return o=i,0==t?i=0:(t=e(0x10000000000000000*t,i),i=_[i>>2]+-64|0),_[o>>2]=i,t;_[i>>2]=o+-1022,l(0,0|n),l(1,-2146435073&r|1071644672),t=+c()}return t}(t,h+44|0),0!=(t+=t)&&(_[h+44>>2]=_[h+44>>2]+-1),w=h+16|0,97!=(0|(I=32|o))){for(p=(0|n)<0,0!=t?(v=_[h+44>>2]+-28|0,_[h+44>>2]=v,t*=268435456):v=_[h+44>>2],b=p?6:n,m=E=(0|v)<0?h+48|0:h+336|0;p=t<4294967296&t>=0?~~t>>>0:0,_[(n=m)>>2]=p,m=m+4|0,0!=(t=1e9*(t-+(p>>>0))););if((0|v)<1)p=m,f=E;else for(f=E;;){if(S=(0|v)<29?v:29,!((p=m+-4|0)>>>0<f>>>0)){for(n=S,T=0;C=p,g=0,M=T,T=_[p>>2],y=31&n,32<=(63&n)>>>0?(v=T<<y,y=0):(v=(1<<y)-1&T>>>32-y,y=T<<y),g=v+g|0,g=(T=M+y|0)>>>0<y>>>0?g+1|0:g,M=C,C=Qa(T=Za(y=T,g,1e9),N,1e9,0),_[M>>2]=y-C,(p=p+-4|0)>>>0>=f>>>0;);(n=T)&&(_[(f=f+-4|0)>>2]=n)}for(;(p=m)>>>0>f>>>0&&!_[(m=p+-4|0)>>2];);if(v=_[h+44>>2]-S|0,_[h+44>>2]=v,m=p,!((0|v)>0))break}if((0|v)<=-1)for(O=1+((b+25|0)/9|0)|0,S=102==(0|I);;){if(T=(0|v)<-9?9:0-v|0,f>>>0>=p>>>0)f=_[f>>2]?f:f+4|0;else{for(C=1e9>>>T,y=-1<<T^-1,v=0,m=f;n=_[m>>2],_[m>>2]=(n>>>T)+v,v=A(C,n&y),(m=m+4|0)>>>0<p>>>0;);f=_[f>>2]?f:f+4|0,v&&(_[p>>2]=v,p=p+4|0)}if(v=T+_[h+44>>2]|0,_[h+44>>2]=v,p=p-(n=S?E:f)>>2>(0|O)?n+(O<<2)|0:p,!((0|v)<0))break}if(m=0,!(f>>>0>=p>>>0||(m=A(E-f>>2,9),v=10,(n=_[f>>2])>>>0<10)))for(;m=m+1|0,n>>>0>=(v=A(v,10))>>>0;);if((0|(n=(b-(102==(0|I)?0:m)|0)-(103==(0|I)&0!=(0|b))|0))<(A(p-E>>2,9)+-9|0)){if(g=(E+((n=(0|(y=n+9216|0))/9|0)<<2)|0)-4092|0,v=10,(0|(n=1+(y-A(n,9)|0)|0))<=8)for(;v=A(v,10),9!=(0|(n=n+1|0)););if(O=g+4|0,((S=(C=_[g>>2])-A(v,y=(C>>>0)/(v>>>0)|0)|0)||(0|O)!=(0|p))&&(k=S>>>0<(n=v>>>1)>>>0?.5:(0|p)==(0|O)&&(0|n)==(0|S)?1:1.5,t=1&y?9007199254740994:9007199254740992,!R|45!=d[0|F]||(k=-k,t=-t),n=C-S|0,_[g>>2]=n,t+k!=t)){if(n=n+v|0,_[g>>2]=n,n>>>0>=1e9)for(;_[g>>2]=0,(g=g+-4|0)>>>0<f>>>0&&(_[(f=f+-4|0)>>2]=0),n=_[g>>2]+1|0,_[g>>2]=n,n>>>0>999999999;);if(m=A(E-f>>2,9),v=10,!((n=_[f>>2])>>>0<10))for(;m=m+1|0,n>>>0>=(v=A(v,10))>>>0;);}p=p>>>0>(n=g+4|0)>>>0?n:p}e:{for(;;){if(S=p,C=0,p>>>0<=f>>>0)break e;if(_[(p=S+-4|0)>>2])break}C=1}if(103==(0|I)){if(b=((n=(0|(p=b||1))>(0|m)&(0|m)>-5)?-1^m:-1)+p|0,o=(n?-1:-2)+o|0,!(y=8&r)){if(p=9,C&&(y=_[S+-4>>2])&&(n=10,p=0,!((y>>>0)%10)))for(;p=p+1|0,!((y>>>0)%((n=A(n,10))>>>0)););n=A(S-E>>2,9)+-9|0,102!=(32|o)?(y=0,b=(0|b)<(0|(n=(0|(n=(n+m|0)-p|0))>0?n:0))?b:n):(y=0,b=(0|b)<(0|(n=(0|(n=n-p|0))>0?n:0))?b:n)}}else y=8&r;if(g=0!=(0|(v=b|y)),n=e,M=i,p=(0|m)>0?m:0,102!=(0|(T=32|o))){if((w-(p=Rn((p=m>>31)+m^p,0,w))|0)<=1)for(;a[0|(p=p+-1|0)]=48,(w-p|0)<2;);a[0|(O=p+-2|0)]=o,a[p+-1|0]=(0|m)<0?45:43,p=w-O|0}if(Ui(n,32,M,g=1+(p+(g+(b+R|0)|0)|0)|0,r),Gi(e,F,R),Ui(e,48,i,g,65536^r),102!=(0|T)){e:if(!((0|b)<0))for(o=C?S:f+4|0,n=h+16|8,E=h+16|9,m=f;;){(0|E)==(0|(p=Rn(_[m>>2],0,E)))&&(a[h+24|0]=48,p=n);t:if((0|f)==(0|m))Gi(e,p,1),p=p+1|0,(0|b)<1&&!y||Gi(e,14915,1);else{if(p>>>0<=h+16>>>0)break t;for(;a[0|(p=p+-1|0)]=48,p>>>0>h+16>>>0;);}if(Gi(e,T=p,(0|b)>(0|(p=E-p|0))?p:b),b=b-p|0,(m=m+4|0)>>>0>=o>>>0)break e;if(!((0|b)>-1))break}Ui(e,48,b+18|0,18,0),Gi(e,O,w-O|0)}else{for(n=h+16|8,m=h+16|9,f=o=f>>>0>E>>>0?E:f;;){p=Rn(_[f>>2],0,m);e:if((0|o)==(0|f))(0|p)==(0|m)&&(a[h+24|0]=48,p=n);else{if(p>>>0<=h+16>>>0)break e;for(;a[0|(p=p+-1|0)]=48,p>>>0>h+16>>>0;);}if(Gi(e,p,m-p|0),!((f=f+4|0)>>>0<=E>>>0))break}v&&Gi(e,14915,1);e:if(!((0|b)<1|f>>>0>=S>>>0))for(;;){if((p=Rn(_[f>>2],0,m))>>>0>h+16>>>0)for(;a[0|(p=p+-1|0)]=48,p>>>0>h+16>>>0;);if(Gi(e,p,(0|b)<9?b:9),b=b+-9|0,(f=f+4|0)>>>0>=S>>>0)break e;if(!((0|b)>0))break}Ui(e,48,b+9|0,9,0)}}else{if(C=(y=32&o)?F+9|0:F,!(n>>>0>11)&&(p=12-n|0)){for(k=8;k*=16,p=p+-1|0;);t=45!=d[0|C]?t+k-k:-(k+(-t-k))}for((0|w)==(0|(p=Rn((m=(p=_[h+44>>2])>>31)^p+m,0,w)))&&(a[h+15|0]=48,p=h+15|0),E=2|R,m=_[h+44>>2],a[0|(S=p+-2|0)]=o+15,a[p+-1|0]=(0|m)<0?45:43,p=8&r,f=h+16|0;o=f,T=y,m=x(t)<2147483648?~~t:-2147483648,a[0|f]=T|d[m+14864|0],1!=((f=o+1|0)-(h+16|0)|0)|(0==(t=16*(t-+(0|m)))?!((0|n)>0|p):0)||(a[o+1|0]=46,f=o+2|0),0!=t;);Ui(o=e,32,p=i,g=(y=!n|((f-h|0)-18|0)>=(0|n)?((w-(h+16|0)|0)-S|0)+f|0:2+((n+w|0)-S|0)|0)+E|0,r),Gi(e,C,E),Ui(e,48,i,g,65536^r),Gi(e,h+16|0,n=f-(h+16|0)|0),Ui(e,48,y-((o=n)+(n=w-S|0)|0)|0,0,0),Gi(e,S,n)}else Ui(e,32,i,g=R+3|0,-65537&r),Gi(e,F,R),n=o>>>5&1,Gi(e,t!=t?n?14907:14911:n?14899:14903,3);return Ui(e,32,i,g,8192^r),B=h+560|0,0|((0|g)<(0|i)?i:g)},o[561]=function(e,t){var i;e|=0,i=t|=0,t=_[t>>2]+15&-16,_[i>>2]=t+16,g[e>>3]=Xa(_[t>>2],_[t+4>>2],_[t+8>>2],_[t+12>>2])},o[562]=function(e){return 0|M(_[60+(e|=0)>>2])},o[563]=function(e,t,i){t|=0,i|=0;var n,r=0,o=0,a=0,s=0,l=0;for(B=n=B-32|0,r=_[28+(e|=0)>>2],_[n+16>>2]=r,a=_[e+20>>2],_[n+28>>2]=i,_[n+24>>2]=t,t=a-r|0,_[n+20>>2]=t,a=t+i|0,s=2,t=n+16|0;;){e:{if(r=0,(o=0|D(_[e+60>>2],0|t,0|s,n+12|0))&&(_[5587]=o,r=-1),r?(_[n+12>>2]=-1,r=-1):r=_[n+12>>2],(0|r)!=(0|a)){if((0|r)>-1)break e;_[e+28>>2]=0,_[e+16>>2]=0,_[e+20>>2]=0,_[e>>2]=32|_[e>>2],e=0,2!=(0|s)&&(e=i-_[t+4>>2]|0)}else t=_[e+44>>2],_[e+28>>2]=t,_[e+20>>2]=t,_[e+16>>2]=t+_[e+48>>2],e=i;return B=n+32|0,0|e}o=r-((l=r>>>0>(o=_[t+4>>2])>>>0)?o:0)|0,_[(t=l?t+8|0:t)>>2]=o+_[t>>2],_[t+4>>2]=_[t+4>>2]-o,a=a-r|0,s=s-l|0}},o[564]=function(e,t,i,n){var r;return t|=0,i|=0,n|=0,B=r=B-16|0,e=0|R(_[60+(e|=0)>>2],0|t,0|i,255&n,r+8|0),t=0,e&&(_[5587]=e,t=-1),t?(_[r+8>>2]=-1,_[r+12>>2]=-1,t=-1,e=-1):(t=_[r+12>>2],e=_[r+8>>2]),B=r+16|0,N=t,0|e},o[565]=Li,o[566]=Ii,o[567]=Kn,o[568]=Kn,o[569]=function(e,t,i){i|=0;var n,r=0;return B=n=B+-64|0,r=1,Vi(e|=0,t|=0,0)||(r=0,t&&(r=0,(t=function(e){var t,i,n=0,r=0;return B=t=B+-64|0,n=_[e>>2],i=_[n+-8>>2],n=_[n+-4>>2],_[t+20>>2]=0,_[t+16>>2]=17956,_[t+12>>2]=e,_[t+8>>2]=18004,Pi(t+24|0,0,39),e=e+i|0,Vi(n,18004,0)?(_[t+56>>2]=1,o[_[_[n>>2]+20>>2]](n,t+8|0,e,e,1,0),r=1==_[t+32>>2]?e:0):(o[_[_[n>>2]+24>>2]](n,t+8|0,e,1,0),(e=_[t+44>>2])>>>0>1||(e-1?r=1==_[t+48>>2]&&1==_[t+36>>2]&&1==_[t+40>>2]?_[t+28>>2]:0:1!=_[t+32>>2]&&_[t+48>>2]|1!=_[t+36>>2]|1!=_[t+40>>2]||(r=_[t+24>>2]))),B=t- -64|0,r}(t))&&(_[n+20>>2]=-1,_[n+16>>2]=e,_[n+12>>2]=0,_[n+8>>2]=t,Pi(n+24|0,0,39),_[n+56>>2]=1,o[_[_[t>>2]+28>>2]](t,n+8|0,_[i>>2],1),r=0,1==_[n+32>>2]&&(_[i>>2]=_[n+24>>2],r=1)))),B=n- -64|0,0|r},o[570]=function(e,t,i,n,r,o){i|=0,n|=0,r|=0,o|=0,Vi(e|=0,_[8+(t|=0)>>2],o)&&Co(t,i,n,r)},o[571]=function(e,t,i,n,r){if(i|=0,n|=0,r|=0,Vi(e|=0,_[8+(t|=0)>>2],r))1==_[t+28>>2]|_[t+4>>2]!=(0|i)||(_[t+28>>2]=n);else e:if(Vi(e,_[t>>2],r)){if(_[t+20>>2]==(0|i)||_[t+16>>2]==(0|i)){if(1!=(0|n))break e;return void(_[t+32>>2]=1)}_[t+20>>2]=i,_[t+32>>2]=n,_[t+40>>2]=_[t+40>>2]+1,1!=_[t+36>>2]|2!=_[t+24>>2]||(a[t+54|0]=1),_[t+44>>2]=4}},o[572]=function(e,t,i,n){i|=0,n|=0,Vi(e|=0,_[8+(t|=0)>>2],0)&&wo(t,i,n)},o[573]=Ii,o[574]=function(e,t,i,n,r,a){i|=0,n|=0,r|=0,a|=0,Vi(e|=0,_[8+(t|=0)>>2],a)?Co(t,i,n,r):(e=_[e+8>>2],o[_[_[e>>2]+20>>2]](e,t,i,n,r,a))},o[575]=function(e,t,i,n,r){if(i|=0,n|=0,r|=0,Vi(e|=0,_[8+(t|=0)>>2],r))1==_[t+28>>2]|_[t+4>>2]!=(0|i)||(_[t+28>>2]=n);else e:{if(Vi(e,_[t>>2],r)){if(_[t+20>>2]==(0|i)||_[t+16>>2]==(0|i)){if(1!=(0|n))break e;return void(_[t+32>>2]=1)}_[t+32>>2]=n;t:if(4!=_[t+44>>2]){if(f[t+52>>1]=0,e=_[e+8>>2],o[_[_[e>>2]+20>>2]](e,t,i,i,1,r),d[t+53|0]){if(_[t+44>>2]=3,!d[t+52|0])break t;break e}_[t+44>>2]=4}if(_[t+20>>2]=i,_[t+40>>2]=_[t+40>>2]+1,1!=_[t+36>>2]|2!=_[t+24>>2])break e;return void(a[t+54|0]=1)}e=_[e+8>>2],o[_[_[e>>2]+24>>2]](e,t,i,n,r)}},o[576]=function(e,t,i,n){i|=0,n|=0,Vi(e|=0,_[8+(t|=0)>>2],0)?wo(t,i,n):(e=_[e+8>>2],o[_[_[e>>2]+28>>2]](e,t,i,n))},o[577]=Ii,o[578]=function(e,t,i,n,r,o){i|=0,n|=0,r|=0,o|=0;var s=0,l=0,c=0,u=0,h=0,p=0;if(Vi(e|=0,_[8+(t|=0)>>2],o))Co(t,i,n,r);else{l=d[t+53|0],s=_[e+12>>2],a[t+53|0]=0,c=d[t+52|0],a[t+52|0]=0,Eo(u=e+16|0,t,i,n,r,o),l|=h=d[t+53|0],c|=p=d[t+52|0];e:if(!((0|s)<2))for(u=u+(s<<3)|0,s=e+24|0;;){if(d[t+54|0])break e;t:{if(p){if(1==_[t+24>>2])break e;if(2&d[e+8|0])break t;break e}if(h&&!(1&a[e+8|0]))break e}if(f[t+52>>1]=0,Eo(s,t,i,n,r,o),l|=h=d[t+53|0],c|=p=d[t+52|0],!((s=s+8|0)>>>0<u>>>0))break}a[t+53|0]=0!=(255&l),a[t+52|0]=0!=(255&c)}},o[579]=function(e,t,i,n,r){i|=0,n|=0,r|=0;var o=0,s=0,l=0,c=0,u=0;if(Vi(e|=0,_[8+(t|=0)>>2],r))1==_[t+28>>2]|_[t+4>>2]!=(0|i)||(_[t+28>>2]=n);else e:{if(Vi(e,_[t>>2],r)){if(_[t+20>>2]==(0|i)||_[t+16>>2]==(0|i)){if(1!=(0|n))break e;return void(_[t+32>>2]=1)}if(_[t+32>>2]=n,4!=_[t+44>>2]){c=(o=e+16|0)+(_[e+12>>2]<<3)|0,u=t;t:{i:{for(;!(o>>>0>=c>>>0||(f[t+52>>1]=0,Eo(o,t,i,i,1,r),d[t+54|0]));){n:if(d[t+53|0]){if(d[t+52|0]){if(n=1,1==_[t+24>>2])break i;if(l=1,s=1,2&d[e+8|0])break n;break i}if(l=1,n=s,!(1&a[e+8|0]))break i}o=o+8|0}if(n=s,e=4,!l)break t}e=3}if(_[u+44>>2]=e,1&n)break e}if(_[t+20>>2]=i,_[t+40>>2]=_[t+40>>2]+1,1!=_[t+36>>2]|2!=_[t+24>>2])break e;return void(a[t+54|0]=1)}if(s=_[e+12>>2],Ar(o=e+16|0,t,i,n,r),!((0|s)<2))if(s=o+(s<<3)|0,o=e+24|0,e=_[e+8>>2],1==_[t+36>>2]||2&e)for(;;){if(d[t+54|0])break e;if(Ar(o,t,i,n,r),!((o=o+8|0)>>>0<s>>>0))break}else{if(!(1&e))for(;;){if(d[t+54|0]|1==_[t+36>>2])break e;if(Ar(o,t,i,n,r),!((o=o+8|0)>>>0<s>>>0))break e}for(;;){if(d[t+54|0]|(1==_[t+24>>2]?1==_[t+36>>2]:0))break e;if(Ar(o,t,i,n,r),!((o=o+8|0)>>>0<s>>>0))break}}}},o[580]=function(e,t,i,n){i|=0,n|=0;var r,o=0;if(Vi(e|=0,_[8+(t|=0)>>2],0))wo(t,i,n);else{o=_[e+12>>2],ni(r=e+16|0,t,i,n);e:if(!((0|o)<2))for(o=(o<<3)+r|0,e=e+24|0;;){if(ni(e,t,i,n),d[t+54|0])break e;if(!((e=e+8|0)>>>0<o>>>0))break}}},{h:function(){var e;_[12+(e=B-16|0)>>2]=18672,_[e+8>>2]=2139095040,_[_[e+12>>2]>>2]=_[e+8>>2],function(){var e;e=ji(8),_[5005]=e,O(0|e,0),_[5009]=0,_[5010]=0,_[5008]=14364,_[5011]=0,_[5012]=0,_[5013]=0,_[5014]=0,_[5015]=0,_[5016]=0,Fi(20032),_[5018]=0,_[5019]=0,_[5017]=14364,_[5020]=0,_[5021]=0,_[5022]=0,_[5023]=0,_[5024]=0,_[5025]=0,Fi(20068),_[5027]=0,_[5028]=0,_[5026]=14364,_[5029]=0,_[5030]=0,_[5031]=0,_[5032]=0,_[5033]=0,_[5034]=0,Fi(20104),_[5036]=0,_[5037]=0,_[5035]=14364,_[5038]=0,_[5039]=0,_[5040]=0,_[5041]=0,_[5042]=0,_[5043]=0,Fi(20140),_[5045]=0,_[5046]=0,_[5044]=14364,_[5047]=0,_[5048]=0,_[5049]=0,_[5050]=0,_[5051]=0,_[5052]=0,Fi(20176),_[5054]=0,_[5055]=0,_[5053]=14364,_[5056]=0,_[5057]=0,_[5058]=0,_[5059]=0,_[5060]=0,_[5061]=0,Fi(20212),_[5063]=0,_[5064]=0,_[5062]=14364,_[5065]=0,_[5066]=0,_[5067]=0,_[5068]=0,_[5069]=0,_[5070]=0,Fi(20248),_[5072]=0,_[5073]=0,_[5071]=14364,_[5074]=0,_[5075]=0,_[5076]=0,_[5077]=0,_[5078]=0,_[5079]=0,Fi(20284),_[5081]=0,_[5082]=0,_[5080]=14364,_[5083]=0,_[5084]=0,_[5085]=0,_[5086]=0,_[5087]=0,_[5088]=0,Fi(20320),_[5090]=0,_[5091]=0,_[5089]=14364,_[5092]=0,_[5093]=0,_[5094]=0,_[5095]=0,_[5096]=0,_[5097]=0,Fi(20356),_[5099]=0,_[5100]=0,_[5098]=14364,_[5101]=0,_[5102]=0,_[5103]=0,_[5104]=0,_[5105]=0,_[5106]=0,Fi(20392),_[5108]=0,_[5109]=0,_[5107]=14364,_[5110]=0,_[5111]=0,_[5112]=0,_[5113]=0,_[5114]=0,_[5115]=0,Fi(20428),_[5117]=0,_[5118]=0,_[5116]=14364,_[5119]=0,_[5120]=0,_[5121]=0,_[5122]=0,_[5123]=0,_[5124]=0,Fi(20464),_[5126]=0,_[5127]=0,_[5125]=14364,_[5128]=0,_[5129]=0,_[5130]=0,_[5131]=0,_[5132]=0,_[5133]=0,Fi(20500),_[5135]=0,_[5136]=0,_[5134]=14364,_[5137]=0,_[5138]=0,_[5139]=0,_[5140]=0,_[5141]=0,_[5142]=0,Fi(20536),_[5144]=0,_[5145]=0,_[5143]=14364,_[5146]=0,_[5147]=0,_[5148]=0,_[5149]=0,_[5150]=0,_[5151]=0,Fi(20572),_[5153]=0,_[5154]=0,_[5152]=14364,_[5155]=0,_[5156]=0,_[5157]=0,_[5158]=0,_[5159]=0,_[5160]=0,Fi(20608),_[5162]=0,_[5163]=0,_[5161]=14364,_[5164]=0,_[5165]=0,_[5166]=0,_[5167]=0,_[5168]=0,_[5169]=0,Fi(20644),_[5171]=0,_[5172]=0,_[5170]=14364,_[5173]=0,_[5174]=0,_[5175]=0,_[5176]=0,_[5177]=0,_[5178]=0,Fi(20680),_[5180]=0,_[5181]=0,_[5179]=14364,_[5182]=0,_[5183]=0,_[5184]=0,_[5185]=0,_[5186]=0,_[5187]=0,Fi(20716),_[5189]=0,_[5190]=0,_[5188]=14364,_[5191]=0,_[5192]=0,_[5193]=0,_[5194]=0,_[5195]=0,_[5196]=0,Fi(20752),_[5198]=0,_[5199]=0,_[5197]=14364,_[5200]=0,_[5201]=0,_[5202]=0,_[5203]=0,_[5204]=0,_[5205]=0,Fi(20788),_[5207]=0,_[5208]=0,_[5206]=14364,_[5209]=0,_[5210]=0,_[5211]=0,_[5212]=0,_[5213]=0,_[5214]=0,Fi(20824),_[5216]=0,_[5217]=0,_[5215]=14364,_[5218]=0,_[5219]=0,_[5220]=0,_[5221]=0,_[5222]=0,_[5223]=0,Fi(20860),_[5225]=0,_[5226]=0,_[5224]=14364,_[5227]=0,_[5228]=0,_[5229]=0,_[5230]=0,_[5231]=0,_[5232]=0,Fi(20896),_[5234]=0,_[5235]=0,_[5233]=14364,_[5236]=0,_[5237]=0,_[5238]=0,_[5239]=0,_[5240]=0,_[5241]=0,Fi(20932),_[5243]=0,_[5244]=0,_[5242]=14364,_[5245]=0,_[5246]=0,_[5247]=0,_[5248]=0,_[5249]=0,_[5250]=0,Fi(20968),_[5252]=0,_[5253]=0,_[5251]=14364,_[5254]=0,_[5255]=0,_[5256]=0,_[5257]=0,_[5258]=0,_[5259]=0,Fi(21004),_[5261]=0,_[5262]=0,_[5260]=14364,_[5263]=0,_[5264]=0,_[5265]=0,_[5266]=0,_[5267]=0,_[5268]=0,Fi(21040),_[5270]=0,_[5271]=0,_[5269]=14364,_[5272]=0,_[5273]=0,_[5274]=0,_[5275]=0,_[5276]=0,_[5277]=0,Fi(21076),_[5279]=0,_[5280]=0,_[5278]=14364,_[5281]=0,_[5282]=0,_[5283]=0,_[5284]=0,_[5285]=0,_[5286]=0,Fi(21112),_[5288]=0,_[5289]=0,_[5287]=14364,_[5290]=0,_[5291]=0,_[5292]=0,_[5293]=0,_[5294]=0,_[5295]=0,Fi(21148),_[5297]=0,_[5298]=0,_[5296]=14364,_[5299]=0,_[5300]=0,_[5301]=0,_[5302]=0,_[5303]=0,_[5304]=0,Fi(21184),_[5306]=0,_[5307]=0,_[5305]=14364,_[5308]=0,_[5309]=0,_[5310]=0,_[5311]=0,_[5312]=0,_[5313]=0,Fi(21220),_[5315]=0,_[5316]=0,_[5314]=14364,_[5317]=0,_[5318]=0,_[5319]=0,_[5320]=0,_[5321]=0,_[5322]=0,Fi(21256),_[5324]=0,_[5325]=0,_[5323]=14364,_[5326]=0,_[5327]=0,_[5328]=0,_[5329]=0,_[5330]=0,_[5331]=0,Fi(21292),_[5333]=0,_[5334]=0,_[5332]=14364,_[5335]=0,_[5336]=0,_[5337]=0,_[5338]=0,_[5339]=0,_[5340]=0,Fi(21328),_[5342]=0,_[5343]=0,_[5341]=14364,_[5344]=0,_[5345]=0,_[5346]=0,_[5347]=0,_[5348]=0,_[5349]=0,Fi(21364),_[5351]=0,_[5352]=0,_[5350]=14364,_[5353]=0,_[5354]=0,_[5355]=0,_[5356]=0,_[5357]=0,_[5358]=0,Fi(21400),_[5360]=0,_[5361]=0,_[5359]=14364,_[5362]=0,_[5363]=0,_[5364]=0,_[5365]=0,_[5366]=0,_[5367]=0,Fi(21436),_[5369]=0,_[5370]=0,_[5368]=14364,_[5371]=0,_[5372]=0,_[5373]=0,_[5374]=0,_[5375]=0,_[5376]=0,Fi(21472),_[5378]=0,_[5379]=0,_[5377]=14364,_[5380]=0,_[5381]=0,_[5382]=0,_[5383]=0,_[5384]=0,_[5385]=0,Fi(21508),_[5387]=0,_[5388]=0,_[5386]=14364,_[5389]=0,_[5390]=0,_[5391]=0,_[5392]=0,_[5393]=0,_[5394]=0,Fi(21544),_[5396]=0,_[5397]=0,_[5395]=14364,_[5398]=0,_[5399]=0,_[5400]=0,_[5401]=0,_[5402]=0,_[5403]=0,Fi(21580),_[5405]=0,_[5406]=0,_[5404]=14364,_[5407]=0,_[5408]=0,_[5409]=0,_[5410]=0,_[5411]=0,_[5412]=0,Fi(21616),_[5414]=0,_[5415]=0,_[5413]=14364,_[5416]=0,_[5417]=0,_[5418]=0,_[5419]=0,_[5420]=0,_[5421]=0,Fi(21652),_[5423]=0,_[5424]=0,_[5422]=14364,_[5425]=0,_[5426]=0,_[5427]=0,_[5428]=0,_[5429]=0,_[5430]=0,Fi(21688),_[5432]=0,_[5433]=0,_[5431]=14364,_[5434]=0,_[5435]=0,_[5436]=0,_[5437]=0,_[5438]=0,_[5439]=0,Fi(21724),_[5441]=0,_[5442]=0,_[5440]=14364,_[5443]=0,_[5444]=0,_[5445]=0,_[5446]=0,_[5447]=0,_[5448]=0,Fi(21760),_[5450]=0,_[5451]=0,_[5449]=14364,_[5452]=0,_[5453]=0,_[5454]=0,_[5455]=0,_[5456]=0,_[5457]=0,Fi(21796),_[5459]=0,_[5460]=0,_[5458]=14364,_[5461]=0,_[5462]=0,_[5463]=0,_[5464]=0,_[5465]=0,_[5466]=0,Fi(21832),_[5468]=0,_[5469]=0,_[5467]=14364,_[5470]=0,_[5471]=0,_[5472]=0,_[5473]=0,_[5474]=0,_[5475]=0,Fi(21868),_[5477]=0,_[5478]=0,_[5476]=14364,_[5479]=0,_[5480]=0,_[5481]=0,_[5482]=0,_[5483]=0,_[5484]=0,Fi(21904),_[5486]=0,_[5487]=0,_[5485]=14364,_[5488]=0,_[5489]=0,_[5490]=0,_[5491]=0,_[5492]=0,_[5493]=0,Fi(21940),_[5495]=0,_[5496]=0,_[5494]=14364,_[5497]=0,_[5498]=0,_[5499]=0,_[5500]=0,_[5501]=0,_[5502]=0,Fi(21976),_[5504]=0,_[5505]=0,_[5503]=14364,_[5506]=0,_[5507]=0,_[5508]=0,_[5509]=0,_[5510]=0,_[5511]=0,Fi(22012),_[5513]=0,_[5514]=0,_[5512]=14364,_[5515]=0,_[5516]=0,_[5517]=0,_[5518]=0,_[5519]=0,_[5520]=0,Fi(22048),_[5522]=0,_[5523]=0,_[5521]=14364,_[5524]=0,_[5525]=0,_[5526]=0,_[5527]=0,_[5528]=0,_[5529]=0,Fi(22084),_[5531]=0,_[5532]=0,_[5530]=14364,_[5533]=0,_[5534]=0,_[5535]=0,_[5536]=0,_[5537]=0,_[5538]=0,Fi(22120),_[5540]=0,_[5541]=0,_[5539]=14364,_[5542]=0,_[5543]=0,_[5544]=0,_[5545]=0,_[5546]=0,_[5547]=0,Fi(22156),_[5549]=0,_[5550]=0,_[5548]=14364,_[5551]=0,_[5552]=0,_[5553]=0,_[5554]=0,_[5555]=0,_[5556]=0,Fi(22192),_[5558]=0,_[5559]=0,_[5557]=14364,_[5560]=0,_[5561]=0,_[5562]=0,_[5563]=0,_[5564]=0,_[5565]=0,Fi(22228),_[5567]=0,_[5568]=0,_[5566]=14364,_[5569]=0,_[5570]=0,_[5571]=0,_[5572]=0,_[5573]=0,_[5574]=0,Fi(22264),_[5576]=0,_[5577]=0,_[5575]=14364,_[5578]=0,_[5579]=0,_[5580]=0,_[5581]=0,_[5582]=0,_[5583]=0,Fi(22300)}()},i:Ki,j:Qi,k:qi,l:pn,m:cn,n:Yi,o:Wi,p:Zi,q:Mi,r:To,s:xo,t:ei,u:$t,v:bo,w:Ao,x:Mi,y:Ki,z:Qi,A:qi,B:Yi,C:Wi,D:Zi,E:Mi,F:Kt,G:Mi,H:function(){var e,t;return B=e=B-16|0,Ue(t=Ni(324)),B=e+16|0,0|t},I:Wt,J:Ht,K:Vt,L:Xt,M:Nt,N:Pt,O:Mt,P:It,Q:Rt,R:kt,S:Ct,T:Tt,U:ft,V:ut,W:uo,X:co,Y:tt,Z:$e,_:fr,$:je,aa:He,ba:Ge,ca:Le,da:Mi,ea:fr,fa:Ne,ga:Mi,ha:hr,ia:Ie,ja:Mi,ka:Nn,la:Ki,ma:Qi,na:qi,oa:pn,pa:cn,qa:Yi,ra:Wi,sa:Zi,ta:Mi,ua:Ee,va:To,wa:xo,xa:ei,ya:$t,za:bo,Aa:Ao,Ba:Mi,Ca:hr,Da:Mi,Ea:to,Fa:eo,Ga:$r,Ha:Kr,Ia:Zr,Ja:Qr,Ka:Yr,La:Hr,Ma:Vr,Na:ar,Oa:or,Pa:Mi,Qa:Ki,Ra:Qi,Sa:qi,Ta:Yi,Ua:Wi,Va:Zi,Wa:Mi,Xa:Ur,Ya:zr,Za:Br,_a:Ea,$a:Pr,ab:Mr,bb:Ir,cb:va,db:rn,eb:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,An(_[i+12>>2],_[i+8>>2]),B=i+16|0},fb:rn,gb:In,hb:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,B=i+16|0,b(y[_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<2)>>2])},ib:vn,jb:Fn,kb:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,a[i+11|0]=t,_a(e=Ni(80),_[i+12>>2],1&a[i+11|0],1),B=i+16|0,0|e},lb:function(e,t,i){var n;return e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,a[n+11|0]=t,a[n+10|0]=i,_a(e=Ni(80),_[n+12>>2],1&a[n+11|0],1&a[n+10|0]),B=n+16|0,0|e},mb:Ki,nb:Qi,ob:qi,pb:Yi,qb:Wi,rb:Zi,sb:Mi,tb:function(){var e,t;return B=e=B-16|0,function(e){var t,i=0,n=0,r=0,s=0,l=0;B=t=B-32|0,_[e>>2]=13824,_[e+20>>2]=0,_[e+12>>2]=-1,_[e+16>>2]=0,_[e+4>>2]=0,_[e+8>>2]=0,_[e+36>>2]=0,a[e+40|0]=1,_[e+28>>2]=0,_[e+32>>2]=0,_[e+60>>2]=0,_[e+52>>2]=-1,_[e+56>>2]=0,_[e+44>>2]=0,_[e+48>>2]=0,_[e+76>>2]=0,a[e+80|0]=1,_[e+68>>2]=0,_[e+72>>2]=0,_[e+168>>2]=0,r=1,a[e+172|0]=1,_[e+160>>2]=0,_[e+164>>2]=0,a[e+153|0]=256,a[e+154|0]=1,a[e+152|0]=1,_[e+124>>2]=0,_[e+100>>2]=0,_[e+104>>2]=0,_[e+136>>2]=0,_[e+128>>2]=0,_[e+132>>2]=0,_[e+116>>2]=10,_[e+120>>2]=1,_[e+108>>2]=1,_[e+112>>2]=0,_[5585]=_[5585]+1,function(e){var t,i,n=0,r=0,s=0;if(_[e>>2]=13264,_[e+24>>2]=0,_[e+8>>2]=0,_[e+12>>2]=0,_[e+68>>2]=0,a[e+20|0]=1,_[e+16>>2]=0,a[e+44|0]=1,_[e+40>>2]=0,a[e- -64|0]=1,_[e+32>>2]=0,_[e+36>>2]=0,_[e+60>>2]=0,_[e+52>>2]=0,_[e+56>>2]=0,_[5585]=_[5585]+1,t=0|o[_[4567]](32,16),(0|(i=_[e+8>>2]))>=1)for(;n=(r=s<<4)+t|0,r=r+_[e+16>>2]|0,_[n>>2]=_[r>>2],_[n+4>>2]=_[r+4>>2],_[n+8>>2]=_[r+8>>2],_[n+12>>2]=_[r+12>>2],(0|i)!=(0|(s=s+1|0)););(n=_[e+16>>2])&&(d[e+20|0]&&n&&(_[5586]=_[5586]+1,o[_[4568]](n)),_[e+16>>2]=0),_[e+16>>2]=t,a[e+20|0]=1,_[e+12>>2]=2,qo(e)}(i=0|o[_[4567]](72,16)),n=_[e+160>>2],_[e+148>>2]=0,_[e+96>>2]=i,_[e+140>>2]=0,_[e+144>>2]=0,_[e+84>>2]=0,_[e+88>>2]=0,_[e+92>>2]=0,_[t+20>>2]=0,a[t+24|0]=1,_[t+12>>2]=0,_[t+16>>2]=0;e:{if((0|n)>=2)for(;;)if(i=_[e+168>>2]+A(r,20)|0,l=i,(s=_[i+12>>2])&&(d[i+16|0]&&s&&(_[5586]=_[5586]+1,o[_[4568]](s)),_[l+12>>2]=0),a[i+16|0]=1,_[l+12>>2]=0,_[i+4>>2]=0,_[i+8>>2]=0,(0|(r=r+1|0))==(0|n))break e;if(1!=(0|n))for(function(e){var t=0,i=0,n=0,r=0,s=0,l=0;if(_[e+8>>2]<1){if(_[5585]=_[5585]+1,s=0|o[_[4567]](20,16),!((0|(i=_[e+4>>2]))<1)){for(;Wo((n=A(t,20))+s|0,n+_[e+12>>2]|0),(0|i)!=(0|(t=t+1|0)););if(!((0|(l=_[e+4>>2]))<1))for(i=0;t=_[e+12>>2]+A(i,20)|0,n=t,(r=_[t+12>>2])&&(d[t+16|0]&&r&&(_[5586]=_[5586]+1,o[_[4568]](r)),_[n+12>>2]=0),a[t+16|0]=1,_[n+12>>2]=0,_[t+4>>2]=0,_[t+8>>2]=0,(0|l)!=(0|(i=i+1|0)););}(t=_[e+12>>2])&&(d[e+16|0]&&t&&(_[5586]=_[5586]+1,o[_[4568]](t)),_[e+12>>2]=0),_[e+12>>2]=s,a[e+16|0]=1,_[e+8>>2]=1}}(e+156|0);i=n,Wo(_[e+168>>2]+A(i,20)|0,t+8|0),n=i+1|0,i;);}_[e+160>>2]=1,(e=_[t+20>>2])&&(d[t+24|0]&&e&&(_[5586]=_[5586]+1,o[_[4568]](e)),_[t+20>>2]=0),B=t+32|0}(t=ji(176)),B=e+16|0,0|t},ub:hr,vb:Mi,wb:In,xb:Vo,yb:vn,zb:Fn,Ab:In,Bb:Vo,Cb:vn,Db:Fn,Eb:ua,Fb:Go,Gb:ar,Hb:or,Ib:Qn,Jb:Mo,Kb:Io,Lb:Qn,Mb:function(e,t,i){var n,r;return e=b(e),t|=0,i|=0,B=n=B+-64|0,y[n+60>>2]=e,_[n+56>>2]=t,_[n+52>>2]=i,t=ji(144),e=y[n+60>>2],i=_[n+56>>2],r=_[n+52>>2],y[n+28>>2]=0,y[n+24>>2]=0,y[n+20>>2]=0,zi(n+32|0,n+28|0,n+24|0,n+20|0),ui(t,e,i,r,n+32|0),B=n- -64|0,0|t},Nb:function(e,t,i,n){var r;return e=b(e),t|=0,i|=0,n|=0,B=r=B-32|0,y[r+28>>2]=e,_[r+24>>2]=t,_[r+20>>2]=i,_[r+16>>2]=n,ui(t=ji(144),y[r+28>>2],_[r+24>>2],_[r+20>>2],_[r+16>>2]),B=r+32|0,0|t},Ob:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+92>>2])},Pb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+92>>2]=y[i+8>>2]},Qb:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+96>>2])},Rb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+96>>2]=y[i+8>>2]},Sb:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+100>>2])},Tb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+100>>2]=y[i+8>>2]},Ub:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+104>>2])},Vb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+104>>2]=y[i+8>>2]},Wb:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+112>>2])},Xb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+112>>2]=y[i+8>>2]},Yb:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+116>>2])},Zb:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+116>>2]=y[i+8>>2]},_b:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+120>>2])},$b:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+120>>2]=y[i+8>>2]},ac:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,1&a[_[t+12>>2]+124|0]},bc:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,a[i+11|0]=t,a[_[i+12>>2]+124|0]=1&a[i+11|0]},cc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+128>>2])},dc:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+128>>2]=y[i+8>>2]},ec:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+132>>2])},fc:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+132>>2]=y[i+8>>2]},gc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+136>>2])},hc:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+136>>2]=y[i+8>>2]},ic:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,b(y[_[t+12>>2]+140>>2])},jc:function(e,t){var i;e|=0,t=b(t),_[12+(i=B-16|0)>>2]=e,y[i+8>>2]=t,y[_[i+12>>2]+140>>2]=y[i+8>>2]},kc:rn,lc:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,+y[_[e+12>>2]+132>>2]},mc:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,+y[_[e+12>>2]+80>>2]},nc:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+200>>2]},oc:co,pc:_o,qc:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t>>2]=_[e>>2],_[t+4>>2]=i,i=_[e+12>>2],_[t+8>>2]=_[e+8>>2],_[t+12>>2]=i},rc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+16|0},sc:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+16>>2]=_[e>>2],_[t+20>>2]=i,i=_[e+12>>2],_[t+24>>2]=_[e+8>>2],_[t+28>>2]=i},tc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+48|0},uc:ti,vc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+32|0},wc:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+32>>2]=_[e>>2],_[t+36>>2]=i,i=_[e+12>>2],_[t+40>>2]=_[e+8>>2],_[t+44>>2]=i},xc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]- -64|0},yc:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+64>>2]=_[e>>2],_[t+68>>2]=i,i=_[e+12>>2],_[t+72>>2]=_[e+8>>2],_[t+76>>2]=i},zc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,+y[_[t+12>>2]+80>>2]},Ac:function(e,t){var i;e|=0,t=+t,_[12+(i=B-16|0)>>2]=e,g[i>>3]=t,y[_[i+12>>2]+80>>2]=g[i>>3]},Bc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+108>>2]},Cc:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+108>>2]=_[i+8>>2]},Dc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+112>>2]},Ec:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+112>>2]=_[i+8>>2]},Fc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+116>>2]},Gc:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+116>>2]=_[i+8>>2]},Hc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+120>>2]},Ic:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+120>>2]=_[i+8>>2]},Jc:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+124>>2]},Kc:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+124>>2]=_[i+8>>2]},Lc:rn,Mc:function(){var e,t;return B=e=B-16|0,qe(t=Ni(236)),B=e+16|0,0|t},Nc:Mi,Oc:function(e,t,i,n){var r;return e|=0,t|=0,i|=0,n|=0,B=r=B-32|0,_[r+28>>2]=e,_[r+24>>2]=t,_[r+20>>2]=i,_[r+16>>2]=n,j(e=Ni(344),_[r+28>>2],_[r+24>>2],_[r+20>>2]),B=r+32|0,0|e},Pc:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+72>>2]](e,_[i+8>>2]),B=i+16|0},Qc:function(e){var t;return e|=0,B=t=B-32|0,_[t+28>>2]=e,!(0==d[18692])|1&a[18692]||(_[12+(B-16|0)>>2]=18676,_[4673]=0,_[4673]=1|_[4673]),e=_[t+28>>2],o[_[_[e>>2]+76>>2]](t,e),e=_[t+4>>2],_[4669]=_[t>>2],_[4670]=e,e=_[t+12>>2],_[4671]=_[t+8>>2],_[4672]=e,B=t+32|0,18676},Rc:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+84>>2]](e,_[i+8>>2]),B=i+16|0},Sc:function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,f[r+6>>1]=i,f[r+4>>1]=n,e=_[r+12>>2],o[_[_[e>>2]+88>>2]](e,_[r+8>>2],f[r+6>>1],f[r+4>>1]),B=r+16|0},Tc:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+92>>2]](e,_[i+8>>2]),B=i+16|0},Uc:function(e,t){var i;return e|=0,t=b(t),B=i=B-16|0,_[i+12>>2]=e,y[i+8>>2]=t,e=_[i+12>>2],e=0|o[_[_[e>>2]+52>>2]](e,y[i+8>>2],1,b(.01666666753590107)),B=i+16|0,0|e},Vc:function(e,t,i){var n;return e|=0,t=b(t),i|=0,B=n=B-16|0,_[n+12>>2]=e,y[n+8>>2]=t,_[n+4>>2]=i,e=_[n+12>>2],e=0|o[_[_[e>>2]+52>>2]](e,y[n+8>>2],_[n+4>>2],b(.01666666753590107)),B=n+16|0,0|e},Wc:function(e,t,i,n){var r;return e|=0,t=b(t),i|=0,n=b(n),B=r=B-16|0,_[r+12>>2]=e,y[r+8>>2]=t,_[r+4>>2]=i,y[r>>2]=n,e=_[r+12>>2],e=0|o[_[_[e>>2]+52>>2]](e,y[r+8>>2],_[r+4>>2],y[r>>2]),B=r+16|0,0|e},Xc:To,Yc:xo,Zc:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+36>>2]](e,_[i+8>>2],2,-3),B=i+16|0},_c:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,f[n+6>>1]=i,e=_[n+12>>2],o[_[_[e>>2]+36>>2]](e,_[n+8>>2],f[n+6>>1],-3),B=n+16|0},$c:bo,ad:Ao,bd:Ee,cd:Mi,dd:rn,ed:function(e,t,i,n,r,o,s,l,c){var u;return e|=0,t|=0,i|=0,n=b(n),r=b(r),o=b(o),s|=0,l|=0,c|=0,B=u=B-48|0,_[u+44>>2]=e,_[u+40>>2]=t,_[u+36>>2]=i,y[u+32>>2]=n,y[u+28>>2]=r,y[u+24>>2]=o,_[u+20>>2]=s,_[u+16>>2]=l,a[u+15|0]=c,yi(e=Ni(128),_[u+44>>2],_[u+40>>2],_[u+36>>2],y[u+32>>2],y[u+28>>2],y[u+24>>2],_[u+20>>2],_[u+16>>2],1&a[u+15|0]),B=u+48|0,0|e},fd:pn,gd:cn,hd:Ki,id:Qi,jd:qi,kd:Yi,ld:Wi,md:Zi,nd:Mi,od:function(){var e,t;return B=e=B-32|0,t=ji(88),Jt(e+8|0),ke(t,e+8|0),B=e+32|0,0|t},pd:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,ke(e=ji(88),_[t+12>>2]),B=t+16|0,0|e},qd:Mi,rd:Mi,sd:function(){var e,t;return B=e=B-16|0,kr(t=Ni(172),1,1),B=e+16|0,0|t},td:function(e){var t;return e|=0,B=t=B-16|0,a[t+15|0]=e,kr(e=Ni(172),1&a[t+15|0],1),B=t+16|0,0|e},ud:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,a[i+15|0]=e,a[i+14|0]=t,kr(e=Ni(172),1&a[i+15|0],1&a[i+14|0]),B=i+16|0,0|e},vd:function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,_[r+4>>2]=i,_[r>>2]=n,Zo(_[r+12>>2],_[r+8>>2],_[r+4>>2],_[r>>2],0),B=r+16|0},wd:function(e,t,i,n,r){var o;e|=0,t|=0,i|=0,n|=0,r|=0,B=o=B-32|0,_[o+28>>2]=e,_[o+24>>2]=t,_[o+20>>2]=i,_[o+16>>2]=n,a[o+15|0]=r,Zo(_[o+28>>2],_[o+24>>2],_[o+20>>2],_[o+16>>2],1&a[o+15|0]),B=o+32|0},xd:function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,_[r+4>>2]=i,_[r>>2]=n,function(e,t,i,n){var r;r=_[e+32>>2],_[r>>2]=_[r>>2]+1,yn(e,t),yn(e,i),yn(e,n)}(_[r+12>>2],_[r+8>>2],_[r+4>>2],_[r>>2]),B=r+16|0},yd:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+20|0},zd:Kt,Ad:Mi,Bd:Mi,Cd:function(){var e,t;return B=e=B-16|0,Gn(t=Ni(868)),B=e+16|0,0|t},Dd:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+836>>2]},Ed:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+840>>2]},Fd:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+844>>2]},Gd:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,B=i+16|0,(_[e+12>>2]+4|0)+A(_[e+8>>2],208)|0},Hd:Qn,Id:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,function(e,t){var i=b(0),n=b(0),r=b(0),o=b(0);rr(e),_[e+4>>2]=0,_[e>>2]=11908,i=y[t>>2],r=y[t+4>>2],n=y[t+8>>2],_[e+44>>2]=0,o=b(n*y[e+24>>2]),n=y[e+48>>2],y[e+40>>2]=o-n,y[e+36>>2]=b(r*y[e+20>>2])-n,y[e+32>>2]=b(i*y[e+16>>2])-n,i=y[t>>2],r=y[t+8>>2],o=y[t+4>>2],(i=b(y[((i<o?(i<r^1)<<1:o<r?1:2)<<2)+t>>2]*b(.10000000149011612)))<n&&ir(e,i)}(e=Ni(60),_[t+12>>2]),B=t+16|0,0|e},Jd:pn,Kd:cn,Ld:Ki,Md:Qi,Nd:qi,Od:Yi,Pd:Wi,Qd:Zi,Rd:Nn,Sd:Mi,Td:function(e,t){var i,n;return e=b(e),t=b(t),B=i=B-16|0,y[i+12>>2]=e,y[i+8>>2]=t,function(e,t,i){nn(e),y[e+48>>2]=t,_[e>>2]=11636,_[e+56>>2]=1,_[e+4>>2]=10,_[e+44>>2]=0,y[e+40>>2]=t,y[e+36>>2]=i*b(.5),y[e+32>>2]=t}(n=Ni(60),y[i+12>>2],y[i+8>>2]),B=i+16|0,0|n},Ud:pn,Vd:cn,Wd:function(e,t,i,n){var r;e|=0,t=b(t),i=b(i),n|=0,B=r=B-16|0,_[r+12>>2]=e,y[r+8>>2]=t,y[r+4>>2]=i,_[r>>2]=n,function(e,t,i,n){var r;B=r=B-32|0,_[r+28>>2]=e,y[r+24>>2]=t,y[r+20>>2]=i,_[r+16>>2]=n,e=_[r+28>>2],_[e+56>>2]=_[r+16>>2],y[r+12>>2]=1,y[r+8>>2]=1,y[r+4>>2]=1,zi(e+16|0,r+12|0,r+8|0,r+4|0),1!=_[e+56>>2]?_[e+56>>2]?zi(e+32|0,n=r+24|0,n,r+20|0):zi(e+32|0,r+20|0,n=r+24|0,n):zi(e+32|0,n=r+24|0,r+20|0,n),_[r>>2]=(_[r+16>>2]+2|0)%3,_[12+(n=B-16|0)>>2]=e+32,y[e+48>>2]=y[_[n+12>>2]+(_[r>>2]<<2)>>2],B=r+32|0}(_[r+12>>2],y[r+8>>2],y[r+4>>2],_[r>>2]),B=r+16|0},Xd:Ki,Yd:Qi,Zd:qi,_d:Yi,$d:Wi,ae:Zi,be:Nn,ce:Mi,de:function(){var e,t;return B=e=B-16|0,xa(t=Ni(160),1),B=e+16|0,0|t},ee:function(e){var t;return e|=0,B=t=B-16|0,a[t+15|0]=e,xa(e=Ni(160),1&a[t+15|0]),B=t+16|0,0|e},fe:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,bi(_[n+12>>2],_[n+8>>2],_[n+4>>2]),B=n+16|0},ge:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+64>>2]](e,_[i+8>>2]),B=i+16|0},he:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,ga(_[i+12>>2],_[i+8>>2]),B=i+16|0},ie:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=function(e){var t;return B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2]+16,B=t+16|0,_[_[e+12>>2]+4>>2]}(_[t+12>>2]),B=t+16|0,0|e},je:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=function(e,t){var i;return B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2]+16,_[e+8>>2]=t,B=i+16|0,_[64+(_[_[e+12>>2]+12>>2]+A(_[e+8>>2],80)|0)>>2]}(_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},ke:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,Aa(_[n+12>>2],_[n+8>>2],_[n+4>>2],1),B=n+16|0},le:function(e,t,i,n){var r;e|=0,t|=0,i|=0,n|=0,B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,_[r+4>>2]=i,a[r+3|0]=n,Aa(_[r+12>>2],_[r+8>>2],_[r+4>>2],1&a[r+3|0]),B=r+16|0},me:pn,ne:cn,oe:function(e,t,i,n){var r;e|=0,t|=0,i=b(i),n=b(n),B=r=B-16|0,_[r+12>>2]=e,_[r+8>>2]=t,y[r+4>>2]=i,y[r>>2]=n,Zt(_[r+12>>2],_[r+8>>2],y[r+4>>2],y[r>>2],b(0)),B=r+16|0},pe:function(e,t,i,n,r){var o;e|=0,t|=0,i=b(i),n=b(n),r=b(r),B=o=B-32|0,_[o+28>>2]=e,_[o+24>>2]=t,y[o+20>>2]=i,y[o+16>>2]=n,y[o+12>>2]=r,Zt(_[o+28>>2],_[o+24>>2],y[o+20>>2],y[o+16>>2],y[o+12>>2]),B=o+32|0},qe:Ki,re:Qi,se:qi,te:Yi,ue:Wi,ve:Zi,we:Mi,xe:function(){var e,t;return B=e=B-16|0,yo(t=Ni(200),go(),go()),B=e+16|0,0|t},ye:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,yo(e=Ni(200),_[t+12>>2],go()),B=t+16|0,0|e},ze:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,yo(e=Ni(200),_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},Ae:fr,Be:Ne,Ce:Mi,De:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,Qt(e=_[n+28>>2]),_[e>>2]=1140,Vn(e+24|0),t=_[n+24>>2],i=_[t+4>>2],_[e+44>>2]=_[t>>2],_[e+48>>2]=i,i=_[t+12>>2],_[e+52>>2]=_[t+8>>2],_[e+56>>2]=i,t=_[n+20>>2],i=_[t+4>>2],_[e+60>>2]=_[t>>2],_[e+64>>2]=i,i=_[t+12>>2],_[e+68>>2]=_[t+8>>2],_[e+72>>2]=i,Vn(e+76|0),Vn(e+96|0),Vn(e+116|0),Vn(e+136|0),B=n+32|0}(e=ji(156),_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},Ee:to,Fe:qt,Ge:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Yt(_[i+12>>2]+24|0,_[i+8>>2]),B=i+16|0},He:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+44|0},Ie:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+44>>2]=_[e>>2],_[t+48>>2]=i,i=_[e+12>>2],_[t+52>>2]=_[e+8>>2],_[t+56>>2]=i},Je:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+60|0},Ke:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+60>>2]=_[e>>2],_[t+64>>2]=i,i=_[e+12>>2],_[t+68>>2]=_[e+8>>2],_[t+72>>2]=i},Le:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+76|0},Me:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,jt(_[i+12>>2]+76|0,_[i+8>>2]),B=i+16|0},Ne:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+96|0},Oe:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,jt(_[i+12>>2]+96|0,_[i+8>>2]),B=i+16|0},Pe:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+116|0},Qe:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,oe(_[i+12>>2],_[i+8>>2]),B=i+16|0}(_[i+12>>2]+116|0,_[i+8>>2]),B=i+16|0},Re:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+136|0},Se:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Yt(_[i+12>>2]+136|0,_[i+8>>2]),B=i+16|0},Te:eo,Ue:$r,Ve:Kr,We:Zr,Xe:Qr,Ye:Yr,Ze:Hr,_e:Vr,$e:ar,af:or,bf:Mi,cf:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t,i){var n;B=n=B-32|0,_[n+28>>2]=e,_[n+24>>2]=t,_[n+20>>2]=i,Qt(e=_[n+28>>2]),_[e>>2]=1296,t=_[n+24>>2],i=_[t+4>>2],_[e+24>>2]=_[t>>2],_[e+28>>2]=i,i=_[t+12>>2],_[e+32>>2]=_[t+8>>2],_[e+36>>2]=i,t=_[n+20>>2],i=_[t+4>>2],_[e+40>>2]=_[t>>2],_[e+44>>2]=i,i=_[t+12>>2],_[e+48>>2]=_[t+8>>2],_[e+52>>2]=i,_[12+(B-16|0)>>2]=e+56,_[12+(B-16|0)>>2]=e+72,B=n+32|0}(e=ji(88),_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},df:to,ef:qt,ff:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+24>>2]=_[e>>2],_[t+28>>2]=i,i=_[e+12>>2],_[t+32>>2]=_[e+8>>2],_[t+36>>2]=i},gf:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+40|0},hf:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+40>>2]=_[e>>2],_[t+44>>2]=i,i=_[e+12>>2],_[t+48>>2]=_[e+8>>2],_[t+52>>2]=i},jf:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+56|0},kf:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+56>>2]=_[e>>2],_[t+60>>2]=i,i=_[e+12>>2],_[t+64>>2]=_[e+8>>2],_[t+68>>2]=i},lf:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[t+12>>2]+72|0},mf:function(e,t){e|=0,t|=0;var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,t=_[i+12>>2],e=_[i+8>>2],i=_[e+4>>2],_[t+72>>2]=_[e>>2],_[t+76>>2]=i,i=_[e+12>>2],_[t+80>>2]=_[e+8>>2],_[t+84>>2]=i},nf:eo,of:$r,pf:Kr,qf:Zr,rf:Qr,sf:Yr,tf:Hr,uf:Vr,vf:ar,wf:or,xf:Mi,yf:function(e,t,i,n){var r,o;return e=b(e),t=b(t),i=b(i),n=b(n),B=r=B-32|0,y[r+28>>2]=e,y[r+24>>2]=t,y[r+20>>2]=i,y[r+16>>2]=n,function(e,t,i,n,r){var o;B=o=B-32|0,_[o+28>>2]=e,_[o+24>>2]=t,_[o+20>>2]=i,_[o+16>>2]=n,_[o+12>>2]=r,sa(_[o+28>>2],_[o+24>>2],_[o+20>>2],_[o+16>>2],_[o+12>>2]),B=o+32|0}(o=ji(16),r+28|0,r+24|0,r+20|0,r+16|0),B=r+32|0,0|o},zf:function(e,t,i,n,r){var o;e|=0,t=b(t),i=b(i),n=b(n),r=b(r),B=o=B-32|0,_[o+28>>2]=e,y[o+24>>2]=t,y[o+20>>2]=i,y[o+16>>2]=n,y[o+12>>2]=r,sa(_[o+28>>2],o+24|0,o+20|0,o+16|0,o+12|0),B=o+32|0},Af:Ur,Bf:zr,Cf:Br,Df:Ea,Ef:Pr,Ff:Mr,Gf:Ir,Hf:va,If:rn,Jf:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,0!=_[_[t+12>>2]+52>>2]|0},Kf:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,a[i+11|0]=t,_[_[i+12>>2]+52>>2]=1&a[i+11|0]},Lf:function(e){e|=0;var t,i=b(0);return _[12+(t=B-16|0)>>2]=e,i=y[_[t+12>>2]+56>>2],0|(e=b(x(i))<b(2147483648)?~~i:-2147483648)},Mf:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,y[_[i+12>>2]+56>>2]=_[i+8>>2]},Nf:function(e){var t;return e|=0,_[12+(t=B-16|0)>>2]=e,_[_[t+12>>2]+20>>2]},Of:function(e,t){var i;e|=0,t|=0,_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,_[_[i+12>>2]+20>>2]=_[i+8>>2]},Pf:rn,Qf:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],o[_[_[e>>2]+60>>2]](e,_[i+8>>2]),B=i+16|0},Rf:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=_[t+12>>2],e=0|o[_[_[e>>2]+36>>2]](e),B=t+16|0,b(b(0|e))},Sf:Mi,Tf:function(){var e,t;return B=e=B-16|0,t=Ni(16),_[12+(B-16|0)>>2]=t,B=e+16|0,0|t},Uf:function(e,t,i){var n,r;return e=b(e),t=b(t),i=b(i),B=n=B-32|0,y[n+28>>2]=e,y[n+24>>2]=t,y[n+20>>2]=i,zi(r=Ni(16),n+28|0,n+24|0,n+20|0),B=n+32|0,0|r},Vf:Ur,Wf:zr,Xf:Br,Yf:Pr,Zf:Mr,_f:Ir,$f:function(e,t,i,n){var r;e|=0,t=b(t),i=b(i),n=b(n),B=r=B-16|0,_[r+12>>2]=e,y[r+8>>2]=t,y[r+4>>2]=i,y[r>>2]=n,zi(_[r+12>>2],r+8|0,r+4|0,r),B=r+16|0},ag:Qn,bg:function(e){var t,i;return e=b(e),B=t=B-16|0,y[t+12>>2]=e,re(i=Ni(56),y[t+12>>2]),B=t+16|0,0|i},cg:pn,dg:cn,eg:Ki,fg:Qi,gg:qi,hg:Yi,ig:Wi,jg:Zi,kg:Nn,lg:Mi,mg:function(){var e,t;return B=e=B-16|0,Jt(t=ji(24)),B=e+16|0,0|t},ng:rn,og:function(){var e,t;return B=t=B-16|0,e=Ni(36),_[e>>2]=11800,_[e+4>>2]=35,_[e+8>>2]=0,_[e+12>>2]=-1,_[e+16>>2]=0,_[e+4>>2]=27,_[e>>2]=11136,B=t+16|0,0|e},pg:Ki,qg:Qi,rg:qi,sg:Yi,tg:Wi,ug:Zi,vg:Mi,wg:Mo,xg:Io,yg:ua,zg:Go,Ag:rn,Bg:In,Cg:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,B=i+16|0,_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<4)|0},Dg:vn,Eg:Fn,Fg:Mi,Gg:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,function(e,t){var i=0,n=0,r=0;for(_[e+4>>2]=2,_[e>>2]=2708,_[e+10444>>2]=t,_[e+64>>2]=102,a[e+24|0]=1,_[e+20>>2]=0,_[e+60>>2]=0,_[e+28>>2]=5816,_[e+12>>2]=0,_[e+16>>2]=0,_[e+68>>2]=o[_[_[t>>2]+12>>2]](t),_[e+72>>2]=o[_[_[t>>2]+8>>2]](t);;){for(t=0;n=(A(i,144)+e|0)+(t<<2)|0,r=_[e+10444>>2],_[n+76>>2]=o[_[_[r>>2]+16>>2]](r,i,t),r=n+5260|0,n=_[e+10444>>2],_[r>>2]=o[_[_[n>>2]+20>>2]](n,i,t),36!=(0|(t=t+1|0)););if(36==(0|(i=i+1|0)))break}}(e=ji(10448),_[t+12>>2]),B=t+16|0,0|e},Hg:hr,Ig:Ie,Jg:Mi,Kg:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,K(e=Ni(676),_[t+12>>2]),B=t+16|0,0|e},Lg:uo,Mg:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]+504>>2])},Ng:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,b(y[_[e+12>>2]+508>>2])},Og:function(e,t,i){var n;e|=0,t=b(t),i=b(i),B=n=B-16|0,_[n+12>>2]=e,y[n+8>>2]=t,y[n+4>>2]=i,function(e,t,i){var n;y[8+(n=B-16|0)>>2]=i,y[n+12>>2]=t,_[n+4>>2]=0,_[n>>2]=1065353216,_[e+504>>2]=_[(t<b(0)?n+4|0:t>b(1)?n:n+12|0)>>2],_[n+4>>2]=0,_[n>>2]=1065353216,_[e+508>>2]=_[(i<b(0)?n+4|0:i>b(1)?n:n+8|0)>>2]}(_[n+12>>2],y[n+8>>2],y[n+4>>2]),B=n+16|0},Pg:function(e,t,i){var n;e|=0,t=b(t),i|=0,B=n=B-16|0,_[n+12>>2]=e,y[n+8>>2]=t,_[n+4>>2]=i,function(e,t,i){var n,r=b(0),o=b(0),a=b(0);n=_[e+204>>2],t!=b(0)?(_[e+204>>2]=-2&n,r=b(b(1)/t)):_[e+204>>2]=1|n,y[e+404>>2]=r,_[e+436>>2]=0,y[e+424>>2]=y[e+440>>2]*t,y[e+432>>2]=y[e+448>>2]*t,y[e+428>>2]=y[e+444>>2]*t,t=y[i+8>>2],o=y[i+4>>2],a=y[i>>2],y[e+620>>2]=y[e+408>>2]*r,y[e+624>>2]=r*y[e+412>>2],y[e+628>>2]=r*y[e+416>>2],_[e+632>>2]=0,_[e+468>>2]=0,y[e+456>>2]=a!=b(0)?b(b(1)/a):b(0),y[e+460>>2]=o!=b(0)?b(b(1)/o):b(0),y[e+464>>2]=t!=b(0)?b(b(1)/t):b(0)}(_[n+12>>2],y[n+8>>2],_[n+4>>2]),B=n+16|0},Qg:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+408|0},Rg:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i,n=0;B=i=B-32|0,_[i+28>>2]=e,_[i+24>>2]=t,e=_[i+24>>2],n=_[e+4>>2],t=_[i+28>>2],_[t+408>>2]=_[e>>2],_[t+412>>2]=n,n=_[e+12>>2],_[t+416>>2]=_[e+8>>2],_[t+420>>2]=n,Ut(e=i+8|0,t+408|0,t+404|0),n=_[e+4>>2],_[t+620>>2]=_[e>>2],_[t+624>>2]=n,n=_[e+12>>2],_[t+628>>2]=_[e+8>>2],_[t+632>>2]=n,B=i+32|0}(_[i+12>>2],_[i+8>>2]),B=i+16|0},Sg:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Gt(_[i+12>>2],_[i+8>>2]),B=i+16|0},Tg:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,function(e,t,i){var n;B=n=B-48|0,_[n+44>>2]=e,_[n+40>>2]=t,_[n+36>>2]=i,zt(e=_[n+44>>2],_[n+40>>2]),t=_[n+36>>2],On(n,_[n+40>>2],e+408|0),Lt(i=n+16|0,t,n),Gt(e,i),B=n+48|0}(_[n+12>>2],_[n+8>>2],_[n+4>>2]),B=n+16|0},Ug:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,zt(_[i+12>>2],_[i+8>>2]),B=i+16|0},Vg:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Bt(_[i+12>>2],_[i+8>>2]),B=i+16|0},Wg:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,fo(_[n+12>>2],_[n+8>>2],_[n+4>>2]),B=n+16|0},Xg:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Dt(_[i+12>>2],_[i+8>>2]),B=i+16|0},Yg:function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,ho(_[t+12>>2]),B=t+16|0},Zg:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+372|0},_g:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+388|0},$g:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,t=_[i+8>>2],i=_[t+4>>2],_[e+372>>2]=_[t>>2],_[e+376>>2]=i,i=_[t+12>>2],_[e+380>>2]=_[t+8>>2],_[e+384>>2]=i}(_[i+12>>2],_[i+8>>2]),B=i+16|0},ah:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,t=_[i+8>>2],i=_[t+4>>2],_[e+388>>2]=_[t>>2],_[e+392>>2]=i,i=_[t+12>>2],_[e+396>>2]=_[t+8>>2],_[e+400>>2]=i}(_[i+12>>2],_[i+8>>2]),B=i+16|0},bh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+540>>2]},ch:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[e+540>>2]=_[i+8>>2],_[e+540>>2]&&(t=_[i+8>>2],o[_[_[t>>2]+8>>2]](t,e+4|0)),B=i+16|0}(_[i+12>>2],_[i+8>>2]),B=i+16|0},dh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+604|0},eh:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i=0;_[12+(i=B-16|0)>>2]=e,_[i+8>>2]=t,e=_[i+12>>2],_[e+304>>2]=_[e+304>>2]+1,t=_[i+8>>2],i=_[t+4>>2],_[e+604>>2]=_[t>>2],_[e+608>>2]=i,i=_[t+12>>2],_[e+612>>2]=_[t+8>>2],_[e+616>>2]=i}(_[i+12>>2],_[i+8>>2]),B=i+16|0},fh:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=function(e){var t;return B=t=B-16|0,_[t+8>>2]=e,_[12+(e=B-16|0)>>2]=_[t+8>>2],2&_[_[e+12>>2]+252>>2]?_[t+12>>2]=_[t+8>>2]:_[t+12>>2]=0,B=t+16|0,_[t+12>>2]}(_[i+8>>2]),B=i+16|0,0|e},gh:function(e,t,i){var n;e|=0,t|=0,i|=0,B=n=B-16|0,_[n+12>>2]=e,_[n+8>>2]=t,_[n+4>>2]=i,e=_[n+12>>2],t=_[e+192>>2],o[_[_[t>>2]+8>>2]](t,e+4|0,_[n+8>>2],_[n+4>>2]),B=n+16|0},hh:function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,ct(_[t+12>>2]),B=t+16|0},ih:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+440|0},jh:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,dr(_[i+12>>2],_[i+8>>2]),B=i+16|0},kh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[_[e+12>>2]+564>>2]},lh:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,_[_[e+12>>2]+564>>2]=_[e+8>>2],B=i+16|0},mh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,e=1&function(e){var t,i=0;return B=t=B-16|0,_[t+8>>2]=e,i=B-16|0,e=_[t+8>>2],_[i+12>>2]=e,4!=_[_[i+12>>2]+220>>2]?y[4560]==b(0)||1&a[18904]?a[t+15|0]=0:(_[12+(i=B-16|0)>>2]=e,2!=_[_[i+12>>2]+220>>2]&&(_[12+(i=B-16|0)>>2]=e,3!=_[_[i+12>>2]+220>>2])?y[e+224>>2]>y[4560]?a[t+15|0]=1:a[t+15|0]=0:a[t+15|0]=1):a[t+15|0]=0,B=t+16|0,1&a[t+15|0]}(_[t+12>>2]),B=t+16|0,0|e},nh:function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,function(e){var t;B=t=B+-64|0,_[t+60>>2]=e,e=_[t+60>>2],y[t+56>>2]=0,y[t+52>>2]=0,y[t+48>>2]=0,zi(e+372|0,t+56|0,t+52|0,t+48|0),y[t+44>>2]=0,y[t+40>>2]=0,y[t+36>>2]=0,zi(e+388|0,t+44|0,t+40|0,t+36|0),y[t+32>>2]=0,y[t+28>>2]=0,y[t+24>>2]=0,zi(e+472|0,t+32|0,t+28|0,t+24|0),y[t+20>>2]=0,y[t+16>>2]=0,y[t+12>>2]=0,zi(e+488|0,t+20|0,t+16|0,t+12|0),B=t- -64|0}(_[t+12>>2]),B=t+16|0},oh:Wt,ph:Ht,qh:Vt,rh:Xt,sh:Nt,th:Pt,uh:Mt,vh:It,wh:Rt,xh:kt,yh:Ct,zh:Tt,Ah:ft,Bh:ut,Ch:uo,Dh:co,Eh:tt,Fh:$e,Gh:fr,Hh:je,Ih:He,Jh:Ge,Kh:Le,Lh:Mi,Mh:In,Nh:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,t=_[i+8>>2],_[12+(e=B-16|0)>>2]=_[i+12>>2],_[e+8>>2]=t,B=i+16|0,_[_[e+12>>2]+12>>2]+(_[e+8>>2]<<5)|0},Oh:Fn,Ph:function(){var e,t;return B=e=B-16|0,ko(t=ji(64)),B=e+16|0,0|t},Qh:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,ne(e=ji(64),_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},Rh:function(e){var t;e|=0,B=t=B-16|0,_[t+12>>2]=e,ri(_[t+12>>2]),B=t+16|0},Sh:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,ti(_[i+12>>2],_[i+8>>2]),B=i+16|0},Th:function(e,t){var i;e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,function(e,t){var i;B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,Ft(_[i+12>>2],_[i+8>>2]),B=i+16|0}(_[i+12>>2],_[i+8>>2]),B=i+16|0},Uh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]+48|0},Vh:function(e){var t;return e|=0,B=t=B-32|0,_[t+28>>2]=e,!(0==d[18712])|1&a[18712]||(kn(18696),_[4678]=0,_[4678]=1|_[4678]),function(e,t){var i;B=i=B-16|0,_[i+12>>2]=t,t=_[i+12>>2],kn(e),An(t,e),B=i+16|0}(t,_[t+28>>2]),e=_[t+4>>2],_[4674]=_[t>>2],_[4675]=e,e=_[t+12>>2],_[4676]=_[t+8>>2],_[4677]=e,B=t+32|0,18696},Wh:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,_[12+(e=B-16|0)>>2]=_[t+12>>2],B=t+16|0,_[e+12>>2]},Xh:function(e){var t;return e|=0,B=t=B-80|0,_[t+76>>2]=e,!(0==d[18780])|1&a[18780]||(ko(18716),_[4695]=0,_[4695]=1|_[4695]),Ot(t,_[t+76>>2]),_r(18716,t),B=t+80|0,18716},Yh:function(e,t){var i;return e|=0,t|=0,B=i=B-16|0,_[i+12>>2]=e,_[i+8>>2]=t,e=ie(_[i+12>>2],_[i+8>>2]),B=i+16|0,0|e},Zh:rn,_h:function(e){var t;return e|=0,B=t=B-16|0,_[t+12>>2]=e,function(e,t){var i=b(0),n=b(0),r=b(0),o=b(0);nn(e),_[e+56>>2]=1,_[e>>2]=12704,i=y[t>>2],r=y[t+4>>2],n=y[t+8>>2],_[e+44>>2]=0,o=b(n*y[e+24>>2]),n=y[e+48>>2],y[e+40>>2]=o-n,y[e+36>>2]=b(r*y[e+20>>2])-n,y[e+32>>2]=b(i*y[e+16>>2])-n,i=y[t>>2],r=y[t+8>>2],o=y[t+4>>2],!((i=b(y[((i<o?(i<r^1)<<1:o<r?1:2)<<2)+t>>2]*b(.10000000149011612)))<n)||ir(e,i),_[e+4>>2]=13}(e=Ni(60),_[t+12>>2]),B=t+16|0,0|e},$h:pn,ai:cn,bi:function(e,t,i,n){var r;e|=0,t=b(t),i=b(i),n|=0,B=r=B-16|0,_[r+12>>2]=e,y[r+8>>2]=t,y[r+4>>2]=i,_[r>>2]=n,te(_[r+12>>2],y[r+8>>2],y[r+4>>2],_[r>>2]),B=r+16|0},ci:Ki,di:Qi,ei:qi,fi:Yi,gi:Wi,hi:Zi,ii:Nn,ji:Mi,ki:function(){return 0},li:function(){return 1},mi:function(){return 2},ni:function(){return 3},oi:function(){return 4},pi:function(){return 5},qi:So,ri:Bi,si:function(e){return 0|k()},ti:function(e,t){t|=0,o[e|=0](t)},ui:function(e){o[e|=0]()}}}({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},e,t.buffer)}(q,y,g)}}l=null,t.wasmBinary&&(p=t.wasmBinary);var m=Error,v={};p=[],"object"!=typeof v&&_("no native wasm support detected");var y,g=new function(e){var t=Array(581);return t.grow=function(){601<=t.length&&L("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),t.push(null)},t.set=function(e,i){t[e]=i},t.get=function(e){return t[e]},t}({initial:581,maximum:601,element:"anyfunc"}),A=!1;function b(e,t){e||L("Assertion failed: "+t)}var x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T,S,E,C=t.TOTAL_MEMORY||67108864;(y=t.wasmMemory?t.wasmMemory:new function(){return{buffer:new ArrayBuffer(C/65536*65536),grow:function(e){return sc(e)}}})&&(T=y.buffer),C=T.byteLength;var w=T;function k(e){for(;0<e.length;){var i=e.shift();if("function"==typeof i)i();else{var n=i.Ri;"number"==typeof n?void 0===i.Ii?t.dynCall_v(n):t.dynCall_vi(n,i.Ii):n(void 0===i.Ii?null:i.Ii)}}}T=w,t.HEAP8=new Int8Array(w),t.HEAP16=new Int16Array(w),t.HEAP32=E=new Int32Array(w),t.HEAPU8=S=new Uint8Array(w),t.HEAPU16=new Uint16Array(w),t.HEAPU32=new Uint32Array(w),t.HEAPF32=new Float32Array(w),t.HEAPF64=new Float64Array(w),E[5736]=5265984;var O=[],R=[],F=[],I=[],M=!1;function P(){var e=t.preRun.shift();O.unshift(e)}if(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var i=65535&e,n=65535&t;return i*n+((e>>>16)*n+i*(t>>>16)<<16)|0}),!Math.fround){var D=new Float32Array(1);Math.fround=function(e){return D[0]=e,D[0]}}Math.clz32||(Math.clz32=function(e){var t=32,i=e>>16;return i&&(t-=16,e=i),(i=e>>8)&&(t-=8,e=i),(i=e>>4)&&(t-=4,e=i),(i=e>>2)&&(t-=2,e=i),e>>1?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return 0>e?Math.ceil(e):Math.floor(e)});var B=0,N=null;function L(e){throw t.onAbort&&t.onAbort(e),f(e+=""),_(e),A=!0,new m("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}t.preloadedImages={},t.preloadedAudios={};var z="data:application/octet-stream;base64,";function G(e){return String.prototype.startsWith?e.startsWith(z):0===e.indexOf(z)}var U="";if(!G(U)){var X=U;U=t.locateFile?t.locateFile(X,h):h+X}function V(){try{if(p)return new Uint8Array(p);var e=Y(U);if(e)return e;if(u)return u(U);throw"both async and sync fetching of the wasm failed"}catch(e){L(e)}}R.push({Ri:function(){Z()}});var H=[null,[],[]];function j(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];255<n&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}var W="function"==typeof atob?atob:function(e){var t="",i=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++));n=n<<2|r>>4,r=(15&r)<<4|o>>2;var s=(3&o)<<6|a;t+=String.fromCharCode(n),64!==o&&(t+=String.fromCharCode(r)),64!==a&&(t+=String.fromCharCode(s))}while(i<e.length);return t};function Y(e){if(G(e)){if(e=e.slice(z.length),"boolean"==typeof a&&a){try{var t=Buffer.from(e,"base64")}catch(i){t=new Buffer(e,"base64")}var i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else try{var n=W(e),r=new Uint8Array(n.length);for(t=0;t<n.length;++t)r[t]=n.charCodeAt(t);i=r}catch(e){throw Error("Converting base64 string to bytes failed.")}return i}}var q={f:function(){L()},c:function(e,t,i){S.set(S.subarray(t,t+i),e)},d:function(){L("OOM")},e:function(){return 0},b:function(){return 0},g:function(e,t,i,n){try{for(var r=0,o=0;o<i;o++){for(var a=E[t+8*o>>2],s=E[t+(8*o+4)>>2],l=0;l<s;l++){var c=S[a+l],u=H[e];if(0===c||10===c){for(var h=1===e?f:_,p=u,d=0,m=d+void 0,v=d;p[v]&&!(v>=m);)++v;if(16<v-d&&p.subarray&&x)var y=x.decode(p.subarray(d,v));else{for(m="";d<v;){var g=p[d++];if(128&g){var A=63&p[d++];if(192==(224&g))m+=String.fromCharCode((31&g)<<6|A);else{var b=63&p[d++];if(65536>(g=224==(240&g)?(15&g)<<12|A<<6|b:(7&g)<<18|A<<12|b<<6|63&p[d++]))m+=String.fromCharCode(g);else{var T=g-65536;m+=String.fromCharCode(55296|T>>10,56320|1023&T)}}}else m+=String.fromCharCode(g)}y=m}h(y),u.length=0}else u.push(c)}r+=s}return E[n>>2]=r,0}catch(e){return L(e),e.ak}},a:function(e){var t=Date.now();return E[e>>2]=t/1e3|0,E[e+4>>2]=t%1e3*1e3|0,0},memory:y,table:g},Q=function(){function e(e){t.asm=e.exports,B--,t.monitorRunDependencies&&t.monitorRunDependencies(B),0==B&&N&&(e=N,N=null,e())}function i(t){e(t.instance)}function n(e){return(p||!r&&!o||"function"!=typeof fetch?new Promise((function(e){e(V())})):fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return V()}))).then((function(){return{then:function(e){e({instance:new d})}}})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),L(e)}))}var a={env:q,wasi_unstable:q};if(B++,t.monitorRunDependencies&&t.monitorRunDependencies(B),t.instantiateWasm)try{return t.instantiateWasm(a,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(p||"function"!=typeof v.instantiateStreaming||G(U)||"function"!=typeof fetch)return n(i);fetch(U,{credentials:"same-origin"}).then((function(e){return v.instantiateStreaming(e,a).then(i,(function(e){_("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),n(i)}))}))}(),{}}();t.asm=Q;var Z=t.___wasm_call_ctors=function(){return t.asm.h.apply(null,arguments)},K=t._emscripten_bind_btCollisionShape_setLocalScaling_1=function(){return t.asm.i.apply(null,arguments)},J=t._emscripten_bind_btCollisionShape_getLocalScaling_0=function(){return t.asm.j.apply(null,arguments)},$=t._emscripten_bind_btCollisionShape_calculateLocalInertia_2=function(){return t.asm.k.apply(null,arguments)},ee=t._emscripten_bind_btCollisionShape_setMargin_1=function(){return t.asm.l.apply(null,arguments)},te=t._emscripten_bind_btCollisionShape_getMargin_0=function(){return t.asm.m.apply(null,arguments)},ie=t._emscripten_bind_btCollisionShape_isCompound_0=function(){return t.asm.n.apply(null,arguments)},ne=t._emscripten_bind_btCollisionShape_getUserIndex_0=function(){return t.asm.o.apply(null,arguments)},re=t._emscripten_bind_btCollisionShape_setUserIndex_1=function(){return t.asm.p.apply(null,arguments)},oe=t._emscripten_bind_btCollisionShape___destroy___0=function(){return t.asm.q.apply(null,arguments)},ae=t._emscripten_bind_btCollisionWorld_getDispatcher_0=function(){return t.asm.r.apply(null,arguments)},se=t._emscripten_bind_btCollisionWorld_rayTest_3=function(){return t.asm.s.apply(null,arguments)},le=t._emscripten_bind_btCollisionWorld_addCollisionObject_1=function(){return t.asm.t.apply(null,arguments)},ce=t._emscripten_bind_btCollisionWorld_addCollisionObject_2=function(){return t.asm.u.apply(null,arguments)},ue=t._emscripten_bind_btCollisionWorld_addCollisionObject_3=function(){return t.asm.v.apply(null,arguments)},he=t._emscripten_bind_btCollisionWorld_removeCollisionObject_1=function(){return t.asm.w.apply(null,arguments)},pe=t._emscripten_bind_btCollisionWorld___destroy___0=function(){return t.asm.x.apply(null,arguments)},fe=t._emscripten_bind_btConcaveShape_setLocalScaling_1=function(){return t.asm.y.apply(null,arguments)},_e=t._emscripten_bind_btConcaveShape_getLocalScaling_0=function(){return t.asm.z.apply(null,arguments)},de=t._emscripten_bind_btConcaveShape_calculateLocalInertia_2=function(){return t.asm.A.apply(null,arguments)},me=t._emscripten_bind_btConcaveShape_isCompound_0=function(){return t.asm.B.apply(null,arguments)},ve=t._emscripten_bind_btConcaveShape_getUserIndex_0=function(){return t.asm.C.apply(null,arguments)},ye=t._emscripten_bind_btConcaveShape_setUserIndex_1=function(){return t.asm.D.apply(null,arguments)},ge=t._emscripten_bind_btConcaveShape___destroy___0=function(){return t.asm.E.apply(null,arguments)},Ae=t._emscripten_bind_btStridingMeshInterface_setScaling_1=function(){return t.asm.F.apply(null,arguments)},be=t._emscripten_bind_btStridingMeshInterface___destroy___0=function(){return t.asm.G.apply(null,arguments)},xe=t._emscripten_bind_btCollisionObject_btCollisionObject_0=function(){return t.asm.H.apply(null,arguments)},Te=t._emscripten_bind_btCollisionObject_setAnisotropicFriction_2=function(){return t.asm.I.apply(null,arguments)},Se=t._emscripten_bind_btCollisionObject_getCollisionShape_0=function(){return t.asm.J.apply(null,arguments)},Ee=t._emscripten_bind_btCollisionObject_getActivationState_0=function(){return t.asm.K.apply(null,arguments)},Ce=t._emscripten_bind_btCollisionObject_setActivationState_1=function(){return t.asm.L.apply(null,arguments)},we=t._emscripten_bind_btCollisionObject_forceActivationState_1=function(){return t.asm.M.apply(null,arguments)},ke=t._emscripten_bind_btCollisionObject_activate_0=function(){return t.asm.N.apply(null,arguments)},Oe=t._emscripten_bind_btCollisionObject_activate_1=function(){return t.asm.O.apply(null,arguments)},Re=t._emscripten_bind_btCollisionObject_isActive_0=function(){return t.asm.P.apply(null,arguments)},Fe=t._emscripten_bind_btCollisionObject_isKinematicObject_0=function(){return t.asm.Q.apply(null,arguments)},Ie=t._emscripten_bind_btCollisionObject_isStaticObject_0=function(){return t.asm.R.apply(null,arguments)},Me=t._emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0=function(){return t.asm.S.apply(null,arguments)},Pe=t._emscripten_bind_btCollisionObject_setRestitution_1=function(){return t.asm.T.apply(null,arguments)},De=t._emscripten_bind_btCollisionObject_setFriction_1=function(){return t.asm.U.apply(null,arguments)},Be=t._emscripten_bind_btCollisionObject_setRollingFriction_1=function(){return t.asm.V.apply(null,arguments)},Ne=t._emscripten_bind_btCollisionObject_getWorldTransform_0=function(){return t.asm.W.apply(null,arguments)},Le=t._emscripten_bind_btCollisionObject_getCollisionFlags_0=function(){return t.asm.X.apply(null,arguments)},ze=t._emscripten_bind_btCollisionObject_setCollisionFlags_1=function(){return t.asm.Y.apply(null,arguments)},Ge=t._emscripten_bind_btCollisionObject_setWorldTransform_1=function(){return t.asm.Z.apply(null,arguments)},Ue=t._emscripten_bind_btCollisionObject_setCollisionShape_1=function(){return t.asm._.apply(null,arguments)},Xe=t._emscripten_bind_btCollisionObject_setCcdMotionThreshold_1=function(){return t.asm.$.apply(null,arguments)},Ve=t._emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1=function(){return t.asm.aa.apply(null,arguments)},He=t._emscripten_bind_btCollisionObject_getUserIndex_0=function(){return t.asm.ba.apply(null,arguments)},je=t._emscripten_bind_btCollisionObject_setUserIndex_1=function(){return t.asm.ca.apply(null,arguments)},We=t._emscripten_bind_btCollisionObject___destroy___0=function(){return t.asm.da.apply(null,arguments)},Ye=t._emscripten_bind_btMotionState_getWorldTransform_1=function(){return t.asm.ea.apply(null,arguments)},qe=t._emscripten_bind_btMotionState_setWorldTransform_1=function(){return t.asm.fa.apply(null,arguments)},Qe=t._emscripten_bind_btMotionState___destroy___0=function(){return t.asm.ga.apply(null,arguments)},Ze=t._emscripten_bind_btDispatcher_getNumManifolds_0=function(){return t.asm.ha.apply(null,arguments)},Ke=t._emscripten_bind_btDispatcher_getManifoldByIndexInternal_1=function(){return t.asm.ia.apply(null,arguments)},Je=t._emscripten_bind_btDispatcher___destroy___0=function(){return t.asm.ja.apply(null,arguments)},$e=t._emscripten_bind_btConvexInternalShape_getImplicitShapeDimensions_0=function(){return t.asm.ka.apply(null,arguments)},et=t._emscripten_bind_btConvexInternalShape_setLocalScaling_1=function(){return t.asm.la.apply(null,arguments)},tt=t._emscripten_bind_btConvexInternalShape_getLocalScaling_0=function(){return t.asm.ma.apply(null,arguments)},it=t._emscripten_bind_btConvexInternalShape_calculateLocalInertia_2=function(){return t.asm.na.apply(null,arguments)},nt=t._emscripten_bind_btConvexInternalShape_setMargin_1=function(){return t.asm.oa.apply(null,arguments)},rt=t._emscripten_bind_btConvexInternalShape_getMargin_0=function(){return t.asm.pa.apply(null,arguments)},ot=t._emscripten_bind_btConvexInternalShape_isCompound_0=function(){return t.asm.qa.apply(null,arguments)},at=t._emscripten_bind_btConvexInternalShape_getUserIndex_0=function(){return t.asm.ra.apply(null,arguments)},st=t._emscripten_bind_btConvexInternalShape_setUserIndex_1=function(){return t.asm.sa.apply(null,arguments)},lt=t._emscripten_bind_btConvexInternalShape___destroy___0=function(){return t.asm.ta.apply(null,arguments)},ct=t._emscripten_bind_btDynamicsWorld_getSolverInfo_0=function(){return t.asm.ua.apply(null,arguments)},ut=t._emscripten_bind_btDynamicsWorld_getDispatcher_0=function(){return t.asm.va.apply(null,arguments)},ht=t._emscripten_bind_btDynamicsWorld_rayTest_3=function(){return t.asm.wa.apply(null,arguments)},pt=t._emscripten_bind_btDynamicsWorld_addCollisionObject_1=function(){return t.asm.xa.apply(null,arguments)},ft=t._emscripten_bind_btDynamicsWorld_addCollisionObject_2=function(){return t.asm.ya.apply(null,arguments)},_t=t._emscripten_bind_btDynamicsWorld_addCollisionObject_3=function(){return t.asm.za.apply(null,arguments)},dt=t._emscripten_bind_btDynamicsWorld_removeCollisionObject_1=function(){return t.asm.Aa.apply(null,arguments)},mt=t._emscripten_bind_btDynamicsWorld___destroy___0=function(){return t.asm.Ba.apply(null,arguments)},vt=t._emscripten_bind_btBroadphaseInterface_getOverlappingPairCache_0=function(){return t.asm.Ca.apply(null,arguments)},yt=t._emscripten_bind_btBroadphaseInterface___destroy___0=function(){return t.asm.Da.apply(null,arguments)},gt=t._emscripten_bind_RayResultCallback_hasHit_0=function(){return t.asm.Ea.apply(null,arguments)},At=t._emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0=function(){return t.asm.Fa.apply(null,arguments)},bt=t._emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1=function(){return t.asm.Ga.apply(null,arguments)},xt=t._emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0=function(){return t.asm.Ha.apply(null,arguments)},Tt=t._emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1=function(){return t.asm.Ia.apply(null,arguments)},St=t._emscripten_bind_RayResultCallback_get_m_shapePart_0=function(){return t.asm.Ja.apply(null,arguments)},Et=t._emscripten_bind_RayResultCallback_set_m_shapePart_1=function(){return t.asm.Ka.apply(null,arguments)},Ct=t._emscripten_bind_RayResultCallback_get_m_closestHitFraction_0=function(){return t.asm.La.apply(null,arguments)},wt=t._emscripten_bind_RayResultCallback_set_m_closestHitFraction_1=function(){return t.asm.Ma.apply(null,arguments)},kt=t._emscripten_bind_RayResultCallback_get_m_collisionObject_0=function(){return t.asm.Na.apply(null,arguments)},Ot=t._emscripten_bind_RayResultCallback_set_m_collisionObject_1=function(){return t.asm.Oa.apply(null,arguments)},Rt=t._emscripten_bind_RayResultCallback___destroy___0=function(){return t.asm.Pa.apply(null,arguments)},Ft=t._emscripten_bind_btTriangleMeshShape_setLocalScaling_1=function(){return t.asm.Qa.apply(null,arguments)},It=t._emscripten_bind_btTriangleMeshShape_getLocalScaling_0=function(){return t.asm.Ra.apply(null,arguments)},Mt=t._emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2=function(){return t.asm.Sa.apply(null,arguments)},Pt=t._emscripten_bind_btTriangleMeshShape_isCompound_0=function(){return t.asm.Ta.apply(null,arguments)},Dt=t._emscripten_bind_btTriangleMeshShape_getUserIndex_0=function(){return t.asm.Ua.apply(null,arguments)},Bt=t._emscripten_bind_btTriangleMeshShape_setUserIndex_1=function(){return t.asm.Va.apply(null,arguments)},Nt=t._emscripten_bind_btTriangleMeshShape___destroy___0=function(){return t.asm.Wa.apply(null,arguments)},Lt=t._emscripten_bind_btQuadWord_x_0=function(){return t.asm.Xa.apply(null,arguments)},zt=t._emscripten_bind_btQuadWord_y_0=function(){return t.asm.Ya.apply(null,arguments)},Gt=t._emscripten_bind_btQuadWord_z_0=function(){return t.asm.Za.apply(null,arguments)},Ut=t._emscripten_bind_btQuadWord_w_0=function(){return t.asm._a.apply(null,arguments)},Xt=t._emscripten_bind_btQuadWord_setX_1=function(){return t.asm.$a.apply(null,arguments)},Vt=t._emscripten_bind_btQuadWord_setY_1=function(){return t.asm.ab.apply(null,arguments)},Ht=t._emscripten_bind_btQuadWord_setZ_1=function(){return t.asm.bb.apply(null,arguments)},jt=t._emscripten_bind_btQuadWord_setW_1=function(){return t.asm.cb.apply(null,arguments)},Wt=t._emscripten_bind_btQuadWord___destroy___0=function(){return t.asm.db.apply(null,arguments)},Yt=t._emscripten_bind_btMatrix3x3_getRotation_1=function(){return t.asm.eb.apply(null,arguments)},qt=t._emscripten_bind_btMatrix3x3___destroy___0=function(){return t.asm.fb.apply(null,arguments)},Qt=t._emscripten_bind_btScalarArray_size_0=function(){return t.asm.gb.apply(null,arguments)},Zt=t._emscripten_bind_btScalarArray_at_1=function(){return t.asm.hb.apply(null,arguments)},Kt=t._emscripten_bind_btScalarArray_clear_0=function(){return t.asm.ib.apply(null,arguments)},Jt=t._emscripten_bind_btScalarArray___destroy___0=function(){return t.asm.jb.apply(null,arguments)},$t=t._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2=function(){return t.asm.kb.apply(null,arguments)},ei=t._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3=function(){return t.asm.lb.apply(null,arguments)},ti=t._emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1=function(){return t.asm.mb.apply(null,arguments)},ii=t._emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0=function(){return t.asm.nb.apply(null,arguments)},ni=t._emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2=function(){return t.asm.ob.apply(null,arguments)},ri=t._emscripten_bind_btBvhTriangleMeshShape_isCompound_0=function(){return t.asm.pb.apply(null,arguments)},oi=t._emscripten_bind_btBvhTriangleMeshShape_getUserIndex_0=function(){return t.asm.qb.apply(null,arguments)},ai=t._emscripten_bind_btBvhTriangleMeshShape_setUserIndex_1=function(){return t.asm.rb.apply(null,arguments)},si=t._emscripten_bind_btBvhTriangleMeshShape___destroy___0=function(){return t.asm.sb.apply(null,arguments)},li=t._emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0=function(){return t.asm.tb.apply(null,arguments)},ci=t._emscripten_bind_btDbvtBroadphase_getOverlappingPairCache_0=function(){return t.asm.ub.apply(null,arguments)},ui=t._emscripten_bind_btDbvtBroadphase___destroy___0=function(){return t.asm.vb.apply(null,arguments)},hi=t._emscripten_bind_btIntArray_size_0=function(){return t.asm.wb.apply(null,arguments)},pi=t._emscripten_bind_btIntArray_at_1=function(){return t.asm.xb.apply(null,arguments)},fi=t._emscripten_bind_btIntArray_clear_0=function(){return t.asm.yb.apply(null,arguments)},_i=t._emscripten_bind_btIntArray___destroy___0=function(){return t.asm.zb.apply(null,arguments)},di=t._emscripten_bind_btConstCollisionObjectArray_size_0=function(){return t.asm.Ab.apply(null,arguments)},mi=t._emscripten_bind_btConstCollisionObjectArray_at_1=function(){return t.asm.Bb.apply(null,arguments)},vi=t._emscripten_bind_btConstCollisionObjectArray_clear_0=function(){return t.asm.Cb.apply(null,arguments)},yi=t._emscripten_bind_btConstCollisionObjectArray___destroy___0=function(){return t.asm.Db.apply(null,arguments)},gi=t._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0=function(){return t.asm.Eb.apply(null,arguments)},Ai=t._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1=function(){return t.asm.Fb.apply(null,arguments)},bi=t._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0=function(){return t.asm.Gb.apply(null,arguments)},xi=t._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1=function(){return t.asm.Hb.apply(null,arguments)},Ti=t._emscripten_bind_btBroadphaseProxy___destroy___0=function(){return t.asm.Ib.apply(null,arguments)},Si=t._emscripten_bind_btIndexedMesh_get_m_numTriangles_0=function(){return t.asm.Jb.apply(null,arguments)},Ei=t._emscripten_bind_btIndexedMesh_set_m_numTriangles_1=function(){return t.asm.Kb.apply(null,arguments)},Ci=t._emscripten_bind_btIndexedMesh___destroy___0=function(){return t.asm.Lb.apply(null,arguments)},wi=t._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3=function(){return t.asm.Mb.apply(null,arguments)},ki=t._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4=function(){return t.asm.Nb.apply(null,arguments)},Oi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0=function(){return t.asm.Ob.apply(null,arguments)},Ri=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1=function(){return t.asm.Pb.apply(null,arguments)},Fi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0=function(){return t.asm.Qb.apply(null,arguments)},Ii=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1=function(){return t.asm.Rb.apply(null,arguments)},Mi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0=function(){return t.asm.Sb.apply(null,arguments)},Pi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1=function(){return t.asm.Tb.apply(null,arguments)},Di=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0=function(){return t.asm.Ub.apply(null,arguments)},Bi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1=function(){return t.asm.Vb.apply(null,arguments)},Ni=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0=function(){return t.asm.Wb.apply(null,arguments)},Li=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1=function(){return t.asm.Xb.apply(null,arguments)},zi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0=function(){return t.asm.Yb.apply(null,arguments)},Gi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1=function(){return t.asm.Zb.apply(null,arguments)},Ui=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0=function(){return t.asm._b.apply(null,arguments)},Xi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1=function(){return t.asm.$b.apply(null,arguments)},Vi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0=function(){return t.asm.ac.apply(null,arguments)},Hi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1=function(){return t.asm.bc.apply(null,arguments)},ji=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0=function(){return t.asm.cc.apply(null,arguments)},Wi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1=function(){return t.asm.dc.apply(null,arguments)},Yi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0=function(){return t.asm.ec.apply(null,arguments)},qi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1=function(){return t.asm.fc.apply(null,arguments)},Qi=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0=function(){return t.asm.gc.apply(null,arguments)},Zi=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1=function(){return t.asm.hc.apply(null,arguments)},Ki=t._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0=function(){return t.asm.ic.apply(null,arguments)},Ji=t._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1=function(){return t.asm.jc.apply(null,arguments)},$i=t._emscripten_bind_btRigidBodyConstructionInfo___destroy___0=function(){return t.asm.kc.apply(null,arguments)},en=t._emscripten_bind_btManifoldPoint_getAppliedImpulse_0=function(){return t.asm.lc.apply(null,arguments)},tn=t._emscripten_bind_btManifoldPoint_getDistance_0=function(){return t.asm.mc.apply(null,arguments)},nn=t._emscripten_bind_btManifoldPoint_getShape0_0=function(){return t.asm.nc.apply(null,arguments)},rn=t._emscripten_bind_btManifoldPoint_getShape1_0=function(){return t.asm.oc.apply(null,arguments)},on=t._emscripten_bind_btManifoldPoint_get_m_localPointA_0=function(){return t.asm.pc.apply(null,arguments)},an=t._emscripten_bind_btManifoldPoint_set_m_localPointA_1=function(){return t.asm.qc.apply(null,arguments)},sn=t._emscripten_bind_btManifoldPoint_get_m_localPointB_0=function(){return t.asm.rc.apply(null,arguments)},ln=t._emscripten_bind_btManifoldPoint_set_m_localPointB_1=function(){return t.asm.sc.apply(null,arguments)},cn=t._emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0=function(){return t.asm.tc.apply(null,arguments)},un=t._emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1=function(){return t.asm.uc.apply(null,arguments)},hn=t._emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0=function(){return t.asm.vc.apply(null,arguments)},pn=t._emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1=function(){return t.asm.wc.apply(null,arguments)},fn=t._emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0=function(){return t.asm.xc.apply(null,arguments)},_n=t._emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1=function(){return t.asm.yc.apply(null,arguments)},dn=t._emscripten_bind_btManifoldPoint_get_m_distance1_0=function(){return t.asm.zc.apply(null,arguments)},mn=t._emscripten_bind_btManifoldPoint_set_m_distance1_1=function(){return t.asm.Ac.apply(null,arguments)},vn=t._emscripten_bind_btManifoldPoint_get_m_index0_0=function(){return t.asm.Bc.apply(null,arguments)},yn=t._emscripten_bind_btManifoldPoint_set_m_index0_1=function(){return t.asm.Cc.apply(null,arguments)},gn=t._emscripten_bind_btManifoldPoint_get_m_index1_0=function(){return t.asm.Dc.apply(null,arguments)},An=t._emscripten_bind_btManifoldPoint_set_m_index1_1=function(){return t.asm.Ec.apply(null,arguments)},bn=t._emscripten_bind_btManifoldPoint_get_m_userPersistentData_0=function(){return t.asm.Fc.apply(null,arguments)},xn=t._emscripten_bind_btManifoldPoint_set_m_userPersistentData_1=function(){return t.asm.Gc.apply(null,arguments)},Tn=t._emscripten_bind_btManifoldPoint_get_m_userPersistentData0_0=function(){return t.asm.Hc.apply(null,arguments)},Sn=t._emscripten_bind_btManifoldPoint_set_m_userPersistentData0_1=function(){return t.asm.Ic.apply(null,arguments)},En=t._emscripten_bind_btManifoldPoint_get_m_userPersistentData1_0=function(){return t.asm.Jc.apply(null,arguments)},Cn=t._emscripten_bind_btManifoldPoint_set_m_userPersistentData1_1=function(){return t.asm.Kc.apply(null,arguments)},wn=t._emscripten_bind_btManifoldPoint___destroy___0=function(){return t.asm.Lc.apply(null,arguments)},kn=t._emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0=function(){return t.asm.Mc.apply(null,arguments)},On=t._emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0=function(){return t.asm.Nc.apply(null,arguments)},Rn=t._emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4=function(){return t.asm.Oc.apply(null,arguments)},Fn=t._emscripten_bind_btDiscreteDynamicsWorld_setGravity_1=function(){return t.asm.Pc.apply(null,arguments)},In=t._emscripten_bind_btDiscreteDynamicsWorld_getGravity_0=function(){return t.asm.Qc.apply(null,arguments)},Mn=t._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1=function(){return t.asm.Rc.apply(null,arguments)},Pn=t._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3=function(){return t.asm.Sc.apply(null,arguments)},Dn=t._emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1=function(){return t.asm.Tc.apply(null,arguments)},Bn=t._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1=function(){return t.asm.Uc.apply(null,arguments)},Nn=t._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2=function(){return t.asm.Vc.apply(null,arguments)},Ln=t._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3=function(){return t.asm.Wc.apply(null,arguments)},zn=t._emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0=function(){return t.asm.Xc.apply(null,arguments)},Gn=t._emscripten_bind_btDiscreteDynamicsWorld_rayTest_3=function(){return t.asm.Yc.apply(null,arguments)},Un=t._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1=function(){return t.asm.Zc.apply(null,arguments)},Xn=t._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2=function(){return t.asm._c.apply(null,arguments)},Vn=t._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3=function(){return t.asm.$c.apply(null,arguments)},Hn=t._emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1=function(){return t.asm.ad.apply(null,arguments)},jn=t._emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0=function(){return t.asm.bd.apply(null,arguments)},Wn=t._emscripten_bind_btDiscreteDynamicsWorld___destroy___0=function(){return t.asm.cd.apply(null,arguments)},Yn=t._emscripten_bind_VoidPtr___destroy___0=function(){return t.asm.dd.apply(null,arguments)},qn=t._emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9=function(){return t.asm.ed.apply(null,arguments)},Qn=t._emscripten_bind_btHeightfieldTerrainShape_setMargin_1=function(){return t.asm.fd.apply(null,arguments)},Zn=t._emscripten_bind_btHeightfieldTerrainShape_getMargin_0=function(){return t.asm.gd.apply(null,arguments)},Kn=t._emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1=function(){return t.asm.hd.apply(null,arguments)},Jn=t._emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0=function(){return t.asm.id.apply(null,arguments)},$n=t._emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2=function(){return t.asm.jd.apply(null,arguments)},er=t._emscripten_bind_btHeightfieldTerrainShape_isCompound_0=function(){return t.asm.kd.apply(null,arguments)},tr=t._emscripten_bind_btHeightfieldTerrainShape_getUserIndex_0=function(){return t.asm.ld.apply(null,arguments)},ir=t._emscripten_bind_btHeightfieldTerrainShape_setUserIndex_1=function(){return t.asm.md.apply(null,arguments)},nr=t._emscripten_bind_btHeightfieldTerrainShape___destroy___0=function(){return t.asm.nd.apply(null,arguments)},rr=t._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0=function(){return t.asm.od.apply(null,arguments)},or=t._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1=function(){return t.asm.pd.apply(null,arguments)},ar=t._emscripten_bind_btDefaultCollisionConfiguration___destroy___0=function(){return t.asm.qd.apply(null,arguments)},sr=t._emscripten_bind_btOverlappingPairCallback___destroy___0=function(){return t.asm.rd.apply(null,arguments)},lr=t._emscripten_bind_btTriangleMesh_btTriangleMesh_0=function(){return t.asm.sd.apply(null,arguments)},cr=t._emscripten_bind_btTriangleMesh_btTriangleMesh_1=function(){return t.asm.td.apply(null,arguments)},ur=t._emscripten_bind_btTriangleMesh_btTriangleMesh_2=function(){return t.asm.ud.apply(null,arguments)},hr=t._emscripten_bind_btTriangleMesh_addTriangle_3=function(){return t.asm.vd.apply(null,arguments)},pr=t._emscripten_bind_btTriangleMesh_addTriangle_4=function(){return t.asm.wd.apply(null,arguments)},fr=t._emscripten_bind_btTriangleMesh_addTriangleIndices_3=function(){return t.asm.xd.apply(null,arguments)},_r=t._emscripten_bind_btTriangleMesh_getIndexedMeshArray_0=function(){return t.asm.yd.apply(null,arguments)},dr=t._emscripten_bind_btTriangleMesh_setScaling_1=function(){return t.asm.zd.apply(null,arguments)},mr=t._emscripten_bind_btTriangleMesh___destroy___0=function(){return t.asm.Ad.apply(null,arguments)},vr=t._emscripten_bind_btCollisionConfiguration___destroy___0=function(){return t.asm.Bd.apply(null,arguments)},yr=t._emscripten_bind_btPersistentManifold_btPersistentManifold_0=function(){return t.asm.Cd.apply(null,arguments)},gr=t._emscripten_bind_btPersistentManifold_getBody0_0=function(){return t.asm.Dd.apply(null,arguments)},Ar=t._emscripten_bind_btPersistentManifold_getBody1_0=function(){return t.asm.Ed.apply(null,arguments)},br=t._emscripten_bind_btPersistentManifold_getNumContacts_0=function(){return t.asm.Fd.apply(null,arguments)},xr=t._emscripten_bind_btPersistentManifold_getContactPoint_1=function(){return t.asm.Gd.apply(null,arguments)},Tr=t._emscripten_bind_btPersistentManifold___destroy___0=function(){return t.asm.Hd.apply(null,arguments)},Sr=t._emscripten_bind_btBoxShape_btBoxShape_1=function(){return t.asm.Id.apply(null,arguments)},Er=t._emscripten_bind_btBoxShape_setMargin_1=function(){return t.asm.Jd.apply(null,arguments)},Cr=t._emscripten_bind_btBoxShape_getMargin_0=function(){return t.asm.Kd.apply(null,arguments)},wr=t._emscripten_bind_btBoxShape_setLocalScaling_1=function(){return t.asm.Ld.apply(null,arguments)},kr=t._emscripten_bind_btBoxShape_getLocalScaling_0=function(){return t.asm.Md.apply(null,arguments)},Or=t._emscripten_bind_btBoxShape_calculateLocalInertia_2=function(){return t.asm.Nd.apply(null,arguments)},Rr=t._emscripten_bind_btBoxShape_isCompound_0=function(){return t.asm.Od.apply(null,arguments)},Fr=t._emscripten_bind_btBoxShape_getUserIndex_0=function(){return t.asm.Pd.apply(null,arguments)},Ir=t._emscripten_bind_btBoxShape_setUserIndex_1=function(){return t.asm.Qd.apply(null,arguments)},Mr=t._emscripten_bind_btBoxShape_getImplicitShapeDimensions_0=function(){return t.asm.Rd.apply(null,arguments)},Pr=t._emscripten_bind_btBoxShape___destroy___0=function(){return t.asm.Sd.apply(null,arguments)},Dr=t._emscripten_bind_btCapsuleShape_btCapsuleShape_2=function(){return t.asm.Td.apply(null,arguments)},Br=t._emscripten_bind_btCapsuleShape_setMargin_1=function(){return t.asm.Ud.apply(null,arguments)},Nr=t._emscripten_bind_btCapsuleShape_getMargin_0=function(){return t.asm.Vd.apply(null,arguments)},Lr=t._emscripten_bind_btCapsuleShape_updateProp_3=function(){return t.asm.Wd.apply(null,arguments)},zr=t._emscripten_bind_btCapsuleShape_setLocalScaling_1=function(){return t.asm.Xd.apply(null,arguments)},Gr=t._emscripten_bind_btCapsuleShape_getLocalScaling_0=function(){return t.asm.Yd.apply(null,arguments)},Ur=t._emscripten_bind_btCapsuleShape_calculateLocalInertia_2=function(){return t.asm.Zd.apply(null,arguments)},Xr=t._emscripten_bind_btCapsuleShape_isCompound_0=function(){return t.asm._d.apply(null,arguments)},Vr=t._emscripten_bind_btCapsuleShape_getUserIndex_0=function(){return t.asm.$d.apply(null,arguments)},Hr=t._emscripten_bind_btCapsuleShape_setUserIndex_1=function(){return t.asm.ae.apply(null,arguments)},jr=t._emscripten_bind_btCapsuleShape_getImplicitShapeDimensions_0=function(){return t.asm.be.apply(null,arguments)},Wr=t._emscripten_bind_btCapsuleShape___destroy___0=function(){return t.asm.ce.apply(null,arguments)},Yr=t._emscripten_bind_btCompoundShape_btCompoundShape_0=function(){return t.asm.de.apply(null,arguments)},qr=t._emscripten_bind_btCompoundShape_btCompoundShape_1=function(){return t.asm.ee.apply(null,arguments)},Qr=t._emscripten_bind_btCompoundShape_addChildShape_2=function(){return t.asm.fe.apply(null,arguments)},Zr=t._emscripten_bind_btCompoundShape_removeChildShape_1=function(){return t.asm.ge.apply(null,arguments)},Kr=t._emscripten_bind_btCompoundShape_removeChildShapeByIndex_1=function(){return t.asm.he.apply(null,arguments)},Jr=t._emscripten_bind_btCompoundShape_getNumChildShapes_0=function(){return t.asm.ie.apply(null,arguments)},$r=t._emscripten_bind_btCompoundShape_getChildShape_1=function(){return t.asm.je.apply(null,arguments)},eo=t._emscripten_bind_btCompoundShape_updateChildTransform_2=function(){return t.asm.ke.apply(null,arguments)},to=t._emscripten_bind_btCompoundShape_updateChildTransform_3=function(){return t.asm.le.apply(null,arguments)},io=t._emscripten_bind_btCompoundShape_setMargin_1=function(){return t.asm.me.apply(null,arguments)},no=t._emscripten_bind_btCompoundShape_getMargin_0=function(){return t.asm.ne.apply(null,arguments)},ro=t._emscripten_bind_btCompoundShape_setMaterial_3=function(){return t.asm.oe.apply(null,arguments)},oo=t._emscripten_bind_btCompoundShape_setMaterial_4=function(){return t.asm.pe.apply(null,arguments)},ao=t._emscripten_bind_btCompoundShape_setLocalScaling_1=function(){return t.asm.qe.apply(null,arguments)},so=t._emscripten_bind_btCompoundShape_getLocalScaling_0=function(){return t.asm.re.apply(null,arguments)},lo=t._emscripten_bind_btCompoundShape_calculateLocalInertia_2=function(){return t.asm.se.apply(null,arguments)},co=t._emscripten_bind_btCompoundShape_isCompound_0=function(){return t.asm.te.apply(null,arguments)},uo=t._emscripten_bind_btCompoundShape_getUserIndex_0=function(){return t.asm.ue.apply(null,arguments)},ho=t._emscripten_bind_btCompoundShape_setUserIndex_1=function(){return t.asm.ve.apply(null,arguments)},po=t._emscripten_bind_btCompoundShape___destroy___0=function(){return t.asm.we.apply(null,arguments)},fo=t._emscripten_bind_btDefaultMotionState_btDefaultMotionState_0=function(){return t.asm.xe.apply(null,arguments)},_o=t._emscripten_bind_btDefaultMotionState_btDefaultMotionState_1=function(){return t.asm.ye.apply(null,arguments)},mo=t._emscripten_bind_btDefaultMotionState_btDefaultMotionState_2=function(){return t.asm.ze.apply(null,arguments)},vo=t._emscripten_bind_btDefaultMotionState_getWorldTransform_1=function(){return t.asm.Ae.apply(null,arguments)},yo=t._emscripten_bind_btDefaultMotionState_setWorldTransform_1=function(){return t.asm.Be.apply(null,arguments)},go=t._emscripten_bind_btDefaultMotionState___destroy___0=function(){return t.asm.Ce.apply(null,arguments)},Ao=t._emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2=function(){return t.asm.De.apply(null,arguments)},bo=t._emscripten_bind_AllHitsRayResultCallback_hasHit_0=function(){return t.asm.Ee.apply(null,arguments)},xo=t._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0=function(){return t.asm.Fe.apply(null,arguments)},To=t._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1=function(){return t.asm.Ge.apply(null,arguments)},So=t._emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0=function(){return t.asm.He.apply(null,arguments)},Eo=t._emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1=function(){return t.asm.Ie.apply(null,arguments)},Co=t._emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0=function(){return t.asm.Je.apply(null,arguments)},wo=t._emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1=function(){return t.asm.Ke.apply(null,arguments)},ko=t._emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0=function(){return t.asm.Le.apply(null,arguments)},Oo=t._emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1=function(){return t.asm.Me.apply(null,arguments)},Ro=t._emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0=function(){return t.asm.Ne.apply(null,arguments)},Fo=t._emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1=function(){return t.asm.Oe.apply(null,arguments)},Io=t._emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0=function(){return t.asm.Pe.apply(null,arguments)},Mo=t._emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1=function(){return t.asm.Qe.apply(null,arguments)},Po=t._emscripten_bind_AllHitsRayResultCallback_get_m_shapeParts_0=function(){return t.asm.Re.apply(null,arguments)},Do=t._emscripten_bind_AllHitsRayResultCallback_set_m_shapeParts_1=function(){return t.asm.Se.apply(null,arguments)},Bo=t._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0=function(){return t.asm.Te.apply(null,arguments)},No=t._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1=function(){return t.asm.Ue.apply(null,arguments)},Lo=t._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0=function(){return t.asm.Ve.apply(null,arguments)},zo=t._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1=function(){return t.asm.We.apply(null,arguments)},Go=t._emscripten_bind_AllHitsRayResultCallback_get_m_shapePart_0=function(){return t.asm.Xe.apply(null,arguments)},Uo=t._emscripten_bind_AllHitsRayResultCallback_set_m_shapePart_1=function(){return t.asm.Ye.apply(null,arguments)},Xo=t._emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0=function(){return t.asm.Ze.apply(null,arguments)},Vo=t._emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1=function(){return t.asm._e.apply(null,arguments)},Ho=t._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0=function(){return t.asm.$e.apply(null,arguments)},jo=t._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1=function(){return t.asm.af.apply(null,arguments)},Wo=t._emscripten_bind_AllHitsRayResultCallback___destroy___0=function(){return t.asm.bf.apply(null,arguments)},Yo=t._emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2=function(){return t.asm.cf.apply(null,arguments)},qo=t._emscripten_bind_ClosestRayResultCallback_hasHit_0=function(){return t.asm.df.apply(null,arguments)},Qo=t._emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0=function(){return t.asm.ef.apply(null,arguments)},Zo=t._emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1=function(){return t.asm.ff.apply(null,arguments)},Ko=t._emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0=function(){return t.asm.gf.apply(null,arguments)},Jo=t._emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1=function(){return t.asm.hf.apply(null,arguments)},$o=t._emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0=function(){return t.asm.jf.apply(null,arguments)},ea=t._emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1=function(){return t.asm.kf.apply(null,arguments)},ta=t._emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0=function(){return t.asm.lf.apply(null,arguments)},ia=t._emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1=function(){return t.asm.mf.apply(null,arguments)},na=t._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0=function(){return t.asm.nf.apply(null,arguments)},ra=t._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1=function(){return t.asm.of.apply(null,arguments)},oa=t._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0=function(){return t.asm.pf.apply(null,arguments)},aa=t._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1=function(){return t.asm.qf.apply(null,arguments)},sa=t._emscripten_bind_ClosestRayResultCallback_get_m_shapePart_0=function(){return t.asm.rf.apply(null,arguments)},la=t._emscripten_bind_ClosestRayResultCallback_set_m_shapePart_1=function(){return t.asm.sf.apply(null,arguments)},ca=t._emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0=function(){return t.asm.tf.apply(null,arguments)},ua=t._emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1=function(){return t.asm.uf.apply(null,arguments)},ha=t._emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0=function(){return t.asm.vf.apply(null,arguments)},pa=t._emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1=function(){return t.asm.wf.apply(null,arguments)},fa=t._emscripten_bind_ClosestRayResultCallback___destroy___0=function(){return t.asm.xf.apply(null,arguments)},_a=t._emscripten_bind_btQuaternion_btQuaternion_4=function(){return t.asm.yf.apply(null,arguments)},da=t._emscripten_bind_btQuaternion_setValue_4=function(){return t.asm.zf.apply(null,arguments)},ma=t._emscripten_bind_btQuaternion_x_0=function(){return t.asm.Af.apply(null,arguments)},va=t._emscripten_bind_btQuaternion_y_0=function(){return t.asm.Bf.apply(null,arguments)},ya=t._emscripten_bind_btQuaternion_z_0=function(){return t.asm.Cf.apply(null,arguments)},ga=t._emscripten_bind_btQuaternion_w_0=function(){return t.asm.Df.apply(null,arguments)},Aa=t._emscripten_bind_btQuaternion_setX_1=function(){return t.asm.Ef.apply(null,arguments)},ba=t._emscripten_bind_btQuaternion_setY_1=function(){return t.asm.Ff.apply(null,arguments)},xa=t._emscripten_bind_btQuaternion_setZ_1=function(){return t.asm.Gf.apply(null,arguments)},Ta=t._emscripten_bind_btQuaternion_setW_1=function(){return t.asm.Hf.apply(null,arguments)},Sa=t._emscripten_bind_btQuaternion___destroy___0=function(){return t.asm.If.apply(null,arguments)},Ea=t._emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0=function(){return t.asm.Jf.apply(null,arguments)},Ca=t._emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1=function(){return t.asm.Kf.apply(null,arguments)},wa=t._emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0=function(){return t.asm.Lf.apply(null,arguments)},ka=t._emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1=function(){return t.asm.Mf.apply(null,arguments)},Oa=t._emscripten_bind_btContactSolverInfo_get_m_numIterations_0=function(){return t.asm.Nf.apply(null,arguments)},Ra=t._emscripten_bind_btContactSolverInfo_set_m_numIterations_1=function(){return t.asm.Of.apply(null,arguments)},Fa=t._emscripten_bind_btContactSolverInfo___destroy___0=function(){return t.asm.Pf.apply(null,arguments)},Ia=t._emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1=function(){return t.asm.Qf.apply(null,arguments)},Ma=t._emscripten_bind_btOverlappingPairCache_getNumOverlappingPairs_0=function(){return t.asm.Rf.apply(null,arguments)},Pa=t._emscripten_bind_btOverlappingPairCache___destroy___0=function(){return t.asm.Sf.apply(null,arguments)},Da=t._emscripten_bind_btVector3_btVector3_0=function(){return t.asm.Tf.apply(null,arguments)},Ba=t._emscripten_bind_btVector3_btVector3_3=function(){return t.asm.Uf.apply(null,arguments)},Na=t._emscripten_bind_btVector3_x_0=function(){return t.asm.Vf.apply(null,arguments)},La=t._emscripten_bind_btVector3_y_0=function(){return t.asm.Wf.apply(null,arguments)},za=t._emscripten_bind_btVector3_z_0=function(){return t.asm.Xf.apply(null,arguments)},Ga=t._emscripten_bind_btVector3_setX_1=function(){return t.asm.Yf.apply(null,arguments)},Ua=t._emscripten_bind_btVector3_setY_1=function(){return t.asm.Zf.apply(null,arguments)},Xa=t._emscripten_bind_btVector3_setZ_1=function(){return t.asm._f.apply(null,arguments)},Va=t._emscripten_bind_btVector3_setValue_3=function(){return t.asm.$f.apply(null,arguments)},Ha=t._emscripten_bind_btVector3___destroy___0=function(){return t.asm.ag.apply(null,arguments)},ja=t._emscripten_bind_btSphereShape_btSphereShape_1=function(){return t.asm.bg.apply(null,arguments)},Wa=t._emscripten_bind_btSphereShape_setMargin_1=function(){return t.asm.cg.apply(null,arguments)},Ya=t._emscripten_bind_btSphereShape_getMargin_0=function(){return t.asm.dg.apply(null,arguments)},qa=t._emscripten_bind_btSphereShape_setLocalScaling_1=function(){return t.asm.eg.apply(null,arguments)},Qa=t._emscripten_bind_btSphereShape_getLocalScaling_0=function(){return t.asm.fg.apply(null,arguments)},Za=t._emscripten_bind_btSphereShape_calculateLocalInertia_2=function(){return t.asm.gg.apply(null,arguments)},Ka=t._emscripten_bind_btSphereShape_isCompound_0=function(){return t.asm.hg.apply(null,arguments)},Ja=t._emscripten_bind_btSphereShape_getUserIndex_0=function(){return t.asm.ig.apply(null,arguments)},$a=t._emscripten_bind_btSphereShape_setUserIndex_1=function(){return t.asm.jg.apply(null,arguments)},es=t._emscripten_bind_btSphereShape_getImplicitShapeDimensions_0=function(){return t.asm.kg.apply(null,arguments)},ts=t._emscripten_bind_btSphereShape___destroy___0=function(){return t.asm.lg.apply(null,arguments)},is=t._emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0=function(){return t.asm.mg.apply(null,arguments)},ns=t._emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0=function(){return t.asm.ng.apply(null,arguments)},rs=t._emscripten_bind_btEmptyShape_btEmptyShape_0=function(){return t.asm.og.apply(null,arguments)},os=t._emscripten_bind_btEmptyShape_setLocalScaling_1=function(){return t.asm.pg.apply(null,arguments)},as=t._emscripten_bind_btEmptyShape_getLocalScaling_0=function(){return t.asm.qg.apply(null,arguments)},ss=t._emscripten_bind_btEmptyShape_calculateLocalInertia_2=function(){return t.asm.rg.apply(null,arguments)},ls=t._emscripten_bind_btEmptyShape_isCompound_0=function(){return t.asm.sg.apply(null,arguments)},cs=t._emscripten_bind_btEmptyShape_getUserIndex_0=function(){return t.asm.tg.apply(null,arguments)},us=t._emscripten_bind_btEmptyShape_setUserIndex_1=function(){return t.asm.ug.apply(null,arguments)},hs=t._emscripten_bind_btEmptyShape___destroy___0=function(){return t.asm.vg.apply(null,arguments)},ps=t._emscripten_bind_LocalShapeInfo_get_m_shapePart_0=function(){return t.asm.wg.apply(null,arguments)},fs=t._emscripten_bind_LocalShapeInfo_set_m_shapePart_1=function(){return t.asm.xg.apply(null,arguments)},_s=t._emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0=function(){return t.asm.yg.apply(null,arguments)},ds=t._emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1=function(){return t.asm.zg.apply(null,arguments)},ms=t._emscripten_bind_LocalShapeInfo___destroy___0=function(){return t.asm.Ag.apply(null,arguments)},vs=t._emscripten_bind_btVector3Array_size_0=function(){return t.asm.Bg.apply(null,arguments)},ys=t._emscripten_bind_btVector3Array_at_1=function(){return t.asm.Cg.apply(null,arguments)},gs=t._emscripten_bind_btVector3Array_clear_0=function(){return t.asm.Dg.apply(null,arguments)},As=t._emscripten_bind_btVector3Array___destroy___0=function(){return t.asm.Eg.apply(null,arguments)},bs=t._emscripten_bind_btConstraintSolver___destroy___0=function(){return t.asm.Fg.apply(null,arguments)},xs=t._emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1=function(){return t.asm.Gg.apply(null,arguments)},Ts=t._emscripten_bind_btCollisionDispatcher_getNumManifolds_0=function(){return t.asm.Hg.apply(null,arguments)},Ss=t._emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1=function(){return t.asm.Ig.apply(null,arguments)},Es=t._emscripten_bind_btCollisionDispatcher___destroy___0=function(){return t.asm.Jg.apply(null,arguments)},Cs=t._emscripten_bind_btRigidBody_btRigidBody_1=function(){return t.asm.Kg.apply(null,arguments)},ws=t._emscripten_bind_btRigidBody_getCenterOfMassTransform_0=function(){return t.asm.Lg.apply(null,arguments)},ks=t._emscripten_bind_btRigidBody_getLinearDamping_0=function(){return t.asm.Mg.apply(null,arguments)},Os=t._emscripten_bind_btRigidBody_getAngularDamping_0=function(){return t.asm.Ng.apply(null,arguments)},Rs=t._emscripten_bind_btRigidBody_setDamping_2=function(){return t.asm.Og.apply(null,arguments)},Fs=t._emscripten_bind_btRigidBody_setMassProps_2=function(){return t.asm.Pg.apply(null,arguments)},Is=t._emscripten_bind_btRigidBody_getLinearFactor_0=function(){return t.asm.Qg.apply(null,arguments)},Ms=t._emscripten_bind_btRigidBody_setLinearFactor_1=function(){return t.asm.Rg.apply(null,arguments)},Ps=t._emscripten_bind_btRigidBody_applyTorque_1=function(){return t.asm.Sg.apply(null,arguments)},Ds=t._emscripten_bind_btRigidBody_applyForce_2=function(){return t.asm.Tg.apply(null,arguments)},Bs=t._emscripten_bind_btRigidBody_applyCentralForce_1=function(){return t.asm.Ug.apply(null,arguments)},Ns=t._emscripten_bind_btRigidBody_applyTorqueImpulse_1=function(){return t.asm.Vg.apply(null,arguments)},Ls=t._emscripten_bind_btRigidBody_applyImpulse_2=function(){return t.asm.Wg.apply(null,arguments)},zs=t._emscripten_bind_btRigidBody_applyCentralImpulse_1=function(){return t.asm.Xg.apply(null,arguments)},Gs=t._emscripten_bind_btRigidBody_updateInertiaTensor_0=function(){return t.asm.Yg.apply(null,arguments)},Us=t._emscripten_bind_btRigidBody_getLinearVelocity_0=function(){return t.asm.Zg.apply(null,arguments)},Xs=t._emscripten_bind_btRigidBody_getAngularVelocity_0=function(){return t.asm._g.apply(null,arguments)},Vs=t._emscripten_bind_btRigidBody_setLinearVelocity_1=function(){return t.asm.$g.apply(null,arguments)},Hs=t._emscripten_bind_btRigidBody_setAngularVelocity_1=function(){return t.asm.ah.apply(null,arguments)},js=t._emscripten_bind_btRigidBody_getMotionState_0=function(){return t.asm.bh.apply(null,arguments)},Ws=t._emscripten_bind_btRigidBody_setMotionState_1=function(){return t.asm.ch.apply(null,arguments)},Ys=t._emscripten_bind_btRigidBody_getAngularFactor_0=function(){return t.asm.dh.apply(null,arguments)},qs=t._emscripten_bind_btRigidBody_setAngularFactor_1=function(){return t.asm.eh.apply(null,arguments)},Qs=t._emscripten_bind_btRigidBody_upcast_1=function(){return t.asm.fh.apply(null,arguments)},Zs=t._emscripten_bind_btRigidBody_getAabb_2=function(){return t.asm.gh.apply(null,arguments)},Ks=t._emscripten_bind_btRigidBody_applyGravity_0=function(){return t.asm.hh.apply(null,arguments)},Js=t._emscripten_bind_btRigidBody_getGravity_0=function(){return t.asm.ih.apply(null,arguments)},$s=t._emscripten_bind_btRigidBody_setGravity_1=function(){return t.asm.jh.apply(null,arguments)},el=t._emscripten_bind_btRigidBody_getFlags_0=function(){return t.asm.kh.apply(null,arguments)},tl=t._emscripten_bind_btRigidBody_setFlags_1=function(){return t.asm.lh.apply(null,arguments)},il=t._emscripten_bind_btRigidBody_wantsSleeping_0=function(){return t.asm.mh.apply(null,arguments)},nl=t._emscripten_bind_btRigidBody_clearState_0=function(){return t.asm.nh.apply(null,arguments)},rl=t._emscripten_bind_btRigidBody_setAnisotropicFriction_2=function(){return t.asm.oh.apply(null,arguments)},ol=t._emscripten_bind_btRigidBody_getCollisionShape_0=function(){return t.asm.ph.apply(null,arguments)},al=t._emscripten_bind_btRigidBody_getActivationState_0=function(){return t.asm.qh.apply(null,arguments)},sl=t._emscripten_bind_btRigidBody_setActivationState_1=function(){return t.asm.rh.apply(null,arguments)},ll=t._emscripten_bind_btRigidBody_forceActivationState_1=function(){return t.asm.sh.apply(null,arguments)},cl=t._emscripten_bind_btRigidBody_activate_0=function(){return t.asm.th.apply(null,arguments)},ul=t._emscripten_bind_btRigidBody_activate_1=function(){return t.asm.uh.apply(null,arguments)},hl=t._emscripten_bind_btRigidBody_isActive_0=function(){return t.asm.vh.apply(null,arguments)},pl=t._emscripten_bind_btRigidBody_isKinematicObject_0=function(){return t.asm.wh.apply(null,arguments)},fl=t._emscripten_bind_btRigidBody_isStaticObject_0=function(){return t.asm.xh.apply(null,arguments)},_l=t._emscripten_bind_btRigidBody_isStaticOrKinematicObject_0=function(){return t.asm.yh.apply(null,arguments)},dl=t._emscripten_bind_btRigidBody_setRestitution_1=function(){return t.asm.zh.apply(null,arguments)},ml=t._emscripten_bind_btRigidBody_setFriction_1=function(){return t.asm.Ah.apply(null,arguments)},vl=t._emscripten_bind_btRigidBody_setRollingFriction_1=function(){return t.asm.Bh.apply(null,arguments)},yl=t._emscripten_bind_btRigidBody_getWorldTransform_0=function(){return t.asm.Ch.apply(null,arguments)},gl=t._emscripten_bind_btRigidBody_getCollisionFlags_0=function(){return t.asm.Dh.apply(null,arguments)},Al=t._emscripten_bind_btRigidBody_setCollisionFlags_1=function(){return t.asm.Eh.apply(null,arguments)},bl=t._emscripten_bind_btRigidBody_setWorldTransform_1=function(){return t.asm.Fh.apply(null,arguments)},xl=t._emscripten_bind_btRigidBody_setCollisionShape_1=function(){return t.asm.Gh.apply(null,arguments)},Tl=t._emscripten_bind_btRigidBody_setCcdMotionThreshold_1=function(){return t.asm.Hh.apply(null,arguments)},Sl=t._emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1=function(){return t.asm.Ih.apply(null,arguments)},El=t._emscripten_bind_btRigidBody_getUserIndex_0=function(){return t.asm.Jh.apply(null,arguments)},Cl=t._emscripten_bind_btRigidBody_setUserIndex_1=function(){return t.asm.Kh.apply(null,arguments)},wl=t._emscripten_bind_btRigidBody___destroy___0=function(){return t.asm.Lh.apply(null,arguments)},kl=t._emscripten_bind_btIndexedMeshArray_size_0=function(){return t.asm.Mh.apply(null,arguments)},Ol=t._emscripten_bind_btIndexedMeshArray_at_1=function(){return t.asm.Nh.apply(null,arguments)},Rl=t._emscripten_bind_btIndexedMeshArray___destroy___0=function(){return t.asm.Oh.apply(null,arguments)},Fl=t._emscripten_bind_btTransform_btTransform_0=function(){return t.asm.Ph.apply(null,arguments)},Il=t._emscripten_bind_btTransform_btTransform_2=function(){return t.asm.Qh.apply(null,arguments)},Ml=t._emscripten_bind_btTransform_setIdentity_0=function(){return t.asm.Rh.apply(null,arguments)},Pl=t._emscripten_bind_btTransform_setOrigin_1=function(){return t.asm.Sh.apply(null,arguments)},Dl=t._emscripten_bind_btTransform_setRotation_1=function(){return t.asm.Th.apply(null,arguments)},Bl=t._emscripten_bind_btTransform_getOrigin_0=function(){return t.asm.Uh.apply(null,arguments)},Nl=t._emscripten_bind_btTransform_getRotation_0=function(){return t.asm.Vh.apply(null,arguments)},Ll=t._emscripten_bind_btTransform_getBasis_0=function(){return t.asm.Wh.apply(null,arguments)},zl=t._emscripten_bind_btTransform_inverse_0=function(){return t.asm.Xh.apply(null,arguments)},Gl=t._emscripten_bind_btTransform_op_mul_1=function(){return t.asm.Yh.apply(null,arguments)},Ul=t._emscripten_bind_btTransform___destroy___0=function(){return t.asm.Zh.apply(null,arguments)},Xl=t._emscripten_bind_btCylinderShape_btCylinderShape_1=function(){return t.asm._h.apply(null,arguments)},Vl=t._emscripten_bind_btCylinderShape_setMargin_1=function(){return t.asm.$h.apply(null,arguments)},Hl=t._emscripten_bind_btCylinderShape_getMargin_0=function(){return t.asm.ai.apply(null,arguments)},jl=t._emscripten_bind_btCylinderShape_updateProp_3=function(){return t.asm.bi.apply(null,arguments)},Wl=t._emscripten_bind_btCylinderShape_setLocalScaling_1=function(){return t.asm.ci.apply(null,arguments)},Yl=t._emscripten_bind_btCylinderShape_getLocalScaling_0=function(){return t.asm.di.apply(null,arguments)},ql=t._emscripten_bind_btCylinderShape_calculateLocalInertia_2=function(){return t.asm.ei.apply(null,arguments)},Ql=t._emscripten_bind_btCylinderShape_isCompound_0=function(){return t.asm.fi.apply(null,arguments)},Zl=t._emscripten_bind_btCylinderShape_getUserIndex_0=function(){return t.asm.gi.apply(null,arguments)},Kl=t._emscripten_bind_btCylinderShape_setUserIndex_1=function(){return t.asm.hi.apply(null,arguments)},Jl=t._emscripten_bind_btCylinderShape_getImplicitShapeDimensions_0=function(){return t.asm.ii.apply(null,arguments)},$l=t._emscripten_bind_btCylinderShape___destroy___0=function(){return t.asm.ji.apply(null,arguments)},ec=t._emscripten_enum_PHY_ScalarType_PHY_FLOAT=function(){return t.asm.ki.apply(null,arguments)},tc=t._emscripten_enum_PHY_ScalarType_PHY_DOUBLE=function(){return t.asm.li.apply(null,arguments)},ic=t._emscripten_enum_PHY_ScalarType_PHY_INTEGER=function(){return t.asm.mi.apply(null,arguments)},nc=t._emscripten_enum_PHY_ScalarType_PHY_SHORT=function(){return t.asm.ni.apply(null,arguments)},rc=t._emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88=function(){return t.asm.oi.apply(null,arguments)},oc=t._emscripten_enum_PHY_ScalarType_PHY_UCHAR=function(){return t.asm.pi.apply(null,arguments)};t._malloc=function(){return t.asm.qi.apply(null,arguments)},t._free=function(){return t.asm.ri.apply(null,arguments)};var ac,sc=t.__growWasmMemory=function(){return t.asm.si.apply(null,arguments)};function lc(){function e(){if(!ac&&(ac=!0,!A)){if(M=!0,k(R),k(F),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();I.unshift(e)}k(I)}}if(!(0<B)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)P();k(O),0<B||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.dynCall_vi=function(){return t.asm.ti.apply(null,arguments)},t.dynCall_v=function(){return t.asm.ui.apply(null,arguments)},t.asm=Q,t.addFunction=function(e,t){var i=g.length;try{g.grow(1)}catch(e){if(!e instanceof RangeError)throw e;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{g.set(i,e)}catch(n){if(!n instanceof TypeError)throw n;b(void 0!==t,"Missing signature argument to addFunction"),g.set(i,e)}return i},t.then=function(e){if(ac)e(t);else{var i=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){i&&i(),e(t)}}return t},N=function e(){ac||lc(),ac||(N=e)},t.run=lc,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();function cc(){}function uc(e){return(e||cc).xi}function hc(e,t){var i=uc(t),n=i[e];return n||((n=Object.create((t||cc).prototype)).vi=e,i[e]=n)}function pc(){throw"cannot construct a btCollisionShape, no constructor in IDL"}function fc(){throw"cannot construct a btCollisionWorld, no constructor in IDL"}function _c(){throw"cannot construct a btConcaveShape, no constructor in IDL"}function dc(){throw"cannot construct a btStridingMeshInterface, no constructor in IDL"}function mc(){this.vi=xe(),uc(mc)[this.vi]=this}function vc(){throw"cannot construct a btMotionState, no constructor in IDL"}function yc(){throw"cannot construct a btDispatcher, no constructor in IDL"}function gc(){throw"cannot construct a btConvexInternalShape, no constructor in IDL"}function Ac(){throw"cannot construct a btDynamicsWorld, no constructor in IDL"}function bc(){throw"cannot construct a btBroadphaseInterface, no constructor in IDL"}function xc(){throw"cannot construct a RayResultCallback, no constructor in IDL"}function Tc(){throw"cannot construct a btTriangleMeshShape, no constructor in IDL"}function Sc(){throw"cannot construct a btQuadWord, no constructor in IDL"}function Ec(){throw"cannot construct a btMatrix3x3, no constructor in IDL"}function Cc(){throw"cannot construct a btScalarArray, no constructor in IDL"}function wc(e,t,i){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),this.vi=void 0===i?$t(e,t):ei(e,t,i),uc(wc)[this.vi]=this}function kc(){this.vi=li(),uc(kc)[this.vi]=this}function Oc(){throw"cannot construct a btIntArray, no constructor in IDL"}function Rc(){throw"cannot construct a btConstCollisionObjectArray, no constructor in IDL"}function Fc(){throw"cannot construct a btBroadphaseProxy, no constructor in IDL"}function Ic(){throw"cannot construct a btIndexedMesh, no constructor in IDL"}function Mc(e,t,i,n){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),this.vi=void 0===n?wi(e,t,i):ki(e,t,i,n),uc(Mc)[this.vi]=this}function Pc(){throw"cannot construct a btManifoldPoint, no constructor in IDL"}function Dc(){this.vi=kn(),uc(Dc)[this.vi]=this}function Bc(e,t,i,n){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),this.vi=Rn(e,t,i,n),uc(Bc)[this.vi]=this}function Nc(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Lc(e,t,i,n,r,o,a,s,l){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),r&&"object"==typeof r&&(r=r.vi),o&&"object"==typeof o&&(o=o.vi),a&&"object"==typeof a&&(a=a.vi),s&&"object"==typeof s&&(s=s.vi),l&&"object"==typeof l&&(l=l.vi),this.vi=qn(e,t,i,n,r,o,a,s,l),uc(Lc)[this.vi]=this}function zc(e){e&&"object"==typeof e&&(e=e.vi),this.vi=void 0===e?rr():or(e),uc(zc)[this.vi]=this}function Gc(){throw"cannot construct a btOverlappingPairCallback, no constructor in IDL"}function Uc(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=void 0===e?lr():void 0===t?cr(e):ur(e,t),uc(Uc)[this.vi]=this}function Xc(){throw"cannot construct a btCollisionConfiguration, no constructor in IDL"}function Vc(){this.vi=yr(),uc(Vc)[this.vi]=this}function Hc(e){e&&"object"==typeof e&&(e=e.vi),this.vi=Sr(e),uc(Hc)[this.vi]=this}function jc(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=Dr(e,t),uc(jc)[this.vi]=this}function Wc(e){e&&"object"==typeof e&&(e=e.vi),this.vi=void 0===e?Yr():qr(e),uc(Wc)[this.vi]=this}function Yc(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=void 0===e?fo():void 0===t?_o(e):mo(e,t),uc(Yc)[this.vi]=this}function qc(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=Ao(e,t),uc(qc)[this.vi]=this}function Qc(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=Yo(e,t),uc(Qc)[this.vi]=this}function Zc(e,t,i,n){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),this.vi=_a(e,t,i,n),uc(Zc)[this.vi]=this}function Kc(){throw"cannot construct a btContactSolverInfo, no constructor in IDL"}function Jc(){throw"cannot construct a btOverlappingPairCache, no constructor in IDL"}function $c(e,t,i){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),this.vi=void 0===e?Da():void 0===t?_emscripten_bind_btVector3_btVector3_1(e):void 0===i?_emscripten_bind_btVector3_btVector3_2(e,t):Ba(e,t,i),uc($c)[this.vi]=this}function eu(e){e&&"object"==typeof e&&(e=e.vi),this.vi=ja(e),uc(eu)[this.vi]=this}function tu(){this.vi=is(),uc(tu)[this.vi]=this}function iu(){this.vi=rs(),uc(iu)[this.vi]=this}function nu(){throw"cannot construct a LocalShapeInfo, no constructor in IDL"}function ru(){throw"cannot construct a btVector3Array, no constructor in IDL"}function ou(){throw"cannot construct a btConstraintSolver, no constructor in IDL"}function au(e){e&&"object"==typeof e&&(e=e.vi),this.vi=xs(e),uc(au)[this.vi]=this}function su(e){e&&"object"==typeof e&&(e=e.vi),this.vi=Cs(e),uc(su)[this.vi]=this}function lu(){throw"cannot construct a btIndexedMeshArray, no constructor in IDL"}function cu(e,t){e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),this.vi=void 0===e?Fl():void 0===t?_emscripten_bind_btTransform_btTransform_1(e):Il(e,t),uc(cu)[this.vi]=this}function uu(e){e&&"object"==typeof e&&(e=e.vi),this.vi=Xl(e),uc(uu)[this.vi]=this}return lc(),cc.prototype=Object.create(cc.prototype),cc.prototype.constructor=cc,cc.prototype.wi=cc,cc.xi={},t.WrapperObject=cc,t.getCache=uc,t.wrapPointer=hc,t.castObject=function(e,t){return hc(e.vi,t)},t.NULL=hc(0),t.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete uc(e.wi)[e.vi]},t.compare=function(e,t){return e.vi===t.vi},t.getPointer=function(e){return e.vi},t.getClass=function(e){return e.wi},pc.prototype=Object.create(cc.prototype),pc.prototype.constructor=pc,pc.prototype.wi=pc,pc.xi={},t.btCollisionShape=pc,pc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),K(t,e)},pc.prototype.getLocalScaling=function(){return hc(J(this.vi),$c)},pc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),$(i,e,t)},pc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ee(t,e)},pc.prototype.getMargin=function(){return te(this.vi)},pc.prototype.isCompound=function(){return!!ie(this.vi)},pc.prototype.getUserIndex=function(){return ne(this.vi)},pc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),re(t,e)},pc.prototype.__destroy__=function(){oe(this.vi)},fc.prototype=Object.create(cc.prototype),fc.prototype.constructor=fc,fc.prototype.wi=fc,fc.xi={},t.btCollisionWorld=fc,fc.prototype.getDispatcher=function(){return hc(ae(this.vi),yc)},fc.prototype.rayTest=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),se(n,e,t,i)},fc.prototype.addCollisionObject=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===t?le(n,e):void 0===i?ce(n,e,t):ue(n,e,t,i)},fc.prototype.removeCollisionObject=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),he(t,e)},fc.prototype.__destroy__=function(){pe(this.vi)},_c.prototype=Object.create(pc.prototype),_c.prototype.constructor=_c,_c.prototype.wi=_c,_c.xi={},t.btConcaveShape=_c,_c.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),fe(t,e)},_c.prototype.getLocalScaling=function(){return hc(_e(this.vi),$c)},_c.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),de(i,e,t)},_c.prototype.isCompound=function(){return!!me(this.vi)},_c.prototype.getUserIndex=function(){return ve(this.vi)},_c.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ye(t,e)},_c.prototype.__destroy__=function(){ge(this.vi)},dc.prototype=Object.create(cc.prototype),dc.prototype.constructor=dc,dc.prototype.wi=dc,dc.xi={},t.btStridingMeshInterface=dc,dc.prototype.setScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ae(t,e)},dc.prototype.__destroy__=function(){be(this.vi)},mc.prototype=Object.create(cc.prototype),mc.prototype.constructor=mc,mc.prototype.wi=mc,mc.xi={},t.btCollisionObject=mc,mc.prototype.setAnisotropicFriction=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Te(i,e,t)},mc.prototype.getCollisionShape=function(){return hc(Se(this.vi),pc)},mc.prototype.getActivationState=function(){return Ee(this.vi)},mc.prototype.setActivationState=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ce(t,e)},mc.prototype.forceActivationState=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),we(t,e)},mc.prototype.activate=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),void 0===e?ke(t):Oe(t,e)},mc.prototype.isActive=function(){return!!Re(this.vi)},mc.prototype.isKinematicObject=function(){return!!Fe(this.vi)},mc.prototype.isStaticObject=function(){return!!Ie(this.vi)},mc.prototype.isStaticOrKinematicObject=function(){return!!Me(this.vi)},mc.prototype.setRestitution=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Pe(t,e)},mc.prototype.setFriction=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),De(t,e)},mc.prototype.setRollingFriction=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Be(t,e)},mc.prototype.getWorldTransform=function(){return hc(Ne(this.vi),cu)},mc.prototype.getCollisionFlags=function(){return Le(this.vi)},mc.prototype.setCollisionFlags=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ze(t,e)},mc.prototype.setWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ge(t,e)},mc.prototype.setCollisionShape=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ue(t,e)},mc.prototype.setCcdMotionThreshold=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Xe(t,e)},mc.prototype.setCcdSweptSphereRadius=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ve(t,e)},mc.prototype.getUserIndex=function(){return He(this.vi)},mc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),je(t,e)},mc.prototype.__destroy__=function(){We(this.vi)},vc.prototype=Object.create(cc.prototype),vc.prototype.constructor=vc,vc.prototype.wi=vc,vc.xi={},t.btMotionState=vc,vc.prototype.getWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ye(t,e)},vc.prototype.setWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),qe(t,e)},vc.prototype.__destroy__=function(){Qe(this.vi)},yc.prototype=Object.create(cc.prototype),yc.prototype.constructor=yc,yc.prototype.wi=yc,yc.xi={},t.btDispatcher=yc,yc.prototype.getNumManifolds=function(){return Ze(this.vi)},yc.prototype.getManifoldByIndexInternal=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(Ke(t,e),Vc)},yc.prototype.__destroy__=function(){Je(this.vi)},gc.prototype=Object.create(pc.prototype),gc.prototype.constructor=gc,gc.prototype.wi=gc,gc.xi={},t.btConvexInternalShape=gc,gc.prototype.getImplicitShapeDimensions=function(){return hc($e(this.vi),$c)},gc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),et(t,e)},gc.prototype.getLocalScaling=function(){return hc(tt(this.vi),$c)},gc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),it(i,e,t)},gc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),nt(t,e)},gc.prototype.getMargin=function(){return rt(this.vi)},gc.prototype.isCompound=function(){return!!ot(this.vi)},gc.prototype.getUserIndex=function(){return at(this.vi)},gc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),st(t,e)},gc.prototype.__destroy__=function(){lt(this.vi)},Ac.prototype=Object.create(fc.prototype),Ac.prototype.constructor=Ac,Ac.prototype.wi=Ac,Ac.xi={},t.btDynamicsWorld=Ac,Ac.prototype.getSolverInfo=function(){return hc(ct(this.vi),Kc)},Ac.prototype.getDispatcher=function(){return hc(ut(this.vi),yc)},Ac.prototype.rayTest=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),ht(n,e,t,i)},Ac.prototype.addCollisionObject=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===t?pt(n,e):void 0===i?ft(n,e,t):_t(n,e,t,i)},Ac.prototype.removeCollisionObject=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),dt(t,e)},Ac.prototype.__destroy__=function(){mt(this.vi)},bc.prototype=Object.create(cc.prototype),bc.prototype.constructor=bc,bc.prototype.wi=bc,bc.xi={},t.btBroadphaseInterface=bc,bc.prototype.getOverlappingPairCache=function(){return hc(vt(this.vi),Jc)},bc.prototype.__destroy__=function(){yt(this.vi)},xc.prototype=Object.create(cc.prototype),xc.prototype.constructor=xc,xc.prototype.wi=xc,xc.xi={},t.RayResultCallback=xc,xc.prototype.hasHit=function(){return!!gt(this.vi)},xc.prototype.get_m_collisionFilterGroup=xc.prototype.yi=function(){return At(this.vi)},xc.prototype.set_m_collisionFilterGroup=xc.prototype.Bi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),bt(t,e)},Object.defineProperty(xc.prototype,"m_collisionFilterGroup",{get:xc.prototype.yi,set:xc.prototype.Bi}),xc.prototype.get_m_collisionFilterMask=xc.prototype.zi=function(){return xt(this.vi)},xc.prototype.set_m_collisionFilterMask=xc.prototype.Ci=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Tt(t,e)},Object.defineProperty(xc.prototype,"m_collisionFilterMask",{get:xc.prototype.zi,set:xc.prototype.Ci}),xc.prototype.get_m_shapePart=xc.prototype.Ai=function(){return St(this.vi)},xc.prototype.set_m_shapePart=xc.prototype.Di=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Et(t,e)},Object.defineProperty(xc.prototype,"m_shapePart",{get:xc.prototype.Ai,set:xc.prototype.Di}),xc.prototype.get_m_closestHitFraction=xc.prototype.Ei=function(){return Ct(this.vi)},xc.prototype.set_m_closestHitFraction=xc.prototype.Gi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),wt(t,e)},Object.defineProperty(xc.prototype,"m_closestHitFraction",{get:xc.prototype.Ei,set:xc.prototype.Gi}),xc.prototype.get_m_collisionObject=xc.prototype.Fi=function(){return hc(kt(this.vi),mc)},xc.prototype.set_m_collisionObject=xc.prototype.Hi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ot(t,e)},Object.defineProperty(xc.prototype,"m_collisionObject",{get:xc.prototype.Fi,set:xc.prototype.Hi}),xc.prototype.__destroy__=function(){Rt(this.vi)},Tc.prototype=Object.create(_c.prototype),Tc.prototype.constructor=Tc,Tc.prototype.wi=Tc,Tc.xi={},t.btTriangleMeshShape=Tc,Tc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ft(t,e)},Tc.prototype.getLocalScaling=function(){return hc(It(this.vi),$c)},Tc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Mt(i,e,t)},Tc.prototype.isCompound=function(){return!!Pt(this.vi)},Tc.prototype.getUserIndex=function(){return Dt(this.vi)},Tc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Bt(t,e)},Tc.prototype.__destroy__=function(){Nt(this.vi)},Sc.prototype=Object.create(cc.prototype),Sc.prototype.constructor=Sc,Sc.prototype.wi=Sc,Sc.xi={},t.btQuadWord=Sc,Sc.prototype.x=Sc.prototype.x=function(){return Lt(this.vi)},Sc.prototype.y=Sc.prototype.y=function(){return zt(this.vi)},Sc.prototype.z=Sc.prototype.z=function(){return Gt(this.vi)},Sc.prototype.w=function(){return Ut(this.vi)},Sc.prototype.setX=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Xt(t,e)},Sc.prototype.setY=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Vt(t,e)},Sc.prototype.setZ=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ht(t,e)},Sc.prototype.setW=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),jt(t,e)},Sc.prototype.__destroy__=function(){Wt(this.vi)},Ec.prototype=Object.create(cc.prototype),Ec.prototype.constructor=Ec,Ec.prototype.wi=Ec,Ec.xi={},t.btMatrix3x3=Ec,Ec.prototype.getRotation=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Yt(t,e)},Ec.prototype.__destroy__=function(){qt(this.vi)},Cc.prototype=Object.create(cc.prototype),Cc.prototype.constructor=Cc,Cc.prototype.wi=Cc,Cc.xi={},t.btScalarArray=Cc,Cc.prototype.size=Cc.prototype.size=function(){return Qt(this.vi)},Cc.prototype.at=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),Zt(t,e)},Cc.prototype.clear=Cc.prototype.clear=function(){Kt(this.vi)},Cc.prototype.__destroy__=function(){Jt(this.vi)},wc.prototype=Object.create(Tc.prototype),wc.prototype.constructor=wc,wc.prototype.wi=wc,wc.xi={},t.btBvhTriangleMeshShape=wc,wc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ti(t,e)},wc.prototype.getLocalScaling=function(){return hc(ii(this.vi),$c)},wc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),ni(i,e,t)},wc.prototype.isCompound=function(){return!!ri(this.vi)},wc.prototype.getUserIndex=function(){return oi(this.vi)},wc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ai(t,e)},wc.prototype.__destroy__=function(){si(this.vi)},kc.prototype=Object.create(bc.prototype),kc.prototype.constructor=kc,kc.prototype.wi=kc,kc.xi={},t.btDbvtBroadphase=kc,kc.prototype.getOverlappingPairCache=function(){return hc(ci(this.vi),Jc)},kc.prototype.__destroy__=function(){ui(this.vi)},Oc.prototype=Object.create(cc.prototype),Oc.prototype.constructor=Oc,Oc.prototype.wi=Oc,Oc.xi={},t.btIntArray=Oc,Oc.prototype.size=Oc.prototype.size=function(){return hi(this.vi)},Oc.prototype.at=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),pi(t,e)},Oc.prototype.clear=Oc.prototype.clear=function(){fi(this.vi)},Oc.prototype.__destroy__=function(){_i(this.vi)},Rc.prototype=Object.create(cc.prototype),Rc.prototype.constructor=Rc,Rc.prototype.wi=Rc,Rc.xi={},t.btConstCollisionObjectArray=Rc,Rc.prototype.size=Rc.prototype.size=function(){return di(this.vi)},Rc.prototype.at=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(mi(t,e),mc)},Rc.prototype.clear=Rc.prototype.clear=function(){vi(this.vi)},Rc.prototype.__destroy__=function(){yi(this.vi)},Fc.prototype=Object.create(cc.prototype),Fc.prototype.constructor=Fc,Fc.prototype.wi=Fc,Fc.xi={},t.btBroadphaseProxy=Fc,Fc.prototype.get_m_collisionFilterGroup=Fc.prototype.yi=function(){return gi(this.vi)},Fc.prototype.set_m_collisionFilterGroup=Fc.prototype.Bi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ai(t,e)},Object.defineProperty(Fc.prototype,"m_collisionFilterGroup",{get:Fc.prototype.yi,set:Fc.prototype.Bi}),Fc.prototype.get_m_collisionFilterMask=Fc.prototype.zi=function(){return bi(this.vi)},Fc.prototype.set_m_collisionFilterMask=Fc.prototype.Ci=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),xi(t,e)},Object.defineProperty(Fc.prototype,"m_collisionFilterMask",{get:Fc.prototype.zi,set:Fc.prototype.Ci}),Fc.prototype.__destroy__=function(){Ti(this.vi)},Ic.prototype=Object.create(cc.prototype),Ic.prototype.constructor=Ic,Ic.prototype.wi=Ic,Ic.xi={},t.btIndexedMesh=Ic,Ic.prototype.get_m_numTriangles=Ic.prototype.kj=function(){return Si(this.vi)},Ic.prototype.set_m_numTriangles=Ic.prototype.Pj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ei(t,e)},Object.defineProperty(Ic.prototype,"m_numTriangles",{get:Ic.prototype.kj,set:Ic.prototype.Pj}),Ic.prototype.__destroy__=function(){Ci(this.vi)},Mc.prototype=Object.create(cc.prototype),Mc.prototype.constructor=Mc,Mc.prototype.wi=Mc,Mc.xi={},t.btRigidBodyConstructionInfo=Mc,Mc.prototype.get_m_linearDamping=Mc.prototype.ej=function(){return Oi(this.vi)},Mc.prototype.set_m_linearDamping=Mc.prototype.Jj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ri(t,e)},Object.defineProperty(Mc.prototype,"m_linearDamping",{get:Mc.prototype.ej,set:Mc.prototype.Jj}),Mc.prototype.get_m_angularDamping=Mc.prototype.Xi=function(){return Fi(this.vi)},Mc.prototype.set_m_angularDamping=Mc.prototype.Bj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ii(t,e)},Object.defineProperty(Mc.prototype,"m_angularDamping",{get:Mc.prototype.Xi,set:Mc.prototype.Bj}),Mc.prototype.get_m_friction=Mc.prototype.aj=function(){return Mi(this.vi)},Mc.prototype.set_m_friction=Mc.prototype.Fj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Pi(t,e)},Object.defineProperty(Mc.prototype,"m_friction",{get:Mc.prototype.aj,set:Mc.prototype.Fj}),Mc.prototype.get_m_rollingFriction=Mc.prototype.oj=function(){return Di(this.vi)},Mc.prototype.set_m_rollingFriction=Mc.prototype.Tj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Bi(t,e)},Object.defineProperty(Mc.prototype,"m_rollingFriction",{get:Mc.prototype.oj,set:Mc.prototype.Tj}),Mc.prototype.get_m_restitution=Mc.prototype.nj=function(){return Ni(this.vi)},Mc.prototype.set_m_restitution=Mc.prototype.Sj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Li(t,e)},Object.defineProperty(Mc.prototype,"m_restitution",{get:Mc.prototype.nj,set:Mc.prototype.Sj}),Mc.prototype.get_m_linearSleepingThreshold=Mc.prototype.fj=function(){return zi(this.vi)},Mc.prototype.set_m_linearSleepingThreshold=Mc.prototype.Kj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Gi(t,e)},Object.defineProperty(Mc.prototype,"m_linearSleepingThreshold",{get:Mc.prototype.fj,set:Mc.prototype.Kj}),Mc.prototype.get_m_angularSleepingThreshold=Mc.prototype.Yi=function(){return Ui(this.vi)},Mc.prototype.set_m_angularSleepingThreshold=Mc.prototype.Cj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Xi(t,e)},Object.defineProperty(Mc.prototype,"m_angularSleepingThreshold",{get:Mc.prototype.Yi,set:Mc.prototype.Cj}),Mc.prototype.get_m_additionalDamping=Mc.prototype.Ui=function(){return!!Vi(this.vi)},Mc.prototype.set_m_additionalDamping=Mc.prototype.yj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Hi(t,e)},Object.defineProperty(Mc.prototype,"m_additionalDamping",{get:Mc.prototype.Ui,set:Mc.prototype.yj}),Mc.prototype.get_m_additionalDampingFactor=Mc.prototype.Vi=function(){return ji(this.vi)},Mc.prototype.set_m_additionalDampingFactor=Mc.prototype.zj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Wi(t,e)},Object.defineProperty(Mc.prototype,"m_additionalDampingFactor",{get:Mc.prototype.Vi,set:Mc.prototype.zj}),Mc.prototype.get_m_additionalLinearDampingThresholdSqr=Mc.prototype.Wi=function(){return Yi(this.vi)},Mc.prototype.set_m_additionalLinearDampingThresholdSqr=Mc.prototype.Aj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),qi(t,e)},Object.defineProperty(Mc.prototype,"m_additionalLinearDampingThresholdSqr",{get:Mc.prototype.Wi,set:Mc.prototype.Aj}),Mc.prototype.get_m_additionalAngularDampingThresholdSqr=Mc.prototype.Ti=function(){return Qi(this.vi)},Mc.prototype.set_m_additionalAngularDampingThresholdSqr=Mc.prototype.xj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Zi(t,e)},Object.defineProperty(Mc.prototype,"m_additionalAngularDampingThresholdSqr",{get:Mc.prototype.Ti,set:Mc.prototype.xj}),Mc.prototype.get_m_additionalAngularDampingFactor=Mc.prototype.Si=function(){return Ki(this.vi)},Mc.prototype.set_m_additionalAngularDampingFactor=Mc.prototype.wj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ji(t,e)},Object.defineProperty(Mc.prototype,"m_additionalAngularDampingFactor",{get:Mc.prototype.Si,set:Mc.prototype.wj}),Mc.prototype.__destroy__=function(){$i(this.vi)},Pc.prototype=Object.create(cc.prototype),Pc.prototype.constructor=Pc,Pc.prototype.wi=Pc,Pc.xi={},t.btManifoldPoint=Pc,Pc.prototype.getAppliedImpulse=function(){return en(this.vi)},Pc.prototype.getDistance=function(){return tn(this.vi)},Pc.prototype.getShape0=function(){return hc(nn(this.vi),pc)},Pc.prototype.getShape1=function(){return hc(rn(this.vi),pc)},Pc.prototype.get_m_localPointA=Pc.prototype.gj=function(){return hc(on(this.vi),$c)},Pc.prototype.set_m_localPointA=Pc.prototype.Lj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),an(t,e)},Object.defineProperty(Pc.prototype,"m_localPointA",{get:Pc.prototype.gj,set:Pc.prototype.Lj}),Pc.prototype.get_m_localPointB=Pc.prototype.hj=function(){return hc(sn(this.vi),$c)},Pc.prototype.set_m_localPointB=Pc.prototype.Mj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ln(t,e)},Object.defineProperty(Pc.prototype,"m_localPointB",{get:Pc.prototype.hj,set:Pc.prototype.Mj}),Pc.prototype.get_m_positionWorldOnA=Pc.prototype.lj=function(){return hc(cn(this.vi),$c)},Pc.prototype.set_m_positionWorldOnA=Pc.prototype.Qj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),un(t,e)},Object.defineProperty(Pc.prototype,"m_positionWorldOnA",{get:Pc.prototype.lj,set:Pc.prototype.Qj}),Pc.prototype.get_m_positionWorldOnB=Pc.prototype.mj=function(){return hc(hn(this.vi),$c)},Pc.prototype.set_m_positionWorldOnB=Pc.prototype.Rj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),pn(t,e)},Object.defineProperty(Pc.prototype,"m_positionWorldOnB",{get:Pc.prototype.mj,set:Pc.prototype.Rj}),Pc.prototype.get_m_normalWorldOnB=Pc.prototype.ij=function(){return hc(fn(this.vi),$c)},Pc.prototype.set_m_normalWorldOnB=Pc.prototype.Nj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),_n(t,e)},Object.defineProperty(Pc.prototype,"m_normalWorldOnB",{get:Pc.prototype.ij,set:Pc.prototype.Nj}),Pc.prototype.get_m_distance1=Pc.prototype.$i=function(){return dn(this.vi)},Pc.prototype.set_m_distance1=Pc.prototype.Ej=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),mn(t,e)},Object.defineProperty(Pc.prototype,"m_distance1",{get:Pc.prototype.$i,set:Pc.prototype.Ej}),Pc.prototype.get_m_index0=Pc.prototype.cj=function(){return vn(this.vi)},Pc.prototype.set_m_index0=Pc.prototype.Hj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),yn(t,e)},Object.defineProperty(Pc.prototype,"m_index0",{get:Pc.prototype.cj,set:Pc.prototype.Hj}),Pc.prototype.get_m_index1=Pc.prototype.dj=function(){return gn(this.vi)},Pc.prototype.set_m_index1=Pc.prototype.Ij=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),An(t,e)},Object.defineProperty(Pc.prototype,"m_index1",{get:Pc.prototype.dj,set:Pc.prototype.Ij}),Pc.prototype.get_m_userPersistentData=Pc.prototype.tj=function(){return bn(this.vi)},Pc.prototype.set_m_userPersistentData=Pc.prototype.Yj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),xn(t,e)},Object.defineProperty(Pc.prototype,"m_userPersistentData",{get:Pc.prototype.tj,set:Pc.prototype.Yj}),Pc.prototype.get_m_userPersistentData0=Pc.prototype.uj=function(){return Tn(this.vi)},Pc.prototype.set_m_userPersistentData0=Pc.prototype.Zj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Sn(t,e)},Object.defineProperty(Pc.prototype,"m_userPersistentData0",{get:Pc.prototype.uj,set:Pc.prototype.Zj}),Pc.prototype.get_m_userPersistentData1=Pc.prototype.vj=function(){return En(this.vi)},Pc.prototype.set_m_userPersistentData1=Pc.prototype.$j=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Cn(t,e)},Object.defineProperty(Pc.prototype,"m_userPersistentData1",{get:Pc.prototype.vj,set:Pc.prototype.$j}),Pc.prototype.__destroy__=function(){wn(this.vi)},Dc.prototype=Object.create(cc.prototype),Dc.prototype.constructor=Dc,Dc.prototype.wi=Dc,Dc.xi={},t.btSequentialImpulseConstraintSolver=Dc,Dc.prototype.__destroy__=function(){On(this.vi)},Bc.prototype=Object.create(Ac.prototype),Bc.prototype.constructor=Bc,Bc.prototype.wi=Bc,Bc.xi={},t.btDiscreteDynamicsWorld=Bc,Bc.prototype.setGravity=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Fn(t,e)},Bc.prototype.getGravity=function(){return hc(In(this.vi),$c)},Bc.prototype.addRigidBody=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===t?Mn(n,e):void 0===i?_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_2(n,e,t):Pn(n,e,t,i)},Bc.prototype.removeRigidBody=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Dn(t,e)},Bc.prototype.stepSimulation=function(e,t,i){var n=this.vi;return e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===t?Bn(n,e):void 0===i?Nn(n,e,t):Ln(n,e,t,i)},Bc.prototype.getDispatcher=function(){return hc(zn(this.vi),yc)},Bc.prototype.rayTest=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),Gn(n,e,t,i)},Bc.prototype.addCollisionObject=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===t?Un(n,e):void 0===i?Xn(n,e,t):Vn(n,e,t,i)},Bc.prototype.removeCollisionObject=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Hn(t,e)},Bc.prototype.getSolverInfo=function(){return hc(jn(this.vi),Kc)},Bc.prototype.__destroy__=function(){Wn(this.vi)},Nc.prototype=Object.create(cc.prototype),Nc.prototype.constructor=Nc,Nc.prototype.wi=Nc,Nc.xi={},t.VoidPtr=Nc,Nc.prototype.__destroy__=function(){Yn(this.vi)},Lc.prototype=Object.create(_c.prototype),Lc.prototype.constructor=Lc,Lc.prototype.wi=Lc,Lc.xi={},t.btHeightfieldTerrainShape=Lc,Lc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Qn(t,e)},Lc.prototype.getMargin=function(){return Zn(this.vi)},Lc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Kn(t,e)},Lc.prototype.getLocalScaling=function(){return hc(Jn(this.vi),$c)},Lc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),$n(i,e,t)},Lc.prototype.isCompound=function(){return!!er(this.vi)},Lc.prototype.getUserIndex=function(){return tr(this.vi)},Lc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ir(t,e)},Lc.prototype.__destroy__=function(){nr(this.vi)},zc.prototype=Object.create(cc.prototype),zc.prototype.constructor=zc,zc.prototype.wi=zc,zc.xi={},t.btDefaultCollisionConfiguration=zc,zc.prototype.__destroy__=function(){ar(this.vi)},Gc.prototype=Object.create(cc.prototype),Gc.prototype.constructor=Gc,Gc.prototype.wi=Gc,Gc.xi={},t.btOverlappingPairCallback=Gc,Gc.prototype.__destroy__=function(){sr(this.vi)},Uc.prototype=Object.create(dc.prototype),Uc.prototype.constructor=Uc,Uc.prototype.wi=Uc,Uc.xi={},t.btTriangleMesh=Uc,Uc.prototype.addTriangle=function(e,t,i,n){var r=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),void 0===n?hr(r,e,t,i):pr(r,e,t,i,n)},Uc.prototype.addTriangleIndices=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),fr(n,e,t,i)},Uc.prototype.getIndexedMeshArray=function(){return hc(_r(this.vi),lu)},Uc.prototype.setScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),dr(t,e)},Uc.prototype.__destroy__=function(){mr(this.vi)},Xc.prototype=Object.create(cc.prototype),Xc.prototype.constructor=Xc,Xc.prototype.wi=Xc,Xc.xi={},t.btCollisionConfiguration=Xc,Xc.prototype.__destroy__=function(){vr(this.vi)},Vc.prototype=Object.create(cc.prototype),Vc.prototype.constructor=Vc,Vc.prototype.wi=Vc,Vc.xi={},t.btPersistentManifold=Vc,Vc.prototype.getBody0=function(){return hc(gr(this.vi),mc)},Vc.prototype.getBody1=function(){return hc(Ar(this.vi),mc)},Vc.prototype.getNumContacts=function(){return br(this.vi)},Vc.prototype.getContactPoint=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(xr(t,e),Pc)},Vc.prototype.__destroy__=function(){Tr(this.vi)},Hc.prototype=Object.create(gc.prototype),Hc.prototype.constructor=Hc,Hc.prototype.wi=Hc,Hc.xi={},t.btBoxShape=Hc,Hc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Er(t,e)},Hc.prototype.getMargin=function(){return Cr(this.vi)},Hc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),wr(t,e)},Hc.prototype.getLocalScaling=function(){return hc(kr(this.vi),$c)},Hc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Or(i,e,t)},Hc.prototype.isCompound=function(){return!!Rr(this.vi)},Hc.prototype.getUserIndex=function(){return Fr(this.vi)},Hc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ir(t,e)},Hc.prototype.getImplicitShapeDimensions=function(){return hc(Mr(this.vi),$c)},Hc.prototype.__destroy__=function(){Pr(this.vi)},jc.prototype=Object.create(gc.prototype),jc.prototype.constructor=jc,jc.prototype.wi=jc,jc.xi={},t.btCapsuleShape=jc,jc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Br(t,e)},jc.prototype.getMargin=function(){return Nr(this.vi)},jc.prototype.updateProp=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),Lr(n,e,t,i)},jc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),zr(t,e)},jc.prototype.getLocalScaling=function(){return hc(Gr(this.vi),$c)},jc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Ur(i,e,t)},jc.prototype.isCompound=function(){return!!Xr(this.vi)},jc.prototype.getUserIndex=function(){return Vr(this.vi)},jc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Hr(t,e)},jc.prototype.getImplicitShapeDimensions=function(){return hc(jr(this.vi),$c)},jc.prototype.__destroy__=function(){Wr(this.vi)},Wc.prototype=Object.create(pc.prototype),Wc.prototype.constructor=Wc,Wc.prototype.wi=Wc,Wc.xi={},t.btCompoundShape=Wc,Wc.prototype.addChildShape=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Qr(i,e,t)},Wc.prototype.removeChildShape=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Zr(t,e)},Wc.prototype.removeChildShapeByIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Kr(t,e)},Wc.prototype.getNumChildShapes=function(){return Jr(this.vi)},Wc.prototype.getChildShape=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc($r(t,e),pc)},Wc.prototype.updateChildTransform=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),void 0===i?eo(n,e,t):to(n,e,t,i)},Wc.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),io(t,e)},Wc.prototype.getMargin=function(){return no(this.vi)},Wc.prototype.setMaterial=function(e,t,i,n){var r=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),void 0===n?ro(r,e,t,i):oo(r,e,t,i,n)},Wc.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ao(t,e)},Wc.prototype.getLocalScaling=function(){return hc(so(this.vi),$c)},Wc.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),lo(i,e,t)},Wc.prototype.isCompound=function(){return!!co(this.vi)},Wc.prototype.getUserIndex=function(){return uo(this.vi)},Wc.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ho(t,e)},Wc.prototype.__destroy__=function(){po(this.vi)},Yc.prototype=Object.create(vc.prototype),Yc.prototype.constructor=Yc,Yc.prototype.wi=Yc,Yc.xi={},t.btDefaultMotionState=Yc,Yc.prototype.getWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),vo(t,e)},Yc.prototype.setWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),yo(t,e)},Yc.prototype.__destroy__=function(){go(this.vi)},qc.prototype=Object.create(xc.prototype),qc.prototype.constructor=qc,qc.prototype.wi=qc,qc.xi={},t.AllHitsRayResultCallback=qc,qc.prototype.hasHit=function(){return!!bo(this.vi)},qc.prototype.get_m_collisionObjects=qc.prototype.Zi=function(){return hc(xo(this.vi),Rc)},qc.prototype.set_m_collisionObjects=qc.prototype.Dj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),To(t,e)},Object.defineProperty(qc.prototype,"m_collisionObjects",{get:qc.prototype.Zi,set:qc.prototype.Dj}),qc.prototype.get_m_rayFromWorld=qc.prototype.Li=function(){return hc(So(this.vi),$c)},qc.prototype.set_m_rayFromWorld=qc.prototype.Pi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Eo(t,e)},Object.defineProperty(qc.prototype,"m_rayFromWorld",{get:qc.prototype.Li,set:qc.prototype.Pi}),qc.prototype.get_m_rayToWorld=qc.prototype.Mi=function(){return hc(Co(this.vi),$c)},qc.prototype.set_m_rayToWorld=qc.prototype.Qi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),wo(t,e)},Object.defineProperty(qc.prototype,"m_rayToWorld",{get:qc.prototype.Mi,set:qc.prototype.Qi}),qc.prototype.get_m_hitNormalWorld=qc.prototype.Ji=function(){return hc(ko(this.vi),ru)},qc.prototype.set_m_hitNormalWorld=qc.prototype.Ni=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Oo(t,e)},Object.defineProperty(qc.prototype,"m_hitNormalWorld",{get:qc.prototype.Ji,set:qc.prototype.Ni}),qc.prototype.get_m_hitPointWorld=qc.prototype.Ki=function(){return hc(Ro(this.vi),ru)},qc.prototype.set_m_hitPointWorld=qc.prototype.Oi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Fo(t,e)},Object.defineProperty(qc.prototype,"m_hitPointWorld",{get:qc.prototype.Ki,set:qc.prototype.Oi}),qc.prototype.get_m_hitFractions=qc.prototype.bj=function(){return hc(Io(this.vi),Cc)},qc.prototype.set_m_hitFractions=qc.prototype.Gj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Mo(t,e)},Object.defineProperty(qc.prototype,"m_hitFractions",{get:qc.prototype.bj,set:qc.prototype.Gj}),qc.prototype.get_m_shapeParts=qc.prototype.pj=function(){return hc(Po(this.vi),Oc)},qc.prototype.set_m_shapeParts=qc.prototype.Uj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Do(t,e)},Object.defineProperty(qc.prototype,"m_shapeParts",{get:qc.prototype.pj,set:qc.prototype.Uj}),qc.prototype.get_m_collisionFilterGroup=qc.prototype.yi=function(){return Bo(this.vi)},qc.prototype.set_m_collisionFilterGroup=qc.prototype.Bi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),No(t,e)},Object.defineProperty(qc.prototype,"m_collisionFilterGroup",{get:qc.prototype.yi,set:qc.prototype.Bi}),qc.prototype.get_m_collisionFilterMask=qc.prototype.zi=function(){return Lo(this.vi)},qc.prototype.set_m_collisionFilterMask=qc.prototype.Ci=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),zo(t,e)},Object.defineProperty(qc.prototype,"m_collisionFilterMask",{get:qc.prototype.zi,set:qc.prototype.Ci}),qc.prototype.get_m_shapePart=qc.prototype.Ai=function(){return Go(this.vi)},qc.prototype.set_m_shapePart=qc.prototype.Di=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Uo(t,e)},Object.defineProperty(qc.prototype,"m_shapePart",{get:qc.prototype.Ai,set:qc.prototype.Di}),qc.prototype.get_m_closestHitFraction=qc.prototype.Ei=function(){return Xo(this.vi)},qc.prototype.set_m_closestHitFraction=qc.prototype.Gi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Vo(t,e)},Object.defineProperty(qc.prototype,"m_closestHitFraction",{get:qc.prototype.Ei,set:qc.prototype.Gi}),qc.prototype.get_m_collisionObject=qc.prototype.Fi=function(){return hc(Ho(this.vi),mc)},qc.prototype.set_m_collisionObject=qc.prototype.Hi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),jo(t,e)},Object.defineProperty(qc.prototype,"m_collisionObject",{get:qc.prototype.Fi,set:qc.prototype.Hi}),qc.prototype.__destroy__=function(){Wo(this.vi)},Qc.prototype=Object.create(xc.prototype),Qc.prototype.constructor=Qc,Qc.prototype.wi=Qc,Qc.xi={},t.ClosestRayResultCallback=Qc,Qc.prototype.hasHit=function(){return!!qo(this.vi)},Qc.prototype.get_m_rayFromWorld=Qc.prototype.Li=function(){return hc(Qo(this.vi),$c)},Qc.prototype.set_m_rayFromWorld=Qc.prototype.Pi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Zo(t,e)},Object.defineProperty(Qc.prototype,"m_rayFromWorld",{get:Qc.prototype.Li,set:Qc.prototype.Pi}),Qc.prototype.get_m_rayToWorld=Qc.prototype.Mi=function(){return hc(Ko(this.vi),$c)},Qc.prototype.set_m_rayToWorld=Qc.prototype.Qi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Jo(t,e)},Object.defineProperty(Qc.prototype,"m_rayToWorld",{get:Qc.prototype.Mi,set:Qc.prototype.Qi}),Qc.prototype.get_m_hitNormalWorld=Qc.prototype.Ji=function(){return hc($o(this.vi),$c)},Qc.prototype.set_m_hitNormalWorld=Qc.prototype.Ni=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ea(t,e)},Object.defineProperty(Qc.prototype,"m_hitNormalWorld",{get:Qc.prototype.Ji,set:Qc.prototype.Ni}),Qc.prototype.get_m_hitPointWorld=Qc.prototype.Ki=function(){return hc(ta(this.vi),$c)},Qc.prototype.set_m_hitPointWorld=Qc.prototype.Oi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ia(t,e)},Object.defineProperty(Qc.prototype,"m_hitPointWorld",{get:Qc.prototype.Ki,set:Qc.prototype.Oi}),Qc.prototype.get_m_collisionFilterGroup=Qc.prototype.yi=function(){return na(this.vi)},Qc.prototype.set_m_collisionFilterGroup=Qc.prototype.Bi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ra(t,e)},Object.defineProperty(Qc.prototype,"m_collisionFilterGroup",{get:Qc.prototype.yi,set:Qc.prototype.Bi}),Qc.prototype.get_m_collisionFilterMask=Qc.prototype.zi=function(){return oa(this.vi)},Qc.prototype.set_m_collisionFilterMask=Qc.prototype.Ci=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),aa(t,e)},Object.defineProperty(Qc.prototype,"m_collisionFilterMask",{get:Qc.prototype.zi,set:Qc.prototype.Ci}),Qc.prototype.get_m_shapePart=Qc.prototype.Ai=function(){return sa(this.vi)},Qc.prototype.set_m_shapePart=Qc.prototype.Di=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),la(t,e)},Object.defineProperty(Qc.prototype,"m_shapePart",{get:Qc.prototype.Ai,set:Qc.prototype.Di}),Qc.prototype.get_m_closestHitFraction=Qc.prototype.Ei=function(){return ca(this.vi)},Qc.prototype.set_m_closestHitFraction=Qc.prototype.Gi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ua(t,e)},Object.defineProperty(Qc.prototype,"m_closestHitFraction",{get:Qc.prototype.Ei,set:Qc.prototype.Gi}),Qc.prototype.get_m_collisionObject=Qc.prototype.Fi=function(){return hc(ha(this.vi),mc)},Qc.prototype.set_m_collisionObject=Qc.prototype.Hi=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),pa(t,e)},Object.defineProperty(Qc.prototype,"m_collisionObject",{get:Qc.prototype.Fi,set:Qc.prototype.Hi}),Qc.prototype.__destroy__=function(){fa(this.vi)},Zc.prototype=Object.create(Sc.prototype),Zc.prototype.constructor=Zc,Zc.prototype.wi=Zc,Zc.xi={},t.btQuaternion=Zc,Zc.prototype.setValue=function(e,t,i,n){var r=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),n&&"object"==typeof n&&(n=n.vi),da(r,e,t,i,n)},Zc.prototype.x=Zc.prototype.x=function(){return ma(this.vi)},Zc.prototype.y=Zc.prototype.y=function(){return va(this.vi)},Zc.prototype.z=Zc.prototype.z=function(){return ya(this.vi)},Zc.prototype.w=function(){return ga(this.vi)},Zc.prototype.setX=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Aa(t,e)},Zc.prototype.setY=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ba(t,e)},Zc.prototype.setZ=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),xa(t,e)},Zc.prototype.setW=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ta(t,e)},Zc.prototype.__destroy__=function(){Sa(this.vi)},Kc.prototype=Object.create(cc.prototype),Kc.prototype.constructor=Kc,Kc.prototype.wi=Kc,Kc.xi={},t.btContactSolverInfo=Kc,Kc.prototype.get_m_splitImpulse=Kc.prototype.qj=function(){return!!Ea(this.vi)},Kc.prototype.set_m_splitImpulse=Kc.prototype.Vj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ca(t,e)},Object.defineProperty(Kc.prototype,"m_splitImpulse",{get:Kc.prototype.qj,set:Kc.prototype.Vj}),Kc.prototype.get_m_splitImpulsePenetrationThreshold=Kc.prototype.rj=function(){return wa(this.vi)},Kc.prototype.set_m_splitImpulsePenetrationThreshold=Kc.prototype.Wj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ka(t,e)},Object.defineProperty(Kc.prototype,"m_splitImpulsePenetrationThreshold",{get:Kc.prototype.rj,set:Kc.prototype.Wj}),Kc.prototype.get_m_numIterations=Kc.prototype.jj=function(){return Oa(this.vi)},Kc.prototype.set_m_numIterations=Kc.prototype.Oj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ra(t,e)},Object.defineProperty(Kc.prototype,"m_numIterations",{get:Kc.prototype.jj,set:Kc.prototype.Oj}),Kc.prototype.__destroy__=function(){Fa(this.vi)},Jc.prototype=Object.create(cc.prototype),Jc.prototype.constructor=Jc,Jc.prototype.wi=Jc,Jc.xi={},t.btOverlappingPairCache=Jc,Jc.prototype.setInternalGhostPairCallback=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ia(t,e)},Jc.prototype.getNumOverlappingPairs=function(){return Ma(this.vi)},Jc.prototype.__destroy__=function(){Pa(this.vi)},$c.prototype=Object.create(cc.prototype),$c.prototype.constructor=$c,$c.prototype.wi=$c,$c.xi={},t.btVector3=$c,$c.prototype.x=$c.prototype.x=function(){return Na(this.vi)},$c.prototype.y=$c.prototype.y=function(){return La(this.vi)},$c.prototype.z=$c.prototype.z=function(){return za(this.vi)},$c.prototype.setX=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ga(t,e)},$c.prototype.setY=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ua(t,e)},$c.prototype.setZ=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Xa(t,e)},$c.prototype.setValue=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),Va(n,e,t,i)},$c.prototype.__destroy__=function(){Ha(this.vi)},eu.prototype=Object.create(gc.prototype),eu.prototype.constructor=eu,eu.prototype.wi=eu,eu.xi={},t.btSphereShape=eu,eu.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Wa(t,e)},eu.prototype.getMargin=function(){return Ya(this.vi)},eu.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),qa(t,e)},eu.prototype.getLocalScaling=function(){return hc(Qa(this.vi),$c)},eu.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Za(i,e,t)},eu.prototype.isCompound=function(){return!!Ka(this.vi)},eu.prototype.getUserIndex=function(){return Ja(this.vi)},eu.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),$a(t,e)},eu.prototype.getImplicitShapeDimensions=function(){return hc(es(this.vi),$c)},eu.prototype.__destroy__=function(){ts(this.vi)},tu.prototype=Object.create(cc.prototype),tu.prototype.constructor=tu,tu.prototype.wi=tu,tu.xi={},t.btDefaultCollisionConstructionInfo=tu,tu.prototype.__destroy__=function(){ns(this.vi)},iu.prototype=Object.create(_c.prototype),iu.prototype.constructor=iu,iu.prototype.wi=iu,iu.xi={},t.btEmptyShape=iu,iu.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),os(t,e)},iu.prototype.getLocalScaling=function(){return hc(as(this.vi),$c)},iu.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),ss(i,e,t)},iu.prototype.isCompound=function(){return!!ls(this.vi)},iu.prototype.getUserIndex=function(){return cs(this.vi)},iu.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),us(t,e)},iu.prototype.__destroy__=function(){hs(this.vi)},nu.prototype=Object.create(cc.prototype),nu.prototype.constructor=nu,nu.prototype.wi=nu,nu.xi={},t.LocalShapeInfo=nu,nu.prototype.get_m_shapePart=nu.prototype.Ai=function(){return ps(this.vi)},nu.prototype.set_m_shapePart=nu.prototype.Di=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),fs(t,e)},Object.defineProperty(nu.prototype,"m_shapePart",{get:nu.prototype.Ai,set:nu.prototype.Di}),nu.prototype.get_m_triangleIndex=nu.prototype.sj=function(){return _s(this.vi)},nu.prototype.set_m_triangleIndex=nu.prototype.Xj=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ds(t,e)},Object.defineProperty(nu.prototype,"m_triangleIndex",{get:nu.prototype.sj,set:nu.prototype.Xj}),nu.prototype.__destroy__=function(){ms(this.vi)},ru.prototype=Object.create(cc.prototype),ru.prototype.constructor=ru,ru.prototype.wi=ru,ru.xi={},t.btVector3Array=ru,ru.prototype.size=ru.prototype.size=function(){return vs(this.vi)},ru.prototype.at=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(ys(t,e),$c)},ru.prototype.clear=ru.prototype.clear=function(){gs(this.vi)},ru.prototype.__destroy__=function(){As(this.vi)},ou.prototype=Object.create(cc.prototype),ou.prototype.constructor=ou,ou.prototype.wi=ou,ou.xi={},t.btConstraintSolver=ou,ou.prototype.__destroy__=function(){bs(this.vi)},au.prototype=Object.create(yc.prototype),au.prototype.constructor=au,au.prototype.wi=au,au.xi={},t.btCollisionDispatcher=au,au.prototype.getNumManifolds=function(){return Ts(this.vi)},au.prototype.getManifoldByIndexInternal=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(Ss(t,e),Vc)},au.prototype.__destroy__=function(){Es(this.vi)},su.prototype=Object.create(mc.prototype),su.prototype.constructor=su,su.prototype.wi=su,su.xi={},t.btRigidBody=su,su.prototype.getCenterOfMassTransform=function(){return hc(ws(this.vi),cu)},su.prototype.getLinearDamping=function(){return ks(this.vi)},su.prototype.getAngularDamping=function(){return Os(this.vi)},su.prototype.setDamping=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Rs(i,e,t)},su.prototype.setMassProps=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Fs(i,e,t)},su.prototype.getLinearFactor=function(){return hc(Is(this.vi),$c)},su.prototype.setLinearFactor=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ms(t,e)},su.prototype.applyTorque=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ps(t,e)},su.prototype.applyForce=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Ds(i,e,t)},su.prototype.applyCentralForce=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Bs(t,e)},su.prototype.applyTorqueImpulse=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ns(t,e)},su.prototype.applyImpulse=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Ls(i,e,t)},su.prototype.applyCentralImpulse=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),zs(t,e)},su.prototype.updateInertiaTensor=function(){Gs(this.vi)},su.prototype.getLinearVelocity=function(){return hc(Us(this.vi),$c)},su.prototype.getAngularVelocity=function(){return hc(Xs(this.vi),$c)},su.prototype.setLinearVelocity=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Vs(t,e)},su.prototype.setAngularVelocity=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Hs(t,e)},su.prototype.getMotionState=function(){return hc(js(this.vi),vc)},su.prototype.setMotionState=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Ws(t,e)},su.prototype.getAngularFactor=function(){return hc(Ys(this.vi),$c)},su.prototype.setAngularFactor=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),qs(t,e)},su.prototype.upcast=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(Qs(t,e),su)},su.prototype.getAabb=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),Zs(i,e,t)},su.prototype.applyGravity=function(){Ks(this.vi)},su.prototype.getGravity=function(){return hc(Js(this.vi),$c)},su.prototype.setGravity=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),$s(t,e)},su.prototype.getFlags=function(){return el(this.vi)},su.prototype.setFlags=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),tl(t,e)},su.prototype.wantsSleeping=function(){return!!il(this.vi)},su.prototype.clearState=function(){nl(this.vi)},su.prototype.setAnisotropicFriction=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),rl(i,e,t)},su.prototype.getCollisionShape=function(){return hc(ol(this.vi),pc)},su.prototype.getActivationState=function(){return al(this.vi)},su.prototype.setActivationState=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),sl(t,e)},su.prototype.forceActivationState=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ll(t,e)},su.prototype.activate=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),void 0===e?cl(t):ul(t,e)},su.prototype.isActive=function(){return!!hl(this.vi)},su.prototype.isKinematicObject=function(){return!!pl(this.vi)},su.prototype.isStaticObject=function(){return!!fl(this.vi)},su.prototype.isStaticOrKinematicObject=function(){return!!_l(this.vi)},su.prototype.setRestitution=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),dl(t,e)},su.prototype.setFriction=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),ml(t,e)},su.prototype.setRollingFriction=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),vl(t,e)},su.prototype.getWorldTransform=function(){return hc(yl(this.vi),cu)},su.prototype.getCollisionFlags=function(){return gl(this.vi)},su.prototype.setCollisionFlags=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Al(t,e)},su.prototype.setWorldTransform=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),bl(t,e)},su.prototype.setCollisionShape=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),xl(t,e)},su.prototype.setCcdMotionThreshold=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Tl(t,e)},su.prototype.setCcdSweptSphereRadius=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Sl(t,e)},su.prototype.getUserIndex=function(){return El(this.vi)},su.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Cl(t,e)},su.prototype.__destroy__=function(){wl(this.vi)},lu.prototype=Object.create(cc.prototype),lu.prototype.constructor=lu,lu.prototype.wi=lu,lu.xi={},t.btIndexedMeshArray=lu,lu.prototype.size=lu.prototype.size=function(){return kl(this.vi)},lu.prototype.at=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(Ol(t,e),Ic)},lu.prototype.__destroy__=function(){Rl(this.vi)},cu.prototype=Object.create(cc.prototype),cu.prototype.constructor=cu,cu.prototype.wi=cu,cu.xi={},t.btTransform=cu,cu.prototype.setIdentity=function(){Ml(this.vi)},cu.prototype.setOrigin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Pl(t,e)},cu.prototype.setRotation=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Dl(t,e)},cu.prototype.getOrigin=function(){return hc(Bl(this.vi),$c)},cu.prototype.getRotation=function(){return hc(Nl(this.vi),Zc)},cu.prototype.getBasis=function(){return hc(Ll(this.vi),Ec)},cu.prototype.inverse=cu.prototype.inverse=function(){return hc(zl(this.vi),cu)},cu.prototype.op_mul=function(e){var t=this.vi;return e&&"object"==typeof e&&(e=e.vi),hc(Gl(t,e),cu)},cu.prototype.__destroy__=function(){Ul(this.vi)},uu.prototype=Object.create(gc.prototype),uu.prototype.constructor=uu,uu.prototype.wi=uu,uu.xi={},t.btCylinderShape=uu,uu.prototype.setMargin=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Vl(t,e)},uu.prototype.getMargin=function(){return Hl(this.vi)},uu.prototype.updateProp=function(e,t,i){var n=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),i&&"object"==typeof i&&(i=i.vi),jl(n,e,t,i)},uu.prototype.setLocalScaling=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Wl(t,e)},uu.prototype.getLocalScaling=function(){return hc(Yl(this.vi),$c)},uu.prototype.calculateLocalInertia=function(e,t){var i=this.vi;e&&"object"==typeof e&&(e=e.vi),t&&"object"==typeof t&&(t=t.vi),ql(i,e,t)},uu.prototype.isCompound=function(){return!!Ql(this.vi)},uu.prototype.getUserIndex=function(){return Zl(this.vi)},uu.prototype.setUserIndex=function(e){var t=this.vi;e&&"object"==typeof e&&(e=e.vi),Kl(t,e)},uu.prototype.getImplicitShapeDimensions=function(){return hc(Jl(this.vi),$c)},uu.prototype.__destroy__=function(){$l(this.vi)},function(){function e(){t.PHY_FLOAT=ec(),t.PHY_DOUBLE=tc(),t.PHY_INTEGER=ic(),t.PHY_SHORT=nc(),t.PHY_FIXEDPOINT88=rc(),t.PHY_UCHAR=oc()}M?e():F.unshift(e)}(),this.Ammo=t,e},e.exports=i,new i)}));function l5(e,t){return e.setValue(t.x,t.y,t.z),e}function c5(e,t){return e.x=t.x(),e.y=t.y(),e.z=t.z(),e}function u5(e,t){return e.setValue(t.x,t.y,t.z,t.w),e}function h5(e,t){delete t.xi[e.vi]}var p5,f5,_5,d5,m5,v5,y5,g5,A5,b5,x5=qa("cc.PhysicMaterial")((a5=o5=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_friction",n5,ne(e)),_e(e,"_restitution",r5,ne(e)),t.allMaterials.push(ne(e)),""==e._uuid&&(e._uuid="pm_"+t._idCounter++),e}return ee(t,Ul),J(t,[{key:"friction",get:function(){return this._friction},set:function(e){ui(this._friction,e)||(this._friction=e,this.emit("physics_material_update"))}},{key:"restitution",get:function(){return this._restitution},set:function(e){ui(this._restitution,e)||(this._restitution=e,this.emit("physics_material_update"))}}]),J(t,[{key:"clone",value:function(){var e=new t;return e._friction=this._friction,e._restitution=this._restitution,e}},{key:"destroy",value:function(){if(ae(te(t.prototype),"destroy",this).call(this)){var e=t.allMaterials.indexOf(this);return e>=0&&t.allMaterials.splice(e,1),!0}return!1}}]),t}(),o5.allMaterials=[],o5._idCounter=0,de((i5=a5).prototype,"friction",[Qa],Object.getOwnPropertyDescriptor(i5.prototype,"friction"),i5.prototype),de(i5.prototype,"restitution",[Qa],Object.getOwnPropertyDescriptor(i5.prototype,"restitution"),i5.prototype),n5=de(i5.prototype,"_friction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),r5=de(i5.prototype,"_restitution",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),t5=i5))||t5,T5=function(){function e(){Z(this,e),this._hitPoint=new Mi,this._hitNormal=new Mi,this._distance=0,this._collider=null}return J(e,[{key:"_assign",value:function(e,t,i,n){Mi.copy(this._hitPoint,e),Mi.copy(this._hitNormal,n),this._distance=t,this._collider=i}},{key:"clone",value:function(){var t=new e;return Mi.copy(t._hitPoint,this._hitPoint),Mi.copy(t._hitNormal,this._hitNormal),t._distance=this._distance,t._collider=this._collider,t}},{key:"hitPoint",get:function(){return this._hitPoint}},{key:"distance",get:function(){return this._distance}},{key:"collider",get:function(){return this._collider}},{key:"hitNormal",get:function(){return this._hitNormal}}]),e}(),S5=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this))).physicsWorld=void 0,e.raycastClosestResult=new T5,e.raycastResults=[],e._enable=!0,e._allowSleep=!0,e._gravity=new Mi(0,-10,0),e._maxSubStep=1,e._deltaTime=1/60,e._useFixedTime=!0,e._timeSinceLastUpdate=0,e._timeReset=!0,e.raycastOptions={group:-1,mask:-1,queryTrigger:!0,maxDistance:1e7},e.raycastResultPool=new Ta((function(){return new T5}),1),e.physicsWorld=new q8,e.gravity=e._gravity,e.allowSleep=e._allowSleep,e._material=new x5,e._material.friction=.5,e._material.restitution=.1,e._material.on("physics_material_update",e._updateMaterial,ne(e)),e.physicsWorld.setDefaultMaterial(e._material),e}return ee(t,Vw),J(t,[{key:"enable",get:function(){return this._enable},set:function(e){e||(this._timeReset=!0),this._enable=e}},{key:"allowSleep",get:function(){return this._allowSleep},set:function(e){this._allowSleep=e,this.physicsWorld.setAllowSleep(e)}},{key:"maxSubStep",get:function(){return this._maxSubStep},set:function(e){this._maxSubStep=e}},{key:"deltaTime",get:function(){return this._deltaTime},set:function(e){this._deltaTime=e}},{key:"useFixedTime",get:function(){return this._useFixedTime},set:function(e){this._useFixedTime=e}},{key:"gravity",get:function(){return this._gravity},set:function(e){this._gravity.set(e),this.physicsWorld.setGravity(e)}},{key:"defaultMaterial",get:function(){return this._material}}],[{key:"instance",get:function(){return t._instance}}]),J(t,[{key:"postUpdate",value:function(e){this._enable?(this._timeReset?(this._timeSinceLastUpdate=0,this._timeReset=!1):this._timeSinceLastUpdate=e,this.physicsWorld.emitEvents(),gk.emit(lk.EVENT_BEFORE_PHYSICS),this.physicsWorld.syncSceneToPhysics(),this._useFixedTime?this.physicsWorld.step(this._deltaTime):this.physicsWorld.step(this._deltaTime,this._timeSinceLastUpdate,this._maxSubStep),this.physicsWorld.syncSceneToPhysics(),gk.emit(lk.EVENT_AFTER_PHYSICS)):this.physicsWorld.syncSceneToPhysics()}},{key:"raycast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e7,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.raycastResultPool.reset(),this.raycastResults.length=0,this.raycastOptions.mask=t,this.raycastOptions.maxDistance=i,this.raycastOptions.queryTrigger=n,this.physicsWorld.raycast(e,this.raycastOptions,this.raycastResultPool,this.raycastResults)}},{key:"raycastClosest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e7,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.raycastOptions.mask=t,this.raycastOptions.maxDistance=i,this.raycastOptions.queryTrigger=n,this.physicsWorld.raycastClosest(e,this.raycastOptions,this.raycastClosestResult)}},{key:"_updateMaterial",value:function(){this.physicsWorld.setDefaultMaterial(this._material)}}]),t}();S5.ID="PHYSICS",S5._instance=void 0,gk.on(lk.EVENT_INIT,(function(){var e=new cc.PhysicsSystem;cc.PhysicsSystem._instance=e,gk.registerSystem(S5.ID,e,0)}));var E5,C5,w5,k5,O5,R5,F5,I5,M5,P5,D5,B5,N5,L5,z5,G5,U5,X5,V5,H5,j5,W5,Y5,q5,Q5,Z5,K5,J5,$5,e3,t3=(p5=qa("cc.ColliderComponent"),f5=Qa({type:x5,displayName:"Material",displayOrder:-1,tooltip:"源材质"}),_5=Qa({displayOrder:0,tooltip:"是否与其它碰撞器产生碰撞，并产生物理行为"}),d5=Qa({type:Mi,displayOrder:1,tooltip:"形状的中心点（与所在 Node 中心点的相对位置）"}),m5=Qa({type:x5}),p5((de((y5=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._isSharedMaterial=!0,_e(e,"_material",g5,ne(e)),_e(e,"_isTrigger",A5,ne(e)),_e(e,"_center",b5,ne(e)),e}return ee(t,Al(sp)),J(t,[{key:"sharedMaterial",get:function(){return this._material},set:function(e){this.material=e}},{key:"material",get:function(){return this._isSharedMaterial&&null!=this._material&&(this._material.off("physics_material_update",this._updateMaterial,this),this._material=this._material.clone(),this._material.on("physics_material_update",this._updateMaterial,this),this._isSharedMaterial=!1),this._material},set:function(e){null!=e&&null!=this._material?this._material._uuid!=e._uuid&&(this._material.off("physics_material_update",this._updateMaterial,this),e.on("physics_material_update",this._updateMaterial,this),this._isSharedMaterial=!1,this._material=e):null!=e&&null==this._material?(e.on("physics_material_update",this._updateMaterial,this),this._material=e):null==e&&null!=this._material&&(this._material.off("physics_material_update",this._updateMaterial,this),this._material=e),this._updateMaterial()}},{key:"isTrigger",get:function(){return this._isTrigger},set:function(e){this._isTrigger=e,this._shape.setAsTrigger(this._isTrigger)}},{key:"center",get:function(){return this._center},set:function(e){Mi.copy(this._center,e),this._shape.setCenter(this._center)}},{key:"attachedRigidBody",get:function(){return this.shape.attachedRigidBody}},{key:"shape",get:function(){return this._shape}},{key:"_assertOnload",get:function(){var e=0==this._isOnLoadCalled;return e&&h("Physics Error: Please make sure that the node has been added to the scene"),!e}}]),J(t,[{key:"on",value:function(e,i,n,r){ae(te(t.prototype),"on",this).call(this,e,i,n,r)}},{key:"off",value:function(e,i,n){ae(te(t.prototype),"off",this).call(this,e,i,n)}},{key:"once",value:function(e,i,n){ae(te(t.prototype),"once",this).call(this,e,i,n)}},{key:"setGroup",value:function(e){this._shape.setGroup(e)}},{key:"getGroup",value:function(){return this._shape.getGroup()}},{key:"addGroup",value:function(e){this._shape.addGroup(e)}},{key:"removeGroup",value:function(e){this._shape.removeGroup(e)}},{key:"getMask",value:function(){return this._shape.getMask()}},{key:"setMask",value:function(e){this._shape.setMask(e)}},{key:"addMask",value:function(e){this._shape.addMask(e)}},{key:"removeMask",value:function(e){this._shape.removeMask(e)}},{key:"__preload",value:function(){this._shape.initialize(this)}},{key:"onLoad",value:function(){this.sharedMaterial=null==this._material?S5.instance.defaultMaterial:this._material,this._shape.onLoad()}},{key:"onEnable",value:function(){this._shape.onEnable()}},{key:"onDisable",value:function(){this._shape.onDisable()}},{key:"onDestroy",value:function(){this._material&&this._material.off("physics_material_update",this._updateMaterial,this),this._shape.onDestroy()}},{key:"_updateMaterial",value:function(){this._shape.setMaterial(this._material)}}]),t}()).prototype,"sharedMaterial",[f5],Object.getOwnPropertyDescriptor(y5.prototype,"sharedMaterial"),y5.prototype),de(y5.prototype,"isTrigger",[_5],Object.getOwnPropertyDescriptor(y5.prototype,"isTrigger"),y5.prototype),de(y5.prototype,"center",[d5],Object.getOwnPropertyDescriptor(y5.prototype,"center"),y5.prototype),g5=de(y5.prototype,"_material",[m5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A5=de(y5.prototype,"_isTrigger",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b5=de(y5.prototype,"_center",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),v5=y5))||v5),i3=(E5=qa("cc.BoxColliderComponent"),C5=as("i18n:cc.BoxColliderComponent"),w5=ts(98),k5=es("Physics/BoxCollider"),O5=Qa({type:Mi,tooltip:"盒的大小，即长、宽、高"}),E5(R5=C5(R5=w5(R5=k5(R5=Ja((de((F5=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_size",I5,ne(e)),e._shape=function(e){return new Z8(e)}(e._size),e}return ee(t,t3),J(t,[{key:"size",get:function(){return this._size},set:function(e){Mi.copy(this._size,e),this.shape.setSize(this._size)}},{key:"shape",get:function(){return this._shape}}]),t}()).prototype,"size",[O5],Object.getOwnPropertyDescriptor(F5.prototype,"size"),F5.prototype),I5=de(F5.prototype,"_size",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(1,1,1)}}),R5=F5))||R5)||R5)||R5)||R5)||R5),n3=(M5=qa("cc.SphereColliderComponent"),P5=as("i18n:cc.SphereColliderComponent"),D5=ts(98),B5=es("Physics/SphereCollider"),N5=Qa({tooltip:"球的半径"}),M5(L5=P5(L5=D5(L5=B5(L5=Ja((de((z5=function(e){function t(){var e,i;return Z(this,t),_e(e=re(this,te(t).call(this)),"_radius",G5,ne(e)),e._shape=(i=e._radius,new K8(i)),e}return ee(t,t3),J(t,[{key:"radius",get:function(){return this._radius},set:function(e){this._radius=e,this.shape.setRadius(this._radius)}},{key:"shape",get:function(){return this._shape}}]),t}()).prototype,"radius",[N5],Object.getOwnPropertyDescriptor(z5.prototype,"radius"),z5.prototype),G5=de(z5.prototype,"_radius",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L5=z5))||L5)||L5)||L5)||L5)||L5);(U5=exports.ERigidBodyType||(exports.ERigidBodyType={}))[U5.DYNAMIC=1]="DYNAMIC",U5[U5.STATIC=2]="STATIC",U5[U5.KINEMATIC=4]="KINEMATIC",(X5=exports.EAxisDirection||(exports.EAxisDirection={}))[X5.X_AXIS=0]="X_AXIS",X5[X5.Y_AXIS=1]="Y_AXIS",X5[X5.Z_AXIS=2]="Z_AXIS",At(exports.EAxisDirection);var r3,o3,a3,s3,l3,c3,u3,h3,p3,f3,_3,d3,m3,v3,y3,g3,A3,b3,x3,T3,S3,E3,C3,w3,k3,O3,R3,F3,I3,M3,P3,D3,B3,N3,L3,z3,G3,U3,X3,V3,H3,j3,W3,Y3,q3,Q3,Z3,K3,J3,$3,e9,t9,i9,n9,r9,o9,a9,s9,l9,c9,u9,h9,p9,f9,_9=(V5=qa("cc.CapsuleColliderComponent"),H5=as("i18n:cc.CapsuleColliderComponent"),j5=ts(98),W5=es("Physics/CapsuleCollider"),Y5=Qa({tooltip:"本地坐标系下胶囊体上的球的半径"}),q5=Qa({tooltip:"本地坐标系下胶囊体上的圆柱体的高度"}),Q5=Qa({type:exports.EAxisDirection,tooltip:"本地坐标系下胶囊体的朝向"}),V5(Z5=H5(Z5=j5(Z5=W5(Z5=Ja((de((K5=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_radius",J5,ne(e)),_e(e,"_cylinderHeight",$5,ne(e)),_e(e,"_direction",e3,ne(e)),e._shape=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new J8(e,t,i)}(),e}return ee(t,t3),J(t,[{key:"radius",get:function(){return this._radius},set:function(e){e<0&&(e=0),this._radius=e,this.shape.setRadius(e)}},{key:"cylinderHeight",get:function(){return this._cylinderHeight},set:function(e){e<0&&(e=0),this._cylinderHeight=e,this.shape.setCylinderHeight(e)}},{key:"direction",get:function(){return this._direction},set:function(e){(e=Math.floor(e))<exports.EAxisDirection.X_AXIS||e>exports.EAxisDirection.Z_AXIS||(this._direction=e,this.shape.setDirection(e))}},{key:"height",get:function(){return 2*this._radius+this._cylinderHeight},set:function(e){var t=e-2*this._radius;t<0&&(t=0),this.cylinderHeight=t}},{key:"worldHeight",get:function(){return 2*this._radius*this._getRadiusScale()+this._cylinderHeight*this._getHeightScale()}},{key:"shape",get:function(){return this._shape}}]),J(t,[{key:"_getRadiusScale",value:function(){if(null==this.node)return 1;var e=this.node.worldScale;return this._direction==exports.EAxisDirection.Y_AXIS?Math.abs(ki(e.x,e.z)):this._direction==exports.EAxisDirection.X_AXIS?Math.abs(ki(e.y,e.z)):Math.abs(ki(e.x,e.y))}},{key:"_getHeightScale",value:function(){if(null==this.node)return 1;var e=this.node.worldScale;return this._direction==exports.EAxisDirection.Y_AXIS?Math.abs(e.y):this._direction==exports.EAxisDirection.X_AXIS?Math.abs(e.x):Math.abs(e.z)}}]),t}()).prototype,"radius",[Y5],Object.getOwnPropertyDescriptor(K5.prototype,"radius"),K5.prototype),de(K5.prototype,"cylinderHeight",[q5],Object.getOwnPropertyDescriptor(K5.prototype,"cylinderHeight"),K5.prototype),de(K5.prototype,"direction",[Q5],Object.getOwnPropertyDescriptor(K5.prototype,"direction"),K5.prototype),J5=de(K5.prototype,"_radius",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),$5=de(K5.prototype,"_cylinderHeight",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e3=de(K5.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.EAxisDirection.Y_AXIS}}),Z5=K5))||Z5)||Z5)||Z5)||Z5)||Z5),d9=(r3=qa("cc.CylinderColliderComponent"),o3=as("i18n:cc.CylinderColliderComponent"),a3=ts(98),s3=es("Physics/CylinderCollider(beta)"),l3=Qa({tooltip:"圆柱体上圆面的半径"}),c3=Qa({tooltip:"圆柱体在相应轴向的高度"}),u3=Qa({type:exports.EAxisDirection}),r3(h3=o3(h3=a3(h3=s3(h3=Ja((de((p3=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_radius",f3,ne(e)),_e(e,"_height",_3,ne(e)),_e(e,"_direction",d3,ne(e)),e._shape=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new e5(e,t,i)}(),e}return ee(t,t3),J(t,[{key:"radius",get:function(){return this._radius},set:function(e){this._radius!=e&&(e<0&&(e=0),this._radius=e,this.shape.setRadius(e))}},{key:"height",get:function(){return this._height},set:function(e){this._height!=e&&(e<0&&(e=0),this._height=e,this.shape.setHeight(e))}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction!=e&&(e<exports.EAxisDirection.X_AXIS||e>exports.EAxisDirection.Z_AXIS||(this._direction=e,this.shape.setDirection(e)))}},{key:"shape",get:function(){return this._shape}}]),t}()).prototype,"radius",[l3],Object.getOwnPropertyDescriptor(p3.prototype,"radius"),p3.prototype),de(p3.prototype,"height",[c3],Object.getOwnPropertyDescriptor(p3.prototype,"height"),p3.prototype),de(p3.prototype,"direction",[u3],Object.getOwnPropertyDescriptor(p3.prototype,"direction"),p3.prototype),f3=de(p3.prototype,"_radius",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),_3=de(p3.prototype,"_height",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),d3=de(p3.prototype,"_direction",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return exports.EAxisDirection.Y_AXIS}}),h3=p3))||h3)||h3)||h3)||h3)||h3),m9=(m3=qa("cc.MeshColliderComponent"),v3=as("i18n:cc.MeshColliderComponent"),y3=ts(98),g3=es("Physics/MeshCollider"),A3=Qa({type:lu}),m3(b3=v3(b3=y3(b3=g3(b3=Ja((de((x3=function(e){function t(){var e;return Z(this,t),_e(e=re(this,te(t).call(this)),"_mesh",T3,ne(e)),e._shape=new $8,e}return ee(t,t3),J(t,[{key:"mesh",get:function(){return this._mesh},set:function(e){this._mesh=e,this.shape.setMesh(this._mesh)}},{key:"shape",get:function(){return this._shape}}]),t}()).prototype,"mesh",[A3],Object.getOwnPropertyDescriptor(x3.prototype,"mesh"),x3.prototype),T3=de(x3.prototype,"_mesh",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b3=x3))||b3)||b3)||b3)||b3)||b3),v9=(S3=qa("cc.RigidBodyComponent"),E3=as("i18n:cc.RigidBodyComponent"),C3=ts(99),w3=es("Physics/RigidBody"),k3=Qa({displayOrder:0,tooltip:"刚体的质量"}),O3=Qa({displayOrder:1,tooltip:"线性阻尼"}),R3=Qa({displayOrder:2,tooltip:"旋转阻尼"}),F3=Qa({displayOrder:3,tooltip:"刚体是否由物理系统控制运动"}),I3=Qa({displayOrder:4,tooltip:"刚体是否使用重力"}),M3=Qa({displayOrder:5,tooltip:"刚体是否固定旋转"}),P3=Qa({displayOrder:6,tooltip:"线性速度的因子，可以用来控制每个轴方向上的速度的缩放"}),D3=Qa({displayOrder:7,tooltip:"旋转速度的因子，可以用来控制每个轴方向上的旋转速度的缩放"}),S3(B3=E3(B3=C3(B3=w3(B3=Ja(B3=is((de((N3=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this)))._allowSleep=!0,_e(e,"_mass",L3,ne(e)),_e(e,"_linearDamping",z3,ne(e)),_e(e,"_angularDamping",G3,ne(e)),_e(e,"_fixedRotation",U3,ne(e)),_e(e,"_isKinematic",X3,ne(e)),_e(e,"_useGravity",V3,ne(e)),_e(e,"_linearFactor",H3,ne(e)),_e(e,"_angularFactor",j3,ne(e)),e._body=new Q8,e}return ee(t,sp),J(t,[{key:"allowSleep",get:function(){return this._allowSleep},set:function(e){this._allowSleep=e,this._body.setAllowSleep(e)}},{key:"mass",get:function(){return this._mass},set:function(e){this._mass=e,this._body.setMass(e)}},{key:"linearDamping",get:function(){return this._linearDamping},set:function(e){this._linearDamping=e,this._body.setLinearDamping(e)}},{key:"angularDamping",get:function(){return this._angularDamping},set:function(e){this._angularDamping=e,this._body.setAngularDamping(e)}},{key:"isKinematic",get:function(){return this._isKinematic},set:function(e){this._isKinematic=e,this._body.setIsKinematic(e)}},{key:"useGravity",get:function(){return this._useGravity},set:function(e){this._useGravity=e,this._body.useGravity(e)}},{key:"fixedRotation",get:function(){return this._fixedRotation},set:function(e){this._fixedRotation=e,this._body.fixRotation(e)}},{key:"linearFactor",get:function(){return this._linearFactor},set:function(e){Mi.copy(this._linearFactor,e),this._body.setLinearFactor(this._linearFactor)}},{key:"angularFactor",get:function(){return this._angularFactor},set:function(e){Mi.copy(this._angularFactor,e),this._body.setAngularFactor(this._angularFactor)}},{key:"isAwake",get:function(){return!!this._assertOnload&&this._body.isAwake}},{key:"isSleepy",get:function(){return!!this._assertOnload&&this._body.isSleepy}},{key:"isSleeping",get:function(){return!!this._assertOnload&&this._body.isSleeping}},{key:"body",get:function(){return this._body}},{key:"_assertOnload",get:function(){var e=0==this._isOnLoadCalled;return e&&h("[Physics]: Please make sure that the node has been added to the scene"),!e}}]),J(t,[{key:"__preload",value:function(){this._body.initialize(this)}},{key:"onEnable",value:function(){this._body.onEnable()}},{key:"onDisable",value:function(){this._body.onDisable()}},{key:"onDestroy",value:function(){this._body.onDestroy()}},{key:"applyForce",value:function(e,t){this._assertOnload&&this._body.applyForce(e,t)}},{key:"applyLocalForce",value:function(e,t){this._assertOnload&&this._body.applyLocalForce(e,t)}},{key:"applyImpulse",value:function(e,t){this._assertOnload&&this._body.applyImpulse(e,t)}},{key:"applyLocalImpulse",value:function(e,t){this._assertOnload&&this._body.applyLocalImpulse(e,t)}},{key:"applyTorque",value:function(e){this._assertOnload&&this._body.applyTorque(e)}},{key:"applyLocalTorque",value:function(e){this._assertOnload&&this._body.applyLocalTorque(e)}},{key:"wakeUp",value:function(){this._assertOnload&&this._body.wakeUp()}},{key:"sleep",value:function(){this._assertOnload&&this._body.sleep()}},{key:"getLinearVelocity",value:function(e){this._assertOnload&&this._body.getLinearVelocity(e)}},{key:"setLinearVelocity",value:function(e){this._assertOnload&&this._body.setLinearVelocity(e)}},{key:"getAngularVelocity",value:function(e){this._assertOnload&&this._body.getAngularVelocity(e)}},{key:"setAngularVelocity",value:function(e){this._assertOnload&&this._body.setAngularVelocity(e)}},{key:"setGroup",value:function(e){this._assertOnload&&this._body.setGroup(e)}},{key:"getGroup",value:function(){return this._assertOnload?this._body.getGroup():0}},{key:"addGroup",value:function(e){this._assertOnload&&this._body.addGroup(e)}},{key:"removeGroup",value:function(e){this._assertOnload&&this._body.removeGroup(e)}},{key:"getMask",value:function(){return this._assertOnload?this._body.getMask():0}},{key:"setMask",value:function(e){this._assertOnload&&this._body.setMask(e)}},{key:"addMask",value:function(e){this._assertOnload&&this._body.addMask(e)}},{key:"removeMask",value:function(e){this._assertOnload&&this._body.removeMask(e)}}]),t}()).prototype,"mass",[k3],Object.getOwnPropertyDescriptor(N3.prototype,"mass"),N3.prototype),de(N3.prototype,"linearDamping",[O3],Object.getOwnPropertyDescriptor(N3.prototype,"linearDamping"),N3.prototype),de(N3.prototype,"angularDamping",[R3],Object.getOwnPropertyDescriptor(N3.prototype,"angularDamping"),N3.prototype),de(N3.prototype,"isKinematic",[F3],Object.getOwnPropertyDescriptor(N3.prototype,"isKinematic"),N3.prototype),de(N3.prototype,"useGravity",[I3],Object.getOwnPropertyDescriptor(N3.prototype,"useGravity"),N3.prototype),de(N3.prototype,"fixedRotation",[M3],Object.getOwnPropertyDescriptor(N3.prototype,"fixedRotation"),N3.prototype),de(N3.prototype,"linearFactor",[P3],Object.getOwnPropertyDescriptor(N3.prototype,"linearFactor"),N3.prototype),de(N3.prototype,"angularFactor",[D3],Object.getOwnPropertyDescriptor(N3.prototype,"angularFactor"),N3.prototype),L3=de(N3.prototype,"_mass",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z3=de(N3.prototype,"_linearDamping",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),G3=de(N3.prototype,"_angularDamping",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),U3=de(N3.prototype,"_fixedRotation",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X3=de(N3.prototype,"_isKinematic",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V3=de(N3.prototype,"_useGravity",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H3=de(N3.prototype,"_linearFactor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(1,1,1)}}),j3=de(N3.prototype,"_angularFactor",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi(1,1,1)}}),B3=N3))||B3)||B3)||B3)||B3)||B3)||B3),y9=(W3=qa("cc.ConstantForce"),Y3=as("i18n:cc.ConstantForce"),q3=ts(98),Q3=$a(v9),Z3=es("Physics/ConstantForce"),K3=Qa({displayOrder:0,tooltip:"世界坐标系下的力"}),J3=Qa({displayOrder:1,tooltip:"本地坐标系下的力"}),$3=Qa({displayOrder:2,tooltip:"世界坐标系下的扭转力"}),e9=Qa({displayOrder:3,tooltip:"本地坐标系下的扭转力"}),W3(t9=Y3(t9=q3(t9=Q3(t9=Z3(t9=is(t9=Ja((n9=de((i9=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))))._rigidBody=null,_e(i,"_force",n9,ne(i)),_e(i,"_localForce",r9,ne(i)),_e(i,"_torque",o9,ne(i)),_e(i,"_localTorque",a9,ne(i)),i._mask=0,i}return ee(t,sp),J(t,[{key:"onLoad",value:function(){this._rigidBody=this.node.getComponent(v9),this._maskUpdate(this._force,1),this._maskUpdate(this._localForce,2),this._maskUpdate(this._torque,4),this._maskUpdate(this._localTorque,8)}},{key:"lateUpdate",value:function(e){null!=this._rigidBody&&0!=this._mask&&(1&this._mask&&this._rigidBody.applyForce(this._force),2&this._mask&&this._rigidBody.applyLocalForce(this.localForce),4&this._mask&&this._rigidBody.applyTorque(this._torque),8&this._mask&&this._rigidBody.applyLocalTorque(this._localTorque))}},{key:"_maskUpdate",value:function(e,t){e.strictEquals(Mi.ZERO)?this._mask&=~t:this._mask|=t}},{key:"force",get:function(){return this._force},set:function(e){Mi.copy(this._force,e),this._maskUpdate(this._force,1)}},{key:"localForce",get:function(){return this._localForce},set:function(e){Mi.copy(this._localForce,e),this._maskUpdate(this.localForce,2)}},{key:"torque",get:function(){return this._torque},set:function(e){Mi.copy(this._torque,e),this._maskUpdate(this._torque,4)}},{key:"localTorque",get:function(){return this._localTorque},set:function(e){Mi.copy(this._localTorque,e),this._maskUpdate(this._localTorque,8)}}]),t}()).prototype,"_force",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),r9=de(i9.prototype,"_localForce",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),o9=de(i9.prototype,"_torque",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),a9=de(i9.prototype,"_localTorque",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mi}}),de(i9.prototype,"force",[K3],Object.getOwnPropertyDescriptor(i9.prototype,"force"),i9.prototype),de(i9.prototype,"localForce",[J3],Object.getOwnPropertyDescriptor(i9.prototype,"localForce"),i9.prototype),de(i9.prototype,"torque",[$3],Object.getOwnPropertyDescriptor(i9.prototype,"torque"),i9.prototype),de(i9.prototype,"localTorque",[e9],Object.getOwnPropertyDescriptor(i9.prototype,"localTorque"),i9.prototype),t9=i9))||t9)||t9)||t9)||t9)||t9)||t9)||t9);exports.replaceProperty(S5,"PhysicsSystem",[{name:"ins",newName:"instance"}]),exports.replaceProperty(t3.prototype,"ColliderComponent.prototype",[{name:"attachedRigidbody",newName:"attachedRigidBody"}]),exports.replaceProperty(i3.prototype,"BoxColliderComponent.prototype",[{name:"boxShape",newName:"shape"}]),exports.replaceProperty(n3.prototype,"SphereColliderComponent.prototype",[{name:"sphereShape",newName:"shape"}]),exports.replaceProperty(_9.prototype,"CapsuleColliderComponent.prototype",[{name:"capsuleShape",newName:"shape"}]),exports.replaceProperty(v9.prototype,"RigidBodyComponent.prototype",[{name:"rigidBody",newName:"body"}]),cc.PhysicsSystem=S5,cc.ColliderComponent=t3,cc.BoxColliderComponent=i3,cc.SphereColliderComponent=n3,cc.RigidBodyComponent=v9,cc.PhysicMaterial=x5,cc.PhysicsRayResult=T5,cc.ConstantForce=y9,function(e){e[e.CF_STATIC_OBJECT=1]="CF_STATIC_OBJECT",e[e.CF_KINEMATIC_OBJECT=2]="CF_KINEMATIC_OBJECT",e[e.CF_NO_CONTACT_RESPONSE=4]="CF_NO_CONTACT_RESPONSE",e[e.CF_CUSTOM_MATERIAL_CALLBACK=8]="CF_CUSTOM_MATERIAL_CALLBACK",e[e.CF_CHARACTER_OBJECT=16]="CF_CHARACTER_OBJECT",e[e.CF_DISABLE_VISUALIZE_OBJECT=32]="CF_DISABLE_VISUALIZE_OBJECT",e[e.CF_DISABLE_SPU_COLLISION_PROCESSING=64]="CF_DISABLE_SPU_COLLISION_PROCESSING"}(s9||(s9={})),s5.AmmoCollisionFlags=s9,function(e){e[e.CO_COLLISION_OBJECT=1]="CO_COLLISION_OBJECT",e[e.CO_RIGID_BODY=2]="CO_RIGID_BODY",e[e.CO_GHOST_OBJECT=4]="CO_GHOST_OBJECT",e[e.CO_SOFT_BODY=8]="CO_SOFT_BODY",e[e.CO_HF_FLUID=16]="CO_HF_FLUID",e[e.CO_USER_TYPE=32]="CO_USER_TYPE",e[e.CO_FEATHERSTONE_LINK=64]="CO_FEATHERSTONE_LINK"}(l9||(l9={})),s5.AmmoCollisionObjectTypes=l9,function(e){e[e.ACTIVE_TAG=1]="ACTIVE_TAG",e[e.ISLAND_SLEEPING=2]="ISLAND_SLEEPING",e[e.WANTS_DEACTIVATION=3]="WANTS_DEACTIVATION",e[e.DISABLE_DEACTIVATION=4]="DISABLE_DEACTIVATION",e[e.DISABLE_SIMULATION=5]="DISABLE_SIMULATION"}(c9||(c9={})),function(e){e[e.CF_ANISOTROPIC_FRICTION_DISABLED=0]="CF_ANISOTROPIC_FRICTION_DISABLED",e[e.CF_ANISOTROPIC_FRICTION=1]="CF_ANISOTROPIC_FRICTION",e[e.CF_ANISOTROPIC_ROLLING_FRICTION=2]="CF_ANISOTROPIC_ROLLING_FRICTION"}(u9||(u9={})),s5.AmmoAnisotropicFrictionFlags=u9,function(e){e[e.BT_DISABLE_WORLD_GRAVITY=1]="BT_DISABLE_WORLD_GRAVITY",e[e.BT_ENABLE_GYROPSCOPIC_FORCE=2]="BT_ENABLE_GYROPSCOPIC_FORCE"}(h9||(h9={})),s5.AmmoRigidBodyFlags=h9,function(e){e[e.BOX_SHAPE_PROXYTYPE=0]="BOX_SHAPE_PROXYTYPE",e[e.TRIANGLE_SHAPE_PROXYTYPE=1]="TRIANGLE_SHAPE_PROXYTYPE",e[e.TETRAHEDRAL_SHAPE_PROXYTYPE=2]="TETRAHEDRAL_SHAPE_PROXYTYPE",e[e.CONVEX_TRIANGLEMESH_SHAPE_PROXYTYPE=3]="CONVEX_TRIANGLEMESH_SHAPE_PROXYTYPE",e[e.CONVEX_HULL_SHAPE_PROXYTYPE=4]="CONVEX_HULL_SHAPE_PROXYTYPE",e[e.CONVEX_POINT_CLOUD_SHAPE_PROXYTYPE=5]="CONVEX_POINT_CLOUD_SHAPE_PROXYTYPE",e[e.CUSTOM_POLYHEDRAL_SHAPE_TYPE=6]="CUSTOM_POLYHEDRAL_SHAPE_TYPE",e[e.IMPLICIT_CONVEX_SHAPES_START_HERE=7]="IMPLICIT_CONVEX_SHAPES_START_HERE",e[e.SPHERE_SHAPE_PROXYTYPE=8]="SPHERE_SHAPE_PROXYTYPE",e[e.MULTI_SPHERE_SHAPE_PROXYTYPE=9]="MULTI_SPHERE_SHAPE_PROXYTYPE",e[e.CAPSULE_SHAPE_PROXYTYPE=10]="CAPSULE_SHAPE_PROXYTYPE",e[e.CONE_SHAPE_PROXYTYPE=11]="CONE_SHAPE_PROXYTYPE",e[e.CONVEX_SHAPE_PROXYTYPE=12]="CONVEX_SHAPE_PROXYTYPE",e[e.CYLINDER_SHAPE_PROXYTYPE=13]="CYLINDER_SHAPE_PROXYTYPE",e[e.UNIFORM_SCALING_SHAPE_PROXYTYPE=14]="UNIFORM_SCALING_SHAPE_PROXYTYPE",e[e.MINKOWSKI_SUM_SHAPE_PROXYTYPE=15]="MINKOWSKI_SUM_SHAPE_PROXYTYPE",e[e.MINKOWSKI_DIFFERENCE_SHAPE_PROXYTYPE=16]="MINKOWSKI_DIFFERENCE_SHAPE_PROXYTYPE",e[e.BOX_2D_SHAPE_PROXYTYPE=17]="BOX_2D_SHAPE_PROXYTYPE",e[e.CONVEX_2D_SHAPE_PROXYTYPE=18]="CONVEX_2D_SHAPE_PROXYTYPE",e[e.CUSTOM_CONVEX_SHAPE_TYPE=19]="CUSTOM_CONVEX_SHAPE_TYPE",e[e.CONCAVE_SHAPES_START_HERE=20]="CONCAVE_SHAPES_START_HERE",e[e.TRIANGLE_MESH_SHAPE_PROXYTYPE=21]="TRIANGLE_MESH_SHAPE_PROXYTYPE",e[e.SCALED_TRIANGLE_MESH_SHAPE_PROXYTYPE=22]="SCALED_TRIANGLE_MESH_SHAPE_PROXYTYPE",e[e.FAST_CONCAVE_MESH_PROXYTYPE=23]="FAST_CONCAVE_MESH_PROXYTYPE",e[e.TERRAIN_SHAPE_PROXYTYPE=24]="TERRAIN_SHAPE_PROXYTYPE",e[e.GIMPACT_SHAPE_PROXYTYPE=25]="GIMPACT_SHAPE_PROXYTYPE",e[e.MULTIMATERIAL_TRIANGLE_MESH_PROXYTYPE=26]="MULTIMATERIAL_TRIANGLE_MESH_PROXYTYPE",e[e.EMPTY_SHAPE_PROXYTYPE=27]="EMPTY_SHAPE_PROXYTYPE",e[e.STATIC_PLANE_PROXYTYPE=28]="STATIC_PLANE_PROXYTYPE",e[e.CUSTOM_CONCAVE_SHAPE_TYPE=29]="CUSTOM_CONCAVE_SHAPE_TYPE",e[e.CONCAVE_SHAPES_END_HERE=30]="CONCAVE_SHAPES_END_HERE",e[e.COMPOUND_SHAPE_PROXYTYPE=31]="COMPOUND_SHAPE_PROXYTYPE",e[e.SOFTBODY_SHAPE_PROXYTYPE=32]="SOFTBODY_SHAPE_PROXYTYPE",e[e.HFFLUID_SHAPE_PROXYTYPE=33]="HFFLUID_SHAPE_PROXYTYPE",e[e.HFFLUID_BUOYANT_CONVEX_SHAPE_PROXYTYPE=34]="HFFLUID_BUOYANT_CONVEX_SHAPE_PROXYTYPE",e[e.INVALID_SHAPE_PROXYTYPE=35]="INVALID_SHAPE_PROXYTYPE",e[e.MAX_BROADPHASE_COLLISION_TYPES=36]="MAX_BROADPHASE_COLLISION_TYPES"}(p9||(p9={})),s5.AmmoBroadphaseNativeTypes=p9,function(e){e[e.DefaultFilter=1]="DefaultFilter",e[e.StaticFilter=2]="StaticFilter",e[e.KinematicFilter=4]="KinematicFilter",e[e.DebrisFilter=8]="DebrisFilter",e[e.SensorTrigger=16]="SensorTrigger",e[e.CharacterFilter=32]="CharacterFilter",e[e.AllFilter=-1]="AllFilter"}(f9||(f9={})),s5.AmmoCollisionFilterGroups=f9;var g9=new Mi,A9=new Mi,b9=function(){function e(){Z(this,e),this.id=void 0,this._isEnabled=!1,this._btVec3_0=new s5.btVector3,this._btVec3_1=new s5.btVector3,this.id=e.idCounter++}return J(e,[{key:"setMass",value:function(e){var t=this._sharedBody.bodyStruct.localInertia;t.setValue(1.6666666269302368,1.6666666269302368,1.6666666269302368),this._btCompoundShape.getNumChildShapes()>0&&this._btCompoundShape.calculateLocalInertia(this._rigidBody.mass,t),this.impl.setMassProps(e,t),this._sharedBody.updateByReAdd()}},{key:"setLinearDamping",value:function(e){this.impl.setDamping(this._rigidBody.linearDamping,this._rigidBody.angularDamping)}},{key:"setAngularDamping",value:function(e){this.impl.setDamping(this._rigidBody.linearDamping,this._rigidBody.angularDamping)}},{key:"setIsKinematic",value:function(e){var t=this.impl.getCollisionFlags();e?t|=s9.CF_KINEMATIC_OBJECT:t&=~s9.CF_KINEMATIC_OBJECT,this.impl.setCollisionFlags(t)}},{key:"useGravity",value:function(e){var t=this.impl.getFlags();e?t&=~h9.BT_DISABLE_WORLD_GRAVITY:(this.impl.setGravity(l5(this._btVec3_0,Mi.ZERO)),t|=h9.BT_DISABLE_WORLD_GRAVITY),this.impl.setFlags(t),this._sharedBody.updateByReAdd()}},{key:"fixRotation",value:function(e){e?this.impl.setAngularFactor(l5(this._btVec3_0,Mi.ZERO)):this.impl.setAngularFactor(l5(this._btVec3_0,this._rigidBody.angularFactor)),this.isAwake||this.impl.activate()}},{key:"setLinearFactor",value:function(e){this.impl.setLinearFactor(l5(this._btVec3_0,e)),this.isAwake||this.impl.activate()}},{key:"setAngularFactor",value:function(e){this._rigidBody.fixedRotation||this.impl.setAngularFactor(l5(this._btVec3_0,e)),this.isAwake||this.impl.activate()}},{key:"setAllowSleep",value:function(e){e?this.impl.forceActivationState(c9.ACTIVE_TAG):this.impl.forceActivationState(c9.DISABLE_DEACTIVATION),this.isAwake||this.impl.activate()}},{key:"isAwake",get:function(){var e=this.impl.getActivationState();return e==c9.ACTIVE_TAG||e==c9.DISABLE_DEACTIVATION}},{key:"isSleepy",get:function(){return this.impl.getActivationState()==c9.WANTS_DEACTIVATION}},{key:"isSleeping",get:function(){return this.impl.getActivationState()==c9.ISLAND_SLEEPING}},{key:"isEnabled",get:function(){return this._isEnabled}},{key:"impl",get:function(){return this._sharedBody.body}},{key:"rigidBody",get:function(){return this._rigidBody}},{key:"_btCompoundShape",get:function(){return this._sharedBody.bodyCompoundShape}}]),J(e,[{key:"initialize",value:function(e){this._rigidBody=e,this._sharedBody=S5.instance.physicsWorld.getSharedBody(this._rigidBody.node,this),this._sharedBody.reference=!0}},{key:"onEnable",value:function(){this._isEnabled=!0,this.setMass(this._rigidBody.mass),this.setAllowSleep(this._rigidBody.allowSleep),this.setLinearDamping(this._rigidBody.linearDamping),this.setAngularDamping(this._rigidBody.angularDamping),this.setIsKinematic(this._rigidBody.isKinematic),this.fixRotation(this._rigidBody.fixedRotation),this.setLinearFactor(this._rigidBody.linearFactor),this.setAngularFactor(this._rigidBody.angularFactor),this.useGravity(this._rigidBody.useGravity),this._sharedBody.bodyEnabled=!0}},{key:"onDisable",value:function(){this._isEnabled=!1,this._sharedBody.bodyEnabled=!1}},{key:"onDestroy",value:function(){this._sharedBody.reference=!1,this._rigidBody=null,this._sharedBody=null}},{key:"wakeUp",value:function(e){this.impl.activate(e)}},{key:"sleep",value:function(){return this.impl.wantsSleeping()}},{key:"getType",value:function(){return this.impl.isStaticOrKinematicObject()?this.impl.isKinematicObject()?exports.ERigidBodyType.KINEMATIC:exports.ERigidBodyType.STATIC:exports.ERigidBodyType.DYNAMIC}},{key:"getLinearVelocity",value:function(e){return c5(e,this.impl.getLinearVelocity())}},{key:"setLinearVelocity",value:function(e){this.isAwake||this.impl.activate(),l5(this.impl.getLinearVelocity(),e)}},{key:"getAngularVelocity",value:function(e){return c5(e,this.impl.getAngularVelocity())}},{key:"setAngularVelocity",value:function(e){this.isAwake||this.impl.activate(),l5(this.impl.getAngularVelocity(),e)}},{key:"applyLocalForce",value:function(e,t){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate();var i=this._sharedBody.node.worldRotation,n=Mi.transformQuat(g9,e,i),r=t?Mi.transformQuat(A9,t,i):Mi.ZERO;this.impl.applyForce(l5(this._btVec3_0,n),l5(this._btVec3_1,r))}},{key:"applyLocalTorque",value:function(e){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate(),Mi.transformQuat(g9,e,this._sharedBody.node.worldRotation),this.impl.applyTorque(l5(this._btVec3_0,g9))}},{key:"applyLocalImpulse",value:function(e,t){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate();var i=this._sharedBody.node.worldRotation,n=Mi.transformQuat(g9,e,i),r=t?Mi.transformQuat(A9,t,i):Mi.ZERO;this.impl.applyImpulse(l5(this._btVec3_0,n),l5(this._btVec3_1,r))}},{key:"applyForce",value:function(e,t){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate();var i=t||Mi.ZERO;this.impl.applyForce(l5(this._btVec3_0,e),l5(this._btVec3_1,i))}},{key:"applyTorque",value:function(e){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate(),this.impl.applyTorque(l5(this._btVec3_0,e))}},{key:"applyImpulse",value:function(e,t){this._sharedBody.syncSceneToPhysics(),this.isAwake||this.impl.activate();var i=t||Mi.ZERO;this.impl.applyImpulse(l5(this._btVec3_0,e),l5(this._btVec3_1,i))}},{key:"getGroup",value:function(){return this._sharedBody.collisionFilterGroup}},{key:"setGroup",value:function(e){this._sharedBody.collisionFilterGroup=e}},{key:"addGroup",value:function(e){this._sharedBody.collisionFilterGroup|=e}},{key:"removeGroup",value:function(e){this._sharedBody.collisionFilterGroup&=~e}},{key:"getMask",value:function(){return this._sharedBody.collisionFilterMask}},{key:"setMask",value:function(e){this._sharedBody.collisionFilterMask=e}},{key:"addMask",value:function(e){this._sharedBody.collisionFilterMask|=e}},{key:"removeMask",value:function(e){this._sharedBody.collisionFilterMask&=~e}}]),e}();b9.idCounter=0;var x9=function(){function e(){Z(this,e)}return J(e,null,[{key:"bodyStructs",get:function(){return this.bodyAndGhosts}},{key:"ghostStructs",get:function(){return this.bodyAndGhosts}}]),e}();x9.bodyAndGhosts={};var T9=new Mi,S9=new Xi,E9=0,C9=function(){function e(t,i){Z(this,e),this.id=void 0,this.node=void 0,this.wrappedWorld=void 0,this.bodyStruct=void 0,this.ghostStruct=void 0,this._collisionFilterGroup=1,this._collisionFilterMask=-1,this.ref=0,this.bodyIndex=-1,this.ghostIndex=-1,this._wrappedBody=null,this.wrappedWorld=i,this.node=t,this.id=e.idCounter++;var n=new s5.btTransform;n.setIdentity(),l5(n.getOrigin(),this.node.worldPosition);var r=new s5.btQuaternion;u5(r,this.node.worldRotation),n.setRotation(r);var o=new s5.btDefaultMotionState(n),a=new s5.btVector3(1.6666666269302368,1.6666666269302368,1.6666666269302368),s=new s5.btCompoundShape,l=new s5.btRigidBodyConstructionInfo(0,o,s,a),c=new s5.btRigidBody(l);this.bodyStruct={id:E9++,body:c,localInertia:a,motionState:o,startTransform:n,shape:s,rbInfo:l,worldQuat:r,wrappedShapes:[]},x9.bodyStructs["KEY"+this.bodyStruct.id]=this.bodyStruct,this.body.setUserIndex(this.bodyStruct.id);var u=new s5.btCollisionObject,h=new s5.btCompoundShape;u.setCollisionShape(h),u.setCollisionFlags(s9.CF_NO_CONTACT_RESPONSE),this.ghostStruct={id:E9++,ghost:u,shape:h,worldQuat:new s5.btQuaternion,wrappedShapes:[]},x9.ghostStructs["KEY"+this.ghostStruct.id]=this.ghostStruct,this.ghost.setUserIndex(this.ghostStruct.id),this.body.setActivationState(c9.DISABLE_DEACTIVATION),this.ghost.setActivationState(c9.DISABLE_DEACTIVATION)}return J(e,[{key:"wrappedBody",get:function(){return this._wrappedBody}},{key:"bodyCompoundShape",get:function(){return this.bodyStruct.shape}},{key:"ghostCompoundShape",get:function(){return this.ghostStruct.shape}},{key:"body",get:function(){return this.bodyStruct.body}},{key:"ghost",get:function(){return this.ghostStruct.ghost}},{key:"collisionFilterGroup",get:function(){return this._collisionFilterGroup},set:function(e){e!=this._collisionFilterGroup&&(this._collisionFilterGroup=e,this.updateByReAdd())}},{key:"collisionFilterMask",get:function(){return this._collisionFilterMask},set:function(e){e!=this._collisionFilterMask&&(this._collisionFilterMask=e,this.updateByReAdd())}},{key:"bodyEnabled",set:function(e){e?this.bodyIndex<0&&(this.bodyIndex=this.wrappedWorld.bodies.length,this.wrappedWorld.addSharedBody(this),this.syncInitialBody()):this.bodyIndex>=0&&(0==this.bodyStruct.wrappedShapes.length&&null==this.wrappedBody||0==this.bodyStruct.wrappedShapes.length&&null!=this.wrappedBody&&!this.wrappedBody.isEnabled||0==this.bodyStruct.wrappedShapes.length&&null!=this.wrappedBody&&!this.wrappedBody.rigidBody.enabledInHierarchy)&&(this.body.clearState(),this.bodyIndex=-1,this.wrappedWorld.removeSharedBody(this))}},{key:"ghostEnabled",set:function(e){e?this.ghostIndex<0&&this.ghostStruct.wrappedShapes.length>0&&(this.ghostIndex=1,this.wrappedWorld.addGhostObject(this),this.syncInitialGhost()):this.ghostIndex>=0&&0==this.ghostStruct.wrappedShapes.length&&this.ghost&&(this.ghostIndex=-1,this.wrappedWorld.removeGhostObject(this))}},{key:"reference",set:function(e){e?this.ref++:this.ref--,0==this.ref&&this.destroy()}}],[{key:"getSharedBody",value:function(t,i,n){var r,o=t.uuid;return e.sharedBodesMap.has(o)?r=e.sharedBodesMap.get(o):(r=new e(t,i),e.sharedBodesMap.set(t.uuid,r)),n&&(r._wrappedBody=n),r}}]),J(e,[{key:"addShape",value:function(e,t){t?this.ghostStruct.wrappedShapes.indexOf(e)<0&&(this.ghostStruct.wrappedShapes.push(e),e.setCompound(this.ghostCompoundShape),this.ghostEnabled=!0):this.bodyStruct.wrappedShapes.indexOf(e)<0&&(this.bodyStruct.wrappedShapes.push(e),e.setCompound(this.bodyCompoundShape),this.bodyEnabled=!0)}},{key:"removeShape",value:function(e,t){if(t){var i=this.ghostStruct.wrappedShapes.indexOf(e);i>=0&&(this.ghostStruct.wrappedShapes.splice(i,1),e.setCompound(null),this.ghostEnabled=!1)}else{var n=this.bodyStruct.wrappedShapes.indexOf(e);n>=0&&(this.bodyStruct.wrappedShapes.splice(n,1),e.setCompound(null),this.bodyEnabled=!1)}}},{key:"syncSceneToPhysics",value:function(){if(this.node.hasChangedFlags){var e=this.body.getWorldTransform();if(l5(e.getOrigin(),this.node.worldPosition),u5(this.bodyStruct.worldQuat,this.node.worldRotation),e.setRotation(this.bodyStruct.worldQuat),this.isBodySleeping()&&this.body.activate(),this.node.hasChangedFlags&sh.SCALE)for(var t=0;t<this.bodyStruct.wrappedShapes.length;t++)this.bodyStruct.wrappedShapes[t].setScale()}}},{key:"syncPhysicsToScene",value:function(){if(!this.body.isStaticObject()&&!this.isBodySleeping()){var e,t,i=this.body.getWorldTransform();this.node.worldPosition=c5(T9,i.getOrigin()),i.getBasis().getRotation(this.bodyStruct.worldQuat),this.node.worldRotation=(e=S9,t=this.bodyStruct.worldQuat,e.x=t.x(),e.y=t.y(),e.z=t.z(),e.w=t.w(),e);var n=this.ghost.getWorldTransform();l5(n.getOrigin(),this.node.worldPosition),u5(this.ghostStruct.worldQuat,this.node.worldRotation),n.setRotation(this.ghostStruct.worldQuat)}}},{key:"syncSceneToGhost",value:function(){if(this.node.hasChangedFlags){var e=this.ghost.getWorldTransform();if(l5(e.getOrigin(),this.node.worldPosition),u5(this.ghostStruct.worldQuat,this.node.worldRotation),e.setRotation(this.ghostStruct.worldQuat),this.ghost.activate(),this.node.hasChangedFlags&sh.SCALE)for(var t=0;t<this.ghostStruct.wrappedShapes.length;t++)this.ghostStruct.wrappedShapes[t].setScale()}}},{key:"syncInitialBody",value:function(){var e=this.body.getWorldTransform();l5(e.getOrigin(),this.node.worldPosition),u5(this.bodyStruct.worldQuat,this.node.worldRotation),e.setRotation(this.bodyStruct.worldQuat);for(var t=0;t<this.bodyStruct.wrappedShapes.length;t++)this.bodyStruct.wrappedShapes[t].setScale();this.body.activate()}},{key:"syncInitialGhost",value:function(){var e=this.ghost.getWorldTransform();l5(e.getOrigin(),this.node.worldPosition),u5(this.ghostStruct.worldQuat,this.node.worldRotation),e.setRotation(this.ghostStruct.worldQuat);for(var t=0;t<this.ghostStruct.wrappedShapes.length;t++)this.ghostStruct.wrappedShapes[t].setScale();this.ghost.activate()}},{key:"updateByReAdd",value:function(){this.bodyIndex>=0&&(this.wrappedWorld.removeSharedBody(this),this.wrappedWorld.addSharedBody(this),this.bodyIndex=this.wrappedWorld.bodies.length),this.ghostIndex>=0&&(this.wrappedWorld.removeGhostObject(this),this.wrappedWorld.addGhostObject(this),this.ghostIndex=this.wrappedWorld.ghosts.length)}},{key:"destroy",value:function(){e.sharedBodesMap.delete(this.node.uuid),this.node=null,this.wrappedWorld=null;var t=this.bodyStruct;s5.destroy(t.localInertia),s5.destroy(t.worldQuat),h5(t.motionState,s5.btDefaultMotionState),h5(t.rbInfo,s5.btRigidBodyConstructionInfo),h5(t.body,s5.btRigidBody),h5(t.body,s5.btCollisionObject),h5(t.shape,s5.btCompoundShape),h5(t.startTransform,s5.btTransform),h5(t.localInertia,s5.btVector3),h5(t.worldQuat,s5.btQuaternion);var i="KEY"+t.id;delete x9.bodyStructs[i];var n=this.ghostStruct;s5.destroy(n.worldQuat),h5(n.ghost,s5.btCollisionObject),h5(n.shape,s5.btCompoundShape),h5(n.worldQuat,s5.btQuaternion);var r="KEY"+n.id;delete x9.bodyStructs[r],this.bodyStruct=null,this.ghostStruct=null}},{key:"isBodySleeping",value:function(){return this.body.getActivationState()==c9.ISLAND_SLEEPING}}]),e}();C9.idCounter=0,C9.sharedBodesMap=new Map;var w9=function(){function e(){Z(this,e),this.matrix=[]}return J(e,[{key:"get",value:function(e,t){if(t>e){var i=t;t=e,e=i}return this.matrix[(e*(e+1)>>1)+t-1]}},{key:"set",value:function(e,t,i){if(t>e){var n=t;t=e,e=n}this.matrix[(e*(e+1)>>1)+t-1]=i?1:0}},{key:"reset",value:function(){this.matrix.length=0}},{key:"setNumObjects",value:function(e){this.matrix.length=e*(e-1)>>1}}]),e}(),k9=function(){function e(){Z(this,e),this.data=void 0,this.data={keys:[]}}return J(e,[{key:"get",value:function(e,t){if(e>t){var i=t;t=e,e=i}return this.data[e+"-"+t]}},{key:"set",value:function(e,t,i){if(e>t){var n=t;t=e,e=n}var r=e+"-"+t;if(null==i){var o=this.data.keys.indexOf(r);if(-1!=o)return this.data.keys.splice(o,1),delete this.data[r],i}return this.get(e,t)||this.data.keys.push(r),this.data[r]=i,this.data[r]}},{key:"reset",value:function(){for(var e=this.data,t=e.keys;t.length>0;){delete e[t.pop()]}}},{key:"getLength",value:function(){return this.data.keys.length}},{key:"getKeyByIndex",value:function(e){return this.data.keys[e]}},{key:"getDataByKey",value:function(e){return this.data[e]}}]),e}(),O9={type:"onTriggerEnter",selfCollider:null,otherCollider:null},R9={type:"onCollisionEnter",selfCollider:null,otherCollider:null,contacts:[]},F9=function(){function e(){Z(this,e),this.EMPTY_SHAPE=new s5.btEmptyShape}return J(e,null,[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}();F9._instance=void 0;var I9=[],M9=new Mi,P9=new Mi,D9=function(){function e(t){Z(this,e),this._btWorld=void 0,this._btBroadphase=void 0,this._btSolver=void 0,this._btDispatcher=void 0,this._btGravity=void 0,this.bodies=[],this.ghosts=[],this.triggerArrayMat=new w9,this.collisionArrayMat=new w9,this.contactsDic=new k9,this.oldContactsDic=new k9,this.closeHitCB=new s5.ClosestRayResultCallback(new s5.btVector3,new s5.btVector3),this.allHitsCB=new s5.AllHitsRayResultCallback(new s5.btVector3,new s5.btVector3);var i=new s5.btDefaultCollisionConfiguration;this._btDispatcher=new s5.btCollisionDispatcher(i),this._btBroadphase=new s5.btDbvtBroadphase,this._btSolver=new s5.btSequentialImpulseConstraintSolver,this._btWorld=new s5.btDiscreteDynamicsWorld(this._btDispatcher,this._btBroadphase,this._btSolver,i),this._btGravity=new s5.btVector3(0,-10,0),this._btWorld.setGravity(this._btGravity)}return J(e,[{key:"setAllowSleep",value:function(e){}},{key:"setDefaultMaterial",value:function(e){}},{key:"setGravity",value:function(e){l5(this._btGravity,e),this._btWorld.setGravity(this._btGravity)}},{key:"impl",get:function(){return this._btWorld}}]),J(e,[{key:"step",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0!=this.bodies.length||0!=this.ghosts.length){null==t&&(t=e),this._btWorld.stepSimulation(t,i,e);for(var n=0;n<this.bodies.length;n++)this.bodies[n].syncPhysicsToScene()}}},{key:"syncSceneToPhysics",value:function(){for(var e=0;e<this.ghosts.length;e++)this.ghosts[e].syncSceneToGhost();for(var t=0;t<this.bodies.length;t++)this.bodies[t].syncSceneToPhysics()}},{key:"raycast",value:function(e,t,i,n){var r=l5(this.allHitsCB.m_rayFromWorld,e.o);e.computeHit(M9,t.maxDistance);var o=l5(this.allHitsCB.m_rayToWorld,M9);this.allHitsCB.m_collisionFilterGroup=-1,this.allHitsCB.m_collisionFilterMask=t.mask,this.allHitsCB.m_closestHitFraction=1,this.allHitsCB.m_shapePart=-1,this.allHitsCB.m_collisionObject=null,this.allHitsCB.m_shapeParts.clear(),this.allHitsCB.m_hitFractions.clear(),this.allHitsCB.m_collisionObjects.clear();var a=this.allHitsCB.m_hitPointWorld,s=this.allHitsCB.m_hitNormalWorld;if(a.clear(),s.clear(),this._btWorld.rayTest(r,o,this.allHitsCB),this.allHitsCB.hasHit()){for(var l=0,c=this.allHitsCB.m_collisionObjects.size();l<c;l++){var u=this.allHitsCB.m_shapeParts.at(l),h=this.allHitsCB.m_collisionObjects.at(l).getUserIndex(),p=x9.bodyAndGhosts["KEY"+h].wrappedShapes[u];c5(M9,a.at(l)),c5(P9,s.at(l));var f=Mi.distance(e.o,M9),_=i.add();_._assign(M9,f,p.collider,P9),n.push(_)}return!0}return!1}},{key:"raycastClosest",value:function(e,t,i){var n=l5(this.closeHitCB.m_rayFromWorld,e.o);e.computeHit(M9,t.maxDistance);var r=l5(this.closeHitCB.m_rayToWorld,M9);if(this.closeHitCB.m_collisionFilterGroup=-1,this.closeHitCB.m_collisionFilterMask=t.mask,this.closeHitCB.m_closestHitFraction=1,this.closeHitCB.m_collisionObject=null,this._btWorld.rayTest(n,r,this.closeHitCB),this.closeHitCB.hasHit()){var o=this.closeHitCB.m_collisionObject.getUserIndex(),a=x9.bodyAndGhosts["KEY"+o],s=this.closeHitCB.m_shapePart,l=a.wrappedShapes[s];c5(M9,this.closeHitCB.m_hitPointWorld),c5(P9,this.closeHitCB.m_hitNormalWorld);var c=Mi.distance(e.o,M9);return i._assign(M9,c,l.collider,P9),!0}return!1}},{key:"getSharedBody",value:function(e,t){return C9.getSharedBody(e,this,t)}},{key:"addSharedBody",value:function(e){this.bodies.indexOf(e)<0&&(this.bodies.push(e),this._btWorld.addRigidBody(e.body,e.collisionFilterGroup,e.collisionFilterMask))}},{key:"removeSharedBody",value:function(e){var t=this.bodies.indexOf(e);t>=0&&(this.bodies.splice(t,1),this._btWorld.removeRigidBody(e.body))}},{key:"addGhostObject",value:function(e){this.ghosts.indexOf(e)<0&&(this.ghosts.push(e),this._btWorld.addCollisionObject(e.ghost,e.collisionFilterGroup,e.collisionFilterMask))}},{key:"removeGhostObject",value:function(e){var t=this.ghosts.indexOf(e);t>=0&&(this.ghosts.splice(t,1),this._btWorld.removeCollisionObject(e.ghost))}},{key:"emitEvents",value:function(){for(var e=this._btDispatcher.getNumManifolds(),t=0;t<e;t++)for(var i=this._btDispatcher.getManifoldByIndexInternal(t),n=i.getNumContacts(),r=0;r<n;r++){var o=i.getContactPoint(r);if(o.getDistance()<=1e-4){var a=o.getShape0(),s=o.getShape1(),l=void 0,c=void 0;if(a.isCompound())l=s5.castObject(a,s5.btCompoundShape).getChildShape(o.m_index0).wrapped;else l=a.wrapped;if(s.isCompound())c=s5.castObject(s,s5.btCompoundShape).getChildShape(o.m_index1).wrapped;else c=s.wrapped;var u=this.contactsDic.get(l.id,c.id);null==u&&(u=this.contactsDic.set(l.id,c.id,{shape0:l,shape1:c,contacts:[]})),u.contacts.push(o)}}for(var h=this.contactsDic.getLength();h--;){for(var p=R9.contacts.length;p--;)I9.push(R9.contacts.pop());var f=this.contactsDic.getKeyByIndex(h),_=this.contactsDic.getDataByKey(f),d=_.shape0,m=_.shape1;this.oldContactsDic.set(d.id,m.id,_);var v=d.collider,y=m.collider;if(v&&y){if(v.isTrigger||y.isTrigger)this.triggerArrayMat.get(d.id,m.id)?O9.type="onTriggerStay":(O9.type="onTriggerEnter",this.triggerArrayMat.set(d.id,m.id,!0)),O9.selfCollider=v,O9.otherCollider=y,v.emit(O9.type,O9),O9.selfCollider=y,O9.otherCollider=v,y.emit(O9.type,O9);else{var g=v.attachedRigidBody,A=y.attachedRigidBody;if(g&&A){if(g.isSleeping&&A.isSleeping)continue}else if(null==g&&A){if(A.isSleeping)continue}else if(null==A&&g&&g.isSleeping)continue;this.collisionArrayMat.get(d.id,m.id)?R9.type="onCollisionStay":(R9.type="onCollisionEnter",this.collisionArrayMat.set(d.id,m.id,!0));for(var b=0;b<_.contacts.length;b++){var x=_.contacts[b];if(I9.length>0){var T=I9.pop();c5(T.contactA,x.m_localPointA),c5(T.contactB,x.m_localPointB),c5(T.normal,x.m_normalWorldOnB),R9.contacts.push(T)}else{var S={contactA:c5(new Mi,x.m_localPointA),contactB:c5(new Mi,x.m_localPointB),normal:c5(new Mi,x.m_normalWorldOnB)};R9.contacts.push(S)}}R9.selfCollider=v,R9.otherCollider=y,v.emit(R9.type,R9),R9.selfCollider=y,R9.otherCollider=v,y.emit(R9.type,R9)}null==this.oldContactsDic.get(d.id,m.id)&&this.oldContactsDic.set(d.id,m.id,_)}}for(var E=this.oldContactsDic.getLength();E--;){var C=this.oldContactsDic.getKeyByIndex(E),w=this.oldContactsDic.getDataByKey(C),k=w.shape0,O=w.shape1,R=k.collider,F=O.collider;if(R&&F){var I=R.isTrigger||F.isTrigger;if(null==this.contactsDic.getDataByKey(C))if(I)this.triggerArrayMat.get(k.id,O.id)&&(O9.type="onTriggerExit",O9.selfCollider=R,O9.otherCollider=F,R.emit(O9.type,O9),O9.selfCollider=F,O9.otherCollider=R,F.emit(O9.type,O9),this.triggerArrayMat.set(k.id,O.id,!1),this.oldContactsDic.set(k.id,O.id,null));else if(this.collisionArrayMat.get(k.id,O.id)){for(var M=R9.contacts.length;M--;)I9.push(R9.contacts.pop());for(var P=0;P<w.contacts.length;P++){var D=w.contacts[P];if(I9.length>0){var B=I9.pop();c5(B.contactA,D.m_localPointA),c5(B.contactB,D.m_localPointB),c5(B.normal,D.m_normalWorldOnB),R9.contacts.push(B)}else{var N={contactA:c5(new Mi,D.m_localPointA),contactB:c5(new Mi,D.m_localPointB),normal:c5(new Mi,D.m_normalWorldOnB)};R9.contacts.push(N)}}R9.type="onCollisionExit",R9.selfCollider=R,R9.otherCollider=F,R.emit(R9.type,R9),R9.selfCollider=F,R9.otherCollider=R,F.emit(R9.type,R9),this.collisionArrayMat.set(k.id,O.id,!1),this.oldContactsDic.set(k.id,O.id,null)}}}this.contactsDic.reset()}}]),e}(),B9=new Mi,N9=function(){function e(t){Z(this,e),this.id=void 0,this.type=void 0,this._index=-1,this._isEnabled=!1,this._isBinding=!1,this._isTrigger=!1,this._btCompound=null,this.transform=void 0,this.pos=void 0,this.quat=void 0,this.scale=void 0,this.type=t,this.id=e.idCounter++,this.pos=new s5.btVector3(0,0,0),this.quat=new s5.btQuaternion,this.transform=new s5.btTransform(this.quat,this.pos),this.transform.setIdentity(),this.scale=new s5.btVector3(1,1,1)}return J(e,[{key:"setMaterial",value:function(e){if(!this._isTrigger&&this._isEnabled&&e)if(this._btCompound){this._btCompound.setMaterial(this._index,e.friction,e.restitution,.1)}else this._sharedBody.body.setFriction(e.friction),this._sharedBody.body.setRestitution(e.restitution)}},{key:"setCenter",value:function(e){Mi.copy(B9,e),B9.multiply(this._collider.node.worldScale),l5(this.transform.getOrigin(),B9),this._btCompound&&this._btCompound.updateChildTransform(this._index,this.transform)}},{key:"setAsTrigger",value:function(e){this._isTrigger!=e&&(this._isEnabled&&(this._sharedBody.removeShape(this,!e),this._sharedBody.addShape(this,e)),this._isTrigger=e)}},{key:"attachedRigidBody",get:function(){return this._sharedBody.wrappedBody?this._sharedBody.wrappedBody.rigidBody:null}},{key:"impl",get:function(){return this._btShape}},{key:"collider",get:function(){return this._collider}},{key:"sharedBody",get:function(){return this._sharedBody}},{key:"index",get:function(){return this._index}}]),J(e,[{key:"initialize",value:function(e){this._collider=e,this._isBinding=!0,this.onComponentSet(),this.setWrapper(),this._sharedBody=S5.instance.physicsWorld.getSharedBody(this._collider.node),this._sharedBody.reference=!0}},{key:"onComponentSet",value:function(){}},{key:"onLoad",value:function(){this.setCenter(this._collider.center),this.setAsTrigger(this._collider.isTrigger)}},{key:"onEnable",value:function(){this._isEnabled=!0,this._sharedBody.addShape(this,this._isTrigger),this.setMaterial(this.collider.sharedMaterial)}},{key:"onDisable",value:function(){this._isEnabled=!1,this._sharedBody.removeShape(this,this._isTrigger)}},{key:"onDestroy",value:function(){this._sharedBody.reference=!1,this._btCompound=null,this._collider=null,s5.castObject(this._btShape,s5.btCollisionShape).wrapped=null,s5.destroy(this.transform),s5.destroy(this.pos),s5.destroy(this.quat),s5.destroy(this.scale),s5.destroy(this._btShape),h5(this.pos,s5.btVector3),h5(this.quat,s5.btQuaternion),h5(this.scale,s5.btVector3),h5(this.transform,s5.btTransform),h5(this._btShape,s5.btCollisionShape),this._btShape=null,this.transform=null,this.pos=null,this.quat=null,this.scale=null}},{key:"getGroup",value:function(){return this._sharedBody.collisionFilterGroup}},{key:"setGroup",value:function(e){this._sharedBody.collisionFilterGroup=e}},{key:"addGroup",value:function(e){this._sharedBody.collisionFilterGroup|=e}},{key:"removeGroup",value:function(e){this._sharedBody.collisionFilterGroup&=~e}},{key:"getMask",value:function(){return this._sharedBody.collisionFilterMask}},{key:"setMask",value:function(e){this._sharedBody.collisionFilterMask=e}},{key:"addMask",value:function(e){this._sharedBody.collisionFilterMask|=e}},{key:"removeMask",value:function(e){this._sharedBody.collisionFilterMask&=~e}},{key:"setCompound",value:function(e){this._btCompound&&(this._btCompound.removeChildShapeByIndex(this._index),this._index=-1),e&&(e.addChildShape(this.transform,this._btShape),this._index=e.getNumChildShapes()-1),this._btCompound=e}},{key:"setWrapper",value:function(){s5.castObject(this._btShape,s5.btCollisionShape).wrapped=this}},{key:"setScale",value:function(){this.setCenter(this._collider.center)}},{key:"debugTransform",value:function(t){var i;null==e._debugTransform&&(e._debugTransform=new s5.btTransform),i=this._isTrigger?this._sharedBody.ghost.getWorldTransform():this._sharedBody.body.getWorldTransform();var n=this.transform;e._debugTransform.setIdentity(),e._debugTransform.op_mul(i).op_mul(n);var r=e._debugTransform.getOrigin();t.worldPosition=new Mi(r.x(),r.y(),r.z());var o=e._debugTransform.getRotation();t.worldRotation=new Xi(o.x(),o.y(),o.z(),o.w());var a=this.impl.getLocalScaling();t.scale=new Mi(a.x(),a.y(),a.z())}}]),e}();N9.idCounter=0,N9._debugTransform=void 0;var L9,z9,G9,U9,X9,V9,H9,j9,W9,Y9,q9,Q9,Z9,K9,J9,$9=new Mi,e7=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,p9.BOX_SHAPE_PROXYTYPE))).halfExt=void 0,e.halfExt=new s5.btVector3(.5,.5,.5),e._btShape=new s5.btBoxShape(e.halfExt),e}return ee(t,N9),J(t,[{key:"setSize",value:function(e){Mi.copy($9,e),Mi.multiply($9,$9,this._collider.node.worldScale),l5(this.scale,$9),this._btShape.setLocalScaling(this.scale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"impl",get:function(){return this._btShape}},{key:"collider",get:function(){return this._collider}}]),J(t,[{key:"onLoad",value:function(){ae(te(t.prototype),"onLoad",this).call(this),this.setSize(this.collider.size)}},{key:"onDestroy",value:function(){ae(te(t.prototype),"onDestroy",this).call(this),s5.destroy(this.halfExt),this.halfExt=null}},{key:"setScale",value:function(){ae(te(t.prototype),"setScale",this).call(this),this.setSize(this.collider.size)}}]),t}(),t7=new Mi,i7=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,p9.SPHERE_SHAPE_PROXYTYPE)))._btShape=new s5.btSphereShape(.5),e}return ee(t,N9),J(t,[{key:"setRadius",value:function(e){var t=this._collider.node.worldScale,i=Math.abs(Math.max(Math.max(t.x,t.y),t.z));t7.set(e,e,e),t7.multiplyScalar(2*i),l5(this.scale,t7),this._btShape.setLocalScaling(this.scale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"impl",get:function(){return this._btShape}},{key:"collider",get:function(){return this._collider}}]),J(t,[{key:"onLoad",value:function(){ae(te(t.prototype),"onLoad",this).call(this),this.setRadius(this.collider.radius)}},{key:"setScale",value:function(){ae(te(t.prototype),"setScale",this).call(this),this.setRadius(this.collider.radius)}}]),t}(),n7=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,p9.CAPSULE_SHAPE_PROXYTYPE)))._btShape=new s5.btCapsuleShape(.5,1),e}return ee(t,N9),J(t,[{key:"setCylinderHeight",value:function(e){this.updateProperties(this.collider.radius,this.collider.cylinderHeight,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"setDirection",value:function(e){this.updateProperties(this.collider.radius,this.collider.cylinderHeight,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"setRadius",value:function(e){this.updateProperties(this.collider.radius,this.collider.cylinderHeight,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"impl",get:function(){return this._btShape}},{key:"collider",get:function(){return this._collider}}]),J(t,[{key:"onLoad",value:function(){ae(te(t.prototype),"onLoad",this).call(this),this.setRadius(this.collider.radius)}},{key:"setScale",value:function(){ae(te(t.prototype),"setScale",this).call(this),this.setRadius(this.collider.radius)}},{key:"updateProperties",value:function(e,t,i,n){var r=n,o=i;if(1==o){var a=e*Math.abs(ki(r.x,r.z)),s=t/2*Math.abs(r.y);this.impl.updateProp(a,s,o)}else if(0==o){var l=e*Math.abs(ki(r.y,r.z)),c=t/2*Math.abs(r.x);this.impl.updateProp(l,c,o)}else{var u=e*Math.abs(ki(r.x,r.y)),h=t/2*Math.abs(r.z);this.impl.updateProp(u,h,o)}}}]),t}(),r7=function(e){function t(){return Z(this,t),re(this,te(t).call(this,p9.TRIANGLE_MESH_SHAPE_PROXYTYPE))}return ee(t,N9),J(t,[{key:"setMesh",value:function(e){if(this._isBinding)if(null!=this._btShape&&this._btShape!=F9.instance.EMPTY_SHAPE)g(9620);else{var t=e;if(t&&t.renderingSubMeshes.length>0){this._btTriangleMesh=new s5.btTriangleMesh;for(var i=t.renderingSubMeshes.length,n=0;n<i;n++){var r=t.renderingSubMeshes[n],o=r.geometricInfo;if(o){var a=r.primitiveMode,s=o.positions,l=o.indices;if(a==exports.GFXPrimitiveMode.TRIANGLE_LIST)for(var c=l.length,u=0;u<c;u+=3){var h=3*l[u],p=3*l[u+1],f=3*l[u+2],_=new s5.btVector3(s[h],s[h+1],s[h+2]),d=new s5.btVector3(s[p],s[p+1],s[p+2]),m=new s5.btVector3(s[f],s[f+1],s[f+2]);this._btTriangleMesh.addTriangle(_,d,m)}else if(a==exports.GFXPrimitiveMode.TRIANGLE_STRIP)for(var v=l.length-2,y=0;y<v;y+=1){var A=3*l[y-0],b=3*l[y+0+1],x=3*l[y+2],T=new s5.btVector3(s[A],s[A+1],s[A+2]),S=new s5.btVector3(s[b],s[b+1],s[b+2]),E=new s5.btVector3(s[x],s[x+1],s[x+2]);this._btTriangleMesh.addTriangle(T,S,E)}else if(a==exports.GFXPrimitiveMode.TRIANGLE_FAN)for(var C=l.length-1,w=3*l[0],k=new s5.btVector3(s[w],s[w+1],s[w+2]),O=1;O<C;O+=1){var R=3*l[O],F=3*l[O+1],I=new s5.btVector3(s[R],s[R+1],s[R+2]),M=new s5.btVector3(s[F],s[F+1],s[F+2]);this._btTriangleMesh.addTriangle(k,I,M)}}}this._btShape=new s5.btBvhTriangleMeshShape(this._btTriangleMesh,!0,!0),l5(this.scale,this._collider.node.worldScale),this._btShape.setLocalScaling(this.scale),this.setWrapper(),this.setCompound(this._btCompound)}else this._btShape=F9.instance.EMPTY_SHAPE}}},{key:"collider",get:function(){return this._collider}},{key:"impl",get:function(){return this._btShape}}]),J(t,[{key:"onComponentSet",value:function(){this.setMesh(this.collider.mesh)}},{key:"setCompound",value:function(e){ae(te(t.prototype),"setCompound",this).call(this,e),this.impl.setUserIndex(this._index)}},{key:"setScale",value:function(){ae(te(t.prototype),"setScale",this).call(this),l5(this.scale,this._collider.node.worldScale),this._btShape.setLocalScaling(this.scale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}}]),t}(),o7=function(e){function t(){var e;return Z(this,t),(e=re(this,te(t).call(this,p9.CYLINDER_SHAPE_PROXYTYPE))).halfExtents=void 0,e.halfExtents=new s5.btVector3(.5,1,.5),e._btShape=new s5.btCylinderShape(e.halfExtents),e}return ee(t,N9),J(t,[{key:"setHeight",value:function(e){this.updateProperties(this.collider.radius,this.collider.height,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"setDirection",value:function(e){this.updateProperties(this.collider.radius,this.collider.height,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"setRadius",value:function(e){this.updateProperties(this.collider.radius,this.collider.height,this.collider.direction,this._collider.node.worldScale),this._btCompound&&this._btCompound.updateChildTransform(this.index,this.transform,!0)}},{key:"impl",get:function(){return this._btShape}},{key:"collider",get:function(){return this._collider}}]),J(t,[{key:"onLoad",value:function(){ae(te(t.prototype),"onLoad",this).call(this),this.setRadius(this.collider.radius)}},{key:"setScale",value:function(){ae(te(t.prototype),"setScale",this).call(this),this.setRadius(this.collider.radius)}},{key:"updateProperties",value:function(e,t,i,n){var r=n,o=i;if(1==o){var a=t*Math.abs(r.y),s=e*Math.abs(ki(r.x,r.z)),l=a/2;this.impl.updateProp(s,l,o)}else if(0==o){var c=t*Math.abs(r.x),u=e*Math.abs(ki(r.y,r.z)),h=c/2;this.impl.updateProp(u,h,o)}else{var p=t*Math.abs(r.z),f=e*Math.abs(ki(r.x,r.y)),_=p/2;this.impl.updateProp(f,_,o)}}}]),t}();exports.removeProperty(n7.prototype,"shape.prototype",[{name:"setHeight",suggest:"You should use the interface provided by the component."}]),Z8=(L9={box:e7,sphere:i7,body:b9,world:D9,capsule:n7,trimesh:r7,cylinder:o7}).box,K8=L9.sphere,Q8=L9.body,q8=L9.world,L9.capsule&&(J8=L9.capsule),L9.trimesh&&($8=L9.trimesh),L9.cylinder&&(e5=L9.cylinder),null==window.atob&&(window.atob=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0,r=0,o=0,a=0,s=0,l=0,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{n=t.indexOf(e.charAt(c++))<<2|(a=t.indexOf(e.charAt(c++)))>>4,r=(15&a)<<4|(s=t.indexOf(e.charAt(c++)))>>2,o=(3&s)<<6|(l=t.indexOf(e.charAt(c++))),i+=String.fromCharCode(n),64!==s&&(i+=String.fromCharCode(r)),64!==l&&(i+=String.fromCharCode(o))}while(c<e.length);return i}),window.Ammo=s5;var a7=(z9=qa("cc.AudioSourceComponent"),G9=as("i18n:cc.AudioSourceComponent"),U9=es("Components/AudioSource"),X9=Qa(exports.AudioClip),V9=Qa({type:exports.AudioClip,tooltip:"i18n:audio.clip"}),H9=Qa({tooltip:"i18n:audio.loop"}),j9=Qa({tooltip:"i18n:audio.playOnAwake"}),W9=Qa({range:[0,1],tooltip:"i18n:audio.volume"}),z9(Y9=G9(Y9=U9((Q9=de((q9=function(e){function t(){var e,i;Z(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _e(i=re(this,(e=te(t)).call.apply(e,[this].concat(r))),"_clip",Q9,ne(i)),_e(i,"_loop",Z9,ne(i)),_e(i,"_playOnAwake",K9,ne(i)),_e(i,"_volume",J9,ne(i)),i._cachedCurrentTime=0,i}return ee(t,sp),J(t,[{key:"onLoad",value:function(){this._syncStates(),this._playOnAwake&&this.play()}},{key:"onDisable",value:function(){this.pause()}},{key:"onDestroy",value:function(){this.stop()}},{key:"play",value:function(){this._clip&&(this.playing?this.currentTime=0:this._clip.play())}},{key:"pause",value:function(){this._clip&&this._clip.pause()}},{key:"stop",value:function(){this._clip&&this._clip.stop()}},{key:"playOneShot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.playOneShot(this._volume*t)}},{key:"_syncStates",value:function(){this._clip&&(this._clip.setCurrentTime(this._cachedCurrentTime),this._clip.setLoop(this._loop),this._clip.setVolume(this._volume,!0),this._volume=this._clip.getVolume())}},{key:"clip",set:function(e){this._clip=e,this._syncStates()},get:function(){return this._clip}},{key:"loop",set:function(e){this._loop=e,this._clip&&this._clip.setLoop(e)},get:function(){return this._loop}},{key:"playOnAwake",set:function(e){this._playOnAwake=e},get:function(){return this._playOnAwake}},{key:"volume",set:function(e){isNaN(e)?console.warn("illegal audio volume!"):(e=pi(e,0,1),this._clip?(this._clip.setVolume(e),this._volume=this._clip.getVolume()):this._volume=e)},get:function(){return this._volume}},{key:"currentTime",set:function(e){isNaN(e)?console.warn("illegal audio time!"):(e=pi(e,0,this.duration),this._cachedCurrentTime=e,this._clip&&this._clip.setCurrentTime(this._cachedCurrentTime))},get:function(){return this._clip?this._clip.getCurrentTime():this._cachedCurrentTime}},{key:"duration",get:function(){return this._clip?this._clip.getDuration():0}},{key:"state",get:function(){return this._clip?this._clip.state:exports.AudioClip.PlayingState.INITIALIZING}},{key:"playing",get:function(){return this.state===exports.AudioClip.PlayingState.PLAYING}}]),t}()).prototype,"_clip",[X9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z9=de(q9.prototype,"_loop",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K9=de(q9.prototype,"_playOnAwake",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J9=de(q9.prototype,"_volume",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),de(q9.prototype,"clip",[V9],Object.getOwnPropertyDescriptor(q9.prototype,"clip"),q9.prototype),de(q9.prototype,"loop",[H9],Object.getOwnPropertyDescriptor(q9.prototype,"loop"),q9.prototype),de(q9.prototype,"playOnAwake",[j9],Object.getOwnPropertyDescriptor(q9.prototype,"playOnAwake"),q9.prototype),de(q9.prototype,"volume",[W9],Object.getOwnPropertyDescriptor(q9.prototype,"volume"),q9.prototype),Y9=q9))||Y9)||Y9)||Y9);cc.AudioSourceComponent=a7,exports.Acceleration=JT,exports.AffineTransform=$i,exports.AnimCurve=gM,exports.AnimationManager=AP,exports.AnimationState=JM,exports.Asset=Ul,exports.AssetLibrary=Id,exports.AudioSourceComponent=a7,exports.BASELINE_RATIO=.26,exports.BaseNode=ky,exports.BatchedSkinningModelComponent=oF,exports.BatchingUtility=Kp,exports.BillboardComponent=xK,exports.BitMask=gt,exports.BitmapFont=Qd,exports.BlockInputEventsComponent=hO,exports.BoxColliderComponent=i3,exports.ButtonComponent=yN,exports.CCBoolean=It,exports.CCClass=ni,exports.CCFloat=Ft,exports.CCInteger=Rt,exports.CCObject=ul,exports.CCString=Mt,exports.CachedArray=Sa,exports.CanvasComponent=$O,exports.CanvasPool=aL,exports.CapsuleColliderComponent=_9,exports.ColliderComponent=t3,exports.Color=on,exports.CompactValueTypeArray=Uf,exports.Component=sp,exports.ComponentModifier=eD,exports.ConstantForce=y9,exports.CubicSplineNumberValue=CI,exports.CubicSplineQuatValue=EI,exports.CubicSplineVec2Value=xI,exports.CubicSplineVec3Value=TI,exports.CubicSplineVec4Value=SI,exports.CurveRange=kK,exports.CurveValueAdapter=tD,exports.CylinderColliderComponent=d9,exports.DirectionalLightComponent=eI,exports.Director=lk,exports.Downloader=Sm,exports.EPSILON=ci,exports.EditBoxComponent=qz,exports.EffectAsset=Lh,exports.Enum=At,exports.Event=ll,exports.EventAcceleration=Cv,exports.EventHandler=Ak,exports.EventInfo=AM,exports.EventKeyboard=wv,exports.EventMouse=Sv,exports.EventTarget=xl,exports.EventTouch=Ev,exports.Eventify=Al,exports.Font=Ld,exports.ForwardFlow=DT,exports.ForwardPipeline=HT,exports.ForwardStage=PT,exports.GFXBindingLayout=qr,exports.GFXBindingUnit=function e(){Z(this,e),this.binding=0,this.type=exports.GFXBindingType.UNKNOWN,this.name="",this.buffer=null,this.texView=null,this.sampler=null},exports.GFXBlendState=Br,exports.GFXBlendTarget=Dr,exports.GFXBuffer=wr,exports.GFXBufferTextureCopy=vr,exports.GFXColorAttachment=function e(){Z(this,e),this.format=exports.GFXFormat.UNKNOWN,this.loadOp=exports.GFXLoadOp.CLEAR,this.storeOp=exports.GFXStoreOp.STORE,this.sampleCount=1,this.beginLayout=exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL,this.endLayout=exports.GFXTextureLayout.COLOR_ATTACHMENT_OPTIMAL},exports.GFXCommandAllocator=Qr,exports.GFXCommandBuffer=kr,exports.GFXDepthStencilAttachment=function e(){Z(this,e),this.format=exports.GFXFormat.UNKNOWN,this.depthLoadOp=exports.GFXLoadOp.CLEAR,this.depthStoreOp=exports.GFXStoreOp.STORE,this.stencilLoadOp=exports.GFXLoadOp.CLEAR,this.stencilStoreOp=exports.GFXStoreOp.STORE,this.sampleCount=1,this.beginLayout=exports.GFXTextureLayout.DEPTH_STENCIL_ATTACHMENT_OPTIMAL,this.endLayout=exports.GFXTextureLayout.DEPTH_STENCIL_ATTACHMENT_OPTIMAL},exports.GFXDepthStencilState=Pr,exports.GFXDevice=Or,exports.GFXFormatInfos=yr,exports.GFXFormatSize=gr,exports.GFXFormatSurfaceSize=Ar,exports.GFXFramebuffer=Rr,exports.GFXGetTypeSize=xr,exports.GFXInputAssembler=Fr,exports.GFXInputState=Nr,exports.GFXObject=fr,exports.GFXPipelineLayout=Ir,exports.GFXPipelineState=Lr,exports.GFXQueue=zr,exports.GFXRasterizerState=Mr,exports.GFXRenderPass=Gr,exports.GFXSampler=Xr,exports.GFXSamplerState=Ur,exports.GFXShader=Vr,exports.GFXTexture=Wr,exports.GFXTextureCopy=mr,exports.GFXTextureSubres=dr,exports.GFXTextureView=Yr,exports.GFXUniform=function e(){Z(this,e),this.name="",this.type=exports.GFXType.UNKNOWN,this.count=1},exports.GFXUniformBlock=function e(){Z(this,e),this.binding=-1,this.name="",this.members=[]},exports.GFXUniformSampler=function e(){Z(this,e),this.binding=-1,this.name="",this.type=exports.GFXType.UNKNOWN,this.count=1},exports.GFXWindow=Zr,exports.GFX_DRAW_INFO_SIZE=56,exports.GFX_MAX_ATTACHMENTS=4,exports.GFX_MAX_BUFFER_BINDINGS=24,exports.GFX_MAX_TEXTURE_UNITS=16,exports.GFX_MAX_VERTEX_ATTRIBUTES=16,exports.Game=eS,exports.GraphicsComponent=HG,exports.HierachyModifier=$P,exports.HtmlTextParser=Na,exports.ImageAsset=Vl,exports.IsPowerOf2=Hr,exports.JavaScript=Hh,exports.JsonAsset=O_,exports.LabelAtlas=Zd,exports.LabelComponent=sL,exports.LabelOutlineComponent=KU,exports.Layers=Ec,exports.LayoutComponent=CG,exports.LineComponent=WJ,exports.Loader=Vm,exports.LoadingItems=$_,exports.MaskComponent=dU,exports.Mat3=zi,exports.Mat4=Qi,exports.Material=Xh,exports.Mesh=lu,exports.MeshBuffer=Jw,exports.MeshColliderComponent=m9,exports.MissingScript=vf,exports.Node=rg,exports.NodeActivator=zb,exports.NodePool=RD,exports.PageViewComponent=NW,exports.PageViewIndicatorComponent=xW,exports.ParticleSystemComponent=W8,exports.ParticleUtils=Y8,exports.PhysicMaterial=x5,exports.PhysicsRayResult=T5,exports.PhysicsSystem=S5,exports.Pipeline=id,exports.Pool=xa,exports.Prefab=m_,exports.PrefabInfo=As,exports.PrivateNode=oA,exports.Profiler=mD,exports.ProgressBarComponent=CU,exports.Quat=Xi,exports.RatioSampler=yM,exports.RawAsset=Rl,exports.Rect=nn,exports.RecyclePool=Ta,exports.RenderFlow=Vx,exports.RenderPipeline=Zx,exports.RenderPipelineAsset=Kx,exports.RenderStage=Fx,exports.RenderTexture=xu,exports.RenderView=tT,exports.RenderableComponent=Yp,exports.ResolutionPolicy=sS,exports.RichTextComponent=vX,exports.RigidBodyComponent=v9,exports.Scene=iA,exports.SceneAsset=A_,exports.Scheduler=Qw,exports.Script=Vh,exports.ScrollBarComponent=EX,exports.ScrollViewComponent=wV,exports.Size=en,exports.SkelAnimDataHub=DS,exports.SkeletalAnimationComponent=JP,exports.SkeletalAnimationState=VP,exports.Skeleton=pv,exports.SkinningModelComponent=JR,exports.SkinningModelUnit=iF,exports.SliderComponent=GV,exports.Socket=HP,exports.SphereColliderComponent=n3,exports.SphereLightComponent=tI,exports.SpotLightComponent=iI,exports.SpriteAtlas=S_,exports.SpriteComponent=Uw,exports.SpriteFrame=Ru,exports.StencilManager=$w,exports.SubContextView=Xw,exports.System=Vw,exports.SystemEvent=fS,exports.TTFFont=Yd,exports.TextAsset=k_,exports.Texture2D=Tc,exports.TextureCube=Fu,exports.ToggleComponent=lH,exports.ToggleContainerComponent=oH,exports.ToneMapFlow=LT,exports.ToneMapStage=NT,exports.Touch=YT,exports.TypeScript=rp,exports.UIComponent=JC,exports.UICoordinateTrackerComponent=pI,exports.UIModelComponent=pH,exports.UIOpacityComponent=XW,exports.UIRenderComponent=Fw,exports.UIReorderComponent=Gj,exports.UIStaticBatchComponent=UW,exports.UITransformComponent=By,exports.UIVertexFormat=ok,exports.UniformCurveValueAdapter=iD,exports.ValueType=xt,exports.Vec2=Oi,exports.Vec3=Mi,exports.Vec4=Ni,exports.View=rS,exports.ViewGroupComponent=iV,exports.WebviewComponent=dj,exports.WorldNode3DToLocalNodeUI=$p,exports.WorldNode3DToWorldNodeUI=ef,exports._decorator=gs,exports.absMax=ki,exports.absMaxComponent=wi,exports.animation=wI,exports.approx=hi,exports.assert=p,exports.assertID=S,exports.barFilled=rZ,exports.bezier=OI,exports.bezierByTime=BI,exports.bits=q,exports.bmfont=Iq,exports.builtinResMgr=Nu,exports.ccenum=bt,exports.cclegacy=FD,exports.clamp=pi,exports.clamp01=fi,exports.color=an,exports.computeRatioByType=xM,exports.convertUtils=df,exports.deserialize=bf,exports.director=gk,exports.easing=mM,exports.effects=Du,exports.equals=ui,exports.error=h,exports.errorID=b,exports.eventManager=Nv,exports.find=nA,exports.fragmentText=Pa,exports.game=tS,exports.geometry=ba,exports.getPathFromRoot=function(e,t){for(var i=e,n="";null!==i&&i!==t;)n="".concat(i.name,"/").concat(n),i=i.parent;return n.slice(0,-1)},exports.getTypedArrayConstructor=Tr,exports.getWorldTransformUntilRoot=LS,exports.graphics=JY,exports.graphicsAssembler=$Y,exports.instantiate=Bf,exports.inverseLerp=Ci,exports.isCustomTargetModifier=oD,exports.isDisplayStats=C,exports.isElementModifier=rD,exports.isPropertyModifier=nD,exports.isUnicodeCJK=Fa,exports.isUnicodeSpace=Ia,exports.isValid=pl,exports.js=nt,exports.labelAssembler=ZQ,exports.lerp=_i,exports.letter=AQ,exports.loader=Km,exports.log=c,exports.logID=v,exports.macro=_c,exports.mask=JQ,exports.maskEnd=$Q,exports.mat4=Ji,exports.math=fn,exports.memop=Ea,exports.misc=yt,exports.murmurhash2_32_gc=sl,exports.nextPow2=Ti,exports.path=X,exports.pingPong=Ei,exports.pipeline=jT,exports.primitives=JE,exports.profiler=vD,exports.pseudoRandom=Ai,exports.pseudoRandomRange=bi,exports.pseudoRandomRangeInt=xi,exports.quat=qi,exports.radialFilled=vZ,exports.random=vi,exports.randomRange=yi,exports.randomRangeInt=gi,exports.rect=rn,exports.renderer=KC,exports.repeat=Si,exports.safeMeasureText=Ma,exports.sampleAnimationCurve=bM,exports.screen=dS,exports.setDefaultLogTimes=function(e){e>0&&(un=e)},exports.setDisplayStats=w,exports.simple=AZ,exports.size=tn,exports.sliced=TZ,exports.spriteAssembler=VZ,exports.sys=ws,exports.systemEvent=_S,exports.textureUtil=hv,exports.toDegree=mi,exports.toRadian=di,exports.ttf=QQ,exports.url=D_,exports.utils=EE,exports.v2=Ii,exports.v3=Bi,exports.v4=Li,exports.view=lS,exports.warn=u,exports.warnID=g,exports.widgetManager=KW;
